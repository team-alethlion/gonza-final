(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,555781,(e,t,a)=>{let r=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw r.code="MODULE_UNPARSABLE",r},727612,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],727612)},871689,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},691162,e=>{"use strict";let t;var a=e.i(271645),r=e.i(30030),s=e.i(820783),i=e.i(326999),l=e.i(981140),o=e.i(843476),n=Symbol("radix.slottable"),d="AlertDialog",[c,u]=(0,r.createContextScope)(d,[i.createDialogScope]),g=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:t,...a}=e,r=g(t);return(0,o.jsx)(i.Root,{...r,...a,modal:!0})};m.displayName=d;var p=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,o.jsx)(i.Trigger,{...s,...r,ref:t})});p.displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:t,...a}=e,r=g(t);return(0,o.jsx)(i.Portal,{...r,...a})};x.displayName="AlertDialogPortal";var y=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,o.jsx)(i.Overlay,{...s,...r,ref:t})});y.displayName="AlertDialogOverlay";var f="AlertDialogContent",[h,C]=c(f),j=((t=({children:e})=>(0,o.jsx)(o.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=n,t),v=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,c=g(r),u=a.useRef(null),m=(0,s.useComposedRefs)(t,u),p=a.useRef(null);return(0,o.jsx)(i.WarningProvider,{contentName:f,titleName:D,docsSlug:"alert-dialog",children:(0,o.jsx)(h,{scope:r,cancelRef:p,children:(0,o.jsxs)(i.Content,{role:"alertdialog",...c,...d,ref:m,onOpenAutoFocus:(0,l.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(j,{children:n}),(0,o.jsx)(E,{contentRef:u})]})})})});v.displayName=f;var D="AlertDialogTitle",A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,o.jsx)(i.Title,{...s,...r,ref:t})});A.displayName=D;var N="AlertDialogDescription",w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,o.jsx)(i.Description,{...s,...r,ref:t})});w.displayName=N;var b=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,o.jsx)(i.Close,{...s,...r,ref:t})});b.displayName="AlertDialogAction";var T="AlertDialogCancel",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,{cancelRef:l}=C(T,a),n=g(a),d=(0,s.useComposedRefs)(t,l);return(0,o.jsx)(i.Close,{...n,...r,ref:d})});k.displayName=T;var E=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};e.s(["Action",()=>b,"AlertDialog",()=>m,"AlertDialogAction",()=>b,"AlertDialogCancel",()=>k,"AlertDialogContent",()=>v,"AlertDialogDescription",()=>w,"AlertDialogOverlay",()=>y,"AlertDialogPortal",()=>x,"AlertDialogTitle",()=>A,"AlertDialogTrigger",()=>p,"Cancel",()=>k,"Content",()=>v,"Description",()=>w,"Overlay",()=>y,"Portal",()=>x,"Root",()=>m,"Title",()=>A,"Trigger",()=>p,"createAlertDialogScope",()=>u],691162)},868499,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(691162),s=e.i(975157),i=e.i(519455);let l=r.Root,o=r.Trigger,n=r.Portal,d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Overlay,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:i}));d.displayName=r.Overlay.displayName;let c=a.forwardRef(({className:e,...a},i)=>(0,t.jsxs)(n,{children:[(0,t.jsx)(d,{}),(0,t.jsx)(r.Content,{ref:i,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));c.displayName=r.Content.displayName;let u=({className:e,...a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});u.displayName="AlertDialogHeader";let g=({className:e,...a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});g.displayName="AlertDialogFooter";let m=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Title,{ref:i,className:(0,s.cn)("text-lg font-semibold",e),...a}));m.displayName=r.Title.displayName;let p=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Description,{ref:i,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));p.displayName=r.Description.displayName;let x=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)(r.Action,{ref:l,className:(0,s.cn)((0,i.buttonVariants)(),e),...a}));x.displayName=r.Action.displayName;let y=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)(r.Cancel,{ref:l,className:(0,s.cn)((0,i.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));y.displayName=r.Cancel.displayName,e.s(["AlertDialog",()=>l,"AlertDialogAction",()=>x,"AlertDialogCancel",()=>y,"AlertDialogContent",()=>c,"AlertDialogDescription",()=>p,"AlertDialogFooter",()=>g,"AlertDialogHeader",()=>u,"AlertDialogTitle",()=>m,"AlertDialogTrigger",()=>o])},908482,e=>{"use strict";var t=e.i(271645),a=e.i(908406),r=e.i(422713),s=e.i(555781);e.s(["useCategories",0,e=>{let[i,l]=(0,t.useState)([]),[o,n]=(0,t.useState)(!0),{toast:d}=(0,a.useToast)(),{currentBusiness:c}=(0,r.useBusiness)(),u=(0,t.useCallback)(async()=>{try{if(!c?.id){l([]),n(!1);return}n(!0);let e=await (0,s.getProductCategoriesAction)(c.id);if(!e.success||!e.data)throw Error(e.error||"Failed to fetch categories");let t=e.data.map(e=>({id:e.id,name:e.name,createdAt:e.createdAt?new Date(e.createdAt):e.created_at?new Date(e.created_at):void 0}));l(t)}catch(e){console.error("Error loading categories:",e),d({title:"Error",description:"Failed to load product categories.",variant:"destructive"})}finally{n(!1)}},[c?.id,d]);(0,t.useEffect)(()=>{u()},[u]);let g=async t=>{try{if(!e||!c?.id)return null;let a=i.find(e=>e.name.toLowerCase()===t.toLowerCase());if(a)return d({title:"Category exists",description:"This category already exists."}),a;let r=await (0,s.createProductCategoryAction)(c.id,e,t);if(!r.success||!r.data)throw Error(r.error);let o={id:r.data.id,name:r.data.name,createdAt:new Date(r.data.createdAt)};return l(e=>[...e,o]),d({title:"Success",description:"Category created successfully"}),o}catch(e){return console.error("Error creating category:",e),d({title:"Error",description:"Failed to create category.",variant:"destructive"}),null}},m=async(e,t)=>{try{if(i.find(a=>a.name.toLowerCase()===t.toLowerCase()&&a.id!==e))return d({title:"Category exists",description:"Another category with this name already exists."}),!1;let a=await (0,s.updateProductCategoryAction)(e,t);if(!a.success)throw Error(a.error);return l(a=>a.map(a=>a.id===e?{...a,name:t}:a)),d({title:"Success",description:"Category updated successfully"}),!0}catch(e){return console.error("Error updating category:",e),d({title:"Error",description:"Failed to update category.",variant:"destructive"}),!1}};return{categories:i,isLoading:o,loadCategories:u,createCategory:g,updateCategory:m,deleteCategory:async e=>{try{let t=await (0,s.deleteProductCategoryAction)(e);if(!t.success)return d({title:"Cannot delete category",description:t.error||"Failed to delete category.",variant:"destructive"}),!1;return l(t=>t.filter(t=>t.id!==e)),d({title:"Success",description:"Category deleted successfully"}),!0}catch(e){return console.error("Error deleting category:",e),d({title:"Error",description:"Failed to delete category.",variant:"destructive"}),!1}}}}])},788699,e=>{"use strict";let t=(0,e.i(475254).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],788699)},628315,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(904792),s=e.i(679788),i=e.i(519455),l=e.i(793479),o=e.i(871689),n=e.i(107233),d=e.i(788699),c=e.i(727612),u=e.i(102594),g=e.i(908482),m=e.i(515288),p=e.i(776639),x=e.i(868499),y=e.i(846696);e.s(["default",0,()=>{let e=(0,r.useNavigate)(),{user:f}=(0,u.useAuth)(),{categories:h,isLoading:C,createCategory:j,updateCategory:v,deleteCategory:D}=(0,g.useCategories)(f?.id),[A]=(0,s.useSearchParams)(),N=A.get("returnTo"),[w,b]=(0,a.useState)(""),[T,k]=(0,a.useState)(null),[E,R]=(0,a.useState)(""),[P,S]=(0,a.useState)(!1),F=async()=>{if(!w.trim())return void y.toast.error("Category name cannot be empty");S(!0);try{await j(w.trim())&&(y.toast.success("Category created successfully"),b(""))}finally{S(!1)}},B=async()=>{if(!T||!E.trim())return void y.toast.error("Category name cannot be empty");S(!0);try{await v(T,E.trim())&&(y.toast.success("Category updated successfully"),k(null),R(""))}finally{S(!1)}},O=async e=>{S(!0);try{await D(e)&&y.toast.success("Category deleted successfully")}finally{S(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{N?e(N):e("/products")},className:"flex items-center gap-1",children:[(0,t.jsx)(o.ArrowLeft,{className:"h-4 w-4"}),N?"Back to Product Form":"Back to Products"]})}),(0,t.jsx)("h1",{className:"text-2xl font-bold md:text-3xl text-sales-dark",children:"Categories"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your product categories"})]})}),(0,t.jsxs)(m.Card,{children:[(0,t.jsx)(m.CardHeader,{children:(0,t.jsxs)(m.CardTitle,{className:"flex items-center justify-between",children:["Add New Category",(0,t.jsxs)(p.Dialog,{children:[(0,t.jsx)(p.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Plus,{className:"h-4 w-4"}),"Add Category"]})}),(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(p.DialogHeader,{children:[(0,t.jsx)(p.DialogTitle,{children:"Create New Category"}),(0,t.jsx)(p.DialogDescription,{children:"Enter a name for your new product category."})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(l.Input,{placeholder:"Enter category name",value:w,onChange:e=>b(e.target.value)})}),(0,t.jsxs)(p.DialogFooter,{children:[(0,t.jsx)(p.DialogClose,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(i.Button,{onClick:F,disabled:!w.trim()||P,children:P?"Creating...":"Create Category"})]})]})]})]})}),(0,t.jsx)(m.CardContent,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:'Create categories to organize your products better. Click "Add Category" to get started.'})})]}),h.length>0&&(0,t.jsxs)(m.Card,{children:[(0,t.jsx)(m.CardHeader,{children:(0,t.jsxs)(m.CardTitle,{children:["Existing Categories (",h.length,")"]})}),(0,t.jsx)(m.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{var t,a;return t=e.id,a=e.name,void(k(t),R(a))},className:"flex items-center gap-1",children:[(0,t.jsx)(d.Pencil,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)(x.AlertDialog,{children:[(0,t.jsx)(x.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-destructive hover:text-destructive",children:[(0,t.jsx)(c.Trash2,{className:"h-4 w-4"}),"Delete"]})}),(0,t.jsxs)(x.AlertDialogContent,{children:[(0,t.jsxs)(x.AlertDialogHeader,{children:[(0,t.jsx)(x.AlertDialogTitle,{children:"Delete Category"}),(0,t.jsxs)(x.AlertDialogDescription,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone. Products using this category will need to be reassigned.']})]}),(0,t.jsxs)(x.AlertDialogFooter,{children:[(0,t.jsx)(x.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(x.AlertDialogAction,{onClick:()=>O(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Category"})]})]})]})]})]},e.id))})})]}),null!==T&&(0,t.jsx)(p.Dialog,{open:null!==T,onOpenChange:e=>!e&&k(null),children:(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(p.DialogHeader,{children:[(0,t.jsx)(p.DialogTitle,{children:"Edit Category"}),(0,t.jsx)(p.DialogDescription,{children:"Update the name of this category."})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(l.Input,{placeholder:"Enter category name",value:E,onChange:e=>R(e.target.value)})}),(0,t.jsxs)(p.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>k(null),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:B,disabled:!E.trim()||P,children:P?"Saving...":"Save Changes"})]})]})}),0===h.length&&!C&&(0,t.jsx)(m.Card,{children:(0,t.jsx)(m.CardContent,{className:"py-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No categories created yet. Create your first category to get started."})})})]})}])}]);