(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,675878,e=>{"use strict";let t=(0,e.i(369547).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],675878)},430788,e=>{"use strict";let t=(0,e.i(369547).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],430788)},486233,e=>{"use strict";var t,r,n,a,o=e.i(191788),s=e.i(730943),i=e.i(365713),l=e.i(912002);function c(){return(c=Object.assign.bind()).apply(this,arguments)}function u(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}let d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}o.startTransition,s.flushSync,o.useId;let f="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m=o.forwardRef(function(e,t){let r,{onClick:n,relative:a,reloadDocument:s,replace:u,state:m,target:h,to:y,preventScrollReset:b,viewTransition:g}=e,x=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,d),{basename:v}=o.useContext(i.UNSAFE_NavigationContext),j=!1;if("string"==typeof y&&p.test(y)&&(r=y,f))try{let e=new URL(window.location.href),t=new URL(y.startsWith("//")?e.protocol+y:y),r=(0,l.stripBasename)(t.pathname,v);t.origin===e.origin&&null!=r?y=r+t.search+t.hash:j=!0}catch(e){}let P=(0,i.useHref)(y,{relative:a}),w=function(e,t){let{target:r,replace:n,state:a,preventScrollReset:s,relative:c,viewTransition:u}=void 0===t?{}:t,d=(0,i.useNavigate)(),f=(0,i.useLocation)(),p=(0,i.useResolvedPath)(e,{relative:c});return o.useCallback(t=>{0!==t.button||r&&"_self"!==r||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),d(e,{replace:void 0!==n?n:(0,l.createPath)(f)===(0,l.createPath)(p),state:a,preventScrollReset:s,relative:c,viewTransition:u}))},[f,d,p,n,a,r,e,s,c,u])}(y,{replace:u,state:m,target:h,preventScrollReset:b,relative:a,viewTransition:g});return o.createElement("a",c({},x,{href:r||P,onClick:j||s?n:function(e){n&&n(e),e.defaultPrevented||w(e)},ref:t,target:h}))});function h(e){let t=o.useRef(u(e)),r=o.useRef(!1),n=(0,i.useLocation)(),a=o.useMemo(()=>{var e,a;let o;return e=n.search,a=r.current?null:t.current,o=u(e),a&&a.forEach((e,t)=>{o.has(t)||a.getAll(t).forEach(e=>{o.append(t,e)})}),o},[n.search]),s=(0,i.useNavigate)(),l=o.useCallback((e,t)=>{let n=u("function"==typeof e?e(a):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,l]}(t=n||(n={})).UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState",(r=a||(a={})).UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration";e.s(["Link",()=>m,"useSearchParams",()=>h])},681912,(e,t,r)=>{"use strict";var n=e.r(730943);r.createRoot=n.createRoot,r.hydrateRoot=n.hydrateRoot},188478,e=>{"use strict";let t=(0,e.i(369547).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],188478)},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return n}});let n=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return g},PageNotFoundError:function(){return x},SP:function(){return h},ST:function(){return y},WEB_VITALS:function(){return o},execOnce:function(){return s},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return P}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="u">typeof performance,y=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class g extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function P(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AppRouterContext:function(){return s},GlobalLayoutRouterContext:function(){return l},LayoutRouterContext:function(){return i},MissingSlotContext:function(){return u},TemplateContext:function(){return c}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=e.r(741705)._(e.r(191788)),s=o.default.createContext(null),i=o.default.createContext(null),l=o.default.createContext(null),c=o.default.createContext(null),u=o.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return a}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={NavigationPromisesContext:function(){return u},PathParamsContext:function(){return c},PathnameContext:function(){return l},ReadonlyURLSearchParams:function(){return s.ReadonlyURLSearchParams},SearchParamsContext:function(){return i},createDevToolsInstrumentedPromise:function(){return d}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=e.r(191788),s=e.r(531430),i=(0,o.createContext)(null),l=(0,o.createContext)(null),c=(0,o.createContext)(null),u=(0,o.createContext)(null);function d(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HTTPAccessErrorStatus:function(){return o},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return c},isHTTPAccessFallbackError:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},s=new Set(Object.values(o)),i="NEXT_HTTP_ERROR_FALLBACK";function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&s.has(Number(r))}function c(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return a}});var n,a=((n={})[n.SeeOther=303]="SeeOther",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a={REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return l},isRedirectError:function(){return c}};for(var o in a)Object.defineProperty(r,o,{enumerable:!0,get:a[o]});let s=e.r(40184),i="NEXT_REDIRECT";var l=((n={}).push="push",n.replace="replace",n);function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,a=t.slice(2,-2).join(";"),o=Number(t.at(-2));return r===i&&("replace"===n||"push"===n)&&"string"==typeof a&&!isNaN(o)&&o in s.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=e.r(991622),a=e.r(301939);function o(e){return(0,a.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},391756,e=>{"use strict";let t=(0,e.i(369547).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],391756)},449026,e=>{"use strict";var t=e.i(391398),r=e.i(191788),n=e.i(486233),a=e.i(365713),o=e.i(430788),s=e.i(391756),i=e.i(369547);let l=(0,i.default)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var c=e.i(675878);let u=(0,i.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var d=e.i(188478);e.s(["default",0,()=>{let[e]=(0,n.useSearchParams)(),i=(0,a.useNavigate)(),[f,p]=(0,r.useState)("loading"),[m,h]=(0,r.useState)("Verifying your payment with PesaPal..."),[y,b]=(0,r.useState)(null),g=e.get("OrderTrackingId"),x=e.get("purchase_id");return(0,r.useEffect)(()=>{(async()=>{if(!g){console.error("[PaymentCallback] No OrderTrackingId found in URL parameters."),p("failed"),h("Missing payment reference. We couldn't track this transaction.");return}try{console.log("--- [PaymentCallback] Initiating Verification ---"),console.log("Tracking ID:",g),console.log("Purchase ID:",x),p("loading");let e=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderTrackingId:g,purchaseId:x})}),t=await e.json();if(!e.ok)throw console.error("[PaymentCallback] HTTP error:",e.status),Error(`HTTP ${e.status}`);console.log("[PaymentCallback] Backend Response:",t);let r=t.is_subscription;if(console.log("[PaymentCallback] Function Result:",t),!1===t.success){console.error("[PaymentCallback] Business Error:",t.error),p("failed"),h(t.error||"Verification failed on the server.");return}let n="completed"===t.payment_status;b(t),console.log("Result Analysis:",{isCompleted:n,isSubscription:r,value:t.value_added}),n?(p("success"),h(`Access Restored! Your subscription has been extended by ${t.value_added} days.`),setTimeout(()=>{console.log("[PaymentCallback] Auto-redirecting to dashboard"),i("/")},4e3)):"failed"===t.payment_status?(p("failed"),h("The transaction was declined by PesaPal. Please try again.")):"cancelled"===t.payment_status?(p("cancelled"),h("The payment process was cancelled.")):(p("loading"),h("Your payment is still being processed by the network. Please wait..."),setTimeout(()=>{console.log("[PaymentCallback] Refreshing to check status again..."),window.location.reload()},6e3))}catch(e){console.error("[PaymentCallback] Unexpected Error:",e),p("failed"),h(e.message||"An unexpected error occurred while verifying your payment.")}})()},[g,x,i]),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#fafafa] p-6",children:(0,t.jsxs)("div",{className:"w-full max-w-md animate-in fade-in slide-in-from-bottom-4 duration-1000",children:[(0,t.jsxs)("div",{className:"bg-white border border-border/40 shadow-[0_32px_64px_-12px_rgba(0,0,0,0.06)] rounded-3xl p-10 text-center relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600"}),(0,t.jsxs)("div",{className:"mb-10 relative",children:["loading"===f&&(0,t.jsxs)("div",{className:"w-24 h-24 bg-blue-50/50 text-blue-600 rounded-3xl flex items-center justify-center mx-auto border border-blue-100/50 relative overflow-hidden",children:[(0,t.jsx)(l,{className:"w-10 h-10 animate-spin relative z-10"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-100/20 animate-pulse"})]}),"success"===f&&(0,t.jsx)("div",{className:"w-24 h-24 bg-green-50/50 text-green-600 rounded-3xl flex items-center justify-center mx-auto border border-green-100/50 rotate-3 scale-110 duration-500",children:(0,t.jsx)(o.CheckCircle,{className:"w-12 h-12 -rotate-3"})}),"failed"===f&&(0,t.jsx)("div",{className:"w-24 h-24 bg-red-50/50 text-red-600 rounded-3xl flex items-center justify-center mx-auto border border-red-100/50 rotate-3 animate-in shake-in",children:(0,t.jsx)(s.XCircle,{className:"w-12 h-12 -rotate-3"})}),"cancelled"===f&&(0,t.jsx)("div",{className:"w-24 h-24 bg-amber-50/50 text-amber-600 rounded-3xl flex items-center justify-center mx-auto border border-amber-100/50 rotate-3",children:(0,t.jsx)(c.AlertCircle,{className:"w-12 h-12 -rotate-3"})})]}),(0,t.jsxs)("h1",{className:"text-2xl font-bold text-foreground mb-4 font-inter tracking-tight",children:["loading"===f&&"Verifying Payment","success"===f&&"Payment Successful","failed"===f&&"Transaction Failed","cancelled"===f&&"Payment Cancelled"]}),(0,t.jsx)("p",{className:"text-[15px] text-muted-foreground leading-relaxed mb-10 px-4",children:m}),"success"===f&&y&&(0,t.jsxs)("div",{className:"bg-[#f8faff] rounded-2xl p-6 border border-blue-50/50 mb-10 text-left animate-in slide-in-from-bottom-2 duration-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-blue-600/60",children:"Subscription Details"}),(0,t.jsx)(u,{className:"w-3 h-3 text-blue-500"})]}),(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-foreground font-bold text-lg",children:[y.value_added," Days Access"]}),(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-wider font-medium text-muted-foreground/80",children:"Value Added to Account"})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-foreground/40 font-mono text-[10px] truncate max-w-[100px]",children:y.tracking_id})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:["loading"!==f&&(0,t.jsxs)("button",{onClick:()=>i("/"),className:"group relative w-full h-14 bg-foreground text-background font-bold text-[12px] uppercase tracking-widest rounded-2xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 overflow-hidden shadow-lg shadow-black/5",children:[(0,t.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:["Continue to Dashboard",(0,t.jsx)(d.ArrowRight,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity"})]}),"loading"===f&&(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-[0.2em] font-medium opacity-60 animate-pulse",children:"Secured by PesaPal Integrated"})})]})]}),(0,t.jsxs)("p",{className:"mt-8 text-center text-[11px] text-muted-foreground/40 font-medium",children:["Â© ",new Date().getFullYear()," Gonza Systems. All rights reserved."]})]})})}],449026)},377208,(e,t,r)=>{let n="/PaymentCallback";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(449026)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/e9fd8bb0ca2bba1b.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))}]);