(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,756043,e=>{"use strict";let t=(0,e.i(369547).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],756043)},443915,e=>{"use strict";var t=e.i(391398),r=e.i(191788),o=e.i(353533);let n=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));n.displayName="Textarea",e.s(["Textarea",()=>n])},675878,e=>{"use strict";let t=(0,e.i(369547).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],675878)},626427,e=>{"use strict";var t=e.i(391398),r=e.i(191788),o=e.i(648684),n=e.i(353533);let a=(0,o.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=r.forwardRef(({className:e,variant:r,...o},i)=>(0,t.jsx)("div",{ref:i,role:"alert",className:(0,n.cn)(a({variant:r}),e),...o}));i.displayName="Alert";let s=r.forwardRef(({className:e,...r},o)=>(0,t.jsx)("h5",{ref:o,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));s.displayName="AlertTitle";let c=r.forwardRef(({className:e,...r},o)=>(0,t.jsx)("div",{ref:o,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...r}));c.displayName="AlertDescription",e.s(["Alert",()=>i,"AlertDescription",()=>c,"AlertTitle",()=>s])},262945,e=>{"use strict";var t=e.i(391398),r=e.i(191788),o=e.i(357006),n=e.i(479293),a=e.i(671185),i=e.i(55037),s=e.i(593427),c=e.i(474864),u=e.i(993953),l=e.i(674534),d="Checkbox",[f,m]=(0,n.createContextScope)(d),[p,y]=f(d);function h(e){let{__scopeCheckbox:o,checked:n,children:a,defaultChecked:s,disabled:c,form:u,name:l,onCheckedChange:f,required:m,value:y="on",internal_do_not_use_render:h}=e,[g,b]=(0,i.useControllableState)({prop:n,defaultProp:s??!1,onChange:f,caller:d}),[v,w]=r.useState(null),[S,E]=r.useState(null),P=r.useRef(!1),C=!v||!!u||!!v.closest("form"),x={checked:g,disabled:c,setChecked:b,control:v,setControl:w,name:l,form:u,value:y,hasConsumerStoppedPropagationRef:P,required:m,defaultChecked:!_(s)&&s,isFormControl:C,bubbleInput:S,setBubbleInput:E};return(0,t.jsx)(p,{scope:o,...x,children:"function"==typeof h?h(x):a})}var g="CheckboxTrigger",b=r.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:i,...s},c)=>{let{control:u,value:d,disabled:f,checked:m,required:p,setControl:h,setChecked:b,hasConsumerStoppedPropagationRef:v,isFormControl:w,bubbleInput:S}=y(g,e),E=(0,o.useComposedRefs)(c,h),P=r.useRef(m);return r.useEffect(()=>{let e=u?.form;if(e){let t=()=>b(P.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[u,b]),(0,t.jsx)(l.Primitive.button,{type:"button",role:"checkbox","aria-checked":_(m)?"mixed":m,"aria-required":p,"data-state":C(m),"data-disabled":f?"":void 0,disabled:f,value:d,...s,ref:E,onKeyDown:(0,a.composeEventHandlers)(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,a.composeEventHandlers)(i,e=>{b(e=>!!_(e)||!e),S&&w&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});b.displayName=g;var v=r.forwardRef((e,r)=>{let{__scopeCheckbox:o,name:n,checked:a,defaultChecked:i,required:s,disabled:c,value:u,onCheckedChange:l,form:d,...f}=e;return(0,t.jsx)(h,{__scopeCheckbox:o,checked:a,defaultChecked:i,disabled:c,required:s,onCheckedChange:l,name:n,form:d,value:u,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{...f,ref:r,__scopeCheckbox:o}),e&&(0,t.jsx)(P,{__scopeCheckbox:o})]})})});v.displayName=d;var w="CheckboxIndicator",S=r.forwardRef((e,r)=>{let{__scopeCheckbox:o,forceMount:n,...a}=e,i=y(w,o);return(0,t.jsx)(u.Presence,{present:n||_(i.checked)||!0===i.checked,children:(0,t.jsx)(l.Primitive.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...e.style}})})});S.displayName=w;var E="CheckboxBubbleInput",P=r.forwardRef(({__scopeCheckbox:e,...n},a)=>{let{control:i,hasConsumerStoppedPropagationRef:u,checked:d,defaultChecked:f,required:m,disabled:p,name:h,value:g,form:b,bubbleInput:v,setBubbleInput:w}=y(E,e),S=(0,o.useComposedRefs)(a,w),P=(0,s.usePrevious)(d),C=(0,c.useSize)(i);r.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!u.current;if(P!==d&&e){let r=new Event("click",{bubbles:t});v.indeterminate=_(d),e.call(v,!_(d)&&d),v.dispatchEvent(r)}},[v,P,d,u]);let x=r.useRef(!_(d)&&d);return(0,t.jsx)(l.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??x.current,required:m,disabled:p,name:h,value:g,form:b,...n,tabIndex:-1,ref:S,style:{...n.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function C(e){return _(e)?"indeterminate":e?"checked":"unchecked"}P.displayName=E;var x=e.i(770084),I=e.i(353533);let R=r.forwardRef(({className:e,...r},o)=>(0,t.jsx)(v,{ref:o,className:(0,I.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,t.jsx)(S,{className:(0,I.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(x.Check,{className:"h-4 w-4"})})}));R.displayName=v.displayName,e.s(["Checkbox",()=>R],262945)},229767,e=>{"use strict";var t=e.i(921161);e.s(["CalendarIcon",()=>t.default])},17255,e=>{"use strict";var t=e.i(391398),r=e.i(191788),o=e.i(674534),n=e.i(993953),a=e.i(479293),i=e.i(357006),s=e.i(998657),c=e.i(724537),u=e.i(776833),l=e.i(998847),d=e.i(671185),f="ScrollArea",[m,p]=(0,a.createContextScope)(f),[y,h]=m(f),g=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,type:s="hover",dir:u,scrollHideDelay:l=600,...d}=e,[f,m]=r.useState(null),[p,h]=r.useState(null),[g,b]=r.useState(null),[v,w]=r.useState(null),[S,E]=r.useState(null),[P,_]=r.useState(0),[C,x]=r.useState(0),[I,R]=r.useState(!1),[A,T]=r.useState(!1),N=(0,i.useComposedRefs)(n,e=>m(e)),O=(0,c.useDirection)(u);return(0,t.jsx)(y,{scope:a,type:s,dir:O,scrollHideDelay:l,scrollArea:f,viewport:p,onViewportChange:h,content:g,onContentChange:b,scrollbarX:v,onScrollbarXChange:w,scrollbarXEnabled:I,onScrollbarXEnabledChange:R,scrollbarY:S,onScrollbarYChange:E,scrollbarYEnabled:A,onScrollbarYEnabledChange:T,onCornerWidthChange:_,onCornerHeightChange:x,children:(0,t.jsx)(o.Primitive.div,{dir:O,...d,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});g.displayName=f;var b="ScrollAreaViewport",v=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,children:s,nonce:c,...u}=e,l=h(b,a),d=r.useRef(null),f=(0,i.useComposedRefs)(n,d,l.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),(0,t.jsx)(o.Primitive.div,{"data-radix-scroll-area-viewport":"",...u,ref:f,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});v.displayName=b;var w="ScrollAreaScrollbar",S=r.forwardRef((e,o)=>{let{forceMount:n,...a}=e,i=h(w,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:c}=i,u="horizontal"===e.orientation;return r.useEffect(()=>(u?s(!0):c(!0),()=>{u?s(!1):c(!1)}),[u,s,c]),"hover"===i.type?(0,t.jsx)(E,{...a,ref:o,forceMount:n}):"scroll"===i.type?(0,t.jsx)(P,{...a,ref:o,forceMount:n}):"auto"===i.type?(0,t.jsx)(_,{...a,ref:o,forceMount:n}):"always"===i.type?(0,t.jsx)(C,{...a,ref:o}):null});S.displayName=w;var E=r.forwardRef((e,o)=>{let{forceMount:a,...i}=e,s=h(w,e.__scopeScrollArea),[c,u]=r.useState(!1);return r.useEffect(()=>{let e=s.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),u(!0)},o=()=>{t=window.setTimeout(()=>u(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",o),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",o)}}},[s.scrollArea,s.scrollHideDelay]),(0,t.jsx)(n.Presence,{present:a||c,children:(0,t.jsx)(_,{"data-state":c?"visible":"hidden",...i,ref:o})})}),P=r.forwardRef((e,o)=>{var a;let{forceMount:i,...s}=e,c=h(w,e.__scopeScrollArea),u="horizontal"===e.orientation,l=$(()=>m("SCROLL_END"),100),[f,m]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>a[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===f){let e=window.setTimeout(()=>m("HIDE"),c.scrollHideDelay);return()=>window.clearTimeout(e)}},[f,c.scrollHideDelay,m]),r.useEffect(()=>{let e=c.viewport,t=u?"scrollLeft":"scrollTop";if(e){let r=e[t],o=()=>{let o=e[t];r!==o&&(m("SCROLL"),l()),r=o};return e.addEventListener("scroll",o),()=>e.removeEventListener("scroll",o)}},[c.viewport,u,m,l]),(0,t.jsx)(n.Presence,{present:i||"hidden"!==f,children:(0,t.jsx)(C,{"data-state":"hidden"===f?"hidden":"visible",...s,ref:o,onPointerEnter:(0,d.composeEventHandlers)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,d.composeEventHandlers)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),_=r.forwardRef((e,o)=>{let a=h(w,e.__scopeScrollArea),{forceMount:i,...s}=e,[c,u]=r.useState(!1),l="horizontal"===e.orientation,d=$(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;u(l?e:t)}},10);return Q(a.viewport,d),Q(a.content,d),(0,t.jsx)(n.Presence,{present:i||c,children:(0,t.jsx)(C,{"data-state":c?"visible":"hidden",...s,ref:o})})}),C=r.forwardRef((e,o)=>{let{orientation:n="vertical",...a}=e,i=h(w,e.__scopeScrollArea),s=r.useRef(null),c=r.useRef(0),[u,l]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=F(u.viewport,u.content),f={...a,sizes:u,onSizesChange:l,hasThumb:!!(d>0&&d<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:e=>c.current=e};function m(e,t){return function(e,t,r,o="ltr"){let n=z(r),a=t||n/2,i=r.scrollbar.paddingStart+a,s=r.scrollbar.size-r.scrollbar.paddingEnd-(n-a),c=r.content-r.viewport;return U([i,s],"ltr"===o?[0,c]:[-1*c,0])(e)}(e,c.current,u,t)}return"horizontal"===n?(0,t.jsx)(x,{...f,ref:o,onThumbPositionChange:()=>{if(i.viewport&&s.current){let e=H(i.viewport.scrollLeft,u,i.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=m(e,i.dir))}}):"vertical"===n?(0,t.jsx)(I,{...f,ref:o,onThumbPositionChange:()=>{if(i.viewport&&s.current){let e=H(i.viewport.scrollTop,u);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=m(e))}}):null}),x=r.forwardRef((e,o)=>{let{sizes:n,onSizesChange:a,...s}=e,c=h(w,e.__scopeScrollArea),[u,l]=r.useState(),d=r.useRef(null),f=(0,i.useComposedRefs)(o,d,c.onScrollbarXChange);return r.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),(0,t.jsx)(T,{"data-orientation":"horizontal",...s,ref:f,sizes:n,style:{bottom:0,left:"rtl"===c.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===c.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":z(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(c.viewport){var o,n;let a=c.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),o=a,n=r,o>0&&o<n&&t.preventDefault()}},onResize:()=>{d.current&&c.viewport&&u&&a({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:D(u.paddingLeft),paddingEnd:D(u.paddingRight)}})}})}),I=r.forwardRef((e,o)=>{let{sizes:n,onSizesChange:a,...s}=e,c=h(w,e.__scopeScrollArea),[u,l]=r.useState(),d=r.useRef(null),f=(0,i.useComposedRefs)(o,d,c.onScrollbarYChange);return r.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),(0,t.jsx)(T,{"data-orientation":"vertical",...s,ref:f,sizes:n,style:{top:0,right:"ltr"===c.dir?0:void 0,left:"rtl"===c.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":z(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(c.viewport){var o,n;let a=c.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),o=a,n=r,o>0&&o<n&&t.preventDefault()}},onResize:()=>{d.current&&c.viewport&&u&&a({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:D(u.paddingTop),paddingEnd:D(u.paddingBottom)}})}})}),[R,A]=m(w),T=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,sizes:c,hasThumb:u,onThumbChange:l,onThumbPointerUp:f,onThumbPointerDown:m,onThumbPositionChange:p,onDragScroll:y,onWheelScroll:g,onResize:b,...v}=e,S=h(w,a),[E,P]=r.useState(null),_=(0,i.useComposedRefs)(n,e=>P(e)),C=r.useRef(null),x=r.useRef(""),I=S.viewport,A=c.content-c.viewport,T=(0,s.useCallbackRef)(g),N=(0,s.useCallbackRef)(p),O=$(b,10);function k(e){C.current&&y({x:e.clientX-C.current.left,y:e.clientY-C.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;E?.contains(t)&&T(e,A)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[I,E,A,T]),r.useEffect(N,[c,N]),Q(E,O),Q(S.content,O),(0,t.jsx)(R,{scope:a,scrollbar:E,hasThumb:u,onThumbChange:(0,s.useCallbackRef)(l),onThumbPointerUp:(0,s.useCallbackRef)(f),onThumbPositionChange:N,onThumbPointerDown:(0,s.useCallbackRef)(m),children:(0,t.jsx)(o.Primitive.div,{...v,ref:_,style:{position:"absolute",...v.style},onPointerDown:(0,d.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),C.current=E.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,d.composeEventHandlers)(e.onPointerMove,k),onPointerUp:(0,d.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=x.current,S.viewport&&(S.viewport.style.scrollBehavior=""),C.current=null})})})}),N="ScrollAreaThumb",O=r.forwardRef((e,r)=>{let{forceMount:o,...a}=e,i=A(N,e.__scopeScrollArea);return(0,t.jsx)(n.Presence,{present:o||i.hasThumb,children:(0,t.jsx)(k,{ref:r,...a})})}),k=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,style:s,...c}=e,u=h(N,a),l=A(N,a),{onThumbPositionChange:f}=l,m=(0,i.useComposedRefs)(n,e=>l.onThumbChange(e)),p=r.useRef(void 0),y=$(()=>{p.current&&(p.current(),p.current=void 0)},100);return r.useEffect(()=>{let e=u.viewport;if(e){let t=()=>{y(),p.current||(p.current=q(e,f),f())};return f(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[u.viewport,y,f]),(0,t.jsx)(o.Primitive.div,{"data-state":l.hasThumb?"visible":"hidden",...c,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,d.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,o=e.clientY-t.top;l.onThumbPointerDown({x:r,y:o})}),onPointerUp:(0,d.composeEventHandlers)(e.onPointerUp,l.onThumbPointerUp)})});O.displayName=N;var j="ScrollAreaCorner",L=r.forwardRef((e,r)=>{let o=h(j,e.__scopeScrollArea),n=!!(o.scrollbarX&&o.scrollbarY);return"scroll"!==o.type&&n?(0,t.jsx)(M,{...e,ref:r}):null});L.displayName=j;var M=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,...i}=e,s=h(j,a),[c,u]=r.useState(0),[l,d]=r.useState(0),f=!!(c&&l);return Q(s.scrollbarX,()=>{let e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),d(e)}),Q(s.scrollbarY,()=>{let e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),u(e)}),f?(0,t.jsx)(o.Primitive.div,{...i,ref:n,style:{width:c,height:l,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function D(e){return e?parseInt(e,10):0}function F(e,t){let r=e/t;return isNaN(r)?0:r}function z(e){let t=F(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function H(e,t,r="ltr"){let o=z(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,i=t.content-t.viewport,s=(0,l.clamp)(e,"ltr"===r?[0,i]:[-1*i,0]);return U([0,i],[0,a-o])(s)}function U(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}var q=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},o=0;return!function n(){let a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,s=r.top!==a.top;(i||s)&&t(),r=a,o=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(o)};function $(e,t){let o=(0,s.useCallbackRef)(e),n=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(n.current),[]),r.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(o,t)},[o,t])}function Q(e,t){let r=(0,s.useCallbackRef)(t);(0,u.useLayoutEffect)(()=>{let t=0;if(e){let o=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return o.observe(e),()=>{window.cancelAnimationFrame(t),o.unobserve(e)}}},[e,r])}var B=e.i(353533);let W=r.forwardRef(({className:e,children:r,...o},n)=>(0,t.jsxs)(g,{ref:n,className:(0,B.cn)("relative overflow-hidden",e),...o,children:[(0,t.jsx)(v,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(K,{}),(0,t.jsx)(L,{})]}));W.displayName=g.displayName;let K=r.forwardRef(({className:e,orientation:r="vertical",...o},n)=>(0,t.jsx)(S,{ref:n,orientation:r,className:(0,B.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...o,children:(0,t.jsx)(O,{className:"relative flex-1 rounded-full bg-border"})}));K.displayName=S.displayName,e.s(["ScrollArea",()=>W],17255)},8745,(e,t,r)=>{let o=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw o.code="MODULE_UNPARSABLE",o},355879,775778,e=>{"use strict";var t=e.i(191788),r=e.i(563905),o=e.i(46108),n=e.i(893930),a=e.i(285700);let i=e=>{let t=Object.keys(localStorage),r=["allProductsStats_","stockSummary_","soldItems_","dashboardData_","analyticsData_"],o=0;t.forEach(e=>{r.some(t=>e.startsWith(t))&&(localStorage.removeItem(e),o++)}),o>0&&console.log(`[Cache] Cleared ${o} inventory-related localStorage entries.`),e&&(console.log("[Cache] Invalidating React Query inventory keys..."),e.invalidateQueries({queryKey:["inventory_global_stats"]}),e.invalidateQueries({queryKey:["stockSummary"]}),e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["sales"]}),e.invalidateQueries({queryKey:["all-products-for-scanner"]}),e.invalidateQueries({queryKey:["all-products"]}))};e.s(["clearInventoryCaches",0,i],775778);var s=e.i(8745);e.s(["useProducts",0,(e,c=50)=>{let[u,l]=(0,t.useState)([]),[d,f]=(0,t.useState)(1),[m,p]=(0,t.useState)(c),[y,h]=(0,t.useState)(0),[g,b]=(0,t.useState)(!1),{settings:v}=(0,r.useBusinessSettings)(),{currentBusiness:w}=(0,o.useBusiness)(),S=(0,a.useQueryClient)(),[E,P]=(0,t.useState)({search:"",category:"all",stockStatus:"all"}),[_,C]=(0,t.useState)(null),x=(0,t.useCallback)(e=>{e.search!==E.search&&(b(!0),_&&clearTimeout(_),C(setTimeout(()=>{b(!1)},600))),P(e)},[E.search,_]),I=(0,t.useCallback)(async()=>{if(!e||!w)return{products:[],count:0};try{return await (0,s.getProductsAction)({userId:e,businessId:w.id,page:d,pageSize:m,search:E.search,category:"all"===E.category?void 0:E.category,stockStatus:E.stockStatus})}catch(e){return console.error("Error loading products from server action:",e),{products:[],count:0}}},[e,w?.id,d,m,E.search,E.category,E.stockStatus]),R=(0,t.useMemo)(()=>["products",e,w?.id],[e,w?.id]),A=(0,t.useMemo)(()=>[...R,d,m,E.search,E.category,E.stockStatus],[R,d,m,E.search,E.category,E.stockStatus]),{data:T,isLoading:N,isFetching:O,refetch:k}=(0,n.useQuery)({queryKey:A,queryFn:I,enabled:!!e&&!!w?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0});(0,t.useEffect)(()=>{T&&(l(T.products),h(T.count))},[T]);let j=async t=>{try{if(!e)return null;return console.warn("Image upload redirecting to server action (TODO)"),null}catch(e){return console.error("Error in uploadProductImage:",e),null}};return{products:u,isLoading:N&&!T&&!g,loadProducts:I,page:d,setPage:f,pageSize:m,setPageSize:p,totalCount:y,createProduct:async t=>{try{if(!e||!w)return null;let r=await (0,s.createProductAction)({...t,userId:e,businessId:w.id});if(!r)return null;return l(e=>[r,...e]),h(e=>e+1),S.invalidateQueries({queryKey:R}),i(S),r}catch(e){return console.error("Error creating product:",e),null}},updateProduct:async(t,r,o,n=!1,a,c,u,l)=>{try{if(!e||!w)return!1;let c=r.imageUrl;if(o&&(c=await j(o)),!await (0,s.updateProductAction)(t,{...r,imageUrl:c,userId:e,businessId:w.id,isFromSale:n,customChangeReason:a,referenceId:u}))return!1;return S.invalidateQueries({queryKey:R}),i(S),!0}catch(e){return console.error("Error updating product:",e),!1}},updateProductsBulk:async(t,r,o,n,a,c)=>{try{if(!e||!w)return!1;let r=await (0,s.updateProductsBulkAction)(t.map(e=>({id:e.id,updated:e.updated})),w.id);return r&&(S.invalidateQueries({queryKey:R}),i(S)),r}catch(e){return console.error("Error in bulk update:",e),!1}},deleteProduct:async t=>{try{if(!e)return!1;if(await (0,s.deleteProductAction)(t))return S.invalidateQueries({queryKey:R}),i(S),!0;return!1}catch(e){return console.error("Error deleting product:",e),!1}},uploadProductImage:j,refetch:k,isFetching:O,filters:E,setFilters:x}}],355879)},286012,e=>{"use strict";var t=e.i(256680);async function r(e){try{return await t.db.activityHistory.create({data:{userId:e.userId,locationId:e.locationId,activityType:e.activityType,module:e.module,entityType:e.entityType,entityId:e.entityId||null,entityName:e.entityName,description:e.description,metadata:e.metadata||null,profileId:e.profileId||null,profileName:e.profileName||null}}),{success:!0}}catch(e){return console.error("Error logging activity:",e),{success:!1,error:e.message}}}async function o(e,r,n=1,a=20,i){try{let o={locationId:e,userId:r};if(i&&(i.activityType&&"ALL"!==i.activityType&&(o.activityType=i.activityType),i.module&&"ALL"!==i.module&&(o.module=i.module),i.search&&(o.OR=[{entityName:{contains:i.search,mode:"insensitive"}},{description:{contains:i.search,mode:"insensitive"}}]),i.dateFrom||i.dateTo)&&(o.createdAt={},i.dateFrom&&(o.createdAt.gte=new Date(i.dateFrom)),i.dateTo)){let e=new Date(i.dateTo);e.setHours(23,59,59,999),o.createdAt.lte=e}let[s,c]=await Promise.all([t.db.activityHistory.findMany({where:o,skip:(n-1)*a,take:a,orderBy:{createdAt:"desc"}}),t.db.activityHistory.count({where:o})]);return{success:!0,data:{activities:s.map(e=>({...e,created_at:e.createdAt.toISOString(),activity_type:e.activityType,location_id:e.locationId,user_id:e.userId,entity_type:e.entityType,entity_id:e.entityId,entity_name:e.entityName,profile_id:e.profileId,profile_name:e.profileName})),count:c}}}catch(e){return console.error("Error fetching activity history:",e),{success:!1,error:e.message}}}e.s(["getActivityHistoryAction",()=>o,"logActivityAction",()=>r])},923850,e=>{"use strict";var t=e.i(824216);e.s(["useCurrentUser",0,()=>{let{user:e}=(0,t.useAuth)();return{userId:e?.id}}])},546462,e=>{"use strict";var t=e.i(286012),r=e.i(923850),o=e.i(46108),n=e.i(638822);e.s(["useActivityLogger",0,()=>{let{userId:e}=(0,r.useCurrentUser)(),{currentBusiness:a}=(0,o.useBusiness)(),i=null;try{let{currentProfile:e}=(0,n.useProfiles)();i=e}catch{i=null}return{logActivity:async r=>{if(!e||!a?.id)return void console.warn("Cannot log activity: missing user or business context");try{let o=await (0,t.logActivityAction)({userId:e,locationId:a.id,activityType:r.activityType,module:r.module,entityType:r.entityType,entityId:r.entityId||void 0,entityName:r.entityName,description:r.description,metadata:r.metadata||void 0,profileId:i?.id||void 0,profileName:i?.profile_name||void 0});o.success||console.error("Error logging activity:",o.error)}catch(e){console.error("Failed to log activity:",e)}}}}])},810686,e=>{"use strict";e.s(["mapDbProductToProduct",0,e=>({id:e.id,itemNumber:e.item_number,barcode:e.barcode,manufacturerBarcode:e.manufacturer_barcode,name:e.name,description:e.description,category:e.category,quantity:e.quantity,costPrice:Number(e.cost_price),sellingPrice:Number(e.selling_price),supplier:e.supplier,imageUrl:e.image_url,minimumStock:e.minimum_stock,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}),"mapDbSaleToSale",0,e=>{let t=(Array.isArray(e.items)?e.items:[]).map(e=>{let t=void 0!==e.discountPercentage?Number(e.discountPercentage):void 0,r=void 0!==e.discountAmount?Number(e.discountAmount):void 0,o=e.discountType;return!o&&(t&&t>0?o="percentage":r&&r>0&&(o="amount")),{description:e.description||"",quantity:Number(e.quantity)||0,price:Number(e.price)||0,cost:Number(e.cost)||0,productId:e.productId||void 0,discountType:o,discountPercentage:t,discountAmount:r,createdAt:e.createdAt||void 0}});return{id:e.id,receiptNumber:e.receipt_number,customerName:e.customer_name,customerAddress:e.customer_address||"",customerContact:e.customer_contact||"",customerId:e.customer_id||void 0,items:t,paymentStatus:e.payment_status,profit:Number(e.profit),date:new Date(e.date),taxRate:e.tax_rate?Number(e.tax_rate):0,cashTransactionId:e.cash_transaction_id||void 0,amountPaid:e.amount_paid?Number(e.amount_paid):void 0,amountDue:e.amount_due?Number(e.amount_due):void 0,notes:e.notes||"",categoryId:e.category_id||void 0,createdAt:new Date(e.created_at)}},"mapSaleToDbSale",0,(e,t,r,o,n,a,i)=>({user_id:n,location_id:a,receipt_number:o,customer_name:e.customerName,customer_address:e.customerAddress||null,customer_contact:e.customerContact||null,customer_id:e.customerId||null,items:e.items,payment_status:e.paymentStatus,profit:r,date:t.toISOString().split("T")[0],tax_rate:e.taxRate||0,cash_transaction_id:i||null,amount_paid:e.amountPaid||null,amount_due:e.amountDue||null,notes:e.notes||null,category_id:e.categoryId||null})])},554913,e=>{"use strict";var t=e.i(355879),r=e.i(679935),o=e.i(8745);e.s(["useInventoryActions",0,e=>{let{updateProductsBulk:n}=(0,t.useProducts)(e),a=async(e,t)=>{if(!e.length)return[];try{return await (0,o.getProductsByIdsAction)(e,t)}catch(e){throw console.error("Error fetching fresh products:",e),e}};return{deductStockForSale:async(t,o,i,s,c)=>{if(!e)return!1;try{let u=t.filter(e=>e.productId);if(0===u.length)return!0;let l=[...new Set(u.map(e=>e.productId))],d=await a(l,c);if(0===d.length)return!1;let f=new Map;for(let e of u){let t=f.get(e.productId)||0;f.set(e.productId,t+e.quantity)}let m=[];for(let[e,t]of f.entries()){let o=d.find(t=>t.id===e);if(!o)continue;let n=o.quantity-t;m.push({id:e,updated:{...o,quantity:n}}),n<0&&r.toast.warning(`${o.name} inventory is now negative (${n}). Please restock soon.`)}return m.length>0&&await n(m,e,"Sale",o,i,s),!0}catch(e){return console.error("Error deducting stock for sale:",e),!1}},restoreStockForSale:async(t,r,o,i)=>{if(!e)return!1;try{let s=t.filter(e=>e.productId);if(0===s.length)return!0;let c=[...new Set(s.map(e=>e.productId))],u=await a(c,i),l=new Map;for(let e of s){let t=l.get(e.productId)||0;l.set(e.productId,t+e.quantity)}let d=[];for(let[e,t]of l.entries()){let r=u.find(t=>t.id===e);if(!r)continue;let o=r.quantity+t;d.push({id:e,updated:{...r,quantity:o}})}return d.length>0&&await n(d,e,"Deleted Sale",r,void 0,o),!0}catch(e){return console.error("Error restoring stock for sale:",e),!1}},adjustStockForEditedSale:async(t,o,i,s,c,u)=>{if(!e)return!1;try{let l=[...t.filter(e=>e.productId).map(e=>e.productId),...o.filter(e=>e.productId).map(e=>e.productId)],d=[...new Set(l)];if(0===d.length)return!0;let f=await a(d,u),m=new Map;for(let e of t.filter(e=>e.productId)){let t=m.get(e.productId)||0;m.set(e.productId,t+e.quantity)}for(let e of o.filter(e=>e.productId)){let t=m.get(e.productId)||0;m.set(e.productId,t-e.quantity)}let p=[];for(let[e,t]of m.entries()){if(0===t)continue;let o=f.find(t=>t.id===e);if(!o)continue;let n=o.quantity+t;p.push({id:e,updated:{...o,quantity:n}}),n<0&&r.toast.warning(`${o.name} inventory is now negative (${n}). Please restock soon.`)}return p.length>0&&await n(p,e,"Sale Status/Qty Edit",i,s,c),!0}catch(e){return console.error("Error adjusting stock for edited sale:",e),!1}}}}])},873015,e=>{"use strict";var t=e.i(256680),r=e.i(290205);async function o(e,r="desc",n){try{let o={where:{branchId:e},orderBy:{createdAt:r},include:{cashTransaction:!0}};return n&&n>0&&(o.take=n),(await t.db.sale.findMany(o)).map(e=>({id:e.id,user_id:e.userId,location_id:e.branchId,receipt_number:e.saleNumber,customer_name:e.customerName,customer_address:e.customerAddress,customer_contact:e.customerPhone,customer_id:e.customerId,items:e.items,payment_status:e.paymentStatus,profit:0,date:e.date.toISOString(),tax_rate:e.taxRate?Number(e.taxRate):0,created_at:e.createdAt.toISOString(),updated_at:e.updatedAt.toISOString(),cash_transaction_id:e.cashTransactionId,amount_paid:Number(e.amountPaid),amount_due:Number(e.balance),category_id:e.categoryId,notes:e.notes}))}catch(e){return console.error("Error fetching sales:",e),[]}}async function n(e,r){try{let o=await t.db.sale.findUnique({where:{id:e},include:{cashTransaction:!0,installmentPayments:!0}});if(!o||o.branchId!==r)return{success:!1,error:"Sale not found or unauthorized"};return await t.db.$transaction(async t=>{await t.installmentPayment.deleteMany({where:{saleId:e}}),o.cashTransactionId&&await t.cashTransaction.delete({where:{id:o.cashTransactionId}}),await t.sale.delete({where:{id:e}})}),{success:!0,sale:{receiptNumber:o.saleNumber,customerName:o.customerName,customerAddress:o.customerAddress,customerContact:o.customerPhone,paymentStatus:o.paymentStatus,cashTransactionId:o.cashTransactionId,items:o.items,amountPaid:Number(o.amountPaid),amountDue:Number(o.balance),profit:0,taxRate:Number(o.taxRate),notes:o.notes}}}catch(e){return console.error("Error deleting sale:",e),{success:!1,error:e.message||"Failed to delete sale"}}}async function a(e,r,o){try{let n=e.payment_status;"NOT PAID"===n?n="UNPAID":"Installment Sale"===n?n="INSTALLMENT":"Paid"===n?n="PAID":"Quote"===n&&(n="QUOTE");let a={userId:e.user_id,branchId:e.location_id,saleNumber:e.receipt_number,customerName:e.customer_name,customerAddress:e.customer_address,customerPhone:e.customer_contact,customerId:e.customer_id,items:e.items,paymentStatus:n,date:new Date(e.date),taxRate:e.tax_rate,cashTransactionId:e.cash_transaction_id,amountPaid:e.amount_paid,balance:e.amount_due,categoryId:e.category_id,notes:e.notes,subtotal:0,total:0};if(r&&o){let e=await t.db.sale.update({where:{id:o},data:a});return{success:!0,data:e}}{let e=await t.db.sale.create({data:a});return{success:!0,data:e}}}catch(e){return console.error("Error upserting sale:",e),{success:!1,error:e.message||"Failed to preserve sale"}}}async function i(e){try{let r=await t.db.saleCategory.findMany({where:{branchId:e},orderBy:{name:"asc"}});return{success:!0,data:r}}catch(e){return console.error("Error fetching sales categories:",e),{success:!1,error:e.message}}}async function s(e,o,n,a=!1){try{let i=await t.db.saleCategory.create({data:{branchId:e,userId:o,name:n,is_default:a}});return(0,r.revalidatePath)("/sales"),{success:!0,data:i}}catch(e){return console.error("Error creating sales category:",e),{success:!1,error:e.message}}}async function c(e,o){try{let n=await t.db.saleCategory.update({where:{id:e},data:{name:o}});return(0,r.revalidatePath)("/sales"),{success:!0,data:n}}catch(e){return console.error("Error updating sales category:",e),{success:!1,error:e.message}}}async function u(e){try{return await t.db.saleCategory.delete({where:{id:e}}),(0,r.revalidatePath)("/sales"),{success:!0}}catch(e){return console.error("Error deleting sales category:",e),{success:!1,error:e.message}}}async function l(e,r){if(!e||!r)return null;try{return await t.db.customer.findFirst({where:{branchId:e,name:{contains:r,mode:"insensitive"}},select:{id:!0,name:!0}})}catch(e){return console.error("Error looking up customer by name:",e),null}}async function d(e,r){try{return await t.db.sale.update({where:{id:e},data:{customerId:r}}),{success:!0}}catch(e){return console.error("Error updating sale customer:",e),{success:!1,error:e.message}}}async function n(e){try{return await t.db.sale.delete({where:{id:e}}),(0,r.revalidatePath)("/sales"),!0}catch(e){return console.error("Error deleting sale:",e),!1}}e.s(["createSalesCategoryAction",()=>s,"deleteSaleAction",()=>n,"deleteSalesCategoryAction",()=>u,"getCustomerByNameAction",()=>l,"getSalesAction",()=>o,"getSalesCategoriesAction",()=>i,"updateSaleCustomerAction",()=>d,"updateSalesCategoryAction",()=>c,"upsertSaleAction",()=>a])},852577,e=>{"use strict";var t=e.i(191788),r=e.i(810686),o=e.i(150064),n=e.i(893930),a=e.i(285700),i=e.i(546462),s=e.i(46108),c=e.i(554913),u=e.i(775778),l=e.i(873015);e.s(["useSalesData",0,(e,d="desc",f)=>{let m=(0,a.useQueryClient)(),{toast:p}=(0,o.useToast)(),{logActivity:y}=(0,i.useActivityLogger)(),{currentBusiness:h}=(0,s.useBusiness)(),{restoreStockForSale:g}=(0,c.useInventoryActions)(e),b=(0,t.useCallback)(async()=>{try{if(!e||!h)return[];let t=await (0,l.getSalesAction)(h.id,d,f);return t?t.map(e=>{let t={id:e.id,user_id:e.user_id,location_id:e.location_id,receipt_number:e.receipt_number,customer_name:e.customer_name,customer_address:e.customer_address,customer_contact:e.customer_contact,customer_id:e.customer_id,items:e.items,payment_status:e.payment_status,profit:e.profit?Number(e.profit):0,date:e.date,tax_rate:e.tax_rate||0,created_at:e.created_at,updated_at:e.updated_at,cash_transaction_id:e.cash_transaction_id,amount_paid:e.amount_paid?Number(e.amount_paid):void 0,amount_due:e.amount_due?Number(e.amount_due):void 0,category_id:e.category_id,notes:e.notes};return(0,r.mapDbSaleToSale)(t)}):[]}catch(e){return console.error("Error loading sales:",e),p({title:"Error",description:"Failed to load sales data. Please try again.",variant:"destructive"}),[]}},[e,h?.id,d,f,p]),v=(0,t.useMemo)(()=>["sales",h?.id,e],[h?.id,e]),w=(0,t.useMemo)(()=>[...v,d,f],[v,d,f]),{data:S=[],isLoading:E,isFetching:P,refetch:_}=(0,n.useQuery)({queryKey:w,queryFn:b,enabled:!!e&&!!h?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0}),C=E||P&&0===S.length,x=(0,t.useMemo)(()=>{let e=S.filter(e=>"Quote"!==e.paymentStatus),t=new Map;return e.forEach(e=>{let r=e.customerName,o=e.items.reduce((e,t)=>e+t.price*t.quantity,0);if(t.has(r)){let n=t.get(r);t.set(r,{total:n.total+o,count:n.count+1,customerId:n.customerId||e.customerId})}else t.set(r,{total:o,count:1,customerId:e.customerId})}),Array.from(t.entries()).map(([e,t])=>({id:t.customerId,name:e,totalPurchases:t.total,orderCount:t.count})).sort((e,t)=>t.totalPurchases-e.totalPurchases)},[S]),I=(0,t.useMemo)(()=>e=>{let t=S.filter(t=>t.customerName.toLowerCase()===e.toLowerCase()&&"Quote"!==t.paymentStatus);return{total:t.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.price*t.quantity,0),0),count:t.length}},[S]),R=async e=>{try{let t=S.find(t=>t.id===e);if(!t)throw Error("Sale not found");if("Quote"!==t.paymentStatus&&t.items.length>0&&(console.log("Restoring product quantities via useInventoryActions..."),await g(t.items,e,t.receiptNumber,h?.id)||p({title:"Inventory Update Warning",description:"Sale deleted, but inventory restoration might have failed. Please check your stock levels.",variant:"destructive"})),!h?.id)throw Error("Business context missing for deletion");let r=await (0,l.deleteSaleAction)(e,h.id);if(!r.success)throw Error(r.error);return m.setQueryData(w,t=>t?t.filter(t=>t.id!==e):[]),m.invalidateQueries({queryKey:v}),A(),await y({activityType:"DELETE",module:"SALES",entityType:"sale",entityId:e,entityName:`Sale #${t.receiptNumber}`,description:`Deleted sale for ${t.customerName} - Total: UGX ${((t.amountPaid||0)+(t.amountDue||0)).toLocaleString()} (Stock restored)`,metadata:{receiptNumber:t.receiptNumber,customerName:t.customerName,customerAddress:t.customerAddress,customerContact:t.customerContact,totalAmount:(t.amountPaid||0)+(t.amountDue||0),amountPaid:t.amountPaid,profit:t.profit,paymentStatus:t.paymentStatus,taxRate:t.taxRate,itemCount:t.items.length,items:t.items.map(e=>({description:e.description,quantity:e.quantity,price:e.price,cost:e.cost,total:e.quantity*e.price,discountPercentage:e.discountPercentage,discountAmount:e.discountAmount})),notes:t.notes,cashTransactionDeleted:!!t.cashTransactionId}}),p({title:"Sale Deleted",description:"The sale record and associated data have been successfully deleted."}),(0,u.clearInventoryCaches)(),!0}catch(e){return console.error("Error deleting sale:",e),p({title:"Error",description:"Failed to delete sale. Please try again.",variant:"destructive"}),!1}},A=(0,t.useCallback)(()=>{if(!h?.id)return;let e=`soldItemsFilters_${h.id}`;localStorage.removeItem(e),localStorage.removeItem("soldItemsFilters")},[h?.id]);return{sales:S,isLoading:C,deleteSale:R,addSale:(0,t.useCallback)(e=>{m.setQueryData(w,t=>t?[e,...t]:[e]),m.invalidateQueries({queryKey:v}),A(),(0,u.clearInventoryCaches)()},[m,w,v,A,u.clearInventoryCaches]),updateSale:(0,t.useCallback)(e=>{m.setQueryData(w,t=>t?t.map(t=>t.id===e.id?e:t):[e]),m.invalidateQueries({queryKey:v}),A(),(0,u.clearInventoryCaches)()},[m,w,v,A,u.clearInventoryCaches]),getTopCustomers:x,getCustomerLifetimePurchases:I,clearSoldItemsCache:A,refetch:_,isFetching:P}}])},398934,e=>{"use strict";var t,r,o,n;let a,i,s,c,u,l;(r=t||(t={})).Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE";class d extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}let f=(a=(n=o="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:e.g).CapacitorCustomPlatform||null,s=(i=n.Capacitor||{}).Plugins=i.Plugins||{},c=()=>{var e,t;return null!==a?a.name:(null==n?void 0:n.androidBridge)?"android":(null==(t=null==(e=null==n?void 0:n.webkit)?void 0:e.messageHandlers)?void 0:t.bridge)?"ios":"web"},u=e=>{var t;return null==(t=i.PluginHeaders)?void 0:t.find(t=>t.name===e)},l=new Map,i.convertFileSrc||(i.convertFileSrc=e=>e),i.getPlatform=c,i.handleError=e=>n.console.error(e),i.isNativePlatform=()=>"web"!==c(),i.isPluginAvailable=e=>{let t=l.get(e);return!!((null==t?void 0:t.platforms.has(c()))||u(e))},i.registerPlugin=(e,r={})=>{let o,n=l.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;let f=c(),m=u(e),p=async()=>(!o&&f in r?o=o="function"==typeof r[f]?await r[f]():r[f]:null!==a&&!o&&"web"in r&&(o=o="function"==typeof r.web?await r.web():r.web),o),y=r=>{let o,n=(...n)=>{let a=p().then(a=>{let s=((r,o)=>{var n,a;if(m){let t=null==m?void 0:m.methods.find(e=>o===e.name);if(t)if("promise"===t.rtype)return t=>i.nativePromise(e,o.toString(),t);else return(t,r)=>i.nativeCallback(e,o.toString(),t,r);if(r)return null==(n=r[o])?void 0:n.bind(r)}else if(r)return null==(a=r[o])?void 0:a.bind(r);else throw new d(`"${e}" plugin is not implemented on ${f}`,t.Unimplemented)})(a,r);if(s){let e=s(...n);return o=null==e?void 0:e.remove,e}throw new d(`"${e}.${r}()" is not implemented on ${f}`,t.Unimplemented)});return"addListener"===r&&(a.remove=async()=>o()),a};return n.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(n,"name",{value:r,writable:!1,configurable:!1}),n},h=y("addListener"),g=y("removeListener"),b=(e,t)=>{let r=h({eventName:e},t),o=async()=>{g({eventName:e,callbackId:await r},t)},n=new Promise(e=>r.then(()=>e({remove:o})));return n.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()},n},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?b:h;case"removeListener":return g;default:return y(t)}}});return s[e]=v,l.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(r),...m?[f]:[]])}),v},i.Exception=d,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,o.Capacitor=i),m=f.registerPlugin;class p{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);let o=this.windowListeners[e];return o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){for(let e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){let o=this.listeners[e];if(!o){if(r){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}o.forEach(e=>e(t))}hasListeners(e){var t;return!!(null==(t=this.listeners[e])?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new f.Exception(e,t.Unimplemented)}unavailable(e="not available"){return new f.Exception(e,t.Unavailable)}async removeListener(e,t){let r=this.listeners[e];if(!r)return;let o=r.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}let y=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class h extends p{async getCookies(){let e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[r,o]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),o=o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),t[r]=o}),t}async setCookie(e){try{let t=y(e.key),r=y(e.value),o=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",n=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${o}; path=${n}; ${a};`}catch(e){return Promise.reject(e)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{for(let e of document.cookie.split(";")||[])document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}m("CapacitorCookies",{web:()=>new h});let g=async e=>new Promise((t,r)=>{let o=new FileReader;o.onload=()=>{let e=o.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},o.onerror=e=>r(e),o.readAsDataURL(e)});class b extends p{async request(e){let t,r,o=((e,t={})=>{let r=Object.assign({method:e.method||"GET",headers:e.headers},t),o=((e={})=>{let t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((r,o,n)=>(r[o]=e[t[n]],r),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)r.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){let t=new URLSearchParams;for(let[r,o]of Object.entries(e.data||{}))t.set(r,o);r.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){let t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,r)=>{t.append(r,e)});else for(let r of Object.keys(e.data))t.append(r,e.data[r]);r.body=t;let o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(o.includes("application/json")||"object"==typeof e.data)&&(r.body=JSON.stringify(e.data));return r})(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,r)=>{let o,n,[a,i]=r;return Array.isArray(i)?(n="",i.forEach(e=>{o=t?encodeURIComponent(e):e,n+=`${a}=${o}&`}),n.slice(0,-1)):(o=t?encodeURIComponent(i):i,n=`${a}=${o}`),`${e}&${n}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=n?`${e.url}?${n}`:e.url,i=await fetch(a,o),s=i.headers.get("content-type")||"",{responseType:c="text"}=i.ok?e:{};switch(s.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":r=await i.blob(),t=await g(r);break;case"json":t=await i.json();break;default:t=await i.text()}let u={};return i.headers.forEach((e,t)=>{u[t]=e}),{data:t,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}m("CapacitorHttp",{web:()=>new b}),e.s(["Capacitor",()=>f,"WebPlugin",()=>p,"registerPlugin",()=>m])},235090,e=>{"use strict";let t=(0,e.i(369547).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],235090)},641405,e=>{"use strict";let t=(0,e.i(369547).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],641405)},386408,e=>{"use strict";let t=(0,e.i(369547).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],386408)},130027,e=>{"use strict";var t=e.i(391398),r=e.i(191788),o=e.i(671185),n=e.i(357006),a=e.i(479293),i=e.i(55037),s=e.i(593427),c=e.i(474864),u=e.i(674534),l="Switch",[d,f]=(0,a.createContextScope)(l),[m,p]=d(l),y=r.forwardRef((e,a)=>{let{__scopeSwitch:s,name:c,checked:d,defaultChecked:f,required:p,disabled:y,value:h="on",onCheckedChange:g,form:w,...S}=e,[E,P]=r.useState(null),_=(0,n.useComposedRefs)(a,e=>P(e)),C=r.useRef(!1),x=!E||w||!!E.closest("form"),[I,R]=(0,i.useControllableState)({prop:d,defaultProp:f??!1,onChange:g,caller:l});return(0,t.jsxs)(m,{scope:s,checked:I,disabled:y,children:[(0,t.jsx)(u.Primitive.button,{type:"button",role:"switch","aria-checked":I,"aria-required":p,"data-state":v(I),"data-disabled":y?"":void 0,disabled:y,value:h,...S,ref:_,onClick:(0,o.composeEventHandlers)(e.onClick,e=>{R(e=>!e),x&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),x&&(0,t.jsx)(b,{control:E,bubbles:!C.current,name:c,value:h,checked:I,required:p,disabled:y,form:w,style:{transform:"translateX(-100%)"}})]})});y.displayName=l;var h="SwitchThumb",g=r.forwardRef((e,r)=>{let{__scopeSwitch:o,...n}=e,a=p(h,o);return(0,t.jsx)(u.Primitive.span,{"data-state":v(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:r})});g.displayName=h;var b=r.forwardRef(({__scopeSwitch:e,control:o,checked:a,bubbles:i=!0,...u},l)=>{let d=r.useRef(null),f=(0,n.useComposedRefs)(d,l),m=(0,s.usePrevious)(a),p=(0,c.useSize)(o);return r.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[m,a,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...u,tabIndex:-1,ref:f,style:{...u.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var w=e.i(353533);let S=r.forwardRef(({className:e,...r},o)=>(0,t.jsx)(y,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:o,children:(0,t.jsx)(g,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));S.displayName=y.displayName,e.s(["Switch",()=>S],130027)},660522,e=>{"use strict";var t=e.i(411168);let r=(e,t="Ush")=>{let r=Math.round(e).toLocaleString();return`${t} ${r}`},o=async(e,o)=>{let{filename:n,orientation:a="portrait",format:i="a4",margins:s={top:20,right:20,bottom:20,left:20},returnBlob:c=!1}=o,u=new t.default({orientation:a,unit:"mm",format:i,compress:!0}),l=u.internal.pageSize.getWidth(),d=u.internal.pageSize.getHeight(),f=l-s.left-s.right,m=s.top,p=()=>{u.setLineWidth(.2)},y=(e,t,r,o={})=>{let{fontSize:n=10,fontStyle:a="normal",align:i="left",maxWidth:s}=o;if(u.setFontSize(n),u.setFont("helvetica",a),!s)return u.text(e,t,r,{align:i}),.35*n;{let o=u.splitTextToSize(e,s);return u.text(o,t,r,{align:i}),o.length*(.35*n)}},h=(e,t,r,o,n={})=>{let{fontSize:a=10,fontStyle:i="normal",align:s="left",lineHeight:c=1.2}=n;u.setFontSize(a),u.setFont("helvetica",i);let l=u.splitTextToSize(e,o),d=.35*a*c;return l.forEach((e,o)=>{u.text(e,t,r+o*d,{align:s})}),l.length*d},g=(e,t,r,o)=>{p(),u.line(e,t,r,o)},b=(e,t,r,o,n="S")=>{p(),u.rect(e,t,r,o,n)},v=()=>{b(s.left,s.top,f,d-s.top-s.bottom,"S")},w=e=>m+e>d-s.bottom&&(u.addPage(),m=s.top+10,v(),!0);v();let S=s.left+8,E=f-16;if(m+=8,e.businessLogo)try{let t=new Image;t.crossOrigin="anonymous",await new Promise((r,o)=>{t.onload=()=>{try{let e=document.createElement("canvas"),r=e.getContext("2d");if(r){e.width=t.width,e.height=t.height,r.drawImage(t,0,0);let o=e.toDataURL("image/png"),n=t.width/t.height;u.addImage(o,"PNG",S,m,15*n,15)}}catch(e){console.error("Error adding logo to PDF:",e)}r()},t.onerror=()=>{console.error("Error loading logo image"),r()},t.src=e.businessLogo})}catch(e){console.error("Error processing logo:",e)}let P=.75*E,_=S+E,C=m;if(e.businessName&&(C+=y(e.businessName,_,C,{fontSize:14,fontStyle:"bold",align:"right"}),C+=1.5),e.businessAddress){let t=u.splitTextToSize(e.businessAddress,P);t.forEach((e,t)=>{u.setFontSize(10),u.setFont("helvetica","normal"),u.text(e,_,C+3.15*t,{align:"right"})}),C+=3.15*t.length+.5}e.businessPhone&&(C+=y(`Phone: ${e.businessPhone}`,_,C,{fontSize:9,align:"right"}),C+=.5),e.businessEmail&&(C+=y(`Email: ${e.businessEmail}`,_,C,{fontSize:9,align:"right"}),C+=.5),m=Math.max(m+18,C)+5,w(20),g(S,m,S+E,m),m+=6,m+=y(e.documentTitle.toUpperCase(),l/2,m,{fontSize:16,fontStyle:"bold",align:"center"});let x=m+=4,I=x;I+=y(`${e.documentNumberLabel} ${e.receiptNumber}`,S,I,{fontSize:11,fontStyle:"bold"}),I+=2,I+=y(`Date: ${e.date}`,S,I,{fontSize:10}),I+=2,I+=y(`Time: ${e.time}`,S,I,{fontSize:10});let R=S+.7*E;if(y(`Status: ${e.status}`,R,x,{fontSize:11,fontStyle:"bold",align:"left"}),m=I+4,e.customerName&&""!==e.customerName.trim()){if(w(30),m+=y("Customer Information:",S,m,{fontSize:11,fontStyle:"bold"}),m+=3,m+=y(e.customerName,S,m,{fontSize:10}),m+=2.5,e.customerAddress&&""!==e.customerAddress.trim()){let t=h(e.customerAddress,S,m,.8*E,{fontSize:10,lineHeight:1});m+=t,m+=2.5}e.customerContact&&""!==e.customerContact.trim()&&(m+=y(e.customerContact,S,m,{fontSize:10}),m+=2.5),m+=3}let A=e.items.some(e=>(e.discountPercentage||0)>0||(e.discountAmount||0)>0),T=A?["Description","Qty","Unit Price","Discount","Amount"]:["Description","Qty","Unit Price","Amount"],N=A?[.35*E,.15*E,.18*E,.12*E,.2*E]:[.45*E,.15*E,.2*E,.2*E];u.setFillColor(245,245,245),b(S,m-2,E,10,"F"),b(S,m-2,E,10,"S");let O=S;T.forEach((e,t)=>{y(e,O+3,m+4,{fontSize:10,fontStyle:"bold"}),t<T.length-1&&g(O+N[t],m-2,O+N[t],m+8),O+=N[t]}),m+=10;let k=0;e.items.forEach((t,o)=>{u.setFontSize(9);let n=Math.max(8,3.5*u.splitTextToSize(t.description,N[0]-6).length+4);w(n+5),t.unitPrice,t.quantity,t.discountAmount;let a=t.amount;if(k+=a,o%2==1&&(u.setFillColor(250,250,250),b(S,m,E,n,"F")),b(S,m,E,n,"S"),O=S,h(t.description,O+3,m+4,N[0]-6,{fontSize:9,lineHeight:1.1}),g(O+=N[0],m,O,m+n),y(t.quantity.toString(),O+N[1]-3,m+n/2+1.5,{fontSize:9,align:"right"}),g(O+=N[1],m,O,m+n),y(r(t.unitPrice,e.currency),O+N[2]-3,m+n/2+1.5,{fontSize:9,align:"right"}),g(O+=N[2],m,O,m+n),A){let o="-";(t.discountPercentage||0)>0?o=`${t.discountPercentage}%`:(t.discountAmount||0)>0&&(o=r(t.discountAmount,e.currency)),y(o,O+N[3]-3,m+n/2+1.5,{fontSize:9,align:"right"}),g(O+=N[3],m,O,m+n)}y(r(a,e.currency),O+N[A?4:3]-3,m+n/2+1.5,{fontSize:9,align:"right"}),m+=n,o<e.items.length-1&&g(S,m,S+E,m)}),m+=5,w(70);let j=S+.45*E,L=.55*E,M=.55*L,D=.45*L,F=e.items.reduce((e,t)=>{let r=t.unitPrice*t.quantity;return e+("amount"===t.discountType?t.discountAmount||0:r*(t.discountPercentage||0)/100)},0);if(F>0&&(b(j,m,L,8,"S"),u.setFillColor(248,248,248),b(j,m,L,8,"F"),y("Subtotal (before discount):",j+4,m+5.5,{fontSize:10,fontStyle:"normal"}),g(j+M,m,j+M,m+8),y(r(k+F,e.currency),j+M+D-4,m+5.5,{fontSize:10,fontStyle:"normal",align:"right"}),b(j,m+=8,L,8,"S"),u.setFillColor(255,240,220),b(j,m,L,8,"F"),y("Total Discount:",j+4,m+5.5,{fontSize:10,fontStyle:"normal"}),g(j+M,m,j+M,m+8),y(`-${r(F,e.currency)}`,j+M+D-4,m+5.5,{fontSize:10,fontStyle:"normal",align:"right"}),m+=8),b(j,m,L,8,"S"),u.setFillColor(248,248,248),b(j,m,L,8,"F"),y(F>0?"Subtotal (after discount):":"Subtotal:",j+4,m+5.5,{fontSize:10,fontStyle:"normal"}),g(j+M,m,j+M,m+8),y(r(k,e.currency),j+M+D-4,m+5.5,{fontSize:10,fontStyle:"normal",align:"right"}),m+=8,e.showTaxRow&&e.taxAmount>0&&(b(j,m,L,8,"S"),u.setFillColor(250,250,250),b(j,m,L,8,"F"),y(`Tax (${e.taxRate}%):`,j+4,m+5.5,{fontSize:10,fontStyle:"normal"}),g(j+M,m,j+M,m+8),y(r(e.taxAmount,e.currency),j+M+D-4,m+5.5,{fontSize:10,fontStyle:"normal",align:"right"}),m+=8),b(j,m,L,12,"S"),u.setFillColor(220,220,220),b(j,m,L,12,"F"),y("TOTAL:",j+4,m+7.5,{fontSize:12,fontStyle:"bold"}),g(j+M,m,j+M,m+12),y(r(e.totalAmount,e.currency),j+M+D-4,m+7.5,{fontSize:12,fontStyle:"bold",align:"right"}),m+=12,e.isInstallmentSale&&(void 0!==e.amountPaid&&(b(j,m,L,8,"S"),u.setFillColor(240,248,255),b(j,m,L,8,"F"),y("Amount Paid:",j+4,m+5.5,{fontSize:10,fontStyle:"bold"}),g(j+M,m,j+M,m+8),y(r(e.amountPaid,e.currency),j+M+D-4,m+5.5,{fontSize:10,fontStyle:"bold",align:"right"}),m+=8),void 0!==e.amountDue&&(b(j,m,L,8,"S"),u.setFillColor(255,240,240),b(j,m,L,8,"F"),y("Amount Due:",j+4,m+5.5,{fontSize:10,fontStyle:"bold"}),g(j+M,m,j+M,m+8),y(r(e.amountDue,e.currency),j+M+D-4,m+5.5,{fontSize:10,fontStyle:"bold",align:"right"}),m+=8)),m+=7,e.totalAmountInWords){w(20),y("Amount in words:",S,m+=2,{fontSize:10,fontStyle:"bold"}),m+=4;let t=h(`${e.currency} ${e.totalAmountInWords} only`,S,m,.9*E,{fontSize:10,fontStyle:"italic",lineHeight:1.4});m+=t+4}if(e.hasPaymentInfo&&e.paymentMethods&&e.paymentMethods.length>0){w(40),g(S,m,S+E,m),y("Payment Information:",S,m+=5,{fontSize:11,fontStyle:"bold"}),m+=4;let t=["Payment Method","Account Number","Account Name"],r=[.28*E,.36*E,.36*E];u.setFillColor(240,240,240),b(S,m-2,E,10,"F"),b(S,m-2,E,10,"S");let o=S;t.forEach((e,n)=>{y(e,o+4,m+4,{fontSize:9,fontStyle:"bold"}),n<t.length-1&&g(o+r[n],m-2,o+r[n],m+10-2),o+=r[n]}),m+=10,e.paymentMethods.filter(e=>e.method.trim()||e.accountNumber.trim()||e.accountName.trim()).forEach((e,t)=>{w(15),t%2==1&&(u.setFillColor(248,248,248),b(S,m,E,10,"F")),b(S,m,E,10,"S"),o=S,y(e.method,o+4,m+5,{fontSize:9,fontStyle:"bold"}),g(o+=r[0],m,o,m+10),y(e.accountNumber,o+4,m+5,{fontSize:9}),g(o+=r[1],m,o,m+10),y(e.accountName,o+4,m+5,{fontSize:9}),m+=10}),m+=4}if(e.notes&&e.notes.trim()){w(25),g(S,m,S+E,m),y("Notes:",S,m+=4,{fontSize:11,fontStyle:"bold"}),m+=6;let t=E-8;u.splitTextToSize(e.notes,t).forEach(e=>{w(8),y(e,S+4,m,{fontSize:10}),m+=5}),m+=4}if(e.signature)try{w(35);let t=new Image;t.crossOrigin="anonymous",await new Promise(r=>{t.onload=()=>{try{let e=document.createElement("canvas"),r=e.getContext("2d");if(r){let o,n;e.width=t.width,e.height=t.height,r.drawImage(t,0,0);let a=e.toDataURL("image/png"),i=t.width/t.height;i>2?(o=40,n=40/i):(n=20,o=20*i);let s=S+E-o;g(S,m,S+E,m),m+=4,u.addImage(a,"PNG",s,m,o,n),m+=n+2,y("Authorized Signature",s+o/2,m,{fontSize:8,align:"center"}),m+=4}}catch(e){console.error("Error adding signature to PDF:",e)}r()},t.onerror=()=>{console.error("Error loading signature image"),r()},t.src=e.signature})}catch(e){console.error("Error processing signature:",e)}if(w(25),y("Thank you for your business!",l/2,m+=6,{fontSize:11,fontStyle:"bold",align:"center"}),y("Created by Gonza Systems",l/2,m+=5,{fontSize:9,align:"center"}),c)return u.output("blob");n&&u.save(n)};e.s(["generateReceiptVectorPDF",0,o])},681912,(e,t,r)=>{"use strict";var o=e.r(730943);r.createRoot=o.createRoot,r.hydrateRoot=o.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return o}});let o=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return o}});let o=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return S},MissingStaticPage:function(){return w},NormalizeError:function(){return b},PageNotFoundError:function(){return v},SP:function(){return y},ST:function(){return h},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return l},isAbsoluteUrl:function(){return c},isResSent:function(){return f},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return E}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...o)=>(r||(r=!0,t=e(...o)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>s.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function l(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let o=await e.getInitialProps(t);if(r&&f(r))return o;if(!o)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${o}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o}let y="u">typeof performance,h=y&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class w extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class S extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function E(e){return JSON.stringify({message:e.message,stack:e.stack})}},450095,e=>{"use strict";let t=(0,e.i(369547).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],450095)},102150,e=>{"use strict";var t=e.i(391398),r=e.i(191788);e.i(730943);var o=e.i(817549),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let a=(0,o.createSlot)(`Primitive.${n}`),i=r.forwardRef((e,r)=>{let{asChild:o,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(o?a:n,{...i,ref:r})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{}),a="horizontal",i=["horizontal","vertical"],s=r.forwardRef((e,r)=>{var o;let{decorative:s,orientation:c=a,...u}=e,l=(o=c,i.includes(o))?c:a;return(0,t.jsx)(n.div,{"data-orientation":l,...s?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...u,ref:r})});s.displayName="Separator";var c=e.i(353533);let u=r.forwardRef(({className:e,orientation:r="horizontal",decorative:o=!0,...n},a)=>(0,t.jsx)(s,{ref:a,decorative:o,orientation:r,className:(0,c.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...n}));u.displayName=s.displayName,e.s(["Separator",()=>u],102150)},978757,e=>{"use strict";let t=(0,e.i(369547).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>t],978757)},879975,614913,e=>{"use strict";var t=e.i(191788),r=e.i(150064),o=e.i(46108),n=e.i(546462),a=e.i(893930),i=e.i(285700),s=e.i(256680),c=e.i(290205);async function u(e){try{let t=await s.db.customer.findMany({where:{branchId:e},orderBy:{name:"asc"}}),r=await s.db.customer.count({where:{branchId:e}}),o=t.map(e=>({id:e.id,fullName:e.name,phoneNumber:e.phone,email:e.email,birthday:e.birthday?e.birthday.toISOString():null,gender:e.gender,location:e.address,categoryId:e.categoryId,notes:e.notes,tags:e.tags||[],socialMedia:e.socialMedia||null,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}));return{success:!0,data:{customers:o,count:r}}}catch(e){return console.error("Error fetching customers:",e),{success:!1,error:e.message}}}async function l(e,t,r){try{let o=await s.db.customer.create({data:{branchId:e,adminId:t,name:r.fullName,phone:r.phoneNumber||null,email:r.email||null,birthday:r.birthday?new Date(r.birthday):null,gender:r.gender||null,address:r.location||null,categoryId:r.categoryId||null,notes:r.notes||null,tags:r.tags||[],socialMedia:r.socialMedia||null}});return(0,c.revalidatePath)("/customers"),{success:!0,data:o}}catch(e){return console.error("Error creating customer:",e),{success:!1,error:e.message}}}async function d(e,t){try{let r={};void 0!==t.fullName&&(r.name=t.fullName),void 0!==t.phoneNumber&&(r.phone=t.phoneNumber),void 0!==t.email&&(r.email=t.email),void 0!==t.birthday&&(r.birthday=t.birthday?new Date(t.birthday):null),void 0!==t.gender&&(r.gender=t.gender),void 0!==t.location&&(r.address=t.location),void 0!==t.categoryId&&(r.categoryId=t.categoryId),void 0!==t.notes&&(r.notes=t.notes),void 0!==t.tags&&(r.tags=t.tags),void 0!==t.socialMedia&&(r.socialMedia=t.socialMedia);let o=await s.db.customer.update({where:{id:e},data:r});return(0,c.revalidatePath)("/customers"),{success:!0,data:o}}catch(e){return console.error("Error updating customer:",e),{success:!1,error:e.message}}}async function f(e){try{return await s.db.customer.delete({where:{id:e}}),(0,c.revalidatePath)("/customers"),{success:!0}}catch(e){return console.error("Error deleting customer:",e),{success:!1,error:e.message}}}async function m(e){try{let t=(await s.db.customerCategory.findMany({where:{branchId:e},orderBy:{name:"asc"}})).map(e=>({id:e.id,name:e.name,isDefault:e.isDefault,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}));return{success:!0,data:t}}catch(e){return console.error("Error fetching customer categories:",e),{success:!1,error:e.message}}}async function p(e,t,r){try{let o=await s.db.customerCategory.create({data:{branchId:e,name:r.trim(),isDefault:!1,userId:t}});return(0,c.revalidatePath)("/customers"),{success:!0,data:o}}catch(e){return console.error("Error creating customer category:",e),{success:!1,error:e.message}}}async function y(e,t){try{let r=await s.db.customerCategory.update({where:{id:e},data:{name:t.trim()}});return(0,c.revalidatePath)("/customers"),{success:!0,data:r}}catch(e){return console.error("Error updating customer category:",e),{success:!1,error:e.message}}}async function h(e){try{return await s.db.customerCategory.delete({where:{id:e}}),(0,c.revalidatePath)("/customers"),{success:!0}}catch(e){return console.error("Error deleting customer category:",e),{success:!1,error:e.message}}}e.s(["createCustomerAction",()=>l,"createCustomerCategoryAction",()=>p,"deleteCustomerAction",()=>f,"deleteCustomerCategoryAction",()=>h,"getCustomerCategoriesAction",()=>m,"getCustomersAction",()=>u,"updateCustomerAction",()=>d,"updateCustomerCategoryAction",()=>y],614913);var g=e.i(824216);e.s(["useCustomers",0,(e=50)=>{let[s,c]=(0,t.useState)([]),[m,p]=(0,t.useState)(1),[y,h]=(0,t.useState)(e),[b,v]=(0,t.useState)(0),{toast:w}=(0,r.useToast)(),{currentBusiness:S}=(0,o.useBusiness)(),{user:E}=(0,g.useAuth)(),{logActivity:P}=(0,n.useActivityLogger)(),_=(0,i.useQueryClient)(),C=(0,t.useCallback)(async()=>{if(!S)return{customers:[],count:0};try{let e=await u(S.id);if(!e.success)throw Error(e.error);return{customers:(e.data?.customers||[]).map(e=>({id:e.id,fullName:e.fullName||e.name,phoneNumber:e.phoneNumber||e.phone,email:e.email,birthday:e.birthday?new Date(e.birthday):null,gender:e.gender,location:e.location||e.address,categoryId:e.categoryId,notes:e.notes,tags:e.tags,socialMedia:e.socialMedia||null,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})),count:e.data?.count||0}}catch(e){return console.error("Error loading customers:",e),w({title:"Error",description:"Failed to load customers. Please try again.",variant:"destructive"}),{customers:[],count:0}}},[S?.id,w]),x=["customers",S?.id],{data:I,isLoading:R,isFetching:A}=(0,a.useQuery)({queryKey:x,queryFn:C,enabled:!!S?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});(0,t.useEffect)(()=>{I&&(c(I.customers),v(I.count))},[I]);let T=async e=>{if(!S)return w({title:"Error",description:"No business selected",variant:"destructive"}),null;try{if(!E)throw Error("User not authenticated");let t={fullName:e.fullName,phoneNumber:e.phoneNumber||null,email:e.email||null,birthday:e.birthday?.toISOString().split("T")[0]||null,gender:e.gender||null,location:e.location||null,categoryId:e.categoryId||null,notes:e.notes||null,tags:e.tags||null,socialMedia:e.socialMedia||null},r=await l(S.id,E.id,t);if(!r.success||!r.data)throw Error(r.error||"Failed to create customer");let o=r.data,n={id:o.id,fullName:o.name||o.fullName,phoneNumber:o.phone||o.phoneNumber,email:o.email,birthday:o.birthday?new Date(o.birthday):null,gender:o.gender,location:o.address||o.location,categoryId:o.categoryId,notes:o.notes,tags:o.tags,socialMedia:o.socialMedia,createdAt:new Date(o.createdAt),updatedAt:new Date(o.updatedAt)};return c(e=>[n,...e]),v(e=>e+1),_.setQueryData(x,e=>e?{customers:[n,...e.customers],count:(e.count||0)+1}:{customers:[n],count:1}),await P({activityType:"CREATE",module:"CUSTOMERS",entityType:"customer",entityId:o.id,entityName:e.fullName,description:`Created customer "${e.fullName}"`,metadata:{phoneNumber:e.phoneNumber,email:e.email,location:e.location}}),w({title:"Success",description:"Customer created successfully"}),o}catch(e){return console.error("Error creating customer:",e),w({title:"Error",description:"Failed to create customer. Please try again.",variant:"destructive"}),null}},N=async(e,t)=>{try{let r={};void 0!==t.fullName&&(r.fullName=t.fullName),void 0!==t.phoneNumber&&(r.phoneNumber=t.phoneNumber),void 0!==t.email&&(r.email=t.email),void 0!==t.birthday&&(r.birthday=t.birthday?.toISOString()),void 0!==t.gender&&(r.gender=t.gender),void 0!==t.location&&(r.location=t.location),void 0!==t.categoryId&&(r.categoryId=t.categoryId),void 0!==t.notes&&(r.notes=t.notes),void 0!==t.tags&&(r.tags=t.tags),void 0!==t.socialMedia&&(r.socialMedia=t.socialMedia);let o=await d(e,r);if(!o.success)throw Error(o.error||"Failed to update customer");c(r=>r.map(r=>r.id===e?{...r,...t}:r)),_.setQueryData(x,r=>r?{...r,customers:r.customers.map(r=>r.id===e?{...r,...t}:r)}:r);let n=s.find(t=>t.id===e);return n&&await P({activityType:"UPDATE",module:"CUSTOMERS",entityType:"customer",entityId:e,entityName:n.fullName,description:`Updated customer "${n.fullName}"`,metadata:{updates:t}}),w({title:"Success",description:"Customer updated successfully"}),!0}catch(e){return console.error("Error updating customer:",e),w({title:"Error",description:"Failed to update customer. Please try again.",variant:"destructive"}),!1}},O=async e=>{try{let t=s.find(t=>t.id===e),r=await f(e);if(!r.success)throw Error(r.error||"Failed to delete customer");return c(t=>t.filter(t=>t.id!==e)),v(e=>Math.max(0,e-1)),_.setQueryData(x,t=>{if(!t)return t;let{customers:r,count:o}=t;return{customers:r.filter(t=>t.id!==e),count:Math.max(0,(o||0)-1)}}),_.invalidateQueries({queryKey:x}),t&&await P({activityType:"DELETE",module:"CUSTOMERS",entityType:"customer",entityId:e,entityName:t.fullName,description:`Deleted customer "${t.fullName}"`,metadata:{phoneNumber:t.phoneNumber,email:t.email}}),w({title:"Success",description:"Customer deleted successfully"}),!0}catch(e){return console.error("Error deleting customer:",e),w({title:"Error",description:"Failed to delete customer. Please try again.",variant:"destructive"}),!1}};return{customers:s,isLoading:R&&!I,createCustomer:T,addCustomer:T,updateCustomer:N,deleteCustomer:O,loadCustomers:C,page:m,setPage:p,pageSize:y,setPageSize:h,totalCount:b}}],879975)},533398,e=>{"use strict";var t=e.i(191788),r=e.i(46108),o=e.i(638822),n=e.i(893930),a=e.i(285700),i=e.i(150064),s=e.i(256680),c=e.i(290205);async function u(e,t){try{let r=await s.db.message.findMany({where:{userId:e,locationId:t},orderBy:{createdAt:"desc"}});return{success:!0,data:r.map(e=>({id:e.id,userId:e.userId,locationId:e.locationId,profileId:e.profileId,customerId:e.customerId,phoneNumber:e.phoneNumber,content:e.content,status:e.status,smsCreditsUsed:e.smsCreditsUsed,templateId:e.templateId,errorMessage:e.errorMessage,sentAt:e.sentAt?.toISOString(),deliveredAt:e.deliveredAt?.toISOString(),createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString(),metadata:e.metadata}))}}catch(e){return console.error("Error fetching messages:",e),{success:!1,error:e.message}}}async function l(e){try{let t=await s.db.message.create({data:{userId:e.userId,locationId:e.locationId,profileId:e.profileId,customerId:e.customerId,phoneNumber:e.phoneNumber,content:e.content,status:e.status||"pending",smsCreditsUsed:e.smsCreditsUsed||0,templateId:e.templateId,metadata:e.metadata}});return"sent"===t.status&&e.profileId&&await s.db.user.update({where:{id:e.profileId},data:{credits:{decrement:t.smsCreditsUsed}}}),(0,c.revalidatePath)("/messages"),{success:!0,data:t}}catch(e){return console.error("Error creating message:",e),{success:!1,error:e.message}}}async function d(e,t){try{let r=await s.db.messageTemplate.findMany({where:{userId:e,locationId:t},orderBy:{createdAt:"desc"}});return{success:!0,data:r}}catch(e){return console.error("Error fetching message templates:",e),{success:!1,error:e.message}}}async function f(e){try{let t=await s.db.messageTemplate.create({data:{userId:e.userId,locationId:e.locationId,name:e.name,content:e.content,category:e.category,variables:e.variables,isDefault:e.isDefault||!1}});return(0,c.revalidatePath)("/messages"),{success:!0,data:t}}catch(e){return console.error("Error creating message template:",e),{success:!1,error:e.message}}}async function m(e,t){try{let r=await s.db.messageTemplate.update({where:{id:e},data:{name:t.name,content:t.content,category:t.category,variables:t.variables,isDefault:t.isDefault}});return(0,c.revalidatePath)("/messages"),{success:!0,data:r}}catch(e){return console.error("Error updating message template:",e),{success:!1,error:e.message}}}async function p(e){try{return await s.db.messageTemplate.delete({where:{id:e}}),(0,c.revalidatePath)("/messages"),{success:!0}}catch(e){return console.error("Error deleting message template:",e),{success:!1,error:e.message}}}e.s(["useMessages",0,e=>{let[s,c]=(0,t.useState)([]),[y,h]=(0,t.useState)([]),[g,b]=(0,t.useState)([]),[v,w]=(0,t.useState)(0),{currentBusiness:S}=(0,r.useBusiness)(),{currentProfile:E}=(0,o.useProfiles)(),P=(0,a.useQueryClient)(),_=async()=>{E?.sms_credits!==void 0&&w(E.sms_credits)},C=async t=>{if(!e||!S?.id)return null;try{let r=await f({userId:e,locationId:S.id,name:t.name,content:t.content,category:t.category,variables:t.variables,isDefault:t.isDefault});if(r.success&&r.data)return O(),r.data;throw Error(r.error)}catch(e){return console.error("Error creating template:",e),(0,i.toast)({title:"Error",description:"Failed to create template",variant:"destructive"}),null}},x=async(e,t)=>{try{let r=await m(e,t);if(r.success)O();else throw Error(r.error)}catch(e){console.error("Error updating template:",e),(0,i.toast)({title:"Error",description:"Failed to update template",variant:"destructive"})}},I=async e=>{try{let t=await p(e);if(t.success)h(t=>t.filter(t=>t.id!==e));else throw Error(t.error)}catch(e){console.error("Error deleting template:",e),(0,i.toast)({title:"Error",description:"Failed to delete template",variant:"destructive"})}},R=(0,t.useCallback)(async()=>{if(!e||!S?.id)return[];try{let t=await u(e,S.id);if(t.success&&t.data)return t.data;return[]}catch(e){return console.error("Error fetching messages:",e),[]}},[e,S?.id]),A=["messages",e,S?.id],{data:T,isLoading:N}=(0,n.useQuery)({queryKey:A,queryFn:R,enabled:!!e&&!!S?.id});(0,t.useEffect)(()=>{T&&c(T)},[T]);let O=async()=>{if(e&&S?.id)try{let t=await d(e,S.id);t.success&&t.data&&h(t.data)}catch(e){console.error("Error fetching templates:",e)}},k=async()=>{b([])},j=async t=>{let r;if(!e||!S?.id||!E)return null;let o=(r=t.phoneNumber.replace(/[\s\-\(\)]/g,"")).startsWith("+")?r:r.startsWith("256")?"+"+r:r.startsWith("0")?"+256"+r.substring(1):(9===r.length&&r.match(/^[7]\d{8}$/),"+256"+r),n=Math.ceil(t.content.length/160);if(E.sms_credits<n)return(0,i.toast)({title:"Error",description:"Insufficient credits",variant:"destructive"}),null;try{let r=await l({userId:e,locationId:S.id,profileId:E.id,customerId:t.customerId,phoneNumber:o,content:t.content,templateId:t.templateId,smsCreditsUsed:n,status:"sent",metadata:t.metadata});if(r.success&&r.data){let e={...r.data,createdAt:r.data.createdAt.toISOString()};return c(t=>[e,...t]),P.invalidateQueries({queryKey:A}),(0,i.toast)({title:"Success",description:"Message sent successfully"}),e}throw Error(r.error)}catch(e){return console.error("Error sending message:",e),(0,i.toast)({title:"Error",description:"Failed to send message",variant:"destructive"}),null}},L=async e=>{let t=0;for(let r of e.customerIds)t++;return{success:t,failed:0,errors:[]}},M=async(e,t)=>((0,i.toast)({title:"Info",description:"Credit purchase migration in progress"}),null);return(0,t.useEffect)(()=>{e&&S?.id&&(O(),k(),_())},[e,S?.id,E?.id]),{messages:s,templates:y,purchases:g,liveCredits:v,isLoading:N&&!T,createMessage:j,createBulkMessages:L,createTemplate:C,updateTemplate:x,deleteTemplate:I,getMessageStats:()=>{let e=s.length,t=s.filter(e=>"sent"===e.status||"delivered"===e.status).length,r=s.filter(e=>"failed"===e.status).length;return{total:e,sent:t,failed:r,pending:s.filter(e=>"pending"===e.status).length,totalCreditsUsed:s.reduce((e,t)=>e+t.smsCreditsUsed,0),creditsRemaining:v}},initiateCreditPurchase:M,refresh:()=>{P.invalidateQueries({queryKey:A}),O(),k(),_()}}}],533398)},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return c},LayoutRouterContext:function(){return s},MissingSlotContext:function(){return l},TemplateContext:function(){return u}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(741705)._(e.r(191788)),i=a.default.createContext(null),s=a.default.createContext(null),c=a.default.createContext(null),u=a.default.createContext(null),l=a.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return n}});class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={NavigationPromisesContext:function(){return l},PathParamsContext:function(){return u},PathnameContext:function(){return c},ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},SearchParamsContext:function(){return s},createDevToolsInstrumentedPromise:function(){return d}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(191788),i=e.r(531430),s=(0,a.createContext)(null),c=(0,a.createContext)(null),u=(0,a.createContext)(null),l=(0,a.createContext)(null);function d(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={HTTPAccessErrorStatus:function(){return a},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return s},getAccessFallbackErrorTypeByStatus:function(){return l},getAccessFallbackHTTPStatus:function(){return u},isHTTPAccessFallbackError:function(){return c}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(a)),s="NEXT_HTTP_ERROR_FALLBACK";function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===s&&i.has(Number(r))}function u(e){return Number(e.digest.split(";")[1])}function l(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return n}});var o,n=((o={})[o.SeeOther=303]="SeeOther",o[o.TemporaryRedirect=307]="TemporaryRedirect",o[o.PermanentRedirect=308]="PermanentRedirect",o);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n={REDIRECT_ERROR_CODE:function(){return s},RedirectType:function(){return c},isRedirectError:function(){return u}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(40184),s="NEXT_REDIRECT";var c=((o={}).push="push",o.replace="replace",o);function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,n=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===s&&("replace"===o||"push"===o)&&"string"==typeof n&&!isNaN(a)&&a in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return a}});let o=e.r(991622),n=e.r(301939);function a(e){return(0,n.isRedirectError)(e)||(0,o.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},563933,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={ServerInsertedHTMLContext:function(){return i},useServerInsertedHTML:function(){return s}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(952456)._(e.r(191788)),i=a.default.createContext(null);function s(e){let t=(0,a.useContext)(i);t&&t(e)}},212098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={UnrecognizedActionError:function(){return a},unstable_isUnrecognizedActionError:function(){return i}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});class a extends Error{constructor(...e){super(...e),this.name="UnrecognizedActionError"}}function i(e){return!!(e&&"object"==typeof e&&e instanceof a)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},677292,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"actionAsyncStorageInstance",{enumerable:!0,get:function(){return o}});let o=(0,e.r(456781).createAsyncLocalStorage)()},330324,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"actionAsyncStorage",{enumerable:!0,get:function(){return o.actionAsyncStorageInstance}});let o=e.r(677292)},153656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={getRedirectError:function(){return c},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return l},redirect:function(){return u}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(40184),i=e.r(301939),s="u"<typeof window?e.r(330324).actionAsyncStorage:void 0;function c(e,t,r=a.RedirectStatusCode.TemporaryRedirect){let o=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=`${i.REDIRECT_ERROR_CODE};${t};${e};${r};`,o}function u(e,t){throw c(e,t??=s?.getStore()?.isAction?i.RedirectType.push:i.RedirectType.replace,a.RedirectStatusCode.TemporaryRedirect)}function l(e,t=i.RedirectType.replace){throw c(e,t,a.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function f(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function m(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},532075,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return a}});let o=e.r(991622),n=`${o.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function a(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},569790,(e,t,r)=>{"use strict";function o(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return o}}),e.r(991622).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},4047,(e,t,r)=>{"use strict";function o(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return o}}),e.r(991622).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},396132,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,n.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let o=e.r(14760),n=e.r(68934);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},377989,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isPostpone",{enumerable:!0,get:function(){return n}});let o=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}},636951,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,n.isPostpone)(t)||(0,o.isHangingPromiseRejectionError)(t)||(0,s.isPrerenderInterruptedError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let o=e.r(924616),n=e.r(377989),a=e.r(14760),i=e.r(68934),s=e.r(874571),c=e.r(893733);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},273210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return o}});let o="u"<typeof window?e.r(636951).unstable_rethrow:e.r(396132).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},683531,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={ReadonlyURLSearchParams:function(){return a.ReadonlyURLSearchParams},RedirectType:function(){return s.RedirectType},forbidden:function(){return u.forbidden},notFound:function(){return c.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect},unauthorized:function(){return l.unauthorized},unstable_isUnrecognizedActionError:function(){return f},unstable_rethrow:function(){return d.unstable_rethrow}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(531430),i=e.r(153656),s=e.r(301939),c=e.r(532075),u=e.r(569790),l=e.r(4047),d=e.r(273210);function f(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},829844,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={ReadonlyURLSearchParams:function(){return s.ReadonlyURLSearchParams},RedirectType:function(){return d.RedirectType},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},forbidden:function(){return d.forbidden},notFound:function(){return d.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return d.unauthorized},unstable_isUnrecognizedActionError:function(){return l.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return d.unstable_rethrow},useParams:function(){return g},usePathname:function(){return y},useRouter:function(){return h},useSearchParams:function(){return p},useSelectedLayoutSegment:function(){return v},useSelectedLayoutSegments:function(){return b},useServerInsertedHTML:function(){return u.useServerInsertedHTML}};for(var n in o)Object.defineProperty(r,n,{enumerable:!0,get:o[n]});let a=e.r(952456)._(e.r(191788)),i=e.r(701085),s=e.r(470008),c=e.r(977915),u=e.r(563933),l=e.r(212098),d=e.r(683531),f="u"<typeof window?e.r(874571).useDynamicRouteParams:void 0,m="u"<typeof window?e.r(874571).useDynamicSearchParams:void 0;function p(){m?.("useSearchParams()");let e=(0,a.useContext)(s.SearchParamsContext);return(0,a.useMemo)(()=>e?new s.ReadonlyURLSearchParams(e):null,[e])}function y(){return f?.("usePathname()"),(0,a.useContext)(s.PathnameContext)}function h(){let e=(0,a.useContext)(i.AppRouterContext);if(null===e)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return e}function g(){return f?.("useParams()"),(0,a.useContext)(s.PathParamsContext)}function b(e="children"){f?.("useSelectedLayoutSegments()");let t=(0,a.useContext)(i.LayoutRouterContext);return t?(0,c.getSelectedLayoutSegmentPath)(t.parentTree,e):null}function v(e="children"){f?.("useSelectedLayoutSegment()"),(0,a.useContext)(s.NavigationPromisesContext);let t=b(e);return(0,c.computeSelectedLayoutSegment)(t,e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},217837,(e,t,r)=>{t.exports=e.r(829844)},577340,e=>{"use strict";var t=e.i(191788),r=e.i(46108),o=e.i(150064),n=e.i(824216),a=e.i(873015);e.s(["useSalesCategories",0,()=>{let[e,i]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),{currentBusiness:u}=(0,r.useBusiness)(),{user:l}=(0,n.useAuth)(),d=async()=>{if(!u){i([]),c(!1);return}try{let e=await (0,a.getSalesCategoriesAction)(u.id);if(e.success&&e.data)i(e.data);else throw Error(e.error)}catch(e){console.error("Error fetching sales categories:",e),(0,o.toast)({title:"Error",description:"Failed to fetch sales categories",variant:"destructive"})}finally{c(!1)}};return(0,t.useEffect)(()=>{d()},[u]),{categories:e,isLoading:s,createCategory:async e=>{if(!u||!l)return(0,o.toast)({title:"Error",description:"No business selected or user not authenticated",variant:"destructive"}),!1;try{let t=await (0,a.createSalesCategoryAction)(u.id,l.id,e);if(t.success)return(0,o.toast)({title:"Success",description:"Sales category created successfully"}),d(),!0;throw Error(t.error)}catch(e){return console.error("Error creating sales category:",e),(0,o.toast)({title:"Error",description:"Failed to create sales category",variant:"destructive"}),!1}},updateCategory:async(e,t)=>{try{let r=await (0,a.updateSalesCategoryAction)(e,t);if(r.success)return(0,o.toast)({title:"Success",description:"Sales category updated successfully"}),d(),!0;throw Error(r.error)}catch(e){return console.error("Error updating sales category:",e),(0,o.toast)({title:"Error",description:"Failed to update sales category",variant:"destructive"}),!1}},deleteCategory:async e=>{try{let t=await (0,a.deleteSalesCategoryAction)(e);if(t.success)return(0,o.toast)({title:"Success",description:"Sales category deleted successfully"}),d(),!0;throw Error(t.error)}catch(e){return console.error("Error deleting sales category:",e),(0,o.toast)({title:"Error",description:"Failed to delete sales category",variant:"destructive"}),!1}},createDefaultCategories:async()=>{if(u&&l)try{for(let e of["Retail","Online","Wholesale"])await (0,a.createSalesCategoryAction)(u.id,l.id,e,!0);d()}catch(e){console.error("Error creating default categories:",e)}},refetch:d}}])},569479,e=>{"use strict";let t;var r=e.i(391398),o=e.i(191788),n=e.i(671185),a=e.i(357006),i=e.i(479293),s=e.i(64899),c=e.i(64592),u=e.i(746359),l=(e.i(437767),e.i(993953)),d=e.i(674534),f=Symbol("radix.slottable"),m=e.i(55037),p=e.i(349577),[y,h]=(0,i.createContextScope)("Tooltip",[u.createPopperScope]),g=(0,u.createPopperScope)(),b="TooltipProvider",v="tooltip.open",[w,S]=y(b),E=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:s}=e,c=o.useRef(!0),u=o.useRef(!1),l=o.useRef(0);return o.useEffect(()=>{let e=l.current;return()=>window.clearTimeout(e)},[]),(0,r.jsx)(w,{scope:t,isOpenDelayedRef:c,delayDuration:n,onOpen:o.useCallback(()=>{window.clearTimeout(l.current),c.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:o.useCallback(e=>{u.current=e},[]),disableHoverableContent:i,children:s})};E.displayName=b;var P="Tooltip",[_,C]=y(P),x=e=>{let{__scopeTooltip:t,children:n,open:a,defaultOpen:i,onOpenChange:s,disableHoverableContent:l,delayDuration:d}=e,f=S(P,e.__scopeTooltip),p=g(t),[y,h]=o.useState(null),b=(0,c.useId)(),w=o.useRef(0),E=l??f.disableHoverableContent,C=d??f.delayDuration,x=o.useRef(!1),[I,R]=(0,m.useControllableState)({prop:a,defaultProp:i??!1,onChange:e=>{e?(f.onOpen(),document.dispatchEvent(new CustomEvent(v))):f.onClose(),s?.(e)},caller:P}),A=o.useMemo(()=>I?x.current?"delayed-open":"instant-open":"closed",[I]),T=o.useCallback(()=>{window.clearTimeout(w.current),w.current=0,x.current=!1,R(!0)},[R]),N=o.useCallback(()=>{window.clearTimeout(w.current),w.current=0,R(!1)},[R]),O=o.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{x.current=!0,R(!0),w.current=0},C)},[C,R]);return o.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),(0,r.jsx)(u.Root,{...p,children:(0,r.jsx)(_,{scope:t,contentId:b,open:I,stateAttribute:A,trigger:y,onTriggerChange:h,onTriggerEnter:o.useCallback(()=>{f.isOpenDelayedRef.current?O():T()},[f.isOpenDelayedRef,O,T]),onTriggerLeave:o.useCallback(()=>{E?N():(window.clearTimeout(w.current),w.current=0)},[N,E]),onOpen:T,onClose:N,disableHoverableContent:E,children:n})})};x.displayName=P;var I="TooltipTrigger",R=o.forwardRef((e,t)=>{let{__scopeTooltip:i,...s}=e,c=C(I,i),l=S(I,i),f=g(i),m=o.useRef(null),p=(0,a.useComposedRefs)(t,m,c.onTriggerChange),y=o.useRef(!1),h=o.useRef(!1),b=o.useCallback(()=>y.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),(0,r.jsx)(u.Anchor,{asChild:!0,...f,children:(0,r.jsx)(d.Primitive.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...s,ref:p,onPointerMove:(0,n.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||l.isPointerInTransitRef.current||(c.onTriggerEnter(),h.current=!0))}),onPointerLeave:(0,n.composeEventHandlers)(e.onPointerLeave,()=>{c.onTriggerLeave(),h.current=!1}),onPointerDown:(0,n.composeEventHandlers)(e.onPointerDown,()=>{c.open&&c.onClose(),y.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:(0,n.composeEventHandlers)(e.onFocus,()=>{y.current||c.onOpen()}),onBlur:(0,n.composeEventHandlers)(e.onBlur,c.onClose),onClick:(0,n.composeEventHandlers)(e.onClick,c.onClose)})})});R.displayName=I;var[A,T]=y("TooltipPortal",{forceMount:void 0}),N="TooltipContent",O=o.forwardRef((e,t)=>{let o=T(N,e.__scopeTooltip),{forceMount:n=o.forceMount,side:a="top",...i}=e,s=C(N,e.__scopeTooltip);return(0,r.jsx)(l.Presence,{present:n||s.open,children:s.disableHoverableContent?(0,r.jsx)(D,{side:a,...i,ref:t}):(0,r.jsx)(k,{side:a,...i,ref:t})})}),k=o.forwardRef((e,t)=>{let n=C(N,e.__scopeTooltip),i=S(N,e.__scopeTooltip),s=o.useRef(null),c=(0,a.useComposedRefs)(t,s),[u,l]=o.useState(null),{trigger:d,onClose:f}=n,m=s.current,{onPointerInTransitChange:p}=i,y=o.useCallback(()=>{l(null),p(!1)},[p]),h=o.useCallback((e,t)=>{let r,o=e.currentTarget,n={x:e.clientX,y:e.clientY},a=function(e,t){let r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,o,n,a)){case a:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw Error("unreachable")}}(n,o.getBoundingClientRect());l(((r=[...function(e,t,r=5){let o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return o}(n,a),...function(e){let{top:t,right:r,bottom:o,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:o},{x:n,y:o}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let o=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(o.y-r.y)>=(e.y-r.y)*(o.x-r.x))t.pop();else break}t.push(o)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let o=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(o.y-t.y)>=(e.y-t.y)*(o.x-t.x))r.pop();else break}r.push(o)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),p(!0)},[p]);return o.useEffect(()=>()=>y(),[y]),o.useEffect(()=>{if(d&&m){let e=e=>h(e,m),t=e=>h(e,d);return d.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}},[d,m,h,y]),o.useEffect(()=>{if(u){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},o=d?.contains(t)||m?.contains(t),n=!function(e,t){let{x:r,y:o}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let i=t[e],s=t[a],c=i.x,u=i.y,l=s.x,d=s.y;u>o!=d>o&&r<(l-c)*(o-u)/(d-u)+c&&(n=!n)}return n}(r,u);o?y():n&&(y(),f())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,m,u,f,y]),(0,r.jsx)(D,{...e,ref:c})}),[j,L]=y(P,{isInside:!1}),M=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=f,t),D=o.forwardRef((e,t)=>{let{__scopeTooltip:n,children:a,"aria-label":i,onEscapeKeyDown:c,onPointerDownOutside:l,...d}=e,f=C(N,n),m=g(n),{onClose:y}=f;return o.useEffect(()=>(document.addEventListener(v,y),()=>document.removeEventListener(v,y)),[y]),o.useEffect(()=>{if(f.trigger){let e=e=>{let t=e.target;t?.contains(f.trigger)&&y()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[f.trigger,y]),(0,r.jsx)(s.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:y,children:(0,r.jsxs)(u.Content,{"data-state":f.stateAttribute,...m,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,r.jsx)(M,{children:a}),(0,r.jsx)(j,{scope:n,isInside:!0,children:(0,r.jsx)(p.Root,{id:f.contentId,role:"tooltip",children:i||a})})]})})});O.displayName=N;var F="TooltipArrow";o.forwardRef((e,t)=>{let{__scopeTooltip:o,...n}=e,a=g(o);return L(F,o).isInside?null:(0,r.jsx)(u.Arrow,{...a,...n,ref:t})}).displayName=F;var z=e.i(353533);let H=o.forwardRef(({className:e,sideOffset:t=4,...o},n)=>(0,r.jsx)(O,{ref:n,sideOffset:t,className:(0,z.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o}));H.displayName=O.displayName,e.s(["Tooltip",()=>x,"TooltipContent",()=>H,"TooltipProvider",()=>E,"TooltipTrigger",()=>R],569479)},857274,e=>{"use strict";var t=e.i(391398);let r=(0,e.i(369547).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",0,({imageUrl:e,alt:o,size:n="md"})=>{let a="sm"===n?"w-10 h-10":"w-12 h-12";return e?(0,t.jsx)("img",{src:e,alt:o,className:`${a} object-cover rounded-md`}):(0,t.jsx)("div",{className:`${a} bg-gray-100 flex items-center justify-center rounded-md`,children:(0,t.jsx)(r,{size:"sm"===n?16:18,className:"text-gray-400"})})}],857274)},924432,e=>{"use strict";var t=e.i(256680),r=e.i(290205);async function o(e,r){try{let o={locationId:e};r&&(o.productId=r);let n=await t.db.productHistory.findMany({where:o,include:{product:{select:{name:!0,costPrice:!0,sellingPrice:!0,sku:!0}}},orderBy:[{createdAt:"desc"},{id:"desc"}]});return{success:!0,data:n.map(e=>({id:e.id,productId:e.productId,oldQuantity:e.previousQuantity,newQuantity:e.newQuantity,changeReason:e.changeReason,createdAt:e.createdAt.toISOString(),referenceId:e.referenceId,receiptNumber:e.receiptNumber,product:e.product?{name:e.product.name,costPrice:e.product.costPrice,sellingPrice:e.product.sellingPrice,itemNumber:e.product.sku}:void 0}))}}catch(e){return console.error("Error fetching stock history:",e),{success:!1,error:e.message}}}async function n(e){try{let o=await t.db.$transaction(async t=>{let r=await t.productHistory.create({data:{userId:e.userId,locationId:e.locationId,productId:e.productId,previousQuantity:e.previousQuantity,newQuantity:e.newQuantity,changeReason:e.changeReason,referenceId:e.referenceId||null,receiptNumber:e.receiptNumber||null,createdAt:e.createdAt?new Date(e.createdAt):void 0}});return await t.product.update({where:{id:e.productId},data:{stock:e.newQuantity}}),r});return(0,r.revalidatePath)("/inventory"),{success:!0,data:o}}catch(e){return console.error("Error creating stock history:",e),{success:!1,error:e.message}}}async function a(e,o){try{let n=await t.db.$transaction(async t=>{let r=await t.productHistory.findMany({where:{productId:e,locationId:o},orderBy:[{createdAt:"asc"},{id:"asc"}]});if(0===r.length)return{finalQuantity:0};let n=0,a=[];for(let e of r){let r=e.newQuantity-e.previousQuantity,o=n,i=o+r;(e.previousQuantity!==o||e.newQuantity!==i)&&a.push(t.productHistory.update({where:{id:e.id},data:{previousQuantity:o,newQuantity:i}})),n=i}return a.length>0&&await Promise.all(a),await t.product.update({where:{id:e},data:{stock:n}}),{finalQuantity:n}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:n}}catch(e){return console.error("Error recalculating stock chain:",e),{success:!1,error:e.message}}}async function i(e,o){try{let n=await t.db.$transaction(async t=>{let r=await t.productHistory.findMany({where:{referenceId:e,locationId:o},select:{productId:!0}}),n=[...new Set(r.map(e=>e.productId))];for(let r of(await t.productHistory.deleteMany({where:{referenceId:e,locationId:o}}),n))await c(t,r,o);return{affectedProducts:n.length}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:n}}catch(e){return console.error("Error deleting stock history by reference:",e),{success:!1,error:e.message}}}async function s(e,o,n){try{let a=await t.db.productHistory.updateMany({where:{referenceId:e,locationId:o},data:{createdAt:new Date(n)}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:a}}catch(e){return console.error("Error updating stock history dates:",e),{success:!1,error:e.message}}}async function c(e,t,r){let o=await e.productHistory.findMany({where:{productId:t,locationId:r},orderBy:[{createdAt:"asc"},{id:"asc"}]}),n=0;for(let t of o){let r=t.newQuantity-t.previousQuantity,o=n,a=o+r;(t.previousQuantity!==o||t.newQuantity!==a)&&await e.productHistory.update({where:{id:t.id},data:{previousQuantity:o,newQuantity:a}}),n=a}await e.product.update({where:{id:t},data:{stock:n}})}async function u(e,r){try{let o=await t.db.requisition.findMany({where:{userId:e,locationId:r},orderBy:{createdAt:"desc"}});return{success:!0,data:o.map(e=>({id:e.id,userId:e.userId,locationId:e.branchId,requisitionNumber:e.requisitionNumber,title:e.title||"",items:e.items||[],notes:e.notes,status:e.status,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}))}}catch(e){return console.error("Error fetching requisitions:",e),{success:!1,error:e.message}}}async function l(e){try{let o=await t.db.requisition.create({data:{userId:e.userId,branchId:e.locationId,requisitionNumber:e.requisitionNumber,title:e.title,items:e.items,notes:e.notes,status:e.status||"draft"}});return(0,r.revalidatePath)("/requisitions"),{success:!0,data:{id:o.id,userId:o.userId,locationId:o.branchId,requisitionNumber:o.requisitionNumber,title:o.title||"",items:o.items||[],notes:o.notes,status:o.status,createdAt:o.createdAt.toISOString(),updatedAt:o.updatedAt.toISOString()}}}catch(e){return console.error("Error creating requisition:",e),{success:!1,error:e.message}}}async function d(e,o,n){try{let a=await t.db.requisition.update({where:{id:e,userId:o},data:{title:n.title,items:n.items,notes:n.notes,status:n.status,updatedAt:new Date}});return(0,r.revalidatePath)("/requisitions"),{success:!0,data:{id:a.id,userId:a.userId,locationId:a.branchId,requisitionNumber:a.requisitionNumber,title:a.title||"",items:a.items||[],notes:a.notes,status:a.status,createdAt:a.createdAt.toISOString(),updatedAt:a.updatedAt.toISOString()}}}catch(e){return console.error("Error updating requisition:",e),{success:!1,error:e.message}}}async function f(e,o){try{return await t.db.requisition.delete({where:{id:e,userId:o}}),(0,r.revalidatePath)("/requisitions"),{success:!0}}catch(e){return console.error("Error deleting requisition:",e),{success:!1,error:e.message}}}async function m(e,r,o){try{let n=new Date(r),a=new Date(o),i=await t.db.product.findMany({where:{branchId:e},include:{category:!0}}),s=await Promise.all(i.map(async r=>{let o=await t.db.productHistory.findMany({where:{productId:r.id,locationId:e,createdAt:{gte:n,lte:a}},orderBy:{createdAt:"asc"}}),i=0,s=0,c=0,u=0;o.forEach(e=>{let t=e.newQuantity-e.previousQuantity;"SALE"===e.changeReason?i+=Math.abs(t):"STOCK_IN"===e.changeReason||"RESTOCK"===e.changeReason?s+=t:t>0?c+=t:u+=Math.abs(t)});let l=await t.db.productHistory.findFirst({where:{productId:r.id,locationId:e,createdAt:{lte:a}},orderBy:{createdAt:"desc"}}),d=l?l.newQuantity:0,f=d-(s+c-i-u);return{productId:r.id,productName:r.name,itemNumber:r.sku||r.id,imageUrl:r.imageUrl,costPrice:Number(r.costPrice),sellingPrice:Number(r.sellingPrice),category:r.category?.name,openingStock:f,itemsSold:i,stockIn:s,transferOut:0,returnIn:0,returnOut:0,adjustmentsIn:c,adjustmentsOut:u,closingStock:d,revaluation:d*Number(r.costPrice)}}));return{success:!0,data:s}}catch(e){return console.error("Error generating stock summary report:",e),{success:!1,error:e.message}}}async function p(e,r){try{let o=await t.db.product.findUnique({where:{id:r},include:{category:!0}});if(!o)return{success:!1,error:"Product not found"};let n=await t.db.productHistory.findMany({where:{productId:r,locationId:e},orderBy:[{createdAt:"asc"},{id:"asc"}]}),a=await t.db.sale.findMany({where:{branchId:e},orderBy:{date:"asc"}}),i=n.length>0?n[0].newStock:0,s=n.length>0?n[0].createdAt:null,c=new Map,u=0;a.forEach(e=>{let t=(e.items||[]).filter(e=>e.productId===r).reduce((e,t)=>e+(Number(t.quantity)||0),0);if(t>0)if(s&&e.date<s)u+=t;else{let r=e.date.toISOString().split("T")[0],o=c.get(r)||{itemsSold:0,stockAdded:0,transferOut:0,returnIn:0,returnOut:0,adjustments:0};o.itemsSold+=t,c.set(r,o)}}),n.slice(1).forEach(e=>{let t=e.createdAt.toISOString().split("T")[0],r=e.newStock-e.oldStock,o=(e.changeReason||"").toLowerCase(),n=c.get(t)||{itemsSold:0,stockAdded:0,transferOut:0,returnIn:0,returnOut:0,adjustments:0};"RESTOCK"===e.type||o.includes("purchase")||o.includes("addition")?n.stockAdded+=r:o.includes("transfer out")?n.transferOut+=Math.abs(r):o.includes("customer return")?n.returnIn+=r:o.includes("return to supplier")?n.returnOut+=Math.abs(r):"SALE"!==e.type&&(n.adjustments+=r),c.set(t,n)});let l=Array.from(c.keys()).sort(),d=[],f=i;for(let e of l){let t=c.get(e),r=f,o=r-t.itemsSold+t.stockAdded-t.transferOut+t.returnIn-t.returnOut+t.adjustments;d.push({date:e,startingStock:r,...t,endingStock:o}),f=o}return{success:!0,data:{product:{id:o.id,name:o.name,quantity:o.stock,itemNumber:o.sku},currentStock:o.stock,calculatedStock:f,discrepancy:o.stock-f,openingStock:i,openingDate:s?.toISOString(),excludedSalesQty:u,dailyBreakdown:d}}}catch(e){return console.error("Error in reconciliation action:",e),{success:!1,error:e.message}}}async function y(e){try{let r=await t.db.product.findMany({where:{branchId:e},select:{id:!0,name:!0,stock:!0}}),o=[];for(let n of r){let r=await t.db.productHistory.findMany({where:{productId:n.id,locationId:e},orderBy:[{createdAt:"asc"},{id:"asc"}]});if(0===r.length)continue;let a=0,i=[];for(let e of r){let t=e.newStock-e.oldStock,r=a,o=r+t;(e.oldStock!==r||e.newStock!==o)&&i.push({entryId:e.id,createdAt:e.createdAt.toISOString(),changeReason:e.changeReason,currentPrevQty:e.oldStock,currentNewQty:e.newStock,fixedPrevQty:r,fixedNewQty:o}),a=o}(i.length>0||Math.abs(n.stock-a)>.001)&&o.push({productId:n.id,productName:n.name,totalEntries:r.length,brokenEntries:i,finalFixedQty:a,currentProductQty:n.stock})}return{success:!0,data:o}}catch(e){return{success:!1,error:e.message}}}async function h(e,r){try{let o=r||(await t.db.product.findMany({where:{branchId:e},select:{id:!0}})).map(e=>e.id),n=0,i=0;for(let t of o)try{await a(t,e),n++}catch(e){i++}return{success:!0,data:{repaired:n,failed:i}}}catch(e){return{success:!1,error:e.message}}}async function g(e){try{let r=await t.db.activityHistory.findMany({where:{entityId:{in:e}},select:{entityId:!0,entityName:!0}});return{success:!0,data:r}}catch(e){return{success:!1,error:e.message,data:[]}}}async function b(e,r){try{return await t.db.productHistory.updateMany({where:{id:{in:e}},data:{createdAt:new Date(r)}}),{success:!0}}catch(e){return{success:!1,error:e.message}}}e.s(["createRequisitionAction",()=>l,"createStockHistoryAction",()=>n,"deleteRequisitionAction",()=>f,"deleteStockHistoryEntriesByReferenceAction",()=>i,"getActivityByEntityIdsAction",()=>g,"getProductReconciliationAction",()=>p,"getRequisitionsAction",()=>u,"getStockHistoryAction",()=>o,"getStockRepairsPreviewAction",()=>y,"getStockSummaryReportAction",()=>m,"recalculateStockChainAction",()=>a,"repairStockChainsAction",()=>h,"updateRequisitionAction",()=>d,"updateStockHistoryDatesAction",()=>b,"updateStockHistoryDatesByReferenceAction",()=>s])},83049,e=>{"use strict";var t=e.i(191788),r=e.i(46108),o=e.i(924432);e.s(["useStockHistory",0,(e,n)=>{let[a,i]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),{currentBusiness:u}=(0,r.useBusiness)(),l=(0,t.useCallback)(async()=>{if(!e||!u){i([]),c(!1);return}try{c(!0);let e=await (0,o.getStockHistoryAction)(u.id,n);if(!e.success||!e.data)throw Error(e.error||"Failed to fetch stock history");let t=e.data.map(e=>({id:e.id,productId:e.productId,oldQuantity:e.oldQuantity,newQuantity:e.newQuantity,changeReason:e.changeReason,createdAt:new Date(e.createdAt),referenceId:e.referenceId,receiptNumber:e.receiptNumber,product:e.product}));i(t)}catch(e){console.error("Error loading stock history:",e)}finally{c(!1)}},[e,u?.id,n]);return(0,t.useEffect)(()=>{l()},[l]),{stockHistory:a,isLoading:s,createStockHistoryEntry:async(t,r,n,a,i,s,c,d)=>{try{if(!e||!u)return!1;let f=d?`[${d}] | ${a}`:a,m=await (0,o.createStockHistoryAction)({userId:e,locationId:u.id,productId:t,previousQuantity:r,newQuantity:n,changeReason:f,referenceId:i,receiptNumber:c,createdAt:s?.toISOString()});if(!m.success)return console.error("Error creating stock history entry:",m.error),!1;return await l(),!0}catch(e){return console.error("Error creating stock history:",e),!1}},deleteMultipleStockHistoryEntriesByReference:async e=>{try{if(!u)return!1;let t=await (0,o.deleteStockHistoryEntriesByReferenceAction)(e,u.id);if(!t.success)throw Error(t.error);return await l(),!0}catch(e){return console.error("Error deleting stock history entries:",e),!1}},recalculateStockChain:async e=>{try{if(!u)return!1;let t=await (0,o.recalculateStockChainAction)(e,u.id);if(!t.success)throw Error(t.error);return await l(),!0}catch(e){return console.error("Error recalculating stock chain:",e),!1}},updateStockHistoryDatesBySaleId:async(e,t)=>{try{if(!u)return!1;let r=await (0,o.updateStockHistoryDatesByReferenceAction)(e,u.id,t.toISOString());if(!r.success)throw Error(r.error);return await l(),!0}catch(e){return console.error("Error updating stock history dates:",e),!1}},repairAllStockChains:async e=>{try{if(!u)return{repaired:0,failed:0};let e=await (0,o.repairStockChainsAction)(u.id);if(e.success&&e.data)return e.data;return{repaired:0,failed:0}}catch(e){return console.error("Error repairing all chains:",e),{repaired:0,failed:0}}},previewStockChainRepairs:async e=>{try{if(!u)return[];let e=await (0,o.getStockRepairsPreviewAction)(u.id);if(e.success&&e.data)return e.data;return[]}catch(e){return console.error("Error previewing repairs:",e),[]}},refreshHistory:l}}])},928936,e=>{"use strict";e.s(["matchProductSearch",0,(e,t)=>{if(!t||!t.trim())return!0;let r=t.toLowerCase().trim().split(/\s+/),o=[String(e.name||""),String(e.description||""),String(e.category||""),String(e.supplier||""),String(e.itemNumber||""),String(e.barcode||""),String(e.manufacturerBarcode||"")].map(e=>e.toLowerCase());return r.every(e=>o.some(t=>t.includes(e)))}])},648761,e=>{e.v(t=>Promise.all(["static/chunks/2edb2b394ba4d2db.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))},271188,e=>{e.v(t=>Promise.all(["static/chunks/a61b3327814dbfb5.js"].map(t=>e.l(t))).then(()=>t(62019)))},330602,e=>{e.v(t=>Promise.all(["static/chunks/83fd305176cfe18f.js"].map(t=>e.l(t))).then(()=>t(763005)))},154496,e=>{e.v(t=>Promise.all(["static/chunks/e27b932a0aa32323.js"].map(t=>e.l(t))).then(()=>t(57977)))},45814,e=>{e.v(t=>Promise.all(["static/chunks/44e51831a27a79ab.js"].map(t=>e.l(t))).then(()=>t(425448)))},492756,e=>{e.v(t=>Promise.all(["static/chunks/97d212cb1a6b9949.js"].map(t=>e.l(t))).then(()=>t(545302)))},330168,e=>{e.v(t=>Promise.all(["static/chunks/0ba14d4349b45896.js","static/chunks/e27b932a0aa32323.js"].map(t=>e.l(t))).then(()=>t(918245)))},330687,e=>{e.v(e=>Promise.resolve().then(()=>e(660522)))}]);