(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,631422,e=>{"use strict";var t=e.i(585890),a=e.i(145963),r=e.i(614522),s=e.i(707935),n=e.i(608199),i=e.i(39978),o=e.i(668113),l=e.i(885697),c=e.i(751371),d=e.i(585341),u=e.i(619578);e.s(["getDateRangeFromFilter",0,e=>{let m=new Date,p=(0,t.startOfDay)(m);switch(e){case"today":return{from:p,to:(0,a.endOfDay)(m)};case"yesterday":let h=(0,c.subDays)(p,1);return{from:h,to:(0,a.endOfDay)(h)};case"this-week":return{from:(0,r.startOfWeek)(m),to:(0,s.endOfWeek)(m)};case"last-week":let f=(0,r.startOfWeek)((0,d.subWeeks)(m,1));return{from:f,to:(0,s.endOfWeek)(f)};case"this-month":return{from:(0,n.startOfMonth)(m),to:(0,i.endOfMonth)(m)};case"last-month":let g=(0,n.startOfMonth)((0,u.subMonths)(m,1));return{from:g,to:(0,i.endOfMonth)(g)};case"this-year":return{from:(0,o.startOfYear)(m),to:(0,l.endOfYear)(m)};default:return{from:new Date(2e3,0,1),to:(0,a.endOfDay)(m)}}},"isDateInRange",0,(e,t,a)=>!t&&!a||(t?a?e>=t&&e<=a:e>=t:e<=a)])},691162,e=>{"use strict";let t;var a=e.i(271645),r=e.i(30030),s=e.i(820783),n=e.i(326999),i=e.i(981140),o=e.i(843476),l=Symbol("radix.slottable"),c="AlertDialog",[d,u]=(0,r.createContextScope)(c,[n.createDialogScope]),m=(0,n.createDialogScope)(),p=e=>{let{__scopeAlertDialog:t,...a}=e,r=m(t);return(0,o.jsx)(n.Root,{...r,...a,modal:!0})};p.displayName=c;var h=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,o.jsx)(n.Trigger,{...s,...r,ref:t})});h.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:t,...a}=e,r=m(t);return(0,o.jsx)(n.Portal,{...r,...a})};f.displayName="AlertDialogPortal";var g=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,o.jsx)(n.Overlay,{...s,...r,ref:t})});g.displayName="AlertDialogOverlay";var y="AlertDialogContent",[x,b]=d(y),v=((t=({children:e})=>(0,o.jsx)(o.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=l,t),w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:l,...c}=e,d=m(r),u=a.useRef(null),p=(0,s.useComposedRefs)(t,u),h=a.useRef(null);return(0,o.jsx)(n.WarningProvider,{contentName:y,titleName:N,docsSlug:"alert-dialog",children:(0,o.jsx)(x,{scope:r,cancelRef:h,children:(0,o.jsxs)(n.Content,{role:"alertdialog",...d,...c,ref:p,onOpenAutoFocus:(0,i.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(v,{children:l}),(0,o.jsx)(P,{contentRef:u})]})})})});w.displayName=y;var N="AlertDialogTitle",j=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,o.jsx)(n.Title,{...s,...r,ref:t})});j.displayName=N;var S="AlertDialogDescription",D=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,o.jsx)(n.Description,{...s,...r,ref:t})});D.displayName=S;var C=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,o.jsx)(n.Close,{...s,...r,ref:t})});C.displayName="AlertDialogAction";var T="AlertDialogCancel",A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,{cancelRef:i}=b(T,a),l=m(a),c=(0,s.useComposedRefs)(t,i);return(0,o.jsx)(n.Close,{...l,...r,ref:c})});A.displayName=T;var P=({contentRef:e})=>{let t=`\`${y}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${y}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${y}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};e.s(["Action",()=>C,"AlertDialog",()=>p,"AlertDialogAction",()=>C,"AlertDialogCancel",()=>A,"AlertDialogContent",()=>w,"AlertDialogDescription",()=>D,"AlertDialogOverlay",()=>g,"AlertDialogPortal",()=>f,"AlertDialogTitle",()=>j,"AlertDialogTrigger",()=>h,"Cancel",()=>A,"Content",()=>w,"Description",()=>D,"Overlay",()=>g,"Portal",()=>f,"Root",()=>p,"Title",()=>j,"Trigger",()=>h,"createAlertDialogScope",()=>u],691162)},868499,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(691162),s=e.i(975157),n=e.i(519455);let i=r.Root,o=r.Trigger,l=r.Portal,c=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.Overlay,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:n}));c.displayName=r.Overlay.displayName;let d=a.forwardRef(({className:e,...a},n)=>(0,t.jsxs)(l,{children:[(0,t.jsx)(c,{}),(0,t.jsx)(r.Content,{ref:n,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));d.displayName=r.Content.displayName;let u=({className:e,...a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});u.displayName="AlertDialogHeader";let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});m.displayName="AlertDialogFooter";let p=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.Title,{ref:n,className:(0,s.cn)("text-lg font-semibold",e),...a}));p.displayName=r.Title.displayName;let h=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.Description,{ref:n,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));h.displayName=r.Description.displayName;let f=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Action,{ref:i,className:(0,s.cn)((0,n.buttonVariants)(),e),...a}));f.displayName=r.Action.displayName;let g=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Cancel,{ref:i,className:(0,s.cn)((0,n.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));g.displayName=r.Cancel.displayName,e.s(["AlertDialog",()=>i,"AlertDialogAction",()=>f,"AlertDialogCancel",()=>g,"AlertDialogContent",()=>d,"AlertDialogDescription",()=>h,"AlertDialogFooter",()=>m,"AlertDialogHeader",()=>u,"AlertDialogTitle",()=>p,"AlertDialogTrigger",()=>o])},885697,585341,e=>{"use strict";var t=e.i(281092);function a(e,a){let r=(0,t.toDate)(e,a?.in),s=r.getFullYear();return r.setFullYear(s+1,0,0),r.setHours(23,59,59,999),r}e.s(["endOfYear",()=>a],885697);var r=e.i(433331);function s(e,t,a){return(0,r.addWeeks)(e,-t,a)}e.s(["subWeeks",()=>s],585341)},842727,e=>{"use strict";var t=e.i(271645),a=e.i(981140),r=e.i(75830),s=e.i(820783),n=e.i(30030),i=e.i(610772),o=e.i(248425),l=e.i(30207),c=e.i(369340),d=e.i(586318),u=e.i(843476),m="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[f,g,y]=(0,r.createCollection)(h),[x,b]=(0,n.createContextScope)(h,[y]),[v,w]=x(h),N=t.forwardRef((e,t)=>(0,u.jsx)(f.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(f.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(j,{...e,ref:t})})}));N.displayName=h;var j=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:n,orientation:i,loop:f=!1,dir:y,currentTabStopId:x,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:w,onEntryFocus:N,preventScrollOnEntryFocus:j=!1,...S}=e,D=t.useRef(null),C=(0,s.useComposedRefs)(r,D),A=(0,d.useDirection)(y),[P,F]=(0,c.useControllableState)({prop:x,defaultProp:b??null,onChange:w,caller:h}),[M,k]=t.useState(!1),R=(0,l.useCallbackRef)(N),$=g(n),E=t.useRef(!1),[W,I]=t.useState(0);return t.useEffect(()=>{let e=D.current;if(e)return e.addEventListener(m,R),()=>e.removeEventListener(m,R)},[R]),(0,u.jsx)(v,{scope:n,orientation:i,dir:A,loop:f,currentTabStopId:P,onItemFocus:t.useCallback(e=>F(e),[F]),onItemShiftTab:t.useCallback(()=>k(!0),[]),onFocusableItemAdd:t.useCallback(()=>I(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>I(e=>e-1),[]),children:(0,u.jsx)(o.Primitive.div,{tabIndex:M||0===W?-1:0,"data-orientation":i,...S,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,()=>{E.current=!0}),onFocus:(0,a.composeEventHandlers)(e.onFocus,e=>{let t=!E.current;if(e.target===e.currentTarget&&t&&!M){let t=new CustomEvent(m,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=$().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===P),...e].filter(Boolean).map(e=>e.ref.current),j)}}E.current=!1}),onBlur:(0,a.composeEventHandlers)(e.onBlur,()=>k(!1))})})}),S="RovingFocusGroupItem",D=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,focusable:n=!0,active:l=!1,tabStopId:c,children:d,...m}=e,p=(0,i.useId)(),h=c||p,y=w(S,s),x=y.currentTabStopId===h,b=g(s),{onFocusableItemAdd:v,onFocusableItemRemove:N,currentTabStopId:j}=y;return t.useEffect(()=>{if(n)return v(),()=>N()},[n,v,N]),(0,u.jsx)(f.ItemSlot,{scope:s,id:h,focusable:n,active:l,children:(0,u.jsx)(o.Primitive.span,{tabIndex:x?0:-1,"data-orientation":y.orientation,...m,ref:r,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{n?y.onItemFocus(h):e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>y.onItemFocus(h)),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void y.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,a){var r;let s=(r=e.key,"rtl"!==a?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return C[s]}(e,y.orientation,y.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var a,r;"prev"===t&&s.reverse();let n=s.indexOf(e.currentTarget);s=y.loop?(a=s,r=n+1,a.map((e,t)=>a[(r+t)%a.length])):s.slice(n+1)}setTimeout(()=>T(s))}}),children:"function"==typeof d?d({isCurrentTabStop:x,hasTabStop:null!=j}):d})})});D.displayName=S;var C={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let a=document.activeElement;for(let r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}e.s(["Item",()=>D,"Root",()=>N,"createRovingFocusGroupScope",()=>b])},926209,e=>{"use strict";var t=e.i(271645),a=e.i(981140),r=e.i(30030),s=e.i(842727),n=e.i(296626),i=e.i(248425),o=e.i(586318),l=e.i(369340),c=e.i(610772),d=e.i(843476),u="Tabs",[m,p]=(0,r.createContextScope)(u,[s.createRovingFocusGroupScope]),h=(0,s.createRovingFocusGroupScope)(),[f,g]=m(u),y=t.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,onValueChange:s,defaultValue:n,orientation:m="horizontal",dir:p,activationMode:h="automatic",...g}=e,y=(0,o.useDirection)(p),[x,b]=(0,l.useControllableState)({prop:r,onChange:s,defaultProp:n??"",caller:u});return(0,d.jsx)(f,{scope:a,baseId:(0,c.useId)(),value:x,onValueChange:b,orientation:m,dir:y,activationMode:h,children:(0,d.jsx)(i.Primitive.div,{dir:y,"data-orientation":m,...g,ref:t})})});y.displayName=u;var x="TabsList",b=t.forwardRef((e,t)=>{let{__scopeTabs:a,loop:r=!0,...n}=e,o=g(x,a),l=h(a);return(0,d.jsx)(s.Root,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:r,children:(0,d.jsx)(i.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});b.displayName=x;var v="TabsTrigger",w=t.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...l}=e,c=g(v,r),u=h(r),m=S(c.baseId,n),p=D(c.baseId,n),f=n===c.value;return(0,d.jsx)(s.Item,{asChild:!0,...u,focusable:!o,active:f,children:(0,d.jsx)(i.Primitive.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:m,...l,ref:t,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||o||!e||c.onValueChange(n)})})})});w.displayName=v;var N="TabsContent",j=t.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,forceMount:o,children:l,...c}=e,u=g(N,r),m=S(u.baseId,s),p=D(u.baseId,s),h=s===u.value,f=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,d.jsx)(n.Presence,{present:o||h,children:({present:t})=>(0,d.jsx)(i.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!t,id:p,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:f.current?"0s":void 0},children:t&&l})})});function S(e,t){return`${e}-trigger-${t}`}function D(e,t){return`${e}-content-${t}`}j.displayName=N,e.s(["Content",()=>j,"List",()=>b,"Root",()=>y,"Tabs",()=>y,"TabsContent",()=>j,"TabsList",()=>b,"TabsTrigger",()=>w,"Trigger",()=>w,"createTabsScope",()=>p])},677572,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(926209),s=e.i(975157);let n=r.Root,i=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.List,{ref:n,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));i.displayName=r.List.displayName;let o=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.Trigger,{ref:n,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));o.displayName=r.Trigger.displayName;let l=a.forwardRef(({className:e,...a},n)=>(0,t.jsx)(r.Content,{ref:n,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));l.displayName=r.Content.displayName,e.s(["Tabs",()=>n,"TabsContent",()=>l,"TabsList",()=>i,"TabsTrigger",()=>o])},619578,e=>{"use strict";var t=e.i(688594);function a(e,a,r){return(0,t.addMonths)(e,-a,r)}e.s(["subMonths",()=>a])},145963,e=>{"use strict";var t=e.i(281092);function a(e,a){let r=(0,t.toDate)(e,a?.in);return r.setHours(23,59,59,999),r}e.s(["endOfDay",()=>a])},751975,e=>{"use strict";let t=(0,e.i(475254).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],751975)},350627,e=>{"use strict";let t=(0,e.i(475254).default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["Receipt",()=>t],350627)},239616,e=>{"use strict";let t=(0,e.i(475254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],239616)},284614,e=>{"use strict";let t=(0,e.i(475254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],284614)},592930,e=>{"use strict";let t=(0,e.i(475254).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],592930)},733060,121280,11678,182223,e=>{"use strict";let t=(0,e.i(475254).default)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);e.s(["Wand2",()=>t],733060);var a=e.i(255749),r=e.i(401851);let s=async(e,t)=>{let s=new a.default,n=s.internal.pageSize.getWidth(),i=s.internal.pageSize.getHeight(),o=20,l=()=>{s.setFontSize(8),s.setFont("helvetica","normal"),s.setTextColor(150,150,150),s.text("Created By Gonza Systems",n/2,i-10,{align:"center"}),s.setTextColor(0,0,0)};try{s.setFont("helvetica","normal");let a=e=>{o+e>i-20-15&&(l(),s.addPage(),o=20)},c=(e,t,r,n,i=11)=>(s.setFontSize(i),s.splitTextToSize(e,n).forEach(e=>{a(6),s.text(e,t,o),o+=5}),o);if(t.businessLogo)try{let e=new Image;e.src=t.businessLogo,await new Promise((t,a)=>{e.onload=t,e.onerror=a,e.complete&&t(e)});let a=e.width/e.height,r=40,n=40/a;n>20&&(r=(n=20)*a),s.addImage(t.businessLogo,"JPEG",20,o,r,n)}catch(e){console.error("Error adding business logo:",e)}let d=n-20;if(s.setFontSize(16),s.setFont("helvetica","bold"),s.text(t.businessName||"Business Name",d,o+5,{align:"right"}),o+=12,s.setFontSize(10),s.setFont("helvetica","normal"),t.businessAddress){let e=s.splitTextToSize(t.businessAddress,80);e.forEach((e,t)=>{s.text(e,d,o+4*t,{align:"right"})}),o+=4*e.length-4}t.businessPhone&&(o+=4,s.text(`Phone: ${t.businessPhone}`,d,o,{align:"right"})),t.businessEmail&&(o+=4,s.text(`Email: ${t.businessEmail}`,d,o,{align:"right"})),o+=8,s.setLineWidth(.5),s.line(20,o,n-20,o),o+=15,a(15),s.setFontSize(11);let u=(0,r.format)(new Date,"MMMM d, yyyy");if(s.text(`Date: ${u}`,20,o),o+=12,a(25),s.setFont("helvetica","bold"),s.text(e.customer.fullName||"Valued Customer",20,o),o+=5,s.setFont("helvetica","normal"),e.customer.location&&(o=c(e.customer.location,20,o,n-40,11)+2),e.customer.email&&(a(8),s.text(e.customer.email,20,o),o+=5),o+=8,e.subject&&(a(15),s.setFont("helvetica","bold"),s.setFontSize(12),o=c(`Re: ${e.subject}`,20,o,n-40,12)+6),a(15),s.setFont("helvetica","normal"),s.setFontSize(11),s.text(`Dear ${e.customer.fullName||"Valued Customer"},`,20,o),o+=8,e.content){let t=e.content.split("\n\n").filter(e=>""!==e.trim());t.forEach((e,r)=>{let s=Math.ceil(e.length/80);a(5*s+10),o=c(e.trim(),20,o,n-40,11),r<t.length-1&&(o+=6)}),o+=10}if(a(60),s.text("Yours faithfully,",20,o),o+=20,t.signature)try{let e=new Image;e.src=t.signature,await new Promise((t,a)=>{e.onload=t,e.onerror=a,e.complete&&t(e)});let a=e.width/e.height,r=50,n=50/a;n>25&&(r=(n=25)*a),s.addImage(t.signature,"JPEG",20,o,r,n),o+=n+5}catch(e){console.error("Error adding signature:",e),o+=15}else o+=15;s.setFont("helvetica","bold"),s.setFontSize(11);let m=e.senderName||t.businessName||"Management";s.text(m,20,o),o+=5,t.businessName&&e.senderName&&(s.setFont("helvetica","normal"),s.text(t.businessName,20,o)),l();let p=e.customer.fullName?.replace(/[^a-zA-Z0-9]/g,"_")||"Customer",h=(0,r.format)(new Date,"yyyy-MM-dd"),f=`Notice_${p}_${h}.pdf`;s.save(f)}catch(e){throw console.error("Error generating notice PDF:",e),Error("Failed to generate notice PDF. Please try again.")}};e.s(["generateNoticePDF",0,s],121280),e.s(["enhanceForBusiness",0,e=>{if(!e||""===e.trim())return e;let t=(e=>{if(!e||""===e.trim())return e;let t=e;return Object.entries({"can't":"cannot","won't":"will not","don't":"do not","didn't":"did not","haven't":"have not","hasn't":"has not","isn't":"is not","aren't":"are not","wasn't":"was not","weren't":"were not","I'm":"I am","you're":"you are","we're":"we are","they're":"they are","it's":"it is","that's":"that is","here's":"here is","there's":"there is","we've":"we have","they've":"they have","I've":"I have","you've":"you have",ok:"acceptable",okay:"acceptable",thanks:"thank you",hi:"greetings",bye:"goodbye",asap:"as soon as possible",fyi:"for your information",btw:"incidentally",etc:"and so forth",gonna:"going to",wanna:"want to",gotta:"have to",kinda:"somewhat",sorta:"somewhat",get:"receive",got:"received",give:"provide",gave:"provided",ask:"request",asked:"requested",tell:"inform",told:"informed",show:"demonstrate",showed:"demonstrated",help:"assist",helped:"assisted",fix:"resolve",fixed:"resolved",buy:"purchase",bought:"purchased",sell:"offer",sold:"provided"}).forEach(([e,a])=>{let r=RegExp(`\\b${e}\\b`,"gi");t=t.replace(r,a)}),(t=(t=t.replace(/(^|\. )([a-z])/g,(e,t,a)=>t+a.toUpperCase())).trim()).endsWith(".")||t.endsWith("!")||t.endsWith("?")||(t+="."),t})(e);return!t.toLowerCase().includes("we are")&&!t.toLowerCase().includes("we would like")&&!t.toLowerCase().includes("please")&&(t.toLowerCase().startsWith("our")||t.toLowerCase().startsWith("the"))&&(t=`We would like to inform you that ${t.charAt(0).toLowerCase()+t.slice(1)}`),(t.toLowerCase().includes("you must")||t.toLowerCase().includes("you have to"))&&(t=(t=t.replace(/you must/gi,"we kindly request that you")).replace(/you have to/gi,"we would appreciate if you could")),t}],11678);let n=[{id:"payment_reminder",name:"Payment Reminder",subject:"Payment Reminder - Account Status",content:`We hope this letter finds you well. We are writing to kindly remind you about your outstanding payment.

We appreciate your prompt attention to this matter and thank you for your continued business.`,category:"payment"},{id:"policy_update",name:"Policy Update",subject:"Important Update to Our Business Policies",content:`We are writing to inform you of important updates to our business policies that may affect your account.

These changes will take effect shortly. We appreciate your understanding and continued partnership.`,category:"policy"},{id:"thank_you",name:"Thank You Letter",subject:"Thank You for Your Business",content:`We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.

We look forward to serving you for many years to come.`,category:"gratitude"},{id:"service_announcement",name:"Service Announcement",subject:"Important Service Update",content:`We are excited to share some important updates about our services that will enhance your experience with us.

We believe these improvements will provide you with even better service and value.`,category:"announcement"},{id:"account_update",name:"Account Status Update",subject:"Account Status Update",content:`We are writing to provide you with an important update regarding your account with us.

If you have any questions or concerns, please don't hesitate to contact us.`,category:"general"},{id:"general_notice",name:"General Business Communication",subject:"Business Communication",content:`We hope this message finds you well. We wanted to reach out to you regarding an important matter.

Thank you for your attention to this matter.`,category:"general"}];e.s(["getTemplateById",0,e=>n.find(t=>t.id===e),"noticeTemplates",0,n],182223)},798532,e=>{"use strict";var t=e.i(204205);let a=e=>{let t=e.replace(/[^\d+]/g,"");return t.startsWith("+"),t};e.s(["canSendSMS",0,e=>!!(e.phoneNumber&&e.phoneNumber.trim()),"formatMessageForSMS",0,(e,t)=>{let a=e.replace(/[\u00A0\u1680\u180e\u2000-\u2009\u200a\u200b\u202f\u205f\u3000]/g," ").replace(/\n\s*\n/g,"\n\n").replace(/^\s+|\s+$/g,"").substring(0,800);return t&&(a+=`

- ${t}`),a},"getBirthdayMessage",0,e=>`ðŸŽ‰ Happy Birthday ${e}! ðŸŽ‰

Wishing you a day filled with joy, love, and great memories. Thank you for being a valued part of our family. We're grateful for your support and wish you nothing but happiness in the year ahead!

May this new year of your life bring you wonderful opportunities and amazing experiences.`,"getThankYouMessage",0,(e,t)=>{let a=e.items.reduce((e,t)=>{let a=t.price*t.quantity,r="amount"===t.discountType?t.discountAmount||0:a*(t.discountPercentage||0)/100;return e+(a-r)},0),r=a*((e.taxRate||0)/100),s=e.items.map(e=>`â€¢ ${e.description} (Qty: ${e.quantity})`).join("\n");return`Dear ${e.customerName},

We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.

Receipt Number: ${e.receiptNumber}

Items Purchased:
${s}

Total Amount: ${t.currency} ${(a+r).toLocaleString()}

In case of any inquiries please call ${t.businessPhone&&"(123) 456-7890"!==t.businessPhone?t.businessPhone:"our office"}.

We appreciate your business and look forward to serving you again.

Yours faithfully,
${t.businessName||"Management"}`},"getWeMissYouMessage",0,e=>`Dear ${e},

We Miss You!

It's been a while since we last heard from you, and we just wanted to reach out. We truly value you as a customer and would love to see you again.

If there's anything we can do to assist you or if you need any help, we're always here for you!

We hope to serve you again soon.

Yours faithfully,`,"openSMSApp",0,e=>{let r,{phoneNumber:s,message:n}=e,i=a(s),o=encodeURIComponent(n);r=(0,t.isIOS)()?`sms:${i}&body=${o}`:`sms:${i}?body=${o}`;try{window.open(r,"_self")}catch(e){console.error("Failed to open SMS app:",e),navigator.clipboard?.writeText(n).then(()=>{alert("SMS app not available. Message copied to clipboard.")}).catch(()=>{alert("SMS app not available and clipboard access denied.")})}},"openWhatsApp",0,e=>{let{phoneNumber:t,message:r}=e,s=a(t),n=encodeURIComponent(r),i=`https://wa.me/${s}?text=${n}`;try{window.open(i,"_blank")}catch(e){console.error("Failed to open WhatsApp:",e),navigator.clipboard?.writeText(r).then(()=>{alert("WhatsApp not available. Message copied to clipboard.")}).catch(()=>{alert("WhatsApp not available and clipboard access denied.")})}}])},697068,775903,938229,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(776639),s=e.i(519455),n=e.i(624687),i=e.i(793479),o=e.i(110204),l=e.i(515288),c=e.i(178583),d=e.i(733060),u=e.i(440160),m=e.i(63209),p=e.i(686311),h=e.i(160615),f=e.i(908406),g=e.i(121280),y=e.i(11678),x=e.i(182223),b=e.i(798532),v=e.i(414877);let w=(0,e.i(475254).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var N=e.i(967489),j=e.i(487486);let S=({selectedTemplate:e,onTemplateChange:a,onTemplateSelect:r})=>{let s=Array.isArray(x.noticeTemplates)?x.noticeTemplates:[];return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Choose a Template (Optional)"}),(0,t.jsxs)(N.Select,{value:e,onValueChange:e=>{if(a(e),"none"===e)return;let t=x.noticeTemplates.find(t=>t.id===e);t&&r(t)},children:[(0,t.jsx)(N.SelectTrigger,{className:"w-full",children:(0,t.jsx)(N.SelectValue,{placeholder:"Select a notice template or start from scratch"})}),(0,t.jsxs)(N.SelectContent,{className:"max-h-80",children:[(0,t.jsx)(N.SelectItem,{value:"none",children:"Start from scratch"}),s.length>0&&s.map(e=>{var a;let r;return(0,t.jsx)(N.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsx)(j.Badge,{variant:"outline",className:`ml-2 text-xs ${(a=e.category,(r={payment:"bg-red-50 text-red-700 border-red-200",policy:"bg-blue-50 text-blue-700 border-blue-200",general:"bg-gray-50 text-gray-700 border-gray-200",announcement:"bg-green-50 text-green-700 border-green-200",gratitude:"bg-purple-50 text-purple-700 border-purple-200"})[a]||r.general)}`,children:e.category})]})},e.id)})]})]}),e&&"none"!==e&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Template selected:"})," ",s.find(t=>t.id===e)?.name]}),(0,t.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"The template content has been added to your message. You can edit it as needed."})]})]})};e.s(["default",0,({customer:e,open:N,onClose:j,defaultTemplate:D,sale:C})=>{let[T,A]=(0,a.useState)("none"),[P,F]=(0,a.useState)(""),[M,k]=(0,a.useState)(""),[R,$]=(0,a.useState)(""),[E,W]=(0,a.useState)(!1),[I,L]=(0,a.useState)(!1),{settings:O}=(0,h.useBusinessSettings)(),{toast:z}=(0,f.useToast)(),B=(0,v.useIsMobile)();(0,a.useEffect)(()=>{if(N&&D){let e=(0,x.getTemplateById)(D);if(e)if(A(D),F(e.subject),"thank_you"===D&&C){let t=C.items.reduce((e,t)=>{let a=t.price*t.quantity,r="amount"===t.discountType?t.discountAmount||0:a*(t.discountPercentage||0)/100;return e+(a-r)},0),a=t*((C.taxRate||0)/100),r=C.items.map(e=>`â€¢ ${e.description} (Qty: ${e.quantity})`).join("\n");k(`${e.content}

Receipt Number: ${C.receiptNumber}

Items Purchased:
${r}

Total Amount: ${O.currency} ${(t+a).toFixed(2)}

In case of any inquiries please call ${O.businessPhone&&"(123) 456-7890"!==O.businessPhone?O.businessPhone:"our office"}.

We appreciate your business and look forward to serving you again.`)}else k(e.content)}},[N,D,C,O.currency,O.businessPhone]);let Y=async()=>{if(!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M)return void z({title:"Message required",description:"Please enter a message before generating the notice.",variant:"destructive"});W(!0);try{await (0,g.generateNoticePDF)({customer:e,subject:P||"Business Notice",content:M,senderName:R||void 0},O),z({title:"Notice generated successfully!",description:"Your professional business notice has been downloaded as a PDF."}),k(""),F(""),A("none"),$(""),j()}catch(e){console.error("Error generating notice:",e),z({title:"Generation failed",description:"Failed to generate the notice. Please try again.",variant:"destructive"})}finally{W(!1)}},H=()=>{k(""),F(""),A("none"),$(""),L(!1),j()},q=B&&(0,b.canSendSMS)(e);return(0,t.jsx)(r.Dialog,{open:N,onOpenChange:H,children:(0,t.jsxs)(r.DialogContent,{className:"w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsxs)(r.DialogTitle,{className:"flex items-center gap-2 text-base sm:text-lg",children:[(0,t.jsx)(c.FileText,{className:"h-5 w-5"}),"Send Notice to ",e.fullName]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-3",children:"Compose Your Notice"}),(0,t.jsx)(S,{selectedTemplate:T,onTemplateChange:A,onTemplateSelect:e=>{F(e.subject),k(e.content)}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"subject",className:"text-sm",children:"Subject Line"}),(0,t.jsx)(i.Input,{id:"subject",value:P,onChange:e=>F(e.target.value),placeholder:"Enter the subject of your notice",className:"text-sm h-9"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(o.Label,{htmlFor:"message",className:"text-sm",children:"Your Message"}),(0,t.jsxs)(s.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M)return void z({title:"No message to enhance",description:"Please enter your message first.",variant:"destructive"});try{let e=(0,y.enhanceForBusiness)(M);k(e),z({title:"Message enhanced!",description:"Your message has been made more formal and professional."})}catch(e){console.error("Error enhancing message:",e),z({title:"Enhancement failed",description:"Could not enhance the message. Please try again.",variant:"destructive"})}},className:"text-[10px] h-7 px-2",disabled:!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M,children:[(0,t.jsx)(d.Wand2,{className:"h-3 w-3 mr-1"}),"Make Formal"]})]}),(0,t.jsx)(n.Textarea,{id:"message",value:M,onChange:e=>k(e.target.value),placeholder:"What do you want to inform the customer about?",rows:B?6:8,className:"resize-none text-sm"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"none"!==T?"Template content loaded. Edit as needed.":"Write in your own words - we'll format it professionally."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"sender",className:"text-sm",children:"Sender Name (Optional)"}),(0,t.jsx)(i.Input,{id:"sender",value:R,onChange:e=>$(e.target.value),placeholder:"Your name (defaults to business name)",className:"text-sm h-9"})]}),(!O.businessLogo||!O.signature)&&(0,t.jsx)(l.Card,{className:"border-amber-200 bg-amber-50",children:(0,t.jsx)(l.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-[11px] sm:text-xs",children:[(0,t.jsx)("p",{className:"text-amber-800 font-medium",children:"Enhance your notices"}),(0,t.jsxs)("p",{className:"text-amber-700",children:[!O.businessLogo&&"Add logo ",!O.businessLogo&&!O.signature&&"and ",!O.signature&&"upload signature ","in settings for better notices."]})]})]})})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:"Preview"}),(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>L(!I),className:"h-8 text-xs",children:[I?"Hide":"Show"," Preview"]})]}),I&&(0,t.jsx)(l.Card,{className:"border-gray-200 shadow-sm",children:(0,t.jsx)(l.CardContent,{className:"p-4 overflow-x-hidden",children:(0,t.jsxs)("div",{className:"space-y-3 text-[11px] sm:text-sm",children:[(0,t.jsxs)("div",{className:"border-b pb-2",children:[(0,t.jsx)("div",{className:"font-bold text-sm sm:text-base",children:O.businessName||"Your Business"}),(0,t.jsxs)("div",{className:"text-gray-600 space-y-0.5",children:[O.businessAddress&&(0,t.jsx)("div",{className:"truncate",children:O.businessAddress}),O.businessPhone&&(0,t.jsxs)("div",{children:["Phone: ",O.businessPhone]}),O.businessEmail&&(0,t.jsxs)("div",{className:"truncate",children:["Email: ",O.businessEmail]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:["Date: ",new Date().toLocaleDateString()]}),(0,t.jsx)("div",{className:"font-medium truncate",children:e.fullName})]}),P&&(0,t.jsx)("div",{className:"bg-gray-50 p-2 rounded",children:(0,t.jsxs)("strong",{children:["Re: ",P]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"italic",children:["Dear ",e.fullName,","]}),(0,t.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed text-gray-800",children:M||"Your message will appear here..."}),(0,t.jsx)("div",{children:"Yours faithfully,"}),(0,t.jsx)("div",{className:"mt-4 font-bold",children:R||O.businessName||"Management"})]})]})})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t mt-2",children:[(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,t.jsx)(s.Button,{variant:"outline",onClick:H,className:"flex-1 sm:flex-none h-10 text-sm",children:"Cancel"}),(0,b.canSendSMS)(e)&&(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>{(0,b.openWhatsApp)({phoneNumber:e.phoneNumber,message:`${P?P+"\n\n":""}Dear ${e.fullName},

${M}

Yours faithfully,
${R||O.businessName||"Management"}`}),z({title:"WhatsApp opened",description:"Your message has been prepared in WhatsApp."})},disabled:!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M,className:"flex-1 sm:flex-none gap-2 text-green-600 hover:text-green-700 hover:bg-green-50 h-10 text-sm",children:[(0,t.jsx)(w,{className:"h-4 w-4"}),"WhatsApp"]})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[q&&(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>{if(!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M)return void z({title:"Message required",description:"Please enter a message before sending SMS.",variant:"destructive"});if(!(0,b.canSendSMS)(e))return void z({title:"Phone number required",description:"Customer phone number is not available.",variant:"destructive"});try{let t=`${P?P+"\n\n":""}Dear ${e.fullName},

${M}

Yours faithfully,
${R||O.businessName||"Management"}`,a=(0,b.formatMessageForSMS)(t,O.businessName);(0,b.openSMSApp)({phoneNumber:e.phoneNumber,message:a}),z({title:"SMS app opened",description:"Your message has been prepared in the SMS app."})}catch(e){console.error("Error sending SMS:",e),z({title:"SMS failed",description:"Failed to open SMS app. Please try again.",variant:"destructive"})}},disabled:!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M,className:"flex-1 sm:flex-none gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-10 text-sm",children:[(0,t.jsx)(p.MessageSquare,{className:"h-4 w-4"}),"SMS"]}),(0,t.jsxs)(s.Button,{onClick:Y,disabled:!M.trim()||"Write your message here..."===M||"Write your specific message here..."===M||E,className:"flex-1 sm:flex-none gap-2 h-10 text-sm",children:[(0,t.jsx)(u.Download,{className:"h-4 w-4"}),E?"PDF...":"PDF"]})]})]})]})})}],697068);var D=e.i(561993),C=e.i(303281),T=e.i(662031),A=e.i(37727),P=e.i(531278),F=e.i(255749),M=e.i(945700),k=e.i(401851),R=e.i(975157);let $=async(e,t,a,r,s,n="save")=>{try{let i=new F.default,o=i.internal.pageSize.width,l=i.internal.pageSize.height;i.setFontSize(20),i.setFont("helvetica","bold"),i.text("PAYMENT REMINDER NOTICE",o/2,30,{align:"center"}),i.setFontSize(12),i.setFont("helvetica","normal");let c=50;i.text(r.businessName,20,c),c+=6,i.text(r.businessAddress,20,c),c+=6,i.text(`Phone: ${r.businessPhone}`,20,c),c+=6,i.text(`Email: ${r.businessEmail}`,20,c),c+=15,i.text(`Date: ${(0,k.format)(new Date,"MMMM d, yyyy")}`,o-20-60,50,{align:"left"}),i.setFont("helvetica","bold"),i.text("TO:",20,c),c+=8,i.setFont("helvetica","normal"),i.text(e.fullName,20,c),c+=6,e.phoneNumber&&(i.text(`Phone: ${e.phoneNumber}`,20,c),c+=6),e.email&&(i.text(`Email: ${e.email}`,20,c),c+=6),e.location&&(i.text(`Address: ${e.location}`,20,c),c+=6),c+=15,i.setFont("helvetica","normal"),i.text(`Dear ${e.fullName},`,20,c),c+=8;let d=i.splitTextToSize(s||"Our records show that you have pending payments for the following items purchased on credit. We kindly request you to complete payment at your earliest convenience.\n\nPlease reach out to us if you need any assistance or clarification.",o-40);i.text(d,20,c),c+=6*d.length+10;let u=t.flatMap(e=>{let t=e.items.reduce((e,t)=>e+t.price*t.quantity,0),a=t*((e.taxRate||0)/100),s=t+a;return e.items.map(t=>[e.receiptNumber,t.description,t.quantity.toString(),`${r.currency} ${(0,R.formatNumber)(t.price)}`,`${r.currency} ${(0,R.formatNumber)(t.price*t.quantity)}`,(0,k.format)(e.date,"MMM d, yyyy"),`${r.currency} ${(0,R.formatNumber)(s)}`])});u.push(["","","","","TOTAL OUTSTANDING:",`${r.currency} ${(0,R.formatNumber)(a)}`,""]),(0,M.default)(i,{startY:c,head:[["Invoice #","Product Name","Qty","Price","Total","Sale Date","Sale Total"]],body:u,theme:"grid",headStyles:{fillColor:[255,145,77],textColor:255,fontStyle:"bold"},bodyStyles:{fontSize:10},didParseCell:function(e){e.row.index===u.length-1&&(e.cell.styles.fillColor=[255,200,150],e.cell.styles.fontStyle="bold")},margin:{left:20,right:20}});let m=i.lastAutoTable.finalY+20;i.setFont("helvetica","bold"),i.text("Thank you for your continued support.",20,m),i.setFont("helvetica","normal"),i.setFontSize(10),i.text(`${r.businessName} - Payment Reminder`,20,m+15),i.setFontSize(8),i.setFont("helvetica","normal"),i.setTextColor(150,150,150),i.text("Created By Gonza Systems",o/2,l-10,{align:"center"}),i.setTextColor(0,0,0);let p=`Payment_Reminder_${e.fullName.replace(/\s+/g,"_")}_${(0,k.format)(new Date,"yyyy-MM-dd")}.pdf`;if("blob"===n)return i.output("blob");if("dataurl"===n)return i.output("datauristring");i.save(p)}catch(e){throw console.error("Error generating payment reminder PDF:",e),Error("Failed to generate payment reminder PDF")}};e.s(["generatePaymentReminderPDF",0,$],775903),e.s(["default",0,({isOpen:e,onOpenChange:n,sale:i,customer:o,unpaidSales:l})=>{let c=(0,v.useIsMobile)(),{settings:d,isLoading:m}=(0,h.useBusinessSettings)(),{toast:p}=(0,f.useToast)(),[g,y]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),j=o||(i?{id:"placeholder",fullName:i.customerName,phoneNumber:i.customerContact,email:null,location:i.customerAddress,createdAt:new Date,updatedAt:new Date,loyaltyPoints:0,totalSpent:0,lastVisit:null,categoryId:null,birthday:null,socialMedia:null,gender:null,tags:null,notes:null}:null),S=l||(i?[i]:[]),F=S.reduce((e,t)=>{let a=t.items.reduce((e,t)=>e+t.price*t.quantity,0),r=a*((t.taxRate||0)/100);return e+a+r},0);(0,a.useEffect)(()=>{e&&j&&S.length>0&&d?M():!e&&g&&(URL.revokeObjectURL(g),y(null))},[e,d]);let M=async()=>{if(j&&0!==S.length&&d){N(!0);try{let e=await $(j,S,F,d,void 0,"blob"),t=URL.createObjectURL(e);y(t),b(e)}catch(e){console.error("Error generating preview:",e),p({title:"Error",description:"Failed to generate PDF preview.",variant:"destructive"})}finally{N(!1)}}},k=async()=>{if(j&&0!==S.length&&d)try{await $(j,S,F,d,void 0,"save")}catch(e){p({title:"Error",description:"Failed to download PDF.",variant:"destructive"})}},R=()=>{if(g){let e=window.open(g);e&&e.addEventListener("load",()=>{e.print()})}},E=async()=>{let e=`Payment_Reminder_${j?.fullName.replace(/\s+/g,"_")||"Customer"}.pdf`,t=`Hello ${j?.fullName||"Customer"}, this is a payment reminder from ${d?.businessName||"our business"} regarding your outstanding balance of ${d?.currency||""} ${F.toLocaleString()}.`;if(navigator.share&&x)try{let a=new File([x],e,{type:"application/pdf"});if(navigator.canShare&&navigator.canShare({files:[a]}))return void await navigator.share({files:[a],title:"Payment Reminder",text:t});await navigator.share({title:"Payment Reminder",text:t})}catch(e){"AbortError"!==e.name&&console.error("Error sharing:",e)}else if(navigator.share)try{await navigator.share({title:"Payment Reminder",text:t})}catch(e){"AbortError"!==e.name&&console.error("Error sharing:",e)}else try{await navigator.clipboard.writeText(t),p({title:"Copied to clipboard",description:"Payment reminder summary copied to clipboard."})}catch(e){p({title:"Share failed",description:"Could not share or copy the message.",variant:"destructive"})}},W=()=>(0,t.jsxs)("div",{className:"flex flex-col h-full space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center py-2 order-first",children:[(0,t.jsxs)(s.Button,{variant:"outline",onClick:E,className:"flex-1 min-w-[120px] bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",children:[(0,t.jsx)(T.Share2,{className:"h-4 w-4 mr-2 text-blue-600"}),"Share"]}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:R,className:"flex-1 min-w-[120px]",disabled:!g,children:[(0,t.jsx)(C.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,t.jsxs)(s.Button,{onClick:k,className:"flex-1 min-w-[120px] bg-orange-500 hover:bg-orange-600",children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]}),(0,t.jsx)("div",{className:"flex-1 bg-gray-100 rounded-lg overflow-hidden min-h-[600px] relative",children:w?(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-4 bg-white/50 backdrop-blur-sm",children:[(0,t.jsx)(P.Loader2,{className:"h-8 w-8 animate-spin text-orange-500"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Generating preview..."})]}):g?(0,t.jsx)("iframe",{src:g,className:"w-full h-full min-h-[600px] border-none",title:"Payment Reminder Preview"}):(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Preview not available."})})})]});return c?(0,t.jsx)(D.Drawer,{open:e,onOpenChange:n,children:(0,t.jsxs)(D.DrawerContent,{className:"max-h-[95vh]",children:[(0,t.jsx)(D.DrawerHeader,{className:"border-b pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(D.DrawerTitle,{children:"Payment Reminder Preview"}),(0,t.jsx)(D.DrawerClose,{asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(A.X,{className:"h-4 w-4"})})})]})}),(0,t.jsx)("div",{className:"px-4 py-4 overflow-y-auto",children:(0,t.jsx)(W,{})}),(0,t.jsx)(D.DrawerFooter,{className:"pt-2 border-t",children:(0,t.jsx)(s.Button,{variant:"outline",onClick:()=>n(!1),children:"Close"})})]})}):(0,t.jsx)(r.Dialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col p-0 overflow-hidden",children:[(0,t.jsx)(r.DialogHeader,{className:"px-6 py-4 border-b",children:(0,t.jsx)(r.DialogTitle,{children:"Payment Reminder Preview"})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50",children:(0,t.jsx)(W,{})})]})})}],938229)}]);