(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,386408,e=>{"use strict";let t=(0,e.i(369547).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],386408)},450095,e=>{"use strict";let t=(0,e.i(369547).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],450095)},398957,e=>{"use strict";let t=(0,e.i(369547).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],398957)},229767,e=>{"use strict";var t=e.i(921161);e.s(["CalendarIcon",()=>t.default])},726302,e=>{"use strict";var t=e.i(191788),r=e.i(150064),a=e.i(46108),s=e.i(824216),n=e.i(893930),i=e.i(285700),c=e.i(96539);e.s(["useCashAccounts",0,()=>{let[e,l]=(0,t.useState)([]),{toast:o}=(0,r.useToast)(),{currentBusiness:d}=(0,a.useBusiness)(),{user:u}=(0,s.useAuth)(),f=(0,i.useQueryClient)(),h=(0,t.useCallback)(async()=>{if(!d?.id)return[];try{let e=await (0,c.getCashAccountsAction)(d.id);if(!e.success||!e.data)throw Error(e.error||"Failed to fetch accounts");return e.data.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}catch(e){return console.error("Error loading cash accounts:",e),o({title:"Error",description:"Failed to load cash accounts",variant:"destructive"}),[]}},[d?.id,o]),m=["cash_accounts",d?.id],{data:p,isLoading:x}=(0,n.useQuery)({queryKey:m,queryFn:h,enabled:!!d?.id,staleTime:3e4});(0,t.useEffect)(()=>{p&&l(p)},[p]);let y=x&&!p,j=(0,t.useCallback)(()=>{f.invalidateQueries({queryKey:m})},[f,m]),g=(0,t.useCallback)(async e=>{if(!d?.id||!u?.id)return null;try{let t=await (0,c.createCashAccountAction)({...e,userId:u.id,locationId:d.id});if(!t.success||!t.data)throw Error(t.error);return f.invalidateQueries({queryKey:m}),o({title:"Success",description:"Cash account created successfully"}),t.data}catch(e){return console.error("Error creating cash account:",e),o({title:"Error",description:"Failed to create cash account",variant:"destructive"}),null}},[d?.id,u?.id,f,m,o]),v=async(e,t)=>{if(!d?.id)return!1;try{let r=await (0,c.updateCashAccountAction)(e,{...t,locationId:d.id});if(!r.success)throw Error(r.error);return f.invalidateQueries({queryKey:m}),o({title:"Success",description:"Cash account updated successfully"}),!0}catch(e){return console.error("Error updating cash account:",e),o({title:"Error",description:"Failed to update cash account",variant:"destructive"}),!1}},b=async(e,t)=>{if(!d?.id)return{success:!1,hasTransactions:!1};try{let r=await (0,c.deleteCashAccountAction)(e,d.id);return r.success&&(f.invalidateQueries({queryKey:m}),o({title:"Success",description:"Cash account deleted successfully"}),t&&t()),r}catch(e){return console.error("Error deleting cash account:",e),o({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),{success:!1,hasTransactions:!1}}},C=async(e,t=!1,r)=>{if(!d?.id)return!1;try{let a=await (0,c.deleteCashAccountWithTransactionsAction)(e,d.id,t);if(!a.success)throw Error(a.error);return f.invalidateQueries({queryKey:m}),o({title:"Success",description:t?"Account and transactions deleted":"Account deleted (records unlinked)"}),r&&r(),!0}catch(e){return console.error("Error deleting cash account:",e),o({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),!1}},w=(0,t.useCallback)(async e=>{if(!d?.id)return 0;try{let t=await (0,c.getCashAccountBalanceAction)(e,d.id);if(t.success)return t.data;return 0}catch(e){return console.error("Error getting balance:",e),0}},[d?.id]);return(0,t.useMemo)(()=>({accounts:e,isLoading:y,createAccount:g,updateAccount:v,deleteAccount:b,deleteAccountWithTransactions:C,getAccountBalance:w,loadAccounts:h,refreshAccounts:j}),[e,y,g,v,b,C,w,h,j])}])},681912,(e,t,r)=>{"use strict";var a=e.r(730943);r.createRoot=a.createRoot,r.hydrateRoot=a.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=n?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(s,i,c):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return a}});let a=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return b},MissingStaticPage:function(){return v},NormalizeError:function(){return j},PageNotFoundError:function(){return g},SP:function(){return p},ST:function(){return x},WEB_VITALS:function(){return n},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return o},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return C}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let c=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>c.test(e);function o(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=o();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="u">typeof performance,x=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class j extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class b extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function C(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return l},LayoutRouterContext:function(){return c},MissingSlotContext:function(){return d},TemplateContext:function(){return o}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(741705)._(e.r(191788)),i=n.default.createContext(null),c=n.default.createContext(null),l=n.default.createContext(null),o=n.default.createContext(null),d=n.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return s}});class a extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new a}delete(){throw new a}set(){throw new a}sort(){throw new a}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={NavigationPromisesContext:function(){return d},PathParamsContext:function(){return o},PathnameContext:function(){return l},ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},SearchParamsContext:function(){return c},createDevToolsInstrumentedPromise:function(){return u}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(191788),i=e.r(531430),c=(0,n.createContext)(null),l=(0,n.createContext)(null),o=(0,n.createContext)(null),d=(0,n.createContext)(null);function u(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={HTTPAccessErrorStatus:function(){return n},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return c},getAccessFallbackErrorTypeByStatus:function(){return d},getAccessFallbackHTTPStatus:function(){return o},isHTTPAccessFallbackError:function(){return l}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(n)),c="NEXT_HTTP_ERROR_FALLBACK";function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===c&&i.has(Number(r))}function o(e){return Number(e.digest.split(";")[1])}function d(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return s}});var a,s=((a={})[a.SeeOther=303]="SeeOther",a[a.TemporaryRedirect=307]="TemporaryRedirect",a[a.PermanentRedirect=308]="PermanentRedirect",a);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,s={REDIRECT_ERROR_CODE:function(){return c},RedirectType:function(){return l},isRedirectError:function(){return o}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=e.r(40184),c="NEXT_REDIRECT";var l=((a={}).push="push",a.replace="replace",a);function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,a]=t,s=t.slice(2,-2).join(";"),n=Number(t.at(-2));return r===c&&("replace"===a||"push"===a)&&"string"==typeof s&&!isNaN(n)&&n in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return n}});let a=e.r(991622),s=e.r(301939);function n(e){return(0,s.isRedirectError)(e)||(0,a.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},373633,e=>{"use strict";var t=e.i(191788),r=e.i(824216),a=e.i(46108),s=e.i(150064),n=e.i(256680);async function i(e){try{let t=await n.db.carriageInward.findMany({where:{branchId:e},orderBy:[{date:"desc"},{createdAt:"desc"}]});return{success:!0,data:t.map(e=>({id:e.id,userId:e.userId,locationId:e.branchId,supplierName:e.supplierName,details:e.details,amount:Number(e.amount),date:e.date.toISOString(),cashAccountId:e.cashAccountId,cashTransactionId:e.cashTransactionId,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}))}}catch(e){return{success:!1,error:e.message}}}async function c(e,t,r){try{let a=await n.db.carriageInward.create({data:{userId:e,branchId:t,supplierName:r.supplierName,details:r.details,amount:r.amount,date:r.date,cashAccountId:r.cashAccountId||null}});return{success:!0,data:a}}catch(e){return{success:!1,error:e.message}}}async function l(e,t,r){try{let a={};return void 0!==r.supplierName&&(a.supplierName=r.supplierName),void 0!==r.details&&(a.details=r.details),void 0!==r.amount&&(a.amount=r.amount),void 0!==r.date&&(a.date=r.date),await n.db.carriageInward.update({where:{id:e,branchId:t},data:a}),{success:!0}}catch(e){return{success:!1,error:e.message}}}async function o(e,t){try{return await n.db.carriageInward.delete({where:{id:e,branchId:t}}),{success:!0}}catch(e){return{success:!1,error:e.message}}}e.s(["useCarriageInwards",0,()=>{let[e,n]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),{user:f}=(0,r.useAuth)(),{currentBusiness:h}=(0,a.useBusiness)(),{toast:m}=(0,s.useToast)(),p=(0,t.useCallback)(async()=>{if(!f||!h){n([]),u(!1);return}u(!0);try{let e=await i(h.id);if(!e.success)throw Error(e.error);n((e.data||[]).map(e=>({...e,date:new Date(e.date),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})))}catch(e){console.error("Error loading carriage inwards:",e),m({title:"Error",description:"Failed to load carriage inwards records.",variant:"destructive"})}finally{u(!1)}},[f,h?.id,m]),x=async e=>{if(!f||!h)throw Error("User not authenticated or no business selected");let t=await c(f.id,h.id,e);if(!t.success)throw Error(t.error);return await p(),m({title:"Success",description:"Carriage inwards record created successfully"}),t.data},y=async(e,t)=>{if(!h)throw Error("No business selected");let r=await l(e,h.id,t);if(!r.success)throw Error(r.error);return await p(),m({title:"Success",description:"Carriage inwards record updated successfully"}),!0},j=async e=>{if(!h)throw Error("No business selected");let t=await o(e,h.id);if(!t.success)throw Error(t.error);return await p(),m({title:"Success",description:"Carriage inwards record deleted successfully"}),!0};return(0,t.useEffect)(()=>{p()},[p]),{carriageInwards:e,isLoading:d,createCarriageInward:x,updateCarriageInward:y,deleteCarriageInward:j,refreshCarriageInwards:p}}],373633)},708099,e=>{"use strict";var t=e.i(391398),r=e.i(191788),a=e.i(365713),s=e.i(939310),n=e.i(972733),i=e.i(398957),c=e.i(386408),l=e.i(824216),o=e.i(46108),d=e.i(792042),u=e.i(518466),f=e.i(426119),h=e.i(599875),m=e.i(708997),p=e.i(909289),x=e.i(450095),y=e.i(353533),j=e.i(563905),g=e.i(89635);let v=({carriageInwards:e,onEdit:r,onDelete:a,onView:n,isLoading:i})=>{let{settings:c}=(0,j.useBusinessSettings)(),{canViewCostPrice:l}=(0,g.useFinancialVisibility)(),o=c.currency||"USD",v=e.reduce((e,t)=>e+t.amount,0);return i?(0,t.jsx)(f.Card,{children:(0,t.jsx)(f.CardContent,{className:"p-6",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,t.jsx)("div",{className:"animate-pulse",children:"Loading carriage inwards records..."})})})}):0===e.length?(0,t.jsx)(f.Card,{children:(0,t.jsx)(f.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"No carriage inwards records found"}),(0,t.jsx)("p",{className:"text-sm",children:"Add your first transport cost record to get started."})]})})}):(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(f.CardTitle,{children:"Carriage Inwards Records"}),l&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),(0,t.jsx)("p",{className:"text-lg font-bold",children:(0,y.formatCashCurrency)(v,o)})]})]})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(u.Table,{children:[(0,t.jsx)(u.TableHeader,{children:(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableHead,{children:"Date"}),(0,t.jsx)(u.TableHead,{children:"Supplier Name"}),(0,t.jsx)(u.TableHead,{children:"Details"}),l&&(0,t.jsx)(u.TableHead,{className:"text-right",children:"Amount"}),(0,t.jsx)(u.TableHead,{children:"Payment"}),(0,t.jsx)(u.TableHead,{className:"text-center",children:"Actions"})]})}),(0,t.jsx)(u.TableBody,{children:e.map(e=>(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableCell,{children:(0,d.format)(e.date,"MMM dd, yyyy")}),(0,t.jsx)(u.TableCell,{className:"font-medium",children:e.supplierName}),(0,t.jsx)(u.TableCell,{children:(0,t.jsx)("div",{className:"max-w-xs truncate",title:e.details,children:e.details})}),l&&(0,t.jsx)(u.TableCell,{className:"text-right font-medium",children:(0,y.formatCashCurrency)(e.amount,o)}),(0,t.jsx)(u.TableCell,{children:e.cashAccountId?(0,t.jsx)(h.Badge,{variant:"secondary",children:"Paid"}):(0,t.jsx)(h.Badge,{variant:"outline",children:"Not Linked"})}),(0,t.jsx)(u.TableCell,{children:(0,t.jsxs)("div",{className:"flex justify-center gap-1",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>n(e),title:"View details",children:(0,t.jsx)(x.Eye,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>r(e),title:"Edit record",children:(0,t.jsx)(m.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>a(e.id),title:"Delete record",children:(0,t.jsx)(p.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},e.id))})]})})})]})};var b=e.i(45124),C=e.i(91762),w=e.i(443915),N=e.i(897837),E=e.i(348370),P=e.i(690176),T=e.i(229767),_=e.i(726302);let A=({onSubmit:e,onCancel:a,initialData:n,isEditing:i=!1})=>{let[c,l]=(0,r.useState)({supplierName:n?.supplierName||"",details:n?.details||"",amount:n?.amount||0,date:n?.date||new Date,cashAccountId:n?.cashAccountId||void 0}),[o,u]=(0,r.useState)(!1),{accounts:h}=(0,_.useCashAccounts)(),m=async t=>{if(t.preventDefault(),c.supplierName.trim()&&c.details.trim()&&!(c.amount<=0)){u(!0);try{await e(c)}finally{u(!1)}}},p=c.cashAccountId||"none";return(0,t.jsxs)(f.Card,{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsx)(f.CardHeader,{children:(0,t.jsx)(f.CardTitle,{children:i?"Edit Carriage Inwards":"Add New Carriage Inwards"})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Label,{htmlFor:"supplierName",children:"Supplier Name *"}),(0,t.jsx)(b.Input,{id:"supplierName",value:c.supplierName,onChange:e=>l({...c,supplierName:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),document.getElementById("details")?.focus())},placeholder:"Enter supplier name",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Label,{htmlFor:"details",children:"Details *"}),(0,t.jsx)(w.Textarea,{id:"details",value:c.details,onChange:e=>l({...c,details:e.target.value}),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),document.getElementById("amount")?.focus())},placeholder:"Enter transport details",rows:3,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Label,{htmlFor:"amount",children:"Amount *"}),(0,t.jsx)(b.Input,{id:"amount",type:"number",step:"0.01",min:"0",value:c.amount,onChange:e=>l({...c,amount:parseFloat(e.target.value)||0}),onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=document.querySelector('[role="combobox"]');t&&t.focus()}},placeholder:"0.00",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Label,{children:"Date *"}),(0,t.jsxs)(E.Popover,{children:[(0,t.jsx)(E.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"outline",className:(0,y.cn)("w-full justify-start text-left font-normal",!c.date&&"text-muted-foreground"),onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=document.querySelector('button[role="combobox"]:last-of-type');t&&t.focus()}},children:[(0,t.jsx)(T.CalendarIcon,{className:"mr-2 h-4 w-4"}),c.date?(0,d.format)(c.date,"PPP"):(0,t.jsx)("span",{children:"Pick a date"})]})}),(0,t.jsx)(E.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(N.Calendar,{mode:"single",selected:c.date,onSelect:e=>e&&l({...c,date:e}),disabled:e=>e>new Date,initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Label,{htmlFor:"cashAccount",children:"Cash Account (Optional)"}),(0,t.jsxs)(P.Select,{value:p,onValueChange:e=>{l({...c,cashAccountId:"none"===e?void 0:e}),setTimeout(()=>{let e=document.querySelector('button[type="submit"]');e?.focus()},100)},children:[(0,t.jsx)(P.SelectTrigger,{onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),setTimeout(()=>{let e=document.querySelector('button[type="submit"]');e?.focus()},100))},children:(0,t.jsx)(P.SelectValue,{placeholder:"Select a cash account"})}),(0,t.jsxs)(P.SelectContent,{children:[(0,t.jsx)(P.SelectItem,{value:"none",children:"No cash account"}),h.map(e=>(0,t.jsx)(P.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(s.Button,{type:"submit",disabled:o||!c.supplierName.trim()||!c.details.trim()||c.amount<=0,className:"flex-1",children:o?"Saving...":i?"Update":"Add"}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:a,disabled:o,className:"flex-1",children:"Cancel"})]})]})})]})};var S=e.i(373633),O=e.i(150064),R=e.i(30691),I=e.i(883721),k=e.i(638822);e.s(["default",0,()=>{let e=(0,a.useNavigate)(),{user:d}=(0,l.useAuth)(),{currentBusiness:u,isLoading:h}=(0,o.useBusiness)(),{toast:m}=(0,O.useToast)(),p=(0,R.useIsMobile)(),{settings:x}=(0,j.useBusinessSettings)(),{hasPermission:y}=(0,k.useProfiles)(),g=y("inventory","create"),b=y("inventory","edit"),C=y("inventory","delete"),{carriageInwards:w,isLoading:N,createCarriageInward:E,updateCarriageInward:P,deleteCarriageInward:T}=(0,S.useCarriageInwards)(),[_,M]=(0,r.useState)(!1),D=w.reduce((e,t)=>e+Number(t.amount),0),B=w.length,F=[...new Set(w.map(e=>e.supplierName))].length,L=w.filter(e=>{let t=new Date(e.date),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).length,H=()=>{m({title:"Data refreshed",description:"Carriage inwards data has been updated."})};return h||!u||N?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,t.jsx)(I.default,{}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading carriage inwards data..."})]}):(0,t.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[(0,t.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>e("/inventory"),className:"shrink-0 h-8 w-8",title:"Back to inventory",children:(0,t.jsx)(c.ArrowLeft,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-lg md:text-2xl lg:text-3xl font-bold text-sales-dark",children:"Carriage Inwards"}),(0,t.jsx)("p",{className:"text-xs md:text-base text-muted-foreground",children:"Track transportation and delivery costs for your inventory"})]})]}),p?(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[g&&(0,t.jsxs)(s.Button,{onClick:()=>M(!_),className:"flex-1 gap-2 h-9",variant:_?"outline":"default",children:[(0,t.jsx)(n.Plus,{size:16})," ",_?"Cancel":"Add Entry"]}),(0,t.jsx)(s.Button,{onClick:H,variant:"outline",size:"icon",disabled:N,className:"shrink-0 h-9 w-9",children:(0,t.jsx)(i.RefreshCw,{className:`h-4 w-4 ${N?"animate-spin":""}`})})]})}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{onClick:H,variant:"outline",size:"icon",disabled:N,title:"Refresh data",children:(0,t.jsx)(i.RefreshCw,{className:`h-4 w-4 ${N?"animate-spin":""}`})}),g&&(0,t.jsxs)(s.Button,{onClick:()=>M(!_),className:"gap-2",children:[(0,t.jsx)(n.Plus,{size:16})," ",_?"Cancel":"Add Entry"]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[(0,t.jsx)(f.Card,{className:"overflow-hidden",children:(0,t.jsx)(f.CardContent,{className:"p-3 md:p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Amount"}),(0,t.jsxs)("p",{className:"text-lg md:text-xl font-bold",children:[x.currency||"USD"," ",D.toFixed(2)]})]})})}),(0,t.jsx)(f.Card,{className:"overflow-hidden",children:(0,t.jsx)(f.CardContent,{className:"p-3 md:p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Entries"}),(0,t.jsx)("p",{className:"text-lg md:text-xl font-bold",children:B})]})})}),(0,t.jsx)(f.Card,{className:"overflow-hidden",children:(0,t.jsx)(f.CardContent,{className:"p-3 md:p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suppliers"}),(0,t.jsx)("p",{className:"text-lg md:text-xl font-bold",children:F})]})})}),(0,t.jsx)(f.Card,{className:"overflow-hidden",children:(0,t.jsx)(f.CardContent,{className:"p-3 md:p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This Month"}),(0,t.jsx)("p",{className:"text-lg md:text-xl font-bold",children:L})]})})})]}),_&&(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"pb-2 md:pb-6",children:(0,t.jsx)(f.CardTitle,{className:"text-sm md:text-lg",children:"Add New Carriage Entry"})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(A,{onSubmit:async e=>{try{await E(e),M(!1),m({title:"Entry created",description:"Carriage inwards entry has been successfully created."})}catch(e){m({title:"Error",description:"Failed to create carriage inwards entry.",variant:"destructive"})}},onCancel:()=>M(!1)})})]}),(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"pb-2 md:pb-6",children:(0,t.jsx)(f.CardTitle,{className:"text-sm md:text-lg",children:"Carriage Inwards Entries"})}),(0,t.jsx)(f.CardContent,{className:"p-0",children:(0,t.jsx)(v,{carriageInwards:w,isLoading:N,onEdit:b?e=>{console.log("Edit record:",e)}:void 0,onDelete:C?T:void 0,onView:e=>{console.log("View record:",e)}})})]})]})}],708099)},936248,(e,t,r)=>{let a="/CarriageInwards";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(708099)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/2edb2b394ba4d2db.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))}]);