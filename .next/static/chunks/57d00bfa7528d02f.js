(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,797548,e=>{"use strict";let t=(0,e.i(475254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],797548)},878894,e=>{"use strict";let t=(0,e.i(475254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],878894)},541071,e=>{"use strict";let t=(0,e.i(475254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],541071)},232189,(e,t,r)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,t,r)=>{"use strict";var s=e.r(232189);function a(){}function i(){}i.resetWarningCache=a,t.exports=function(){function e(e,t,r,a,i,n){if(n!==s){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},745009,(e,t,r)=>{t.exports=e.r(865156)()},908962,224410,e=>{"use strict";var t=e.i(271645),r=e.i(160615),s=e.i(422713),a=e.i(266027),i=e.i(912598);let n=e=>{let t=Object.keys(localStorage),r=["allProductsStats_","stockSummary_","soldItems_","dashboardData_","analyticsData_"],s=0;t.forEach(e=>{r.some(t=>e.startsWith(t))&&(localStorage.removeItem(e),s++)}),s>0&&console.log(`[Cache] Cleared ${s} inventory-related localStorage entries.`),e&&(console.log("[Cache] Invalidating React Query inventory keys..."),e.invalidateQueries({queryKey:["inventory_global_stats"]}),e.invalidateQueries({queryKey:["stockSummary"]}),e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["sales"]}),e.invalidateQueries({queryKey:["all-products-for-scanner"]}),e.invalidateQueries({queryKey:["all-products"]}))};e.s(["clearInventoryCaches",0,n],224410);var o=e.i(555781);e.s(["useProducts",0,(e,l=50)=>{let[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(1),[p,h]=(0,t.useState)(l),[f,g]=(0,t.useState)(0),[y,x]=(0,t.useState)(!1),{settings:v}=(0,r.useBusinessSettings)(),{currentBusiness:b}=(0,s.useBusiness)(),w=(0,i.useQueryClient)(),[j,N]=(0,t.useState)({search:"",category:"all",stockStatus:"all"}),[C,P]=(0,t.useState)(null),k=(0,t.useCallback)(e=>{e.search!==j.search&&(x(!0),C&&clearTimeout(C),P(setTimeout(()=>{x(!1)},600))),N(e)},[j.search,C]),S=(0,t.useCallback)(async()=>{if(!e||!b)return{products:[],count:0};try{return await (0,o.getProductsAction)({userId:e,businessId:b.id,page:u,pageSize:p,search:j.search,category:"all"===j.category?void 0:j.category,stockStatus:j.stockStatus})}catch(e){return console.error("Error loading products from server action:",e),{products:[],count:0}}},[e,b?.id,u,p,j.search,j.category,j.stockStatus]),R=(0,t.useMemo)(()=>["products",e,b?.id],[e,b?.id]),A=(0,t.useMemo)(()=>[...R,u,p,j.search,j.category,j.stockStatus],[R,u,p,j.search,j.category,j.stockStatus]),{data:E,isLoading:T,isFetching:_,refetch:I}=(0,a.useQuery)({queryKey:A,queryFn:S,enabled:!!e&&!!b?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0});(0,t.useEffect)(()=>{E&&(d(E.products),g(E.count))},[E]);let L=async t=>{try{if(!e)return null;return console.warn("Image upload redirecting to server action (TODO)"),null}catch(e){return console.error("Error in uploadProductImage:",e),null}};return{products:c,isLoading:T&&!E&&!y,loadProducts:S,page:u,setPage:m,pageSize:p,setPageSize:h,totalCount:f,createProduct:async t=>{try{if(!e||!b)return null;let r=await (0,o.createProductAction)({...t,userId:e,businessId:b.id});if(!r)return null;return d(e=>[r,...e]),g(e=>e+1),w.invalidateQueries({queryKey:R}),n(w),r}catch(e){return console.error("Error creating product:",e),null}},updateProduct:async(t,r,s,a=!1,i,l,c,d)=>{try{if(!e||!b)return!1;let l=r.imageUrl;if(s&&(l=await L(s)),!await (0,o.updateProductAction)(t,{...r,imageUrl:l,userId:e,businessId:b.id,isFromSale:a,customChangeReason:i,referenceId:c}))return!1;return w.invalidateQueries({queryKey:R}),n(w),!0}catch(e){return console.error("Error updating product:",e),!1}},updateProductsBulk:async(t,r,s,a,i,l)=>{try{if(!e||!b)return!1;let r=await (0,o.updateProductsBulkAction)(t.map(e=>({id:e.id,updated:e.updated})),b.id);return r&&(w.invalidateQueries({queryKey:R}),n(w)),r}catch(e){return console.error("Error in bulk update:",e),!1}},deleteProduct:async t=>{try{if(!e)return!1;if(await (0,o.deleteProductAction)(t))return w.invalidateQueries({queryKey:R}),n(w),!0;return!1}catch(e){return console.error("Error deleting product:",e),!1}},uploadProductImage:L,refetch:I,isFetching:_,filters:j,setFilters:k}}],908962)},555781,(e,t,r)=>{let s=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw s.code="MODULE_UNPARSABLE",s},160615,e=>{"use strict";var t=e.i(271645),r=e.i(266027),s=e.i(908406),a=e.i(422713),i=e.i(95187);let n=(0,i.createServerReference)("40290a4fc6b8571a026afeb877566edb807919e482",i.callServer,void 0,i.findSourceMapURL,"getBusinessSettingsAction");var o=e.i(709239);let l=()=>({businessName:"",businessAddress:"",businessPhone:"",businessEmail:"",currency:"UGX",paymentInfo:"",defaultPrintFormat:"standard"});e.s(["convertPaymentMethodsToString",0,e=>e.filter(e=>""!==e.method.trim()||""!==e.accountNumber.trim()||""!==e.accountName.trim()).map(e=>`${e.method}
${e.accountNumber}
${e.accountName}`).join("\n"),"parsePaymentInfo",0,e=>{if(!e||""===e.trim())return[];let t=e.split("\n").filter(e=>""!==e.trim()),r=[];for(let e=0;e<t.length;e+=3)e+2<t.length&&r.push({method:t[e].trim(),accountNumber:t[e+1].trim(),accountName:t[e+2].trim()});return r},"useBusinessSettings",0,()=>{let[e,i]=(0,t.useState)(l()),[c,d]=(0,t.useState)(!1),{toast:u}=(0,s.useToast)(),{currentBusiness:m}=(0,a.useBusiness)(),p=async()=>{if(!m)return l();try{let e=await n(m.id);if(!e)return l();{let t=e.metadata&&"object"==typeof e.metadata&&e.metadata.payment_info||"";return{id:e.id,businessName:e.business_name||"",businessAddress:e.business_address||"",businessPhone:e.business_phone||"",businessEmail:e.business_email||"",businessLogo:e.business_logo||void 0,currency:e.currency||"UGX",signature:e.signature||void 0,paymentInfo:t,defaultPrintFormat:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_print_format||"standard",defaultPrinterName:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_printer_name||"",defaultPrinterType:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_printer_type||"USB",printerPaperSize:e.metadata&&"object"==typeof e.metadata&&e.metadata.printer_paper_size||"58mm"}}}catch(e){return console.error("Error loading business settings:",e),u({title:"Error",description:"Failed to load business settings. Please try again.",variant:"destructive"}),l()}},h=async t=>{if(!m)return console.error("No business selected for updating settings"),u({title:"Error",description:"No business selected",variant:"destructive"}),!1;try{let r={payment_info:t.hasOwnProperty("paymentInfo")?t.paymentInfo:e.paymentInfo||"",default_print_format:t.hasOwnProperty("defaultPrintFormat")?t.defaultPrintFormat:e.defaultPrintFormat||"standard",default_printer_name:t.hasOwnProperty("defaultPrinterName")?t.defaultPrinterName:e.defaultPrinterName||"",default_printer_type:t.hasOwnProperty("defaultPrinterType")?t.defaultPrinterType:e.defaultPrinterType||"USB",printer_paper_size:t.hasOwnProperty("printerPaperSize")?t.printerPaperSize:e.printerPaperSize||"58mm"},s={business_name:t.hasOwnProperty("businessName")?t.businessName:e.businessName,business_address:t.hasOwnProperty("businessAddress")?t.businessAddress:e.businessAddress,business_phone:t.hasOwnProperty("businessPhone")?t.businessPhone:e.businessPhone,business_email:t.hasOwnProperty("businessEmail")?t.businessEmail:e.businessEmail,business_logo:t.hasOwnProperty("businessLogo")?t.businessLogo:e.businessLogo,currency:t.hasOwnProperty("currency")?t.currency:e.currency,signature:t.hasOwnProperty("signature")?t.signature:e.signature,metadata:r},a=await (0,o.upsertBusinessSettingsAction)(m.id,"00000000-0000-0000-0000-000000000000",s);if(!a.success)throw console.error("Supabase error updating business settings:",a.error),Error(a.error);return u({title:"Success",description:"Business settings updated successfully"}),x(),!0}catch(e){return console.error("Error updating business settings:",e),u({title:"Error",description:"Failed to update business settings. Please try again.",variant:"destructive"}),!1}},{data:f,isLoading:g,isFetching:y,refetch:x}=(0,r.useQuery)({queryKey:["businessSettings",m?.id],queryFn:p,enabled:!!m?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return(0,t.useEffect)(()=>{f?i(f):m||i(l())},[f,m]),(0,t.useEffect)(()=>{d(g||y)},[g,y]),{settings:e,isLoading:c,updateSettings:h,loadSettings:p}}],160615)},63209,e=>{"use strict";let t=(0,e.i(475254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},303281,e=>{"use strict";let t=(0,e.i(475254).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],303281)},871689,e=>{"use strict";let t=(0,e.i(475254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],871689)},57287,e=>{"use strict";var t=e.i(271645),r=e.i(981140),s=e.i(820783),a=e.i(30030),i=e.i(369340),n=e.i(999682),o=e.i(635804),l=e.i(248425),c=e.i(843476),d="Switch",[u,m]=(0,a.createContextScope)(d),[p,h]=u(d),f=t.forwardRef((e,a)=>{let{__scopeSwitch:n,name:o,checked:u,defaultChecked:m,required:h,disabled:f,value:g="on",onCheckedChange:y,form:b,...w}=e,[j,N]=t.useState(null),C=(0,s.useComposedRefs)(a,e=>N(e)),P=t.useRef(!1),k=!j||b||!!j.closest("form"),[S,R]=(0,i.useControllableState)({prop:u,defaultProp:m??!1,onChange:y,caller:d});return(0,c.jsxs)(p,{scope:n,checked:S,disabled:f,children:[(0,c.jsx)(l.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":h,"data-state":v(S),"data-disabled":f?"":void 0,disabled:f,value:g,...w,ref:C,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{R(e=>!e),k&&(P.current=e.isPropagationStopped(),P.current||e.stopPropagation())})}),k&&(0,c.jsx)(x,{control:j,bubbles:!P.current,name:o,value:g,checked:S,required:h,disabled:f,form:b,style:{transform:"translateX(-100%)"}})]})});f.displayName=d;var g="SwitchThumb",y=t.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,a=h(g,r);return(0,c.jsx)(l.Primitive.span,{"data-state":v(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});y.displayName=g;var x=t.forwardRef(({__scopeSwitch:e,control:r,checked:a,bubbles:i=!0,...l},d)=>{let u=t.useRef(null),m=(0,s.useComposedRefs)(u,d),p=(0,n.usePrevious)(a),h=(0,o.useSize)(r);return t.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[p,a,i]),(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...l,tabIndex:-1,ref:m,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(e){return e?"checked":"unchecked"}x.displayName="SwitchBubbleInput",e.s(["Root",()=>f,"Switch",()=>f,"SwitchThumb",()=>y,"Thumb",()=>y,"createSwitchScope",()=>m])},699375,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(57287),a=e.i(975157);let i=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)(s.Root,{className:(0,a.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:i,children:(0,t.jsx)(s.Thumb,{className:(0,a.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=s.Root.displayName,e.s(["Switch",()=>i])},669469,e=>{"use strict";var t=e.i(843476);let r=(0,e.i(475254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",0,({imageUrl:e,alt:s,size:a="md"})=>{let i="sm"===a?"w-10 h-10":"w-12 h-12";return e?(0,t.jsx)("img",{src:e,alt:s,className:`${i} object-cover rounded-md`}):(0,t.jsx)("div",{className:`${i} bg-gray-100 flex items-center justify-center rounded-md`,children:(0,t.jsx)(r,{size:"sm"===a?16:18,className:"text-gray-400"})})}],669469)},908482,e=>{"use strict";var t=e.i(271645),r=e.i(908406),s=e.i(422713),a=e.i(555781);e.s(["useCategories",0,e=>{let[i,n]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),{toast:c}=(0,r.useToast)(),{currentBusiness:d}=(0,s.useBusiness)(),u=(0,t.useCallback)(async()=>{try{if(!d?.id){n([]),l(!1);return}l(!0);let e=await (0,a.getProductCategoriesAction)(d.id);if(!e.success||!e.data)throw Error(e.error||"Failed to fetch categories");let t=e.data.map(e=>({id:e.id,name:e.name,createdAt:e.createdAt?new Date(e.createdAt):e.created_at?new Date(e.created_at):void 0}));n(t)}catch(e){console.error("Error loading categories:",e),c({title:"Error",description:"Failed to load product categories.",variant:"destructive"})}finally{l(!1)}},[d?.id,c]);(0,t.useEffect)(()=>{u()},[u]);let m=async t=>{try{if(!e||!d?.id)return null;let r=i.find(e=>e.name.toLowerCase()===t.toLowerCase());if(r)return c({title:"Category exists",description:"This category already exists."}),r;let s=await (0,a.createProductCategoryAction)(d.id,e,t);if(!s.success||!s.data)throw Error(s.error);let o={id:s.data.id,name:s.data.name,createdAt:new Date(s.data.createdAt)};return n(e=>[...e,o]),c({title:"Success",description:"Category created successfully"}),o}catch(e){return console.error("Error creating category:",e),c({title:"Error",description:"Failed to create category.",variant:"destructive"}),null}},p=async(e,t)=>{try{if(i.find(r=>r.name.toLowerCase()===t.toLowerCase()&&r.id!==e))return c({title:"Category exists",description:"Another category with this name already exists."}),!1;let r=await (0,a.updateProductCategoryAction)(e,t);if(!r.success)throw Error(r.error);return n(r=>r.map(r=>r.id===e?{...r,name:t}:r)),c({title:"Success",description:"Category updated successfully"}),!0}catch(e){return console.error("Error updating category:",e),c({title:"Error",description:"Failed to update category.",variant:"destructive"}),!1}};return{categories:i,isLoading:o,loadCategories:u,createCategory:m,updateCategory:p,deleteCategory:async e=>{try{let t=await (0,a.deleteProductCategoryAction)(e);if(!t.success)return c({title:"Cannot delete category",description:t.error||"Failed to delete category.",variant:"destructive"}),!1;return n(t=>t.filter(t=>t.id!==e)),c({title:"Success",description:"Category deleted successfully"}),!0}catch(e){return console.error("Error deleting category:",e),c({title:"Error",description:"Failed to delete category.",variant:"destructive"}),!1}}}}])},284765,e=>{"use strict";let t=(0,e.i(475254).default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);e.s(["Settings2",()=>t],284765)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],727612)},487486,e=>{"use strict";var t=e.i(843476),r=e.i(225913),s=e.i(975157);let a=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",warning:"border-transparent bg-amber-500 text-white hover:bg-amber-600",success:"border-transparent bg-green-600 text-white hover:bg-green-700"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(a({variant:r}),e),...i})}e.s(["Badge",()=>i])},688511,e=>{"use strict";let t=(0,e.i(475254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],688511)},555436,e=>{"use strict";let t=(0,e.i(475254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],555436)},952571,e=>{"use strict";let t=(0,e.i(475254).default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>t],952571)},444233,e=>{"use strict";let t=e=>{let t=[],r="",s=!1,a=0;for(;a<e.length;){let i=e[a],n=e[a+1];if('"'===i)if(s&&'"'===n){r+='"',a+=2;continue}else s=!s;else","!==i||s?r+=i:(t.push(r.trim()),r="");a++}return t.push(r.trim()),t},r=(e,t)=>{let r=[];return e["Product Name"]?.trim()||r.push({row:t,field:"Product Name",message:"Product Name is required"}),r},s=(e,t)=>{let r=[];return(!e.Amount||isNaN(Number(e.Amount))||0>=Number(e.Amount))&&r.push({row:t,field:"Amount",message:"Amount must be a positive number"}),e.Type&&["cash_in","cash_out","transfer"].includes(e.Type.toLowerCase())||r.push({row:t,field:"Type",message:'Type must be "cash_in", "cash_out", or "transfer"'}),e.Description?.trim()||r.push({row:t,field:"Description",message:"Description is required"}),e.Type?.toLowerCase()!=="transfer"||e["To Account"]||r.push({row:t,field:"To Account",message:"To Account is required for transfers"}),r},a=(e,t)=>{let r=[];return(!e.Amount||isNaN(Number(e.Amount))||0>=Number(e.Amount))&&r.push({row:t,field:"Amount",message:"Amount must be a positive number"}),e.Description?.trim()||r.push({row:t,field:"Description",message:"Description is required"}),"true"!==e["Link to Finance"]?.toString().toLowerCase()||e["Finance Account"]?.trim()||r.push({row:t,field:"Finance Account",message:"Finance Account is required when Link to Finance is true"}),r};e.s(["generateErrorLogCSV",0,(e,t="upload_errors.csv")=>{let r=new Blob([["Row,Field,Error Message",...e.map(e=>[e.row,e.field,`"${e.message}"`].join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)},"parseCSV",0,e=>{let s=e.trim().split("\n"),a=t(s[0]).map(e=>e.trim()),i=[],n=[];for(let e=1;e<s.length;e++){let o=t(s[e]).map(e=>e.trim()),l={};a.forEach((e,t)=>{l[e]=o[t]||""});let c=r(l,e+1);0===c.length?i.push(l):n.push(...c)}return{validRows:i,errors:n,totalRows:s.length-1}},"parseExpenseCSV",0,e=>{let r=e.trim().split("\n");if(r.length<1)return{validRows:[],errors:[],totalRows:0};let s=t(r[0]).map(e=>e.trim()),i=[],n=[];for(let e=1;e<r.length;e++){if(!r[e].trim())continue;let o=t(r[e]).map(e=>e.trim()),l={};s.forEach((e,t)=>{l[e]=o[t]||""});let c=a(l,e+1);0===c.length?i.push(l):n.push(...c)}return{validRows:i,errors:n,totalRows:r.length-1}},"parseTransactionCSV",0,e=>{let r=e.trim().split("\n");if(r.length<1)return{validRows:[],errors:[],totalRows:0};let a=t(r[0]).map(e=>e.trim()),i=[],n=[];for(let e=1;e<r.length;e++){if(!r[e].trim())continue;let o=t(r[e]).map(e=>e.trim()),l={};a.forEach((e,t)=>{l[e]=o[t]||""});let c=s(l,e+1);0===c.length?i.push(l):n.push(...c)}return{validRows:i,errors:n,totalRows:r.length-1}},"validateExpenseCSVRow",0,a,"validateTransactionCSVRow",0,s])},269638,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],269638)},569074,e=>{"use strict";let t=(0,e.i(475254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],569074)},676027,e=>{"use strict";var t=e.i(271645),r=e.i(843476);e.i(174080);var s=e.i(991918),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let i=(0,s.createSlot)(`Primitive.${a}`),n=t.forwardRef((e,t)=>{let{asChild:s,...n}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(s?i:a,{...n,ref:t})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),i="Progress",[n,o]=function(e,s=[]){let a=[],i=()=>{let r=a.map(e=>t.createContext(e));return function(s){let a=s?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return i.scopeName=e,[function(s,i){let n=t.createContext(i);n.displayName=s+"Context";let o=a.length;a=[...a,i];let l=s=>{let{scope:a,children:i,...l}=s,c=a?.[e]?.[o]||n,d=t.useMemo(()=>l,Object.values(l));return(0,r.jsx)(c.Provider,{value:d,children:i})};return l.displayName=s+"Provider",[l,function(r,a){let l=a?.[e]?.[o]||n,c=t.useContext(l);if(c)return c;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${s}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return s.scopeName=r.scopeName,s}(i,...s)]}(i),[l,c]=n(i),d=t.forwardRef((e,t)=>{var s,i;let{__scopeProgress:n,value:o=null,max:c,getValueLabel:d=p,...u}=e;(c||0===c)&&!g(c)&&console.error((s=`${c}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=g(c)?c:100;null===o||y(o,m)||console.error((i=`${o}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=y(o,m)?o:null,v=f(x)?d(x,m):void 0;return(0,r.jsx)(l,{scope:n,value:x,max:m,children:(0,r.jsx)(a.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":f(x)?x:void 0,"aria-valuetext":v,role:"progressbar","data-state":h(x,m),"data-value":x??void 0,"data-max":m,...u,ref:t})})});d.displayName=i;var u="ProgressIndicator",m=t.forwardRef((e,t)=>{let{__scopeProgress:s,...i}=e,n=c(u,s);return(0,r.jsx)(a.div,{"data-state":h(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:t})});function p(e,t){return`${Math.round(e/t*100)}%`}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function f(e){return"number"==typeof e}function g(e){return f(e)&&!isNaN(e)&&e>0}function y(e,t){return f(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=u,e.s(["Indicator",()=>m,"Progress",()=>d,"ProgressIndicator",()=>m,"Root",()=>d,"createProgressScope",()=>o],676027)},168148,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(676027),a=e.i(975157);let i=r.forwardRef(({className:e,value:r,...i},n)=>(0,t.jsx)(s.Root,{ref:n,className:(0,a.cn)("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",e),...i,children:(0,t.jsx)(s.Indicator,{className:"h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`,backgroundColor:"#16a34a"}})}));i.displayName=s.Root.displayName,e.s(["Progress",()=>i])},483969,e=>{"use strict";e.s(["generateProductCSVTemplate",0,()=>{let e=new Blob([["Product Name,Category,Description,Supplier,Creation Date,Initial Stock,Minimum Stock Level,Cost Price,Selling Price",...[['"Sample Product with, commas"',"Electronics",'"A detailed product description, with commas and other punctuation!"','"Supplier Name, Inc."',"15/01/2024","10","5","50.00","75.00"],["Simple Product Name","Home & Garden","Basic description without commas","Basic Supplier","2024-01-16","-5","0","-25.50","100.75"]].map(e=>e.join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="product_template.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},"generateTransactionCSVTemplate",0,()=>{let e=new Blob([["Date,Type,Amount,Description,Category,Payment Method,Person In Charge,To Account",...[["22/12/2025","cash_in","1500.00","Sales income from morning shift","Sales","Cash","John Doe",""],["22/12/2025","cash_out","200.50","Purchased cleaning supplies","Expenses","Cash","Jane Smith",""],["22/12/2025","transfer","5000.00","Moving funds to main safe","Internal","","Admin","Main Safe"]].map(e=>e.join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="transaction_template.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}])},184244,e=>{"use strict";var t=e.i(843476),r=e.i(515288),s=e.i(488844),a=e.i(878894);let i=(0,e.i(475254).default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var n=e.i(25652),o=e.i(212426),l=e.i(160615),c=e.i(975157),d=e.i(392401);e.s(["default",0,({products:e,hideStockValue:u=!1,totalCountOverride:m,totalCostValueOverride:p,lowStockOverride:h,outOfStockOverride:f,totalStockValueOverride:g})=>{let{settings:y}=(0,l.useBusinessSettings)(),{canViewCostPrice:x,canViewSellingPrice:v}=(0,d.useFinancialVisibility)(),b="number"==typeof m?m:e.length,w="number"==typeof h?h:e.filter(e=>e.quantity>0&&e.quantity<=e.minimumStock).length,j="number"==typeof f?f:e.filter(e=>0===e.quantity).length,N="number"==typeof p?p:e.reduce((e,t)=>e+t.costPrice*t.quantity,0),C="number"==typeof g?g:e.reduce((e,t)=>e+t.sellingPrice*t.quantity,0),P=e=>{let t=e.length;return t>15?"text-sm md:text-lg":t>12?"text-base md:text-xl":t>8?"text-lg md:text-xl":"text-lg md:text-2xl"};return(0,t.jsxs)("div",{className:`grid gap-3 md:gap-4 mb-6 ${u?"grid-cols-2 md:grid-cols-4":"grid-cols-2 md:grid-cols-3 xl:grid-cols-5"}`,children:[(0,t.jsx)(r.Card,{className:"overflow-hidden",children:(0,t.jsx)(r.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"inline-flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg bg-blue-100 text-blue-500",children:(0,t.jsx)(s.Package,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,t.jsxs)("div",{className:"ml-3 md:ml-4 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs md:text-sm font-medium text-gray-500 truncate",children:"Total Products"}),(0,t.jsx)("h3",{className:"text-lg md:text-2xl font-bold",children:b})]})]})})}),(0,t.jsx)(r.Card,{className:"overflow-hidden",children:(0,t.jsx)(r.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"inline-flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg bg-amber-100 text-amber-500",children:(0,t.jsx)(a.AlertTriangle,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,t.jsxs)("div",{className:"ml-3 md:ml-4 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs md:text-sm font-medium text-gray-500 truncate",children:"Low Stock"}),(0,t.jsx)("h3",{className:"text-lg md:text-2xl font-bold",children:w})]})]})})}),(0,t.jsx)(r.Card,{className:"overflow-hidden",children:(0,t.jsx)(r.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"inline-flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg bg-red-100 text-red-500",children:(0,t.jsx)(i,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,t.jsxs)("div",{className:"ml-3 md:ml-4 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs md:text-sm font-medium text-gray-500 truncate",children:"Out of Stock"}),(0,t.jsx)("h3",{className:"text-lg md:text-2xl font-bold",children:j})]})]})})}),(0,t.jsx)(r.Card,{className:"overflow-hidden",children:(0,t.jsx)(r.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"inline-flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg bg-green-100 text-green-500",children:(0,t.jsx)(n.TrendingUp,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,t.jsxs)("div",{className:"ml-3 md:ml-4 min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-xs md:text-sm font-medium text-gray-500 truncate",children:"Cost Value"}),(0,t.jsx)("h3",{className:`${P(`${y.currency} ${(0,c.formatNumber)(N)}`)} font-bold break-all leading-tight`,children:x?`${y.currency} ${(0,c.formatNumber)(N)}`:"•••"})]})]})})}),!u&&(0,t.jsx)(r.Card,{className:"overflow-hidden",children:(0,t.jsx)(r.CardContent,{className:"p-4 md:p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"inline-flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg bg-purple-100 text-purple-500",children:(0,t.jsx)(o.DollarSign,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,t.jsxs)("div",{className:"ml-3 md:ml-4 min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-xs md:text-sm font-medium text-gray-500 truncate",children:"Stock Value"}),(0,t.jsx)("h3",{className:`${P(`${y.currency} ${(0,c.formatNumber)(C)}`)} font-bold break-all leading-tight`,children:v?`${y.currency} ${(0,c.formatNumber)(C)}`:"•••"})]})]})})})]})}],184244)},649941,e=>{"use strict";var t=e.i(843476),r=e.i(168148),s=e.i(269638),a=e.i(63209),i=e.i(952571),n=e.i(929592);e.s(["BulkOperationProgress",0,({title:e,currentCount:o,totalCount:l,status:c,successCount:d,failureCount:u})=>{let m=Math.round(o/l*100);return(0,t.jsxs)("div",{className:"space-y-6 py-4",children:["processing"===c&&(0,t.jsxs)(n.Alert,{children:[(0,t.jsx)(i.Info,{className:"h-4 w-4"}),(0,t.jsx)(n.AlertDescription,{children:(0,t.jsx)("strong",{children:"Please do not close this tab or dialog until the process is complete."})})]}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:["processing"===c?(0,t.jsx)("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-muted border-t-primary"}):"completed"===c?(0,t.jsx)(s.CheckCircle,{className:"mx-auto h-12 w-12 text-green-500"}):(0,t.jsx)(a.AlertCircle,{className:"mx-auto h-12 w-12 text-destructive"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"processing"===c?`Processing item ${o} of ${l}`:"completed"===c?`Successfully processed ${d??l} items${u?`, ${u} failed`:""}`:"The operation failed to complete."})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs font-medium text-muted-foreground",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[m,"%"]})]}),(0,t.jsx)(r.Progress,{value:m,className:"h-2 w-full"})]}),(void 0!==d||void 0!==u)&&"completed"===c&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,t.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-green-700",children:d??0}),(0,t.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"Successful"})]}),(0,t.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-lg p-3 text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-red-700",children:u??0}),(0,t.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"Failed"})]})]})]})}])},553366,e=>{"use strict";var t=e.i(271645),r=e.i(102594),s=e.i(908962),a=e.i(908482),i=e.i(846696);e.s(["useBulkProducts",0,()=>{let{user:e}=(0,r.useAuth)(),{createProduct:n}=(0,s.useProducts)(e?.id),{categories:o,createCategory:l}=(0,a.useCategories)(e?.id),[c,d]=(0,t.useState)(!1),u=async e=>{let t=o.map(e=>e.name.toLowerCase()),r=[...new Set(e.filter(e=>""!==e.trim()))].filter(e=>!t.includes(e.toLowerCase())),s=[],a=[];for(let e of r)try{await l(e)?s.push(e):a.push(e)}catch(t){console.error(`Failed to create category ${e}:`,t),a.push(e)}return{createdCategories:s,failedCategories:a}};return{bulkCreateProducts:async(t,r)=>{if(!e?.id)throw Error("User not authenticated");d(!0);let s=0,a=0,o=[];try{let e=t.map(e=>e.category).filter(Boolean);if(e.length>0){let{createdCategories:t,failedCategories:r}=await u(e);t.length>0&&i.toast.success(`Created ${t.length} new categories`),r.length>0&&i.toast.error(`Failed to create ${r.length} categories`)}for(let e=0;e<t.length;e++){let i=t[e];try{await n(i)?s++:(a++,o.push(`Failed to create product: ${i.name}`))}catch(e){a++,o.push(`Error creating ${i.name}: ${e}`),console.error(`Error creating product ${i.name}:`,e)}r&&r(s+a,t.length)}return!r&&(s>0&&i.toast.success(`Successfully created ${s} products`),a>0&&i.toast.error(`${a} products failed to upload`)),{successCount:s,failureCount:a,errors:o}}finally{d(!1)}},detectNewCategories:e=>{let t=o.map(e=>e.name.toLowerCase());return[...new Set(e.map(e=>e.category).filter(Boolean))].filter(e=>!t.includes(e.toLowerCase()))},isUploading:c}}])},501504,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(776639),a=e.i(519455),i=e.i(515288),n=e.i(929592),o=e.i(569074),l=e.i(178583),c=e.i(63209),d=e.i(440160),u=e.i(107233),m=e.i(444233),p=e.i(975157),h=e.i(487486),f=e.i(553366),g=e.i(649941);e.s(["default",0,({open:e,onOpenChange:y,onUpload:x,categories:v})=>{let{detectNewCategories:b,bulkCreateProducts:w}=(0,f.useBulkProducts)(),[j,N]=(0,r.useState)({step:"select",file:null,validRows:[],errors:[],totalRows:0,uploadProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),C=(0,r.useRef)(null),[P,k]=(0,r.useState)(!1),[S,R]=(0,r.useState)(!1),A=async e=>{if(!e.name.endsWith(".csv"))return void alert("Please select a CSV file");let t=await e.text(),r=(0,m.parseCSV)(t),s=b(r.validRows.map(E));N({...j,step:"preview",file:e,validRows:r.validRows,errors:r.errors,totalRows:r.totalRows,newCategories:s})},E=e=>{let t=new Date,r=e["Creation Date"];if(r){let e=r.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(e){let[,r,s,a]=e;t=new Date(parseInt(a),parseInt(s)-1,parseInt(r))}else{let e=new Date(r);isNaN(e.getTime())||(t=e)}}return{name:e["Product Name"],category:e.Category||"",description:e.Description||"",supplier:e.Supplier||"",quantity:e["Initial Stock"]?Number(e["Initial Stock"]):0,minimumStock:e["Minimum Stock Level"]?Number(e["Minimum Stock Level"]):void 0,costPrice:e["Cost Price"]?Number(e["Cost Price"]):void 0,sellingPrice:e["Selling Price"]?Number(e["Selling Price"]):void 0,manufacturerBarcode:e["Manufacturer Barcode"]||"",imageFile:null,imageUrl:null,createdAt:t}},T=async()=>{N(e=>({...e,step:"uploading",uploadProgress:0,currentProductIndex:0})),R(!0);let e=j.validRows.map(E);try{await w(e,(e,t)=>{let r=Math.round(e/t*100);N(t=>({...t,uploadProgress:r,currentProductIndex:e,successCount:e,failureCount:0}))}),N(t=>({...t,step:"complete",uploadProgress:100,successCount:e.length,failureCount:0,currentProductIndex:e.length}))}catch(t){console.error("Bulk upload failed:",t),N(t=>({...t,step:"complete",uploadProgress:100,successCount:0,failureCount:e.length,currentProductIndex:e.length}))}finally{R(!1)}};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:e=>{S||y(e)},children:(0,t.jsxs)(s.DialogContent,{className:"sm:max-w-[500px] pointer-events-auto",children:[(0,t.jsxs)(s.DialogHeader,{children:[(0,t.jsxs)(s.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.FileText,{className:"h-5 w-5"}),"Upload Products via CSV"]}),(0,t.jsx)(s.DialogDescription,{children:"Upload multiple products at once using a CSV file (DD/MM/YYYY date format)"})]}),"select"===j.step&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:(0,p.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors",P?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDrop:e=>{e.preventDefault(),k(!1);let t=e.dataTransfer.files[0];t&&A(t)},onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:()=>{k(!1)},onClick:()=>C.current?.click(),children:[(0,t.jsx)(o.Upload,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload CSV File"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Drag and drop your CSV file here, or click to browse"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Supports all date formats | Accepts negative values | Use quotes for fields with commas"})]}),(0,t.jsx)("input",{ref:C,type:"file",accept:".csv",onChange:e=>{let t=e.target.files?.[0];t&&A(t)},className:"hidden"})]}),"preview"===j.step&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"pt-6",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:j.validRows.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Valid products"})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"pt-6",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:j.errors.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Errors found"})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"pt-6",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:j.totalRows}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total rows"})]})})]}),j.newCategories.length>0&&(0,t.jsxs)(n.Alert,{children:[(0,t.jsx)(u.Plus,{className:"h-4 w-4"}),(0,t.jsx)(n.AlertDescription,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{children:["The following ",j.newCategories.length," new categories will be created:"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:j.newCategories.map((e,r)=>(0,t.jsx)(h.Badge,{variant:"outline",className:"text-xs",children:e},r))})]})})]}),j.errors.length>0&&(0,t.jsxs)(n.Alert,{variant:"destructive",children:[(0,t.jsx)(c.AlertCircle,{className:"h-4 w-4"}),(0,t.jsxs)(n.AlertDescription,{children:[j.errors.length," rows have errors and will be skipped.",(0,t.jsxs)(a.Button,{variant:"link",className:"p-0 h-auto ml-2",onClick:()=>(0,m.generateErrorLogCSV)(j.errors),children:[(0,t.jsx)(d.Download,{className:"h-3 w-3 mr-1"}),"Download error log"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>N(e=>({...e,step:"select"})),children:"Back"}),(0,t.jsxs)(a.Button,{onClick:T,disabled:0===j.validRows.length,children:["Upload ",j.validRows.length," Products",j.newCategories.length>0&&` & Create ${j.newCategories.length} Categories`]})]})]}),"uploading"===j.step&&(0,t.jsx)(g.BulkOperationProgress,{title:"Uploading Products...",currentCount:j.currentProductIndex,totalCount:j.validRows.length,status:"processing"}),"complete"===j.step&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(g.BulkOperationProgress,{title:"Upload Complete!",currentCount:j.currentProductIndex,totalCount:j.validRows.length,status:j.failureCount>0?"failed":"completed",successCount:j.successCount,failureCount:j.failureCount}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(a.Button,{onClick:()=>{if(S)return;let e="complete"===j.step&&j.successCount>0;N({step:"select",file:null,validRows:[],errors:[],totalRows:0,uploadProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),y(!1),e&&setTimeout(()=>{window.location.reload()},100)},children:"Close"})})]})]})})}])},48503,e=>{e.v(e=>Promise.resolve().then(()=>e(915833)))},870653,e=>{e.v(t=>Promise.all(["static/chunks/63eee2351f5394d5.js"].map(t=>e.l(t))).then(()=>t(424154)))},195111,e=>{e.v(t=>Promise.all(["static/chunks/f66634c84e3526bd.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);