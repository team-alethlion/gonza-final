(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,533538,e=>{"use strict";let t=(0,e.i(369547).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],533538)},920955,(e,t,r)=>{var n={229:function(e){var t,r,n,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||o(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},i=!0;try{n[e](r,r.exports,a),i=!1}finally{i&&delete s[e]}return r.exports}a.ab="/ROOT/node_modules/next/dist/compiled/process/",t.exports=a(229)},350461,(e,t,r)=>{"use strict";var n,s;t.exports=(null==(n=e.g.process)?void 0:n.env)&&"object"==typeof(null==(s=e.g.process)?void 0:s.env)?e.g.process:e.r(920955)},877325,(e,t,r)=>{"use strict";var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator,h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||h}function g(){}function b(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var j=b.prototype=new g;j.constructor=b,y(j,v.prototype),j.isPureReactComponent=!0;var N=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(a[s]=t[s]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(s in c=e.defaultProps)void 0===a[s]&&(a[s]=c[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:w.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function R(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function k(e,t,r){if(null==e)return e;var a=[],i=0;return!function e(t,r,a,i,o){var c,l,u,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var f=!1;if(null===t)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case n:case s:f=!0}}if(f)return o=o(f=t),t=""===i?"."+R(f,0):i,N(o)?(a="",null!=t&&(a=t.replace(C,"$&/")+"/"),e(o,r,a,"",function(e){return e})):null!=o&&(T(o)&&(c=o,l=a+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+t,o={$$typeof:n,type:c.type,key:l,ref:c.ref,props:c.props,_owner:c._owner}),r.push(o)),1;if(f=0,i=""===i?".":i+":",N(t))for(var m=0;m<t.length;m++){var h=i+R(d=t[m],m);f+=e(d,r,a,h,o)}else if("function"==typeof(h=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(t=h.call(t),m=0;!(d=t.next()).done;)h=i+R(d=d.value,m++),f+=e(d,r,a,h,o);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}(e,a,"","",function(e){return t.call(r,e,i++)}),a}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},M={transition:null};function A(){throw Error("act(...) is not supported in production builds of React.")}r.Children={map:k,forEach:function(e,t,r){k(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},r.Component=v,r.Fragment=a,r.Profiler=o,r.PureComponent=b,r.StrictMode=i,r.Suspense=d,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:M,ReactCurrentOwner:w},r.act=A,r.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=y({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!S.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},r.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},r.createElement=E,r.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:u,render:e}},r.isValidElement=T,r.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:O}},r.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},r.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},r.unstable_act=A,r.useCallback=function(e,t){return P.current.useCallback(e,t)},r.useContext=function(e){return P.current.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e){return P.current.useDeferredValue(e)},r.useEffect=function(e,t){return P.current.useEffect(e,t)},r.useId=function(){return P.current.useId()},r.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},r.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},r.useMemo=function(e,t){return P.current.useMemo(e,t)},r.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},r.useRef=function(e){return P.current.useRef(e)},r.useState=function(e){return P.current.useState(e)},r.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},r.useTransition=function(){return P.current.useTransition()},r.version="18.3.1"},191788,(e,t,r)=>{"use strict";t.exports=e.r(877325)},701884,(e,t,r)=>{"use strict";var n=e.r(191788),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,a={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!c.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:l,ref:u,props:a,_owner:o.current}}r.Fragment=a,r.jsx=l,r.jsxs=l},391398,(e,t,r)=>{"use strict";t.exports=e.r(701884)},369547,e=>{"use strict";var t=e.i(191788);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:l,...u},d)=>(0,t.createElement)("svg",{ref:d,...n,width:s,height:s,stroke:e,strokeWidth:i?24*Number(a)/Number(s):a,className:r("lucide",o),...u},[...l.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(c)?c:[c]])),a=(e,n)=>{let a=(0,t.forwardRef)(({className:a,...i},o)=>(0,t.createElement)(s,{ref:o,iconNode:n,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...i}));return a.displayName=`${e}`,a};e.s(["default",()=>a],369547)},426119,e=>{"use strict";var t=e.i(391398),r=e.i(191788),n=e.i(353533);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));s.displayName="Card";let a=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));a.displayName="CardHeader";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));i.displayName="CardTitle";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));l.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>c,"CardDescription",()=>o,"CardFooter",()=>l,"CardHeader",()=>a,"CardTitle",()=>i])},180490,e=>{e.v({name:"dotenv",version:"16.6.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}})},45124,e=>{"use strict";var t=e.i(391398),r=e.i(191788),n=e.i(353533);let s=r.forwardRef(({className:e,type:r,...s},a)=>(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","number"===r&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",e),onWheel:"number"===r?e=>{"number"===r&&e.currentTarget.blur()}:void 0,ref:a,...s}));s.displayName="Input",e.s(["Input",()=>s])},993953,e=>{"use strict";var t=e.i(191788),r=e.i(357006),n=e.i(776833),s=e=>{var s;let i,o,{present:c,children:l}=e,u=function(e){var r,s;let[i,o]=t.useState(),c=t.useRef(null),l=t.useRef(e),u=t.useRef("none"),[d,f]=(r=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>s[e][t]??e,r));return t.useEffect(()=>{let e=a(c.current);u.current="mounted"===d?e:"none"},[d]),(0,n.useLayoutEffect)(()=>{let t=c.current,r=l.current;if(r!==e){let n=u.current,s=a(t);e?f("MOUNT"):"none"===s||t?.display==="none"?f("UNMOUNT"):r&&n!==s?f("ANIMATION_OUT"):f("UNMOUNT"),l.current=e}},[e,f]),(0,n.useLayoutEffect)(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,r=r=>{let n=a(c.current).includes(CSS.escape(r.animationName));if(r.target===i&&n&&(f("ANIMATION_END"),!l.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},n=e=>{e.target===i&&(u.current=a(c.current))};return i.addEventListener("animationstart",n),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",n),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}f("ANIMATION_END")},[i,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{c.current=e?getComputedStyle(e):null,o(e)},[])}}(c),d="function"==typeof l?l({present:u.isPresent}):t.Children.only(l),f=(0,r.useComposedRefs)(u.ref,(s=d,(o=(i=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.ref:(o=(i=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.props.ref:s.props.ref||s.ref));return"function"==typeof l||u.isPresent?t.cloneElement(d,{ref:f}):null};function a(e){return e?.animationName||"none"}s.displayName="Presence",e.s(["Presence",()=>s])},868462,e=>{"use strict";let t=(0,e.i(369547).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],868462)},972733,e=>{"use strict";let t=(0,e.i(369547).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],972733)},909289,e=>{"use strict";let t=(0,e.i(369547).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],909289)},708997,e=>{"use strict";let t=(0,e.i(369547).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],708997)},327765,e=>{"use strict";var t=e.i(635113);function r(e,r){let n=(0,t.toDate)(e,r?.in);return n.setHours(23,59,59,999),n}e.s(["endOfDay",()=>r])},327877,e=>{"use strict";let t=(0,e.i(369547).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],327877)},883721,e=>{"use strict";var t=e.i(391398);e.s(["default",0,({message:e="Loading...",size:r="md",className:n=""})=>(0,t.jsxs)("div",{className:`flex flex-col items-center justify-center space-y-4 ${n}`,children:[(0,t.jsx)("img",{src:"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png",alt:"Loading",className:`${{sm:"w-8 h-8",md:"w-16 h-16",lg:"w-24 h-24"}[r]} animate-spin`}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:e})]})])},108996,e=>{"use strict";let t=(0,e.i(369547).default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["Receipt",()=>t],108996)},312761,e=>{"use strict";let t=(0,e.i(369547).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],312761)},295746,e=>{"use strict";let t=(0,e.i(369547).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],295746)},457541,e=>{"use strict";let t=(0,e.i(369547).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],457541)},756043,e=>{"use strict";let t=(0,e.i(369547).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],756043)},923850,e=>{"use strict";var t=e.i(824216);e.s(["useCurrentUser",0,()=>{let{user:e}=(0,t.useAuth)();return{userId:e?.id}}])},286012,e=>{"use strict";var t=e.i(256680);async function r(e){try{return await t.db.activityHistory.create({data:{userId:e.userId,locationId:e.locationId,activityType:e.activityType,module:e.module,entityType:e.entityType,entityId:e.entityId||null,entityName:e.entityName,description:e.description,metadata:e.metadata||null,profileId:e.profileId||null,profileName:e.profileName||null}}),{success:!0}}catch(e){return console.error("Error logging activity:",e),{success:!1,error:e.message}}}async function n(e,r,s=1,a=20,i){try{let n={locationId:e,userId:r};if(i&&(i.activityType&&"ALL"!==i.activityType&&(n.activityType=i.activityType),i.module&&"ALL"!==i.module&&(n.module=i.module),i.search&&(n.OR=[{entityName:{contains:i.search,mode:"insensitive"}},{description:{contains:i.search,mode:"insensitive"}}]),i.dateFrom||i.dateTo)&&(n.createdAt={},i.dateFrom&&(n.createdAt.gte=new Date(i.dateFrom)),i.dateTo)){let e=new Date(i.dateTo);e.setHours(23,59,59,999),n.createdAt.lte=e}let[o,c]=await Promise.all([t.db.activityHistory.findMany({where:n,skip:(s-1)*a,take:a,orderBy:{createdAt:"desc"}}),t.db.activityHistory.count({where:n})]);return{success:!0,data:{activities:o.map(e=>({...e,created_at:e.createdAt.toISOString(),activity_type:e.activityType,location_id:e.locationId,user_id:e.userId,entity_type:e.entityType,entity_id:e.entityId,entity_name:e.entityName,profile_id:e.profileId,profile_name:e.profileName})),count:c}}}catch(e){return console.error("Error fetching activity history:",e),{success:!1,error:e.message}}}e.s(["getActivityHistoryAction",()=>n,"logActivityAction",()=>r])},681912,(e,t,r)=>{"use strict";var n=e.r(730943);r.createRoot=n.createRoot,r.hydrateRoot=n.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return n}});let n=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return b},NormalizeError:function(){return v},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return y},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return d},getLocationOrigin:function(){return l},getURL:function(){return u},isAbsoluteUrl:function(){return c},isResSent:function(){return f},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return N}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>o.test(e);function l(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=l();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="u">typeof performance,y=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class v extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return c},LayoutRouterContext:function(){return o},MissingSlotContext:function(){return u},TemplateContext:function(){return l}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(741705)._(e.r(191788)),i=a.default.createContext(null),o=a.default.createContext(null),c=a.default.createContext(null),l=a.default.createContext(null),u=a.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return s}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={NavigationPromisesContext:function(){return u},PathParamsContext:function(){return l},PathnameContext:function(){return c},ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},SearchParamsContext:function(){return o},createDevToolsInstrumentedPromise:function(){return d}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(191788),i=e.r(531430),o=(0,a.createContext)(null),c=(0,a.createContext)(null),l=(0,a.createContext)(null),u=(0,a.createContext)(null);function d(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HTTPAccessErrorStatus:function(){return a},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return o},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return l},isHTTPAccessFallbackError:function(){return c}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(a)),o="NEXT_HTTP_ERROR_FALLBACK";function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===o&&i.has(Number(r))}function l(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return s}});var n,s=((n={})[n.SeeOther=303]="SeeOther",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,s={REDIRECT_ERROR_CODE:function(){return o},RedirectType:function(){return c},isRedirectError:function(){return l}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let i=e.r(40184),o="NEXT_REDIRECT";var c=((n={}).push="push",n.replace="replace",n);function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,s=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===o&&("replace"===n||"push"===n)&&"string"==typeof s&&!isNaN(a)&&a in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return a}});let n=e.r(991622),s=e.r(301939);function a(e){return(0,s.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},692093,e=>{"use strict";var t=e.i(498170);function r(e){return(0,t.constructFrom)(e,Date.now())}e.s(["constructNow",()=>r])},646744,e=>{"use strict";let t=(0,e.i(369547).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["ShoppingCart",()=>t],646744)},572874,e=>{"use strict";var t=e.i(391398),r=e.i(191788),n=e.i(46108),s=e.i(923850),a=e.i(893930),i=e.i(285700),o=e.i(286012),c=e.i(599875),l=e.i(426119),u=e.i(646744),d=e.i(327877),f=e.i(108996),m=e.i(312761),p=e.i(295746);let h=(0,e.i(369547).default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var y=e.i(972733),x=e.i(708997),v=e.i(909289),g=e.i(756043),b=e.i(692093),j=e.i(550216),N=e.i(527861),_=e.i(98450),w=e.i(124323),S=e.i(635113);function E(e,t){let r=(0,S.toDate)(e)-(0,S.toDate)(t);return r<0?-1:r>0?1:r}var T=e.i(402848),C=e.i(450447),R=e.i(327765),k=e.i(738609);function O(e,t){return function(e,t,r){var n;let s,a=(0,N.getDefaultOptions)(),i=r?.locale??a.locale??j.defaultLocale,o=E(e,t);if(isNaN(o))throw RangeError("Invalid time value");let c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o}),[l,u]=(0,w.normalizeDates)(r?.in,...o>0?[t,e]:[e,t]),d=(n=void 0,e=>{let t=(n?Math[n]:Math.trunc)(e);return 0===t?0:t})(((0,S.toDate)(u)-(0,S.toDate)(l))/1e3),f=Math.round((d-((0,_.getTimezoneOffsetInMilliseconds)(u)-(0,_.getTimezoneOffsetInMilliseconds)(l))/1e3)/60);if(f<2)if(r?.includeSeconds)if(d<5)return i.formatDistance("lessThanXSeconds",5,c);else if(d<10)return i.formatDistance("lessThanXSeconds",10,c);else if(d<20)return i.formatDistance("lessThanXSeconds",20,c);else if(d<40)return i.formatDistance("halfAMinute",0,c);else if(d<60)return i.formatDistance("lessThanXMinutes",1,c);else return i.formatDistance("xMinutes",1,c);else if(0===f)return i.formatDistance("lessThanXMinutes",1,c);else return i.formatDistance("xMinutes",f,c);if(f<45)return i.formatDistance("xMinutes",f,c);if(f<90)return i.formatDistance("aboutXHours",1,c);if(f<T.minutesInDay){let e=Math.round(f/60);return i.formatDistance("aboutXHours",e,c)}if(f<2520)return i.formatDistance("xDays",1,c);else if(f<T.minutesInMonth){let e=Math.round(f/T.minutesInDay);return i.formatDistance("xDays",e,c)}else if(f<2*T.minutesInMonth)return s=Math.round(f/T.minutesInMonth),i.formatDistance("aboutXMonths",s,c);if((s=function(e,t,r){let n,[s,a,i]=(0,w.normalizeDates)(void 0,e,e,t),o=E(a,i),c=Math.abs((0,C.differenceInCalendarMonths)(a,i));if(c<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*c);let l=E(a,i)===-o;n=(0,S.toDate)(s,void 0),+(0,R.endOfDay)(n,void 0)==+(0,k.endOfMonth)(n,void 0)&&1===c&&1===E(s,i)&&(l=!1);let u=o*(c-l);return 0===u?0:u}(u,l))<12){let e=Math.round(f/T.minutesInMonth);return i.formatDistance("xMonths",e,c)}{let e=s%12,t=Math.trunc(s/12);return e<3?i.formatDistance("aboutXYears",t,c):e<9?i.formatDistance("overXYears",t,c):i.formatDistance("almostXYears",t+1,c)}}(e,(0,b.constructNow)(e),t)}var P=e.i(89635),M=e.i(563905),A=e.i(353533);let D=e=>{switch(e){case"CREATE":return"default";case"UPDATE":default:return"secondary";case"DELETE":return"destructive"}},I=({activities:e,isGrouped:r,activity:n})=>{let s=e||(n?[n]:[]);if(0===s.length)return null;let a=s[0];return(0,t.jsx)(l.Card,{className:"p-3 md:p-4 transition-colors hover:bg-muted/50",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg border flex-shrink-0 ${(e=>{switch(e){case"SALES":return"text-green-600 bg-green-50 border-green-200";case"INVENTORY":return"text-blue-600 bg-blue-50 border-blue-200";case"EXPENSES":return"text-red-600 bg-red-50 border-red-200";case"FINANCE":return"text-purple-600 bg-purple-50 border-purple-200";case"CUSTOMERS":return"text-orange-600 bg-orange-50 border-orange-200";case"TASKS":return"text-indigo-600 bg-indigo-50 border-indigo-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})(a.module)}`,children:(e=>{switch(e){case"SALES":return(0,t.jsx)(u.ShoppingCart,{className:"h-4 w-4"});case"INVENTORY":default:return(0,t.jsx)(d.Package,{className:"h-4 w-4"});case"EXPENSES":return(0,t.jsx)(f.Receipt,{className:"h-4 w-4"});case"FINANCE":return(0,t.jsx)(m.CreditCard,{className:"h-4 w-4"});case"CUSTOMERS":return(0,t.jsx)(p.Users,{className:"h-4 w-4"});case"TASKS":return(0,t.jsx)(h,{className:"h-4 w-4"})}})(a.module)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-foreground leading-tight break-words",children:a.entity_name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-nowrap flex-shrink-0 sm:hidden",children:O(new Date(a.created_at),{addSuffix:!0})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[(0,t.jsxs)(c.Badge,{variant:D(a.activity_type),className:"gap-1 text-xs",children:[(e=>{switch(e){case"CREATE":return(0,t.jsx)(y.Plus,{className:"h-3 w-3"});case"UPDATE":default:return(0,t.jsx)(x.Edit,{className:"h-3 w-3"});case"DELETE":return(0,t.jsx)(v.Trash2,{className:"h-3 w-3"})}})(a.activity_type),(0,t.jsx)("span",{className:"hidden xs:inline",children:a.activity_type}),(0,t.jsx)("span",{className:"xs:hidden",children:a.activity_type.charAt(0)})]}),(0,t.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:a.module}),a.profile_name&&(0,t.jsx)(c.Badge,{variant:"secondary",className:"text-xs truncate max-w-24",children:a.profile_name}),r&&(0,t.jsxs)(c.Badge,{variant:"outline",className:"text-xs bg-muted/50",children:[(0,t.jsx)(g.Clock,{className:"h-3 w-3 mr-1"}),s.length," actions"]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2 leading-relaxed",children:a.description}),a.metadata&&Object.keys(a.metadata).length>0&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,t.jsxs)("details",{className:"cursor-pointer group",children:[(0,t.jsxs)("summary",{className:"hover:text-foreground py-1 select-none flex items-center gap-1",children:[(0,t.jsx)("span",{className:"group-open:rotate-90 transition-transform inline-block",children:"â–¸"})," View details"]}),(0,t.jsx)("div",{className:"mt-2 pl-2 border-l-2 border-muted",children:"SALES"===a.module&&a.metadata.items?(0,t.jsx)(L,{metadata:a.metadata}):(0,t.jsx)("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-auto max-h-40",children:JSON.stringify(a.metadata,null,2)})})]})}),r&&s.length>1&&(0,t.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,t.jsxs)("details",{className:"cursor-pointer group",children:[(0,t.jsxs)("summary",{className:"text-xs font-medium hover:text-foreground select-none flex items-center gap-1",children:[(0,t.jsx)("span",{className:"group-open:rotate-90 transition-transform inline-block",children:"â–¸"})," Activity Timeline (",s.length," actions)"]}),(0,t.jsx)("div",{className:"mt-3 space-y-3 pl-1",children:s.map((e,r)=>(0,t.jsxs)("div",{className:"relative pl-4 border-l border-border last:border-0 pb-1",children:[(0,t.jsx)("div",{className:`absolute -left-[5px] top-1.5 h-2.5 w-2.5 rounded-full border ${0===r?"bg-primary border-primary":"bg-background border-muted-foreground"}`}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(c.Badge,{variant:D(e.activity_type),className:"text-[10px] h-5 px-1.5",children:e.activity_type}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:O(new Date(e.created_at),{addSuffix:!0})}),e.profile_name&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["by ",e.profile_name]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})]})})]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-nowrap hidden sm:block flex-shrink-0",children:O(new Date(a.created_at),{addSuffix:!0})})]})})},L=({metadata:e})=>{let{canViewSellingPrice:r,canViewProfit:n,canViewTotalAmount:s}=(0,P.useFinancialVisibility)(),{settings:a}=(0,M.useBusinessSettings)(),i=a?.currency||"UGX";return(0,t.jsxs)("div",{className:"space-y-3 p-2 md:p-3 bg-muted rounded",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 pb-2 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Receipt #"}),(0,t.jsx)("p",{className:"text-sm font-mono break-all",children:e.receiptNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Total Amount"}),(0,t.jsx)("p",{className:"text-sm font-semibold",children:s||r?`${i} ${(0,A.formatNumber)(e.totalAmount||0)}`:"â€¢â€¢â€¢"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Payment Status"}),(0,t.jsx)("p",{className:"text-sm",children:e.paymentStatus})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Profit"}),(0,t.jsx)("p",{className:"text-sm",children:n?`${i} ${(0,A.formatNumber)(e.profit||0)}`:"â€¢â€¢â€¢"})]})]}),e.restoredToInventory&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-orange-600",children:"âš ï¸ Inventory Restored"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Product quantities were restored to inventory"})]}),e.hadCashTransaction&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-red-600",children:"ðŸ’° Cash Transaction Removed"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Associated cash transaction was also deleted"})]}),(e.customerAddress||e.customerContact)&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Customer Details"}),e.customerAddress&&(0,t.jsxs)("p",{className:"text-xs",children:["Address: ",e.customerAddress]}),e.customerContact&&(0,t.jsxs)("p",{className:"text-xs",children:["Contact: ",e.customerContact]})]}),e.items&&e.items.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-muted-foreground",children:["Items (",e.items.length,")"]}),(0,t.jsx)("div",{className:"mt-1 space-y-2 max-h-40 overflow-y-auto",children:e.items.map((e,n)=>(0,t.jsx)("div",{className:"p-2 bg-background rounded border",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium break-words",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-col xs:flex-row xs:justify-between gap-1",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity," Ã— ",r?`${i} ${(0,A.formatNumber)(e.price||0)}`:"â€¢â€¢â€¢"]}),(0,t.jsxs)("p",{className:"text-xs font-medium",children:["= ",r?`${i} ${(0,A.formatNumber)(e.total||0)}`:"â€¢â€¢â€¢"]})]}),e.discountPercentage>0&&(0,t.jsxs)("p",{className:"text-xs text-orange-600",children:["Discount: ",e.discountPercentage,"% (",r?`${i} ${(0,A.formatNumber)(e.discountAmount||0)}`:"â€¢â€¢â€¢",")"]})]})},n))})]}),void 0!==e.amountPaid&&(0,t.jsx)("div",{className:"pt-2 border-t border-border",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Amount Paid:"}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:s||r?`${i} ${(0,A.formatNumber)(e.amountPaid||0)}`:"â€¢â€¢â€¢"})]}),e.taxRate>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tax Rate:"}),(0,t.jsxs)("span",{className:"ml-1",children:[e.taxRate,"%"]})]})]})}),e.notes&&(0,t.jsxs)("div",{className:"pt-2 border-t border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Notes"}),(0,t.jsx)("p",{className:"text-xs",children:e.notes})]})]})},$=({activities:e})=>{let n=(0,r.useMemo)(()=>{let t=new Map,r=[];e.forEach(e=>{"SALES"===e.module&&e.entity_id?(t.has(e.entity_id)||t.set(e.entity_id,[]),t.get(e.entity_id).push(e)):r.push(e)});let n=[];return t.forEach((e,t)=>{let r=e.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());n.push({key:`sale-${t}`,activities:r,latestActivity:r[0],isGrouped:r.length>1})}),r.forEach(e=>{n.push({key:e.id,activities:[e],latestActivity:e,isGrouped:!1})}),n.sort((e,t)=>new Date(t.latestActivity.created_at).getTime()-new Date(e.latestActivity.created_at).getTime())},[e]);return 0===n.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No activities found for the selected filters."})}):(0,t.jsx)("div",{className:"space-y-3 md:space-y-4",children:n.map(e=>(0,t.jsx)(I,{activities:e.activities,isGrouped:e.isGrouped},e.key))})};var F=e.i(45124),U=e.i(939310),H=e.i(690176),B=e.i(897837),V=e.i(348370),X=e.i(792042),z=e.i(151670),q=e.i(457541),W=e.i(533538),Y=e.i(868462),G=e.i(883721);e.s(["default",0,()=>{let{currentBusiness:e}=(0,n.useBusiness)(),[c,u]=(0,r.useState)({activityType:"ALL",module:"ALL",search:"",dateRange:{from:void 0,to:void 0}}),{activities:d,isLoading:f,totalPages:m,currentPage:p,setCurrentPage:h}=((e,t)=>{let{userId:n}=(0,s.useCurrentUser)(),[c,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(0),[f,m]=(0,r.useState)(1),[p,h]=(0,r.useState)(1),y=(0,i.useQueryClient)(),x=(0,r.useCallback)(async()=>{if(!n||!e)return{activities:[],count:0};try{let r=t?{activityType:t.activityType,module:t.module,search:t.search,dateFrom:t.dateRange.from?.toISOString(),dateTo:t.dateRange.to?.toISOString()}:{},s=await (0,o.getActivityHistoryAction)(e,n,f,20,r);if(!s.success||!s.data)throw Error(s.error||"Failed to fetch activities");return{activities:s.data.activities,count:s.data.count}}catch(e){return console.error("Error fetching activity history:",e),{activities:[],count:0}}},[n,e,f,t]),v=["activity_history",n,e,f,t],{data:g,isLoading:b}=(0,a.useQuery)({queryKey:v,queryFn:x,enabled:!!n&&!!e,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});(0,r.useEffect)(()=>{g&&(l(g.activities),d(g.count),h(Math.ceil(g.count/20)))},[g]);let j=b&&!g;return(0,r.useEffect)(()=>{m(1)},[t]),(0,r.useEffect)(()=>{if(!n||!e)return},[n,e,f,t]),{activities:c,isLoading:j,totalCount:u,currentPage:f,totalPages:p,setCurrentPage:m,refetch:()=>{y.invalidateQueries({queryKey:v})}}})(e?.id,c),y="ALL"!==c.activityType||"ALL"!==c.module||""!==c.search||void 0!==c.dateRange.from;return(0,t.jsxs)("div",{className:"container mx-auto p-4 md:p-6 space-y-6 max-w-6xl",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Recent Activity"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Track all actions and changes across your business"})]})}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,t.jsxs)(l.CardTitle,{className:"text-lg font-medium flex items-center gap-2",children:[(0,t.jsx)(q.Filter,{className:"h-5 w-5"}),"Filters"]}),y&&(0,t.jsxs)(U.Button,{variant:"ghost",size:"sm",onClick:()=>{u({activityType:"ALL",module:"ALL",search:"",dateRange:{from:void 0,to:void 0}})},className:"h-8 px-2 text-muted-foreground hover:text-foreground",children:[(0,t.jsx)(Y.X,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(W.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(F.Input,{placeholder:"Search activities...",className:"pl-9",value:c.search,onChange:e=>u(t=>({...t,search:e.target.value}))})]}),(0,t.jsxs)(H.Select,{value:c.module,onValueChange:e=>u(t=>({...t,module:e})),children:[(0,t.jsx)(H.SelectTrigger,{children:(0,t.jsx)(H.SelectValue,{placeholder:"All Modules"})}),(0,t.jsxs)(H.SelectContent,{children:[(0,t.jsx)(H.SelectItem,{value:"ALL",children:"All Modules"}),(0,t.jsx)(H.SelectItem,{value:"SALES",children:"Sales"}),(0,t.jsx)(H.SelectItem,{value:"INVENTORY",children:"Inventory"}),(0,t.jsx)(H.SelectItem,{value:"EXPENSES",children:"Expenses"}),(0,t.jsx)(H.SelectItem,{value:"CUSTOMERS",children:"Customers"}),(0,t.jsx)(H.SelectItem,{value:"FINANCE",children:"Finance"}),(0,t.jsx)(H.SelectItem,{value:"TASKS",children:"Tasks"})]})]}),(0,t.jsxs)(H.Select,{value:c.activityType,onValueChange:e=>u(t=>({...t,activityType:e})),children:[(0,t.jsx)(H.SelectTrigger,{children:(0,t.jsx)(H.SelectValue,{placeholder:"All Actions"})}),(0,t.jsxs)(H.SelectContent,{children:[(0,t.jsx)(H.SelectItem,{value:"ALL",children:"All Actions"}),(0,t.jsx)(H.SelectItem,{value:"CREATE",children:"Created"}),(0,t.jsx)(H.SelectItem,{value:"UPDATE",children:"Updated"}),(0,t.jsx)(H.SelectItem,{value:"DELETE",children:"Deleted"})]})]}),(0,t.jsxs)(V.Popover,{children:[(0,t.jsx)(V.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(U.Button,{variant:"outline",className:(0,A.cn)("justify-start text-left font-normal",!c.dateRange.from&&"text-muted-foreground"),children:[(0,t.jsx)(z.Calendar,{className:"mr-2 h-4 w-4"}),c.dateRange.from?c.dateRange.to?(0,t.jsxs)(t.Fragment,{children:[(0,X.format)(c.dateRange.from,"LLL dd, y")," -"," ",(0,X.format)(c.dateRange.to,"LLL dd, y")]}):(0,X.format)(c.dateRange.from,"LLL dd, y"):(0,t.jsx)("span",{children:"Pick a date range"})]})}),(0,t.jsx)(V.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(B.Calendar,{initialFocus:!0,mode:"range",defaultMonth:c.dateRange.from,selected:c.dateRange,onSelect:e=>u(t=>({...t,dateRange:{from:e?.from,to:e?.to}})),numberOfMonths:2})})]})]})})]}),f?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(G.default,{message:"Loading activity history..."})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)($,{activities:d}),m>1&&(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,t.jsx)(U.Button,{variant:"outline",size:"sm",onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===p,children:"Previous"}),(0,t.jsxs)("div",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Page ",p," of ",m]}),(0,t.jsx)(U.Button,{variant:"outline",size:"sm",onClick:()=>h(e=>Math.min(m,e+1)),disabled:p===m,children:"Next"})]})]})]})}],572874)},32746,(e,t,r)=>{let n="/History";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(572874)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/2edb2b394ba4d2db.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))}]);