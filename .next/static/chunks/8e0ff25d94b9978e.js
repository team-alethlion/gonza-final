(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,986387,e=>{"use strict";var t=e.i(102594);e.s(["useCurrentUser",0,()=>{let{user:e}=(0,t.useAuth)();return{userId:e?.id}}])},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},145963,e=>{"use strict";var t=e.i(281092);function s(e,s){let a=(0,t.toDate)(e,s?.in);return a.setHours(23,59,59,999),a}e.s(["endOfDay",()=>s])},727612,e=>{"use strict";let t=(0,e.i(475254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],727612)},487486,e=>{"use strict";var t=e.i(843476),s=e.i(225913),a=e.i(975157);let r=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",warning:"border-transparent bg-amber-500 text-white hover:bg-amber-600",success:"border-transparent bg-green-600 text-white hover:bg-green-700"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...i})}e.s(["Badge",()=>i])},688511,e=>{"use strict";let t=(0,e.i(475254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],688511)},555436,e=>{"use strict";let t=(0,e.i(475254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],555436)},797548,e=>{"use strict";let t=(0,e.i(475254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],797548)},24708,e=>{"use strict";var t=e.i(677241);function s(e){return(0,t.constructFrom)(e,Date.now())}e.s(["constructNow",()=>s])},399935,e=>{"use strict";var t=e.i(95187);let s=(0,t.createServerReference)("7c50216f90d367a7092d0edb6ffc217f655b260170",t.callServer,void 0,t.findSourceMapURL,"getActivityHistoryAction");e.s(["getActivityHistoryAction",()=>s])},386112,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(422713),r=e.i(986387),i=e.i(266027),n=e.i(912598),l=e.i(399935),c=e.i(487486),d=e.i(515288),o=e.i(201928),u=e.i(488844),m=e.i(350627),x=e.i(561659),h=e.i(761911),f=e.i(656272),g=e.i(107233),p=e.i(688511),v=e.i(727612),j=e.i(503116),y=e.i(24708),N=e.i(55545),b=e.i(455024),S=e.i(99151),w=e.i(845110),T=e.i(281092);function A(e,t){let s=(0,T.toDate)(e)-(0,T.toDate)(t);return s<0?-1:s>0?1:s}var E=e.i(234662),D=e.i(520062),C=e.i(145963),M=e.i(39978);function k(e,t){return function(e,t,s){var a;let r,i=(0,b.getDefaultOptions)(),n=s?.locale??i.locale??N.defaultLocale,l=A(e,t);if(isNaN(l))throw RangeError("Invalid time value");let c=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:l}),[d,o]=(0,w.normalizeDates)(s?.in,...l>0?[t,e]:[e,t]),u=(a=void 0,e=>{let t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(((0,T.toDate)(o)-(0,T.toDate)(d))/1e3),m=Math.round((u-((0,S.getTimezoneOffsetInMilliseconds)(o)-(0,S.getTimezoneOffsetInMilliseconds)(d))/1e3)/60);if(m<2)if(s?.includeSeconds)if(u<5)return n.formatDistance("lessThanXSeconds",5,c);else if(u<10)return n.formatDistance("lessThanXSeconds",10,c);else if(u<20)return n.formatDistance("lessThanXSeconds",20,c);else if(u<40)return n.formatDistance("halfAMinute",0,c);else if(u<60)return n.formatDistance("lessThanXMinutes",1,c);else return n.formatDistance("xMinutes",1,c);else if(0===m)return n.formatDistance("lessThanXMinutes",1,c);else return n.formatDistance("xMinutes",m,c);if(m<45)return n.formatDistance("xMinutes",m,c);if(m<90)return n.formatDistance("aboutXHours",1,c);if(m<E.minutesInDay){let e=Math.round(m/60);return n.formatDistance("aboutXHours",e,c)}if(m<2520)return n.formatDistance("xDays",1,c);else if(m<E.minutesInMonth){let e=Math.round(m/E.minutesInDay);return n.formatDistance("xDays",e,c)}else if(m<2*E.minutesInMonth)return r=Math.round(m/E.minutesInMonth),n.formatDistance("aboutXMonths",r,c);if((r=function(e,t,s){let a,[r,i,n]=(0,w.normalizeDates)(void 0,e,e,t),l=A(i,n),c=Math.abs((0,D.differenceInCalendarMonths)(i,n));if(c<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*c);let d=A(i,n)===-l;a=(0,T.toDate)(r,void 0),+(0,C.endOfDay)(a,void 0)==+(0,M.endOfMonth)(a,void 0)&&1===c&&1===A(r,n)&&(d=!1);let o=l*(c-d);return 0===o?0:o}(o,d))<12){let e=Math.round(m/E.minutesInMonth);return n.formatDistance("xMonths",e,c)}{let e=r%12,t=Math.trunc(r/12);return e<3?n.formatDistance("aboutXYears",t,c):e<9?n.formatDistance("overXYears",t,c):n.formatDistance("almostXYears",t+1,c)}}(e,(0,y.constructNow)(e),t)}var L=e.i(392401),R=e.i(160615),I=e.i(975157);let P=e=>{switch(e){case"CREATE":return"default";case"UPDATE":default:return"secondary";case"DELETE":return"destructive"}},_=({activities:e,isGrouped:s,activity:a})=>{let r=e||(a?[a]:[]);if(0===r.length)return null;let i=r[0];return(0,t.jsx)(d.Card,{className:"p-3 md:p-4 transition-colors hover:bg-muted/50",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg border flex-shrink-0 ${(e=>{switch(e){case"SALES":return"text-green-600 bg-green-50 border-green-200";case"INVENTORY":return"text-blue-600 bg-blue-50 border-blue-200";case"EXPENSES":return"text-red-600 bg-red-50 border-red-200";case"FINANCE":return"text-purple-600 bg-purple-50 border-purple-200";case"CUSTOMERS":return"text-orange-600 bg-orange-50 border-orange-200";case"TASKS":return"text-indigo-600 bg-indigo-50 border-indigo-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})(i.module)}`,children:(e=>{switch(e){case"SALES":return(0,t.jsx)(o.ShoppingCart,{className:"h-4 w-4"});case"INVENTORY":default:return(0,t.jsx)(u.Package,{className:"h-4 w-4"});case"EXPENSES":return(0,t.jsx)(m.Receipt,{className:"h-4 w-4"});case"FINANCE":return(0,t.jsx)(x.CreditCard,{className:"h-4 w-4"});case"CUSTOMERS":return(0,t.jsx)(h.Users,{className:"h-4 w-4"});case"TASKS":return(0,t.jsx)(f.CheckSquare,{className:"h-4 w-4"})}})(i.module)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-foreground leading-tight break-words",children:i.entity_name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-nowrap flex-shrink-0 sm:hidden",children:k(new Date(i.created_at),{addSuffix:!0})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[(0,t.jsxs)(c.Badge,{variant:P(i.activity_type),className:"gap-1 text-xs",children:[(e=>{switch(e){case"CREATE":return(0,t.jsx)(g.Plus,{className:"h-3 w-3"});case"UPDATE":default:return(0,t.jsx)(p.Edit,{className:"h-3 w-3"});case"DELETE":return(0,t.jsx)(v.Trash2,{className:"h-3 w-3"})}})(i.activity_type),(0,t.jsx)("span",{className:"hidden xs:inline",children:i.activity_type}),(0,t.jsx)("span",{className:"xs:hidden",children:i.activity_type.charAt(0)})]}),(0,t.jsx)(c.Badge,{variant:"outline",className:"text-xs",children:i.module}),i.profile_name&&(0,t.jsx)(c.Badge,{variant:"secondary",className:"text-xs truncate max-w-24",children:i.profile_name}),s&&(0,t.jsxs)(c.Badge,{variant:"outline",className:"text-xs bg-muted/50",children:[(0,t.jsx)(j.Clock,{className:"h-3 w-3 mr-1"}),r.length," actions"]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2 leading-relaxed",children:i.description}),i.metadata&&Object.keys(i.metadata).length>0&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,t.jsxs)("details",{className:"cursor-pointer group",children:[(0,t.jsxs)("summary",{className:"hover:text-foreground py-1 select-none flex items-center gap-1",children:[(0,t.jsx)("span",{className:"group-open:rotate-90 transition-transform inline-block",children:"â–¸"})," View details"]}),(0,t.jsx)("div",{className:"mt-2 pl-2 border-l-2 border-muted",children:"SALES"===i.module&&i.metadata.items?(0,t.jsx)(O,{metadata:i.metadata}):(0,t.jsx)("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-auto max-h-40",children:JSON.stringify(i.metadata,null,2)})})]})}),s&&r.length>1&&(0,t.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,t.jsxs)("details",{className:"cursor-pointer group",children:[(0,t.jsxs)("summary",{className:"text-xs font-medium hover:text-foreground select-none flex items-center gap-1",children:[(0,t.jsx)("span",{className:"group-open:rotate-90 transition-transform inline-block",children:"â–¸"})," Activity Timeline (",r.length," actions)"]}),(0,t.jsx)("div",{className:"mt-3 space-y-3 pl-1",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"relative pl-4 border-l border-border last:border-0 pb-1",children:[(0,t.jsx)("div",{className:`absolute -left-[5px] top-1.5 h-2.5 w-2.5 rounded-full border ${0===s?"bg-primary border-primary":"bg-background border-muted-foreground"}`}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(c.Badge,{variant:P(e.activity_type),className:"text-[10px] h-5 px-1.5",children:e.activity_type}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:k(new Date(e.created_at),{addSuffix:!0})}),e.profile_name&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["by ",e.profile_name]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})]})})]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-nowrap hidden sm:block flex-shrink-0",children:k(new Date(i.created_at),{addSuffix:!0})})]})})},O=({metadata:e})=>{let{canViewSellingPrice:s,canViewProfit:a,canViewTotalAmount:r}=(0,L.useFinancialVisibility)(),{settings:i}=(0,R.useBusinessSettings)(),n=i?.currency||"UGX";return(0,t.jsxs)("div",{className:"space-y-3 p-2 md:p-3 bg-muted rounded",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 pb-2 border-b border-border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Receipt #"}),(0,t.jsx)("p",{className:"text-sm font-mono break-all",children:e.receiptNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Total Amount"}),(0,t.jsx)("p",{className:"text-sm font-semibold",children:r||s?`${n} ${(0,I.formatNumber)(e.totalAmount||0)}`:"â€¢â€¢â€¢"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Payment Status"}),(0,t.jsx)("p",{className:"text-sm",children:e.paymentStatus})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Profit"}),(0,t.jsx)("p",{className:"text-sm",children:a?`${n} ${(0,I.formatNumber)(e.profit||0)}`:"â€¢â€¢â€¢"})]})]}),e.restoredToInventory&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-orange-600",children:"âš ï¸ Inventory Restored"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Product quantities were restored to inventory"})]}),e.hadCashTransaction&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-red-600",children:"ðŸ’° Cash Transaction Removed"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Associated cash transaction was also deleted"})]}),(e.customerAddress||e.customerContact)&&(0,t.jsxs)("div",{className:"pb-2 border-b border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Customer Details"}),e.customerAddress&&(0,t.jsxs)("p",{className:"text-xs",children:["Address: ",e.customerAddress]}),e.customerContact&&(0,t.jsxs)("p",{className:"text-xs",children:["Contact: ",e.customerContact]})]}),e.items&&e.items.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-muted-foreground",children:["Items (",e.items.length,")"]}),(0,t.jsx)("div",{className:"mt-1 space-y-2 max-h-40 overflow-y-auto",children:e.items.map((e,a)=>(0,t.jsx)("div",{className:"p-2 bg-background rounded border",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium break-words",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-col xs:flex-row xs:justify-between gap-1",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity," Ã— ",s?`${n} ${(0,I.formatNumber)(e.price||0)}`:"â€¢â€¢â€¢"]}),(0,t.jsxs)("p",{className:"text-xs font-medium",children:["= ",s?`${n} ${(0,I.formatNumber)(e.total||0)}`:"â€¢â€¢â€¢"]})]}),e.discountPercentage>0&&(0,t.jsxs)("p",{className:"text-xs text-orange-600",children:["Discount: ",e.discountPercentage,"% (",s?`${n} ${(0,I.formatNumber)(e.discountAmount||0)}`:"â€¢â€¢â€¢",")"]})]})},a))})]}),void 0!==e.amountPaid&&(0,t.jsx)("div",{className:"pt-2 border-t border-border",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Amount Paid:"}),(0,t.jsx)("span",{className:"ml-1 font-medium",children:r||s?`${n} ${(0,I.formatNumber)(e.amountPaid||0)}`:"â€¢â€¢â€¢"})]}),e.taxRate>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tax Rate:"}),(0,t.jsxs)("span",{className:"ml-1",children:[e.taxRate,"%"]})]})]})}),e.notes&&(0,t.jsxs)("div",{className:"pt-2 border-t border-border",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:"Notes"}),(0,t.jsx)("p",{className:"text-xs",children:e.notes})]})]})},F=({activities:e})=>{let a=(0,s.useMemo)(()=>{let t=new Map,s=[];e.forEach(e=>{"SALES"===e.module&&e.entity_id?(t.has(e.entity_id)||t.set(e.entity_id,[]),t.get(e.entity_id).push(e)):s.push(e)});let a=[];return t.forEach((e,t)=>{let s=e.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());a.push({key:`sale-${t}`,activities:s,latestActivity:s[0],isGrouped:s.length>1})}),s.forEach(e=>{a.push({key:e.id,activities:[e],latestActivity:e,isGrouped:!1})}),a.sort((e,t)=>new Date(t.latestActivity.created_at).getTime()-new Date(e.latestActivity.created_at).getTime())},[e]);return 0===a.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No activities found for the selected filters."})}):(0,t.jsx)("div",{className:"space-y-3 md:space-y-4",children:a.map(e=>(0,t.jsx)(_,{activities:e.activities,isGrouped:e.isGrouped},e.key))})};var X=e.i(793479),$=e.i(519455),B=e.i(967489),U=e.i(227766),V=e.i(337822),H=e.i(401851),z=e.i(87316),q=e.i(797548),Y=e.i(555436),G=e.i(37727),K=e.i(261246);e.s(["default",0,()=>{let{currentBusiness:e}=(0,a.useBusiness)(),[c,o]=(0,s.useState)({activityType:"ALL",module:"ALL",search:"",dateRange:{from:void 0,to:void 0}}),{activities:u,isLoading:m,totalPages:x,currentPage:h,setCurrentPage:f}=((e,t)=>{let{userId:a}=(0,r.useCurrentUser)(),[c,d]=(0,s.useState)([]),[o,u]=(0,s.useState)(0),[m,x]=(0,s.useState)(1),[h,f]=(0,s.useState)(1),g=(0,n.useQueryClient)(),p=(0,s.useCallback)(async()=>{if(!a||!e)return{activities:[],count:0};try{let s=t?{activityType:t.activityType,module:t.module,search:t.search,dateFrom:t.dateRange.from?.toISOString(),dateTo:t.dateRange.to?.toISOString()}:{},r=await (0,l.getActivityHistoryAction)(e,a,m,20,s);if(!r.success||!r.data)throw Error(r.error||"Failed to fetch activities");return{activities:r.data.activities,count:r.data.count}}catch(e){return console.error("Error fetching activity history:",e),{activities:[],count:0}}},[a,e,m,t]),v=["activity_history",a,e,m,t],{data:j,isLoading:y}=(0,i.useQuery)({queryKey:v,queryFn:p,enabled:!!a&&!!e,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});(0,s.useEffect)(()=>{j&&(d(j.activities),u(j.count),f(Math.ceil(j.count/20)))},[j]);let N=y&&!j;return(0,s.useEffect)(()=>{x(1)},[t]),(0,s.useEffect)(()=>{if(!a||!e)return},[a,e,m,t]),{activities:c,isLoading:N,totalCount:o,currentPage:m,totalPages:h,setCurrentPage:x,refetch:()=>{g.invalidateQueries({queryKey:v})}}})(e?.id,c),g="ALL"!==c.activityType||"ALL"!==c.module||""!==c.search||void 0!==c.dateRange.from;return(0,t.jsxs)("div",{className:"container mx-auto p-4 md:p-6 space-y-6 max-w-6xl",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Recent Activity"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Track all actions and changes across your business"})]})}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,t.jsxs)(d.CardTitle,{className:"text-lg font-medium flex items-center gap-2",children:[(0,t.jsx)(q.Filter,{className:"h-5 w-5"}),"Filters"]}),g&&(0,t.jsxs)($.Button,{variant:"ghost",size:"sm",onClick:()=>{o({activityType:"ALL",module:"ALL",search:"",dateRange:{from:void 0,to:void 0}})},className:"h-8 px-2 text-muted-foreground hover:text-foreground",children:[(0,t.jsx)(G.X,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(X.Input,{placeholder:"Search activities...",className:"pl-9",value:c.search,onChange:e=>o(t=>({...t,search:e.target.value}))})]}),(0,t.jsxs)(B.Select,{value:c.module,onValueChange:e=>o(t=>({...t,module:e})),children:[(0,t.jsx)(B.SelectTrigger,{children:(0,t.jsx)(B.SelectValue,{placeholder:"All Modules"})}),(0,t.jsxs)(B.SelectContent,{children:[(0,t.jsx)(B.SelectItem,{value:"ALL",children:"All Modules"}),(0,t.jsx)(B.SelectItem,{value:"SALES",children:"Sales"}),(0,t.jsx)(B.SelectItem,{value:"INVENTORY",children:"Inventory"}),(0,t.jsx)(B.SelectItem,{value:"EXPENSES",children:"Expenses"}),(0,t.jsx)(B.SelectItem,{value:"CUSTOMERS",children:"Customers"}),(0,t.jsx)(B.SelectItem,{value:"FINANCE",children:"Finance"}),(0,t.jsx)(B.SelectItem,{value:"TASKS",children:"Tasks"})]})]}),(0,t.jsxs)(B.Select,{value:c.activityType,onValueChange:e=>o(t=>({...t,activityType:e})),children:[(0,t.jsx)(B.SelectTrigger,{children:(0,t.jsx)(B.SelectValue,{placeholder:"All Actions"})}),(0,t.jsxs)(B.SelectContent,{children:[(0,t.jsx)(B.SelectItem,{value:"ALL",children:"All Actions"}),(0,t.jsx)(B.SelectItem,{value:"CREATE",children:"Created"}),(0,t.jsx)(B.SelectItem,{value:"UPDATE",children:"Updated"}),(0,t.jsx)(B.SelectItem,{value:"DELETE",children:"Deleted"})]})]}),(0,t.jsxs)(V.Popover,{children:[(0,t.jsx)(V.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)($.Button,{variant:"outline",className:(0,I.cn)("justify-start text-left font-normal",!c.dateRange.from&&"text-muted-foreground"),children:[(0,t.jsx)(z.Calendar,{className:"mr-2 h-4 w-4"}),c.dateRange.from?c.dateRange.to?(0,t.jsxs)(t.Fragment,{children:[(0,H.format)(c.dateRange.from,"LLL dd, y")," -"," ",(0,H.format)(c.dateRange.to,"LLL dd, y")]}):(0,H.format)(c.dateRange.from,"LLL dd, y"):(0,t.jsx)("span",{children:"Pick a date range"})]})}),(0,t.jsx)(V.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(U.Calendar,{initialFocus:!0,mode:"range",defaultMonth:c.dateRange.from,selected:c.dateRange,onSelect:e=>o(t=>({...t,dateRange:{from:e?.from,to:e?.to}})),numberOfMonths:2})})]})]})})]}),m?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(K.default,{message:"Loading activity history..."})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(F,{activities:u}),x>1&&(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,t.jsx)($.Button,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===h,children:"Previous"}),(0,t.jsxs)("div",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Page ",h," of ",x]}),(0,t.jsx)($.Button,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.min(x,e+1)),disabled:h===x,children:"Next"})]})]})]})}],386112)}]);