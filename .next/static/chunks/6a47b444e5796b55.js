(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,891680,e=>{"use strict";let t=(0,e.i(369547).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],891680)},430788,e=>{"use strict";let t=(0,e.i(369547).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],430788)},8745,(e,t,r)=>{let s=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw s.code="MODULE_UNPARSABLE",s},924432,e=>{"use strict";var t=e.i(256680),r=e.i(290205);async function s(e,r){try{let s={locationId:e};r&&(s.productId=r);let n=await t.db.productHistory.findMany({where:s,include:{product:{select:{name:!0,costPrice:!0,sellingPrice:!0,sku:!0}}},orderBy:[{createdAt:"desc"},{id:"desc"}]});return{success:!0,data:n.map(e=>({id:e.id,productId:e.productId,oldQuantity:e.previousQuantity,newQuantity:e.newQuantity,changeReason:e.changeReason,createdAt:e.createdAt.toISOString(),referenceId:e.referenceId,receiptNumber:e.receiptNumber,product:e.product?{name:e.product.name,costPrice:e.product.costPrice,sellingPrice:e.product.sellingPrice,itemNumber:e.product.sku}:void 0}))}}catch(e){return console.error("Error fetching stock history:",e),{success:!1,error:e.message}}}async function n(e){try{let s=await t.db.$transaction(async t=>{let r=await t.productHistory.create({data:{userId:e.userId,locationId:e.locationId,productId:e.productId,previousQuantity:e.previousQuantity,newQuantity:e.newQuantity,changeReason:e.changeReason,referenceId:e.referenceId||null,receiptNumber:e.receiptNumber||null,createdAt:e.createdAt?new Date(e.createdAt):void 0}});return await t.product.update({where:{id:e.productId},data:{stock:e.newQuantity}}),r});return(0,r.revalidatePath)("/inventory"),{success:!0,data:s}}catch(e){return console.error("Error creating stock history:",e),{success:!1,error:e.message}}}async function a(e,s){try{let n=await t.db.$transaction(async t=>{let r=await t.productHistory.findMany({where:{productId:e,locationId:s},orderBy:[{createdAt:"asc"},{id:"asc"}]});if(0===r.length)return{finalQuantity:0};let n=0,a=[];for(let e of r){let r=e.newQuantity-e.previousQuantity,s=n,i=s+r;(e.previousQuantity!==s||e.newQuantity!==i)&&a.push(t.productHistory.update({where:{id:e.id},data:{previousQuantity:s,newQuantity:i}})),n=i}return a.length>0&&await Promise.all(a),await t.product.update({where:{id:e},data:{stock:n}}),{finalQuantity:n}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:n}}catch(e){return console.error("Error recalculating stock chain:",e),{success:!1,error:e.message}}}async function i(e,s){try{let n=await t.db.$transaction(async t=>{let r=await t.productHistory.findMany({where:{referenceId:e,locationId:s},select:{productId:!0}}),n=[...new Set(r.map(e=>e.productId))];for(let r of(await t.productHistory.deleteMany({where:{referenceId:e,locationId:s}}),n))await l(t,r,s);return{affectedProducts:n.length}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:n}}catch(e){return console.error("Error deleting stock history by reference:",e),{success:!1,error:e.message}}}async function o(e,s,n){try{let a=await t.db.productHistory.updateMany({where:{referenceId:e,locationId:s},data:{createdAt:new Date(n)}});return(0,r.revalidatePath)("/inventory"),{success:!0,data:a}}catch(e){return console.error("Error updating stock history dates:",e),{success:!1,error:e.message}}}async function l(e,t,r){let s=await e.productHistory.findMany({where:{productId:t,locationId:r},orderBy:[{createdAt:"asc"},{id:"asc"}]}),n=0;for(let t of s){let r=t.newQuantity-t.previousQuantity,s=n,a=s+r;(t.previousQuantity!==s||t.newQuantity!==a)&&await e.productHistory.update({where:{id:t.id},data:{previousQuantity:s,newQuantity:a}}),n=a}await e.product.update({where:{id:t},data:{stock:n}})}async function c(e,r){try{let s=await t.db.requisition.findMany({where:{userId:e,locationId:r},orderBy:{createdAt:"desc"}});return{success:!0,data:s.map(e=>({id:e.id,userId:e.userId,locationId:e.branchId,requisitionNumber:e.requisitionNumber,title:e.title||"",items:e.items||[],notes:e.notes,status:e.status,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}))}}catch(e){return console.error("Error fetching requisitions:",e),{success:!1,error:e.message}}}async function d(e){try{let s=await t.db.requisition.create({data:{userId:e.userId,branchId:e.locationId,requisitionNumber:e.requisitionNumber,title:e.title,items:e.items,notes:e.notes,status:e.status||"draft"}});return(0,r.revalidatePath)("/requisitions"),{success:!0,data:{id:s.id,userId:s.userId,locationId:s.branchId,requisitionNumber:s.requisitionNumber,title:s.title||"",items:s.items||[],notes:s.notes,status:s.status,createdAt:s.createdAt.toISOString(),updatedAt:s.updatedAt.toISOString()}}}catch(e){return console.error("Error creating requisition:",e),{success:!1,error:e.message}}}async function u(e,s,n){try{let a=await t.db.requisition.update({where:{id:e,userId:s},data:{title:n.title,items:n.items,notes:n.notes,status:n.status,updatedAt:new Date}});return(0,r.revalidatePath)("/requisitions"),{success:!0,data:{id:a.id,userId:a.userId,locationId:a.branchId,requisitionNumber:a.requisitionNumber,title:a.title||"",items:a.items||[],notes:a.notes,status:a.status,createdAt:a.createdAt.toISOString(),updatedAt:a.updatedAt.toISOString()}}}catch(e){return console.error("Error updating requisition:",e),{success:!1,error:e.message}}}async function m(e,s){try{return await t.db.requisition.delete({where:{id:e,userId:s}}),(0,r.revalidatePath)("/requisitions"),{success:!0}}catch(e){return console.error("Error deleting requisition:",e),{success:!1,error:e.message}}}async function p(e,r,s){try{let n=new Date(r),a=new Date(s),i=await t.db.product.findMany({where:{branchId:e},include:{category:!0}}),o=await Promise.all(i.map(async r=>{let s=await t.db.productHistory.findMany({where:{productId:r.id,locationId:e,createdAt:{gte:n,lte:a}},orderBy:{createdAt:"asc"}}),i=0,o=0,l=0,c=0;s.forEach(e=>{let t=e.newQuantity-e.previousQuantity;"SALE"===e.changeReason?i+=Math.abs(t):"STOCK_IN"===e.changeReason||"RESTOCK"===e.changeReason?o+=t:t>0?l+=t:c+=Math.abs(t)});let d=await t.db.productHistory.findFirst({where:{productId:r.id,locationId:e,createdAt:{lte:a}},orderBy:{createdAt:"desc"}}),u=d?d.newQuantity:0,m=u-(o+l-i-c);return{productId:r.id,productName:r.name,itemNumber:r.sku||r.id,imageUrl:r.imageUrl,costPrice:Number(r.costPrice),sellingPrice:Number(r.sellingPrice),category:r.category?.name,openingStock:m,itemsSold:i,stockIn:o,transferOut:0,returnIn:0,returnOut:0,adjustmentsIn:l,adjustmentsOut:c,closingStock:u,revaluation:u*Number(r.costPrice)}}));return{success:!0,data:o}}catch(e){return console.error("Error generating stock summary report:",e),{success:!1,error:e.message}}}async function f(e,r){try{let s=await t.db.product.findUnique({where:{id:r},include:{category:!0}});if(!s)return{success:!1,error:"Product not found"};let n=await t.db.productHistory.findMany({where:{productId:r,locationId:e},orderBy:[{createdAt:"asc"},{id:"asc"}]}),a=await t.db.sale.findMany({where:{branchId:e},orderBy:{date:"asc"}}),i=n.length>0?n[0].newStock:0,o=n.length>0?n[0].createdAt:null,l=new Map,c=0;a.forEach(e=>{let t=(e.items||[]).filter(e=>e.productId===r).reduce((e,t)=>e+(Number(t.quantity)||0),0);if(t>0)if(o&&e.date<o)c+=t;else{let r=e.date.toISOString().split("T")[0],s=l.get(r)||{itemsSold:0,stockAdded:0,transferOut:0,returnIn:0,returnOut:0,adjustments:0};s.itemsSold+=t,l.set(r,s)}}),n.slice(1).forEach(e=>{let t=e.createdAt.toISOString().split("T")[0],r=e.newStock-e.oldStock,s=(e.changeReason||"").toLowerCase(),n=l.get(t)||{itemsSold:0,stockAdded:0,transferOut:0,returnIn:0,returnOut:0,adjustments:0};"RESTOCK"===e.type||s.includes("purchase")||s.includes("addition")?n.stockAdded+=r:s.includes("transfer out")?n.transferOut+=Math.abs(r):s.includes("customer return")?n.returnIn+=r:s.includes("return to supplier")?n.returnOut+=Math.abs(r):"SALE"!==e.type&&(n.adjustments+=r),l.set(t,n)});let d=Array.from(l.keys()).sort(),u=[],m=i;for(let e of d){let t=l.get(e),r=m,s=r-t.itemsSold+t.stockAdded-t.transferOut+t.returnIn-t.returnOut+t.adjustments;u.push({date:e,startingStock:r,...t,endingStock:s}),m=s}return{success:!0,data:{product:{id:s.id,name:s.name,quantity:s.stock,itemNumber:s.sku},currentStock:s.stock,calculatedStock:m,discrepancy:s.stock-m,openingStock:i,openingDate:o?.toISOString(),excludedSalesQty:c,dailyBreakdown:u}}}catch(e){return console.error("Error in reconciliation action:",e),{success:!1,error:e.message}}}async function h(e){try{let r=await t.db.product.findMany({where:{branchId:e},select:{id:!0,name:!0,stock:!0}}),s=[];for(let n of r){let r=await t.db.productHistory.findMany({where:{productId:n.id,locationId:e},orderBy:[{createdAt:"asc"},{id:"asc"}]});if(0===r.length)continue;let a=0,i=[];for(let e of r){let t=e.newStock-e.oldStock,r=a,s=r+t;(e.oldStock!==r||e.newStock!==s)&&i.push({entryId:e.id,createdAt:e.createdAt.toISOString(),changeReason:e.changeReason,currentPrevQty:e.oldStock,currentNewQty:e.newStock,fixedPrevQty:r,fixedNewQty:s}),a=s}(i.length>0||Math.abs(n.stock-a)>.001)&&s.push({productId:n.id,productName:n.name,totalEntries:r.length,brokenEntries:i,finalFixedQty:a,currentProductQty:n.stock})}return{success:!0,data:s}}catch(e){return{success:!1,error:e.message}}}async function x(e,r){try{let s=r||(await t.db.product.findMany({where:{branchId:e},select:{id:!0}})).map(e=>e.id),n=0,i=0;for(let t of s)try{await a(t,e),n++}catch(e){i++}return{success:!0,data:{repaired:n,failed:i}}}catch(e){return{success:!1,error:e.message}}}async function y(e){try{let r=await t.db.activityHistory.findMany({where:{entityId:{in:e}},select:{entityId:!0,entityName:!0}});return{success:!0,data:r}}catch(e){return{success:!1,error:e.message,data:[]}}}async function g(e,r){try{return await t.db.productHistory.updateMany({where:{id:{in:e}},data:{createdAt:new Date(r)}}),{success:!0}}catch(e){return{success:!1,error:e.message}}}e.s(["createRequisitionAction",()=>d,"createStockHistoryAction",()=>n,"deleteRequisitionAction",()=>m,"deleteStockHistoryEntriesByReferenceAction",()=>i,"getActivityByEntityIdsAction",()=>y,"getProductReconciliationAction",()=>f,"getRequisitionsAction",()=>c,"getStockHistoryAction",()=>s,"getStockRepairsPreviewAction",()=>h,"getStockSummaryReportAction",()=>p,"recalculateStockChainAction",()=>a,"repairStockChainsAction",()=>x,"updateRequisitionAction",()=>u,"updateStockHistoryDatesAction",()=>g,"updateStockHistoryDatesByReferenceAction",()=>o])},646190,e=>{"use strict";var t=e.i(391398),r=e.i(353533);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...s})}e.s(["Skeleton",()=>s])},681912,(e,t,r)=>{"use strict";var s=e.r(730943);r.createRoot=s.createRoot,r.hydrateRoot=s.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return s}});let s=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return b},NormalizeError:function(){return g},PageNotFoundError:function(){return j},SP:function(){return h},ST:function(){return x},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return m},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return v}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&m(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="u">typeof performance,x=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class g extends Error{}class j extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return l},LayoutRouterContext:function(){return o},MissingSlotContext:function(){return d},TemplateContext:function(){return c}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(741705)._(e.r(191788)),i=a.default.createContext(null),o=a.default.createContext(null),l=a.default.createContext(null),c=a.default.createContext(null),d=a.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return n}});class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={NavigationPromisesContext:function(){return d},PathParamsContext:function(){return c},PathnameContext:function(){return l},ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},SearchParamsContext:function(){return o},createDevToolsInstrumentedPromise:function(){return u}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(191788),i=e.r(531430),o=(0,a.createContext)(null),l=(0,a.createContext)(null),c=(0,a.createContext)(null),d=(0,a.createContext)(null);function u(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={HTTPAccessErrorStatus:function(){return a},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return o},getAccessFallbackErrorTypeByStatus:function(){return d},getAccessFallbackHTTPStatus:function(){return c},isHTTPAccessFallbackError:function(){return l}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(a)),o="NEXT_HTTP_ERROR_FALLBACK";function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===o&&i.has(Number(r))}function c(e){return Number(e.digest.split(";")[1])}function d(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return n}});var s,n=((s={})[s.SeeOther=303]="SeeOther",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s,n={REDIRECT_ERROR_CODE:function(){return o},RedirectType:function(){return l},isRedirectError:function(){return c}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(40184),o="NEXT_REDIRECT";var l=((s={}).push="push",s.replace="replace",s);function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,s]=t,n=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===o&&("replace"===s||"push"===s)&&"string"==typeof n&&!isNaN(a)&&a in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return a}});let s=e.r(991622),n=e.r(301939);function a(e){return(0,n.isRedirectError)(e)||(0,s.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},17255,e=>{"use strict";var t=e.i(391398),r=e.i(191788),s=e.i(674534),n=e.i(993953),a=e.i(479293),i=e.i(357006),o=e.i(998657),l=e.i(724537),c=e.i(776833),d=e.i(998847),u=e.i(671185),m="ScrollArea",[p,f]=(0,a.createContextScope)(m),[h,x]=p(m),y=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,type:o="hover",dir:c,scrollHideDelay:d=600,...u}=e,[m,p]=r.useState(null),[f,x]=r.useState(null),[y,g]=r.useState(null),[j,b]=r.useState(null),[w,v]=r.useState(null),[N,S]=r.useState(0),[C,k]=r.useState(0),[P,R]=r.useState(!1),[A,E]=r.useState(!1),O=(0,i.useComposedRefs)(n,e=>p(e)),T=(0,l.useDirection)(c);return(0,t.jsx)(h,{scope:a,type:o,dir:T,scrollHideDelay:d,scrollArea:m,viewport:f,onViewportChange:x,content:y,onContentChange:g,scrollbarX:j,onScrollbarXChange:b,scrollbarXEnabled:P,onScrollbarXEnabledChange:R,scrollbarY:w,onScrollbarYChange:v,scrollbarYEnabled:A,onScrollbarYEnabledChange:E,onCornerWidthChange:S,onCornerHeightChange:k,children:(0,t.jsx)(s.Primitive.div,{dir:T,...u,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});y.displayName=m;var g="ScrollAreaViewport",j=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,children:o,nonce:l,...c}=e,d=x(g,a),u=r.useRef(null),m=(0,i.useComposedRefs)(n,u,d.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,t.jsx)(s.Primitive.div,{"data-radix-scroll-area-viewport":"",...c,ref:m,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});j.displayName=g;var b="ScrollAreaScrollbar",w=r.forwardRef((e,s)=>{let{forceMount:n,...a}=e,i=x(b,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=i,c="horizontal"===e.orientation;return r.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),"hover"===i.type?(0,t.jsx)(v,{...a,ref:s,forceMount:n}):"scroll"===i.type?(0,t.jsx)(N,{...a,ref:s,forceMount:n}):"auto"===i.type?(0,t.jsx)(S,{...a,ref:s,forceMount:n}):"always"===i.type?(0,t.jsx)(C,{...a,ref:s}):null});w.displayName=b;var v=r.forwardRef((e,s)=>{let{forceMount:a,...i}=e,o=x(b,e.__scopeScrollArea),[l,c]=r.useState(!1);return r.useEffect(()=>{let e=o.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),c(!0)},s=()=>{t=window.setTimeout(()=>c(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",s)}}},[o.scrollArea,o.scrollHideDelay]),(0,t.jsx)(n.Presence,{present:a||l,children:(0,t.jsx)(S,{"data-state":l?"visible":"hidden",...i,ref:s})})}),N=r.forwardRef((e,s)=>{var a;let{forceMount:i,...o}=e,l=x(b,e.__scopeScrollArea),c="horizontal"===e.orientation,d=q(()=>p("SCROLL_END"),100),[m,p]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>a[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===m){let e=window.setTimeout(()=>p("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[m,l.scrollHideDelay,p]),r.useEffect(()=>{let e=l.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],s=()=>{let s=e[t];r!==s&&(p("SCROLL"),d()),r=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[l.viewport,c,p,d]),(0,t.jsx)(n.Presence,{present:i||"hidden"!==m,children:(0,t.jsx)(C,{"data-state":"hidden"===m?"hidden":"visible",...o,ref:s,onPointerEnter:(0,u.composeEventHandlers)(e.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:(0,u.composeEventHandlers)(e.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),S=r.forwardRef((e,s)=>{let a=x(b,e.__scopeScrollArea),{forceMount:i,...o}=e,[l,c]=r.useState(!1),d="horizontal"===e.orientation,u=q(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;c(d?e:t)}},10);return $(a.viewport,u),$(a.content,u),(0,t.jsx)(n.Presence,{present:i||l,children:(0,t.jsx)(C,{"data-state":l?"visible":"hidden",...o,ref:s})})}),C=r.forwardRef((e,s)=>{let{orientation:n="vertical",...a}=e,i=x(b,e.__scopeScrollArea),o=r.useRef(null),l=r.useRef(0),[c,d]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=L(c.viewport,c.content),m={...a,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function p(e,t){return function(e,t,r,s="ltr"){let n=H(r),a=t||n/2,i=r.scrollbar.paddingStart+a,o=r.scrollbar.size-r.scrollbar.paddingEnd-(n-a),l=r.content-r.viewport;return Q([i,o],"ltr"===s?[0,l]:[-1*l,0])(e)}(e,l.current,c,t)}return"horizontal"===n?(0,t.jsx)(k,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&o.current){let e=B(i.viewport.scrollLeft,c,i.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=p(e,i.dir))}}):"vertical"===n?(0,t.jsx)(P,{...m,ref:s,onThumbPositionChange:()=>{if(i.viewport&&o.current){let e=B(i.viewport.scrollTop,c);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=p(e))}}):null}),k=r.forwardRef((e,s)=>{let{sizes:n,onSizesChange:a,...o}=e,l=x(b,e.__scopeScrollArea),[c,d]=r.useState(),u=r.useRef(null),m=(0,i.useComposedRefs)(s,u,l.onScrollbarXChange);return r.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),(0,t.jsx)(E,{"data-orientation":"horizontal",...o,ref:m,sizes:n,style:{bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":H(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(l.viewport){var s,n;let a=l.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),s=a,n=r,s>0&&s<n&&t.preventDefault()}},onResize:()=>{u.current&&l.viewport&&c&&a({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:F(c.paddingLeft),paddingEnd:F(c.paddingRight)}})}})}),P=r.forwardRef((e,s)=>{let{sizes:n,onSizesChange:a,...o}=e,l=x(b,e.__scopeScrollArea),[c,d]=r.useState(),u=r.useRef(null),m=(0,i.useComposedRefs)(s,u,l.onScrollbarYChange);return r.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),(0,t.jsx)(E,{"data-orientation":"vertical",...o,ref:m,sizes:n,style:{top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":H(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(l.viewport){var s,n;let a=l.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),s=a,n=r,s>0&&s<n&&t.preventDefault()}},onResize:()=>{u.current&&l.viewport&&c&&a({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:F(c.paddingTop),paddingEnd:F(c.paddingBottom)}})}})}),[R,A]=p(b),E=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,sizes:l,hasThumb:c,onThumbChange:d,onThumbPointerUp:m,onThumbPointerDown:p,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:y,onResize:g,...j}=e,w=x(b,a),[v,N]=r.useState(null),S=(0,i.useComposedRefs)(n,e=>N(e)),C=r.useRef(null),k=r.useRef(""),P=w.viewport,A=l.content-l.viewport,E=(0,o.useCallbackRef)(y),O=(0,o.useCallbackRef)(f),T=q(g,10);function I(e){C.current&&h({x:e.clientX-C.current.left,y:e.clientY-C.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;v?.contains(t)&&E(e,A)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[P,v,A,E]),r.useEffect(O,[l,O]),$(v,T),$(w.content,T),(0,t.jsx)(R,{scope:a,scrollbar:v,hasThumb:c,onThumbChange:(0,o.useCallbackRef)(d),onThumbPointerUp:(0,o.useCallbackRef)(m),onThumbPositionChange:O,onThumbPointerDown:(0,o.useCallbackRef)(p),children:(0,t.jsx)(s.Primitive.div,{...j,ref:S,style:{position:"absolute",...j.style},onPointerDown:(0,u.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),C.current=v.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),I(e))}),onPointerMove:(0,u.composeEventHandlers)(e.onPointerMove,I),onPointerUp:(0,u.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=k.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),O="ScrollAreaThumb",T=r.forwardRef((e,r)=>{let{forceMount:s,...a}=e,i=A(O,e.__scopeScrollArea);return(0,t.jsx)(n.Presence,{present:s||i.hasThumb,children:(0,t.jsx)(I,{ref:r,...a})})}),I=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,style:o,...l}=e,c=x(O,a),d=A(O,a),{onThumbPositionChange:m}=d,p=(0,i.useComposedRefs)(n,e=>d.onThumbChange(e)),f=r.useRef(void 0),h=q(()=>{f.current&&(f.current(),f.current=void 0)},100);return r.useEffect(()=>{let e=c.viewport;if(e){let t=()=>{h(),f.current||(f.current=U(e,m),m())};return m(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[c.viewport,h,m]),(0,t.jsx)(s.Primitive.div,{"data-state":d.hasThumb?"visible":"hidden",...l,ref:p,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:(0,u.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top;d.onThumbPointerDown({x:r,y:s})}),onPointerUp:(0,u.composeEventHandlers)(e.onPointerUp,d.onThumbPointerUp)})});T.displayName=O;var _="ScrollAreaCorner",D=r.forwardRef((e,r)=>{let s=x(_,e.__scopeScrollArea),n=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&n?(0,t.jsx)(M,{...e,ref:r}):null});D.displayName=_;var M=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,...i}=e,o=x(_,a),[l,c]=r.useState(0),[d,u]=r.useState(0),m=!!(l&&d);return $(o.scrollbarX,()=>{let e=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(e),u(e)}),$(o.scrollbarY,()=>{let e=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(e),c(e)}),m?(0,t.jsx)(s.Primitive.div,{...i,ref:n,style:{width:l,height:d,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...e.style}}):null});function F(e){return e?parseInt(e,10):0}function L(e,t){let r=e/t;return isNaN(r)?0:r}function H(e){let t=L(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function B(e,t,r="ltr"){let s=H(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,i=t.content-t.viewport,o=(0,d.clamp)(e,"ltr"===r?[0,i]:[-1*i,0]);return Q([0,i],[0,a-s])(o)}function Q(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}var U=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return!function n(){let a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,o=r.top!==a.top;(i||o)&&t(),r=a,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function q(e,t){let s=(0,o.useCallbackRef)(e),n=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(n.current),[]),r.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,t)},[s,t])}function $(e,t){let r=(0,o.useCallbackRef)(t);(0,c.useLayoutEffect)(()=>{let t=0;if(e){let s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,r])}var z=e.i(353533);let W=r.forwardRef(({className:e,children:r,...s},n)=>(0,t.jsxs)(y,{ref:n,className:(0,z.cn)("relative overflow-hidden",e),...s,children:[(0,t.jsx)(j,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(X,{}),(0,t.jsx)(D,{})]}));W.displayName=y.displayName;let X=r.forwardRef(({className:e,orientation:r="vertical",...s},n)=>(0,t.jsx)(w,{ref:n,orientation:r,className:(0,z.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:(0,t.jsx)(T,{className:"relative flex-1 rounded-full bg-border"})}));X.displayName=w.displayName,e.s(["ScrollArea",()=>W],17255)},427534,e=>{"use strict";let t=(0,e.i(369547).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>t],427534)},606310,e=>{"use strict";var t=e.i(391398),r=e.i(646190);e.s(["default",0,()=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-48 mb-2"}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-64"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Skeleton,{className:"h-9 w-9"}),(0,t.jsx)(r.Skeleton,{className:"h-9 w-24"}),(0,t.jsx)(r.Skeleton,{className:"h-9 w-32"})]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(r.Skeleton,{className:"h-10 w-full max-w-md"})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(r.Skeleton,{className:"h-24"},s))})}),(0,t.jsx)(r.Skeleton,{className:"h-64 mb-6"}),(0,t.jsx)(r.Skeleton,{className:"h-96"})]})])},294448,e=>{"use strict";var t=e.i(391398),r=e.i(191788),s=e.i(824216),n=e.i(46108),a=e.i(426119),i=e.i(45124),o=e.i(939310),l=e.i(296202),c=e.i(599875),d=e.i(17255),u=e.i(675878),m=e.i(430788),p=e.i(427534),f=e.i(891680),h=e.i(369547);let x=(0,h.default)("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),y=(0,h.default)("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var g=e.i(679935),j=e.i(563905),b=e.i(89635),w=e.i(924432),v=e.i(8745);let N=({product:e,onClose:i,onReconciled:h})=>{let{user:N}=(0,s.useAuth)(),{currentBusiness:S}=(0,n.useBusiness)(),{settings:C}=(0,j.useBusinessSettings)(),{canViewCostPrice:k,canViewSellingPrice:P,formatFinancial:R}=(0,b.useFinancialVisibility)(),[A,E]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1),[I,_]=(0,r.useState)(!0),[D,M]=(0,r.useState)({currentStock:0,openingStock:0,itemsSold:0,stockAdded:0,transferOut:0,returnIn:0,returnOut:0,adjustments:0,calculatedClosingStock:0,discrepancy:0,openingDate:null,excludedSalesQty:0,dailyBreakdown:[]}),[F,L]=(0,r.useState)(e.costPrice||0),[H,B]=(0,r.useState)(e.sellingPrice||0);(0,r.useEffect)(()=>{L(e.costPrice||0),B(e.sellingPrice||0)},[e.id,e.costPrice,e.sellingPrice]),(0,r.useEffect)(()=>{(async()=>{if(S?.id){_(!0);try{let t=await (0,w.getProductReconciliationAction)(S.id,e.id);t.success&&t.data?M(t.data):g.toast.error(t.error||"Failed to calculate reconciliation data")}catch(e){console.error("Error calculating reconciliation:",e),g.toast.error("An unexpected error occurred during reconciliation calculation")}finally{_(!1)}}})()},[S?.id,e.id]);let Q=D.currentStock*(e.costPrice||0),U=D.currentStock*(e.sellingPrice||0),q=D.calculatedClosingStock*F,$=D.calculatedClosingStock*H,z=q-Q,W=$-U,X=Math.abs(D.discrepancy)>.01,V=async()=>{if(N?.id&&S?.id){E(!0);try{if(await (0,v.updateProductAction)(e.id,{userId:N.id,quantity:D.calculatedClosingStock,costPrice:F,sellingPrice:H,customChangeReason:"Stock Reconciliation"}))g.toast.success(`Stock reconciled successfully! Corrected ${Math.abs(D.discrepancy).toFixed(2)} units.`),h(),i();else throw Error("Update failed")}catch(e){console.error("Error reconciling stock:",e),g.toast.error("Failed to reconcile stock. Please try again.")}finally{E(!1)}}};return(0,t.jsx)(l.Dialog,{open:!0,onOpenChange:i,children:(0,t.jsxs)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[X?(0,t.jsx)(u.AlertCircle,{className:"h-5 w-5 text-orange-500"}):(0,t.jsx)(m.CheckCircle,{className:"h-5 w-5 text-green-500"}),"Stock Reconciliation - ",e.name]}),(0,t.jsx)(l.DialogDescription,{children:"Review stock calculations and apply corrections if needed"})]}),I?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Loading reconciliation data..."})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Current Stock"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:D.currentStock.toFixed(2)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Calculated Stock"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:D.calculatedClosingStock.toFixed(2)})})]})]}),(0,t.jsxs)(a.Card,{className:"border-sales-primary/20 bg-sales-primary/5",children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)(a.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(f.TrendingUp,{className:"h-4 w-4 text-sales-primary"}),"Valuation & Price Adjustment"]})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[k&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Adjustment Cost Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:C.currency}),(0,t.jsx)("input",{type:"number",value:F,onChange:e=>L(Number(e.target.value)),className:"w-full pl-12 pr-4 py-2 bg-white border rounded-md text-sm focus:ring-2 focus:ring-sales-primary/20 outline-none transition-all"})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Affects Cost Value"})]}),P&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Adjustment Selling Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:C.currency}),(0,t.jsx)("input",{type:"number",value:H,onChange:e=>B(Number(e.target.value)),className:"w-full pl-12 pr-4 py-2 bg-white border rounded-md text-sm focus:ring-2 focus:ring-sales-primary/20 outline-none transition-all"})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Affects Stock Value"})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-sales-primary/10 grid grid-cols-2 gap-4",children:[k&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-white border shadow-sm",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase mb-1",children:"Cost Valuation Impact"}),(0,t.jsx)("div",{className:"flex items-end justify-between",children:(0,t.jsxs)("span",{className:`text-base font-bold ${z>=0?"text-emerald-600":"text-rose-600"}`,children:[z>=0?"+":"",R(z,"cost")]})})]}),P&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-white border shadow-sm",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase mb-1",children:"Stock Valuation Impact"}),(0,t.jsx)("div",{className:"flex items-end justify-between",children:(0,t.jsxs)("span",{className:`text-base font-bold ${W>=0?"text-violet-600":"text-rose-600"}`,children:[W>=0?"+":"",R(W,"selling")]})})]})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base",children:"Stock Calculation Summary"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Opening Stock"}),(0,t.jsx)("span",{className:"font-medium",children:D.openingStock.toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-red-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(p.TrendingDown,{className:"h-4 w-4"}),"Items Sold"]}),(0,t.jsxs)("span",{className:"font-medium",children:["- ",D.itemsSold.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-emerald-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(x,{className:"h-4 w-4"}),"Stock Added"]}),(0,t.jsxs)("span",{className:"font-medium",children:["+ ",D.stockAdded.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-orange-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(y,{className:"h-4 w-4"}),"Transfer Out"]}),(0,t.jsxs)("span",{className:"font-medium",children:["- ",D.transferOut.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-blue-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(x,{className:"h-4 w-4"}),"Return In"]}),(0,t.jsxs)("span",{className:"font-medium",children:["+ ",D.returnIn.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-purple-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(y,{className:"h-4 w-4"}),"Return Out"]}),(0,t.jsxs)("span",{className:"font-medium",children:["- ",D.returnOut.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-amber-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4"}),"Manual Adjustments"]}),(0,t.jsxs)("span",{className:"font-medium",children:[D.adjustments>0?"+":"",D.adjustments.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border-t pt-3 flex justify-between items-center font-semibold text-lg",children:[(0,t.jsx)("span",{children:"Calculated Closing Stock"}),(0,t.jsx)("span",{children:D.calculatedClosingStock.toFixed(2)})]}),X&&(0,t.jsxs)("div",{className:`border-t pt-3 flex justify-between items-center ${D.discrepancy>0?"text-green-600":"text-red-600"}`,children:[(0,t.jsx)("span",{className:"font-semibold",children:"Actual vs Calculated Discrepancy"}),(0,t.jsxs)(c.Badge,{variant:D.discrepancy>0?"default":"destructive",children:[D.discrepancy>0?"+":"",D.discrepancy.toFixed(2)," units"]})]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base",children:"Daily Breakdown"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)(d.ScrollArea,{className:"h-[300px] pr-4",children:(0,t.jsx)("div",{className:"space-y-3",children:0===D.dailyBreakdown.length?(0,t.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No transactions found for this product"}):D.dailyBreakdown.map((e,r)=>(0,t.jsxs)(a.Card,{className:"p-3 bg-slate-50",children:[(0,t.jsx)("div",{className:"font-semibold text-sm mb-2 text-slate-700",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,t.jsxs)("div",{className:"space-y-1.5 text-xs",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Starting Stock:"}),(0,t.jsx)("span",{className:"font-medium",children:e.startingStock.toFixed(2)})]}),e.itemsSold>0&&(0,t.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,t.jsx)("span",{children:"Items Sold:"}),(0,t.jsxs)("span",{className:"font-medium",children:["-",e.itemsSold.toFixed(2)]})]}),e.stockAdded>0&&(0,t.jsxs)("div",{className:"flex justify-between text-emerald-600",children:[(0,t.jsx)("span",{children:"Stock Added:"}),(0,t.jsxs)("span",{className:"font-medium",children:["+",e.stockAdded.toFixed(2)]})]}),e.transferOut>0&&(0,t.jsxs)("div",{className:"flex justify-between text-orange-600",children:[(0,t.jsx)("span",{children:"Transfer Out:"}),(0,t.jsxs)("span",{className:"font-medium",children:["-",e.transferOut.toFixed(2)]})]}),e.returnIn>0&&(0,t.jsxs)("div",{className:"flex justify-between text-blue-600",children:[(0,t.jsx)("span",{children:"Return In:"}),(0,t.jsxs)("span",{className:"font-medium",children:["+",e.returnIn.toFixed(2)]})]}),e.returnOut>0&&(0,t.jsxs)("div",{className:"flex justify-between text-purple-600",children:[(0,t.jsx)("span",{children:"Return Out:"}),(0,t.jsxs)("span",{className:"font-medium",children:["-",e.returnOut.toFixed(2)]})]}),0!==e.adjustments&&(0,t.jsxs)("div",{className:"flex justify-between text-amber-600",children:[(0,t.jsx)("span",{children:"Adjustments:"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.adjustments>0?"+":"",e.adjustments.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-1.5 border-t border-slate-200",children:[(0,t.jsx)("span",{className:"font-semibold text-slate-700",children:"Ending Stock:"}),(0,t.jsx)("span",{className:"font-bold text-slate-900",children:e.endingStock.toFixed(2)})]})]})]},r))})})})]}),X&&O&&(0,t.jsxs)(a.Card,{className:"bg-blue-50 border-blue-200",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base text-blue-900",children:"Preview Correction"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-blue-800",children:"Current (Recorded):"}),(0,t.jsxs)("span",{className:"font-medium text-blue-900",children:[D.currentStock.toFixed(2)," units"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-blue-800",children:"Calculated (History):"}),(0,t.jsxs)("span",{className:"font-medium text-blue-900",children:[D.calculatedClosingStock.toFixed(2)," units"]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-2 border-t border-blue-200",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"Correction Amount:"}),(0,t.jsxs)("span",{className:"font-semibold text-blue-900",children:[D.discrepancy>0?"+":"",Math.abs(D.discrepancy).toFixed(2)," units"]})]})]})]}),!X&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)(m.CheckCircle,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("p",{className:"text-sm text-green-800",children:"Stock levels are accurate based on transaction history."})]})]}),(0,t.jsxs)(l.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:i,children:"Cancel"}),X&&(0,t.jsx)(t.Fragment,{children:O?(0,t.jsx)(o.Button,{onClick:V,disabled:A,className:"bg-blue-600 hover:bg-blue-700",children:A?"Applying...":"Apply Correction"}):(0,t.jsx)(o.Button,{onClick:()=>T(!0),children:"Preview Correction"})})]})]})})};var S=e.i(606310),C=e.i(893930);let k=(0,h.default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var P=e.i(638822),R=e.i(626427),A=e.i(365713);e.s(["default",0,()=>{let{user:e}=(0,s.useAuth)(),m=(0,A.useNavigate)(),{currentBusiness:f,isLoading:h}=(0,n.useBusiness)(),{hasPermission:y,isLoading:j}=(0,P.useProfiles)(),[b,E]=(0,r.useState)(""),[O,T]=r.default.useState(null),[I,_]=(0,r.useState)(!1),[D,M]=(0,r.useState)(!1),[F,L]=(0,r.useState)(!1),[H,B]=(0,r.useState)([]),[Q,U]=(0,r.useState)(null),[q,$]=(0,r.useState)(!1),[z,W]=(0,r.useState)([]),[X,V]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(!1),{data:Z=[],isLoading:G}=(0,C.useQuery)({queryKey:["all-products-reconciliation",e?.id,f?.id],queryFn:async()=>e?.id&&f?.id?await (0,v.getAllProductsAction)(e.id,f.id):[],enabled:!!e?.id&&!!f?.id,staleTime:12e4}),J=(0,r.useMemo)(()=>{if(!b.trim())return[];let e=b.toLowerCase();return Z.filter(t=>t.name.toLowerCase().includes(e)||t.itemNumber?.toLowerCase().includes(e)||t.category?.toLowerCase().includes(e)||t.supplier?.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))},[Z,b]),ee=async()=>{if(f?.id){$(!0);try{let e=await (0,w.repairStockChainsAction)(f.id);if(e.success&&e.data){let{repaired:t,failed:r}=e.data;0===r?g.toast.success(`Stock chains repaired successfully for ${t} product(s).`):g.toast.warning(`Repaired ${t} product(s). ${r} failed.`)}}catch(e){console.error("Error repairing stock chains:",e),g.toast.error("Failed to repair stock chains.")}finally{$(!1),V(!1)}}},et=async()=>{if(f?.id){K(!0);try{let e=await (0,w.getStockRepairsPreviewAction)(f.id);e.success&&e.data&&(W(e.data),0===e.data.length?g.toast.success("No broken stock chains found!"):V(!0))}catch(e){console.error("Error previewing stock repairs:",e),g.toast.error("Failed to preview stock repairs.")}finally{K(!1)}}},er=async()=>{if(!f?.id)return;M(!0);let e=[];try{for(let t of Z){let r=await (0,w.getProductReconciliationAction)(f.id,t.id);r.success&&r.data&&Math.abs(r.data.discrepancy)>.01&&e.push(r.data)}B(e),L(!0)}catch(e){console.error("Error calculating preview:",e),g.toast.error("Failed to calculate reconciliation preview.")}finally{M(!1)}},es=async()=>{if(e?.id&&f?.id&&0!==H.length){_(!0);try{let t=0,r=0;for(let s of H)try{let r=await (0,w.createStockHistoryAction)({userId:e.id,locationId:f.id,productId:s.product.id,previousQuantity:s.currentStock,newQuantity:s.calculatedStock,changeReason:"Bulk Stock Reconciliation",createdAt:new Date().toISOString()});if(r.success)t++;else throw Error(r.error)}catch(e){r++,console.error(`Failed to reconcile ${s.product.name}:`,e)}g.toast.success(`Bulk reconciliation complete! Updated ${t} product(s).`),r>0&&g.toast.error(`${r} product(s) failed.`),L(!1),B([])}catch(e){console.error("Bulk reconciliation error:",e),g.toast.error("Failed to complete bulk reconciliation.")}finally{_(!1)}}};return h||j||!f?(0,t.jsx)(S.default,{}):y("inventory","stock_adjustment")?(0,t.jsxs)("div",{className:"p-2 md:p-6 space-y-4 md:space-y-6 max-w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-sales-dark",children:"Stock Reconciliation"}),(0,t.jsx)("p",{className:"text-sm md:text-base text-muted-foreground",children:"Select a product, preview the correction, then apply."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.Button,{onClick:et,disabled:q||Y||G||0===Z.length,variant:"outline",size:"lg",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4 mr-2"}),Y?"Scanning...":"Preview Repairs"]}),(0,t.jsxs)(o.Button,{onClick:ee,disabled:q||Y||G||0===Z.length,variant:"secondary",size:"lg",children:[(0,t.jsx)(k,{className:"h-4 w-4 mr-2"}),q?"Repairing...":"Quick Repair All"]}),(0,t.jsx)(o.Button,{onClick:er,disabled:D||G||0===Z.length,size:"lg",children:D?"Calculating...":"Reconcile All Products"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base",children:"Search Product"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-3",children:[(0,t.jsx)(i.Input,{placeholder:"Search by name, item number, category, or supplier",value:b,onChange:e=>E(e.target.value)}),b&&(0,t.jsx)("div",{className:"border rounded-md",children:(0,t.jsx)(d.ScrollArea,{className:"max-h-96",children:(0,t.jsxs)("ul",{className:"divide-y",children:[G&&(0,t.jsx)("li",{className:"p-3 text-sm text-muted-foreground",children:"Loading products..."}),!G&&0===J.length&&(0,t.jsx)("li",{className:"p-3 text-sm text-muted-foreground",children:"No matching products found"}),(!G&&J).map(e=>(0,t.jsxs)("li",{className:"p-3 hover:bg-muted/40 cursor-pointer",onClick:()=>T(e),children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.itemNumber?`Item: ${e.itemNumber}`:"","  Qty: ",e.quantity,"  Cat: ",e.category||""]})]},e.id))]})})})]})]}),O&&(0,t.jsx)(N,{product:O,onClose:()=>T(null),onReconciled:()=>T(null)}),(0,t.jsx)(l.Dialog,{open:F,onOpenChange:L,children:(0,t.jsxs)(l.DialogContent,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.AlertCircle,{className:"h-5 w-5 text-orange-500"}),"Bulk Reconciliation Preview"]}),(0,t.jsxs)(l.DialogDescription,{children:[H.length," product(s) with discrepancies found."]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Products to Update"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:H.length})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Total Adjustment"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[H.reduce((e,t)=>e+Math.abs(t.discrepancy),0).toFixed(2)," units"]})})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base",children:"Products with Discrepancies"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)(d.ScrollArea,{className:"h-[400px]",children:(0,t.jsx)("div",{className:"space-y-2",children:H.map(e=>(0,t.jsx)(a.Card,{className:"p-3 cursor-pointer hover:bg-muted/50",onClick:()=>U(e),children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-semibold",children:e.product.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.product.itemNumber&&`Item: ${e.product.itemNumber}`})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Current:"})," ",Number(e.currentStock).toFixed(2)]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Calculated:"})," ",Number(e.calculatedStock).toFixed(2)]}),(0,t.jsxs)(c.Badge,{variant:e.discrepancy>0?"default":"destructive",className:"mt-1",children:[e.discrepancy>0?"+":"",e.discrepancy.toFixed(2)]})]})]})},e.product.id))})})})]})]}),(0,t.jsxs)(l.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>L(!1),disabled:I,children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:es,disabled:I,children:I?"Applying...":`Apply Reconciliation (${H.length} products)`})]})]})}),Q&&(0,t.jsx)(l.Dialog,{open:!!Q,onOpenChange:()=>U(null),children:(0,t.jsxs)(l.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:Q.product.name}),(0,t.jsx)(l.DialogDescription,{children:"Detailed reconciliation breakdown"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Current Stock"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:Number(Q.currentStock).toFixed(2)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Calculated Stock"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:Number(Q.calculatedStock).toFixed(2)})})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-base",children:"Stock Calculation"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Opening Stock"}),(0,t.jsx)("span",{className:"font-medium",children:Number(Q.openingStock).toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(p.TrendingDown,{className:"h-4 w-4"})," Items Sold"]}),(0,t.jsxs)("span",{className:"font-medium",children:["-",Number(Q.itemsSold).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-emerald-600",children:[(0,t.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,t.jsx)(x,{className:"h-4 w-4"})," Stock Added"]}),(0,t.jsxs)("span",{className:"font-medium",children:["+",Number(Q.stockAdded).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border-t pt-3 flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Calculated Closing Stock"}),(0,t.jsx)("span",{children:Number(Q.calculatedStock).toFixed(2)})]})]})]})]}),(0,t.jsx)(l.DialogFooter,{children:(0,t.jsx)(o.Button,{onClick:()=>U(null),children:"Close"})})]})})]}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)(R.Alert,{variant:"destructive",children:[(0,t.jsx)(u.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(R.AlertTitle,{children:"Access Denied"}),(0,t.jsx)(R.AlertDescription,{children:"You do not have permission to access stock reconciliation."})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(o.Button,{onClick:()=>m("/inventory"),variant:"outline",children:"Back to Inventory"})})]})}],294448)},608421,(e,t,r)=>{let s="/StockReconciliationPage";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(294448)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/2edb2b394ba4d2db.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))}]);