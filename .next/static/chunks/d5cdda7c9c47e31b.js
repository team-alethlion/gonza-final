(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8745,(e,t,r)=>{let n=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw n.code="MODULE_UNPARSABLE",n},386408,e=>{"use strict";let t=(0,e.i(369547).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],386408)},486233,e=>{"use strict";var t,r,n,a,o=e.i(191788),s=e.i(730943),i=e.i(365713),c=e.i(912002);function l(){return(l=Object.assign.bind()).apply(this,arguments)}function u(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}let d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}o.startTransition,s.flushSync,o.useId;let f="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g=o.forwardRef(function(e,t){let r,{onClick:n,relative:a,reloadDocument:s,replace:u,state:g,target:h,to:y,preventScrollReset:m,viewTransition:x}=e,j=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,d),{basename:C}=o.useContext(i.UNSAFE_NavigationContext),v=!1;if("string"==typeof y&&p.test(y)&&(r=y,f))try{let e=new URL(window.location.href),t=new URL(y.startsWith("//")?e.protocol+y:y),r=(0,c.stripBasename)(t.pathname,C);t.origin===e.origin&&null!=r?y=r+t.search+t.hash:v=!0}catch(e){}let b=(0,i.useHref)(y,{relative:a}),P=function(e,t){let{target:r,replace:n,state:a,preventScrollReset:s,relative:l,viewTransition:u}=void 0===t?{}:t,d=(0,i.useNavigate)(),f=(0,i.useLocation)(),p=(0,i.useResolvedPath)(e,{relative:l});return o.useCallback(t=>{0!==t.button||r&&"_self"!==r||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),d(e,{replace:void 0!==n?n:(0,c.createPath)(f)===(0,c.createPath)(p),state:a,preventScrollReset:s,relative:l,viewTransition:u}))},[f,d,p,n,a,r,e,s,l,u])}(y,{replace:u,state:g,target:h,preventScrollReset:m,relative:a,viewTransition:x});return o.createElement("a",l({},j,{href:r||b,onClick:v||s?n:function(e){n&&n(e),e.defaultPrevented||P(e)},ref:t,target:h}))});function h(e){let t=o.useRef(u(e)),r=o.useRef(!1),n=(0,i.useLocation)(),a=o.useMemo(()=>{var e,a;let o;return e=n.search,a=r.current?null:t.current,o=u(e),a&&a.forEach((e,t)=>{o.has(t)||a.getAll(t).forEach(e=>{o.append(t,e)})}),o},[n.search]),s=(0,i.useNavigate)(),c=o.useCallback((e,t)=>{let n=u("function"==typeof e?e(a):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,c]}(t=n||(n={})).UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState",(r=a||(a={})).UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration";e.s(["Link",()=>g,"useSearchParams",()=>h])},737650,e=>{"use strict";var t=e.i(191788),r=e.i(150064),n=e.i(46108),a=e.i(8745);e.s(["useCategories",0,e=>{let[o,s]=(0,t.useState)([]),[i,c]=(0,t.useState)(!0),{toast:l}=(0,r.useToast)(),{currentBusiness:u}=(0,n.useBusiness)(),d=(0,t.useCallback)(async()=>{try{if(!u?.id){s([]),c(!1);return}c(!0);let e=await (0,a.getProductCategoriesAction)(u.id);if(!e.success||!e.data)throw Error(e.error||"Failed to fetch categories");let t=e.data.map(e=>({id:e.id,name:e.name,createdAt:e.createdAt?new Date(e.createdAt):e.created_at?new Date(e.created_at):void 0}));s(t)}catch(e){console.error("Error loading categories:",e),l({title:"Error",description:"Failed to load product categories.",variant:"destructive"})}finally{c(!1)}},[u?.id,l]);(0,t.useEffect)(()=>{d()},[d]);let f=async t=>{try{if(!e||!u?.id)return null;let r=o.find(e=>e.name.toLowerCase()===t.toLowerCase());if(r)return l({title:"Category exists",description:"This category already exists."}),r;let n=await (0,a.createProductCategoryAction)(u.id,e,t);if(!n.success||!n.data)throw Error(n.error);let i={id:n.data.id,name:n.data.name,createdAt:new Date(n.data.createdAt)};return s(e=>[...e,i]),l({title:"Success",description:"Category created successfully"}),i}catch(e){return console.error("Error creating category:",e),l({title:"Error",description:"Failed to create category.",variant:"destructive"}),null}},p=async(e,t)=>{try{if(o.find(r=>r.name.toLowerCase()===t.toLowerCase()&&r.id!==e))return l({title:"Category exists",description:"Another category with this name already exists."}),!1;let r=await (0,a.updateProductCategoryAction)(e,t);if(!r.success)throw Error(r.error);return s(r=>r.map(r=>r.id===e?{...r,name:t}:r)),l({title:"Success",description:"Category updated successfully"}),!0}catch(e){return console.error("Error updating category:",e),l({title:"Error",description:"Failed to update category.",variant:"destructive"}),!1}};return{categories:o,isLoading:i,loadCategories:d,createCategory:f,updateCategory:p,deleteCategory:async e=>{try{let t=await (0,a.deleteProductCategoryAction)(e);if(!t.success)return l({title:"Cannot delete category",description:t.error||"Failed to delete category.",variant:"destructive"}),!1;return s(t=>t.filter(t=>t.id!==e)),l({title:"Success",description:"Category deleted successfully"}),!0}catch(e){return console.error("Error deleting category:",e),l({title:"Error",description:"Failed to delete category.",variant:"destructive"}),!1}}}}])},681912,(e,t,r)=>{"use strict";var n=e.r(730943);r.createRoot=n.createRoot,r.hydrateRoot=n.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return n}});let n=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return m},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return C},NormalizeError:function(){return x},PageNotFoundError:function(){return j},SP:function(){return h},ST:function(){return y},WEB_VITALS:function(){return o},execOnce:function(){return s},getDisplayName:function(){return d},getLocationOrigin:function(){return l},getURL:function(){return u},isAbsoluteUrl:function(){return c},isResSent:function(){return f},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return b}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>i.test(e);function l(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=l();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="u">typeof performance,y=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class m extends Error{}class x extends Error{}class j extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class C extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AppRouterContext:function(){return s},GlobalLayoutRouterContext:function(){return c},LayoutRouterContext:function(){return i},MissingSlotContext:function(){return u},TemplateContext:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=e.r(741705)._(e.r(191788)),s=o.default.createContext(null),i=o.default.createContext(null),c=o.default.createContext(null),l=o.default.createContext(null),u=o.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return a}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={NavigationPromisesContext:function(){return u},PathParamsContext:function(){return l},PathnameContext:function(){return c},ReadonlyURLSearchParams:function(){return s.ReadonlyURLSearchParams},SearchParamsContext:function(){return i},createDevToolsInstrumentedPromise:function(){return d}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o=e.r(191788),s=e.r(531430),i=(0,o.createContext)(null),c=(0,o.createContext)(null),l=(0,o.createContext)(null),u=(0,o.createContext)(null);function d(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HTTPAccessErrorStatus:function(){return o},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return l},isHTTPAccessFallbackError:function(){return c}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let o={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},s=new Set(Object.values(o)),i="NEXT_HTTP_ERROR_FALLBACK";function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&s.has(Number(r))}function l(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return a}});var n,a=((n={})[n.SeeOther=303]="SeeOther",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a={REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return c},isRedirectError:function(){return l}};for(var o in a)Object.defineProperty(r,o,{enumerable:!0,get:a[o]});let s=e.r(40184),i="NEXT_REDIRECT";var c=((n={}).push="push",n.replace="replace",n);function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,a=t.slice(2,-2).join(";"),o=Number(t.at(-2));return r===i&&("replace"===n||"push"===n)&&"string"==typeof a&&!isNaN(o)&&o in s.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=e.r(991622),a=e.r(301939);function o(e){return(0,a.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},584890,e=>{"use strict";var t=e.i(391398),r=e.i(191788),n=e.i(365713),a=e.i(486233),o=e.i(939310),s=e.i(45124),i=e.i(386408),c=e.i(972733);let l=(0,e.i(369547).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var u=e.i(909289),d=e.i(824216),f=e.i(737650),p=e.i(426119),g=e.i(296202),h=e.i(212283),y=e.i(679935);e.s(["default",0,()=>{let e=(0,n.useNavigate)(),{user:m}=(0,d.useAuth)(),{categories:x,isLoading:j,createCategory:C,updateCategory:v,deleteCategory:b}=(0,f.useCategories)(m?.id),[P]=(0,a.useSearchParams)(),w=P.get("returnTo"),[_,E]=(0,r.useState)(""),[R,O]=(0,r.useState)(null),[N,S]=(0,r.useState)(""),[T,A]=(0,r.useState)(!1),D=async()=>{if(!_.trim())return void y.toast.error("Category name cannot be empty");A(!0);try{await C(_.trim())&&(y.toast.success("Category created successfully"),E(""))}finally{A(!1)}},k=async()=>{if(!R||!N.trim())return void y.toast.error("Category name cannot be empty");A(!0);try{await v(R,N.trim())&&(y.toast.success("Category updated successfully"),O(null),S(""))}finally{A(!1)}},M=async e=>{A(!0);try{await b(e)&&y.toast.success("Category deleted successfully")}finally{A(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{w?e(w):e("/products")},className:"flex items-center gap-1",children:[(0,t.jsx)(i.ArrowLeft,{className:"h-4 w-4"}),w?"Back to Product Form":"Back to Products"]})}),(0,t.jsx)("h1",{className:"text-2xl font-bold md:text-3xl text-sales-dark",children:"Categories"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your product categories"})]})}),(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center justify-between",children:["Add New Category",(0,t.jsxs)(g.Dialog,{children:[(0,t.jsx)(g.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Plus,{className:"h-4 w-4"}),"Add Category"]})}),(0,t.jsxs)(g.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Create New Category"}),(0,t.jsx)(g.DialogDescription,{children:"Enter a name for your new product category."})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(s.Input,{placeholder:"Enter category name",value:_,onChange:e=>E(e.target.value)})}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(g.DialogClose,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(o.Button,{onClick:D,disabled:!_.trim()||T,children:T?"Creating...":"Create Category"})]})]})]})]})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:'Create categories to organize your products better. Click "Add Category" to get started.'})})]}),x.length>0&&(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{children:["Existing Categories (",x.length,")"]})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>{var t,r;return t=e.id,r=e.name,void(O(t),S(r))},className:"flex items-center gap-1",children:[(0,t.jsx)(l,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)(h.AlertDialog,{children:[(0,t.jsx)(h.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-destructive hover:text-destructive",children:[(0,t.jsx)(u.Trash2,{className:"h-4 w-4"}),"Delete"]})}),(0,t.jsxs)(h.AlertDialogContent,{children:[(0,t.jsxs)(h.AlertDialogHeader,{children:[(0,t.jsx)(h.AlertDialogTitle,{children:"Delete Category"}),(0,t.jsxs)(h.AlertDialogDescription,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone. Products using this category will need to be reassigned.']})]}),(0,t.jsxs)(h.AlertDialogFooter,{children:[(0,t.jsx)(h.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(h.AlertDialogAction,{onClick:()=>M(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Category"})]})]})]})]})]},e.id))})})]}),null!==R&&(0,t.jsx)(g.Dialog,{open:null!==R,onOpenChange:e=>!e&&O(null),children:(0,t.jsxs)(g.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Edit Category"}),(0,t.jsx)(g.DialogDescription,{children:"Update the name of this category."})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(s.Input,{placeholder:"Enter category name",value:N,onChange:e=>S(e.target.value)})}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>O(null),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:k,disabled:!N.trim()||T,children:T?"Saving...":"Save Changes"})]})]})}),0===x.length&&!j&&(0,t.jsx)(p.Card,{children:(0,t.jsx)(p.CardContent,{className:"py-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No categories created yet. Create your first category to get started."})})})]})}],584890)},751675,(e,t,r)=>{let n="/Categories";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(584890)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/e9fd8bb0ca2bba1b.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))}]);