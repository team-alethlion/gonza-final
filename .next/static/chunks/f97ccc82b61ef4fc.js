(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8745,(e,t,r)=>{let a=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw a.code="MODULE_UNPARSABLE",a},355879,775778,e=>{"use strict";var t=e.i(191788),r=e.i(563905),a=e.i(46108),s=e.i(893930),n=e.i(285700);let i=e=>{let t=Object.keys(localStorage),r=["allProductsStats_","stockSummary_","soldItems_","dashboardData_","analyticsData_"],a=0;t.forEach(e=>{r.some(t=>e.startsWith(t))&&(localStorage.removeItem(e),a++)}),a>0&&console.log(`[Cache] Cleared ${a} inventory-related localStorage entries.`),e&&(console.log("[Cache] Invalidating React Query inventory keys..."),e.invalidateQueries({queryKey:["inventory_global_stats"]}),e.invalidateQueries({queryKey:["stockSummary"]}),e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["sales"]}),e.invalidateQueries({queryKey:["all-products-for-scanner"]}),e.invalidateQueries({queryKey:["all-products"]}))};e.s(["clearInventoryCaches",0,i],775778);var o=e.i(8745);e.s(["useProducts",0,(e,l=50)=>{let[u,c]=(0,t.useState)([]),[d,f]=(0,t.useState)(1),[p,h]=(0,t.useState)(l),[m,y]=(0,t.useState)(0),[g,x]=(0,t.useState)(!1),{settings:v}=(0,r.useBusinessSettings)(),{currentBusiness:b}=(0,a.useBusiness)(),j=(0,n.useQueryClient)(),[w,P]=(0,t.useState)({search:"",category:"all",stockStatus:"all"}),[N,S]=(0,t.useState)(null),_=(0,t.useCallback)(e=>{e.search!==w.search&&(x(!0),N&&clearTimeout(N),S(setTimeout(()=>{x(!1)},600))),P(e)},[w.search,N]),k=(0,t.useCallback)(async()=>{if(!e||!b)return{products:[],count:0};try{return await (0,o.getProductsAction)({userId:e,businessId:b.id,page:d,pageSize:p,search:w.search,category:"all"===w.category?void 0:w.category,stockStatus:w.stockStatus})}catch(e){return console.error("Error loading products from server action:",e),{products:[],count:0}}},[e,b?.id,d,p,w.search,w.category,w.stockStatus]),C=(0,t.useMemo)(()=>["products",e,b?.id],[e,b?.id]),R=(0,t.useMemo)(()=>[...C,d,p,w.search,w.category,w.stockStatus],[C,d,p,w.search,w.category,w.stockStatus]),{data:E,isLoading:O,isFetching:T,refetch:M}=(0,s.useQuery)({queryKey:R,queryFn:k,enabled:!!e&&!!b?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0});(0,t.useEffect)(()=>{E&&(c(E.products),y(E.count))},[E]);let A=async t=>{try{if(!e)return null;return console.warn("Image upload redirecting to server action (TODO)"),null}catch(e){return console.error("Error in uploadProductImage:",e),null}};return{products:u,isLoading:O&&!E&&!g,loadProducts:k,page:d,setPage:f,pageSize:p,setPageSize:h,totalCount:m,createProduct:async t=>{try{if(!e||!b)return null;let r=await (0,o.createProductAction)({...t,userId:e,businessId:b.id});if(!r)return null;return c(e=>[r,...e]),y(e=>e+1),j.invalidateQueries({queryKey:C}),i(j),r}catch(e){return console.error("Error creating product:",e),null}},updateProduct:async(t,r,a,s=!1,n,l,u,c)=>{try{if(!e||!b)return!1;let l=r.imageUrl;if(a&&(l=await A(a)),!await (0,o.updateProductAction)(t,{...r,imageUrl:l,userId:e,businessId:b.id,isFromSale:s,customChangeReason:n,referenceId:u}))return!1;return j.invalidateQueries({queryKey:C}),i(j),!0}catch(e){return console.error("Error updating product:",e),!1}},updateProductsBulk:async(t,r,a,s,n,l)=>{try{if(!e||!b)return!1;let r=await (0,o.updateProductsBulkAction)(t.map(e=>({id:e.id,updated:e.updated})),b.id);return r&&(j.invalidateQueries({queryKey:C}),i(j)),r}catch(e){return console.error("Error in bulk update:",e),!1}},deleteProduct:async t=>{try{if(!e)return!1;if(await (0,o.deleteProductAction)(t))return j.invalidateQueries({queryKey:C}),i(j),!0;return!1}catch(e){return console.error("Error deleting product:",e),!1}},uploadProductImage:A,refetch:M,isFetching:T,filters:w,setFilters:_}}],355879)},398957,e=>{"use strict";let t=(0,e.i(369547).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],398957)},486233,e=>{"use strict";var t,r,a,s,n=e.i(191788),i=e.i(730943),o=e.i(365713),l=e.i(912002);function u(){return(u=Object.assign.bind()).apply(this,arguments)}function c(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(e=>[r,e]):[[r,a]])},[]))}let d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}n.startTransition,i.flushSync,n.useId;let f="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h=n.forwardRef(function(e,t){let r,{onClick:a,relative:s,reloadDocument:i,replace:c,state:h,target:m,to:y,preventScrollReset:g,viewTransition:x}=e,v=function(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,d),{basename:b}=n.useContext(o.UNSAFE_NavigationContext),j=!1;if("string"==typeof y&&p.test(y)&&(r=y,f))try{let e=new URL(window.location.href),t=new URL(y.startsWith("//")?e.protocol+y:y),r=(0,l.stripBasename)(t.pathname,b);t.origin===e.origin&&null!=r?y=r+t.search+t.hash:j=!0}catch(e){}let w=(0,o.useHref)(y,{relative:s}),P=function(e,t){let{target:r,replace:a,state:s,preventScrollReset:i,relative:u,viewTransition:c}=void 0===t?{}:t,d=(0,o.useNavigate)(),f=(0,o.useLocation)(),p=(0,o.useResolvedPath)(e,{relative:u});return n.useCallback(t=>{0!==t.button||r&&"_self"!==r||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),d(e,{replace:void 0!==a?a:(0,l.createPath)(f)===(0,l.createPath)(p),state:s,preventScrollReset:i,relative:u,viewTransition:c}))},[f,d,p,a,s,r,e,i,u,c])}(y,{replace:c,state:h,target:m,preventScrollReset:g,relative:s,viewTransition:x});return n.createElement("a",u({},v,{href:r||w,onClick:j||i?a:function(e){a&&a(e),e.defaultPrevented||P(e)},ref:t,target:m}))});function m(e){let t=n.useRef(c(e)),r=n.useRef(!1),a=(0,o.useLocation)(),s=n.useMemo(()=>{var e,s;let n;return e=a.search,s=r.current?null:t.current,n=c(e),s&&s.forEach((e,t)=>{n.has(t)||s.getAll(t).forEach(e=>{n.append(t,e)})}),n},[a.search]),i=(0,o.useNavigate)(),l=n.useCallback((e,t)=>{let a=c("function"==typeof e?e(s):e);r.current=!0,i("?"+a,t)},[i,s]);return[s,l]}(t=a||(a={})).UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState",(r=s||(s={})).UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration";e.s(["Link",()=>h,"useSearchParams",()=>m])},108996,e=>{"use strict";let t=(0,e.i(369547).default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["Receipt",()=>t],108996)},646190,e=>{"use strict";var t=e.i(391398),r=e.i(353533);function a({className:e,...a}){return(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...a})}e.s(["Skeleton",()=>a])},312761,e=>{"use strict";let t=(0,e.i(369547).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],312761)},681912,(e,t,r)=>{"use strict";var a=e.r(730943);r.createRoot=a.createRoot,r.hydrateRoot=a.hydrateRoot},741705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},952456,(e,t,r)=>{"use strict";function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}},713584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return a}});let a=e.r(741705)._(e.r(191788)).default.createContext({})},894470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},889129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return b},NormalizeError:function(){return x},PageNotFoundError:function(){return v},SP:function(){return m},ST:function(){return y},WEB_VITALS:function(){return n},execOnce:function(){return i},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return w}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let m="u">typeof performance,y=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class x extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},701085,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return l},LayoutRouterContext:function(){return o},MissingSlotContext:function(){return c},TemplateContext:function(){return u}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(741705)._(e.r(191788)),i=n.default.createContext(null),o=n.default.createContext(null),l=n.default.createContext(null),u=n.default.createContext(null),c=n.default.createContext(new Set)},531430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return s}});class a extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new a}delete(){throw new a}set(){throw new a}sort(){throw new a}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},470008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={NavigationPromisesContext:function(){return c},PathParamsContext:function(){return u},PathnameContext:function(){return l},ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},SearchParamsContext:function(){return o},createDevToolsInstrumentedPromise:function(){return d}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(191788),i=e.r(531430),o=(0,n.createContext)(null),l=(0,n.createContext)(null),u=(0,n.createContext)(null),c=(0,n.createContext)(null);function d(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},991622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={HTTPAccessErrorStatus:function(){return n},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return o},getAccessFallbackErrorTypeByStatus:function(){return c},getAccessFallbackHTTPStatus:function(){return u},isHTTPAccessFallbackError:function(){return l}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(n)),o="NEXT_HTTP_ERROR_FALLBACK";function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===o&&i.has(Number(r))}function u(e){return Number(e.digest.split(";")[1])}function c(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},40184,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return s}});var a,s=((a={})[a.SeeOther=303]="SeeOther",a[a.TemporaryRedirect=307]="TemporaryRedirect",a[a.PermanentRedirect=308]="PermanentRedirect",a);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},301939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,s={REDIRECT_ERROR_CODE:function(){return o},RedirectType:function(){return l},isRedirectError:function(){return u}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=e.r(40184),o="NEXT_REDIRECT";var l=((a={}).push="push",a.replace="replace",a);function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,a]=t,s=t.slice(2,-2).join(";"),n=Number(t.at(-2));return r===o&&("replace"===a||"push"===a)&&"string"==typeof s&&!isNaN(n)&&n in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},68934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return n}});let a=e.r(991622),s=e.r(301939);function n(e){return(0,s.isRedirectError)(e)||(0,a.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},744720,181474,e=>{"use strict";var t=e.i(369547);let r=(0,t.default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);e.s(["Quote",()=>r],744720);let a=(0,t.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>a],181474)},301370,e=>{"use strict";var t=e.i(391398),r=e.i(191788),a=e.i(365713),s=e.i(638822),n=e.i(939310),i=e.i(398957),o=e.i(30691);let l=({onUpdate:e,isUpdating:r})=>{let a=(0,o.useIsMobile)();return(0,t.jsx)("div",{className:`${a?"mb-3":"mb-4"} w-full`,children:(0,t.jsxs)(n.Button,{onClick:e,disabled:r,className:`
          w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold
          ${a?"h-10 text-sm":"h-12 text-base"}
          transition-all duration-200 shadow-md hover:shadow-lg
          ${r?"opacity-75":""}
        `,children:[(0,t.jsx)(i.RefreshCw,{className:`${a?"h-4 w-4":"h-5 w-5"} mr-2 ${r?"animate-spin":""}`}),r?"UPDATING APP...":"NEW FEATURES AVAILABLE, UPDATE APP"]})})};var u=e.i(646190);let c=()=>(0,t.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Skeleton,{className:"h-6 md:h-8 w-32 md:w-48 mb-2"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(u.Skeleton,{className:"h-8 w-8 md:h-9 md:w-9"}),(0,t.jsx)(u.Skeleton,{className:"h-8 w-16 md:h-9 md:w-24"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-4 max-w-4xl",children:[void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(u.Skeleton,{className:"h-10 md:h-12"},r))}),(0,t.jsx)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[...Array(6)].map((e,r)=>(0,t.jsx)(u.Skeleton,{className:"h-24 md:h-32"},r))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"xl:col-span-2",children:(0,t.jsx)(u.Skeleton,{className:"h-64 md:h-80"})}),(0,t.jsx)("div",{className:"xl:col-span-1",children:(0,t.jsx)(u.Skeleton,{className:"h-64 md:h-80"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Skeleton,{className:"h-6 w-32"}),[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(u.Skeleton,{className:"h-12"},r))]})]});var d=e.i(972733);let f=({pageTitle:e,isRefreshing:r,isLoading:s,onRefresh:l})=>{let u=(0,a.useNavigate)(),c=(0,o.useIsMobile)();return(0,t.jsxs)("div",{className:`flex justify-between items-center ${c?"mb-4":"mb-6"}`,children:[(0,t.jsx)("h1",{className:`${c?"text-xl":"text-3xl"} font-bold text-sales-dark truncate`,children:e}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)(n.Button,{onClick:l,variant:"outline",size:c?"sm":"icon",disabled:r||s,className:"relative",title:"Update app for latest features and data",children:[(0,t.jsx)(i.RefreshCw,{className:`h-4 w-4 ${r?"animate-spin":""}`}),(0,t.jsx)("span",{className:"sr-only",children:"Update app"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1 hidden md:block",children:"Update App"})]}),(0,t.jsxs)(n.Button,{onClick:()=>u("/new-sale"),className:"gap-2",size:c?"sm":"default",children:[(0,t.jsx)(d.Plus,{size:16}),!c&&"New Sale"]})]})]})};var p=e.i(108996),h=e.i(576255),m=e.i(744720),y=e.i(312761);let g=({onQuickCreate:e})=>{let r=(0,o.useIsMobile)();return(0,t.jsx)("div",{className:`${r?"mb-4":"mb-6"}`,children:(0,t.jsxs)("div",{className:`grid ${r?"grid-cols-2 gap-2":"grid-cols-2 lg:grid-cols-4 gap-4"} max-w-4xl`,children:[(0,t.jsxs)(n.Button,{onClick:()=>e("Paid"),variant:"outline",className:`gap-2 ${r?"h-10 text-xs":"h-12"} justify-start`,children:[(0,t.jsx)(p.Receipt,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("span",{children:r?"Receipt":"Create Receipt"})]}),(0,t.jsxs)(n.Button,{onClick:()=>e("NOT PAID"),variant:"outline",className:`gap-2 ${r?"h-10 text-xs":"h-12"} justify-start`,children:[(0,t.jsx)(h.FileText,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)("span",{children:r?"Invoice":"Create Invoice"})]}),(0,t.jsxs)(n.Button,{onClick:()=>e("Installment Sale"),variant:"outline",className:`gap-2 ${r?"h-10 text-xs":"h-12"} justify-start`,children:[(0,t.jsx)(y.CreditCard,{className:"h-4 w-4 text-purple-600"}),(0,t.jsx)("span",{children:r?"Installment":"Create Installment Sale"})]}),(0,t.jsxs)(n.Button,{onClick:()=>e("Quote"),variant:"outline",className:`gap-2 ${r?"h-10 text-xs":"h-12"} justify-start`,children:[(0,t.jsx)(m.Quote,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{children:r?"Quote":"Create Quotation"})]})]})})};var x=e.i(486233),v=e.i(426119),b=e.i(181474);let j=()=>(0,t.jsxs)(v.Card,{className:"mb-6 border-primary/20 shadow-sm",children:[(0,t.jsxs)(v.CardHeader,{className:"pb-3",children:[(0,t.jsx)(v.CardTitle,{className:"text-xl text-sales-primary",children:"Setup Your Business Details First"}),(0,t.jsx)(v.CardDescription,{children:"Set up your business details to personalize your sales records and receipts"})]}),(0,t.jsx)(v.CardContent,{children:(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Adding your business name, contact information, and preferred currency will ensure your sales records and customer receipts display your correct business information."})}),(0,t.jsx)(v.CardFooter,{className:"flex justify-center",children:(0,t.jsx)(n.Button,{asChild:!0,variant:"secondary",className:"gap-2",children:(0,t.jsxs)(x.Link,{to:"/settings",children:[(0,t.jsx)(b.Settings,{size:16}),"Configure Settings"]})})})]}),w=()=>{let e=(0,a.useNavigate)(),r=(0,o.useIsMobile)();return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 lg:p-8 text-center",children:[(0,t.jsx)(j,{}),(0,t.jsx)("h2",{className:"text-lg md:text-xl lg:text-2xl font-semibold text-sales-primary mb-4",children:"Welcome to Your Sales Tracker"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 md:mb-6 lg:mb-8 max-w-lg mx-auto text-sm md:text-base",children:"Start by creating your first sale record. Once you have sales data, you'll see analytics and insights here on your dashboard."}),(0,t.jsxs)(n.Button,{onClick:()=>e("/new-sale"),size:r?"default":"lg",className:"gap-2",children:[(0,t.jsx)(d.Plus,{size:18})," Record Your First Sale"]})]})};var P=e.i(824216),N=e.i(46108),S=e.i(563905),_=e.i(852577),k=e.i(150064);let C=(0,r.lazy)(()=>e.A(539658));e.s(["default",0,()=>{let{hasPermission:e,isLoading:n}=(0,s.useProfiles)();(0,a.useNavigate)();let{businessError:i,settings:o,sales:u,pageTitle:d,nonQuoteSalesCount:p,isLoading:h,updateAvailable:m,isUpdating:y,triggerUpdate:x}=(()=>{let{user:e}=(0,P.useAuth)(),{isLoading:t,error:a,currentBusiness:s}=(0,N.useBusiness)(),{settings:n,isLoading:i}=(0,S.useBusinessSettings)(),{sales:o,isLoading:l}=(0,_.useSalesData)(e?.id,"desc"),{updateAvailable:u,isUpdating:c,triggerUpdate:d}=(()=>{let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t("true"===localStorage.getItem("app-update-available"));let e=e=>{e.data?.type==="UPDATE_AVAILABLE"&&(localStorage.setItem("app-update-available","true"),t(!0))};return navigator.serviceWorker?.addEventListener("message",e),()=>{navigator.serviceWorker?.removeEventListener("message",e)}},[]),{updateAvailable:e,isUpdating:a,triggerUpdate:async()=>{s(!0);try{if(localStorage.removeItem("app-update-available"),"caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}sessionStorage.clear(),setTimeout(()=>{window.location.reload()},500)}catch(e){console.error("Error during update:",e),s(!1),localStorage.setItem("app-update-available","true")}}}})(),f=(0,r.useMemo)(()=>n.businessName&&"Your Business Name"!==n.businessName?n.businessName:"Dashboard",[n.businessName]),p=(0,r.useMemo)(()=>o.length?o.filter(e=>"Quote"!==e.paymentStatus).length:0,[o]);return{user:e,businessError:a,currentBusiness:s,settings:n,sales:o,pageTitle:f,nonQuoteSalesCount:p,isLoading:(0,r.useMemo)(()=>l||i||t,[l,i,t]),updateAvailable:u,isUpdating:c,triggerUpdate:d}})(),{isRefreshing:v,handleRefresh:b,handleQuickCreate:j}=(()=>{let e=(0,a.useNavigate)(),{toast:t}=(0,k.useToast)(),[s,n]=(0,r.useState)(!1);return{isRefreshing:s,handleRefresh:(0,r.useCallback)(async()=>{n(!0),t({title:"Updating app",description:"Getting the latest updates and refreshing data..."});try{if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}sessionStorage.clear(),setTimeout(()=>{window.location.reload()},800)}catch(e){console.error("Error during app update:",e),n(!1),t({title:"Update failed",description:"There was an error updating the app. Please try again.",variant:"destructive"})}},[t]),handleQuickCreate:(0,r.useCallback)(t=>{e("/new-sale",{state:{defaultPaymentStatus:t}})},[e])}})();if(n||h)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});let R=!h&&0===p;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{pageTitle:d,isRefreshing:v,isLoading:h,onRefresh:b}),m&&(0,t.jsx)(l,{onUpdate:x,isUpdating:y}),(0,t.jsx)(g,{onQuickCreate:j}),R?(0,t.jsx)(w,{}):(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(c,{}),children:(0,t.jsx)(C,{sales:u,currency:o.currency})})]})}],301370)},311748,(e,t,r)=>{let a="/Index";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(301370)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},648761,e=>{e.v(t=>Promise.all(["static/chunks/2edb2b394ba4d2db.js"].map(t=>e.l(t))).then(()=>t(825455)))},828805,e=>{e.v(t=>Promise.all(["static/chunks/820c94ec438563d7.js"].map(t=>e.l(t))).then(()=>t(879466)))},539658,e=>{e.v(t=>Promise.all(["static/chunks/bfe1306c13926bef.js","static/chunks/71cbbf5cd8e9ccaa.js","static/chunks/9edaf80714fe4341.js","static/chunks/6fbd443d72537889.js","static/chunks/6889c301e37cf486.js","static/chunks/a8fa5229f0cdffd6.js","static/chunks/81a0ddc9f0c553fe.js","static/chunks/71bb82dbb85f575b.js"].map(t=>e.l(t))).then(()=>t(435782)))}]);