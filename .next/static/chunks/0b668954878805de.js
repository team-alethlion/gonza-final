(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,400267,e=>{"use strict";var t=e.i(843476),s=e.i(515288),i=e.i(793479),n=e.i(110204),a=e.i(519455),r=e.i(531278),l=e.i(846696),o=e.i(102594),d=e.i(271645),c=e.i(475254);let h=(0,c.default)("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),u=(0,c.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var m=e.i(63727),x=e.i(761911),p=e.i(967489),g=e.i(971984);let v=[{value:"1-5",label:"1–5 employees"},{value:"6-20",label:"6–20 employees"},{value:"21-50",label:"21–50 employees"},{value:"50+",label:"50+ employees"}],f=({settings:e,onSettingsChange:r,onLogoChange:o})=>{let{onboarding:c,saveOnboarding:f}=(0,g.useOnboarding)(),[y,j]=d.default.useState(c?.nature_of_business??""),[b,_]=d.default.useState(c?.business_size??""),[w,N]=d.default.useState(!1);d.default.useEffect(()=>{c&&(j(c.nature_of_business??""),_(c.business_size??""))},[c]);let C=async()=>{if(c){N(!0);try{await f({...c,nature_of_business:y||void 0,business_size:b||void 0,completed:c.completed}),l.toast.success("Business details updated")}catch{l.toast.error("Failed to update business details")}finally{N(!1)}}};return(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(s.CardTitle,{children:"Business Profile"})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"businessLogo",children:"Business Logo"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[e.businessLogo&&(0,t.jsx)("img",{src:e.businessLogo,alt:"Business Logo",className:"w-16 h-16 object-contain"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(i.Input,{id:"businessLogo",type:"file",accept:"image/*",onChange:o,className:"hidden"}),(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>document.getElementById("businessLogo")?.click(),className:"w-full",children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Upload Logo"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"currency",children:"Currency"}),(0,t.jsx)(i.Input,{id:"currency",name:"currency",value:e.currency,onChange:r,placeholder:"Enter your preferred currency (e.g., USD, EUR, GBP)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"defaultPrintFormat",children:"Default Receipt Format"}),(0,t.jsxs)(p.Select,{value:e.defaultPrintFormat||"standard",onValueChange:e=>r({target:{name:"defaultPrintFormat",value:e}}),children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select default receipt format"})}),(0,t.jsxs)(p.SelectContent,{children:[(0,t.jsx)(p.SelectItem,{value:"standard",children:"Standard Receipt (A4/Letter)"}),(0,t.jsx)(p.SelectItem,{value:"thermal",children:"Thermal Receipt"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose the default format for printing receipts. You can still switch formats when printing."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"businessName",children:"Business Name"}),(0,t.jsx)(i.Input,{id:"businessName",name:"businessName",value:e.businessName,onChange:r,placeholder:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"businessAddress",children:"Business Address"}),(0,t.jsx)(i.Input,{id:"businessAddress",name:"businessAddress",value:e.businessAddress,onChange:r,placeholder:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"businessPhone",children:"Business Phone"}),(0,t.jsx)(i.Input,{id:"businessPhone",name:"businessPhone",value:e.businessPhone,onChange:r,placeholder:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"businessEmail",children:"Business Email"}),(0,t.jsx)(i.Input,{id:"businessEmail",name:"businessEmail",value:e.businessEmail,onChange:r,type:"email",placeholder:""})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Additional Business Info"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(n.Label,{htmlFor:"natureOfBusiness",className:"flex items-center gap-2",children:[(0,t.jsx)(m.Briefcase,{className:"h-4 w-4 text-muted-foreground"}),"Nature of Business",(0,t.jsx)("span",{className:"text-muted-foreground text-xs font-normal",children:"(optional)"})]}),(0,t.jsx)(i.Input,{id:"natureOfBusiness",value:y,onChange:e=>j(e.target.value),placeholder:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(n.Label,{htmlFor:"businessSizeSettings",className:"flex items-center gap-2",children:[(0,t.jsx)(x.Users,{className:"h-4 w-4 text-muted-foreground"}),"Business Size",(0,t.jsx)("span",{className:"text-muted-foreground text-xs font-normal",children:"(optional)"})]}),(0,t.jsxs)(p.Select,{value:b,onValueChange:_,children:[(0,t.jsx)(p.SelectTrigger,{id:"businessSizeSettings",className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select number of employees"})}),(0,t.jsx)(p.SelectContent,{children:v.map(e=>(0,t.jsx)(p.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),c&&(0,t.jsx)(a.Button,{type:"button",variant:"outline",size:"sm",onClick:C,disabled:w,className:"w-full",children:w?"Saving...":"Save Nature & Size"})]})]})]})};var y=e.i(784774),j=e.i(107233),b=e.i(727612),_=e.i(561659);let w=({paymentMethods:e,onPaymentMethodChange:n,onAddPaymentMethod:r,onRemovePaymentMethod:l})=>(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_.CreditCard,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(s.CardTitle,{children:"Payment Information"})]}),(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:r,className:"text-xs",children:[(0,t.jsx)(j.Plus,{className:"mr-1 h-3 w-3"}),"Add Method"]})]})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"border rounded-md p-3",children:(0,t.jsxs)(y.Table,{className:"text-sm w-full",children:[(0,t.jsx)(y.TableHeader,{children:(0,t.jsxs)(y.TableRow,{className:"bg-gray-100",children:[(0,t.jsx)(y.TableHead,{className:"font-medium py-1 px-2 w-[30%] text-left",children:"Payment Method"}),(0,t.jsx)(y.TableHead,{className:"font-medium py-1 px-2 w-[30%] text-left",children:"Account Number"}),(0,t.jsx)(y.TableHead,{className:"font-medium py-1 px-2 text-left",children:"Account Name"}),(0,t.jsx)(y.TableHead,{className:"w-[50px]"})]})}),(0,t.jsx)(y.TableBody,{children:e.length>0?e.map((e,s)=>(0,t.jsxs)(y.TableRow,{className:"border-b border-gray-100",children:[(0,t.jsx)(y.TableCell,{className:"py-1 px-2",children:(0,t.jsx)(i.Input,{value:e.method,onChange:e=>n(s,"method",e.target.value),placeholder:"e.g., Bank Transfer",className:"w-full p-1 h-8 text-sm"})}),(0,t.jsx)(y.TableCell,{className:"py-1 px-2",children:(0,t.jsx)(i.Input,{value:e.accountNumber,onChange:e=>n(s,"accountNumber",e.target.value),placeholder:"e.g., 12345678",className:"w-full p-1 h-8 text-sm"})}),(0,t.jsx)(y.TableCell,{className:"py-1 px-2",children:(0,t.jsx)(i.Input,{value:e.accountName,onChange:e=>n(s,"accountName",e.target.value),placeholder:"e.g., John Doe",className:"w-full p-1 h-8 text-sm"})}),(0,t.jsx)(y.TableCell,{className:"py-1 px-2",children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>l(s),className:"h-6 w-6 text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,t.jsx)(b.Trash2,{className:"h-4 w-4"})})})]},`payment-${s}`)):(0,t.jsx)(y.TableRow,{children:(0,t.jsx)(y.TableCell,{colSpan:4,className:"text-center py-4 text-sm text-muted-foreground",children:'No payment methods added yet. Click "Add Method" to add one.'})})})]})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Enter payment information to display on receipts. Each row will appear in the payment information table on receipts. Leave empty if you don't want to show payment information."})]})]}),N=(0,c.default)("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]),C=(0,c.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var S=e.i(37727);let k=(0,c.default)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);var P=class{x;y;pressure;time;constructor(e,t,s,i){if(isNaN(e)||isNaN(t))throw Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=s||0,this.time=i||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}},E=class e{constructor(e,t,s,i,n,a){this.startPoint=e,this.control2=t,this.control1=s,this.endPoint=i,this.startWidth=n,this.endWidth=a}static fromPoints(t,s){let i=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new e(t[1],i,n,t[2],s.start,s.end)}static calculateControlPoints(e,t,s){let i=e.x-t.x,n=e.y-t.y,a=t.x-s.x,r=t.y-s.y,l={x:(e.x+t.x)/2,y:(e.y+t.y)/2},o={x:(t.x+s.x)/2,y:(t.y+s.y)/2},d=Math.sqrt(i*i+n*n),c=Math.sqrt(a*a+r*r),h=l.x-o.x,u=l.y-o.y,m=d+c==0?0:c/(d+c),x={x:o.x+h*m,y:o.y+u*m},p=t.x-x.x,g=t.y-x.y;return{c1:new P(l.x+p,l.y+g),c2:new P(o.x+p,o.y+g)}}length(){let e,t,s=0;for(let i=0;i<=10;i+=1){let n=i/10,a=this.point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this.point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){let i=a-e,n=r-t;s+=Math.sqrt(i*i+n*n)}e=a,t=r}return s}point(e,t,s,i,n){return t*(1-e)*(1-e)*(1-e)+3*s*(1-e)*(1-e)*e+3*i*(1-e)*e*e+n*e*e*e}},T=class{_et;constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(e,t,s){this._et.addEventListener(e,t,s)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,s){this._et.removeEventListener(e,t,s)}},M=class e extends T{constructor(t,s={}){super(),this.canvas=t,this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle=s.throttle??16,this.minDistance=s.minDistance??5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=s.compositeOperation||"source-over",this.canvasContextOptions=s.canvasContextOptions??{},this._strokeMoveUpdate=this.throttle?function(e,t=250){let s,i,n,a=0,r=null,l=()=>{a=Date.now(),r=null,s=e.apply(i,n),r||(i=null,n=[])};return function(...o){let d=Date.now(),c=t-(d-a);return i=this,n=o,c<=0||c>t?(r&&(clearTimeout(r),r=null),a=d,s=e.apply(i,n),r||(i=null,n=[])):r||(r=window.setTimeout(l,c)),s}}(e.prototype._strokeUpdate,this.throttle):e.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._handlePointerCancel=this._handlePointerCancel.bind(this),this._handleTouchCancel=this._handleTouchCancel.bind(this),this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}dotSize;minWidth;maxWidth;penColor;minDistance;velocityFilterWeight;compositeOperation;backgroundColor;throttle;canvasContextOptions;_ctx;_drawingStroke=!1;_isEmpty=!0;_dataUrl;_dataUrlOptions;_lastPoints=[];_data=[];_lastVelocity=0;_lastWidth=0;_strokeMoveUpdate;_strokePointerId;clear(){let{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._dataUrl=void 0,this._dataUrlOptions=void 0,this._strokePointerId=void 0}redraw(){let e=this._data,t=this._dataUrl,s=this._dataUrlOptions;this.clear(),t&&this.fromDataURL(t,s),this.fromData(e,{clear:!1})}fromDataURL(e,t={}){return new Promise((s,i)=>{let n=new Image,a=t.ratio||window.devicePixelRatio||1,r=t.width||this.canvas.width/a,l=t.height||this.canvas.height/a,o=t.xOffset||0,d=t.yOffset||0;this._reset(this._getPointGroupOptions()),n.onload=()=>{this._ctx.drawImage(n,o,d,r,l),s()},n.onerror=e=>{i(e)},n.crossOrigin="anonymous",n.src=e,this._isEmpty=!1,this._dataUrl=e,this._dataUrlOptions={...t}})}toDataURL(e="image/png",t){return"image/svg+xml"===e?("object"!=typeof t&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`):("number"!=typeof t&&(t=void 0),this.canvas.toDataURL(e,t))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none",this.canvas.style.webkitUserSelect="none";let e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.style.webkitUserSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){let e=window.document===this.canvas.ownerDocument?window:this.canvas.ownerDocument.defaultView??this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){let{removeEventListener:e}=this._getListenerFunctions();e("pointermove",this._handlePointerMove),e("pointerup",this._handlePointerUp),e("pointercancel",this._handlePointerCancel),e("mousemove",this._handleMouseMove),e("mouseup",this._handleMouseUp),e("touchmove",this._handleTouchMove),e("touchend",this._handleTouchEnd),e("touchcancel",this._handleTouchCancel)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_isLeftButtonPressed(e,t){return t?1===e.buttons:(1&e.buttons)==1}_pointerEventToSignatureEvent(e){return{event:e,type:e.type,x:e.clientX,y:e.clientY,pressure:"pressure"in e?e.pressure:0}}_touchEventToSignatureEvent(e){let t=e.changedTouches[0];return{event:e,type:e.type,x:t.clientX,y:t.clientY,pressure:t.force}}_handleMouseDown(e){this._isLeftButtonPressed(e,!0)&&!this._drawingStroke&&this._strokeBegin(this._pointerEventToSignatureEvent(e))}_handleMouseMove(e){this._isLeftButtonPressed(e,!0)&&this._drawingStroke?this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e)):this._strokeEnd(this._pointerEventToSignatureEvent(e),!1)}_handleMouseUp(e){this._isLeftButtonPressed(e)||this._strokeEnd(this._pointerEventToSignatureEvent(e))}_handleTouchStart(e){1!==e.targetTouches.length||this._drawingStroke||(e.cancelable&&e.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(e)))}_handleTouchMove(e){if(1===e.targetTouches.length){if(e.cancelable&&e.preventDefault(),!this._drawingStroke)return void this._strokeEnd(this._touchEventToSignatureEvent(e),!1);this._strokeMoveUpdate(this._touchEventToSignatureEvent(e))}}_handleTouchEnd(e){0===e.targetTouches.length&&(e.cancelable&&e.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(e)))}_handlePointerCancel(e){this._allowPointerId(e)&&(e.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(e),!1))}_handleTouchCancel(e){e.cancelable&&e.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(e),!1)}_getPointerId(e){return e.persistentDeviceId||e.pointerId}_allowPointerId(e,t=!1){return void 0===this._strokePointerId?t:this._getPointerId(e)===this._strokePointerId}_handlePointerDown(e){!this._drawingStroke&&this._isLeftButtonPressed(e)&&this._allowPointerId(e,!0)&&(this._strokePointerId=this._getPointerId(e),e.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(e)))}_handlePointerMove(e){if(this._allowPointerId(e)){if(!this._isLeftButtonPressed(e,!0)||!this._drawingStroke)return void this._strokeEnd(this._pointerEventToSignatureEvent(e),!1);e.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e))}}_handlePointerUp(e){!this._isLeftButtonPressed(e)&&this._allowPointerId(e)&&(e.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(e)))}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;let{addEventListener:t}=this._getListenerFunctions();switch(e.event.type){case"mousedown":t("mousemove",this._handleMouseMove,{passive:!1}),t("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":t("touchmove",this._handleTouchMove,{passive:!1}),t("touchend",this._handleTouchEnd,{passive:!1}),t("touchcancel",this._handleTouchCancel,{passive:!1});break;case"pointerdown":t("pointermove",this._handlePointerMove,{passive:!1}),t("pointerup",this._handlePointerUp,{passive:!1}),t("pointercancel",this._handlePointerCancel,{passive:!1})}this._drawingStroke=!0;let s=this._getPointGroupOptions(),i={...s,points:[]};this._data.push(i),this._reset(s),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(e);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));let t=this._createPoint(e.x,e.y,e.pressure),s=this._data[this._data.length-1],i=s.points,n=i.length>0&&i[i.length-1],a=!!n&&t.distanceTo(n)<=this.minDistance,r=this._getPointGroupOptions(s);if(!n||!(n&&a)){let e=this._addPoint(t,r);n?e&&this._drawCurve(e,r):this._drawDot(t,r),i.push({time:t.time,x:t.x,y:t.y,pressure:t.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e,t=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(t&&this._strokeUpdate(e),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,s){let i=this.canvas.getBoundingClientRect();return new P(e-i.left,t-i.top,s,new Date().getTime())}_addPoint(e,t){let{_lastPoints:s}=this;if(s.push(e),s.length>2){3===s.length&&s.unshift(s[0]);let e=this._calculateCurveWidths(s[1],s[2],t),i=E.fromPoints(s,e);return s.shift(),i}return null}_calculateCurveWidths(e,t,s){let i=s.velocityFilterWeight*t.velocityFrom(e)+(1-s.velocityFilterWeight)*this._lastVelocity,n=this._strokeWidth(i,s),a={end:n,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=n,a}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,s){let i=this._ctx;i.moveTo(e,t),i.arc(e,t,s,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){let s=this._ctx,i=e.endWidth-e.startWidth,n=2*Math.ceil(e.length());s.beginPath(),s.fillStyle=t.penColor;for(let s=0;s<n;s+=1){let a=s/n,r=a*a,l=r*a,o=1-a,d=o*o,c=d*o,h=c*e.startPoint.x;h+=3*d*a*e.control1.x+3*o*r*e.control2.x+l*e.endPoint.x;let u=c*e.startPoint.y;u+=3*d*a*e.control1.y+3*o*r*e.control2.y+l*e.endPoint.y;let m=Math.min(e.startWidth+l*i,t.maxWidth);this._drawCurveSegment(h,u,m)}s.closePath(),s.fill()}_drawDot(e,t){let s=this._ctx,i=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;s.beginPath(),this._drawCurveSegment(e.x,e.y,i),s.closePath(),s.fillStyle=t.penColor,s.fill()}_fromData(e,t,s){for(let i of e){let{points:e}=i,n=this._getPointGroupOptions(i);if(e.length>1)for(let s=0;s<e.length;s+=1){let i=e[s],a=new P(i.x,i.y,i.pressure,i.time);0===s&&this._reset(n);let r=this._addPoint(a,n);r&&t(r,n)}else this._reset(n),s(e[0],n)}}toSVG({includeBackgroundColor:e=!1,includeDataUrl:t=!1}={}){let s=this._data,i=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/i,a=this.canvas.height/i,r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("viewBox",`0 0 ${n} ${a}`),r.setAttribute("width",n.toString()),r.setAttribute("height",a.toString()),e&&this.backgroundColor){let e=document.createElement("rect");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("fill",this.backgroundColor),r.appendChild(e)}if(t&&this._dataUrl){let e=this._dataUrlOptions?.ratio||window.devicePixelRatio||1,t=this._dataUrlOptions?.width||this.canvas.width/e,s=this._dataUrlOptions?.height||this.canvas.height/e,i=this._dataUrlOptions?.xOffset||0,n=this._dataUrlOptions?.yOffset||0,a=document.createElement("image");a.setAttribute("x",i.toString()),a.setAttribute("y",n.toString()),a.setAttribute("width",t.toString()),a.setAttribute("height",s.toString()),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("href",this._dataUrl),r.appendChild(a)}return this._fromData(s,(e,{penColor:t})=>{let s=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){let i=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} ${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} ${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;s.setAttribute("d",i),s.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),s.setAttribute("stroke",t),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),r.appendChild(s)}},(e,{penColor:t,dotSize:s,minWidth:i,maxWidth:n})=>{let a=document.createElement("circle");a.setAttribute("r",(s>0?s:(i+n)/2).toString()),a.setAttribute("cx",e.x.toString()),a.setAttribute("cy",e.y.toString()),a.setAttribute("fill",t),r.appendChild(a)}),r.outerHTML}},D=e.i(356909),L=e.i(688511);let B=({onSave:e,existingSignature:i,className:n=""})=>{let r=(0,d.useRef)(null),l=(0,d.useRef)(null),[o,c]=(0,d.useState)(!1),[h,u]=(0,d.useState)(!i);(0,d.useEffect)(()=>{if(r.current&&h){l.current=new M(r.current,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)",minWidth:2,maxWidth:4,throttle:16,minDistance:5});let e=l.current,t=()=>c(!0),s=()=>c(!1);e.addEventListener("beginStroke",t),e.addEventListener("endStroke",s);let i=()=>{if(r.current){let t=r.current,s=t.parentElement;if(s){let i=s.getBoundingClientRect(),n=Math.max(window.devicePixelRatio||1,1);t.width=i.width*n,t.height=200*n,t.style.width=`${i.width}px`,t.style.height="200px";let a=t.getContext("2d");a&&a.scale(n,n),e.clear()}}};return i(),window.addEventListener("resize",i),()=>{e.removeEventListener("beginStroke",t),e.removeEventListener("endStroke",s),window.removeEventListener("resize",i),e.off()}}},[h]);let m=l.current&&!l.current.isEmpty();return!h&&i?(0,t.jsx)("div",{className:`space-y-4 ${n}`,children:(0,t.jsx)(s.Card,{className:"p-4",children:(0,t.jsx)(s.CardContent,{className:"p-0",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Signature:"}),(0,t.jsx)("div",{className:"border rounded-lg p-4 bg-white",children:(0,t.jsx)("img",{src:i,alt:"Current Signature",className:"max-h-24 mx-auto object-contain"})}),(0,t.jsxs)(a.Button,{onClick:()=>u(!0),variant:"outline",className:"w-full",children:[(0,t.jsx)(L.Edit,{className:"mr-2 h-4 w-4"}),"Replace Signature"]})]})})})}):(0,t.jsx)("div",{className:`space-y-4 ${n}`,children:(0,t.jsx)(s.Card,{className:"p-4",children:(0,t.jsx)(s.CardContent,{className:"p-0",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Draw your signature using your finger or stylus"})}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white relative overflow-hidden",children:[(0,t.jsx)("canvas",{ref:r,className:"w-full h-[200px] touch-none",style:{touchAction:"none"}}),!m&&!o&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Sign here"})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(a.Button,{onClick:()=>{l.current&&(l.current.clear(),c(!1))},variant:"outline",className:"flex-1",disabled:!m,children:[(0,t.jsx)(b.Trash2,{className:"mr-2 h-4 w-4"}),"Clear"]}),(0,t.jsxs)(a.Button,{onClick:()=>{l.current&&!l.current.isEmpty()&&(e(l.current.toDataURL("image/png",.8)),u(!1))},className:"flex-1",disabled:!m,children:[(0,t.jsx)(D.Save,{className:"mr-2 h-4 w-4"}),"Save Signature"]})]}),i&&(0,t.jsx)(a.Button,{onClick:()=>u(!1),variant:"ghost",className:"w-full",children:"Cancel"})]})})})})};var U=e.i(414877);let I=({signature:e,onChange:s,onRemove:r})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"signature",children:"Upload Signature Image"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&(0,t.jsxs)("div",{className:"relative border rounded bg-white p-2",children:[(0,t.jsx)("img",{src:e,alt:"Business Signature",className:"w-32 h-16 object-contain"}),(0,t.jsx)(a.Button,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:r,children:(0,t.jsx)(S.X,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(i.Input,{id:"signature",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{s(e.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>document.getElementById("signature")?.click(),className:"w-full",children:[(0,t.jsx)(N,{className:"mr-2 h-4 w-4"}),e?"Change Signature":"Upload Signature"]})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload an image of your signature to display on receipts and invoices, or remove it if you don't want to include it"})]}),A=({signature:e,onSignatureChange:i,onSignaturePadSave:a,onRemoveSignature:r})=>{let l=(0,U.useIsMobile)();return(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(s.CardTitle,{children:"Business Signature"})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[l&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(C,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(n.Label,{className:"text-sm font-medium text-blue-600",children:"Draw Your Signature"})]}),(0,t.jsx)(B,{onSave:a,existingSignature:e})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(I,{signature:e,onChange:i,onRemove:r})})]})]})};var F=e.i(98919),R=e.i(263488),W=e.i(679788),O=e.i(776639);let z=({onRequestDataDeletion:e})=>(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.Shield,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)(s.CardTitle,{children:"Privacy & Data"})]}),(0,t.jsx)(s.CardDescription,{children:"Manage your privacy settings and data"})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"Privacy Policy"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Review our privacy policy"})]}),(0,t.jsx)(a.Button,{variant:"outline",asChild:!0,children:(0,t.jsx)(W.Link,{to:"/privacy-policy",children:"View Policy"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"Delete My Data"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Request deletion of your personal information"})]}),(0,t.jsxs)(O.Dialog,{children:[(0,t.jsx)(O.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(a.Button,{variant:"outline",children:[(0,t.jsx)(R.Mail,{className:"mr-2 h-4 w-4"}),"Request Deletion"]})}),(0,t.jsxs)(O.DialogContent,{children:[(0,t.jsxs)(O.DialogHeader,{children:[(0,t.jsx)(O.DialogTitle,{children:"Request Data Deletion"}),(0,t.jsx)(O.DialogDescription,{children:"This will open your email client to send a request for data deletion. Our team will process your request and contact you for verification."})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,t.jsx)(O.DialogClose,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(a.Button,{onClick:e,children:"Proceed"})]})]})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"You can request deletion of your account and associated data at any time."})]})]});var $=e.i(160615),V=e.i(487486),q=e.i(440160),H=e.i(16715),G=e.i(303281),Y=e.i(778917),K=e.i(595468),X=e.i(63209),J=e.i(284765),Q=e.i(908406);let Z=()=>{let{toast:e}=(0,Q.useToast)(),{settings:i,updateSettings:l}=(0,$.useBusinessSettings)(),[o,c]=(0,d.useState)(!1),[h,u]=(0,d.useState)(null),[m,x]=(0,d.useState)([]),[g,v]=(0,d.useState)("checking"),f=async()=>{for(let e of["http://localhost:5000","http://127.0.0.1:5000"])try{let t=await fetch(`${e}/printers`,{signal:AbortSignal.timeout(3e3),mode:"cors"});if(t.ok){v("online");let e=await t.json();x(e||[]);return}}catch(e){}v("offline")};(0,d.useEffect)(()=>{f();let e=setInterval(f,1e4);return()=>clearInterval(e)},[]);let y=async()=>{c(!0);try{let t=await fetch("http://localhost:5000/printers");if(t.ok){let s=await t.json();x(s||[]),v("online"),e({title:"Scan complete",description:`Found ${s.length} printers.`})}else throw Error("Bridge offline")}catch(t){v("offline"),e({title:"Scan failed",description:"Could not connect to Printer Bridge. Make sure it is installed and running.",variant:"destructive"})}finally{c(!1)}},j=async t=>{u(t);try{await l({defaultPrinterName:t})&&e({title:"Default printer updated",description:`${t} is now your default printer.`})}finally{u(null)}};return(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.CardTitle,{className:"text-xl flex items-center gap-2",children:["Printer Bridge","online"===g?(0,t.jsx)(V.Badge,{variant:"success",className:"bg-green-500 hover:bg-green-600",children:"Connected"}):"offline"===g?(0,t.jsx)(V.Badge,{variant:"destructive",children:"Offline"}):(0,t.jsx)(V.Badge,{variant:"secondary",children:"Checking..."})]}),(0,t.jsx)(s.CardDescription,{children:"Connect to local thermal printers and barcode label printers."})]}),(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>{window.open("/PRINTER-BRIDGE-GUIDE.pdf","_blank")},className:"gap-2",children:[(0,t.jsx)(Y.ExternalLink,{className:"h-4 w-4"}),"Guide"]})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-muted/30 p-4 rounded-lg border border-dashed text-center",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Need the Printer Bridge app?"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Download and install our bridge service to enable high-speed local printing."}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,t.jsxs)(a.Button,{onClick:()=>{window.open("/PrinterBridge-Setup.zip","_blank")},className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(q.Download,{className:"h-4 w-4"}),"Download Printer Bridge"]}),(0,t.jsxs)(a.Button,{variant:"outline",className:"gap-2 border-blue-200 hover:bg-blue-50 hover:text-blue-700",onClick:()=>window.open("https://drive.google.com/drive/folders/1xWpU63y1tKVnTVF5ftNVyhL82oR_EjnG?usp=sharing","_blank"),children:[(0,t.jsx)(Y.ExternalLink,{className:"h-4 w-4"}),"Download Drivers"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-b pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(J.Settings2,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h4",{className:"font-semibold text-base",children:"Configuration"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"paper-size",children:"Thermal Paper Size"}),(0,t.jsxs)(p.Select,{value:i.printerPaperSize||"58mm",onValueChange:e=>l({printerPaperSize:e}),children:[(0,t.jsx)(p.SelectTrigger,{id:"paper-size",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select paper size"})}),(0,t.jsxs)(p.SelectContent,{children:[(0,t.jsx)(p.SelectItem,{value:"58mm",children:"58mm (Standard Receipt)"}),(0,t.jsx)(p.SelectItem,{value:"80mm",children:"80mm (Wide Receipt)"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"58mm aligns left. 80mm centers content."})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(n.Label,{className:"text-base font-semibold",children:"Connected Printers"}),(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:y,disabled:o,className:"gap-2",children:[(0,t.jsx)(H.RefreshCw,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Scan"]})]}),"offline"===g?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-md text-sm",children:[(0,t.jsx)(X.AlertCircle,{className:"h-4 w-4"}),"Bridge service is not responding."]}),(0,t.jsxs)("div",{className:"text-xs space-y-2 p-3 bg-muted rounded-md border",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Troubleshooting Steps:"}),(0,t.jsxs)("ol",{className:"list-decimal ml-4 space-y-1",children:[(0,t.jsx)("li",{children:'Ensure the Printer Bridge app is open and shows "Server running on port 5000".'}),(0,t.jsxs)("li",{children:["If using Chrome, try opening ",(0,t.jsx)("a",{href:"http://localhost:5000/printers",target:"_blank",className:"text-blue-600 underline",children:"this link"})," manually. If it works there but not here, it's a browser security block."]}),(0,t.jsx)("li",{children:"Try restarting the bridge app."})]})]})]}):0===m.length?(0,t.jsx)("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-md italic",children:"No printers found. Make sure your printers are turned on and connected to your computer."}):(0,t.jsx)("div",{className:"grid gap-2",children:m.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 border rounded-md ${i.defaultPrinterName===e.name?"bg-secondary/20 border-secondary":"bg-card"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(G.Printer,{className:`h-5 w-5 ${i.defaultPrinterName===e.name?"text-secondary":"text-muted-foreground"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[i.defaultPrinterName===e.name&&(0,t.jsxs)("p",{className:"text-xs text-secondary-foreground flex items-center gap-1",children:[(0,t.jsx)(K.CheckCircle2,{className:"h-3 w-3"})," Default"]}),e.status&&(0,t.jsx)(V.Badge,{variant:"outline",className:"text-[10px] h-4 px-1",children:e.status})]})]})]}),i.defaultPrinterName!==e.name&&(0,t.jsx)(a.Button,{variant:"outline",size:"icon",onClick:()=>j(e.name),disabled:null!==h,title:"Set Default",children:h===e.name?(0,t.jsx)(r.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(K.CheckCircle2,{className:"h-4 w-4"})})]},e.name))})]})]})]})};e.s(["default",0,()=>{let{user:e}=(0,o.useAuth)(),{localSettings:c,paymentMethods:h,loading:u,settingsLoading:m,handleBusinessChange:x,handleLogoChange:p,handleSignatureChange:g,handleSignaturePadSave:v,handleRemoveSignature:y,handlePaymentMethodChange:j,addPaymentMethod:b,removePaymentMethod:_,saveBusinessSettings:N}=(()=>{let{settings:e,isLoading:t,updateSettings:s}=(0,$.useBusinessSettings)(),[i,n]=(0,d.useState)(!1),[a,r]=(0,d.useState)(e),[o,c]=(0,d.useState)([]),[h,u]=(0,d.useState)(!1);(0,d.useEffect)(()=>{r(e),u(!1)},[e]),(0,d.useEffect)(()=>{h||(a.paymentInfo?c((0,$.parsePaymentInfo)(a.paymentInfo)):c([]),u(!0))},[a.paymentInfo,h]);let m=(0,d.useCallback)(e=>{let{name:t,value:s}=e.target;r(e=>({...e,[t]:s}))},[]),x=(0,d.useCallback)(e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{r(t=>({...t,businessLogo:e.result}))},e.readAsDataURL(t)}},[]),p=(0,d.useCallback)(e=>{r(t=>({...t,signature:e}))},[]),g=(0,d.useCallback)(async t=>{try{let i={...a,signature:t};r(i),await s(i)?l.toast.success("Business settings and signature saved successfully"):(r(t=>({...t,signature:e.signature})),l.toast.error("Failed to save signature"))}catch(t){console.error("Error saving signature:",t),r(t=>({...t,signature:e.signature})),l.toast.error("Failed to save signature")}},[s,e.signature,a]),v=(0,d.useCallback)(async()=>{try{r(e=>({...e,signature:void 0})),await s({signature:null})?l.toast.success("Business signature removed successfully"):(r(t=>({...t,signature:e.signature})),l.toast.error("Failed to remove signature"))}catch(t){console.error("Error removing signature:",t),r(t=>({...t,signature:e.signature})),l.toast.error("Failed to remove signature")}},[s,e.signature]),f=(0,d.useCallback)((e,t,s)=>{let i=[...o];i[e]={...i[e],[t]:s},c(i);let n=(0,$.convertPaymentMethodsToString)(i);r(e=>({...e,paymentInfo:n}))},[o]),y=(0,d.useCallback)(()=>{let e=[...o,{method:"",accountNumber:"",accountName:""}];c(e);let t=(0,$.convertPaymentMethodsToString)(e);r(e=>({...e,paymentInfo:t}))},[o]),j=(0,d.useCallback)(e=>{let t=[...o];t.splice(e,1),c(t);let s=(0,$.convertPaymentMethodsToString)(t);r(e=>({...e,paymentInfo:s}))},[o]),b=(0,d.useCallback)(async()=>{n(!0);try{await s(a)&&l.toast.success("Business settings saved successfully!")}catch(e){console.error("Error saving business settings:",e),l.toast.error("Failed to save business settings")}finally{n(!1)}},[a,s]);return{localSettings:a,paymentMethods:o,loading:i,settingsLoading:t,handleBusinessChange:m,handleLogoChange:x,handleSignatureChange:p,handleSignaturePadSave:g,handleRemoveSignature:v,handlePaymentMethodChange:f,addPaymentMethod:y,removePaymentMethod:j,saveBusinessSettings:b}})();return e?(0,t.jsx)("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:m?(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"flex justify-center py-8",children:(0,t.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{settings:c,onSettingsChange:x,onLogoChange:p}),(0,t.jsx)(A,{signature:c.signature,onSignatureChange:g,onSignaturePadSave:v,onRemoveSignature:y}),(0,t.jsx)(w,{paymentMethods:h,onPaymentMethodChange:j,onAddPaymentMethod:b,onRemovePaymentMethod:_}),(0,t.jsx)(Z,{}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"Account Information"})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"email",children:"Account Email Address"}),(0,t.jsx)(i.Input,{id:"email",value:e?.email||"",readOnly:!0,disabled:!0,className:"bg-muted"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,t.jsx)(a.Button,{onClick:N,className:"w-full",disabled:u,children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Business Settings"})]})]}),(0,t.jsx)(z,{onRequestDataDeletion:()=>{let t=encodeURIComponent(`Data Deletion Request - ${e?.email}`),s=encodeURIComponent(`Hello,

I would like to request deletion of all my data associated with the account ${e?.email}.

Thank you.`),i=`mailto:gonzabrands@gmail.com?subject=${t}&body=${s}`;window.location.href=i,l.toast.success("Email client opened for data deletion request")}})]})}):(0,t.jsx)("div",{className:"text-center py-8",children:"Please log in to access settings"})}],400267)}]);