(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,533538,e=>{"use strict";let t=(0,e.i(369547).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],533538)},708997,e=>{"use strict";let t=(0,e.i(369547).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],708997)},972733,e=>{"use strict";let t=(0,e.i(369547).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],972733)},909289,e=>{"use strict";let t=(0,e.i(369547).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],909289)},563905,901211,e=>{"use strict";var t=e.i(191788),r=e.i(893930),n=e.i(150064),a=e.i(46108),i=e.i(256680);async function o(e){try{let t=await i.db.branchSettings.findUnique({where:{branchId:e}});if(!t)return null;return{id:t.id,business_name:t.businessName,business_address:t.address,business_phone:t.phone,business_email:t.email,business_logo:t.logo,currency:t.currency,signature:t.signatureImage,metadata:t.metadata||{}}}catch(e){return console.error("Error fetching business settings:",e),null}}async function s(e,t,r){try{if(!await i.db.branch.findFirst({where:{id:e,OR:[{adminId:t},{users:{some:{id:t}}}]}}))return{success:!1,error:"Unauthorized to update branch settings"};let n={businessName:r.business_name,address:r.business_address,phone:r.business_phone,email:r.business_email,logo:r.business_logo,currency:r.currency,signatureImage:r.signature,metadata:r.metadata},a=await i.db.branchSettings.upsert({where:{branchId:e},update:n,create:{branchId:e,...n}});return{success:!0,data:{id:a.id,business_name:a.businessName,business_address:a.address,business_phone:a.phone,business_email:a.email,business_logo:a.logo,currency:a.currency,signature:a.signatureImage,metadata:a.metadata}}}catch(e){return console.error("Error upserting business settings:",e),{success:!1,error:e.message||"Failed to update settings"}}}async function u(e){try{let t=await i.db.user.findUnique({where:{id:e},select:{isFrozen:!0,createdAt:!0,subscriptions:{where:{status:"active"},orderBy:{endDate:"desc"},take:1},branches:{select:{id:!0}}}});if(!t)return null;let r=t.subscriptions[0],n=new Date,a=r?Math.ceil((r.endDate.getTime()-n.getTime())/864e5):0;return{is_frozen:t.isFrozen,location_limit:1,billing_amount:r?Number(r.amount):5e4,billing_duration:"Monthly",days_remaining:Math.max(0,a),next_billing_date:r?.endDate.toISOString()||""}}catch(e){return console.error("Error fetching account status:",e),{is_frozen:!1,location_limit:1,billing_amount:5e4,billing_duration:"Monthly",days_remaining:30,next_billing_date:""}}}async function l(e){try{let t=await i.db.branchSettings.findUnique({where:{branchId:e}});if(!t)return null;return{id:t.id,location_id:t.branchId,business_name:t.businessName,business_address:t.address,business_phone:t.phone,business_email:t.email,business_logo:t.logo,completed:!!t.businessName&&!!t.phone,is_frozen:!1}}catch(e){return console.error("Error fetching onboarding status:",e),null}}e.s(["getAccountStatusAction",()=>u,"getBusinessSettingsAction",()=>o,"getOnboardingStatusAction",()=>l,"upsertBusinessSettingsAction",()=>s],901211);let c=()=>({businessName:"",businessAddress:"",businessPhone:"",businessEmail:"",currency:"UGX",paymentInfo:"",defaultPrintFormat:"standard"});e.s(["parsePaymentInfo",0,e=>{if(!e||""===e.trim())return[];let t=e.split("\n").filter(e=>""!==e.trim()),r=[];for(let e=0;e<t.length;e+=3)e+2<t.length&&r.push({method:t[e].trim(),accountNumber:t[e+1].trim(),accountName:t[e+2].trim()});return r},"useBusinessSettings",0,()=>{let[e,i]=(0,t.useState)(c()),[u,l]=(0,t.useState)(!1),{toast:d}=(0,n.useToast)(),{currentBusiness:h}=(0,a.useBusiness)(),f=async()=>{if(!h)return c();try{let e=await o(h.id);if(!e)return c();{let t=e.metadata&&"object"==typeof e.metadata&&e.metadata.payment_info||"";return{id:e.id,businessName:e.business_name||"",businessAddress:e.business_address||"",businessPhone:e.business_phone||"",businessEmail:e.business_email||"",businessLogo:e.business_logo||void 0,currency:e.currency||"UGX",signature:e.signature||void 0,paymentInfo:t,defaultPrintFormat:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_print_format||"standard",defaultPrinterName:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_printer_name||"",defaultPrinterType:e.metadata&&"object"==typeof e.metadata&&e.metadata.default_printer_type||"USB",printerPaperSize:e.metadata&&"object"==typeof e.metadata&&e.metadata.printer_paper_size||"58mm"}}}catch(e){return console.error("Error loading business settings:",e),d({title:"Error",description:"Failed to load business settings. Please try again.",variant:"destructive"}),c()}},m=async t=>{if(!h)return console.error("No business selected for updating settings"),d({title:"Error",description:"No business selected",variant:"destructive"}),!1;try{let r={payment_info:t.hasOwnProperty("paymentInfo")?t.paymentInfo:e.paymentInfo||"",default_print_format:t.hasOwnProperty("defaultPrintFormat")?t.defaultPrintFormat:e.defaultPrintFormat||"standard",default_printer_name:t.hasOwnProperty("defaultPrinterName")?t.defaultPrinterName:e.defaultPrinterName||"",default_printer_type:t.hasOwnProperty("defaultPrinterType")?t.defaultPrinterType:e.defaultPrinterType||"USB",printer_paper_size:t.hasOwnProperty("printerPaperSize")?t.printerPaperSize:e.printerPaperSize||"58mm"},n={business_name:t.hasOwnProperty("businessName")?t.businessName:e.businessName,business_address:t.hasOwnProperty("businessAddress")?t.businessAddress:e.businessAddress,business_phone:t.hasOwnProperty("businessPhone")?t.businessPhone:e.businessPhone,business_email:t.hasOwnProperty("businessEmail")?t.businessEmail:e.businessEmail,business_logo:t.hasOwnProperty("businessLogo")?t.businessLogo:e.businessLogo,currency:t.hasOwnProperty("currency")?t.currency:e.currency,signature:t.hasOwnProperty("signature")?t.signature:e.signature,metadata:r},a=await s(h.id,"00000000-0000-0000-0000-000000000000",n);if(!a.success)throw console.error("Supabase error updating business settings:",a.error),Error(a.error);return d({title:"Success",description:"Business settings updated successfully"}),b(),!0}catch(e){return console.error("Error updating business settings:",e),d({title:"Error",description:"Failed to update business settings. Please try again.",variant:"destructive"}),!1}},{data:g,isLoading:p,isFetching:y,refetch:b}=(0,r.useQuery)({queryKey:["businessSettings",h?.id],queryFn:f,enabled:!!h?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return(0,t.useEffect)(()=>{g?i(g):h||i(c())},[g,h]),(0,t.useEffect)(()=>{l(p||y)},[p,y]),{settings:e,isLoading:u,updateSettings:m,loadSettings:f}}],563905)},550216,741913,e=>{"use strict";var t;let r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let a={date:n({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:n({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:n({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function o(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{let t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function s(e){return(t,r={})=>{let n,a=r.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;let s=o[0],u=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(u,e=>e.test(s)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(u,e=>e.test(s));return n=e.valueCallback?e.valueCallback(l):l,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}let u={code:"en-US",formatDistance:(e,t,n)=>{let a,i=r[e];if(a="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix)if(n.comparison&&n.comparison>0)return"in "+a;else return a+" ago";return a},formatLong:a,formatRelative:(e,t,r,n)=>i[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,r={})=>{let n=e.match(t.matchPattern);if(!n)return null;let a=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];return{value:o=r.valueCallback?r.valueCallback(o):o,rest:e.slice(a.length)}}),era:s({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:s({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:s({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:s({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:s({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};e.s(["enUS",0,u],741913),e.s(["defaultLocale",0,u],550216)},527861,e=>{"use strict";let t={};function r(){return t}e.s(["getDefaultOptions",()=>r])},98450,e=>{"use strict";var t=e.i(635113);function r(e){let r=(0,t.toDate)(e),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),e-n}e.s(["getTimezoneOffsetInMilliseconds",()=>r])},124323,e=>{"use strict";var t=e.i(498170);function r(e,...n){let a=t.constructFrom.bind(null,e||n.find(e=>"object"==typeof e));return n.map(a)}e.s(["normalizeDates",()=>r])},849543,e=>{"use strict";var t=e.i(635113);function r(e,r){let n=(0,t.toDate)(e,r?.in);return n.setHours(0,0,0,0),n}e.s(["startOfDay",()=>r])},782415,e=>{"use strict";var t=e.i(98450),r=e.i(124323),n=e.i(402848),a=e.i(849543);function i(e,i,o){let[s,u]=(0,r.normalizeDates)(o?.in,e,i),l=(0,a.startOfDay)(s),c=(0,a.startOfDay)(u);return Math.round((l-(0,t.getTimezoneOffsetInMilliseconds)(l)-(c-(0,t.getTimezoneOffsetInMilliseconds)(c)))/n.millisecondsInDay)}e.s(["differenceInCalendarDays",()=>i])},429557,e=>{"use strict";var t=e.i(635113);function r(e,r){let n=(0,t.toDate)(e,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}e.s(["startOfYear",()=>r])},319760,e=>{"use strict";var t=e.i(782415),r=e.i(429557),n=e.i(635113);function a(e,a){let i=(0,n.toDate)(e,a?.in);return(0,t.differenceInCalendarDays)(i,(0,r.startOfYear)(i))+1}e.s(["getDayOfYear",()=>a])},324906,e=>{"use strict";var t=e.i(527861),r=e.i(635113);function n(e,n){let a=(0,t.getDefaultOptions)(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=(0,r.toDate)(e,n?.in),s=o.getDay();return o.setDate(o.getDate()-(7*(s<i)+s-i)),o.setHours(0,0,0,0),o}e.s(["startOfWeek",()=>n])},792042,523611,201008,502111,784791,208781,655561,702369,e=>{"use strict";var t=e.i(550216),r=e.i(527861),n=e.i(319760),a=e.i(402848),i=e.i(324906);function o(e,t){return(0,i.startOfWeek)(e,{...t,weekStartsOn:1})}e.s(["startOfISOWeek",()=>o],523611);var s=e.i(498170),u=e.i(635113);function l(e,t){let r=(0,u.toDate)(e,t?.in),n=r.getFullYear(),a=(0,s.constructFrom)(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);let i=o(a),l=(0,s.constructFrom)(r,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);let c=o(l);return r.getTime()>=i.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function c(e,t){let r,n,i=(0,u.toDate)(e,t?.in);return Math.round((o(i)-(r=l(i,void 0),(n=(0,s.constructFrom)(i,0)).setFullYear(r,0,4),n.setHours(0,0,0,0),o(n)))/a.millisecondsInWeek)+1}function d(e,t){let n=(0,u.toDate)(e,t?.in),a=n.getFullYear(),o=(0,r.getDefaultOptions)(),l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=(0,s.constructFrom)(t?.in||e,0);c.setFullYear(a+1,0,l),c.setHours(0,0,0,0);let d=(0,i.startOfWeek)(c,t),h=(0,s.constructFrom)(t?.in||e,0);h.setFullYear(a,0,l),h.setHours(0,0,0,0);let f=(0,i.startOfWeek)(h,t);return+n>=+d?a+1:+n>=+f?a:a-1}function h(e,t){let n,o,l,c,h=(0,u.toDate)(e,t?.in);return Math.round(((0,i.startOfWeek)(h,t)-(n=(0,r.getDefaultOptions)(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=d(h,t),(c=(0,s.constructFrom)(t?.in||h,0)).setFullYear(l,0,o),c.setHours(0,0,0,0),(0,i.startOfWeek)(c,t)))/a.millisecondsInWeek)+1}function f(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}e.s(["getISOWeek",()=>c],201008),e.s(["getWeekYear",()=>d],502111),e.s(["getWeek",()=>h],784791);let m={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return f("yy"===t?n%100:n,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):f(r+1,2)},d:(e,t)=>f(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>f(e.getHours()%12||12,t.length),H:(e,t)=>f(e.getHours(),t.length),m:(e,t)=>f(e.getMinutes(),t.length),s:(e,t)=>f(e.getSeconds(),t.length),S(e,t){let r=t.length;return f(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},g={G:function(e,t,r){let n=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return m.y(e,t)},Y:function(e,t,r,n){let a=d(e,n),i=a>0?a:1-a;return"YY"===t?f(i%100,2):"Yo"===t?r.ordinalNumber(i,{unit:"year"}):f(i,t.length)},R:function(e,t){return f(l(e),t.length)},u:function(e,t){return f(e.getFullYear(),t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return f(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return f(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return m.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return f(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let a=h(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):f(a,t.length)},I:function(e,t,r){let n=c(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):f(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):m.d(e,t)},D:function(e,t,r){let a=(0,n.getDayOfYear)(e);return"Do"===t?r.ordinalNumber(a,{unit:"dayOfYear"}):f(a,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return f(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return f(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return f(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n,a=e.getHours();switch(n=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n,a=e.getHours();switch(n=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return m.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):m.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):f(n,t.length)},k:function(e,t,r){let n=e.getHours();return(0===n&&(n=24),"ko"===t)?r.ordinalNumber(n,{unit:"hour"}):f(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):m.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):m.s(e,t)},S:function(e,t){return m.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return y(n);case"XXXX":case"XX":return b(n);default:return b(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return y(n);case"xxxx":case"xx":return b(n);default:return b(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+p(n,":");default:return"GMT"+b(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+p(n,":");default:return"GMT"+b(n,":")}},t:function(e,t,r){return f(Math.trunc(e/1e3),t.length)},T:function(e,t,r){return f(+e,t.length)}};function p(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return 0===i?r+String(a):r+String(a)+t+f(i,2)}function y(e,t){return e%60==0?(e>0?"-":"+")+f(Math.abs(e)/60,2):b(e,t)}function b(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+f(Math.trunc(r/60),2)+t+f(r%60,2)}let w=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},v=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},x={p:v,P:(e,t)=>{let r,n=e.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return w(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",w(a,t)).replace("{{time}}",v(i,t))}};e.s(["longFormatters",0,x],208781);let k=/^D+$/,P=/^Y+$/,M=["D","DD","YY","YYYY"];function S(e){return k.test(e)}function _(e){return P.test(e)}function T(e,t,r){var n,a,i;let o,s=(n=e,a=t,i=r,o="Y"===n[0]?"years":"days of the month",`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${a}\`) for formatting ${o} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(s),M.includes(e))throw RangeError(s)}function O(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}e.s(["isProtectedDayOfYearToken",()=>S,"isProtectedWeekYearToken",()=>_,"warnOrThrowProtectedError",()=>T],655561),e.s(["isDate",()=>O],702369);let D=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,E=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C=/^'([^]*?)'?$/,W=/''/g,F=/[a-zA-Z]/;function N(e,n,a){let i=(0,r.getDefaultOptions)(),o=a?.locale??i.locale??t.defaultLocale,s=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,c=(0,u.toDate)(e,a?.in);if(!O(c)&&"number"!=typeof c||isNaN(+(0,u.toDate)(c)))throw RangeError("Invalid time value");let d=n.match(E).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,x[t])(e,o.formatLong):e}).join("").match(D).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(C))?t[1].replace(W,"'"):r}}if(g[t])return{isToken:!0,value:e};if(t.match(F))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});o.localize.preprocessor&&(d=o.localize.preprocessor(c,d));let h={firstWeekContainsDate:s,weekStartsOn:l,locale:o};return d.map(t=>{if(!t.isToken)return t.value;let r=t.value;return(!a?.useAdditionalWeekYearTokens&&_(r)||!a?.useAdditionalDayOfYearTokens&&S(r))&&T(r,n,String(e)),(0,g[r[0]])(c,r,o.localize,h)}).join("")}e.s(["format",()=>N],792042)},599875,e=>{"use strict";var t=e.i(391398),r=e.i(648684),n=e.i(353533);let a=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",warning:"border-transparent bg-amber-500 text-white hover:bg-amber-600",success:"border-transparent bg-green-600 text-white hover:bg-green-700"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...i}){return(0,t.jsx)("div",{className:(0,n.cn)(a({variant:r}),e),...i})}e.s(["Badge",()=>i])},89635,e=>{"use strict";var t=e.i(638822);e.s(["useFinancialVisibility",0,()=>{let{hasPermission:e}=(0,t.useProfiles)(),r=e("inventory","view_cost_price"),n=e("inventory","view_profit"),a=e("inventory","view_selling_price"),i=e("dashboard","view_total_sales"),o=e("dashboard","view_gross_profit"),s=e("dashboard","view_total_expenses"),u=e("dashboard","view_inventory_value"),l=e("dashboard","view_sales_types"),c=e("dashboard","view_avg_price"),d=e("dashboard","view_total_amount"),h=e("finance","manage_accounts"),f=e("finance","view"),m=e("expenses","view"),g=e("expenses","create"),p=e("expenses","edit");return{canViewCostPrice:r,canViewProfit:n,canViewSellingPrice:a,canViewTotalSales:i,canViewTotalGrossProfit:o,canViewTotalExpenses:s,canViewInventoryValue:u,canViewSalesTypes:l,canViewAvgPrice:c,canViewTotalAmount:d,canManageFinanceAccounts:h,canViewFinance:f,canViewExpenses:m,canCreateExpenses:g,canEditExpenses:p,canDeleteExpenses:e("expenses","delete"),formatFinancial:(e,t)=>"cost"===t&&r||"selling"===t&&a||"profit"===t&&n?e?.toLocaleString()||"0":"•••"}}])},569479,e=>{"use strict";let t;var r=e.i(391398),n=e.i(191788),a=e.i(671185),i=e.i(357006),o=e.i(479293),s=e.i(64899),u=e.i(64592),l=e.i(746359),c=(e.i(437767),e.i(993953)),d=e.i(674534),h=Symbol("radix.slottable"),f=e.i(55037),m=e.i(349577),[g,p]=(0,o.createContextScope)("Tooltip",[l.createPopperScope]),y=(0,l.createPopperScope)(),b="TooltipProvider",w="tooltip.open",[v,x]=g(b),k=e=>{let{__scopeTooltip:t,delayDuration:a=700,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:s}=e,u=n.useRef(!0),l=n.useRef(!1),c=n.useRef(0);return n.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,r.jsx)(v,{scope:t,isOpenDelayedRef:u,delayDuration:a,onOpen:n.useCallback(()=>{window.clearTimeout(c.current),u.current=!1},[]),onClose:n.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>u.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:n.useCallback(e=>{l.current=e},[]),disableHoverableContent:o,children:s})};k.displayName=b;var P="Tooltip",[M,S]=g(P),_=e=>{let{__scopeTooltip:t,children:a,open:i,defaultOpen:o,onOpenChange:s,disableHoverableContent:c,delayDuration:d}=e,h=x(P,e.__scopeTooltip),m=y(t),[g,p]=n.useState(null),b=(0,u.useId)(),v=n.useRef(0),k=c??h.disableHoverableContent,S=d??h.delayDuration,_=n.useRef(!1),[T,O]=(0,f.useControllableState)({prop:i,defaultProp:o??!1,onChange:e=>{e?(h.onOpen(),document.dispatchEvent(new CustomEvent(w))):h.onClose(),s?.(e)},caller:P}),D=n.useMemo(()=>T?_.current?"delayed-open":"instant-open":"closed",[T]),E=n.useCallback(()=>{window.clearTimeout(v.current),v.current=0,_.current=!1,O(!0)},[O]),C=n.useCallback(()=>{window.clearTimeout(v.current),v.current=0,O(!1)},[O]),W=n.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{_.current=!0,O(!0),v.current=0},S)},[S,O]);return n.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),(0,r.jsx)(l.Root,{...m,children:(0,r.jsx)(M,{scope:t,contentId:b,open:T,stateAttribute:D,trigger:g,onTriggerChange:p,onTriggerEnter:n.useCallback(()=>{h.isOpenDelayedRef.current?W():E()},[h.isOpenDelayedRef,W,E]),onTriggerLeave:n.useCallback(()=>{k?C():(window.clearTimeout(v.current),v.current=0)},[C,k]),onOpen:E,onClose:C,disableHoverableContent:k,children:a})})};_.displayName=P;var T="TooltipTrigger",O=n.forwardRef((e,t)=>{let{__scopeTooltip:o,...s}=e,u=S(T,o),c=x(T,o),h=y(o),f=n.useRef(null),m=(0,i.useComposedRefs)(t,f,u.onTriggerChange),g=n.useRef(!1),p=n.useRef(!1),b=n.useCallback(()=>g.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),(0,r.jsx)(l.Anchor,{asChild:!0,...h,children:(0,r.jsx)(d.Primitive.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...s,ref:m,onPointerMove:(0,a.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(p.current||c.isPointerInTransitRef.current||(u.onTriggerEnter(),p.current=!0))}),onPointerLeave:(0,a.composeEventHandlers)(e.onPointerLeave,()=>{u.onTriggerLeave(),p.current=!1}),onPointerDown:(0,a.composeEventHandlers)(e.onPointerDown,()=>{u.open&&u.onClose(),g.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{g.current||u.onOpen()}),onBlur:(0,a.composeEventHandlers)(e.onBlur,u.onClose),onClick:(0,a.composeEventHandlers)(e.onClick,u.onClose)})})});O.displayName=T;var[D,E]=g("TooltipPortal",{forceMount:void 0}),C="TooltipContent",W=n.forwardRef((e,t)=>{let n=E(C,e.__scopeTooltip),{forceMount:a=n.forceMount,side:i="top",...o}=e,s=S(C,e.__scopeTooltip);return(0,r.jsx)(c.Presence,{present:a||s.open,children:s.disableHoverableContent?(0,r.jsx)(j,{side:i,...o,ref:t}):(0,r.jsx)(F,{side:i,...o,ref:t})})}),F=n.forwardRef((e,t)=>{let a=S(C,e.__scopeTooltip),o=x(C,e.__scopeTooltip),s=n.useRef(null),u=(0,i.useComposedRefs)(t,s),[l,c]=n.useState(null),{trigger:d,onClose:h}=a,f=s.current,{onPointerInTransitChange:m}=o,g=n.useCallback(()=>{c(null),m(!1)},[m]),p=n.useCallback((e,t)=>{let r,n=e.currentTarget,a={x:e.clientX,y:e.clientY},i=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(a,n.getBoundingClientRect());c(((r=[...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(a,i),...function(e){let{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),m(!0)},[m]);return n.useEffect(()=>()=>g(),[g]),n.useEffect(()=>{if(d&&f){let e=e=>p(e,f),t=e=>p(e,d);return d.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[d,f,p,g]),n.useEffect(()=>{if(l){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=d?.contains(t)||f?.contains(t),a=!function(e,t){let{x:r,y:n}=e,a=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let o=t[e],s=t[i],u=o.x,l=o.y,c=s.x,d=s.y;l>n!=d>n&&r<(c-u)*(n-l)/(d-l)+u&&(a=!a)}return a}(r,l);n?g():a&&(g(),h())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,f,l,h,g]),(0,r.jsx)(j,{...e,ref:u})}),[N,q]=g(P,{isInside:!1}),L=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=h,t),j=n.forwardRef((e,t)=>{let{__scopeTooltip:a,children:i,"aria-label":o,onEscapeKeyDown:u,onPointerDownOutside:c,...d}=e,h=S(C,a),f=y(a),{onClose:g}=h;return n.useEffect(()=>(document.addEventListener(w,g),()=>document.removeEventListener(w,g)),[g]),n.useEffect(()=>{if(h.trigger){let e=e=>{let t=e.target;t?.contains(h.trigger)&&g()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[h.trigger,g]),(0,r.jsx)(s.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:g,children:(0,r.jsxs)(l.Content,{"data-state":h.stateAttribute,...f,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,r.jsx)(L,{children:i}),(0,r.jsx)(N,{scope:a,isInside:!0,children:(0,r.jsx)(m.Root,{id:h.contentId,role:"tooltip",children:o||i})})]})})});W.displayName=C;var I="TooltipArrow";n.forwardRef((e,t)=>{let{__scopeTooltip:n,...a}=e,i=y(n);return q(I,n).isInside?null:(0,r.jsx)(l.Arrow,{...i,...a,ref:t})}).displayName=I;var Y=e.i(353533);let z=n.forwardRef(({className:e,sideOffset:t=4,...n},a)=>(0,r.jsx)(W,{ref:a,sideOffset:t,className:(0,Y.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));z.displayName=W.displayName,e.s(["Tooltip",()=>_,"TooltipContent",()=>z,"TooltipProvider",()=>k,"TooltipTrigger",()=>O],569479)},641405,e=>{"use strict";let t=(0,e.i(369547).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],641405)},8745,(e,t,r)=>{let n=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw n.code="MODULE_UNPARSABLE",n},355879,775778,e=>{"use strict";var t=e.i(191788),r=e.i(563905),n=e.i(46108),a=e.i(893930),i=e.i(285700);let o=e=>{let t=Object.keys(localStorage),r=["allProductsStats_","stockSummary_","soldItems_","dashboardData_","analyticsData_"],n=0;t.forEach(e=>{r.some(t=>e.startsWith(t))&&(localStorage.removeItem(e),n++)}),n>0&&console.log(`[Cache] Cleared ${n} inventory-related localStorage entries.`),e&&(console.log("[Cache] Invalidating React Query inventory keys..."),e.invalidateQueries({queryKey:["inventory_global_stats"]}),e.invalidateQueries({queryKey:["stockSummary"]}),e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["sales"]}),e.invalidateQueries({queryKey:["all-products-for-scanner"]}),e.invalidateQueries({queryKey:["all-products"]}))};e.s(["clearInventoryCaches",0,o],775778);var s=e.i(8745);e.s(["useProducts",0,(e,u=50)=>{let[l,c]=(0,t.useState)([]),[d,h]=(0,t.useState)(1),[f,m]=(0,t.useState)(u),[g,p]=(0,t.useState)(0),[y,b]=(0,t.useState)(!1),{settings:w}=(0,r.useBusinessSettings)(),{currentBusiness:v}=(0,n.useBusiness)(),x=(0,i.useQueryClient)(),[k,P]=(0,t.useState)({search:"",category:"all",stockStatus:"all"}),[M,S]=(0,t.useState)(null),_=(0,t.useCallback)(e=>{e.search!==k.search&&(b(!0),M&&clearTimeout(M),S(setTimeout(()=>{b(!1)},600))),P(e)},[k.search,M]),T=(0,t.useCallback)(async()=>{if(!e||!v)return{products:[],count:0};try{return await (0,s.getProductsAction)({userId:e,businessId:v.id,page:d,pageSize:f,search:k.search,category:"all"===k.category?void 0:k.category,stockStatus:k.stockStatus})}catch(e){return console.error("Error loading products from server action:",e),{products:[],count:0}}},[e,v?.id,d,f,k.search,k.category,k.stockStatus]),O=(0,t.useMemo)(()=>["products",e,v?.id],[e,v?.id]),D=(0,t.useMemo)(()=>[...O,d,f,k.search,k.category,k.stockStatus],[O,d,f,k.search,k.category,k.stockStatus]),{data:E,isLoading:C,isFetching:W,refetch:F}=(0,a.useQuery)({queryKey:D,queryFn:T,enabled:!!e&&!!v?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0});(0,t.useEffect)(()=>{E&&(c(E.products),p(E.count))},[E]);let N=async t=>{try{if(!e)return null;return console.warn("Image upload redirecting to server action (TODO)"),null}catch(e){return console.error("Error in uploadProductImage:",e),null}};return{products:l,isLoading:C&&!E&&!y,loadProducts:T,page:d,setPage:h,pageSize:f,setPageSize:m,totalCount:g,createProduct:async t=>{try{if(!e||!v)return null;let r=await (0,s.createProductAction)({...t,userId:e,businessId:v.id});if(!r)return null;return c(e=>[r,...e]),p(e=>e+1),x.invalidateQueries({queryKey:O}),o(x),r}catch(e){return console.error("Error creating product:",e),null}},updateProduct:async(t,r,n,a=!1,i,u,l,c)=>{try{if(!e||!v)return!1;let u=r.imageUrl;if(n&&(u=await N(n)),!await (0,s.updateProductAction)(t,{...r,imageUrl:u,userId:e,businessId:v.id,isFromSale:a,customChangeReason:i,referenceId:l}))return!1;return x.invalidateQueries({queryKey:O}),o(x),!0}catch(e){return console.error("Error updating product:",e),!1}},updateProductsBulk:async(t,r,n,a,i,u)=>{try{if(!e||!v)return!1;let r=await (0,s.updateProductsBulkAction)(t.map(e=>({id:e.id,updated:e.updated})),v.id);return r&&(x.invalidateQueries({queryKey:O}),o(x)),r}catch(e){return console.error("Error in bulk update:",e),!1}},deleteProduct:async t=>{try{if(!e)return!1;if(await (0,s.deleteProductAction)(t))return x.invalidateQueries({queryKey:O}),o(x),!0;return!1}catch(e){return console.error("Error deleting product:",e),!1}},uploadProductImage:N,refetch:F,isFetching:W,filters:k,setFilters:_}}],355879)},398957,e=>{"use strict";let t=(0,e.i(369547).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],398957)},985294,e=>{"use strict";let t=(0,e.i(369547).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],985294)},457541,e=>{"use strict";let t=(0,e.i(369547).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],457541)},469757,e=>{"use strict";let t=(0,e.i(369547).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],469757)}]);