{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/app/actions/business-settings.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getBusinessSettingsAction(branchId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId }\r\n        });\r\n\r\n        if (!settings) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            id: settings.id,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            currency: settings.currency,\r\n            signature: settings.signatureImage,\r\n            metadata: settings.metadata || {}\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching business settings:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function upsertBusinessSettingsAction(branchId: string, userId: string, updateData: any) {\r\n    try {\r\n        // Validate user access to branch\r\n        const branch = await db.branch.findFirst({\r\n            where: {\r\n                id: branchId,\r\n                OR: [\r\n                    { adminId: userId },\r\n                    { users: { some: { id: userId } } }\r\n                ]\r\n            }\r\n        });\r\n\r\n        if (!branch) {\r\n            return { success: false, error: 'Unauthorized to update branch settings' };\r\n        }\r\n\r\n        const data = {\r\n            businessName: updateData.business_name,\r\n            address: updateData.business_address,\r\n            phone: updateData.business_phone,\r\n            email: updateData.business_email,\r\n            logo: updateData.business_logo,\r\n            currency: updateData.currency,\r\n            signatureImage: updateData.signature,\r\n            metadata: updateData.metadata\r\n        };\r\n\r\n        const upserted = await db.branchSettings.upsert({\r\n            where: { branchId: branchId },\r\n            update: data,\r\n            create: {\r\n                branchId: branchId,\r\n                ...data\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: upserted.id,\r\n                business_name: upserted.businessName,\r\n                business_address: upserted.address,\r\n                business_phone: upserted.phone,\r\n                business_email: upserted.email,\r\n                business_logo: upserted.logo,\r\n                currency: upserted.currency,\r\n                signature: upserted.signatureImage,\r\n                metadata: upserted.metadata\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error upserting business settings:', error);\r\n        return { success: false, error: error.message || 'Failed to update settings' };\r\n    }\r\n}\r\n\r\nexport async function getAccountStatusAction(userId: string) {\r\n    try {\r\n        const user = await db.user.findUnique({\r\n            where: { id: userId },\r\n            select: {\r\n                isFrozen: true,\r\n                createdAt: true,\r\n                subscriptions: {\r\n                    where: { status: 'active' },\r\n                    orderBy: { endDate: 'desc' },\r\n                    take: 1\r\n                },\r\n                branches: {\r\n                    select: { id: true }\r\n                }\r\n            }\r\n        });\r\n\r\n        if (!user) return null;\r\n\r\n        const activeSub = user.subscriptions[0];\r\n        const now = new Date();\r\n        const daysRemaining = activeSub ? Math.ceil((activeSub.endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)) : 0;\r\n\r\n        return {\r\n            is_frozen: user.isFrozen,\r\n            location_limit: 1, // Traditional limit or from subscription\r\n            billing_amount: activeSub ? Number(activeSub.amount) : 50000,\r\n            billing_duration: 'Monthly',\r\n            days_remaining: Math.max(0, daysRemaining),\r\n            next_billing_date: activeSub?.endDate.toISOString() || ''\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching account status:', error);\r\n        return { is_frozen: false, location_limit: 1, billing_amount: 50000, billing_duration: 'Monthly', days_remaining: 30, next_billing_date: '' };\r\n    }\r\n}\r\n\r\nexport async function getOnboardingStatusAction(locationId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId: locationId }\r\n        });\r\n\r\n        if (!settings) return null;\r\n\r\n        return {\r\n            id: settings.id,\r\n            location_id: settings.branchId,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            completed: !!settings.businessName && !!settings.phone, // Simplified completion check\r\n            is_frozen: false // Should come from branch or user status\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching onboarding status:', error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,6DAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/app/actions/business-settings.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getBusinessSettingsAction(branchId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId }\r\n        });\r\n\r\n        if (!settings) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            id: settings.id,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            currency: settings.currency,\r\n            signature: settings.signatureImage,\r\n            metadata: settings.metadata || {}\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching business settings:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function upsertBusinessSettingsAction(branchId: string, userId: string, updateData: any) {\r\n    try {\r\n        // Validate user access to branch\r\n        const branch = await db.branch.findFirst({\r\n            where: {\r\n                id: branchId,\r\n                OR: [\r\n                    { adminId: userId },\r\n                    { users: { some: { id: userId } } }\r\n                ]\r\n            }\r\n        });\r\n\r\n        if (!branch) {\r\n            return { success: false, error: 'Unauthorized to update branch settings' };\r\n        }\r\n\r\n        const data = {\r\n            businessName: updateData.business_name,\r\n            address: updateData.business_address,\r\n            phone: updateData.business_phone,\r\n            email: updateData.business_email,\r\n            logo: updateData.business_logo,\r\n            currency: updateData.currency,\r\n            signatureImage: updateData.signature,\r\n            metadata: updateData.metadata\r\n        };\r\n\r\n        const upserted = await db.branchSettings.upsert({\r\n            where: { branchId: branchId },\r\n            update: data,\r\n            create: {\r\n                branchId: branchId,\r\n                ...data\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: upserted.id,\r\n                business_name: upserted.businessName,\r\n                business_address: upserted.address,\r\n                business_phone: upserted.phone,\r\n                business_email: upserted.email,\r\n                business_logo: upserted.logo,\r\n                currency: upserted.currency,\r\n                signature: upserted.signatureImage,\r\n                metadata: upserted.metadata\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error upserting business settings:', error);\r\n        return { success: false, error: error.message || 'Failed to update settings' };\r\n    }\r\n}\r\n\r\nexport async function getAccountStatusAction(userId: string) {\r\n    try {\r\n        const user = await db.user.findUnique({\r\n            where: { id: userId },\r\n            select: {\r\n                isFrozen: true,\r\n                createdAt: true,\r\n                subscriptions: {\r\n                    where: { status: 'active' },\r\n                    orderBy: { endDate: 'desc' },\r\n                    take: 1\r\n                },\r\n                branches: {\r\n                    select: { id: true }\r\n                }\r\n            }\r\n        });\r\n\r\n        if (!user) return null;\r\n\r\n        const activeSub = user.subscriptions[0];\r\n        const now = new Date();\r\n        const daysRemaining = activeSub ? Math.ceil((activeSub.endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)) : 0;\r\n\r\n        return {\r\n            is_frozen: user.isFrozen,\r\n            location_limit: 1, // Traditional limit or from subscription\r\n            billing_amount: activeSub ? Number(activeSub.amount) : 50000,\r\n            billing_duration: 'Monthly',\r\n            days_remaining: Math.max(0, daysRemaining),\r\n            next_billing_date: activeSub?.endDate.toISOString() || ''\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching account status:', error);\r\n        return { is_frozen: false, location_limit: 1, billing_amount: 50000, billing_duration: 'Monthly', days_remaining: 30, next_billing_date: '' };\r\n    }\r\n}\r\n\r\nexport async function getOnboardingStatusAction(locationId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId: locationId }\r\n        });\r\n\r\n        if (!settings) return null;\r\n\r\n        return {\r\n            id: settings.id,\r\n            location_id: settings.branchId,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            completed: !!settings.businessName && !!settings.phone, // Simplified completion check\r\n            is_frozen: false // Should come from branch or user status\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching onboarding status:', error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAgCsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gEAAA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { getBusinessSettingsAction, upsertBusinessSettingsAction } from '@/app/actions/business-settings';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const data = await getBusinessSettingsAction(currentBusiness.id);\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name || '',\r\n          businessAddress: data.business_address || '',\r\n          businessPhone: data.business_phone || '',\r\n          businessEmail: data.business_email || '',\r\n          businessLogo: data.business_logo || undefined,\r\n          currency: data.currency || 'UGX',\r\n          signature: data.signature || undefined,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const userData = { user: { id: '00000000-0000-0000-0000-000000000000' } }; // Mocked user id for now\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const response = await upsertBusinessSettingsAction(currentBusiness.id, userData.user.id, updateData);\r\n\r\n      if (!response.success) {\r\n        console.error('Supabase error updating business settings:', response.error);\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/pages/Onboarding.tsx"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { toast } from 'sonner';\r\nimport { useOnboarding } from '@/hooks/useOnboarding';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport {\r\n    Building2,\r\n    MapPin,\r\n    Phone,\r\n    Mail,\r\n    Briefcase,\r\n    Users,\r\n    X,\r\n    Loader2,\r\n    CheckCircle2,\r\n    Upload,\r\n    ArrowRight,\r\n    Sparkles,\r\n    LogOut,\r\n} from 'lucide-react';\r\n\r\nconst BUSINESS_SIZES = [\r\n    { value: '1-5', label: '1â€“5 employees' },\r\n    { value: '6-20', label: '6â€“20 employees' },\r\n    { value: '21-50', label: '21â€“50 employees' },\r\n    { value: '50+', label: '50+ employees' },\r\n];\r\n\r\nconst Onboarding = () => {\r\n    const navigate = useNavigate();\r\n    const { user, signOut } = useAuth();\r\n    const { onboarding, isLoading: onboardingLoading, isCompleted, saveOnboarding } = useOnboarding();\r\n    const { settings, isLoading: settingsLoading, updateSettings } = useBusinessSettings();\r\n\r\n    const [saving, setSaving] = useState(false);\r\n    const [logoPreview, setLogoPreview] = useState<string | null>(null);\r\n    const [logoFile, setLogoFile] = useState<File | null>(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const [form, setForm] = useState({\r\n        businessName: '',\r\n        businessAddress: '',\r\n        businessPhone: '',\r\n        businessEmail: user?.email || '',\r\n        natureOfBusiness: '',\r\n        businessSize: '',\r\n    });\r\n\r\n    const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n    // â”€â”€ Hooks must be called unconditionally at the top â”€â”€\r\n\r\n    // Redirect if already completed\r\n    useEffect(() => {\r\n        if (!onboardingLoading && isCompleted) {\r\n            console.log('Onboarding: Already completed, redirecting to dashboard');\r\n            navigate('/', { replace: true });\r\n        }\r\n    }, [onboardingLoading, isCompleted, navigate]);\r\n\r\n    // Auto-fill form from existing business_settings once loaded\r\n    useEffect(() => {\r\n        if (settingsLoading || !settings) return;\r\n        setForm((prev) => ({\r\n            ...prev,\r\n            businessName: settings.businessName || prev.businessName,\r\n            businessAddress: settings.businessAddress || prev.businessAddress,\r\n            businessPhone: settings.businessPhone || prev.businessPhone,\r\n            businessEmail: settings.businessEmail || prev.businessEmail,\r\n        }));\r\n        if (settings.businessLogo) {\r\n            setLogoPreview(settings.businessLogo);\r\n        }\r\n    }, [settingsLoading, settings]);\r\n\r\n    const processImageFile = useCallback((file: File) => {\r\n        if (!file.type.startsWith('image/')) { toast.error('Please upload an image file'); return; }\r\n        if (file.size > 5 * 1024 * 1024) { toast.error('Image must be smaller than 5MB'); return; }\r\n        setLogoFile(file);\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => setLogoPreview(reader.result as string);\r\n        reader.readAsDataURL(file);\r\n    }, []);\r\n\r\n    const handleDrop = useCallback((e: React.DragEvent<HTMLDivElement>) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n        const file = e.dataTransfer.files?.[0];\r\n        if (file) processImageFile(file);\r\n    }, [processImageFile]);\r\n\r\n    // â”€â”€ Early return only AFTER all hooks are declared â”€â”€\r\n\r\n    if (onboardingLoading || settingsLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <LoadingSpinner message=\"Loading your profile...\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleChange = (field: string, value: string) => {\r\n        setForm((prev) => ({ ...prev, [field]: value }));\r\n        if (errors[field]) setErrors((prev) => ({ ...prev, [field]: '' }));\r\n    };\r\n\r\n    const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) processImageFile(file);\r\n    };\r\n\r\n    const removeLogo = () => {\r\n        setLogoPreview(null);\r\n        setLogoFile(null);\r\n        if (fileInputRef.current) fileInputRef.current.value = '';\r\n    };\r\n\r\n    const validate = () => {\r\n        const newErrors: Record<string, string> = {};\r\n        if (!form.businessName.trim()) newErrors.businessName = 'Business name is required';\r\n        if (!form.businessAddress.trim()) newErrors.businessAddress = 'Address is required';\r\n        if (!form.businessPhone.trim()) newErrors.businessPhone = 'Phone number is required';\r\n        if (!form.businessEmail.trim()) {\r\n            newErrors.businessEmail = 'Email is required';\r\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.businessEmail)) {\r\n            newErrors.businessEmail = 'Please enter a valid email';\r\n        }\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const uploadLogo = async (): Promise<string | null> => {\r\n        if (!logoFile || !user?.id) return null;\r\n        try {\r\n            const ext = logoFile.name.split('.').pop();\r\n            const path = `${user.id}/business-logo.${ext}`;\r\n            const { error } = await supabase.storage\r\n                .from('business-logos')\r\n                .upload(path, logoFile, { upsert: true });\r\n            if (error) return logoPreview;\r\n            const { data } = supabase.storage.from('business-logos').getPublicUrl(path);\r\n            return data.publicUrl;\r\n        } catch {\r\n            return logoPreview;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!validate()) return;\r\n        setSaving(true);\r\n        try {\r\n            const logoUrl = logoFile ? await uploadLogo() : null;\r\n\r\n            const saved = await saveOnboarding({\r\n                business_logo: logoUrl ?? undefined,\r\n                business_name: form.businessName.trim(),\r\n                business_address: form.businessAddress.trim(),\r\n                business_phone: form.businessPhone.trim(),\r\n                business_email: form.businessEmail.trim(),\r\n                nature_of_business: form.natureOfBusiness.trim() || undefined,\r\n                business_size: form.businessSize || undefined,\r\n                is_frozen: onboarding?.is_frozen ?? false,\r\n                completed: true,\r\n            });\r\n\r\n            if (!saved) { toast.error('Failed to save onboarding data. Please try again.'); return; }\r\n\r\n            await updateSettings({\r\n                businessName: form.businessName.trim(),\r\n                businessAddress: form.businessAddress.trim(),\r\n                businessPhone: form.businessPhone.trim(),\r\n                businessEmail: form.businessEmail.trim(),\r\n                ...(logoUrl ? { businessLogo: logoUrl } : {}),\r\n            });\r\n\r\n            toast.success('Business profile set up! Welcome aboard ðŸŽ‰');\r\n            navigate('/', { replace: true });\r\n        } catch (err) {\r\n            console.error('Onboarding submit error:', err);\r\n            toast.error('Something went wrong. Please try again.');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background flex flex-col lg:flex-row\">\r\n\r\n            {/* â”€â”€ Left / Top panel â€” branding â”€â”€ */}\r\n            <div\r\n                className=\"\r\n          w-full lg:w-2/5 xl:w-1/3\r\n          flex flex-col\r\n          px-6 py-8 lg:p-10\r\n          relative overflow-hidden\r\n          lg:min-h-screen\r\n        \"\r\n                style={{ background: 'hsl(var(--primary))' }}\r\n            >\r\n                {/* Decorative blobs */}\r\n                <div className=\"absolute -top-16 -left-16 w-56 h-56 rounded-full opacity-10 bg-white pointer-events-none\" />\r\n                <div className=\"absolute -bottom-10 -right-10 w-48 h-48 rounded-full opacity-10 bg-white pointer-events-none\" />\r\n\r\n                {/* Logo */}\r\n                <div className=\"relative z-10\">\r\n                    <img\r\n                        src=\"/lovable-uploads/798d07d7-1db7-498c-92f3-6f6346827d59.png\"\r\n                        alt=\"Gonzo Systems\"\r\n                        className=\"h-10 object-contain brightness-0 invert\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Copy â€” shown inline on mobile, centered vertically on desktop */}\r\n                <div className=\"relative z-10 mt-6 lg:mt-auto lg:mb-auto space-y-4\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-white/10 text-white/90 text-xs font-medium px-3 py-1.5 rounded-full border border-white/20\">\r\n                        <Sparkles className=\"h-3.5 w-3.5\" />\r\n                        One-time setup\r\n                    </div>\r\n\r\n                    <h2 className=\"text-2xl sm:text-3xl font-bold text-white leading-snug\">\r\n                        Let's get your<br className=\"hidden sm:block\" /> business ready.\r\n                    </h2>\r\n\r\n                    <p className=\"text-white/70 text-sm leading-relaxed max-w-xs\">\r\n                        Fill in your business details to personalise your workspace. You can always update these later in Settings.\r\n                    </p>\r\n\r\n                    {/* Benefit list â€” hidden on very small screens to save space */}\r\n                    <ul className=\"hidden sm:flex flex-col gap-2.5 text-sm text-white/80 pt-2\">\r\n                        {[\r\n                            'Appears on receipts & invoices',\r\n                            'Pre-fills your Settings page',\r\n                            'Helps your team identify the business',\r\n                        ].map((item) => (\r\n                            <li key={item} className=\"flex items-center gap-2\">\r\n                                <CheckCircle2 className=\"h-4 w-4 text-white/50 shrink-0\" />\r\n                                {item}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Footer â€” desktop only */}\r\n                <p className=\"relative z-10 hidden lg:block text-white/30 text-xs mt-auto pt-8\">\r\n                    Â© {new Date().getFullYear()} Gonzo Systems\r\n                </p>\r\n            </div>\r\n\r\n            {/* â”€â”€ Right / Bottom panel â€” form â”€â”€ */}\r\n            <div className=\"flex-1 flex flex-col overflow-y-auto\">\r\n                <div className=\"flex-1 flex items-start justify-center px-4 sm:px-8 py-8 lg:py-16\">\r\n                    <div className=\"w-full max-w-xl\">\r\n\r\n                        {/* Heading & Logout */}\r\n                        <div className=\"flex justify-between items-start mb-6 font-geist\">\r\n                            <div>\r\n                                <h1 className=\"text-xl sm:text-2xl font-bold text-foreground\">Set up your business</h1>\r\n                                <p className=\"text-muted-foreground text-sm mt-1\">\r\n                                    This information will appear on your receipts and reports.\r\n                                </p>\r\n                            </div>\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => signOut()}\r\n                                className=\"text-muted-foreground hover:text-foreground gap-2\"\r\n                            >\r\n                                <LogOut className=\"h-4 w-4\" />\r\n                                Logout\r\n                            </Button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n                            {/* Logo Upload */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <Label className=\"text-sm font-medium\">\r\n                                    Business Logo{' '}\r\n                                    <span className=\"text-muted-foreground font-normal text-xs\">(optional)</span>\r\n                                </Label>\r\n\r\n                                {logoPreview ? (\r\n                                    <div className=\"flex items-center gap-3 p-3 border border-border rounded-lg bg-muted/30\">\r\n                                        <img\r\n                                            src={logoPreview}\r\n                                            alt=\"Logo preview\"\r\n                                            className=\"h-12 w-12 object-contain rounded-md border border-border bg-white shrink-0\"\r\n                                        />\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <p className=\"text-sm font-medium truncate\">{logoFile?.name || 'Logo'}</p>\r\n                                            {logoFile && (\r\n                                                <p className=\"text-xs text-muted-foreground\">{(logoFile.size / 1024).toFixed(0)} KB</p>\r\n                                            )}\r\n                                        </div>\r\n                                        <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={removeLogo}\r\n                                            className=\"text-destructive hover:text-destructive hover:bg-destructive/10 shrink-0 h-8 w-8 p-0\">\r\n                                            <X className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div\r\n                                        onDrop={handleDrop}\r\n                                        onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\r\n                                        onDragLeave={() => setIsDragging(false)}\r\n                                        onClick={() => fileInputRef.current?.click()}\r\n                                        className={`flex items-center gap-3 p-4 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${isDragging\r\n                                            ? 'border-primary bg-primary/5'\r\n                                            : 'border-border hover:border-primary/40 hover:bg-muted/20'\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"h-9 w-9 rounded-lg bg-muted flex items-center justify-center shrink-0\">\r\n                                            <Upload className=\"h-4 w-4 text-muted-foreground\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-sm font-medium\">\r\n                                                {isDragging ? 'Drop here' : 'Click or drag to upload'}\r\n                                            </p>\r\n                                            <p className=\"text-xs text-muted-foreground\">PNG, JPG, SVG â€” max 5MB</p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <input ref={fileInputRef} type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleLogoChange} />\r\n                            </div>\r\n\r\n                            {/* Business Name */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <Label htmlFor=\"businessName\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                    <Building2 className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                    Business Name <span className=\"text-destructive\">*</span>\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"businessName\"\r\n                                    value={form.businessName}\r\n                                    onChange={(e) => handleChange('businessName', e.target.value)}\r\n                                    placeholder=\"\"\r\n                                    className={errors.businessName ? 'border-destructive' : ''}\r\n                                />\r\n                                {errors.businessName && <p className=\"text-xs text-destructive\">{errors.businessName}</p>}\r\n                            </div>\r\n\r\n                            {/* Address */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <Label htmlFor=\"businessAddress\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                    <MapPin className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                    Location / Address <span className=\"text-destructive\">*</span>\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"businessAddress\"\r\n                                    value={form.businessAddress}\r\n                                    onChange={(e) => handleChange('businessAddress', e.target.value)}\r\n                                    placeholder=\"\"\r\n                                    className={errors.businessAddress ? 'border-destructive' : ''}\r\n                                />\r\n                                {errors.businessAddress && <p className=\"text-xs text-destructive\">{errors.businessAddress}</p>}\r\n                            </div>\r\n\r\n                            {/* Phone & Email */}\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1.5\">\r\n                                    <Label htmlFor=\"businessPhone\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                        <Phone className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                        Phone <span className=\"text-destructive\">*</span>\r\n                                    </Label>\r\n                                    <Input\r\n                                        id=\"businessPhone\"\r\n                                        type=\"tel\"\r\n                                        value={form.businessPhone}\r\n                                        onChange={(e) => handleChange('businessPhone', e.target.value)}\r\n                                        placeholder=\"\"\r\n                                        className={errors.businessPhone ? 'border-destructive' : ''}\r\n                                    />\r\n                                    {errors.businessPhone && <p className=\"text-xs text-destructive\">{errors.businessPhone}</p>}\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <Label htmlFor=\"businessEmail\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                        <Mail className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                        Email <span className=\"text-destructive\">*</span>\r\n                                    </Label>\r\n                                    <Input\r\n                                        id=\"businessEmail\"\r\n                                        type=\"email\"\r\n                                        value={form.businessEmail}\r\n                                        onChange={(e) => handleChange('businessEmail', e.target.value)}\r\n                                        placeholder=\"\"\r\n                                        className={errors.businessEmail ? 'border-destructive' : ''}\r\n                                    />\r\n                                    {errors.businessEmail && <p className=\"text-xs text-destructive\">{errors.businessEmail}</p>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Optional fields */}\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-1.5\">\r\n                                    <Label htmlFor=\"natureOfBusiness\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                        <Briefcase className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                        Nature of Business\r\n                                        <span className=\"text-muted-foreground font-normal text-xs\">(optional)</span>\r\n                                    </Label>\r\n                                    <Input\r\n                                        id=\"natureOfBusiness\"\r\n                                        value={form.natureOfBusiness}\r\n                                        onChange={(e) => handleChange('natureOfBusiness', e.target.value)}\r\n                                        placeholder=\"\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <Label htmlFor=\"businessSize\" className=\"text-sm font-medium flex items-center gap-1.5\">\r\n                                        <Users className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                        Business Size\r\n                                        <span className=\"text-muted-foreground font-normal text-xs\">(optional)</span>\r\n                                    </Label>\r\n                                    <Select value={form.businessSize} onValueChange={(val) => handleChange('businessSize', val)}>\r\n                                        <SelectTrigger id=\"businessSize\">\r\n                                            <SelectValue placeholder=\"No. of employees\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {BUSINESS_SIZES.map((s) => (\r\n                                                <SelectItem key={s.value} value={s.value}>{s.label}</SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Submit */}\r\n                            <div className=\"pt-2 pb-4\">\r\n                                <Button type=\"submit\" disabled={saving} className=\"w-full h-11 font-semibold gap-2\">\r\n                                    {saving ? (\r\n                                        <><Loader2 className=\"h-4 w-4 animate-spin\" /> Setting up your business...</>\r\n                                    ) : (\r\n                                        <>Complete Setup <ArrowRight className=\"h-4 w-4\" /></>\r\n                                    )}\r\n                                </Button>\r\n                                <p className=\"text-center text-xs text-muted-foreground mt-3\">\r\n                                    You can update all of this later in <span className=\"font-medium\">Settings</span>.\r\n                                </p>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Onboarding;\r\n"],"names":[],"mappings":"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"}}]
}