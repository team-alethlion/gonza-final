(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/src/app/actions/data:f3e1a8 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getExpensesAction",
    ()=>$$RSC_SERVER_ACTION_1
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"402e37ae5f317e45e7c2b4d0c5adab499af81d14d0":"getExpensesAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_1 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("402e37ae5f317e45e7c2b4d0c5adab499af81d14d0", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getExpensesAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJnU0EyRXNCLDhMQUFBIn0=
}),
"[project]/src/app/actions/data:5c3464 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createExpenseAction",
    ()=>$$RSC_SERVER_ACTION_0
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"605e3bb4746b8859e06f2fe24bb8c29c89434c1100":"createExpenseAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_0 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("605e3bb4746b8859e06f2fe24bb8c29c89434c1100", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createExpenseAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJrU0FvQnNCLGdNQUFBIn0=
}),
"[project]/src/app/actions/data:920d35 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateExpenseAction",
    ()=>$$RSC_SERVER_ACTION_2
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"7077a08a1130225a7b61a1e58b625150fa2464c027":"updateExpenseAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_2 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("7077a08a1130225a7b61a1e58b625150fa2464c027", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "updateExpenseAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJrU0FxR3NCLGdNQUFBIn0=
}),
"[project]/src/app/actions/data:672ae9 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteExpenseAction",
    ()=>$$RSC_SERVER_ACTION_3
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"403af43ad5cffacca8895380711b09eea48b602a18":"deleteExpenseAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_3 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("403af43ad5cffacca8895380711b09eea48b602a18", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteExpenseAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJrU0FvTHNCLGdNQUFBIn0=
}),
"[project]/src/app/actions/data:6d0100 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getBusinessSettingsAction",
    ()=>$$RSC_SERVER_ACTION_0
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"409fca4033c47a8ce32274ee5d84a1bf7b5ddd0ee6":"getBusinessSettingsAction"},"src/app/actions/business-settings.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_0 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("409fca4033c47a8ce32274ee5d84a1bf7b5ddd0ee6", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getBusinessSettingsAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYnVzaW5lc3Mtc2V0dGluZ3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzZXJ2ZXInO1xyXG5cclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9wcmlzbWEvZGInO1xyXG5pbXBvcnQgeyByZXZhbGlkYXRlUGF0aCB9IGZyb20gJ25leHQvY2FjaGUnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJ1c2luZXNzU2V0dGluZ3NBY3Rpb24oYnJhbmNoSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGRiLmJyYW5jaFNldHRpbmdzLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBicmFuY2hJZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogc2V0dGluZ3MuaWQsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzX25hbWU6IHNldHRpbmdzLmJ1c2luZXNzTmFtZSxcclxuICAgICAgICAgICAgYnVzaW5lc3NfYWRkcmVzczogc2V0dGluZ3MuYWRkcmVzcyxcclxuICAgICAgICAgICAgYnVzaW5lc3NfcGhvbmU6IHNldHRpbmdzLnBob25lLFxyXG4gICAgICAgICAgICBidXNpbmVzc19lbWFpbDogc2V0dGluZ3MuZW1haWwsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzX2xvZ286IHNldHRpbmdzLmxvZ28sXHJcbiAgICAgICAgICAgIGN1cnJlbmN5OiBzZXR0aW5ncy5jdXJyZW5jeSxcclxuICAgICAgICAgICAgc2lnbmF0dXJlOiBzZXR0aW5ncy5zaWduYXR1cmVJbWFnZSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHNldHRpbmdzLm1ldGFkYXRhIHx8IHt9XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYnVzaW5lc3Mgc2V0dGluZ3M6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0QnVzaW5lc3NTZXR0aW5nc0FjdGlvbihicmFuY2hJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgdXBkYXRlRGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIHVzZXIgYWNjZXNzIHRvIGJyYW5jaFxyXG4gICAgICAgIGNvbnN0IGJyYW5jaCA9IGF3YWl0IGRiLmJyYW5jaC5maW5kRmlyc3Qoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgT1I6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IGFkbWluSWQ6IHVzZXJJZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdXNlcnM6IHsgc29tZTogeyBpZDogdXNlcklkIH0gfSB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFicmFuY2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkIHRvIHVwZGF0ZSBicmFuY2ggc2V0dGluZ3MnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBidXNpbmVzc05hbWU6IHVwZGF0ZURhdGEuYnVzaW5lc3NfbmFtZSxcclxuICAgICAgICAgICAgYWRkcmVzczogdXBkYXRlRGF0YS5idXNpbmVzc19hZGRyZXNzLFxyXG4gICAgICAgICAgICBwaG9uZTogdXBkYXRlRGF0YS5idXNpbmVzc19waG9uZSxcclxuICAgICAgICAgICAgZW1haWw6IHVwZGF0ZURhdGEuYnVzaW5lc3NfZW1haWwsXHJcbiAgICAgICAgICAgIGxvZ286IHVwZGF0ZURhdGEuYnVzaW5lc3NfbG9nbyxcclxuICAgICAgICAgICAgY3VycmVuY3k6IHVwZGF0ZURhdGEuY3VycmVuY3ksXHJcbiAgICAgICAgICAgIHNpZ25hdHVyZUltYWdlOiB1cGRhdGVEYXRhLnNpZ25hdHVyZSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHVwZGF0ZURhdGEubWV0YWRhdGFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB1cHNlcnRlZCA9IGF3YWl0IGRiLmJyYW5jaFNldHRpbmdzLnVwc2VydCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGJyYW5jaElkOiBicmFuY2hJZCB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGRhdGEsXHJcbiAgICAgICAgICAgIGNyZWF0ZToge1xyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IGJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgLi4uZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGlkOiB1cHNlcnRlZC5pZCxcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzX25hbWU6IHVwc2VydGVkLmJ1c2luZXNzTmFtZSxcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzX2FkZHJlc3M6IHVwc2VydGVkLmFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19waG9uZTogdXBzZXJ0ZWQucGhvbmUsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19lbWFpbDogdXBzZXJ0ZWQuZW1haWwsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19sb2dvOiB1cHNlcnRlZC5sb2dvLFxyXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IHVwc2VydGVkLmN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB1cHNlcnRlZC5zaWduYXR1cmVJbWFnZSxcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB1cHNlcnRlZC5tZXRhZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cHNlcnRpbmcgYnVzaW5lc3Mgc2V0dGluZ3M6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBzZXR0aW5ncycgfTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6ImtUQUtzQixzTUFBQSJ9
}),
"[project]/src/app/actions/data:01c0b4 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "upsertBusinessSettingsAction",
    ()=>$$RSC_SERVER_ACTION_1
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"7030790b3d20fcf62d9c199d3ecacadd25d0d7ec17":"upsertBusinessSettingsAction"},"src/app/actions/business-settings.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_1 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("7030790b3d20fcf62d9c199d3ecacadd25d0d7ec17", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "upsertBusinessSettingsAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYnVzaW5lc3Mtc2V0dGluZ3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzZXJ2ZXInO1xyXG5cclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9wcmlzbWEvZGInO1xyXG5pbXBvcnQgeyByZXZhbGlkYXRlUGF0aCB9IGZyb20gJ25leHQvY2FjaGUnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJ1c2luZXNzU2V0dGluZ3NBY3Rpb24oYnJhbmNoSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGRiLmJyYW5jaFNldHRpbmdzLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBicmFuY2hJZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogc2V0dGluZ3MuaWQsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzX25hbWU6IHNldHRpbmdzLmJ1c2luZXNzTmFtZSxcclxuICAgICAgICAgICAgYnVzaW5lc3NfYWRkcmVzczogc2V0dGluZ3MuYWRkcmVzcyxcclxuICAgICAgICAgICAgYnVzaW5lc3NfcGhvbmU6IHNldHRpbmdzLnBob25lLFxyXG4gICAgICAgICAgICBidXNpbmVzc19lbWFpbDogc2V0dGluZ3MuZW1haWwsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzX2xvZ286IHNldHRpbmdzLmxvZ28sXHJcbiAgICAgICAgICAgIGN1cnJlbmN5OiBzZXR0aW5ncy5jdXJyZW5jeSxcclxuICAgICAgICAgICAgc2lnbmF0dXJlOiBzZXR0aW5ncy5zaWduYXR1cmVJbWFnZSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHNldHRpbmdzLm1ldGFkYXRhIHx8IHt9XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYnVzaW5lc3Mgc2V0dGluZ3M6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0QnVzaW5lc3NTZXR0aW5nc0FjdGlvbihicmFuY2hJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgdXBkYXRlRGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIHVzZXIgYWNjZXNzIHRvIGJyYW5jaFxyXG4gICAgICAgIGNvbnN0IGJyYW5jaCA9IGF3YWl0IGRiLmJyYW5jaC5maW5kRmlyc3Qoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgT1I6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IGFkbWluSWQ6IHVzZXJJZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdXNlcnM6IHsgc29tZTogeyBpZDogdXNlcklkIH0gfSB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFicmFuY2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkIHRvIHVwZGF0ZSBicmFuY2ggc2V0dGluZ3MnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBidXNpbmVzc05hbWU6IHVwZGF0ZURhdGEuYnVzaW5lc3NfbmFtZSxcclxuICAgICAgICAgICAgYWRkcmVzczogdXBkYXRlRGF0YS5idXNpbmVzc19hZGRyZXNzLFxyXG4gICAgICAgICAgICBwaG9uZTogdXBkYXRlRGF0YS5idXNpbmVzc19waG9uZSxcclxuICAgICAgICAgICAgZW1haWw6IHVwZGF0ZURhdGEuYnVzaW5lc3NfZW1haWwsXHJcbiAgICAgICAgICAgIGxvZ286IHVwZGF0ZURhdGEuYnVzaW5lc3NfbG9nbyxcclxuICAgICAgICAgICAgY3VycmVuY3k6IHVwZGF0ZURhdGEuY3VycmVuY3ksXHJcbiAgICAgICAgICAgIHNpZ25hdHVyZUltYWdlOiB1cGRhdGVEYXRhLnNpZ25hdHVyZSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHVwZGF0ZURhdGEubWV0YWRhdGFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB1cHNlcnRlZCA9IGF3YWl0IGRiLmJyYW5jaFNldHRpbmdzLnVwc2VydCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGJyYW5jaElkOiBicmFuY2hJZCB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGRhdGEsXHJcbiAgICAgICAgICAgIGNyZWF0ZToge1xyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IGJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgLi4uZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGlkOiB1cHNlcnRlZC5pZCxcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzX25hbWU6IHVwc2VydGVkLmJ1c2luZXNzTmFtZSxcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzX2FkZHJlc3M6IHVwc2VydGVkLmFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19waG9uZTogdXBzZXJ0ZWQucGhvbmUsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19lbWFpbDogdXBzZXJ0ZWQuZW1haWwsXHJcbiAgICAgICAgICAgICAgICBidXNpbmVzc19sb2dvOiB1cHNlcnRlZC5sb2dvLFxyXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IHVwc2VydGVkLmN1cnJlbmN5LFxyXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB1cHNlcnRlZC5zaWduYXR1cmVJbWFnZSxcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB1cHNlcnRlZC5tZXRhZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cHNlcnRpbmcgYnVzaW5lc3Mgc2V0dGluZ3M6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBzZXR0aW5ncycgfTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InFUQWdDc0IseU1BQUEifQ==
}),
"[project]/src/app/actions/data:8f966c [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getCashAccountsAction",
    ()=>$$RSC_SERVER_ACTION_8
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"404e4c969fb4ed9517070820aa9238be69635d81df":"getCashAccountsAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_8 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("404e4c969fb4ed9517070820aa9238be69635d81df", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getCashAccountsAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJvU0FnU3NCLGtNQUFBIn0=
}),
"[project]/src/app/actions/data:165735 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createCashAccountAction",
    ()=>$$RSC_SERVER_ACTION_9
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"40dcb97687ff077761d5656c206c90b60da7e90768":"createCashAccountAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_9 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("40dcb97687ff077761d5656c206c90b60da7e90768", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "createCashAccountAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzU0F5VHNCLG9NQUFBIn0=
}),
"[project]/src/app/actions/data:4d6e1a [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateCashAccountAction",
    ()=>$$RSC_SERVER_ACTION_10
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"608cfd9a6361204aef1789b1c8cec0c7a7251b5da6":"updateCashAccountAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_10 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("608cfd9a6361204aef1789b1c8cec0c7a7251b5da6", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "updateCashAccountAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzU0E4VXNCLHNNQUFBIn0=
}),
"[project]/src/app/actions/data:ec5273 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteCashAccountAction",
    ()=>$$RSC_SERVER_ACTION_11
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"606de6e888cd750a405cef95d0de94e1650793b224":"deleteCashAccountAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_11 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("606de6e888cd750a405cef95d0de94e1650793b224", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteCashAccountAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzU0FrV3NCLHNNQUFBIn0=
}),
"[project]/src/app/actions/data:ead76c [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "deleteCashAccountWithTransactionsAction",
    ()=>$$RSC_SERVER_ACTION_12
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"70cc14e48c776d93c255f39bea0884a4cc9308abf7":"deleteCashAccountWithTransactionsAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_12 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("70cc14e48c776d93c255f39bea0884a4cc9308abf7", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "deleteCashAccountWithTransactionsAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzVEFxWXNCLHNOQUFBIn0=
}),
"[project]/src/app/actions/data:32b57f [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getCashAccountBalanceAction",
    ()=>$$RSC_SERVER_ACTION_13
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"6022d2e7f9e9a35853d5428f52c9618bc015f7bda3":"getCashAccountBalanceAction"},"src/app/actions/finance.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_13 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("6022d2e7f9e9a35853d5428f52c9618bc015f7bda3", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getCashAccountBalanceAction");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBkYiwgUGF5bWVudFN0YXR1cywgQWN0aXZpdHlUeXBlLCBBY3Rpdml0eU1vZHVsZSB9IGZyb20gJy4uLy4uLy4uL3ByaXNtYS9kYic7XHJcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSc7XHJcblxyXG4vLyAtLS0gRVhQRU5TRVMgLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVuc2VJbnB1dCB7XHJcbiAgICBhbW91bnQ6IG51bWJlcjtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgIGRhdGU6IERhdGU7XHJcbiAgICBwYXltZW50TWV0aG9kPzogc3RyaW5nO1xyXG4gICAgcGVyc29uSW5DaGFyZ2U/OiBzdHJpbmc7XHJcbiAgICByZWNlaXB0SW1hZ2U/OiBzdHJpbmc7XHJcbiAgICBjYXNoQWNjb3VudElkPzogc3RyaW5nO1xyXG4gICAgdXNlcklkOiBzdHJpbmc7XHJcbiAgICBsb2NhdGlvbklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFeHBlbnNlQWN0aW9uKGRhdGE6IEV4cGVuc2VJbnB1dCwgbGlua1RvQ2FzaDogYm9vbGVhbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBleHBlbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBjYXNoQWNjb3VudElkOiBsaW5rVG9DYXNoICYmIGRhdGEuY2FzaEFjY291bnRJZCA/IGRhdGEuY2FzaEFjY291bnRJZCA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiBJZiBsaW5raW5nIHRvIGNhc2gsIGNyZWF0ZSBhIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGxpbmtUb0Nhc2ggJiYgZGF0YS5jYXNoQWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXNoVHggPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudElkOiBkYXRhLmNhc2hBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ2Nhc2hfb3V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7ZGF0YS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogZGF0YS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IGRhdGEucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IGRhdGEucmVjZWlwdEltYWdlIHx8IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZSB3aXRoIHRyYW5zYWN0aW9uIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleHBlbnNlLmlkIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBjYXNoVHJhbnNhY3Rpb25JZDogY2FzaFR4LmlkIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeHBlbnNlc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXhwZW5zZXMgPSBhd2FpdCBkYi5leHBlbnNlLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4uZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IGUuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBlLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IGUucGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGUucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXB0X2ltYWdlOiBlLnJlY2VpcHRJbWFnZSxcclxuICAgICAgICAgICAgICAgIGNhc2hfYWNjb3VudF9pZDogZS5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgY2FzaF90cmFuc2FjdGlvbl9pZDogZS5jYXNoVHJhbnNhY3Rpb25JZFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4cGVuc2VzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4cGVuc2VBY3Rpb24oaWQ6IHN0cmluZywgdXBkYXRlczogYW55LCBjdXJyZW50RXhwZW5zZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwZW5zZVxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRXhwZW5zZSA9IGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiB1cGRhdGVzLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlcy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogdXBkYXRlcy5yZWNlaXB0SW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzaEFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkIHx8IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRMaW5rVG9DYXNoID0gISF1cGRhdGVzLmNhc2hBY2NvdW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0xpbmtlZFRvQ2FzaCA9ICEhY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiAhd2FzTGlua2VkVG9DYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhc2hUeCA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBjdXJyZW50RXhwZW5zZS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGN1cnJlbnRFeHBlbnNlLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAnY2FzaF9vdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdXBkYXRlcy5jYXRlZ29yeSB8fCBjdXJyZW50RXhwZW5zZS5jYXRlZ29yeSB8fCAnRXhwZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgRXhwZW5zZTogJHt1cGRhdGVzLmRlc2NyaXB0aW9uIHx8IGN1cnJlbnRFeHBlbnNlLmRlc2NyaXB0aW9ufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbkluQ2hhcmdlOiB1cGRhdGVzLnBlcnNvbkluQ2hhcmdlIHx8IGN1cnJlbnRFeHBlbnNlLnBlcnNvbkluQ2hhcmdlIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHVwZGF0ZXMuZGF0ZSB8fCBjdXJyZW50RXhwZW5zZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB1cGRhdGVzLnBheW1lbnRNZXRob2QgfHwgY3VycmVudEV4cGVuc2UucGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXB0SW1hZ2U6IHVwZGF0ZXMucmVjZWlwdEltYWdlIHx8IGN1cnJlbnRFeHBlbnNlLnJlY2VpcHRJbWFnZSB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5leHBlbnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hUcmFuc2FjdGlvbklkOiBjYXNoVHguaWQgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkTGlua1RvQ2FzaCAmJiB3YXNMaW5rZWRUb0Nhc2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjYXNoIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudEV4cGVuc2UuY2FzaFRyYW5zYWN0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogdXBkYXRlcy5jYXNoQWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHVwZGF0ZXMuYW1vdW50IHx8IGN1cnJlbnRFeHBlbnNlLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZXMuY2F0ZWdvcnkgfHwgY3VycmVudEV4cGVuc2UuY2F0ZWdvcnkgfHwgJ0V4cGVuc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4cGVuc2U6ICR7dXBkYXRlcy5kZXNjcmlwdGlvbiB8fCBjdXJyZW50RXhwZW5zZS5kZXNjcmlwdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25JbkNoYXJnZTogdXBkYXRlcy5wZXJzb25JbkNoYXJnZSB8fCBjdXJyZW50RXhwZW5zZS5wZXJzb25JbkNoYXJnZSB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiB1cGRhdGVzLmRhdGUgfHwgY3VycmVudEV4cGVuc2UuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogdXBkYXRlcy5wYXltZW50TWV0aG9kIHx8IGN1cnJlbnRFeHBlbnNlLnBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiB1cGRhdGVzLnJlY2VpcHRJbWFnZSB8fCBjdXJyZW50RXhwZW5zZS5yZWNlaXB0SW1hZ2UgfHwgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRMaW5rVG9DYXNoICYmIHdhc0xpbmtlZFRvQ2FzaCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIGNhc2ggdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50RXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRXhwZW5zZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhwZW5zZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeHBlbnNlQWN0aW9uKGlkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVuc2UgPSBhd2FpdCB0eC5leHBlbnNlLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjYXNoVHJhbnNhY3Rpb25JZDogdHJ1ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGVuc2U/LmNhc2hUcmFuc2FjdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhwZW5zZS5jYXNoVHJhbnNhY3Rpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGV4cGVuc2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gRVhQRU5TRSBDQVRFR09SSUVTIC0tLVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4cGVuc2VDYXRlZ29yaWVzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhdGVnb3JpZXMubWFwKChjOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBpZDogYy5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogYy5pc0RlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleHBlbnNlIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhwZW5zZUNhdGVnb3J5QWN0aW9uKGRhdGE6IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leHBlbnNlQ2F0ZWdvcnkuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogZGF0YS5pc0RlZmF1bHQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4cGVuc2VDYXRlZ29yeUFjdGlvbihpZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiLmV4cGVuc2VDYXRlZ29yeS5kZWxldGUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBpZCB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBleHBlbnNlIGNhdGVnb3J5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRFeHBlbnNlQ2F0ZWdvcmllc0FjdGlvbih1c2VySWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBjYXRlZ29yeU5hbWVzOiBzdHJpbmdbXSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gY2F0ZWdvcnlOYW1lcy5tYXAobmFtZSA9PiAoe1xyXG4gICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGlzRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZGIuZXhwZW5zZUNhdGVnb3J5LmNyZWF0ZU1hbnkoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVmYXVsdCBjYXRlZ29yaWVzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gLS0tIENBU0ggQUNDT1VOVFMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaEFjY291bnRzQWN0aW9uKGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IG5hbWU6ICdhc2MnIH1dXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGRhdGE6IGFjY291bnRzLm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIG9wZW5pbmdCYWxhbmNlOiBOdW1iZXIoYS5vcGVuaW5nQmFsYW5jZSksXHJcbiAgICAgICAgICAgICAgICBpc0RlZmF1bHQ6IGEuaXNEZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBhLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBhLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FzaCBhY2NvdW50czonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoQWNjb3VudEFjdGlvbihkYXRhOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuY3JlYXRlKHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogZGF0YS5vcGVuaW5nQmFsYW5jZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZhdWx0OiBkYXRhLmlzRGVmYXVsdCB8fCBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmFsaWRhdGVQYXRoKCcvZmluYW5jZScpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDYXNoQWNjb3VudEFjdGlvbihpZDogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY2FzaEFjY291bnQudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwZGF0ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBvcGVuaW5nQmFsYW5jZTogdXBkYXRlcy5vcGVuaW5nQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVmYXVsdDogdXBkYXRlcy5pc0RlZmF1bHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXNoIGFjY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2FzaEFjY291bnRBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHR4Q291bnQgPSBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY291bnQoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwQ291bnQgPSBhd2FpdCB0eC5leHBlbnNlLmNvdW50KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGNhc2hBY2NvdW50SWQ6IGlkLCBsb2NhdGlvbklkIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHhDb3VudCA+IDAgfHwgZXhwQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RyYW5zYWN0aW9uczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgQWNjb3VudCBoYXMgJHt0eENvdW50fSB0cmFuc2FjdGlvbnMgYW5kICR7ZXhwQ291bnR9IGV4cGVuc2VzLmBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hBY2NvdW50LmRlbGV0ZSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaGFzVHJhbnNhY3Rpb25zOiBmYWxzZSB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDYXNoQWNjb3VudFdpdGhUcmFuc2FjdGlvbnNBY3Rpb24oaWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nLCBkZWxldGVUcmFuc2FjdGlvbnM6IGJvb2xlYW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWxldGVUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uZGVsZXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIEV4cGVuc2VzIGFyZSBsaW5rZWQsIGJldHRlciB0byBqdXN0IG51bGwgdGhlbSBvdXQgb3IgZGVsZXRlPyBcclxuICAgICAgICAgICAgICAgIC8vIEluIG9yaWdpbmFsIGl0IHVubGlua2VkIGV4cGVuc2VzLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguZXhwZW5zZS51cGRhdGVNYW55KHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoQWNjb3VudElkOiBpZCwgbG9jYXRpb25JZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaEFjY291bnRJZDogbnVsbCwgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmxpbmsgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGFjY291bnRJZDogbnVsbCB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHR4LmV4cGVuc2UudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgY2FzaEFjY291bnRJZDogaWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNhc2hBY2NvdW50SWQ6IG51bGwsIGNhc2hUcmFuc2FjdGlvbklkOiBudWxsIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5jYXNoQWNjb3VudC5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggYWNjb3VudCB3aXRoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXNoQWNjb3VudEJhbGFuY2VBY3Rpb24oYWNjb3VudElkOiBzdHJpbmcsIGxvY2F0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgZGIuY2FzaEFjY291bnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2NvdW50IG5vdCBmb3VuZCcgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgZGIuY2FzaFRyYW5zYWN0aW9uLmZpbmRNYW55KHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgYWNjb3VudElkLCBsb2NhdGlvbklkIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogeyBhbW91bnQ6IHRydWUsIHRyYW5zYWN0aW9uVHlwZTogdHJ1ZSB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlID0gTnVtYmVyKGFjY291bnQub3BlbmluZ0JhbGFuY2UpO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHggb2YgdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE51bWJlcih0eC5hbW91bnQpO1xyXG4gICAgICAgICAgICBpZiAodHgudHJhbnNhY3Rpb25UeXBlID09PSAnY2FzaF9pbicgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eC50cmFuc2FjdGlvblR5cGUgPT09ICdjYXNoX291dCcgfHwgdHgudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXJfb3V0Jykge1xyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGJhbGFuY2UgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBhY2NvdW50IGJhbGFuY2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gQ0FTSCBUUkFOU0FDVElPTlMgLS0tXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzaFRyYW5zYWN0aW9uc0FjdGlvbihsb2NhdGlvbklkOiBzdHJpbmcsIGFjY291bnRJZD86IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB3aGVyZTogYW55ID0geyBsb2NhdGlvbklkIH07XHJcbiAgICAgICAgaWYgKGFjY291bnRJZCkgd2hlcmUuYWNjb3VudElkID0gYWNjb3VudElkO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBkYi5jYXNoVHJhbnNhY3Rpb24uZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZSxcclxuICAgICAgICAgICAgb3JkZXJCeTogW3sgZGF0ZTogJ2Rlc2MnIH0sIHsgY3JlYXRlZEF0OiAnZGVzYycgfV1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25zLm1hcCgodDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiB0LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdC51c2VySWQsXHJcbiAgICAgICAgICAgICAgICBhY2NvdW50X2lkOiB0LmFjY291bnRJZCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiB0LmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiB0LnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IHQucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogdC5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgcmVjZWlwdF9pbWFnZTogdC5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNoIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDYXNoVHJhbnNhY3Rpb25BY3Rpb24oZGF0YTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvblR5cGUgPT09ICd0cmFuc2ZlcicgJiYgZGF0YS50b0FjY291bnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHR3byB0cmFuc2FjdGlvbnMgZm9yIGEgdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR4T3V0ID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogZGF0YS5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eEluID0gYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS50b0FjY291bnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eE91dCwgdHhJbl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25JZDogZGF0YS5sb2NhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblR5cGU6IGRhdGEudHJhbnNhY3Rpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbl9pbl9jaGFyZ2U6IGRhdGEucGVyc29uSW5DaGFyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IGRhdGEudGFncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBkYXRhLnBheW1lbnRNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpcHRJbWFnZTogZGF0YS5yZWNlaXB0SW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXNoIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhc2hUcmFuc2FjdGlvbkFjdGlvbihpZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBpbnN0YWxsbWVudCBwYXltZW50cyBsaW5rZWQgdG8gdGhpcyB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICBhd2FpdCB0eC5pbnN0YWxsbWVudFBheW1lbnQudXBkYXRlTWFueSh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBjYXNoVHJhbnNhY3Rpb25JZDogaWQgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2FzaFRyYW5zYWN0aW9uSWQ6IG51bGwgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHR4LmNhc2hUcmFuc2FjdGlvbi5kZWxldGUoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQsIGxvY2F0aW9uSWQgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9maW5hbmNlJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGNhc2ggdHJhbnNhY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudE9wZW5pbmdCYWxhbmNlQWN0aW9uKGFjY291bnRJZDogc3RyaW5nLCBsb2NhdGlvbklkOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGRiLmNhc2hBY2NvdW50LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBhY2NvdW50SWQsIGxvY2F0aW9uSWQgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7IG9wZW5pbmdCYWxhbmNlOiB0cnVlIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogTnVtYmVyKGFjY291bnQ/Lm9wZW5pbmdCYWxhbmNlIHx8IDApIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3BlbmluZyBiYWxhbmNlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJ1bGtDYXNoVHJhbnNhY3Rpb25zQWN0aW9uKHRyYW5zYWN0aW9uczogYW55W10pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIHRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHJhbnNhY3Rpb25UeXBlID09PSAndHJhbnNmZXInICYmIGRhdGEudG9BY2NvdW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZTogJ3RyYW5zZmVyX291dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdUcmFuc2ZlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkLnB1c2goYXdhaXQgdHguY2FzaFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbklkOiBkYXRhLmxvY2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IGRhdGEudG9BY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiAndHJhbnNmZXJfaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnVHJhbnNmZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQucHVzaChhd2FpdCB0eC5jYXNoVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGRhdGEubG9jYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiBkYXRhLnRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25faW5fY2hhcmdlOiBkYXRhLnBlcnNvbkluQ2hhcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogZGF0YS50YWdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogZGF0YS5wYXltZW50TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdEltYWdlOiBkYXRhLnJlY2VpcHRJbWFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ZpbmFuY2UnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBidWxrIHRyYW5zYWN0aW9uczonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIwU0E0YXNCLDBNQUFBIn0=
}),
]);

//# sourceMappingURL=src_app_actions_b7d3aa29._.js.map