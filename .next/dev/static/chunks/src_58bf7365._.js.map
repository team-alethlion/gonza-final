{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCurrentUser.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\nexport const useCurrentUser = () => {\r\n  const [userId, setUserId] = useState<string | undefined>(undefined);\r\n  \r\n  // Get current user with faster initial check\r\n  useEffect(() => {\r\n    const getCurrentUser = async () => {\r\n      try {\r\n        // Try to get user from session first (faster)\r\n        const { data: sessionData } = await supabase.auth.getSession();\r\n        if (sessionData.session?.user) {\r\n          setUserId(sessionData.session.user.id);\r\n          return;\r\n        }\r\n        \r\n        // Fallback to getUser if no session\r\n        const { data: userData } = await supabase.auth.getUser();\r\n        setUserId(userData.user?.id);\r\n      } catch (error) {\r\n        console.error('Error getting user:', error);\r\n        setUserId(undefined);\r\n      }\r\n    };\r\n    getCurrentUser();\r\n  }, []);\r\n\r\n  return { userId };\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEO,MAAM,iBAAiB;;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAqB;IAEzD,6CAA6C;IAC7C,IAAA,0KAAS;oCAAC;YACR,MAAM;2DAAiB;oBACrB,IAAI;wBACF,8CAA8C;wBAC9C,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,wJAAQ,CAAC,IAAI,CAAC,UAAU;wBAC5D,IAAI,YAAY,OAAO,EAAE,MAAM;4BAC7B,UAAU,YAAY,OAAO,CAAC,IAAI,CAAC,EAAE;4BACrC;wBACF;wBAEA,oCAAoC;wBACpC,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,wJAAQ,CAAC,IAAI,CAAC,OAAO;wBACtD,UAAU,SAAS,IAAI,EAAE;oBAC3B,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,uBAAuB;wBACrC,UAAU;oBACZ;gBACF;;YACA;QACF;mCAAG,EAAE;IAEL,OAAO;QAAE;IAAO;AAClB;GA1Ba"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useActivityHistory.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useCurrentUser } from './useCurrentUser';\r\nimport { ActivityFilters } from '@/pages/History';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\n\r\nexport interface ActivityHistoryItem {\r\n  id: string;\r\n  user_id: string;\r\n  location_id: string;\r\n  activity_type: 'CREATE' | 'UPDATE' | 'DELETE';\r\n  module: 'SALES' | 'INVENTORY' | 'EXPENSES' | 'FINANCE' | 'CUSTOMERS' | 'TASKS';\r\n  entity_type: string;\r\n  entity_id: string | null;\r\n  entity_name: string;\r\n  description: string;\r\n  metadata: any;\r\n  created_at: string;\r\n  profile_id: string | null;\r\n  profile_name: string | null;\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport const useActivityHistory = (locationId?: string, filters?: ActivityFilters) => {\r\n  const { userId } = useCurrentUser();\r\n  const [activities, setActivities] = useState<ActivityHistoryItem[]>([]);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const queryClient = useQueryClient();\r\n\r\n  const fetchActivities = useCallback(async (): Promise<{ activities: ActivityHistoryItem[], count: number }> => {\r\n    if (!userId || !locationId) {\r\n      return { activities: [], count: 0 };\r\n    }\r\n\r\n    try {\r\n      let query = supabase\r\n        .from('activity_history')\r\n        .select('*', { count: 'exact' })\r\n        .eq('user_id', userId)\r\n        .eq('location_id', locationId)\r\n        .order('created_at', { ascending: false })\r\n        .range((currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE - 1);\r\n\r\n      // Apply filters\r\n      if (filters) {\r\n        if (filters.activityType !== 'ALL') {\r\n          query = query.eq('activity_type', filters.activityType);\r\n        }\r\n        if (filters.module !== 'ALL') {\r\n          query = query.eq('module', filters.module);\r\n        }\r\n        if (filters.search) {\r\n          query = query.or(`entity_name.ilike.%${filters.search}%,description.ilike.%${filters.search}%`);\r\n        }\r\n        if (filters.dateRange.from) {\r\n          query = query.gte('created_at', filters.dateRange.from.toISOString());\r\n        }\r\n        if (filters.dateRange.to) {\r\n          const toDate = new Date(filters.dateRange.to);\r\n          toDate.setHours(23, 59, 59, 999);\r\n          query = query.lte('created_at', toDate.toISOString());\r\n        }\r\n      }\r\n\r\n      const { data, error, count } = await query;\r\n\r\n      if (error) {\r\n        console.error('Error fetching activity history:', error);\r\n        return { activities: [], count: 0 };\r\n      }\r\n\r\n      return { activities: (data || []) as ActivityHistoryItem[], count: count || 0 };\r\n    } catch (error) {\r\n      console.error('Error fetching activity history:', error);\r\n      return { activities: [], count: 0 };\r\n    }\r\n  }, [userId, locationId, currentPage, filters]);\r\n\r\n  // React Query caching\r\n  const queryKey = ['activity_history', userId, locationId, currentPage, filters];\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching } = useQuery({\r\n    queryKey,\r\n    queryFn: fetchActivities,\r\n    enabled: !!userId && !!locationId,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setActivities(queriedData.activities);\r\n      setTotalCount(queriedData.count);\r\n      setTotalPages(Math.ceil(queriedData.count / ITEMS_PER_PAGE));\r\n    }\r\n  }, [queriedData]);\r\n\r\n  // Derived loading state - only true when no cached page data\r\n  const isLoading = isQueryLoading && !queriedData;\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1); // Reset to first page when filters change\r\n  }, [filters]);\r\n\r\n  const refetchActivities = () => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  };\r\n\r\n  // Realtime: invalidate activity history cache on changes for current location\r\n  useEffect(() => {\r\n    if (!userId || !locationId) return;\r\n\r\n    const channel = supabase\r\n      .channel('activity_history_changes')\r\n      .on('postgres_changes', {\r\n        event: '*',\r\n        schema: 'public',\r\n        table: 'activity_history',\r\n        filter: `location_id=eq.${locationId}`\r\n      }, () => {\r\n        queryClient.invalidateQueries({ queryKey });\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [userId, locationId, currentPage, filters]);\r\n\r\n  return {\r\n    activities,\r\n    isLoading,\r\n    totalCount,\r\n    currentPage,\r\n    totalPages,\r\n    setCurrentPage,\r\n    refetch: refetchActivities\r\n  };\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n        warning:\r\n          \"border-transparent bg-amber-500 text-white hover:bg-amber-600\",\r\n        success:\r\n          \"border-transparent bg-green-600 text-white hover:bg-green-700\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useFinancialVisibility.ts"],"sourcesContent":["import { useProfiles } from '@/contexts/ProfileContext';\r\n\r\n/**\r\n * Hook to handle financial data visibility based on permissions\r\n */\r\nexport const useFinancialVisibility = () => {\r\n    const { hasPermission } = useProfiles();\r\n\r\n    const canViewCostPrice = hasPermission('inventory', 'view_cost_price');\r\n    const canViewProfit = hasPermission('inventory', 'view_profit');\r\n    const canViewSellingPrice = hasPermission('inventory', 'view_selling_price');\r\n\r\n    // Dashboard-specific permissions\r\n    const canViewTotalSales = hasPermission('dashboard', 'view_total_sales');\r\n    const canViewTotalGrossProfit = hasPermission('dashboard', 'view_gross_profit');\r\n    const canViewTotalExpenses = hasPermission('dashboard', 'view_total_expenses');\r\n    const canViewInventoryValue = hasPermission('dashboard', 'view_inventory_value');\r\n    const canViewSalesTypes = hasPermission('dashboard', 'view_sales_types');\r\n    const canViewAvgPrice = hasPermission('dashboard', 'view_avg_price');\r\n    const canViewTotalAmount = hasPermission('dashboard', 'view_total_amount');\r\n\r\n    // Finance and Expenses permissions\r\n    const canManageFinanceAccounts = hasPermission('finance', 'manage_accounts');\r\n    const canViewFinance = hasPermission('finance', 'view');\r\n    const canViewExpenses = hasPermission('expenses', 'view');\r\n    const canCreateExpenses = hasPermission('expenses', 'create');\r\n    const canEditExpenses = hasPermission('expenses', 'edit');\r\n    const canDeleteExpenses = hasPermission('expenses', 'delete');\r\n\r\n    /**\r\n     * Format a financial value or return a hidden indicator\r\n     */\r\n    const formatFinancial = (value: number | null | undefined, type: 'cost' | 'selling' | 'profit'): string => {\r\n        const hasAccess =\r\n            (type === 'cost' && canViewCostPrice) ||\r\n            (type === 'selling' && canViewSellingPrice) ||\r\n            (type === 'profit' && canViewProfit);\r\n\r\n        if (!hasAccess) {\r\n            return '‚Ä¢‚Ä¢‚Ä¢';\r\n        }\r\n\r\n        return value?.toLocaleString() || '0';\r\n    };\r\n\r\n    return {\r\n        canViewCostPrice,\r\n        canViewProfit,\r\n        canViewSellingPrice,\r\n        canViewTotalSales,\r\n        canViewTotalGrossProfit,\r\n        canViewTotalExpenses,\r\n        canViewInventoryValue,\r\n        canViewSalesTypes,\r\n        canViewAvgPrice,\r\n        canViewTotalAmount,\r\n        canManageFinanceAccounts,\r\n        canViewFinance,\r\n        canViewExpenses,\r\n        canCreateExpenses,\r\n        canEditExpenses,\r\n        canDeleteExpenses,\r\n        formatFinancial,\r\n    };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;;AAKO,MAAM,yBAAyB;;IAClC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,oJAAW;IAErC,MAAM,mBAAmB,cAAc,aAAa;IACpD,MAAM,gBAAgB,cAAc,aAAa;IACjD,MAAM,sBAAsB,cAAc,aAAa;IAEvD,iCAAiC;IACjC,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,0BAA0B,cAAc,aAAa;IAC3D,MAAM,uBAAuB,cAAc,aAAa;IACxD,MAAM,wBAAwB,cAAc,aAAa;IACzD,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,kBAAkB,cAAc,aAAa;IACnD,MAAM,qBAAqB,cAAc,aAAa;IAEtD,mCAAmC;IACnC,MAAM,2BAA2B,cAAc,WAAW;IAC1D,MAAM,iBAAiB,cAAc,WAAW;IAChD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IACpD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IAEpD;;KAEC,GACD,MAAM,kBAAkB,CAAC,OAAkC;QACvD,MAAM,YACF,AAAC,SAAS,UAAU,oBACnB,SAAS,aAAa,uBACtB,SAAS,YAAY;QAE1B,IAAI,CAAC,WAAW;YACZ,OAAO;QACX;QAEA,OAAO,OAAO,oBAAoB;IACtC;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA3Da;;QACiB,oJAAW"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const { data, error } = await (supabase\r\n        .from('business_settings' as any)\r\n        .select('*')\r\n        .eq('location_id', currentBusiness.id)\r\n        .maybeSingle()) as { data: any, error: any };\r\n      if (error && error.code !== 'PGRST116') {\r\n        console.error('Error loading business settings:', error);\r\n        throw error;\r\n      }\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name,\r\n          businessAddress: data.business_address,\r\n          businessPhone: data.business_phone,\r\n          businessEmail: data.business_email,\r\n          businessLogo: data.business_logo,\r\n          currency: data.currency,\r\n          signature: data.signature,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const { data: userData } = await supabase.auth.getUser();\r\n      if (!userData.user) {\r\n        console.error('User not authenticated');\r\n        throw new Error('User not authenticated');\r\n      }\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        user_id: userData.user.id,\r\n        location_id: currentBusiness.id,\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const { data, error } = await (supabase\r\n        .from('business_settings' as any)\r\n        .upsert(updateData, {\r\n          onConflict: 'location_id'\r\n        })\r\n        .select()\r\n        .single()) as { data: any, error: any };\r\n\r\n      if (error) {\r\n        console.error('Supabase error updating business settings:', error);\r\n        throw error;\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/history/HistoryItem.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card } from '@/components/ui/card';\r\nimport { ActivityHistoryItem } from '@/hooks/useActivityHistory';\r\nimport {\r\n  ShoppingCart,\r\n  Package,\r\n  Receipt,\r\n  CreditCard,\r\n  Users,\r\n  CheckSquare,\r\n  Plus,\r\n  Edit,\r\n  Trash2,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { formatNumber } from '@/lib/utils';\r\n\r\ninterface HistoryItemProps {\r\n  activities: ActivityHistoryItem[];\r\n  isGrouped?: boolean;\r\n  activity?: ActivityHistoryItem; // For backward compatibility if needed, though we'll use activities[0]\r\n}\r\n\r\nconst getModuleIcon = (module: string) => {\r\n  switch (module) {\r\n    case 'SALES':\r\n      return <ShoppingCart className=\"h-4 w-4\" />;\r\n    case 'INVENTORY':\r\n      return <Package className=\"h-4 w-4\" />;\r\n    case 'EXPENSES':\r\n      return <Receipt className=\"h-4 w-4\" />;\r\n    case 'FINANCE':\r\n      return <CreditCard className=\"h-4 w-4\" />;\r\n    case 'CUSTOMERS':\r\n      return <Users className=\"h-4 w-4\" />;\r\n    case 'TASKS':\r\n      return <CheckSquare className=\"h-4 w-4\" />;\r\n    default:\r\n      return <Package className=\"h-4 w-4\" />;\r\n  }\r\n};\r\n\r\nconst getActivityIcon = (activityType: string) => {\r\n  switch (activityType) {\r\n    case 'CREATE':\r\n      return <Plus className=\"h-3 w-3\" />;\r\n    case 'UPDATE':\r\n      return <Edit className=\"h-3 w-3\" />;\r\n    case 'DELETE':\r\n      return <Trash2 className=\"h-3 w-3\" />;\r\n    default:\r\n      return <Edit className=\"h-3 w-3\" />;\r\n  }\r\n};\r\n\r\nconst getActivityVariant = (activityType: string) => {\r\n  switch (activityType) {\r\n    case 'CREATE':\r\n      return 'default';\r\n    case 'UPDATE':\r\n      return 'secondary';\r\n    case 'DELETE':\r\n      return 'destructive';\r\n    default:\r\n      return 'secondary';\r\n  }\r\n};\r\n\r\nconst getModuleColor = (module: string) => {\r\n  switch (module) {\r\n    case 'SALES':\r\n      return 'text-green-600 bg-green-50 border-green-200';\r\n    case 'INVENTORY':\r\n      return 'text-blue-600 bg-blue-50 border-blue-200';\r\n    case 'EXPENSES':\r\n      return 'text-red-600 bg-red-50 border-red-200';\r\n    case 'FINANCE':\r\n      return 'text-purple-600 bg-purple-50 border-purple-200';\r\n    case 'CUSTOMERS':\r\n      return 'text-orange-600 bg-orange-50 border-orange-200';\r\n    case 'TASKS':\r\n      return 'text-indigo-600 bg-indigo-50 border-indigo-200';\r\n    default:\r\n      return 'text-gray-600 bg-gray-50 border-gray-200';\r\n  }\r\n};\r\n\r\nexport const HistoryItem: React.FC<HistoryItemProps> = ({ activities, isGrouped, activity: singleActivity }) => {\r\n  // Handle both new array prop and legacy single prop\r\n  const activityList = activities || (singleActivity ? [singleActivity] : []);\r\n  if (activityList.length === 0) return null;\r\n\r\n  const latestActivity = activityList[0];\r\n\r\n  return (\r\n    <Card className=\"p-3 md:p-4 transition-colors hover:bg-muted/50\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4\">\r\n        {/* Mobile: Icon and header on same line */}\r\n        <div className=\"flex items-start gap-3 flex-1\">\r\n          <div className={`p-2 rounded-lg border flex-shrink-0 ${getModuleColor(latestActivity.module)}`}>\r\n            {getModuleIcon(latestActivity.module)}\r\n          </div>\r\n\r\n          <div className=\"flex-1 min-w-0\">\r\n            {/* Entity name - ensure it doesn't overflow */}\r\n            <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n              <span className=\"font-medium text-foreground leading-tight break-words\">\r\n                {latestActivity.entity_name}\r\n              </span>\r\n              <div className=\"text-xs text-muted-foreground whitespace-nowrap flex-shrink-0 sm:hidden\">\r\n                {formatDistanceToNow(new Date(latestActivity.created_at), { addSuffix: true })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Badges - wrap on mobile */}\r\n            <div className=\"flex flex-wrap items-center gap-1 mb-2\">\r\n              <Badge variant={getActivityVariant(latestActivity.activity_type) as any} className=\"gap-1 text-xs\">\r\n                {getActivityIcon(latestActivity.activity_type)}\r\n                <span className=\"hidden xs:inline\">{latestActivity.activity_type}</span>\r\n                <span className=\"xs:hidden\">{latestActivity.activity_type.charAt(0)}</span>\r\n              </Badge>\r\n              <Badge variant=\"outline\" className=\"text-xs\">\r\n                {latestActivity.module}\r\n              </Badge>\r\n              {latestActivity.profile_name && (\r\n                <Badge variant=\"secondary\" className=\"text-xs truncate max-w-24\">\r\n                  {latestActivity.profile_name}\r\n                </Badge>\r\n              )}\r\n              {isGrouped && (\r\n                <Badge variant=\"outline\" className=\"text-xs bg-muted/50\">\r\n                  <Clock className=\"h-3 w-3 mr-1\" />\r\n                  {activityList.length} actions\r\n                </Badge>\r\n              )}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <p className=\"text-sm text-muted-foreground mb-2 leading-relaxed\">\r\n              {latestActivity.description}\r\n            </p>\r\n\r\n            {/* Details */}\r\n            {latestActivity.metadata && Object.keys(latestActivity.metadata).length > 0 && (\r\n              <div className=\"text-xs text-muted-foreground\">\r\n                <details className=\"cursor-pointer group\">\r\n                  <summary className=\"hover:text-foreground py-1 select-none flex items-center gap-1\">\r\n                    <span className=\"group-open:rotate-90 transition-transform inline-block\">‚ñ∏</span> View details\r\n                  </summary>\r\n                  <div className=\"mt-2 pl-2 border-l-2 border-muted\">\r\n                    {latestActivity.module === 'SALES' && latestActivity.metadata.items ? (\r\n                      <SaleDetailsView metadata={latestActivity.metadata} />\r\n                    ) : (\r\n                      <pre className=\"mt-1 p-2 bg-muted rounded text-xs overflow-auto max-h-40\">\r\n                        {JSON.stringify(latestActivity.metadata, null, 2)}\r\n                      </pre>\r\n                    )}\r\n                  </div>\r\n                </details>\r\n              </div>\r\n            )}\r\n\r\n            {/* Timeline for Grouped Activities */}\r\n            {isGrouped && activityList.length > 1 && (\r\n              <div className=\"mt-3 pt-3 border-t\">\r\n                <details className=\"cursor-pointer group\">\r\n                  <summary className=\"text-xs font-medium hover:text-foreground select-none flex items-center gap-1\">\r\n                    <span className=\"group-open:rotate-90 transition-transform inline-block\">‚ñ∏</span> Activity Timeline ({activityList.length} actions)\r\n                  </summary>\r\n                  <div className=\"mt-3 space-y-3 pl-1\">\r\n                    {activityList.map((item, index) => (\r\n                      <div key={item.id} className=\"relative pl-4 border-l border-border last:border-0 pb-1\">\r\n                        {/* Timeline dot */}\r\n                        <div className={`absolute -left-[5px] top-1.5 h-2.5 w-2.5 rounded-full border ${index === 0 ? 'bg-primary border-primary' : 'bg-background border-muted-foreground'\r\n                          }`} />\r\n\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          <div className=\"flex items-center gap-2 flex-wrap\">\r\n                            <Badge variant={getActivityVariant(item.activity_type) as any} className=\"text-[10px] h-5 px-1.5\">\r\n                              {item.activity_type}\r\n                            </Badge>\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {formatDistanceToNow(new Date(item.created_at), { addSuffix: true })}\r\n                            </span>\r\n                            {item.profile_name && (\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                by {item.profile_name}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {item.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </details>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Desktop timestamp */}\r\n        <div className=\"text-xs text-muted-foreground whitespace-nowrap hidden sm:block flex-shrink-0\">\r\n          {formatDistanceToNow(new Date(latestActivity.created_at), { addSuffix: true })}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Component for displaying sale details in a user-friendly format\r\nconst SaleDetailsView: React.FC<{ metadata: any }> = ({ metadata }) => {\r\n  const { canViewSellingPrice, canViewProfit, canViewTotalAmount } = useFinancialVisibility();\r\n  const { settings } = useBusinessSettings();\r\n  const currency = settings?.currency || 'UGX';\r\n\r\n  return (\r\n    <div className=\"space-y-3 p-2 md:p-3 bg-muted rounded\">\r\n      {/* Sale Summary - Stack on mobile */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 pb-2 border-b border-border\">\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Receipt #</span>\r\n          <p className=\"text-sm font-mono break-all\">{metadata.receiptNumber}</p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Total Amount</span>\r\n          <p className=\"text-sm font-semibold\">\r\n            {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(metadata.totalAmount || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Payment Status</span>\r\n          <p className=\"text-sm\">{metadata.paymentStatus}</p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Profit</span>\r\n          <p className=\"text-sm\">\r\n            {canViewProfit ? `${currency} ${formatNumber(metadata.profit || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Additional Info for Deletions */}\r\n      {metadata.restoredToInventory && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-orange-600\">‚ö†Ô∏è Inventory Restored</span>\r\n          <p className=\"text-xs text-muted-foreground\">Product quantities were restored to inventory</p>\r\n        </div>\r\n      )}\r\n\r\n      {metadata.hadCashTransaction && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-red-600\">üí∞ Cash Transaction Removed</span>\r\n          <p className=\"text-xs text-muted-foreground\">Associated cash transaction was also deleted</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Customer Information */}\r\n      {(metadata.customerAddress || metadata.customerContact) && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Customer Details</span>\r\n          {metadata.customerAddress && (\r\n            <p className=\"text-xs\">Address: {metadata.customerAddress}</p>\r\n          )}\r\n          {metadata.customerContact && (\r\n            <p className=\"text-xs\">Contact: {metadata.customerContact}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      {/* Items */}\r\n      {metadata.items && metadata.items.length > 0 && (\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Items ({metadata.items.length})</span>\r\n          <div className=\"mt-1 space-y-2 max-h-40 overflow-y-auto\">\r\n            {metadata.items.map((item: any, index: number) => (\r\n              <div key={index} className=\"p-2 bg-background rounded border\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-xs font-medium break-words\">{item.description}</p>\r\n                  <div className=\"flex flex-col xs:flex-row xs:justify-between gap-1\">\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Qty: {item.quantity} √ó {canViewSellingPrice ? `${currency} ${formatNumber(item.price || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n                    </p>\r\n                    <p className=\"text-xs font-medium\">\r\n                      = {canViewSellingPrice ? `${currency} ${formatNumber(item.total || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n                    </p>\r\n                  </div>\r\n                  {item.discountPercentage > 0 && (\r\n                    <p className=\"text-xs text-orange-600\">\r\n                      Discount: {item.discountPercentage}% ({canViewSellingPrice ? `${currency} ${formatNumber(item.discountAmount || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'})\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Payment Details */}\r\n      {metadata.amountPaid !== undefined && (\r\n        <div className=\"pt-2 border-t border-border\">\r\n          <div className=\"grid grid-cols-1 xs:grid-cols-2 gap-2 text-xs\">\r\n            <div>\r\n              <span className=\"text-muted-foreground\">Amount Paid:</span>\r\n              <span className=\"ml-1 font-medium\">\r\n                {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(metadata.amountPaid || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n              </span>\r\n            </div>\r\n            {metadata.taxRate > 0 && (\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Tax Rate:</span>\r\n                <span className=\"ml-1\">{metadata.taxRate}%</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Notes */}\r\n      {metadata.notes && (\r\n        <div className=\"pt-2 border-t border-border\">\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Notes</span>\r\n          <p className=\"text-xs\">{metadata.notes}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1472, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/history/HistoryList.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { HistoryItem } from './HistoryItem';\r\nimport { ActivityHistoryItem } from '@/hooks/useActivityHistory';\r\n\r\ninterface HistoryListProps {\r\n  activities: ActivityHistoryItem[];\r\n}\r\n\r\ninterface GroupedActivity {\r\n  key: string;\r\n  activities: ActivityHistoryItem[];\r\n  latestActivity: ActivityHistoryItem;\r\n  isGrouped: boolean;\r\n}\r\n\r\nexport const HistoryList: React.FC<HistoryListProps> = ({ activities }) => {\r\n  // Group activities by entity_id for SALES module\r\n  const groupedActivities = useMemo(() => {\r\n    const salesGroups = new Map<string, ActivityHistoryItem[]>();\r\n    const nonSalesActivities: ActivityHistoryItem[] = [];\r\n\r\n    // Separate sales from other activities\r\n    activities.forEach(activity => {\r\n      if (activity.module === 'SALES' && activity.entity_id) {\r\n        if (!salesGroups.has(activity.entity_id)) {\r\n          salesGroups.set(activity.entity_id, []);\r\n        }\r\n        salesGroups.get(activity.entity_id)!.push(activity);\r\n      } else {\r\n        nonSalesActivities.push(activity);\r\n      }\r\n    });\r\n\r\n    const grouped: GroupedActivity[] = [];\r\n\r\n    // Convert sales groups to grouped format\r\n    salesGroups.forEach((groupActivities, entityId) => {\r\n      // Sort activities within group by date (newest first)\r\n      const sortedActivities = groupActivities.sort((a, b) =>\r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      );\r\n\r\n      grouped.push({\r\n        key: `sale-${entityId}`,\r\n        activities: sortedActivities,\r\n        latestActivity: sortedActivities[0],\r\n        isGrouped: sortedActivities.length > 1\r\n      });\r\n    });\r\n\r\n    // Add non-sales as individual groups\r\n    nonSalesActivities.forEach(activity => {\r\n      grouped.push({\r\n        key: activity.id,\r\n        activities: [activity],\r\n        latestActivity: activity,\r\n        isGrouped: false\r\n      });\r\n    });\r\n\r\n    // Sort all groups by latest activity date\r\n    return grouped.sort((a, b) =>\r\n      new Date(b.latestActivity.created_at).getTime() -\r\n      new Date(a.latestActivity.created_at).getTime()\r\n    );\r\n  }, [activities]);\r\n\r\n  if (groupedActivities.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-muted-foreground\">No activities found for the selected filters.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3 md:space-y-4\">\r\n      {groupedActivities.map((group) => (\r\n        <HistoryItem\r\n          key={group.key}\r\n          activities={group.activities}\r\n          isGrouped={group.isGrouped}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAcO,MAAM,cAA0C,CAAC,EAAE,UAAU,EAAE;;IACpE,iDAAiD;IACjD,MAAM,oBAAoB,IAAA,wKAAO;kDAAC;YAChC,MAAM,cAAc,IAAI;YACxB,MAAM,qBAA4C,EAAE;YAEpD,uCAAuC;YACvC,WAAW,OAAO;0DAAC,CAAA;oBACjB,IAAI,SAAS,MAAM,KAAK,WAAW,SAAS,SAAS,EAAE;wBACrD,IAAI,CAAC,YAAY,GAAG,CAAC,SAAS,SAAS,GAAG;4BACxC,YAAY,GAAG,CAAC,SAAS,SAAS,EAAE,EAAE;wBACxC;wBACA,YAAY,GAAG,CAAC,SAAS,SAAS,EAAG,IAAI,CAAC;oBAC5C,OAAO;wBACL,mBAAmB,IAAI,CAAC;oBAC1B;gBACF;;YAEA,MAAM,UAA6B,EAAE;YAErC,yCAAyC;YACzC,YAAY,OAAO;0DAAC,CAAC,iBAAiB;oBACpC,sDAAsD;oBACtD,MAAM,mBAAmB,gBAAgB,IAAI;mFAAC,CAAC,GAAG,IAChD,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;;oBAGnE,QAAQ,IAAI,CAAC;wBACX,KAAK,CAAC,KAAK,EAAE,UAAU;wBACvB,YAAY;wBACZ,gBAAgB,gBAAgB,CAAC,EAAE;wBACnC,WAAW,iBAAiB,MAAM,GAAG;oBACvC;gBACF;;YAEA,qCAAqC;YACrC,mBAAmB,OAAO;0DAAC,CAAA;oBACzB,QAAQ,IAAI,CAAC;wBACX,KAAK,SAAS,EAAE;wBAChB,YAAY;4BAAC;yBAAS;wBACtB,gBAAgB;wBAChB,WAAW;oBACb;gBACF;;YAEA,0CAA0C;YAC1C,OAAO,QAAQ,IAAI;0DAAC,CAAC,GAAG,IACtB,IAAI,KAAK,EAAE,cAAc,CAAC,UAAU,EAAE,OAAO,KAC7C,IAAI,KAAK,EAAE,cAAc,CAAC,UAAU,EAAE,OAAO;;QAEjD;iDAAG;QAAC;KAAW;IAEf,IAAI,kBAAkB,MAAM,KAAK,GAAG;QAClC,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,kBAAkB,GAAG,CAAC,CAAC,sBACtB,6LAAC,8JAAW;gBAEV,YAAY,MAAM,UAAU;gBAC5B,WAAW,MAAM,SAAS;eAFrB,MAAM,GAAG;;;;;;;;;;AAOxB;GAvEa;KAAA"}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/calendar.tsx"],"sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { DayPicker } from \"react-day-picker\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3 pointer-events-auto\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        caption_dropdowns: \"flex justify-center gap-1\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        dropdown: \"bg-background rounded-md border p-1 shadow-md\",\r\n        dropdown_month: \"w-[var(--rdp-caption-dropdown-month-width)]\",\r\n        dropdown_year: \"w-[var(--rdp-caption-dropdown-year-width)]\",\r\n        dropdown_icon: \"w-4 h-4\",\r\n        button_reset: \"appearance-none bg-transparent border-none p-0 m-0\",\r\n        vhidden: \"sr-only\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nCalendar.displayName = \"Calendar\";\r\n\r\nexport { Calendar };\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAEA;AACA;;;;;;AAIA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,6LAAC,8KAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,4HAAE,EAAC,2BAA2B;QACzC,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,mBAAmB;YACnB,KAAK;YACL,YAAY,IAAA,4HAAE,EACZ,IAAA,uJAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,4HAAE,EACL,IAAA,uJAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,UAAU;YACV,gBAAgB;YAChB,eAAe;YACf,eAAe;YACf,cAAc;YACd,SAAS;YACT,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,GAAG,QAAQ,iBAAK,6LAAC,sOAAW;oBAAC,WAAU;;;;;;YACpD,WAAW,CAAC,EAAE,GAAG,QAAQ,iBAAK,6LAAC,yOAAY;oBAAC,WAAU;;;;;;QACxD;QACC,GAAG,KAAK;;;;;;AAGf;KA1DS;AA2DT,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1673, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,MAAM,+BAAiB,2KAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,4HAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 1721, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/pages/History.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useActivityHistory } from '@/hooks/useActivityHistory';\r\nimport { HistoryList } from '@/components/history/HistoryList';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { format } from 'date-fns';\r\nimport { Calendar as CalendarIcon, Filter, Search, X } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\n\r\nexport interface ActivityFilters {\r\n    activityType: 'ALL' | 'CREATE' | 'UPDATE' | 'DELETE';\r\n    module: 'ALL' | 'SALES' | 'INVENTORY' | 'EXPENSES' | 'FINANCE' | 'CUSTOMERS' | 'TASKS';\r\n    search: string;\r\n    dateRange: {\r\n        from: Date | undefined;\r\n        to: Date | undefined;\r\n    };\r\n}\r\n\r\nconst HistoryPage = () => {\r\n    const { currentBusiness } = useBusiness();\r\n    const [filters, setFilters] = useState<ActivityFilters>({\r\n        activityType: 'ALL',\r\n        module: 'ALL',\r\n        search: '',\r\n        dateRange: {\r\n            from: undefined,\r\n            to: undefined,\r\n        },\r\n    });\r\n\r\n    const { activities, isLoading, totalPages, currentPage, setCurrentPage } = useActivityHistory(\r\n        currentBusiness?.id,\r\n        filters\r\n    );\r\n\r\n    const clearFilters = () => {\r\n        setFilters({\r\n            activityType: 'ALL',\r\n            module: 'ALL',\r\n            search: '',\r\n            dateRange: {\r\n                from: undefined,\r\n                to: undefined,\r\n            },\r\n        });\r\n    };\r\n\r\n    const hasActiveFilters = filters.activityType !== 'ALL' ||\r\n        filters.module !== 'ALL' ||\r\n        filters.search !== '' ||\r\n        filters.dateRange.from !== undefined;\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4 md:p-6 space-y-6 max-w-6xl\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Recent Activity</h1>\r\n                    <p className=\"text-muted-foreground mt-1\">\r\n                        Track all actions and changes across your business\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 justify-between\">\r\n                        <CardTitle className=\"text-lg font-medium flex items-center gap-2\">\r\n                            <Filter className=\"h-5 w-5\" />\r\n                            Filters\r\n                        </CardTitle>\r\n                        {hasActiveFilters && (\r\n                            <Button variant=\"ghost\" size=\"sm\" onClick={clearFilters} className=\"h-8 px-2 text-muted-foreground hover:text-foreground\">\r\n                                <X className=\"h-4 w-4 mr-1\" />\r\n                                Clear Filters\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                        {/* Search */}\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"Search activities...\"\r\n                                className=\"pl-9\"\r\n                                value={filters.search}\r\n                                onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Module Filter */}\r\n                        <Select\r\n                            value={filters.module}\r\n                            onValueChange={(value: any) => setFilters(prev => ({ ...prev, module: value }))}\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"All Modules\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"ALL\">All Modules</SelectItem>\r\n                                <SelectItem value=\"SALES\">Sales</SelectItem>\r\n                                <SelectItem value=\"INVENTORY\">Inventory</SelectItem>\r\n                                <SelectItem value=\"EXPENSES\">Expenses</SelectItem>\r\n                                <SelectItem value=\"CUSTOMERS\">Customers</SelectItem>\r\n                                <SelectItem value=\"FINANCE\">Finance</SelectItem>\r\n                                <SelectItem value=\"TASKS\">Tasks</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Activity Type Filter */}\r\n                        <Select\r\n                            value={filters.activityType}\r\n                            onValueChange={(value: any) => setFilters(prev => ({ ...prev, activityType: value }))}\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"All Actions\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"ALL\">All Actions</SelectItem>\r\n                                <SelectItem value=\"CREATE\">Created</SelectItem>\r\n                                <SelectItem value=\"UPDATE\">Updated</SelectItem>\r\n                                <SelectItem value=\"DELETE\">Deleted</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Date Range Picker */}\r\n                        <Popover>\r\n                            <PopoverTrigger asChild>\r\n                                <Button\r\n                                    variant={\"outline\"}\r\n                                    className={cn(\r\n                                        \"justify-start text-left font-normal\",\r\n                                        !filters.dateRange.from && \"text-muted-foreground\"\r\n                                    )}\r\n                                >\r\n                                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                                    {filters.dateRange.from ? (\r\n                                        filters.dateRange.to ? (\r\n                                            <>\r\n                                                {format(filters.dateRange.from, \"LLL dd, y\")} -{\" \"}\r\n                                                {format(filters.dateRange.to, \"LLL dd, y\")}\r\n                                            </>\r\n                                        ) : (\r\n                                            format(filters.dateRange.from, \"LLL dd, y\")\r\n                                        )\r\n                                    ) : (\r\n                                        <span>Pick a date range</span>\r\n                                    )}\r\n                                </Button>\r\n                            </PopoverTrigger>\r\n                            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                <Calendar\r\n                                    initialFocus\r\n                                    mode=\"range\"\r\n                                    defaultMonth={filters.dateRange.from}\r\n                                    selected={filters.dateRange}\r\n                                    onSelect={(range) => setFilters(prev => ({\r\n                                        ...prev,\r\n                                        dateRange: { from: range?.from, to: range?.to }\r\n                                    }))}\r\n                                    numberOfMonths={2}\r\n                                />\r\n                            </PopoverContent>\r\n                        </Popover>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {isLoading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <LoadingSpinner message=\"Loading activity history...\" />\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    <HistoryList activities={activities} />\r\n\r\n                    {/* Pagination */}\r\n                    {totalPages > 1 && (\r\n                        <div className=\"flex justify-center gap-2 mt-6\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                                disabled={currentPage === 1}\r\n                            >\r\n                                Previous\r\n                            </Button>\r\n                            <div className=\"flex items-center px-4 text-sm text-muted-foreground\">\r\n                                Page {currentPage} of {totalPages}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                                disabled={currentPage === totalPages}\r\n                            >\r\n                                Next\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HistoryPage;\r\n"],"names":[],"mappings":"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"}}]
}