{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useExpenses.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  getExpensesAction,\r\n  createExpenseAction,\r\n  updateExpenseAction,\r\n  deleteExpenseAction,\r\n  createBulkCashTransactionsAction,\r\n  ExpenseInput\r\n} from '@/app/actions/finance';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\n\r\nexport interface Expense {\r\n  id: string;\r\n  amount: number;\r\n  description: string;\r\n  category?: string;\r\n  date: Date;\r\n  paymentMethod?: string;\r\n  personInCharge?: string;\r\n  receiptImage?: string;\r\n  cashAccountId?: string;\r\n  cashTransactionId?: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport const useExpenses = () => {\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadExpenses = useCallback(async (): Promise<Expense[]> => {\r\n    if (!currentBusiness) {\r\n      return [];\r\n    }\r\n\r\n    try {\r\n      const result = await getExpensesAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch expenses');\r\n      }\r\n\r\n      const formattedExpenses: Expense[] = result.data.map((expense: any) => ({\r\n        id: expense.id,\r\n        amount: Number(expense.amount),\r\n        description: expense.description,\r\n        category: expense.category,\r\n        date: new Date(expense.date),\r\n        paymentMethod: expense.paymentMethod,\r\n        personInCharge: expense.personInCharge,\r\n        receiptImage: expense.receiptImage,\r\n        cashAccountId: expense.cashAccountId,\r\n        cashTransactionId: expense.cashTransactionId,\r\n        createdAt: new Date(expense.createdAt),\r\n        updatedAt: new Date(expense.updatedAt)\r\n      }));\r\n\r\n      return formattedExpenses;\r\n    } catch (error) {\r\n      console.error('Error loading expenses:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load expenses. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  // React Query caching\r\n  const queryKey = ['expenses', currentBusiness?.id];\r\n  const { data: queriedExpenses, isLoading: isQueryLoading, isFetching } = useQuery({\r\n    queryKey,\r\n    queryFn: loadExpenses,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedExpenses) {\r\n      setExpenses(queriedExpenses);\r\n    }\r\n  }, [queriedExpenses]);\r\n\r\n  // Only report loading when there is no cached data yet to avoid skeleton flash\r\n  const isLoading = isQueryLoading && !queriedExpenses;\r\n\r\n  const createExpense = async (expenseData: {\r\n    amount: number;\r\n    description: string;\r\n    category?: string;\r\n    date: Date;\r\n    paymentMethod?: string;\r\n    personInCharge?: string;\r\n    receiptImage?: string;\r\n    linkToCash?: boolean;\r\n    cashAccountId?: string;\r\n  }) => {\r\n    if (!currentBusiness || !user) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: !currentBusiness ? \"No business selected\" : \"User not authenticated\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const input: ExpenseInput = {\r\n        amount: expenseData.amount,\r\n        description: expenseData.description,\r\n        category: expenseData.category,\r\n        date: expenseData.date,\r\n        paymentMethod: expenseData.paymentMethod,\r\n        personInCharge: expenseData.personInCharge,\r\n        receiptImage: expenseData.receiptImage,\r\n        cashAccountId: expenseData.cashAccountId,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      };\r\n\r\n      const result = await createExpenseAction(input, !!expenseData.linkToCash);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error);\r\n      }\r\n\r\n      const data = result.data;\r\n      const newExpense: Expense = {\r\n        id: data.id,\r\n        amount: Number(data.amount),\r\n        description: data.description,\r\n        category: data.category,\r\n        date: new Date(data.date),\r\n        paymentMethod: data.paymentMethod,\r\n        personInCharge: data.personInCharge,\r\n        receiptImage: data.receiptImage,\r\n        cashAccountId: data.cashAccountId,\r\n        cashTransactionId: data.cashTransactionId,\r\n        createdAt: new Date(data.createdAt),\r\n        updatedAt: new Date(data.updatedAt)\r\n      };\r\n\r\n      // Update local state and cache\r\n      setExpenses(prev => [newExpense, ...prev]);\r\n      queryClient.setQueryData(queryKey, (oldData: Expense[] | undefined) => {\r\n        return oldData ? [newExpense, ...oldData] : [newExpense];\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Expense created successfully\"\r\n      });\r\n\r\n      return newExpense;\r\n    } catch (error) {\r\n      console.error('Error creating expense:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create expense. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateExpense = async (id: string, updates: Partial<Expense & { linkToCash?: boolean }>) => {\r\n    try {\r\n      const currentExpense = expenses.find(exp => exp.id === id);\r\n      if (!currentExpense) throw new Error('Expense not found');\r\n\r\n      // Prepare update payload\r\n      const updatePayload = {\r\n        amount: updates.amount !== undefined ? updates.amount : currentExpense.amount,\r\n        description: updates.description !== undefined ? updates.description : currentExpense.description,\r\n        category: updates.category !== undefined ? updates.category : currentExpense.category,\r\n        date: updates.date !== undefined ? updates.date : currentExpense.date,\r\n        paymentMethod: updates.paymentMethod !== undefined ? updates.paymentMethod : currentExpense.paymentMethod,\r\n        personInCharge: updates.personInCharge !== undefined ? updates.personInCharge : currentExpense.personInCharge,\r\n        receiptImage: updates.receiptImage !== undefined ? updates.receiptImage : currentExpense.receiptImage,\r\n        cashAccountId: updates.linkToCash ? updates.cashAccountId : (updates.linkToCash === false ? null : currentExpense.cashAccountId)\r\n      };\r\n\r\n      const result = await updateExpenseAction(id, updatePayload, currentExpense);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Expense updated successfully\"\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating expense:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update expense. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteExpense = async (id: string) => {\r\n    try {\r\n      const result = await deleteExpenseAction(id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      // Optimistic update\r\n      setExpenses(prev => prev.filter(e => e.id !== id));\r\n      queryClient.setQueryData(queryKey, (old: any) => {\r\n        if (!old) return old;\r\n        return (old as Expense[]).filter(e => e.id !== id);\r\n      });\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Expense deleted successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting expense:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete expense. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const refreshExpenses = async () => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  };\r\n\r\n  const createBulkExpenses = async (expensesData: {\r\n    amount: number;\r\n    description: string;\r\n    category?: string;\r\n    date: Date;\r\n    paymentMethod?: string;\r\n    personInCharge?: string;\r\n    receiptImage?: string;\r\n    linkToCash?: boolean;\r\n    cashAccountId?: string;\r\n  }[]) => {\r\n    if (!currentBusiness || !user) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: !currentBusiness ? \"No business selected\" : \"User not authenticated\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const bulkResults: Expense[] = [];\r\n\r\n      // For bulk, since each might need individual linking logic in the action, \r\n      // we'll loop calling the createExpenseAction or we could implement a bulk action.\r\n      // Reusing createExpenseAction is simpler for now as it handles the transaction.\r\n      for (const data of expensesData) {\r\n        const input: ExpenseInput = {\r\n          amount: data.amount,\r\n          description: data.description,\r\n          category: data.category,\r\n          date: data.date,\r\n          paymentMethod: data.paymentMethod,\r\n          personInCharge: data.personInCharge,\r\n          receiptImage: data.receiptImage,\r\n          cashAccountId: data.cashAccountId,\r\n          userId: user.id,\r\n          locationId: currentBusiness.id\r\n        };\r\n\r\n        const result = await createExpenseAction(input, !!data.linkToCash);\r\n\r\n        if (result.success && result.data) {\r\n          const e = result.data;\r\n          bulkResults.push({\r\n            id: e.id,\r\n            amount: Number(e.amount),\r\n            description: e.description,\r\n            category: e.category,\r\n            date: new Date(e.date),\r\n            paymentMethod: e.paymentMethod,\r\n            personInCharge: e.personInCharge,\r\n            receiptImage: e.receiptImage,\r\n            cashAccountId: e.cashAccountId,\r\n            cashTransactionId: e.cashTransactionId,\r\n            createdAt: new Date(e.createdAt),\r\n            updatedAt: new Date(e.updatedAt)\r\n          });\r\n        }\r\n      }\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Successfully created ${bulkResults.length} expenses`\r\n      });\r\n\r\n      return bulkResults;\r\n    } catch (error) {\r\n      console.error('Error creating bulk expenses:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create bulk expenses. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return {\r\n    expenses,\r\n    isLoading,\r\n    createExpense,\r\n    createBulkExpenses,\r\n    updateExpense,\r\n    deleteExpense,\r\n    refreshExpenses\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { getBusinessSettingsAction, upsertBusinessSettingsAction } from '@/app/actions/business-settings';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const data = await getBusinessSettingsAction(currentBusiness.id);\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name || '',\r\n          businessAddress: data.business_address || '',\r\n          businessPhone: data.business_phone || '',\r\n          businessEmail: data.business_email || '',\r\n          businessLogo: data.business_logo || undefined,\r\n          currency: data.currency || 'UGX',\r\n          signature: data.signature || undefined,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const userData = { user: { id: '00000000-0000-0000-0000-000000000000' } }; // Mocked user id for now\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const response = await upsertBusinessSettingsAction(currentBusiness.id, userData.user.id, updateData);\r\n\r\n      if (!response.success) {\r\n        console.error('Supabase error updating business settings:', response.error);\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useExpenseData.ts"],"sourcesContent":["import { useMemo } from 'react';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { formatCashCurrency } from '@/lib/utils';\r\nimport { Expense } from '@/hooks/useExpenses';\r\nimport { getDateRangeFromFilter, isDateInRange } from '@/utils/dateFilters';\r\n\r\nexport const useExpenseData = (\r\n  expenses: Expense[],\r\n  dateFilter: string,\r\n  customDateRange: { from: Date | undefined; to: Date | undefined }\r\n) => {\r\n  const { settings } = useBusinessSettings();\r\n\r\n  // Memoize currency formatter\r\n  const formatCurrency = useMemo(() => {\r\n    const currency = settings.currency || 'USD';\r\n    return (amount: number) => {\r\n      return formatCashCurrency(amount, currency);\r\n    };\r\n  }, [settings.currency]);\r\n\r\n  // Memoize filtered expenses based on selected date range\r\n  const filteredExpenses = useMemo(() => {\r\n    if (dateFilter === 'all') {\r\n      return expenses;\r\n    }\r\n\r\n    let from: Date | undefined;\r\n    let to: Date | undefined;\r\n\r\n    if (dateFilter === 'custom') {\r\n      from = customDateRange.from;\r\n      to = customDateRange.to;\r\n    } else {\r\n      const range = getDateRangeFromFilter(dateFilter);\r\n      from = range.from;\r\n      to = range.to;\r\n    }\r\n\r\n    return expenses.filter(expense => isDateInRange(expense.date, from, to));\r\n  }, [expenses, dateFilter, customDateRange]);\r\n\r\n  // Memoize calculated values\r\n  const expenseStats = useMemo(() => {\r\n    const totalExpenses = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);\r\n    \r\n    const thisMonthExpenses = filteredExpenses\r\n      .filter(expense => {\r\n        const expenseMonth = expense.date.getMonth();\r\n        const currentMonth = new Date().getMonth();\r\n        const expenseYear = expense.date.getFullYear();\r\n        const currentYear = new Date().getFullYear();\r\n        return expenseMonth === currentMonth && expenseYear === currentYear;\r\n      })\r\n      .reduce((sum, expense) => sum + expense.amount, 0);\r\n\r\n    return {\r\n      totalExpenses,\r\n      thisMonthExpenses,\r\n      transactionCount: filteredExpenses.length\r\n    };\r\n  }, [filteredExpenses]);\r\n\r\n  return {\r\n    filteredExpenses,\r\n    expenseStats,\r\n    formatCurrency\r\n  };\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAEA;;;;;;AAEO,MAAM,iBAAiB,CAC5B,UACA,YACA;;IAEA,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,6JAAmB;IAExC,6BAA6B;IAC7B,MAAM,iBAAiB,IAAA,wKAAO;kDAAC;YAC7B,MAAM,WAAW,SAAS,QAAQ,IAAI;YACtC;0DAAO,CAAC;oBACN,OAAO,IAAA,4IAAkB,EAAC,QAAQ;gBACpC;;QACF;iDAAG;QAAC,SAAS,QAAQ;KAAC;IAEtB,yDAAyD;IACzD,MAAM,mBAAmB,IAAA,wKAAO;oDAAC;YAC/B,IAAI,eAAe,OAAO;gBACxB,OAAO;YACT;YAEA,IAAI;YACJ,IAAI;YAEJ,IAAI,eAAe,UAAU;gBAC3B,OAAO,gBAAgB,IAAI;gBAC3B,KAAK,gBAAgB,EAAE;YACzB,OAAO;gBACL,MAAM,QAAQ,IAAA,wJAAsB,EAAC;gBACrC,OAAO,MAAM,IAAI;gBACjB,KAAK,MAAM,EAAE;YACf;YAEA,OAAO,SAAS,MAAM;4DAAC,CAAA,UAAW,IAAA,+IAAa,EAAC,QAAQ,IAAI,EAAE,MAAM;;QACtE;mDAAG;QAAC;QAAU;QAAY;KAAgB;IAE1C,4BAA4B;IAC5B,MAAM,eAAe,IAAA,wKAAO;gDAAC;YAC3B,MAAM,gBAAgB,iBAAiB,MAAM;sEAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,MAAM;qEAAE;YAEtF,MAAM,oBAAoB,iBACvB,MAAM;0EAAC,CAAA;oBACN,MAAM,eAAe,QAAQ,IAAI,CAAC,QAAQ;oBAC1C,MAAM,eAAe,IAAI,OAAO,QAAQ;oBACxC,MAAM,cAAc,QAAQ,IAAI,CAAC,WAAW;oBAC5C,MAAM,cAAc,IAAI,OAAO,WAAW;oBAC1C,OAAO,iBAAiB,gBAAgB,gBAAgB;gBAC1D;yEACC,MAAM;0EAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,MAAM;yEAAE;YAElD,OAAO;gBACL;gBACA;gBACA,kBAAkB,iBAAiB,MAAM;YAC3C;QACF;+CAAG;QAAC;KAAiB;IAErB,OAAO;QACL;QACA;QACA;IACF;AACF;GA9Da;;QAKU,6JAAmB"}},
    {"offset": {"line": 628, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useExpenseCategories.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport {\r\n  getExpenseCategoriesAction,\r\n  createExpenseCategoryAction,\r\n  deleteExpenseCategoryAction,\r\n  createDefaultExpenseCategoriesAction\r\n} from '@/app/actions/finance';\r\n\r\nexport interface ExpenseCategory {\r\n  id: string;\r\n  name: string;\r\n  isDefault: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\nconst DEFAULT_CATEGORIES = [\r\n  'Rent & Utilities',\r\n  'Salaries & Wages',\r\n  'Marketing & Advertising',\r\n  'Office Supplies & Equipment',\r\n  'Professional Services',\r\n  'Cost of bringing Goods',\r\n  'Delivery To Customer',\r\n  'Insurance',\r\n  'Licenses, Permits & Fees',\r\n  'Software & Subscriptions',\r\n  'Depreciation & Amortization',\r\n  'Training & Development',\r\n  'Communication',\r\n  'Bank & Transaction Fees',\r\n  'Miscellaneous'\r\n];\r\n\r\nexport const useExpenseCategories = () => {\r\n  const [categories, setCategories] = useState<ExpenseCategory[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n\r\n  const loadCategories = useCallback(async () => {\r\n    if (!currentBusiness?.id) {\r\n      setCategories([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const result = await getExpenseCategoriesAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch categories');\r\n      }\r\n\r\n      const formattedCategories: ExpenseCategory[] = result.data.map((category: any) => ({\r\n        ...category,\r\n        createdAt: new Date(category.createdAt)\r\n      }));\r\n\r\n      if (formattedCategories.length === 0) {\r\n        await createDefaultCategories();\r\n        return;\r\n      }\r\n\r\n      setCategories(formattedCategories);\r\n    } catch (error) {\r\n      console.error('Error loading expense categories:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load expense categories\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  const createDefaultCategories = async () => {\r\n    if (!currentBusiness?.id || !user?.id) return;\r\n\r\n    try {\r\n      const result = await createDefaultExpenseCategoriesAction(user.id, currentBusiness.id, DEFAULT_CATEGORIES);\r\n      if (result.success) {\r\n        await loadCategories();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating default categories:', error);\r\n    }\r\n  };\r\n\r\n  const createCategory = async (name: string) => {\r\n    if (!currentBusiness?.id || !user?.id) return null;\r\n\r\n    try {\r\n      // Check if category already exists (case-insensitive)\r\n      const existingCategory = categories.find(\r\n        cat => cat.name.toLowerCase() === name.toLowerCase()\r\n      );\r\n\r\n      if (existingCategory) {\r\n        toast({\r\n          title: \"Category exists\",\r\n          description: \"This category already exists.\",\r\n        });\r\n        return existingCategory;\r\n      }\r\n\r\n      const result = await createExpenseCategoryAction({\r\n        userId: user.id,\r\n        locationId: currentBusiness.id,\r\n        name,\r\n        isDefault: false\r\n      });\r\n\r\n      if (!result.success || !result.data) throw new Error(result.error);\r\n\r\n      const newCategory: ExpenseCategory = {\r\n        ...result.data,\r\n        createdAt: new Date(result.data.createdAt)\r\n      };\r\n\r\n      setCategories(prev => [...prev, newCategory]);\r\n      return newCategory;\r\n    } catch (error) {\r\n      console.error('Error creating category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create category\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const deleteCategory = async (id: string) => {\r\n    try {\r\n      const result = await deleteExpenseCategoryAction(id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      setCategories(prev => prev.filter(c => c.id !== id));\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Category deleted successfully\"\r\n      });\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete category\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, [loadCategories]);\r\n\r\n  return {\r\n    categories,\r\n    isLoading,\r\n    createCategory,\r\n    deleteCategory,\r\n    refreshCategories: loadCategories\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useFinancialVisibility.ts"],"sourcesContent":["import { useProfiles } from '@/contexts/ProfileContext';\r\n\r\n/**\r\n * Hook to handle financial data visibility based on permissions\r\n */\r\nexport const useFinancialVisibility = () => {\r\n    const { hasPermission } = useProfiles();\r\n\r\n    const canViewCostPrice = hasPermission('inventory', 'view_cost_price');\r\n    const canViewProfit = hasPermission('inventory', 'view_profit');\r\n    const canViewSellingPrice = hasPermission('inventory', 'view_selling_price');\r\n\r\n    // Dashboard-specific permissions\r\n    const canViewTotalSales = hasPermission('dashboard', 'view_total_sales');\r\n    const canViewTotalGrossProfit = hasPermission('dashboard', 'view_gross_profit');\r\n    const canViewTotalExpenses = hasPermission('dashboard', 'view_total_expenses');\r\n    const canViewInventoryValue = hasPermission('dashboard', 'view_inventory_value');\r\n    const canViewSalesTypes = hasPermission('dashboard', 'view_sales_types');\r\n    const canViewAvgPrice = hasPermission('dashboard', 'view_avg_price');\r\n    const canViewTotalAmount = hasPermission('dashboard', 'view_total_amount');\r\n\r\n    // Finance and Expenses permissions\r\n    const canManageFinanceAccounts = hasPermission('finance', 'manage_accounts');\r\n    const canViewFinance = hasPermission('finance', 'view');\r\n    const canViewExpenses = hasPermission('expenses', 'view');\r\n    const canCreateExpenses = hasPermission('expenses', 'create');\r\n    const canEditExpenses = hasPermission('expenses', 'edit');\r\n    const canDeleteExpenses = hasPermission('expenses', 'delete');\r\n\r\n    /**\r\n     * Format a financial value or return a hidden indicator\r\n     */\r\n    const formatFinancial = (value: number | null | undefined, type: 'cost' | 'selling' | 'profit'): string => {\r\n        const hasAccess =\r\n            (type === 'cost' && canViewCostPrice) ||\r\n            (type === 'selling' && canViewSellingPrice) ||\r\n            (type === 'profit' && canViewProfit);\r\n\r\n        if (!hasAccess) {\r\n            return '•••';\r\n        }\r\n\r\n        return value?.toLocaleString() || '0';\r\n    };\r\n\r\n    return {\r\n        canViewCostPrice,\r\n        canViewProfit,\r\n        canViewSellingPrice,\r\n        canViewTotalSales,\r\n        canViewTotalGrossProfit,\r\n        canViewTotalExpenses,\r\n        canViewInventoryValue,\r\n        canViewSalesTypes,\r\n        canViewAvgPrice,\r\n        canViewTotalAmount,\r\n        canManageFinanceAccounts,\r\n        canViewFinance,\r\n        canViewExpenses,\r\n        canCreateExpenses,\r\n        canEditExpenses,\r\n        canDeleteExpenses,\r\n        formatFinancial,\r\n    };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;;AAKO,MAAM,yBAAyB;;IAClC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,oJAAW;IAErC,MAAM,mBAAmB,cAAc,aAAa;IACpD,MAAM,gBAAgB,cAAc,aAAa;IACjD,MAAM,sBAAsB,cAAc,aAAa;IAEvD,iCAAiC;IACjC,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,0BAA0B,cAAc,aAAa;IAC3D,MAAM,uBAAuB,cAAc,aAAa;IACxD,MAAM,wBAAwB,cAAc,aAAa;IACzD,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,kBAAkB,cAAc,aAAa;IACnD,MAAM,qBAAqB,cAAc,aAAa;IAEtD,mCAAmC;IACnC,MAAM,2BAA2B,cAAc,WAAW;IAC1D,MAAM,iBAAiB,cAAc,WAAW;IAChD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IACpD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IAEpD;;KAEC,GACD,MAAM,kBAAkB,CAAC,OAAkC;QACvD,MAAM,YACF,AAAC,SAAS,UAAU,oBACnB,SAAS,aAAa,uBACtB,SAAS,YAAY;QAE1B,IAAI,CAAC,WAAW;YACZ,OAAO;QACX;QAEA,OAAO,OAAO,oBAAoB;IACtC;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA3Da;;QACiB,oJAAW"}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCashAccounts.ts"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { CashAccount } from '@/types/cash';\r\nimport {\r\n  getCashAccountsAction,\r\n  createCashAccountAction,\r\n  updateCashAccountAction,\r\n  deleteCashAccountAction,\r\n  deleteCashAccountWithTransactionsAction,\r\n  getCashAccountBalanceAction\r\n} from '@/app/actions/finance';\r\n\r\nexport const useCashAccounts = () => {\r\n  const [accounts, setAccounts] = useState<CashAccount[]>([]);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadAccounts = useCallback(async (): Promise<CashAccount[]> => {\r\n    if (!currentBusiness?.id) return [];\r\n\r\n    try {\r\n      const result = await getCashAccountsAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch accounts');\r\n      }\r\n\r\n      return result.data.map((account: any) => ({\r\n        ...account,\r\n        createdAt: new Date(account.createdAt),\r\n        updatedAt: new Date(account.updatedAt)\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error loading cash accounts:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash accounts\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  const queryKey = ['cash_accounts', currentBusiness?.id];\r\n  const { data: queriedAccounts, isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadAccounts,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 30_000,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedAccounts) {\r\n      setAccounts(queriedAccounts);\r\n    }\r\n  }, [queriedAccounts]);\r\n\r\n  const isLoading = isQueryLoading && !queriedAccounts;\r\n\r\n  const refreshAccounts = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  const createAccount = useCallback(async (accountData: {\r\n    name: string;\r\n    description?: string;\r\n    openingBalance: number;\r\n    isDefault?: boolean;\r\n  }) => {\r\n    if (!currentBusiness?.id || !user?.id) return null;\r\n\r\n    try {\r\n      const result = await createCashAccountAction({\r\n        ...accountData,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success || !result.data) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account created successfully\"\r\n      });\r\n\r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Error creating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  }, [currentBusiness?.id, user?.id, queryClient, queryKey, toast]);\r\n\r\n  const updateAccount = async (id: string, updates: Partial<CashAccount>) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await updateCashAccountAction(id, {\r\n        ...updates,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account updated successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteAccount = async (id: string, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return { success: false, hasTransactions: false };\r\n\r\n    try {\r\n      const result = await deleteCashAccountAction(id, currentBusiness.id);\r\n\r\n      if (result.success) {\r\n        queryClient.invalidateQueries({ queryKey });\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Cash account deleted successfully\"\r\n        });\r\n        if (onDeleted) onDeleted();\r\n      }\r\n\r\n      return result as any;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return { success: false, hasTransactions: false };\r\n    }\r\n  };\r\n\r\n  const deleteAccountWithTransactions = async (id: string, deleteTransactions: boolean = false, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await deleteCashAccountWithTransactionsAction(id, currentBusiness.id, deleteTransactions);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: deleteTransactions\r\n          ? \"Account and transactions deleted\"\r\n          : \"Account deleted (records unlinked)\"\r\n      });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    if (!currentBusiness?.id) return 0;\r\n    try {\r\n      const result = await getCashAccountBalanceAction(accountId, currentBusiness.id);\r\n      if (result.success) return result.data as number;\r\n      return 0;\r\n    } catch (error) {\r\n      console.error('Error getting balance:', error);\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  return useMemo(() => ({\r\n    accounts,\r\n    isLoading,\r\n    createAccount,\r\n    updateAccount,\r\n    deleteAccount,\r\n    deleteAccountWithTransactions,\r\n    getAccountBalance,\r\n    loadAccounts,\r\n    refreshAccounts\r\n  }), [accounts, isLoading, createAccount, updateAccount, deleteAccount, deleteAccountWithTransactions, getAccountBalance, loadAccounts, refreshAccounts]);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/dateFilters.ts"],"sourcesContent":["\r\nimport { startOfDay, endOfDay, startOfWeek, endOfWeek, startOfMonth, endOfMonth, startOfYear, endOfYear, subDays, subWeeks, subMonths } from 'date-fns';\r\n\r\nexport const getDateRangeFromFilter = (filter: string): { from: Date; to: Date } => {\r\n  const now = new Date();\r\n  const today = startOfDay(now);\r\n  \r\n  switch (filter) {\r\n    case 'today':\r\n      return {\r\n        from: today,\r\n        to: endOfDay(now)\r\n      };\r\n    case 'yesterday':\r\n      const yesterday = subDays(today, 1);\r\n      return {\r\n        from: yesterday,\r\n        to: endOfDay(yesterday)\r\n      };\r\n    case 'this-week':\r\n      return {\r\n        from: startOfWeek(now),\r\n        to: endOfWeek(now)\r\n      };\r\n    case 'last-week':\r\n      const lastWeekStart = startOfWeek(subWeeks(now, 1));\r\n      return {\r\n        from: lastWeekStart,\r\n        to: endOfWeek(lastWeekStart)\r\n      };\r\n    case 'this-month':\r\n      return {\r\n        from: startOfMonth(now),\r\n        to: endOfMonth(now)\r\n      };\r\n    case 'last-month':\r\n      const lastMonthStart = startOfMonth(subMonths(now, 1));\r\n      return {\r\n        from: lastMonthStart,\r\n        to: endOfMonth(lastMonthStart)\r\n      };\r\n    case 'this-year':\r\n      return {\r\n        from: startOfYear(now),\r\n        to: endOfYear(now)\r\n      };\r\n    default:\r\n      // For 'all' or any other case, return a very wide range\r\n      return {\r\n        from: new Date(2000, 0, 1),\r\n        to: endOfDay(now)\r\n      };\r\n  }\r\n};\r\n\r\nexport const isDateInRange = (date: Date, from: Date | undefined, to: Date | undefined): boolean => {\r\n  if (!from && !to) return true;\r\n  if (!from) return date <= to!;\r\n  if (!to) return date >= from;\r\n  return date >= from && date <= to;\r\n};\r\n"],"names":[],"mappings":";;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM,yBAAyB,CAAC;IACrC,MAAM,MAAM,IAAI;IAChB,MAAM,QAAQ,IAAA,0JAAU,EAAC;IAEzB,OAAQ;QACN,KAAK;YACH,OAAO;gBACL,MAAM;gBACN,IAAI,IAAA,sJAAQ,EAAC;YACf;QACF,KAAK;YACH,MAAM,YAAY,IAAA,oJAAO,EAAC,OAAO;YACjC,OAAO;gBACL,MAAM;gBACN,IAAI,IAAA,sJAAQ,EAAC;YACf;QACF,KAAK;YACH,OAAO;gBACL,MAAM,IAAA,4JAAW,EAAC;gBAClB,IAAI,IAAA,wJAAS,EAAC;YAChB;QACF,KAAK;YACH,MAAM,gBAAgB,IAAA,4JAAW,EAAC,IAAA,sJAAQ,EAAC,KAAK;YAChD,OAAO;gBACL,MAAM;gBACN,IAAI,IAAA,wJAAS,EAAC;YAChB;QACF,KAAK;YACH,OAAO;gBACL,MAAM,IAAA,8JAAY,EAAC;gBACnB,IAAI,IAAA,0JAAU,EAAC;YACjB;QACF,KAAK;YACH,MAAM,iBAAiB,IAAA,8JAAY,EAAC,IAAA,wJAAS,EAAC,KAAK;YACnD,OAAO;gBACL,MAAM;gBACN,IAAI,IAAA,0JAAU,EAAC;YACjB;QACF,KAAK;YACH,OAAO;gBACL,MAAM,IAAA,4JAAW,EAAC;gBAClB,IAAI,IAAA,wJAAS,EAAC;YAChB;QACF;YACE,wDAAwD;YACxD,OAAO;gBACL,MAAM,IAAI,KAAK,MAAM,GAAG;gBACxB,IAAI,IAAA,sJAAQ,EAAC;YACf;IACJ;AACF;AAEO,MAAM,gBAAgB,CAAC,MAAY,MAAwB;IAChE,IAAI,CAAC,QAAQ,CAAC,IAAI,OAAO;IACzB,IAAI,CAAC,MAAM,OAAO,QAAQ;IAC1B,IAAI,CAAC,IAAI,OAAO,QAAQ;IACxB,OAAO,QAAQ,QAAQ,QAAQ;AACjC"}},
    {"offset": {"line": 1217, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/csvParser.ts"],"sourcesContent":["\r\nexport interface CSVProductRow {\r\n  'Product Name': string;\r\n  'Category': string;\r\n  'Description': string;\r\n  'Supplier': string;\r\n  'Creation Date': string;\r\n  'Initial Stock': string;\r\n  'Minimum Stock Level': string;\r\n  'Cost Price': string;\r\n  'Selling Price': string;\r\n  'Manufacturer Barcode'?: string;\r\n}\r\n\r\nexport interface CSVTransactionRow {\r\n  'Date': string;\r\n  'Type': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'To Account'?: string;\r\n}\r\n\r\nexport interface CSVExpenseRow {\r\n  'Date': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'Link to Finance'?: string; // 'true' or 'false'\r\n  'Finance Account'?: string; // Account name\r\n}\r\n\r\nexport interface ValidationError {\r\n  row: number;\r\n  field: string;\r\n  message: string;\r\n}\r\n\r\nexport interface ParsedCSVResult {\r\n  validRows: CSVProductRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\n// Proper CSV parser that handles quoted fields with commas\r\nconst parseCSVLine = (line: string): string[] => {\r\n  const result: string[] = [];\r\n  let current = '';\r\n  let inQuotes = false;\r\n  let i = 0;\r\n\r\n  while (i < line.length) {\r\n    const char = line[i];\r\n    const nextChar = line[i + 1];\r\n\r\n    if (char === '\"') {\r\n      if (inQuotes && nextChar === '\"') {\r\n        // Escaped quote - add single quote to current field\r\n        current += '\"';\r\n        i += 2; // Skip both quotes\r\n        continue;\r\n      } else {\r\n        // Toggle quote state\r\n        inQuotes = !inQuotes;\r\n      }\r\n    } else if (char === ',' && !inQuotes) {\r\n      // Field separator - push current field and reset\r\n      result.push(current.trim());\r\n      current = '';\r\n    } else {\r\n      // Regular character - add to current field\r\n      current += char;\r\n    }\r\n\r\n    i++;\r\n  }\r\n\r\n  // Push the last field\r\n  result.push(current.trim());\r\n  return result;\r\n};\r\n\r\nexport const parseCSV = (csvText: string): ParsedCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVProductRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVProductRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedTransactionCSVResult {\r\n  validRows: CSVTransactionRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseTransactionCSV = (csvText: string): ParsedTransactionCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVTransactionRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateTransactionCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVTransactionRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedExpenseCSVResult {\r\n  validRows: CSVExpenseRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseExpenseCSV = (csvText: string): ParsedExpenseCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVExpenseRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateExpenseCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVExpenseRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nconst validateCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  // Only validate that Product Name is present\r\n  if (!row['Product Name']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Product Name',\r\n      message: 'Product Name is required'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateTransactionCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Type'] || !['cash_in', 'cash_out', 'transfer'].includes(row['Type'].toLowerCase())) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Type',\r\n      message: 'Type must be \"cash_in\", \"cash_out\", or \"transfer\"'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  if (row['Type']?.toLowerCase() === 'transfer' && !row['To Account']) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'To Account',\r\n      message: 'To Account is required for transfers'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateExpenseCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  const linkToFinance = row['Link to Finance']?.toString().toLowerCase();\r\n  if (linkToFinance === 'true' && !row['Finance Account']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Finance Account',\r\n      message: 'Finance Account is required when Link to Finance is true'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const generateErrorLogCSV = (errors: ValidationError[], filename: string = 'upload_errors.csv') => {\r\n  const headers = ['Row', 'Field', 'Error Message'];\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...errors.map(error =>\r\n      [error.row, error.field, `\"${error.message}\"`].join(',')\r\n    )\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = filename;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const extractUniqueCategories = (validRows: CSVProductRow[]): string[] => {\r\n  const categories = validRows\r\n    .map(row => row['Category']?.trim())\r\n    .filter(category => category && category !== '');\r\n\r\n  return [...new Set(categories)];\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportExpensesToCSV.ts"],"sourcesContent":["import { Expense } from '@/hooks/useExpenses';\r\nimport { format } from 'date-fns';\r\n\r\nexport const exportExpensesToCSV = (\r\n  expenses: Expense[],\r\n  formatCurrency: (amount: number) => string,\r\n  currency: string = 'USD'\r\n) => {\r\n  if (expenses.length === 0) {\r\n    alert('No expenses to export');\r\n    return;\r\n  }\r\n\r\n  const headers = [\r\n    'Date',\r\n    'Description',\r\n    'Category',\r\n    'Amount',\r\n    'Payment Method',\r\n    'Person in Charge',\r\n    'Cash Account',\r\n    'Receipt Available'\r\n  ];\r\n\r\n  const csvData = expenses.map(expense => [\r\n    format(expense.date, 'yyyy-MM-dd'),\r\n    `\"${expense.description.replace(/\"/g, '\"\"')}\"`,\r\n    expense.category || '',\r\n    expense.amount.toString(),\r\n    expense.paymentMethod || '',\r\n    expense.personInCharge || '',\r\n    expense.cashAccountId ? 'Yes' : 'No',\r\n    expense.receiptImage ? 'Yes' : 'No'\r\n  ]);\r\n\r\n  const csvContent = [headers, ...csvData]\r\n    .map(row => row.join(','))\r\n    .join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  \r\n  if (link.download !== undefined) {\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `expenses-${currency}-${format(new Date(), 'yyyy-MM-dd')}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n};"],"names":[],"mappings":";;;;AACA;;AAEO,MAAM,sBAAsB,CACjC,UACA,gBACA,WAAmB,KAAK;IAExB,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,MAAM;QACN;IACF;IAEA,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,UAAU,SAAS,GAAG,CAAC,CAAA,UAAW;YACtC,IAAA,kKAAM,EAAC,QAAQ,IAAI,EAAE;YACrB,CAAC,CAAC,EAAE,QAAQ,WAAW,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;YAC9C,QAAQ,QAAQ,IAAI;YACpB,QAAQ,MAAM,CAAC,QAAQ;YACvB,QAAQ,aAAa,IAAI;YACzB,QAAQ,cAAc,IAAI;YAC1B,QAAQ,aAAa,GAAG,QAAQ;YAChC,QAAQ,YAAY,GAAG,QAAQ;SAChC;IAED,MAAM,aAAa;QAAC;WAAY;KAAQ,CACrC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC,MACpB,IAAI,CAAC;IAER,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAA0B;IACtE,MAAM,OAAO,SAAS,aAAa,CAAC;IAEpC,IAAI,KAAK,QAAQ,KAAK,WAAW;QAC/B,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,KAAK,YAAY,CAAC,QAAQ;QAC1B,KAAK,YAAY,CAAC,YAAY,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,IAAA,kKAAM,EAAC,IAAI,QAAQ,cAAc,IAAI,CAAC;QAC5F,KAAK,KAAK,CAAC,UAAU,GAAG;QACxB,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AACF"}},
    {"offset": {"line": 1529, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportExpensesToPDF.ts"],"sourcesContent":["import { Expense } from '@/hooks/useExpenses';\r\nimport { format } from 'date-fns';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport const exportExpensesToPDF = (\r\n  expenses: Expense[],\r\n  formatCurrency: (amount: number) => string,\r\n  currency: string = 'USD',\r\n  businessName?: string,\r\n  businessLogo?: string,\r\n  dateFilter?: string,\r\n  customDateRange?: { from: Date | undefined; to: Date | undefined }\r\n): void => {\r\n  if (expenses.length === 0) {\r\n    alert('No expenses to export');\r\n    return;\r\n  }\r\n\r\n  // Create PDF document in landscape orientation for better table layout\r\n  const doc = new jsPDF({\r\n    orientation: 'landscape',\r\n    unit: 'mm',\r\n    format: 'a4'\r\n  });\r\n\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 8;\r\n\r\n  let yPosition = margin;\r\n\r\n  // Business name and title\r\n  doc.setFontSize(20);\r\n  doc.setFont('helvetica', 'bold');\r\n  const title = businessName || 'Business';\r\n  doc.text(title, margin, yPosition);\r\n  \r\n  yPosition += 12;\r\n  doc.setFontSize(16);\r\n  doc.text('Expenses Report', margin, yPosition);\r\n  \r\n  // Report period\r\n  yPosition += 10;\r\n  doc.setFontSize(12);\r\n  doc.setFont('helvetica', 'normal');\r\n  let periodText = '';\r\n  \r\n  if (dateFilter && dateFilter !== 'all') {\r\n    switch (dateFilter) {\r\n      case 'today':\r\n        periodText = `Period: Today (${format(new Date(), 'MMM dd, yyyy')})`;\r\n        break;\r\n      case 'yesterday':\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        periodText = `Period: Yesterday (${format(yesterday, 'MMM dd, yyyy')})`;\r\n        break;\r\n      case 'this-week':\r\n        periodText = 'Period: This Week';\r\n        break;\r\n      case 'last-week':\r\n        periodText = 'Period: Last Week';\r\n        break;\r\n      case 'this-month':\r\n        periodText = `Period: This Month (${format(new Date(), 'MMMM yyyy')})`;\r\n        break;\r\n      case 'last-month':\r\n        const lastMonth = new Date();\r\n        lastMonth.setMonth(lastMonth.getMonth() - 1);\r\n        periodText = `Period: Last Month (${format(lastMonth, 'MMMM yyyy')})`;\r\n        break;\r\n      case 'this-year':\r\n        periodText = `Period: This Year (${format(new Date(), 'yyyy')})`;\r\n        break;\r\n      case 'custom':\r\n        if (customDateRange?.from && customDateRange?.to) {\r\n          periodText = `Period: ${format(customDateRange.from, 'MMM dd, yyyy')} - ${format(customDateRange.to, 'MMM dd, yyyy')}`;\r\n        } else if (customDateRange?.from) {\r\n          periodText = `Period: From ${format(customDateRange.from, 'MMM dd, yyyy')}`;\r\n        } else if (customDateRange?.to) {\r\n          periodText = `Period: Until ${format(customDateRange.to, 'MMM dd, yyyy')}`;\r\n        } else {\r\n          periodText = 'Period: Custom Range';\r\n        }\r\n        break;\r\n      default:\r\n        periodText = 'Period: All Time';\r\n    }\r\n  } else {\r\n    periodText = 'Period: All Time';\r\n  }\r\n  \r\n  doc.text(periodText, margin, yPosition);\r\n  \r\n  // Generation date\r\n  yPosition += 6;\r\n  doc.setFontSize(10);\r\n  doc.text(`Generated on: ${format(new Date(), 'MMM dd, yyyy HH:mm')}`, margin, yPosition);\r\n  \r\n  yPosition += 10;\r\n\r\n  // Calculate totals\r\n  const totalAmount = expenses.reduce((sum, expense) => sum + expense.amount, 0);\r\n\r\n  // Draw table manually using pure jsPDF vector graphics\r\n  const tableStartY = yPosition;\r\n  const rowHeight = 6;\r\n  const headerHeight = 8;\r\n  \r\n  // Define column widths and positions\r\n  const columns = [\r\n    { header: 'Date', width: 25, x: margin },\r\n    { header: 'Description', width: 65, x: margin + 25 },\r\n    { header: 'Category', width: 30, x: margin + 90 },\r\n    { header: `Amount (${currency})`, width: 30, x: margin + 120 },\r\n    { header: 'Payment', width: 30, x: margin + 150 },\r\n    { header: 'Person', width: 35, x: margin + 180 },\r\n    { header: 'Cash', width: 20, x: margin + 215 },\r\n    { header: 'Receipt', width: 20, x: margin + 235 }\r\n  ];\r\n\r\n  // Draw table header\r\n  doc.setFillColor(240, 240, 240);\r\n  doc.rect(margin, tableStartY, pageWidth - 2 * margin, headerHeight, 'F');\r\n  \r\n  doc.setFontSize(9);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.setTextColor(0, 0, 0);\r\n  \r\n  columns.forEach(col => {\r\n    doc.text(col.header, col.x + 2, tableStartY + 6);\r\n  });\r\n\r\n  // Draw header border\r\n  doc.setLineWidth(0.5);\r\n  doc.setDrawColor(0, 0, 0);\r\n  doc.rect(margin, tableStartY, pageWidth - 2 * margin, headerHeight);\r\n\r\n  // Draw table data\r\n  doc.setFont('helvetica', 'normal');\r\n  doc.setFontSize(8);\r\n  \r\n  let currentY = tableStartY + headerHeight;\r\n  const maxRowsPerPage = Math.floor((pageHeight - currentY - 20) / rowHeight);\r\n  \r\n  expenses.forEach((expense, index) => {\r\n    // Check if we need a new page\r\n    if (index > 0 && index % maxRowsPerPage === 0) {\r\n      doc.addPage();\r\n      currentY = margin;\r\n      \r\n      // Redraw header on new page\r\n      doc.setFillColor(240, 240, 240);\r\n      doc.rect(margin, currentY, pageWidth - 2 * margin, headerHeight, 'F');\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setFontSize(9);\r\n      \r\n      columns.forEach(col => {\r\n        doc.text(col.header, col.x + 2, currentY + 6);\r\n      });\r\n      \r\n      doc.rect(margin, currentY, pageWidth - 2 * margin, headerHeight);\r\n      currentY += headerHeight;\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setFontSize(8);\r\n    }\r\n\r\n    // Alternate row colors\r\n    if (index % 2 === 1) {\r\n      doc.setFillColor(248, 248, 248);\r\n      doc.rect(margin, currentY, pageWidth - 2 * margin, rowHeight, 'F');\r\n    }\r\n\r\n    // Draw row data\r\n    const rowData = [\r\n      format(expense.date, 'MM/dd/yyyy'),\r\n      expense.description.length > 30 ? expense.description.substring(0, 27) + '...' : expense.description,\r\n      expense.category || '-',\r\n      formatCurrency(expense.amount),\r\n      expense.paymentMethod?.substring(0, 12) || '-',\r\n      expense.personInCharge?.substring(0, 15) || '-',\r\n      expense.cashAccountId ? 'Yes' : 'No',\r\n      expense.receiptImage ? 'Yes' : 'No'\r\n    ];\r\n\r\n    columns.forEach((col, colIndex) => {\r\n      const text = rowData[colIndex];\r\n      const textX = col.x + 2;\r\n      \r\n      // Right align amount column\r\n      if (colIndex === 3) {\r\n        const textWidth = doc.getTextWidth(text);\r\n        doc.text(text, col.x + col.width - textWidth - 2, currentY + 4.5);\r\n      } else {\r\n        doc.text(text, textX, currentY + 4.5);\r\n      }\r\n    });\r\n\r\n    // Draw row border\r\n    doc.setLineWidth(0.1);\r\n    doc.rect(margin, currentY, pageWidth - 2 * margin, rowHeight);\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Add summary\r\n  currentY += 8;\r\n  \r\n  // Check if summary fits on current page\r\n  if (currentY + 25 > pageHeight - margin) {\r\n    doc.addPage();\r\n    currentY = margin + 12;\r\n  }\r\n\r\n  // Summary section\r\n  doc.setFontSize(14);\r\n  doc.setFont('helvetica', 'bold');\r\n  doc.text('Summary', margin, currentY);\r\n  \r\n  currentY += 12;\r\n  doc.setFontSize(11);\r\n  doc.setFont('helvetica', 'normal');\r\n  \r\n  const summaryData = [\r\n    ['Total Expenses:', expenses.length.toString()],\r\n    ['Total Amount:', formatCurrency(totalAmount)],\r\n    ['With Receipts:', expenses.filter(e => e.receiptImage).length.toString()],\r\n    ['Cash Linked:', expenses.filter(e => e.cashAccountId).length.toString()]\r\n  ];\r\n\r\n  summaryData.forEach((row, index) => {\r\n    const y = currentY + (index * 5);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(row[0], margin, y);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(row[1], margin + 50, y);\r\n  });\r\n\r\n  // Add page numbers and watermark to all pages\r\n  const totalPages = doc.getNumberOfPages();\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    doc.setPage(i);\r\n    doc.setFontSize(8);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(\r\n      `Page ${i} of ${totalPages}`,\r\n      pageWidth - margin - 20,\r\n      pageHeight - 10\r\n    );\r\n    \r\n    // Add watermark\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'italic');\r\n    doc.setTextColor(150, 150, 150);\r\n    doc.text(\r\n      'Created By Gonza Systems',\r\n      margin,\r\n      pageHeight - 5\r\n    );\r\n    doc.setTextColor(0, 0, 0); // Reset color\r\n  }\r\n\r\n  // Save the PDF\r\n  const fileName = `expenses_report_${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n  doc.save(fileName);\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1796, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/generateExpenseTemplate.ts"],"sourcesContent":["import * as XLSX from 'xlsx';\r\n\r\nexport const generateExpenseTemplate = () => {\r\n    const headers = [\r\n        'Date',\r\n        'Amount',\r\n        'Description',\r\n        'Category',\r\n        'Payment Method',\r\n        'Person In Charge',\r\n        'Link to Finance',\r\n        'Finance Account'\r\n    ];\r\n\r\n    const sampleData = [\r\n        {\r\n            'Date': '22/12/2025',\r\n            'Amount': '450.00',\r\n            'Description': 'Office Rent',\r\n            'Category': 'Rent',\r\n            'Payment Method': 'Bank',\r\n            'Person In Charge': 'Admin',\r\n            'Link to Finance': 'true',\r\n            'Finance Account': 'Company Wallet'\r\n        },\r\n        {\r\n            'Date': '23/12/2025',\r\n            'Amount': '120.00',\r\n            'Description': 'Stationery',\r\n            'Category': 'Supplies',\r\n            'Payment Method': 'Cash',\r\n            'Person In Charge': 'Manager',\r\n            'Link to Finance': 'false',\r\n            'Finance Account': ''\r\n        }\r\n    ];\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(sampleData, { header: headers });\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Expenses Template\");\r\n\r\n    // Generate and download\r\n    XLSX.writeFile(workbook, \"expense_import_template.xlsx\");\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,0BAA0B;IACnC,MAAM,UAAU;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IAED,MAAM,aAAa;QACf;YACI,QAAQ;YACR,UAAU;YACV,eAAe;YACf,YAAY;YACZ,kBAAkB;YAClB,oBAAoB;YACpB,mBAAmB;YACnB,mBAAmB;QACvB;QACA;YACI,QAAQ;YACR,UAAU;YACV,eAAe;YACf,YAAY;YACZ,kBAAkB;YAClB,oBAAoB;YACpB,mBAAmB;YACnB,mBAAmB;QACvB;KACH;IAED,MAAM,YAAY,yIAAU,CAAC,aAAa,CAAC,YAAY;QAAE,QAAQ;IAAQ;IACzE,MAAM,WAAW,yIAAU,CAAC,QAAQ;IACpC,yIAAU,CAAC,iBAAiB,CAAC,UAAU,WAAW;IAElD,wBAAwB;IACxB,6IAAc,CAAC,UAAU;AAC7B"}},
    {"offset": {"line": 1850, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/pages/Expenses.tsx"],"sourcesContent":["import React, { useState, useMemo, useCallback } from 'react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useExpenses } from '@/hooks/useExpenses';\r\nimport { useExpenseData } from '@/hooks/useExpenseData';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport ExpenseHeader from '@/components/expenses/ExpenseHeader';\r\nimport ExpenseContent from '@/components/expenses/ExpenseContent';\r\nimport ExpensesDateFilter from '@/components/expenses/ExpensesDateFilter';\r\nimport EditExpenseDialog from '@/components/expenses/EditExpenseDialog'; // Use existing EditExpenseDialog or ViewExpenseDialog for single entry? \r\nimport ExpenseForm from '@/components/expenses/ExpenseForm'; // Use ExpenseForm directly or in a Dialog\r\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport ExpenseBulkAddDialog from '@/components/expenses/ExpenseBulkAddDialog';\r\nimport ExpenseCSVUploadDialog from '@/components/expenses/ExpenseCSVUploadDialog';\r\nimport ExpenseCenter from '@/components/expenses/ExpenseCenter';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { formatCashCurrency } from '@/lib/utils';\r\nimport { LayoutGrid, List, PieChart, Plus, Upload, AlertCircle } from 'lucide-react';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { exportExpensesToCSV } from '@/utils/exportExpensesToCSV';\r\nimport { exportExpensesToPDF } from '@/utils/exportExpensesToPDF';\r\nimport { generateExpenseTemplate } from '@/utils/generateExpenseTemplate';\r\n\r\nconst Expenses = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const isMobile = useIsMobile();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const { settings } = useBusinessSettings();\r\n  const {\r\n    expenses,\r\n    isLoading,\r\n    createExpense,\r\n    updateExpense,\r\n    deleteExpense,\r\n    refreshExpenses\r\n  } = useExpenses();\r\n\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [isFormDialogOpen, setIsFormDialogOpen] = useState(false);\r\n  const [isBulkEntryOpen, setIsBulkEntryOpen] = useState(false);\r\n  const [isCSVUploadOpen, setIsCSVUploadOpen] = useState(false);\r\n  const [dateFilter, setDateFilter] = useState('all');\r\n  const [customDateRange, setCustomDateRange] = useState<{ from: Date | undefined; to: Date | undefined; }>({\r\n    from: undefined,\r\n    to: undefined\r\n  });\r\n\r\n  const { filteredExpenses, expenseStats, formatCurrency } = useExpenseData(\r\n    expenses || [],\r\n    dateFilter,\r\n    customDateRange\r\n  );\r\n\r\n  const handleCreateExpense = async (data: any) => {\r\n    try {\r\n      await createExpense(data);\r\n      setIsFormDialogOpen(false);\r\n    } catch (error) {\r\n      console.error('Error creating expense:', error);\r\n    }\r\n  };\r\n\r\n  const handleExportCSV = useCallback(() => {\r\n    const currency = settings?.currency || 'USD';\r\n    exportExpensesToCSV(filteredExpenses, formatCurrency, currency);\r\n  }, [filteredExpenses, formatCurrency, settings?.currency]);\r\n\r\n  const handleExportPDF = useCallback(() => {\r\n    const currency = settings?.currency || 'USD';\r\n    exportExpensesToPDF(\r\n      filteredExpenses,\r\n      formatCurrency,\r\n      currency,\r\n      settings?.businessName,\r\n      settings?.businessLogo,\r\n      dateFilter,\r\n      customDateRange\r\n    );\r\n  }, [filteredExpenses, formatCurrency, settings, dateFilter, customDateRange]);\r\n\r\n  if (profilesLoading || isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hasPermission('expenses', 'view')) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to view expenses.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/')} variant=\"outline\">\r\n            Back to Dashboard\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const canCreate = hasPermission('expenses', 'create');\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <ExpenseHeader\r\n        onAddExpense={() => setIsFormDialogOpen(true)}\r\n        isRefreshing={isLoading}\r\n        onRefresh={refreshExpenses}\r\n        onAddBulkExpense={() => setIsBulkEntryOpen(true)}\r\n        onImportExpenses={() => setIsCSVUploadOpen(true)}\r\n        onExportCSV={handleExportCSV}\r\n        onExportPDF={handleExportPDF}\r\n        onDownloadTemplate={() => generateExpenseTemplate()}\r\n        canCreate={canCreate}\r\n      />\r\n\r\n      <ExpenseForm\r\n        open={isFormDialogOpen}\r\n        onOpenChange={setIsFormDialogOpen}\r\n        onSubmit={handleCreateExpense}\r\n      />\r\n\r\n      <ExpenseBulkAddDialog\r\n        open={isBulkEntryOpen}\r\n        onOpenChange={setIsBulkEntryOpen}\r\n        onSuccess={() => {\r\n          setIsBulkEntryOpen(false);\r\n          refreshExpenses();\r\n        }}\r\n      />\r\n\r\n      <ExpenseCSVUploadDialog\r\n        open={isCSVUploadOpen}\r\n        onOpenChange={setIsCSVUploadOpen}\r\n        onUploadComplete={() => {\r\n          setIsCSVUploadOpen(false);\r\n          refreshExpenses();\r\n        }}\r\n      />\r\n\r\n      <div className=\"px-4 md:px-0\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full space-y-6\">\r\n          <TabsList className={`grid w-full ${isMobile ? 'grid-cols-2 gap-1 h-auto py-1' : 'grid-cols-2'} bg-slate-100/50 dark:bg-slate-800/50 p-1 rounded-xl`}>\r\n            <TabsTrigger value=\"overview\" className=\"flex items-center gap-2 py-2.5 rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-900 data-[state=active]:shadow-sm\">\r\n              <PieChart className=\"h-4 w-4\" />\r\n              <span>Overview</span>\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"expenses-list\" className=\"flex items-center gap-2 py-2.5 rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-slate-900 data-[state=active]:shadow-sm\">\r\n              <List className=\"h-4 w-4\" />\r\n              <span>List</span>\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"overview\" className=\"space-y-6 animate-in fade-in-50 duration-300\">\r\n            <ExpenseCenter\r\n              onNewEntry={() => setIsFormDialogOpen(true)}\r\n              onBulkEntry={() => setIsBulkEntryOpen(true)}\r\n              onImportCSV={() => setIsCSVUploadOpen(true)}\r\n              canCreate={canCreate}\r\n            />\r\n\r\n            <ExpensesDateFilter\r\n              dateFilter={dateFilter}\r\n              dateRange={customDateRange}\r\n              onDateFilterChange={setDateFilter}\r\n              onDateRangeChange={setCustomDateRange}\r\n            />\r\n\r\n            <ExpenseContent\r\n              filteredExpenses={filteredExpenses}\r\n              expenseStats={expenseStats}\r\n              formatCurrency={formatCurrency}\r\n              dateFilter={dateFilter}\r\n              onUpdateExpense={updateExpense}\r\n              onDeleteExpense={deleteExpense}\r\n              showOnlyOverview={true}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"expenses-list\" className=\"space-y-6 animate-in fade-in-50 duration-300\">\r\n            <ExpensesDateFilter\r\n              dateFilter={dateFilter}\r\n              dateRange={customDateRange}\r\n              onDateFilterChange={setDateFilter}\r\n              onDateRangeChange={setCustomDateRange}\r\n            />\r\n\r\n            <ExpenseContent\r\n              filteredExpenses={filteredExpenses}\r\n              expenseStats={expenseStats}\r\n              formatCurrency={formatCurrency}\r\n              dateFilter={dateFilter}\r\n              onUpdateExpense={updateExpense}\r\n              onDeleteExpense={deleteExpense}\r\n              showOnlyList={true}\r\n            />\r\n          </TabsContent>\r\n\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Expenses;\r\n"],"names":[],"mappings":"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"}}]
}