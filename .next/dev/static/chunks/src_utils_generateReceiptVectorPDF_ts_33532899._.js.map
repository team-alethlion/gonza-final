{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/generateReceiptVectorPDF.ts"],"sourcesContent":["import jsPDF from 'jspdf';\r\nimport { ReceiptData } from '@/types/receipt';\r\n\r\ninterface VectorPDFOptions {\r\n  filename?: string;\r\n  orientation?: 'portrait' | 'landscape';\r\n  format?: 'a4' | 'letter';\r\n  margins?: {\r\n    top: number;\r\n    right: number;\r\n    bottom: number;\r\n    left: number;\r\n  };\r\n  returnBlob?: boolean;\r\n}\r\n\r\n// Helper function to format currency properly (e.g., \"Ush 25,000\")\r\nconst formatCurrency = (amount: number, currency: string = 'Ush'): string => {\r\n  const formatted = Math.round(amount).toLocaleString();\r\n  return `${currency} ${formatted}`;\r\n};\r\n\r\nexport const generateReceiptVectorPDF = async (\r\n  receiptData: ReceiptData,\r\n  options: VectorPDFOptions\r\n): Promise<void | Blob> => {\r\n  const {\r\n    filename,\r\n    orientation = 'portrait',\r\n    format = 'a4',\r\n    margins = { top: 20, right: 20, bottom: 20, left: 20 },\r\n    returnBlob = false\r\n  } = options;\r\n\r\n  const pdf = new jsPDF({\r\n    orientation,\r\n    unit: 'mm',\r\n    format,\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  let currentY = margins.top;\r\n\r\n  // Define thinner line width\r\n  const STANDARD_LINE_WIDTH = 0.2;\r\n\r\n  // Helper functions\r\n  const setStandardLineWidth = () => {\r\n    pdf.setLineWidth(STANDARD_LINE_WIDTH);\r\n  };\r\n\r\n  const addText = (text: string, x: number, y: number, options: any = {}) => {\r\n    const { fontSize = 10, fontStyle = 'normal', align = 'left', maxWidth } = options;\r\n    pdf.setFontSize(fontSize);\r\n    pdf.setFont('helvetica', fontStyle);\r\n    \r\n    if (maxWidth) {\r\n      const lines = pdf.splitTextToSize(text, maxWidth);\r\n      pdf.text(lines, x, y, { align });\r\n      return lines.length * (fontSize * 0.35);\r\n    } else {\r\n      pdf.text(text, x, y, { align });\r\n      return fontSize * 0.35;\r\n    }\r\n  };\r\n\r\n  const addMultilineText = (text: string, x: number, y: number, maxWidth: number, options: any = {}) => {\r\n    const { fontSize = 10, fontStyle = 'normal', align = 'left', lineHeight = 1.2 } = options;\r\n    pdf.setFontSize(fontSize);\r\n    pdf.setFont('helvetica', fontStyle);\r\n    \r\n    const lines = pdf.splitTextToSize(text, maxWidth);\r\n    const lineSpacing = fontSize * 0.35 * lineHeight;\r\n    \r\n    lines.forEach((line: string, index: number) => {\r\n      pdf.text(line, x, y + (index * lineSpacing), { align });\r\n    });\r\n    \r\n    return lines.length * lineSpacing;\r\n  };\r\n\r\n  const addLine = (x1: number, y1: number, x2: number, y2: number) => {\r\n    setStandardLineWidth();\r\n    pdf.line(x1, y1, x2, y2);\r\n  };\r\n\r\n  const addRect = (x: number, y: number, width: number, height: number, style: 'S' | 'F' | 'FD' = 'S') => {\r\n    setStandardLineWidth();\r\n    pdf.rect(x, y, width, height, style);\r\n  };\r\n\r\n  // Function to draw page border\r\n  const drawPageBorder = () => {\r\n    addRect(margins.left, margins.top, contentWidth, pageHeight - margins.top - margins.bottom, 'S');\r\n  };\r\n\r\n  // Check if we need a new page and draw border\r\n  const checkPageBreak = (requiredSpace: number) => {\r\n    if (currentY + requiredSpace > pageHeight - margins.bottom) {\r\n      pdf.addPage();\r\n      currentY = margins.top + 10; // Add some top margin on new page\r\n      drawPageBorder(); // Draw border on new page\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Draw initial page border\r\n  drawPageBorder();\r\n\r\n  // Add padding inside border\r\n  const innerMargin = 8;\r\n  const innerLeft = margins.left + innerMargin;\r\n  const innerWidth = contentWidth - (innerMargin * 2);\r\n  currentY += innerMargin;\r\n\r\n  // Header section with logo on left, business info on right\r\n  const headerStartY = currentY;\r\n  \r\n  // Logo on the left (if available) - reduced size\r\n  if (receiptData.businessLogo) {\r\n    try {\r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      \r\n      await new Promise<void>((resolve, reject) => {\r\n        img.onload = () => {\r\n          try {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n              canvas.width = img.width;\r\n              canvas.height = img.height;\r\n              ctx.drawImage(img, 0, 0);\r\n              \r\n              const dataURL = canvas.toDataURL('image/png');\r\n              \r\n              // Logo dimensions - reduced size for more professional look\r\n              const maxLogoHeight = 15; // Further reduced from 18\r\n              const aspectRatio = img.width / img.height;\r\n              const logoHeight = Math.min(maxLogoHeight, 15);\r\n              const logoWidth = logoHeight * aspectRatio;\r\n              \r\n              // Position logo on the left\r\n              pdf.addImage(dataURL, 'PNG', innerLeft, currentY, logoWidth, logoHeight);\r\n            }\r\n          } catch (error) {\r\n            console.error('Error adding logo to PDF:', error);\r\n          }\r\n          resolve();\r\n        };\r\n        \r\n        img.onerror = () => {\r\n          console.error('Error loading logo image');\r\n          resolve();\r\n        };\r\n        \r\n        img.src = receiptData.businessLogo;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error processing logo:', error);\r\n    }\r\n  }\r\n\r\n  // Business information on the right - extended area with right alignment\r\n  const businessInfoX = innerLeft + innerWidth * 0.25; // Extended area starts earlier\r\n  const businessInfoWidth = innerWidth * 0.75; // Wider area for business info\r\n  const businessInfoRightX = innerLeft + innerWidth; // Right edge for alignment\r\n  let businessY = currentY;\r\n\r\n  if (receiptData.businessName) {\r\n    businessY += addText(receiptData.businessName, businessInfoRightX, businessY, {\r\n      fontSize: 14,\r\n      fontStyle: 'bold',\r\n      align: 'right'\r\n    });\r\n    businessY += 1.5; // Reduced spacing\r\n  }\r\n\r\n  if (receiptData.businessAddress) {\r\n    const lines = pdf.splitTextToSize(receiptData.businessAddress, businessInfoWidth);\r\n    const lineHeight = 10 * 0.35 * 0.9; // Further reduced line height\r\n    \r\n    lines.forEach((line: string, index: number) => {\r\n      pdf.setFontSize(10);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text(line, businessInfoRightX, businessY + (index * lineHeight), { align: 'right' });\r\n    });\r\n    \r\n    businessY += lines.length * lineHeight + 0.5; // Reduced spacing\r\n  }\r\n\r\n  if (receiptData.businessPhone) {\r\n    businessY += addText(`Phone: ${receiptData.businessPhone}`, businessInfoRightX, businessY, {\r\n      fontSize: 9,\r\n      align: 'right'\r\n    });\r\n    businessY += 0.5; // Reduced spacing\r\n  }\r\n\r\n  if (receiptData.businessEmail) {\r\n    businessY += addText(`Email: ${receiptData.businessEmail}`, businessInfoRightX, businessY, {\r\n      fontSize: 9,\r\n      align: 'right'\r\n    });\r\n    businessY += 0.5; // Reduced spacing\r\n  }\r\n\r\n  // Move currentY to after header section - reduced spacing\r\n  currentY = Math.max(currentY + 18, businessY) + 5; // Further reduced spacing\r\n\r\n  // Check for page break after header\r\n  checkPageBreak(20);\r\n\r\n  // Horizontal line after header\r\n  addLine(innerLeft, currentY, innerLeft + innerWidth, currentY);\r\n  currentY += 6; // Reduced from 8\r\n\r\n  // Document title centered\r\n  currentY += addText(receiptData.documentTitle.toUpperCase(), pageWidth / 2, currentY, {\r\n    fontSize: 16,\r\n    fontStyle: 'bold',\r\n    align: 'center'\r\n  });\r\n  currentY += 4; // Reduced from 6\r\n\r\n  // Receipt details section - further reduced spacing\r\n  const detailsStartY = currentY;\r\n  \r\n  // Left side - Receipt details with minimal spacing\r\n  let leftY = detailsStartY;\r\n  leftY += addText(`${receiptData.documentNumberLabel} ${receiptData.receiptNumber}`, innerLeft, leftY, {\r\n    fontSize: 11,\r\n    fontStyle: 'bold'\r\n  });\r\n  leftY += 2; // Further reduced from 3\r\n  \r\n  leftY += addText(`Date: ${receiptData.date}`, innerLeft, leftY, {\r\n    fontSize: 10\r\n  });\r\n  leftY += 2; // Further reduced from 3\r\n  \r\n  leftY += addText(`Time: ${receiptData.time}`, innerLeft, leftY, {\r\n    fontSize: 10\r\n  });\r\n\r\n  // Right side - Payment status\r\n  const rightX = innerLeft + innerWidth * 0.7;\r\n  addText(`Status: ${receiptData.status}`, rightX, detailsStartY, {\r\n    fontSize: 11,\r\n    fontStyle: 'bold',\r\n    align: 'left'\r\n  });\r\n\r\n  currentY = leftY + 4; // Reduced from 6\r\n\r\n  // Customer information without labels\r\n  if (receiptData.customerName && receiptData.customerName.trim() !== '') {\r\n    checkPageBreak(30);\r\n    \r\n    currentY += addText('Customer Information:', innerLeft, currentY, {\r\n      fontSize: 11,\r\n      fontStyle: 'bold'\r\n    });\r\n    currentY += 3; // Reduced from 4\r\n\r\n    // Customer name without \"Name:\" label\r\n    currentY += addText(receiptData.customerName, innerLeft, currentY, {\r\n      fontSize: 10\r\n    });\r\n    currentY += 2.5; // Reduced spacing\r\n\r\n    if (receiptData.customerAddress && receiptData.customerAddress.trim() !== '') {\r\n      // Customer address without \"Address:\" label\r\n      const addressHeight = addMultilineText(receiptData.customerAddress, innerLeft, currentY, innerWidth * 0.8, {\r\n        fontSize: 10,\r\n        lineHeight: 1.0 // Reduced from 1.1\r\n      });\r\n      currentY += addressHeight;\r\n      currentY += 2.5; // Reduced spacing\r\n    }\r\n\r\n    if (receiptData.customerContact && receiptData.customerContact.trim() !== '') {\r\n      // Customer contact without \"Contact:\" label\r\n      currentY += addText(receiptData.customerContact, innerLeft, currentY, {\r\n        fontSize: 10\r\n      });\r\n      currentY += 2.5; // Reduced spacing\r\n    }\r\n\r\n    currentY += 3; // Reduced from 6\r\n  }\r\n\r\n  // Items table - check if any items have discounts to add discount column\r\n  const hasDiscounts = receiptData.items.some(item => \r\n    (item.discountPercentage || 0) > 0 || (item.discountAmount || 0) > 0\r\n  );\r\n  const tableHeaders = hasDiscounts \r\n    ? ['Description', 'Qty', 'Unit Price', 'Discount', 'Amount']\r\n    : ['Description', 'Qty', 'Unit Price', 'Amount'];\r\n  const colWidths = hasDiscounts\r\n    ? [innerWidth * 0.35, innerWidth * 0.15, innerWidth * 0.18, innerWidth * 0.12, innerWidth * 0.2]\r\n    : [innerWidth * 0.45, innerWidth * 0.15, innerWidth * 0.2, innerWidth * 0.2];\r\n  \r\n  // Table header background\r\n  pdf.setFillColor(245, 245, 245);\r\n  addRect(innerLeft, currentY - 2, innerWidth, 10, 'F');\r\n  \r\n  // Table header borders\r\n  addRect(innerLeft, currentY - 2, innerWidth, 10, 'S');\r\n  \r\n  // Table header text\r\n  let tableX = innerLeft;\r\n  tableHeaders.forEach((header, index) => {\r\n    addText(header, tableX + 3, currentY + 4, {\r\n      fontSize: 10,\r\n      fontStyle: 'bold'\r\n    });\r\n    // Add vertical lines between columns\r\n    if (index < tableHeaders.length - 1) {\r\n      addLine(tableX + colWidths[index], currentY - 2, tableX + colWidths[index], currentY + 8);\r\n    }\r\n    tableX += colWidths[index];\r\n  });\r\n  \r\n  currentY += 10;\r\n  \r\n  // Table rows with proper text wrapping and row separation\r\n  let subtotal = 0;\r\n  const minRowHeight = 8; // Minimum row height\r\n  \r\n  receiptData.items.forEach((item, index) => {\r\n    // Calculate required row height based on description text wrapping\r\n    pdf.setFontSize(9);\r\n    const descriptionLines = pdf.splitTextToSize(item.description, colWidths[0] - 6);\r\n    const calculatedRowHeight = Math.max(minRowHeight, descriptionLines.length * 3.5 + 4);\r\n    \r\n    // Check if we need a new page for this item\r\n    checkPageBreak(calculatedRowHeight + 5);\r\n    \r\n    const itemSubtotal = item.unitPrice * item.quantity;\r\n    const discountAmount = item.discountAmount || 0;\r\n    const itemTotal = item.amount; // This should already be calculated with discount applied\r\n    subtotal += itemTotal;\r\n    \r\n    // Alternate row background for better readability\r\n    if (index % 2 === 1) {\r\n      pdf.setFillColor(250, 250, 250);\r\n      addRect(innerLeft, currentY, innerWidth, calculatedRowHeight, 'F');\r\n    }\r\n    \r\n    // Row border\r\n    addRect(innerLeft, currentY, innerWidth, calculatedRowHeight, 'S');\r\n    \r\n    tableX = innerLeft;\r\n    \r\n    // Description with proper text wrapping\r\n    addMultilineText(item.description, tableX + 3, currentY + 4, colWidths[0] - 6, {\r\n      fontSize: 9,\r\n      lineHeight: 1.1\r\n    });\r\n    tableX += colWidths[0];\r\n    \r\n    // Add vertical line after description\r\n    addLine(tableX, currentY, tableX, currentY + calculatedRowHeight);\r\n    \r\n    // Quantity - centered in cell\r\n    addText(item.quantity.toString(), tableX + colWidths[1] - 3, currentY + calculatedRowHeight/2 + 1.5, {\r\n      fontSize: 9,\r\n      align: 'right'\r\n    });\r\n    tableX += colWidths[1];\r\n    \r\n    // Add vertical line after quantity\r\n    addLine(tableX, currentY, tableX, currentY + calculatedRowHeight);\r\n    \r\n    // Unit Price - right aligned\r\n    addText(formatCurrency(item.unitPrice, receiptData.currency), tableX + colWidths[2] - 3, currentY + calculatedRowHeight/2 + 1.5, {\r\n      fontSize: 9,\r\n      align: 'right'\r\n    });\r\n    tableX += colWidths[2];\r\n    \r\n    // Add vertical line after unit price\r\n    addLine(tableX, currentY, tableX, currentY + calculatedRowHeight);\r\n    \r\n    // Discount column (if applicable)\r\n    if (hasDiscounts) {\r\n      let discountText = '-';\r\n      if ((item.discountPercentage || 0) > 0) {\r\n        discountText = `${item.discountPercentage}%`;\r\n      } else if ((item.discountAmount || 0) > 0) {\r\n        discountText = formatCurrency(item.discountAmount, receiptData.currency);\r\n      }\r\n      addText(discountText, tableX + colWidths[3] - 3, currentY + calculatedRowHeight/2 + 1.5, {\r\n        fontSize: 9,\r\n        align: 'right'\r\n      });\r\n      tableX += colWidths[3];\r\n      \r\n      // Add vertical line after discount\r\n      addLine(tableX, currentY, tableX, currentY + calculatedRowHeight);\r\n    }\r\n    \r\n    // Amount - right aligned (final amount after discount)\r\n    const finalColumnIndex = hasDiscounts ? 4 : 3;\r\n    addText(formatCurrency(itemTotal, receiptData.currency), tableX + colWidths[finalColumnIndex] - 3, currentY + calculatedRowHeight/2 + 1.5, {\r\n      fontSize: 9,\r\n      align: 'right'\r\n    });\r\n    \r\n    currentY += calculatedRowHeight;\r\n    \r\n    // Add separator line between items (except for the last item)\r\n    if (index < receiptData.items.length - 1) {\r\n      addLine(innerLeft, currentY, innerLeft + innerWidth, currentY);\r\n    }\r\n  });\r\n  \r\n  currentY += 5; // Reduced from 10\r\n  \r\n  // Professional totals section with improved layout for large figures\r\n  checkPageBreak(70); // Increased space requirement for installment sales\r\n  \r\n  // Create a proper totals table without header\r\n  const totalsStartX = innerLeft + innerWidth * 0.45;\r\n  const totalsWidth = innerWidth * 0.55;\r\n  const labelWidth = totalsWidth * 0.55;\r\n  const valueWidth = totalsWidth * 0.45;\r\n  \r\n  // Calculate total discount for the totals section\r\n  const totalDiscount = receiptData.items.reduce((total, item) => {\r\n    const itemSubtotal = item.unitPrice * item.quantity;\r\n    const discountAmount = (item.discountType === 'amount') \r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n  \r\n  // Subtotal (before discount) row - only show if there are discounts\r\n  if (totalDiscount > 0) {\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n    pdf.setFillColor(248, 248, 248);\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n    \r\n    addText('Subtotal (before discount):', totalsStartX + 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal'\r\n    });\r\n    \r\n    // Vertical line separating label and value\r\n    addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n    \r\n    addText(formatCurrency(subtotal + totalDiscount, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal',\r\n      align: 'right'\r\n    });\r\n    currentY += 8;\r\n    \r\n    // Total discount row\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n    pdf.setFillColor(255, 240, 220); // Light orange background\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n    \r\n    addText('Total Discount:', totalsStartX + 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal'\r\n    });\r\n    \r\n    // Vertical line separating label and value\r\n    addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n    \r\n    addText(`-${formatCurrency(totalDiscount, receiptData.currency)}`, totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal',\r\n      align: 'right'\r\n    });\r\n    currentY += 8;\r\n  }\r\n  \r\n  // Subtotal row (after discount or just subtotal if no discounts)\r\n  addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n  pdf.setFillColor(248, 248, 248);\r\n  addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n  \r\n  addText(totalDiscount > 0 ? 'Subtotal (after discount):' : 'Subtotal:', totalsStartX + 4, currentY + 5.5, {\r\n    fontSize: 10,\r\n    fontStyle: 'normal'\r\n  });\r\n  \r\n  // Vertical line separating label and value\r\n  addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n  \r\n  addText(formatCurrency(subtotal, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n    fontSize: 10,\r\n    fontStyle: 'normal',\r\n    align: 'right'\r\n  });\r\n  currentY += 8;\r\n  \r\n  // Tax row (if applicable)\r\n  if (receiptData.showTaxRow && receiptData.taxAmount > 0) {\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n    pdf.setFillColor(250, 250, 250);\r\n    addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n    \r\n    addText(`Tax (${receiptData.taxRate}%):`, totalsStartX + 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal'\r\n    });\r\n    \r\n    // Vertical line separating label and value\r\n    addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n    \r\n    addText(formatCurrency(receiptData.taxAmount, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n      fontSize: 10,\r\n      fontStyle: 'normal',\r\n      align: 'right'\r\n    });\r\n    currentY += 8;\r\n  }\r\n  \r\n  // Total row with emphasis and larger height for big figures\r\n  addRect(totalsStartX, currentY, totalsWidth, 12, 'S');\r\n  pdf.setFillColor(220, 220, 220);\r\n  addRect(totalsStartX, currentY, totalsWidth, 12, 'F');\r\n  \r\n  addText('TOTAL:', totalsStartX + 4, currentY + 7.5, {\r\n    fontSize: 12,\r\n    fontStyle: 'bold'\r\n  });\r\n  \r\n  // Vertical line separating label and value\r\n  addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 12);\r\n  \r\n  addText(formatCurrency(receiptData.totalAmount, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 7.5, {\r\n    fontSize: 12,\r\n    fontStyle: 'bold',\r\n    align: 'right'\r\n  });\r\n  currentY += 12;\r\n\r\n  // Add Amount Paid and Amount Due for installment sales\r\n  if (receiptData.isInstallmentSale) {\r\n    // Amount Paid row\r\n    if (receiptData.amountPaid !== undefined) {\r\n      addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n      pdf.setFillColor(240, 248, 255); // Light blue background\r\n      addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n      \r\n      addText('Amount Paid:', totalsStartX + 4, currentY + 5.5, {\r\n        fontSize: 10,\r\n        fontStyle: 'bold'\r\n      });\r\n      \r\n      // Vertical line separating label and value\r\n      addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n      \r\n      addText(formatCurrency(receiptData.amountPaid, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n        fontSize: 10,\r\n        fontStyle: 'bold',\r\n        align: 'right'\r\n      });\r\n      currentY += 8;\r\n    }\r\n    \r\n    // Amount Due row\r\n    if (receiptData.amountDue !== undefined) {\r\n      addRect(totalsStartX, currentY, totalsWidth, 8, 'S');\r\n      pdf.setFillColor(255, 240, 240); // Light red background\r\n      addRect(totalsStartX, currentY, totalsWidth, 8, 'F');\r\n      \r\n      addText('Amount Due:', totalsStartX + 4, currentY + 5.5, {\r\n        fontSize: 10,\r\n        fontStyle: 'bold'\r\n      });\r\n      \r\n      // Vertical line separating label and value\r\n      addLine(totalsStartX + labelWidth, currentY, totalsStartX + labelWidth, currentY + 8);\r\n      \r\n      addText(formatCurrency(receiptData.amountDue, receiptData.currency), totalsStartX + labelWidth + valueWidth - 4, currentY + 5.5, {\r\n        fontSize: 10,\r\n        fontStyle: 'bold',\r\n        align: 'right'\r\n      });\r\n      currentY += 8;\r\n    }\r\n  }\r\n  \r\n  currentY += 7; // Reduced from 15\r\n\r\n  // Amount in words with slightly increased spacing\r\n  if (receiptData.totalAmountInWords) {\r\n    checkPageBreak(20);\r\n    \r\n    currentY += 2; // Keep existing spacing\r\n    addText('Amount in words:', innerLeft, currentY, {\r\n      fontSize: 10,\r\n      fontStyle: 'bold'\r\n    });\r\n    currentY += 4; // Increased from 3 to 4\r\n    \r\n    // Better text wrapping for amount in words with increased line height\r\n    const amountText = `${receiptData.currency} ${receiptData.totalAmountInWords} only`;\r\n    const wordsHeight = addMultilineText(amountText, innerLeft, currentY, innerWidth * 0.9, {\r\n      fontSize: 10,\r\n      fontStyle: 'italic',\r\n      lineHeight: 1.4 // Increased from 1.2 to 1.4 for better spacing\r\n    });\r\n    currentY += wordsHeight + 4; // Increased from 3 to 4\r\n  }\r\n\r\n  // Improved Payment information table with reduced spacing\r\n  if (receiptData.hasPaymentInfo && receiptData.paymentMethods && receiptData.paymentMethods.length > 0) {\r\n    checkPageBreak(40);\r\n    \r\n    // Strong separator line with reduced spacing\r\n    addLine(innerLeft, currentY, innerLeft + innerWidth, currentY);\r\n    currentY += 5; // Reduced from 8\r\n\r\n    addText('Payment Information:', innerLeft, currentY, {\r\n      fontSize: 11,\r\n      fontStyle: 'bold'\r\n    });\r\n    currentY += 4; // Reduced from 6\r\n\r\n    // Payment table with better proportions\r\n    const paymentHeaders = ['Payment Method', 'Account Number', 'Account Name'];\r\n    const paymentColWidths = [innerWidth * 0.28, innerWidth * 0.36, innerWidth * 0.36];\r\n    \r\n    // Header background with stronger color\r\n    pdf.setFillColor(240, 240, 240);\r\n    const headerHeight = 10;\r\n    addRect(innerLeft, currentY - 2, innerWidth, headerHeight, 'F');\r\n    addRect(innerLeft, currentY - 2, innerWidth, headerHeight, 'S');\r\n    \r\n    // Header text with proper spacing\r\n    let paymentX = innerLeft;\r\n    paymentHeaders.forEach((header, index) => {\r\n      addText(header, paymentX + 4, currentY + 4, {\r\n        fontSize: 9,\r\n        fontStyle: 'bold'\r\n      });\r\n      if (index < paymentHeaders.length - 1) {\r\n        addLine(paymentX + paymentColWidths[index], currentY - 2, paymentX + paymentColWidths[index], currentY + headerHeight - 2);\r\n      }\r\n      paymentX += paymentColWidths[index];\r\n    });\r\n    \r\n    currentY += headerHeight;\r\n    \r\n    // Payment rows with consistent formatting\r\n    const validPayments = receiptData.paymentMethods.filter(payment => \r\n      payment.method.trim() || payment.accountNumber.trim() || payment.accountName.trim()\r\n    );\r\n    \r\n    validPayments.forEach((payment, index) => {\r\n      const rowHeight = 10;\r\n      checkPageBreak(rowHeight + 5);\r\n      \r\n      // Alternating row colors\r\n      if (index % 2 === 1) {\r\n        pdf.setFillColor(248, 248, 248);\r\n        addRect(innerLeft, currentY, innerWidth, rowHeight, 'F');\r\n      }\r\n      \r\n      // Row border\r\n      addRect(innerLeft, currentY, innerWidth, rowHeight, 'S');\r\n      \r\n      paymentX = innerLeft;\r\n      \r\n      // Payment method\r\n      addText(payment.method, paymentX + 4, currentY + 5, {\r\n        fontSize: 9,\r\n        fontStyle: 'bold'\r\n      });\r\n      paymentX += paymentColWidths[0];\r\n      addLine(paymentX, currentY, paymentX, currentY + rowHeight);\r\n      \r\n      // Account number\r\n      addText(payment.accountNumber, paymentX + 4, currentY + 5, {\r\n        fontSize: 9\r\n      });\r\n      paymentX += paymentColWidths[1];\r\n      addLine(paymentX, currentY, paymentX, currentY + rowHeight);\r\n      \r\n      // Account name\r\n      addText(payment.accountName, paymentX + 4, currentY + 5, {\r\n        fontSize: 9\r\n      });\r\n      \r\n      currentY += rowHeight;\r\n    });\r\n    \r\n    currentY += 4; // Reduced from 8\r\n  }\r\n\r\n  // Notes section (if available)\r\n  if (receiptData.notes && receiptData.notes.trim()) {\r\n    checkPageBreak(25);\r\n    \r\n    // Add separator line\r\n    addLine(innerLeft, currentY, innerLeft + innerWidth, currentY);\r\n    currentY += 4;\r\n    \r\n    // Notes title\r\n    addText('Notes:', innerLeft, currentY, {\r\n      fontSize: 11,\r\n      fontStyle: 'bold'\r\n    });\r\n    currentY += 6;\r\n    \r\n    // Notes content with text wrapping\r\n    const maxWidth = innerWidth - 8;\r\n    const lines = pdf.splitTextToSize(receiptData.notes, maxWidth);\r\n    \r\n    lines.forEach((line: string) => {\r\n      checkPageBreak(8);\r\n      addText(line, innerLeft + 4, currentY, {\r\n        fontSize: 10\r\n      });\r\n      currentY += 5;\r\n    });\r\n    \r\n    currentY += 4;\r\n  }\r\n\r\n  // Signature section (if available) with reduced spacing\r\n  if (receiptData.signature) {\r\n    try {\r\n      checkPageBreak(35);\r\n      \r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      \r\n      await new Promise<void>((resolve) => {\r\n        img.onload = () => {\r\n          try {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n              canvas.width = img.width;\r\n              canvas.height = img.height;\r\n              ctx.drawImage(img, 0, 0);\r\n              \r\n              const dataURL = canvas.toDataURL('image/png');\r\n              \r\n              // Calculate signature dimensions while maintaining aspect ratio\r\n              const maxSigWidth = 40;\r\n              const maxSigHeight = 20;\r\n              const aspectRatio = img.width / img.height;\r\n              \r\n              let sigWidth, sigHeight;\r\n              \r\n              // Calculate dimensions based on aspect ratio\r\n              if (aspectRatio > (maxSigWidth / maxSigHeight)) {\r\n                // Image is wider, constrain by width\r\n                sigWidth = maxSigWidth;\r\n                sigHeight = maxSigWidth / aspectRatio;\r\n              } else {\r\n                // Image is taller, constrain by height\r\n                sigHeight = maxSigHeight;\r\n                sigWidth = maxSigHeight * aspectRatio;\r\n              }\r\n              \r\n              // Position signature on the right\r\n              const sigX = innerLeft + innerWidth - sigWidth;\r\n              \r\n              addLine(innerLeft, currentY, innerLeft + innerWidth, currentY);\r\n              currentY += 4; // Reduced from 6\r\n              \r\n              pdf.addImage(dataURL, 'PNG', sigX, currentY, sigWidth, sigHeight);\r\n              currentY += sigHeight + 2; // Reduced from 3\r\n              \r\n              addText('Authorized Signature', sigX + sigWidth / 2, currentY, {\r\n                fontSize: 8,\r\n                align: 'center'\r\n              });\r\n              currentY += 4; // Reduced from 6\r\n            }\r\n          } catch (error) {\r\n            console.error('Error adding signature to PDF:', error);\r\n          }\r\n          resolve();\r\n        };\r\n        \r\n        img.onerror = () => {\r\n          console.error('Error loading signature image');\r\n          resolve();\r\n        };\r\n        \r\n        img.src = receiptData.signature;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error processing signature:', error);\r\n    }\r\n  }\r\n\r\n  // Footer message with reduced spacing\r\n  checkPageBreak(25);\r\n  currentY += 6; // Reduced from 8\r\n  addText('Thank you for your business!', pageWidth / 2, currentY, {\r\n    fontSize: 11,\r\n    fontStyle: 'bold',\r\n    align: 'center'\r\n  });\r\n  \r\n  currentY += 5; // Add spacing between messages\r\n  addText('Created by Gonza Systems', pageWidth / 2, currentY, {\r\n    fontSize: 9,\r\n    align: 'center'\r\n  });\r\n\r\n  // Return blob or download\r\n  if (returnBlob) {\r\n    return pdf.output('blob');\r\n  } else if (filename) {\r\n    pdf.save(filename);\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}}]
}