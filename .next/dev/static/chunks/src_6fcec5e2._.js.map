{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCashAccounts.ts"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { CashAccount, CashTransaction } from '@/types/cash';\r\n\r\nexport const useCashAccounts = () => {\r\n  const [accounts, setAccounts] = useState<CashAccount[]>([]);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Memoize the load function to prevent unnecessary re-renders\r\n  const loadAccounts = useCallback(async (): Promise<CashAccount[]> => {\r\n    try {\r\n      if (!currentBusiness) {\r\n        return [];\r\n      }\r\n\r\n      // Optimize query - only select needed fields and limit for faster loading\r\n      const { data, error } = await supabase\r\n        .from('cash_accounts')\r\n        .select('id, name, description, opening_balance, is_default, created_at, updated_at')\r\n        .eq('location_id', currentBusiness.id)\r\n        .order('is_default', { ascending: false })\r\n        .order('name'); // Load all cash accounts\r\n\r\n      if (error) throw error;\r\n\r\n      const formattedAccounts: CashAccount[] = data?.map(account => ({\r\n        id: account.id,\r\n        name: account.name,\r\n        description: account.description,\r\n        openingBalance: account.opening_balance,\r\n        isDefault: account.is_default,\r\n        createdAt: new Date(account.created_at),\r\n        updatedAt: new Date(account.updated_at)\r\n      })) || [];\r\n\r\n      return formattedAccounts;\r\n    } catch (error) {\r\n      console.error('Error loading cash accounts:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash accounts. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  // React Query caching\r\n  const queryKey = ['cash_accounts', currentBusiness?.id];\r\n  const { data: queriedAccounts, isLoading: isQueryLoading, isFetching } = useQuery({\r\n    queryKey,\r\n    queryFn: loadAccounts,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 0, // Ensure data is always considered stale to get fresh updates\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedAccounts) {\r\n      setAccounts(queriedAccounts);\r\n    }\r\n  }, [queriedAccounts]);\r\n\r\n  // Derived loading state: only true when first loading (pre cache)\r\n  const isLoading = isQueryLoading && !queriedAccounts;\r\n\r\n  const refreshAccounts = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  // Memoize create account function\r\n  const createAccount = useCallback(async (accountData: {\r\n    name: string;\r\n    description?: string;\r\n    openingBalance: number;\r\n    isDefault?: boolean;\r\n  }) => {\r\n    try {\r\n      if (!currentBusiness) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"No business selected\",\r\n          variant: \"destructive\"\r\n        });\r\n        return null;\r\n      }\r\n\r\n      const { data: userData } = await supabase.auth.getUser();\r\n      if (!userData.user) throw new Error('User not authenticated');\r\n\r\n      const insertData = {\r\n        user_id: userData.user.id,\r\n        location_id: currentBusiness.id,\r\n        name: accountData.name,\r\n        description: accountData.description || null,\r\n        opening_balance: accountData.openingBalance,\r\n        is_default: accountData.isDefault || false\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('cash_accounts')\r\n        .insert(insertData)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      // Format the new account and update cache immediately\r\n      const newAccount: CashAccount = {\r\n        id: data.id,\r\n        name: data.name,\r\n        description: data.description,\r\n        openingBalance: data.opening_balance,\r\n        isDefault: data.is_default,\r\n        createdAt: new Date(data.created_at),\r\n        updatedAt: new Date(data.updated_at)\r\n      };\r\n\r\n      // Update local state immediately\r\n      setAccounts(prev => [newAccount, ...prev]);\r\n\r\n      // Update React Query cache immediately\r\n      queryClient.setQueryData(queryKey, (oldData: CashAccount[] | undefined) => {\r\n        return oldData ? [newAccount, ...oldData] : [newAccount];\r\n      });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account created successfully\"\r\n      });\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error creating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash account. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  }, [currentBusiness, loadAccounts, toast]);\r\n\r\n  const updateAccount = async (id: string, updates: Partial<CashAccount>) => {\r\n    try {\r\n      const updateData: any = {};\r\n\r\n      if (updates.name !== undefined) updateData.name = updates.name;\r\n      if (updates.description !== undefined) updateData.description = updates.description;\r\n      if (updates.openingBalance !== undefined) updateData.opening_balance = updates.openingBalance;\r\n      if (updates.isDefault !== undefined) updateData.is_default = updates.isDefault;\r\n\r\n      const { error } = await supabase\r\n        .from('cash_accounts')\r\n        .update(updateData)\r\n        .eq('id', id)\r\n        .eq('location_id', currentBusiness?.id);\r\n\r\n      if (error) throw error;\r\n\r\n      // Optimistic update - update local state\r\n      setAccounts(prev => prev.map(a => a.id === id ? {\r\n        ...a,\r\n        name: updates.name ?? a.name,\r\n        description: updates.description ?? a.description,\r\n        openingBalance: updates.openingBalance ?? a.openingBalance,\r\n        isDefault: updates.isDefault ?? a.isDefault,\r\n        updatedAt: new Date()\r\n      } : a));\r\n\r\n      // Update React Query cache immediately\r\n      queryClient.setQueryData(queryKey, (oldData: CashAccount[] | undefined) => {\r\n        return oldData ? oldData.map(a => a.id === id ? {\r\n          ...a,\r\n          name: updates.name ?? a.name,\r\n          description: updates.description ?? a.description,\r\n          openingBalance: updates.openingBalance ?? a.openingBalance,\r\n          isDefault: updates.isDefault ?? a.isDefault,\r\n          updatedAt: new Date()\r\n        } : a) : [];\r\n      });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account updated successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update cash account. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteAccount = async (id: string, onDeleted?: () => void) => {\r\n    try {\r\n      if (!currentBusiness) return { success: false, hasTransactions: false };\r\n\r\n      // Check if account has transactions\r\n      const { data: transactions, error: transactionError } = await supabase\r\n        .from('cash_transactions')\r\n        .select('id')\r\n        .eq('account_id', id)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (transactionError) throw transactionError;\r\n\r\n      // Check if account has linked expenses\r\n      const { data: expenses, error: expenseError } = await supabase\r\n        .from('expenses')\r\n        .select('id')\r\n        .eq('cash_account_id', id)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (expenseError) throw expenseError;\r\n\r\n      const transactionCount = transactions?.length || 0;\r\n      const expenseCount = expenses?.length || 0;\r\n      const totalLinkedRecords = transactionCount + expenseCount;\r\n\r\n      if (totalLinkedRecords > 0) {\r\n        // Return an object indicating the account has linked records\r\n        const details = [];\r\n        if (transactionCount > 0) details.push(`${transactionCount} transaction(s)`);\r\n        if (expenseCount > 0) details.push(`${expenseCount} expense(s)`);\r\n\r\n        return {\r\n          hasTransactions: true,\r\n          transactionCount: totalLinkedRecords,\r\n          details: `This account has ${details.join(' and ')}. What would you like to do?`,\r\n          success: false\r\n        };\r\n      }\r\n\r\n      // If no linked records, delete the account\r\n      const { error } = await supabase\r\n        .from('cash_accounts')\r\n        .delete()\r\n        .eq('id', id)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (error) throw error;\r\n      // Optimistic remove\r\n      setAccounts(prev => prev.filter(a => a.id !== id));\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account deleted successfully\"\r\n      });\r\n\r\n      // Call the callback function if provided\r\n      if (onDeleted) {\r\n        onDeleted();\r\n      }\r\n\r\n      return { success: true, hasTransactions: false };\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return { success: false, hasTransactions: false };\r\n    }\r\n  };\r\n\r\n  const deleteAccountWithTransactions = async (id: string, deleteTransactions: boolean = false, onDeleted?: () => void) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n\r\n      if (deleteTransactions) {\r\n        // First delete associated cash transactions\r\n        const { error: transactionError } = await supabase\r\n          .from('cash_transactions')\r\n          .delete()\r\n          .eq('account_id', id)\r\n          .eq('location_id', currentBusiness.id);\r\n\r\n        if (transactionError) throw transactionError;\r\n\r\n        // Then unlink or delete associated expenses\r\n        const { error: expenseError } = await supabase\r\n          .from('expenses')\r\n          .update({\r\n            cash_account_id: null,\r\n            cash_transaction_id: null\r\n          })\r\n          .eq('cash_account_id', id)\r\n          .eq('location_id', currentBusiness.id);\r\n\r\n        if (expenseError) throw expenseError;\r\n      } else {\r\n        // Just unlink expenses (set cash_account_id to null)\r\n        const { error: expenseError } = await supabase\r\n          .from('expenses')\r\n          .update({\r\n            cash_account_id: null,\r\n            cash_transaction_id: null\r\n          })\r\n          .eq('cash_account_id', id)\r\n          .eq('location_id', currentBusiness.id);\r\n\r\n        if (expenseError) throw expenseError;\r\n      }\r\n\r\n      // Then delete the account\r\n      const { error: accountError } = await supabase\r\n        .from('cash_accounts')\r\n        .delete()\r\n        .eq('id', id)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (accountError) throw accountError;\r\n      // Optimistic remove\r\n      setAccounts(prev => prev.filter(a => a.id !== id));\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: deleteTransactions\r\n          ? \"Cash account and all associated records deleted successfully\"\r\n          : \"Cash account deleted successfully (linked records unlinked)\"\r\n      });\r\n\r\n      // Call the callback function if provided\r\n      if (onDeleted) {\r\n        onDeleted();\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account with transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Updated balance calculation to use chunked loading like useCashTransactions\r\n  const getAccountBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    try {\r\n      if (!currentBusiness) return 0;\r\n\r\n      // Get the account's opening balance\r\n      const { data: account, error: accountError } = await supabase\r\n        .from('cash_accounts')\r\n        .select('opening_balance')\r\n        .eq('id', accountId)\r\n        .eq('location_id', currentBusiness.id)\r\n        .single();\r\n\r\n      if (accountError) throw accountError;\r\n\r\n      // Get transaction count first to enable chunked loading\r\n      const { count, error: countError } = await supabase\r\n        .from('cash_transactions')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('account_id', accountId)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (countError) {\r\n        console.error('Error getting transaction count for balance calculation:', countError);\r\n        throw countError;\r\n      }\r\n\r\n      console.log(`Calculating balance for account ${accountId}: ${count || 0} transactions found`);\r\n\r\n      // Load all transactions in chunks of 1000 to bypass Supabase limit\r\n      const allTransactions: any[] = [];\r\n      const chunkSize = 1000;\r\n      let start = 0;\r\n\r\n      while (start < (count || 0)) {\r\n        console.log(`Loading balance chunk ${Math.floor(start / chunkSize) + 1}: rows ${start} to ${start + chunkSize - 1}`);\r\n\r\n        const { data: chunk, error: chunkError } = await supabase\r\n          .from('cash_transactions')\r\n          .select('amount, transaction_type')\r\n          .eq('account_id', accountId)\r\n          .eq('location_id', currentBusiness.id)\r\n          .order('date', { ascending: true })\r\n          .order('created_at', { ascending: true })\r\n          .range(start, start + chunkSize - 1);\r\n\r\n        if (chunkError) {\r\n          console.error('Error loading transaction chunk for balance:', chunkError);\r\n          throw chunkError;\r\n        }\r\n\r\n        if (chunk && chunk.length > 0) {\r\n          allTransactions.push(...chunk);\r\n          console.log(`Balance chunk ${Math.floor(start / chunkSize) + 1}: loaded ${chunk.length} transactions`);\r\n        }\r\n\r\n        start += chunkSize;\r\n      }\r\n\r\n      console.log(`Total transactions loaded for balance calculation: ${allTransactions.length}`);\r\n\r\n      // Calculate balance using the same logic as the summary - exactly matching DailyCashSummary calculation\r\n      let balance = Number(account.opening_balance);\r\n\r\n      allTransactions.forEach(transaction => {\r\n        const amount = Number(transaction.amount);\r\n        if (transaction.transaction_type === 'cash_in' || transaction.transaction_type === 'transfer_in') {\r\n          balance += amount;\r\n        } else if (transaction.transaction_type === 'cash_out' || transaction.transaction_type === 'transfer_out') {\r\n          balance -= amount;\r\n        }\r\n      });\r\n\r\n      console.log(`Final calculated balance for account ${accountId}: ${balance}`);\r\n      return balance;\r\n    } catch (error) {\r\n      console.error('Error calculating account balance:', error);\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  // Initial load handled by React Query (no manual call)\r\n\r\n  // Realtime: invalidate cash accounts cache on changes for current location\r\n  useEffect(() => {\r\n    if (!currentBusiness?.id) return;\r\n\r\n    const channel = supabase\r\n      .channel('cash_accounts_and_transactions_changes')\r\n      .on('postgres_changes', {\r\n        event: '*',\r\n        schema: 'public',\r\n        table: 'cash_accounts',\r\n        filter: `location_id=eq.${currentBusiness.id}`\r\n      }, () => {\r\n        queryClient.invalidateQueries({ queryKey });\r\n      })\r\n      .on('postgres_changes', {\r\n        event: '*',\r\n        schema: 'public',\r\n        table: 'cash_transactions',\r\n        filter: `location_id=eq.${currentBusiness.id}`\r\n      }, () => {\r\n        // Refresh account balances when transactions change\r\n        queryClient.invalidateQueries({ queryKey });\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [currentBusiness?.id]);\r\n\r\n  // Memoize return object to prevent unnecessary re-renders\r\n  return useMemo(() => ({\r\n    accounts,\r\n    isLoading,\r\n    createAccount,\r\n    updateAccount,\r\n    deleteAccount,\r\n    deleteAccountWithTransactions,\r\n    getAccountBalance,\r\n    loadAccounts,\r\n    refreshAccounts\r\n  }), [accounts, isLoading, createAccount, getAccountBalance, loadAccounts]);\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AAAA;;;;;;;AAGO,MAAM,kBAAkB;;IAC7B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,2IAAQ;IAC1B,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,qJAAW;IACvC,MAAM,cAAc,IAAA,2MAAc;IAElC,8DAA8D;IAC9D,MAAM,eAAe,IAAA,4KAAW;qDAAC;YAC/B,IAAI;gBACF,IAAI,CAAC,iBAAiB;oBACpB,OAAO,EAAE;gBACX;gBAEA,0EAA0E;gBAC1E,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,wJAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,8EACP,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,KAAK,CAAC,cAAc;oBAAE,WAAW;gBAAM,GACvC,KAAK,CAAC,SAAS,yBAAyB;gBAE3C,IAAI,OAAO,MAAM;gBAEjB,MAAM,oBAAmC,MAAM;iEAAI,CAAA,UAAW,CAAC;4BAC7D,IAAI,QAAQ,EAAE;4BACd,MAAM,QAAQ,IAAI;4BAClB,aAAa,QAAQ,WAAW;4BAChC,gBAAgB,QAAQ,eAAe;4BACvC,WAAW,QAAQ,UAAU;4BAC7B,WAAW,IAAI,KAAK,QAAQ,UAAU;4BACtC,WAAW,IAAI,KAAK,QAAQ,UAAU;wBACxC,CAAC;mEAAM,EAAE;gBAET,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,MAAM;oBACJ,OAAO;oBACP,aAAa;oBACb,SAAS;gBACX;gBACA,OAAO,EAAE;YACX;QACF;oDAAG;QAAC,iBAAiB;QAAI;KAAM;IAE/B,sBAAsB;IACtB,MAAM,WAAW;QAAC;QAAiB,iBAAiB;KAAG;IACvD,MAAM,EAAE,MAAM,eAAe,EAAE,WAAW,cAAc,EAAE,UAAU,EAAE,GAAG,IAAA,0LAAQ,EAAC;QAChF;QACA,SAAS;QACT,SAAS,CAAC,CAAC,iBAAiB;QAC5B,WAAW;QACX,QAAQ,KAAK;QACb,sBAAsB;QACtB,oBAAoB;IACtB;IAEA,yCAAyC;IACzC,IAAA,0KAAS;qCAAC;YACR,IAAI,iBAAiB;gBACnB,YAAY;YACd;QACF;oCAAG;QAAC;KAAgB;IAEpB,kEAAkE;IAClE,MAAM,YAAY,kBAAkB,CAAC;IAErC,MAAM,kBAAkB,IAAA,4KAAW;wDAAC;YAClC,YAAY,iBAAiB,CAAC;gBAAE;YAAS;QAC3C;uDAAG;QAAC;QAAa;KAAS;IAE1B,kCAAkC;IAClC,MAAM,gBAAgB,IAAA,4KAAW;sDAAC,OAAO;YAMvC,IAAI;gBACF,IAAI,CAAC,iBAAiB;oBACpB,MAAM;wBACJ,OAAO;wBACP,aAAa;wBACb,SAAS;oBACX;oBACA,OAAO;gBACT;gBAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,wJAAQ,CAAC,IAAI,CAAC,OAAO;gBACtD,IAAI,CAAC,SAAS,IAAI,EAAE,MAAM,IAAI,MAAM;gBAEpC,MAAM,aAAa;oBACjB,SAAS,SAAS,IAAI,CAAC,EAAE;oBACzB,aAAa,gBAAgB,EAAE;oBAC/B,MAAM,YAAY,IAAI;oBACtB,aAAa,YAAY,WAAW,IAAI;oBACxC,iBAAiB,YAAY,cAAc;oBAC3C,YAAY,YAAY,SAAS,IAAI;gBACvC;gBAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,wJAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,YACP,MAAM,GACN,MAAM;gBAET,IAAI,OAAO,MAAM;gBAEjB,sDAAsD;gBACtD,MAAM,aAA0B;oBAC9B,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;oBACf,aAAa,KAAK,WAAW;oBAC7B,gBAAgB,KAAK,eAAe;oBACpC,WAAW,KAAK,UAAU;oBAC1B,WAAW,IAAI,KAAK,KAAK,UAAU;oBACnC,WAAW,IAAI,KAAK,KAAK,UAAU;gBACrC;gBAEA,iCAAiC;gBACjC;kEAAY,CAAA,OAAQ;4BAAC;+BAAe;yBAAK;;gBAEzC,uCAAuC;gBACvC,YAAY,YAAY,CAAC;kEAAU,CAAC;wBAClC,OAAO,UAAU;4BAAC;+BAAe;yBAAQ,GAAG;4BAAC;yBAAW;oBAC1D;;gBAEA,MAAM;oBACJ,OAAO;oBACP,aAAa;gBACf;gBAEA,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,MAAM;oBACJ,OAAO;oBACP,aAAa;oBACb,SAAS;gBACX;gBACA,OAAO;YACT;QACF;qDAAG;QAAC;QAAiB;QAAc;KAAM;IAEzC,MAAM,gBAAgB,OAAO,IAAY;QACvC,IAAI;YACF,MAAM,aAAkB,CAAC;YAEzB,IAAI,QAAQ,IAAI,KAAK,WAAW,WAAW,IAAI,GAAG,QAAQ,IAAI;YAC9D,IAAI,QAAQ,WAAW,KAAK,WAAW,WAAW,WAAW,GAAG,QAAQ,WAAW;YACnF,IAAI,QAAQ,cAAc,KAAK,WAAW,WAAW,eAAe,GAAG,QAAQ,cAAc;YAC7F,IAAI,QAAQ,SAAS,KAAK,WAAW,WAAW,UAAU,GAAG,QAAQ,SAAS;YAE9E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,wJAAQ,CAC7B,IAAI,CAAC,iBACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,IACT,EAAE,CAAC,eAAe,iBAAiB;YAEtC,IAAI,OAAO,MAAM;YAEjB,yCAAyC;YACzC,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;wBAC9C,GAAG,CAAC;wBACJ,MAAM,QAAQ,IAAI,IAAI,EAAE,IAAI;wBAC5B,aAAa,QAAQ,WAAW,IAAI,EAAE,WAAW;wBACjD,gBAAgB,QAAQ,cAAc,IAAI,EAAE,cAAc;wBAC1D,WAAW,QAAQ,SAAS,IAAI,EAAE,SAAS;wBAC3C,WAAW,IAAI;oBACjB,IAAI;YAEJ,uCAAuC;YACvC,YAAY,YAAY,CAAC,UAAU,CAAC;gBAClC,OAAO,UAAU,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;wBAC9C,GAAG,CAAC;wBACJ,MAAM,QAAQ,IAAI,IAAI,EAAE,IAAI;wBAC5B,aAAa,QAAQ,WAAW,IAAI,EAAE,WAAW;wBACjD,gBAAgB,QAAQ,cAAc,IAAI,EAAE,cAAc;wBAC1D,WAAW,QAAQ,SAAS,IAAI,EAAE,SAAS;wBAC3C,WAAW,IAAI;oBACjB,IAAI,KAAK,EAAE;YACb;YAEA,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;QACT;IACF;IAEA,MAAM,gBAAgB,OAAO,IAAY;QACvC,IAAI;YACF,IAAI,CAAC,iBAAiB,OAAO;gBAAE,SAAS;gBAAO,iBAAiB;YAAM;YAEtE,oCAAoC;YACpC,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,gBAAgB,EAAE,GAAG,MAAM,wJAAQ,CACnE,IAAI,CAAC,qBACL,MAAM,CAAC,MACP,EAAE,CAAC,cAAc,IACjB,EAAE,CAAC,eAAe,gBAAgB,EAAE;YAEvC,IAAI,kBAAkB,MAAM;YAE5B,uCAAuC;YACvC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,wJAAQ,CAC3D,IAAI,CAAC,YACL,MAAM,CAAC,MACP,EAAE,CAAC,mBAAmB,IACtB,EAAE,CAAC,eAAe,gBAAgB,EAAE;YAEvC,IAAI,cAAc,MAAM;YAExB,MAAM,mBAAmB,cAAc,UAAU;YACjD,MAAM,eAAe,UAAU,UAAU;YACzC,MAAM,qBAAqB,mBAAmB;YAE9C,IAAI,qBAAqB,GAAG;gBAC1B,6DAA6D;gBAC7D,MAAM,UAAU,EAAE;gBAClB,IAAI,mBAAmB,GAAG,QAAQ,IAAI,CAAC,GAAG,iBAAiB,eAAe,CAAC;gBAC3E,IAAI,eAAe,GAAG,QAAQ,IAAI,CAAC,GAAG,aAAa,WAAW,CAAC;gBAE/D,OAAO;oBACL,iBAAiB;oBACjB,kBAAkB;oBAClB,SAAS,CAAC,iBAAiB,EAAE,QAAQ,IAAI,CAAC,SAAS,4BAA4B,CAAC;oBAChF,SAAS;gBACX;YACF;YAEA,2CAA2C;YAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,wJAAQ,CAC7B,IAAI,CAAC,iBACL,MAAM,GACN,EAAE,CAAC,MAAM,IACT,EAAE,CAAC,eAAe,gBAAgB,EAAE;YAEvC,IAAI,OAAO,MAAM;YACjB,oBAAoB;YACpB,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC9C,YAAY,iBAAiB,CAAC;gBAAE;YAAS;YAEzC,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YAEA,yCAAyC;YACzC,IAAI,WAAW;gBACb;YACF;YAEA,OAAO;gBAAE,SAAS;gBAAM,iBAAiB;YAAM;QACjD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;gBAAE,SAAS;gBAAO,iBAAiB;YAAM;QAClD;IACF;IAEA,MAAM,gCAAgC,OAAO,IAAY,qBAA8B,KAAK,EAAE;QAC5F,IAAI;YACF,IAAI,CAAC,iBAAiB,OAAO;YAE7B,IAAI,oBAAoB;gBACtB,4CAA4C;gBAC5C,MAAM,EAAE,OAAO,gBAAgB,EAAE,GAAG,MAAM,wJAAQ,CAC/C,IAAI,CAAC,qBACL,MAAM,GACN,EAAE,CAAC,cAAc,IACjB,EAAE,CAAC,eAAe,gBAAgB,EAAE;gBAEvC,IAAI,kBAAkB,MAAM;gBAE5B,4CAA4C;gBAC5C,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,wJAAQ,CAC3C,IAAI,CAAC,YACL,MAAM,CAAC;oBACN,iBAAiB;oBACjB,qBAAqB;gBACvB,GACC,EAAE,CAAC,mBAAmB,IACtB,EAAE,CAAC,eAAe,gBAAgB,EAAE;gBAEvC,IAAI,cAAc,MAAM;YAC1B,OAAO;gBACL,qDAAqD;gBACrD,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,wJAAQ,CAC3C,IAAI,CAAC,YACL,MAAM,CAAC;oBACN,iBAAiB;oBACjB,qBAAqB;gBACvB,GACC,EAAE,CAAC,mBAAmB,IACtB,EAAE,CAAC,eAAe,gBAAgB,EAAE;gBAEvC,IAAI,cAAc,MAAM;YAC1B;YAEA,0BAA0B;YAC1B,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,wJAAQ,CAC3C,IAAI,CAAC,iBACL,MAAM,GACN,EAAE,CAAC,MAAM,IACT,EAAE,CAAC,eAAe,gBAAgB,EAAE;YAEvC,IAAI,cAAc,MAAM;YACxB,oBAAoB;YACpB,YAAY,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC9C,YAAY,iBAAiB,CAAC;gBAAE;YAAS;YAEzC,MAAM;gBACJ,OAAO;gBACP,aAAa,qBACT,iEACA;YACN;YAEA,yCAAyC;YACzC,IAAI,WAAW;gBACb;YACF;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kDAAkD;YAChE,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;QACT;IACF;IAEA,8EAA8E;IAC9E,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO;YAC3C,IAAI;gBACF,IAAI,CAAC,iBAAiB,OAAO;gBAE7B,oCAAoC;gBACpC,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,wJAAQ,CAC1D,IAAI,CAAC,iBACL,MAAM,CAAC,mBACP,EAAE,CAAC,MAAM,WACT,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,MAAM;gBAET,IAAI,cAAc,MAAM;gBAExB,wDAAwD;gBACxD,MAAM,EAAE,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,wJAAQ,CAChD,IAAI,CAAC,qBACL,MAAM,CAAC,KAAK;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GACzC,EAAE,CAAC,cAAc,WACjB,EAAE,CAAC,eAAe,gBAAgB,EAAE;gBAEvC,IAAI,YAAY;oBACd,QAAQ,KAAK,CAAC,4DAA4D;oBAC1E,MAAM;gBACR;gBAEA,QAAQ,GAAG,CAAC,CAAC,gCAAgC,EAAE,UAAU,EAAE,EAAE,SAAS,EAAE,mBAAmB,CAAC;gBAE5F,mEAAmE;gBACnE,MAAM,kBAAyB,EAAE;gBACjC,MAAM,YAAY;gBAClB,IAAI,QAAQ;gBAEZ,MAAO,QAAQ,CAAC,SAAS,CAAC,EAAG;oBAC3B,QAAQ,GAAG,CAAC,CAAC,sBAAsB,EAAE,KAAK,KAAK,CAAC,QAAQ,aAAa,EAAE,OAAO,EAAE,MAAM,IAAI,EAAE,QAAQ,YAAY,GAAG;oBAEnH,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,wJAAQ,CACtD,IAAI,CAAC,qBACL,MAAM,CAAC,4BACP,EAAE,CAAC,cAAc,WACjB,EAAE,CAAC,eAAe,gBAAgB,EAAE,EACpC,KAAK,CAAC,QAAQ;wBAAE,WAAW;oBAAK,GAChC,KAAK,CAAC,cAAc;wBAAE,WAAW;oBAAK,GACtC,KAAK,CAAC,OAAO,QAAQ,YAAY;oBAEpC,IAAI,YAAY;wBACd,QAAQ,KAAK,CAAC,gDAAgD;wBAC9D,MAAM;oBACR;oBAEA,IAAI,SAAS,MAAM,MAAM,GAAG,GAAG;wBAC7B,gBAAgB,IAAI,IAAI;wBACxB,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,KAAK,KAAK,CAAC,QAAQ,aAAa,EAAE,SAAS,EAAE,MAAM,MAAM,CAAC,aAAa,CAAC;oBACvG;oBAEA,SAAS;gBACX;gBAEA,QAAQ,GAAG,CAAC,CAAC,mDAAmD,EAAE,gBAAgB,MAAM,EAAE;gBAE1F,wGAAwG;gBACxG,IAAI,UAAU,OAAO,QAAQ,eAAe;gBAE5C,gBAAgB,OAAO;sEAAC,CAAA;wBACtB,MAAM,SAAS,OAAO,YAAY,MAAM;wBACxC,IAAI,YAAY,gBAAgB,KAAK,aAAa,YAAY,gBAAgB,KAAK,eAAe;4BAChG,WAAW;wBACb,OAAO,IAAI,YAAY,gBAAgB,KAAK,cAAc,YAAY,gBAAgB,KAAK,gBAAgB;4BACzG,WAAW;wBACb;oBACF;;gBAEA,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,UAAU,EAAE,EAAE,SAAS;gBAC3E,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;gBACpD,OAAO;YACT;QACF;yDAAG;QAAC,iBAAiB;KAAG;IAExB,uDAAuD;IAEvD,2EAA2E;IAC3E,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,iBAAiB,IAAI;YAE1B,MAAM,UAAU,wJAAQ,CACrB,OAAO,CAAC,0CACR,EAAE,CAAC,oBAAoB;gBACtB,OAAO;gBACP,QAAQ;gBACR,OAAO;gBACP,QAAQ,CAAC,eAAe,EAAE,gBAAgB,EAAE,EAAE;YAChD;qDAAG;oBACD,YAAY,iBAAiB,CAAC;wBAAE;oBAAS;gBAC3C;oDACC,EAAE,CAAC,oBAAoB;gBACtB,OAAO;gBACP,QAAQ;gBACR,OAAO;gBACP,QAAQ,CAAC,eAAe,EAAE,gBAAgB,EAAE,EAAE;YAChD;qDAAG;oBACD,oDAAoD;oBACpD,YAAY,iBAAiB,CAAC;wBAAE;oBAAS;gBAC3C;oDACC,SAAS;YAEZ;6CAAO;oBACL,wJAAQ,CAAC,aAAa,CAAC;gBACzB;;QACF;oCAAG;QAAC,iBAAiB;KAAG;IAExB,0DAA0D;IAC1D,OAAO,IAAA,wKAAO;mCAAC,IAAM,CAAC;gBACpB;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF,CAAC;kCAAG;QAAC;QAAU;QAAW;QAAe;QAAmB;KAAa;AAC3E;GA1da;;QAEO,2IAAQ;QACE,qJAAW;QACnB,2MAAc;QA2CuC,0LAAQ"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/types/cash.ts"],"sourcesContent":["\r\n// Cash management types\r\nexport interface CashAccount {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashAccount {\r\n  id: string;\r\n  user_id: string;\r\n  name: string;\r\n  description: string | null;\r\n  opening_balance: number;\r\n  is_default: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashTransaction {\r\n  id: string;\r\n  accountId: string | null;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out';\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string | null;\r\n  tags: string[] | null;\r\n  date: Date;\r\n  paymentMethod: string | null;\r\n  receiptImage: string | null;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashTransaction {\r\n  id: string;\r\n  user_id: string;\r\n  account_id: string | null;\r\n  amount: number;\r\n  transaction_type: string;\r\n  category: string;\r\n  description: string;\r\n  person_in_charge: string | null;\r\n  tags: string[] | null;\r\n  date: string;\r\n  payment_method: string | null;\r\n  receipt_image: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashAccountFormData {\r\n  name: string;\r\n  description: string;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n}\r\n\r\nexport interface CashTransactionFormData {\r\n  accountId: string;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer';\r\n  toAccountId?: string;\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string;\r\n  tags: string[];\r\n  date: Date;\r\n  paymentMethod: string;\r\n  receiptImage: string;\r\n}\r\n\r\nexport interface DailyCashSummary {\r\n  date: Date;\r\n  openingBalance: number;\r\n  cashIn: number;\r\n  cashOut: number;\r\n  transfersIn: number;\r\n  transfersOut: number;\r\n  closingBalance: number;\r\n}\r\n\r\n// Conversion functions\r\nexport const mapDbCashAccountToCashAccount = (dbAccount: DbCashAccount): CashAccount => {\r\n  return {\r\n    id: dbAccount.id,\r\n    name: dbAccount.name,\r\n    description: dbAccount.description,\r\n    openingBalance: Number(dbAccount.opening_balance),\r\n    isDefault: dbAccount.is_default,\r\n    createdAt: new Date(dbAccount.created_at),\r\n    updatedAt: new Date(dbAccount.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbInsert = (formData: CashAccountFormData, userId: string): Omit<DbCashAccount, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    name: formData.name,\r\n    description: formData.description || null,\r\n    opening_balance: formData.openingBalance,\r\n    is_default: formData.isDefault\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbUpdate = (formData: Partial<CashAccountFormData>): Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> => {\r\n  const result: Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> = {};\r\n\r\n  if (formData.name !== undefined) result.name = formData.name;\r\n  if (formData.description !== undefined) result.description = formData.description || null;\r\n  if (formData.openingBalance !== undefined) result.opening_balance = formData.openingBalance;\r\n  if (formData.isDefault !== undefined) result.is_default = formData.isDefault;\r\n\r\n  return result;\r\n};\r\n\r\nexport const mapDbCashTransactionToCashTransaction = (dbTransaction: DbCashTransaction): CashTransaction => {\r\n  return {\r\n    id: dbTransaction.id,\r\n    accountId: dbTransaction.account_id,\r\n    amount: Number(dbTransaction.amount),\r\n    transactionType: dbTransaction.transaction_type as 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out',\r\n    category: dbTransaction.category,\r\n    description: dbTransaction.description,\r\n    personInCharge: dbTransaction.person_in_charge,\r\n    tags: dbTransaction.tags,\r\n    date: new Date(dbTransaction.date),\r\n    paymentMethod: dbTransaction.payment_method,\r\n    receiptImage: dbTransaction.receipt_image,\r\n    createdAt: new Date(dbTransaction.created_at),\r\n    updatedAt: new Date(dbTransaction.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashTransactionFormToDbInsert = (formData: CashTransactionFormData, userId: string): Omit<DbCashTransaction, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    account_id: formData.accountId,\r\n    amount: formData.amount,\r\n    transaction_type: formData.transactionType,\r\n    category: formData.category,\r\n    description: formData.description,\r\n    person_in_charge: formData.personInCharge || null,\r\n    tags: formData.tags.length > 0 ? formData.tags : null,\r\n    date: formData.date.toISOString().split('T')[0],\r\n    payment_method: formData.paymentMethod || null,\r\n    receipt_image: formData.receiptImage || null\r\n  };\r\n};\r\n"],"names":[],"mappings":"AACA,wBAAwB;;;;;;;;;;;;;AAuFjB,MAAM,gCAAgC,CAAC;IAC5C,OAAO;QACL,IAAI,UAAU,EAAE;QAChB,MAAM,UAAU,IAAI;QACpB,aAAa,UAAU,WAAW;QAClC,gBAAgB,OAAO,UAAU,eAAe;QAChD,WAAW,UAAU,UAAU;QAC/B,WAAW,IAAI,KAAK,UAAU,UAAU;QACxC,WAAW,IAAI,KAAK,UAAU,UAAU;IAC1C;AACF;AAEO,MAAM,+BAA+B,CAAC,UAA+B;IAC1E,OAAO;QACL,SAAS;QACT,MAAM,SAAS,IAAI;QACnB,aAAa,SAAS,WAAW,IAAI;QACrC,iBAAiB,SAAS,cAAc;QACxC,YAAY,SAAS,SAAS;IAChC;AACF;AAEO,MAAM,+BAA+B,CAAC;IAC3C,MAAM,SAAuF,CAAC;IAE9F,IAAI,SAAS,IAAI,KAAK,WAAW,OAAO,IAAI,GAAG,SAAS,IAAI;IAC5D,IAAI,SAAS,WAAW,KAAK,WAAW,OAAO,WAAW,GAAG,SAAS,WAAW,IAAI;IACrF,IAAI,SAAS,cAAc,KAAK,WAAW,OAAO,eAAe,GAAG,SAAS,cAAc;IAC3F,IAAI,SAAS,SAAS,KAAK,WAAW,OAAO,UAAU,GAAG,SAAS,SAAS;IAE5E,OAAO;AACT;AAEO,MAAM,wCAAwC,CAAC;IACpD,OAAO;QACL,IAAI,cAAc,EAAE;QACpB,WAAW,cAAc,UAAU;QACnC,QAAQ,OAAO,cAAc,MAAM;QACnC,iBAAiB,cAAc,gBAAgB;QAC/C,UAAU,cAAc,QAAQ;QAChC,aAAa,cAAc,WAAW;QACtC,gBAAgB,cAAc,gBAAgB;QAC9C,MAAM,cAAc,IAAI;QACxB,MAAM,IAAI,KAAK,cAAc,IAAI;QACjC,eAAe,cAAc,cAAc;QAC3C,cAAc,cAAc,aAAa;QACzC,WAAW,IAAI,KAAK,cAAc,UAAU;QAC5C,WAAW,IAAI,KAAK,cAAc,UAAU;IAC9C;AACF;AAEO,MAAM,mCAAmC,CAAC,UAAmC;IAClF,OAAO;QACL,SAAS;QACT,YAAY,SAAS,SAAS;QAC9B,QAAQ,SAAS,MAAM;QACvB,kBAAkB,SAAS,eAAe;QAC1C,UAAU,SAAS,QAAQ;QAC3B,aAAa,SAAS,WAAW;QACjC,kBAAkB,SAAS,cAAc,IAAI;QAC7C,MAAM,SAAS,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,IAAI,GAAG;QACjD,MAAM,SAAS,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAC/C,gBAAgB,SAAS,aAAa,IAAI;QAC1C,eAAe,SAAS,YAAY,IAAI;IAC1C;AACF"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCashTransactions.ts"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  CashTransaction,\r\n  DbCashTransaction,\r\n  CashTransactionFormData,\r\n  DailyCashSummary,\r\n  mapDbCashTransactionToCashTransaction,\r\n  mapCashTransactionFormToDbInsert\r\n} from '@/types/cash';\r\n\r\nexport const useCashTransactions = (accountId?: string) => {\r\n  const { user } = useAuth();\r\n  const { currentBusiness } = useBusiness();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Chunked transaction loading to bypass Supabase 1000 row limit\r\n  const loadTransactions = useCallback(async (): Promise<CashTransaction[]> => {\r\n    try {\r\n      if (!user || !currentBusiness) {\r\n        return [];\r\n      }\r\n\r\n      // First, get the total count\r\n      let countQuery = supabase\r\n        .from('cash_transactions')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (accountId) {\r\n        countQuery = countQuery.eq('account_id', accountId);\r\n      }\r\n\r\n      const { count, error: countError } = await countQuery;\r\n\r\n      if (countError) {\r\n        console.error('Error getting transaction count:', countError);\r\n        throw countError;\r\n      }\r\n\r\n      // Load transactions in chunks of 1000 to bypass limit\r\n      const allTransactions: any[] = [];\r\n      const chunkSize = 1000;\r\n      let start = 0;\r\n\r\n      while (start < (count || 0)) {\r\n        let chunkQuery = supabase\r\n          .from('cash_transactions')\r\n          .select(`\r\n            id,\r\n            user_id,\r\n            account_id,\r\n            amount,\r\n            transaction_type,\r\n            category,\r\n            description,\r\n            person_in_charge,\r\n            tags,\r\n            date,\r\n            payment_method,\r\n            receipt_image,\r\n            created_at,\r\n            updated_at\r\n          `)\r\n          .eq('location_id', currentBusiness.id)\r\n          .order('date', { ascending: false })\r\n          .order('created_at', { ascending: false })\r\n          .range(start, start + chunkSize - 1);\r\n\r\n        // Apply account filter if specified\r\n        if (accountId) {\r\n          chunkQuery = chunkQuery.eq('account_id', accountId);\r\n        }\r\n\r\n        const { data: chunkData, error: chunkError } = await chunkQuery;\r\n\r\n        if (chunkError) {\r\n          console.error('Error loading transaction chunk:', chunkError);\r\n          throw chunkError;\r\n        }\r\n\r\n        if (chunkData && chunkData.length > 0) {\r\n          allTransactions.push(...chunkData);\r\n        }\r\n\r\n        // If we got less than chunkSize, we've reached the end\r\n        if (!chunkData || chunkData.length < chunkSize) {\r\n          break;\r\n        }\r\n\r\n        start += chunkSize;\r\n      }\r\n\r\n      // Format all transactions\r\n      const formattedTransactions = allTransactions.map((item: any) => {\r\n        const dbTransaction: DbCashTransaction = {\r\n          id: item.id,\r\n          user_id: item.user_id,\r\n          account_id: item.account_id,\r\n          amount: item.amount,\r\n          transaction_type: item.transaction_type,\r\n          category: item.category,\r\n          description: item.description,\r\n          person_in_charge: item.person_in_charge,\r\n          tags: item.tags,\r\n          date: item.date,\r\n          payment_method: item.payment_method,\r\n          receipt_image: item.receipt_image,\r\n          created_at: item.created_at,\r\n          updated_at: item.updated_at\r\n        };\r\n        return mapDbCashTransactionToCashTransaction(dbTransaction);\r\n      });\r\n\r\n      // Sort transactions by date and created_at descending (most recent first)\r\n      formattedTransactions.sort((a, b) => {\r\n        const dateCompare = new Date(b.date).getTime() - new Date(a.date).getTime();\r\n        if (dateCompare !== 0) return dateCompare;\r\n        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n      });\r\n\r\n      return formattedTransactions;\r\n    } catch (error) {\r\n      console.error('Error loading cash transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash transactions. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [user, currentBusiness?.id, accountId, toast]);\r\n\r\n  // React Query caching\r\n  const queryKey = useMemo(() => ['cash_transactions', currentBusiness?.id, user?.id, accountId], [currentBusiness?.id, user?.id, accountId]);\r\n\r\n  const { data: transactions = [], isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadTransactions,\r\n    enabled: !!user && !!currentBusiness?.id,\r\n    staleTime: 0,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n  });\r\n\r\n  // Derived loading state to avoid flash on background refetch\r\n  const isLoading = isQueryLoading && transactions.length === 0;\r\n\r\n  const createTransaction = async (transactionData: CashTransactionFormData) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated or no business selected');\r\n\r\n      // Get account names for proper transfer descriptions\r\n      const getAccountName = async (accountId: string) => {\r\n        const { data, error } = await supabase\r\n          .from('cash_accounts')\r\n          .select('name')\r\n          .eq('id', accountId)\r\n          .eq('location_id', currentBusiness.id)\r\n          .single();\r\n\r\n        if (error) throw error;\r\n        return data?.name || 'Unknown Account';\r\n      };\r\n\r\n      // Handle transfer transaction - create two transactions\r\n      if (transactionData.transactionType === 'transfer' && transactionData.toAccountId) {\r\n        const fromAccountName = await getAccountName(transactionData.accountId);\r\n        const toAccountName = await getAccountName(transactionData.toAccountId);\r\n\r\n        const transferOutData: CashTransactionFormData = {\r\n          ...transactionData,\r\n          transactionType: 'cash_out',\r\n          description: `Transfer to ${toAccountName}: ${transactionData.description}`\r\n        };\r\n\r\n        const transferInData: CashTransactionFormData = {\r\n          ...transactionData,\r\n          accountId: transactionData.toAccountId,\r\n          transactionType: 'cash_in',\r\n          description: `Transfer from ${fromAccountName}: ${transactionData.description}`\r\n        };\r\n\r\n        const dbTransferOut = {\r\n          ...mapCashTransactionFormToDbInsert(transferOutData, user.id),\r\n          location_id: currentBusiness.id,\r\n          transaction_type: 'transfer_out'\r\n        };\r\n        const dbTransferIn = {\r\n          ...mapCashTransactionFormToDbInsert(transferInData, user.id),\r\n          location_id: currentBusiness.id,\r\n          transaction_type: 'transfer_in'\r\n        };\r\n\r\n        const { error: error1 } = await supabase\r\n          .from('cash_transactions')\r\n          .insert(dbTransferOut);\r\n\r\n        const { error: error2 } = await supabase\r\n          .from('cash_transactions')\r\n          .insert(dbTransferIn);\r\n\r\n        if (error1 || error2) throw error1 || error2;\r\n\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Transfer completed successfully\"\r\n        });\r\n\r\n        queryClient.invalidateQueries({ queryKey });\r\n        return;\r\n      }\r\n\r\n      const dbInsertData = {\r\n        ...mapCashTransactionFormToDbInsert(transactionData, user.id),\r\n        location_id: currentBusiness.id\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('cash_transactions')\r\n        .insert(dbInsertData)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash transaction created successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return mapDbCashTransactionToCashTransaction(data);\r\n    } catch (error) {\r\n      console.error('Error creating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash transaction. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const createBulkTransactions = async (transactionsData: CashTransactionFormData[]) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated or no business selected');\r\n\r\n      // Optimization: Fetch all accounts once for transfer descriptions\r\n      const { data: allAccounts, error: accountsError } = await (supabase as any)\r\n        .from('cash_accounts')\r\n        .select('id, name')\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (accountsError) throw accountsError;\r\n\r\n      const accountMap = new Map(allAccounts?.map((acc: any) => [acc.id, acc.name]));\r\n      const getAccountName = (id: string) => accountMap.get(id) || 'Unknown Account';\r\n\r\n      const dbInserts: any[] = [];\r\n\r\n      for (const transactionData of transactionsData) {\r\n        if (transactionData.transactionType === 'transfer' && transactionData.toAccountId) {\r\n          const fromAccountName = getAccountName(transactionData.accountId);\r\n          const toAccountName = getAccountName(transactionData.toAccountId);\r\n\r\n          dbInserts.push({\r\n            ...mapCashTransactionFormToDbInsert({\r\n              ...transactionData,\r\n              transactionType: 'cash_out',\r\n              description: `Transfer to ${toAccountName}: ${transactionData.description}`\r\n            }, user.id),\r\n            location_id: currentBusiness.id,\r\n            transaction_type: 'transfer_out'\r\n          });\r\n\r\n          dbInserts.push({\r\n            ...mapCashTransactionFormToDbInsert({\r\n              ...transactionData,\r\n              accountId: transactionData.toAccountId,\r\n              transactionType: 'cash_in',\r\n              description: `Transfer from ${fromAccountName}: ${transactionData.description}`\r\n            }, user.id),\r\n            location_id: currentBusiness.id,\r\n            transaction_type: 'transfer_in'\r\n          });\r\n        } else {\r\n          const finalTransactionType = transactionData.transactionType === 'transfer'\r\n            ? 'cash_out'\r\n            : transactionData.transactionType;\r\n\r\n          dbInserts.push({\r\n            ...mapCashTransactionFormToDbInsert({\r\n              ...transactionData,\r\n              transactionType: finalTransactionType as any\r\n            }, user.id),\r\n            location_id: currentBusiness.id,\r\n            transaction_type: finalTransactionType === 'cash_out' ? 'cash_out' : finalTransactionType\r\n          });\r\n        }\r\n      }\r\n\r\n      const { data, error } = await (supabase as any)\r\n        .from('cash_transactions')\r\n        .insert(dbInserts)\r\n        .select();\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Successfully created ${transactionsData.length} transactions`\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return data.map((item: any) => mapDbCashTransactionToCashTransaction(item));\r\n    } catch (error) {\r\n      console.error('Error creating bulk transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create bulk transactions. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const updateTransaction = async (id: string, updates: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated or no business selected');\r\n\r\n      const updateData: any = {};\r\n      if (updates.amount !== undefined) updateData.amount = updates.amount;\r\n      if (updates.category !== undefined) updateData.category = updates.category;\r\n      if (updates.description !== undefined) updateData.description = updates.description;\r\n      if (updates.personInCharge !== undefined) updateData.person_in_charge = updates.personInCharge || null;\r\n      if (updates.tags !== undefined) updateData.tags = updates.tags.length > 0 ? updates.tags : null;\r\n      if (updates.date !== undefined) updateData.date = updates.date.toISOString().split('T')[0];\r\n      if (updates.paymentMethod !== undefined) updateData.payment_method = updates.paymentMethod || null;\r\n      if (updates.receiptImage !== undefined) updateData.receipt_image = updates.receiptImage || null;\r\n\r\n      const { data, error } = await supabase\r\n        .from('cash_transactions')\r\n        .update(updateData)\r\n        .eq('id', id)\r\n        .eq('location_id', currentBusiness.id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Transaction updated successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return mapDbCashTransactionToCashTransaction(data);\r\n    } catch (error) {\r\n      console.error('Error updating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update transaction. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const deleteTransaction = async (id: string, onDeleted?: () => void) => {\r\n    try {\r\n      if (!currentBusiness) throw new Error('No business selected');\r\n\r\n      const { data: installmentPayments } = await supabase\r\n        .from('installment_payments')\r\n        .select('id')\r\n        .eq('cash_transaction_id', id);\r\n\r\n      if (installmentPayments && installmentPayments.length > 0) {\r\n        const { error: unlinkError } = await supabase\r\n          .from('installment_payments')\r\n          .update({ cash_transaction_id: null })\r\n          .eq('cash_transaction_id', id);\r\n\r\n        if (unlinkError) throw unlinkError;\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('cash_transactions')\r\n        .delete()\r\n        .eq('id', id)\r\n        .eq('location_id', currentBusiness.id);\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash transaction deleted successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash transaction. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountOpeningBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    try {\r\n      if (!currentBusiness) return 0;\r\n      const { data, error } = await supabase\r\n        .from('cash_accounts')\r\n        .select('opening_balance')\r\n        .eq('id', accountId)\r\n        .eq('location_id', currentBusiness.id)\r\n        .single();\r\n\r\n      if (error) return 0;\r\n      return Number(data?.opening_balance || 0);\r\n    } catch (error) {\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  const getDailySummary = useCallback(async (date: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const dateStr = date.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] === dateStr\r\n    );\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterday = new Date(date);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n    const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n    let yesterdayTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= yesterdayStr\r\n    );\r\n\r\n    if (accountId) {\r\n      yesterdayTransactions = yesterdayTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const yesterdayCashIn = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterdayCashOut = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + yesterdayCashIn - yesterdayCashOut;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const getDateRangeSummary = useCallback(async (startDate: Date, endDate: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const startDateStr = startDate.toISOString().split('T')[0];\r\n    const endDateStr = endDate.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const dayBeforeStart = new Date(startDate);\r\n    dayBeforeStart.setDate(dayBeforeStart.getDate() - 1);\r\n    const dayBeforeStartStr = dayBeforeStart.toISOString().split('T')[0];\r\n\r\n    let transactionsBeforeRange = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeStartStr\r\n    );\r\n\r\n    if (accountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date: startDate,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const refreshTransactions = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  useEffect(() => {\r\n    if (!user || !currentBusiness?.id) return;\r\n\r\n    const channel = supabase\r\n      .channel(`cash-tx-${currentBusiness.id}-${accountId || 'all'}`)\r\n      .on('postgres_changes', {\r\n        event: '*',\r\n        schema: 'public',\r\n        table: 'cash_transactions',\r\n        filter: `location_id=eq.${currentBusiness.id}`\r\n      }, () => {\r\n        queryClient.invalidateQueries({ queryKey });\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, [user, currentBusiness?.id, accountId, queryClient, queryKey]);\r\n\r\n  return useMemo(() => ({\r\n    transactions,\r\n    isLoading,\r\n    createTransaction,\r\n    createBulkTransactions,\r\n    updateTransaction,\r\n    deleteTransaction,\r\n    getDailySummary,\r\n    getDateRangeSummary,\r\n    refreshTransactions\r\n  }), [transactions, isLoading, createTransaction, createBulkTransactions, updateTransaction, deleteTransaction, getDailySummary, getDateRangeSummary, refreshTransactions]);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/app/actions/business-settings.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getBusinessSettingsAction(branchId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId }\r\n        });\r\n\r\n        if (!settings) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            id: settings.id,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            currency: settings.currency,\r\n            signature: settings.signatureImage,\r\n            metadata: settings.metadata || {}\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching business settings:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function upsertBusinessSettingsAction(branchId: string, userId: string, updateData: any) {\r\n    try {\r\n        // Validate user access to branch\r\n        const branch = await db.branch.findFirst({\r\n            where: {\r\n                id: branchId,\r\n                OR: [\r\n                    { adminId: userId },\r\n                    { users: { some: { id: userId } } }\r\n                ]\r\n            }\r\n        });\r\n\r\n        if (!branch) {\r\n            return { success: false, error: 'Unauthorized to update branch settings' };\r\n        }\r\n\r\n        const data = {\r\n            businessName: updateData.business_name,\r\n            address: updateData.business_address,\r\n            phone: updateData.business_phone,\r\n            email: updateData.business_email,\r\n            logo: updateData.business_logo,\r\n            currency: updateData.currency,\r\n            signatureImage: updateData.signature,\r\n            metadata: updateData.metadata\r\n        };\r\n\r\n        const upserted = await db.branchSettings.upsert({\r\n            where: { branchId: branchId },\r\n            update: data,\r\n            create: {\r\n                branchId: branchId,\r\n                ...data\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: upserted.id,\r\n                business_name: upserted.businessName,\r\n                business_address: upserted.address,\r\n                business_phone: upserted.phone,\r\n                business_email: upserted.email,\r\n                business_logo: upserted.logo,\r\n                currency: upserted.currency,\r\n                signature: upserted.signatureImage,\r\n                metadata: upserted.metadata\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error upserting business settings:', error);\r\n        return { success: false, error: error.message || 'Failed to update settings' };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,6DAAA"}},
    {"offset": {"line": 1157, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/app/actions/business-settings.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getBusinessSettingsAction(branchId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId }\r\n        });\r\n\r\n        if (!settings) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            id: settings.id,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            currency: settings.currency,\r\n            signature: settings.signatureImage,\r\n            metadata: settings.metadata || {}\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching business settings:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function upsertBusinessSettingsAction(branchId: string, userId: string, updateData: any) {\r\n    try {\r\n        // Validate user access to branch\r\n        const branch = await db.branch.findFirst({\r\n            where: {\r\n                id: branchId,\r\n                OR: [\r\n                    { adminId: userId },\r\n                    { users: { some: { id: userId } } }\r\n                ]\r\n            }\r\n        });\r\n\r\n        if (!branch) {\r\n            return { success: false, error: 'Unauthorized to update branch settings' };\r\n        }\r\n\r\n        const data = {\r\n            businessName: updateData.business_name,\r\n            address: updateData.business_address,\r\n            phone: updateData.business_phone,\r\n            email: updateData.business_email,\r\n            logo: updateData.business_logo,\r\n            currency: updateData.currency,\r\n            signatureImage: updateData.signature,\r\n            metadata: updateData.metadata\r\n        };\r\n\r\n        const upserted = await db.branchSettings.upsert({\r\n            where: { branchId: branchId },\r\n            update: data,\r\n            create: {\r\n                branchId: branchId,\r\n                ...data\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: upserted.id,\r\n                business_name: upserted.businessName,\r\n                business_address: upserted.address,\r\n                business_phone: upserted.phone,\r\n                business_email: upserted.email,\r\n                business_logo: upserted.logo,\r\n                currency: upserted.currency,\r\n                signature: upserted.signatureImage,\r\n                metadata: upserted.metadata\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error upserting business settings:', error);\r\n        return { success: false, error: error.message || 'Failed to update settings' };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAgCsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gEAAA"}},
    {"offset": {"line": 1174, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { getBusinessSettingsAction, upsertBusinessSettingsAction } from '@/app/actions/business-settings';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const data = await getBusinessSettingsAction(currentBusiness.id);\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name,\r\n          businessAddress: data.business_address,\r\n          businessPhone: data.business_phone,\r\n          businessEmail: data.business_email,\r\n          businessLogo: data.business_logo,\r\n          currency: data.currency,\r\n          signature: data.signature,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const userData = { user: { id: '00000000-0000-0000-0000-000000000000' } }; // Mocked user id for now\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const response = await upsertBusinessSettingsAction(currentBusiness.id, userData.user.id, updateData);\r\n\r\n      if (!response.success) {\r\n        console.error('Supabase error updating business settings:', response.error);\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1379, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/drawer.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Drawer as DrawerPrimitive } from \"vaul\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Drawer = ({\r\n  shouldScaleBackground = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\r\n  <DrawerPrimitive.Root\r\n    shouldScaleBackground={shouldScaleBackground}\r\n    {...props}\r\n  />\r\n)\r\nDrawer.displayName = \"Drawer\"\r\n\r\nconst DrawerTrigger = DrawerPrimitive.Trigger\r\n\r\nconst DrawerPortal = DrawerPrimitive.Portal\r\n\r\nconst DrawerClose = DrawerPrimitive.Close\r\n\r\nconst DrawerOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\r\n\r\nconst DrawerContent = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DrawerPortal>\r\n    <DrawerOverlay />\r\n    <DrawerPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\r\n      {children}\r\n    </DrawerPrimitive.Content>\r\n  </DrawerPortal>\r\n))\r\nDrawerContent.displayName = \"DrawerContent\"\r\n\r\nconst DrawerHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerHeader.displayName = \"DrawerHeader\"\r\n\r\nconst DrawerFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerFooter.displayName = \"DrawerFooter\"\r\n\r\nconst DrawerTitle = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\r\n\r\nconst DrawerDescription = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerPortal,\r\n  DrawerOverlay,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerFooter,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,SAAS,CAAC,EACd,wBAAwB,IAAI,EAC5B,GAAG,OAC+C,iBAClD,6LAAC,mJAAe,CAAC,IAAI;QACnB,uBAAuB;QACtB,GAAG,KAAK;;;;;;KANP;AASN,OAAO,WAAW,GAAG;AAErB,MAAM,gBAAgB,mJAAe,CAAC,OAAO;AAE7C,MAAM,eAAe,mJAAe,CAAC,MAAM;AAE3C,MAAM,cAAc,mJAAe,CAAC,KAAK;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mJAAe,CAAC,OAAO;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;MAPP;AAUN,cAAc,WAAW,GAAG,mJAAe,CAAC,OAAO,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,mJAAe,CAAC,OAAO;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,kGACA;gBAED,GAAG,KAAK;;kCAET,6LAAC;wBAAI,WAAU;;;;;;oBACd;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG;AAE5B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;MANP;AASN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;MANP;AASN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mJAAe,CAAC,KAAK;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mJAAe,CAAC,KAAK,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mJAAe,CAAC,WAAW;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,mJAAe,CAAC,WAAW,CAAC,WAAW"}},
    {"offset": {"line": 1562, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/ImageViewer.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose\r\n} from '@/components/ui/drawer';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ImageViewerProps {\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  imageUrl: string;\r\n  imageAlt?: string;\r\n}\r\n\r\nconst ImageViewer: React.FC<ImageViewerProps> = ({ \r\n  isOpen, \r\n  onOpenChange, \r\n  imageUrl, \r\n  imageAlt = \"Receipt image\" \r\n}) => {\r\n  const isMobile = useIsMobile();\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n        <DrawerContent className=\"max-h-[90vh]\">\r\n          <div className=\"relative p-4\">\r\n            <DrawerClose className=\"absolute right-4 top-4 z-10 rounded-sm opacity-70 hover:opacity-100 bg-black/50 text-white p-2\">\r\n              <X className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Close</span>\r\n            </DrawerClose>\r\n            <div className=\"flex items-center justify-center min-h-[70vh]\">\r\n              <img \r\n                src={imageUrl} \r\n                alt={imageAlt}\r\n                className=\"max-w-full max-h-[80vh] object-contain rounded-lg\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </DrawerContent>\r\n      </Drawer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] p-4\">\r\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\r\n          <img \r\n            src={imageUrl} \r\n            alt={imageAlt}\r\n            className=\"max-w-full max-h-[80vh] object-contain rounded-lg\"\r\n          />\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ImageViewer;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAKA;AACA;;;;;;;AASA,MAAM,cAA0C,CAAC,EAC/C,MAAM,EACN,YAAY,EACZ,QAAQ,EACR,WAAW,eAAe,EAC3B;;IACC,MAAM,WAAW,IAAA,gJAAW;IAE5B,IAAI,UAAU;QACZ,qBACE,6LAAC,+IAAM;YAAC,MAAM;YAAQ,cAAc;sBAClC,cAAA,6LAAC,sJAAa;gBAAC,WAAU;0BACvB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,oJAAW;4BAAC,WAAU;;8CACrB,6LAAC,oMAAC;oCAAC,WAAU;;;;;;8CACb,6LAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;sCAE5B,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,KAAK;gCACL,KAAK;gCACL,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOxB;IAEA,qBACE,6LAAC,+IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,6LAAC,sJAAa;YAAC,WAAU;sBACvB,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,KAAK;oBACL,KAAK;oBACL,WAAU;;;;;;;;;;;;;;;;;;;;;AAMtB;GA3CM;;QAMa,gJAAW;;;KANxB;uCA6CS"}},
    {"offset": {"line": 1694, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface CashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (data: CashTransactionFormData) => void;\r\n  accounts: CashAccount[];\r\n  defaultAccountId?: string;\r\n  presetTransactionType?: 'cash_in' | 'cash_out' | 'transfer';\r\n}\r\n\r\nconst CashTransactionDialog: React.FC<CashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  accounts,\r\n  defaultAccountId,\r\n  presetTransactionType\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>({\r\n    defaultValues: {\r\n      accountId: defaultAccountId || '',\r\n      transactionType: presetTransactionType || 'cash_in',\r\n      category: '',\r\n      description: '',\r\n      personInCharge: '',\r\n      tags: [],\r\n      date: new Date(),\r\n      paymentMethod: '',\r\n      receiptImage: ''\r\n    }\r\n  });\r\n\r\n  const transactionType = watch('transactionType');\r\n  const receiptImage = watch('receiptImage');\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const today = new Date();\r\n      const todayString = today.toISOString().split('T')[0];\r\n\r\n      reset({\r\n        accountId: defaultAccountId || '',\r\n        amount: undefined as any,\r\n        transactionType: presetTransactionType || 'cash_in',\r\n        category: '',\r\n        description: '',\r\n        personInCharge: '',\r\n        tags: [],\r\n        date: today,\r\n        paymentMethod: '',\r\n        receiptImage: ''\r\n      });\r\n\r\n      // Set the preset transaction type if provided\r\n      if (presetTransactionType) {\r\n        setValue('transactionType', presetTransactionType);\r\n      }\r\n\r\n      // Set today's date in the date input with proper string format\r\n      setValue('date', todayString as any);\r\n    }\r\n  }, [open, defaultAccountId, presetTransactionType, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n\r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    console.log('Raw form data:', data);\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Ensure we have a proper date\r\n      let formDate: Date;\r\n      if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else if (typeof data.date === 'string') {\r\n        formDate = new Date(data.date);\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: CashTransactionFormData = {\r\n        accountId: data.accountId,\r\n        amount: Number(data.amount),\r\n        transactionType: data.transactionType,\r\n        toAccountId: data.toAccountId,\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n\r\n      console.log('Processed form data being submitted:', formData);\r\n      await onSubmit(formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>New Transaction</DialogTitle>\r\n          </DialogHeader>\r\n\r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"accountId\">Account</Label>\r\n                <Select\r\n                  value={watch('accountId')}\r\n                  onValueChange={(value) => {\r\n                    setValue('accountId', value);\r\n                    // Focus transaction type after selection\r\n                    setTimeout(() => {\r\n                      const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                      transactionTypeSelect?.focus();\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                          transactionTypeSelect?.focus();\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue placeholder=\"Select account\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {accounts.map((account) => (\r\n                      <SelectItem key={account.id} value={account.id}>\r\n                        {account.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n                {errors.accountId && (\r\n                  <p className=\"text-sm text-red-600\">{errors.accountId.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Select\r\n                  value={transactionType}\r\n                  onValueChange={(value) => {\r\n                    setValue('transactionType', value as 'cash_in' | 'cash_out' | 'transfer');\r\n                    // Focus next field after selection\r\n                    setTimeout(() => {\r\n                      if (value === 'transfer') {\r\n                        const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                        toAccountSelect?.focus();\r\n                      } else {\r\n                        document.getElementById('amount')?.focus();\r\n                      }\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          if (transactionType === 'transfer') {\r\n                            const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                            toAccountSelect?.focus();\r\n                          } else {\r\n                            document.getElementById('amount')?.focus();\r\n                          }\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {transactionType === 'transfer' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"toAccountId\">To Account</Label>\r\n                  <Select\r\n                    value={watch('toAccountId') || ''}\r\n                    onValueChange={(value) => {\r\n                      setValue('toAccountId', value);\r\n                      // Focus amount after selection\r\n                      setTimeout(() => {\r\n                        document.getElementById('amount')?.focus();\r\n                      }, 100);\r\n                    }}\r\n                  >\r\n                    <SelectTrigger\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          e.preventDefault();\r\n                          setTimeout(() => {\r\n                            document.getElementById('amount')?.focus();\r\n                          }, 100);\r\n                        }\r\n                      }}\r\n                    >\r\n                      <SelectValue placeholder=\"Select destination account\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {accounts\r\n                        .filter(account => account.id !== watch('accountId'))\r\n                        .map((account) => (\r\n                          <SelectItem key={account.id} value={account.id}>\r\n                            {account.name}\r\n                          </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  {...register('amount', {\r\n                    required: 'Amount is required',\r\n                    min: { value: 0.01, message: 'Amount must be greater than 0' }\r\n                  })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('category')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"0.00\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('description')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      document.getElementById('personInCharge')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('paymentMethod')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('date')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {receiptImage && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(receiptImage) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img\r\n                          src={receiptImage}\r\n                          alt=\"Receipt preview\"\r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"date\">Date</Label>\r\n                <Input\r\n                  id=\"date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      const submitButton = document.querySelector('button[type=\"submit\"]') as HTMLElement;\r\n                      submitButton?.focus();\r\n                    }\r\n                  }}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Creating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Create Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {receiptImage && !isReceiptPDF(receiptImage) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={receiptImage}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CashTransactionDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2556, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/EditCashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { CashTransaction, CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface EditCashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (id: string, data: Partial<CashTransactionFormData>) => void;\r\n  transaction: CashTransaction | null;\r\n  accounts: CashAccount[];\r\n}\r\n\r\nconst EditCashTransactionDialog: React.FC<EditCashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  transaction,\r\n  accounts\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>();\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open && transaction) {\r\n      // Format date as YYYY-MM-DD for the date input\r\n      const formattedDate = transaction.date.toISOString().split('T')[0];\r\n      \r\n      reset({\r\n        accountId: transaction.accountId || '',\r\n        amount: transaction.amount,\r\n        transactionType: transaction.transactionType === 'transfer_in' || transaction.transactionType === 'transfer_out' \r\n          ? 'transfer' \r\n          : transaction.transactionType,\r\n        category: transaction.category,\r\n        description: transaction.description,\r\n        personInCharge: transaction.personInCharge || '',\r\n        tags: [],\r\n        date: transaction.date, // Keep as Date object for the form\r\n        paymentMethod: transaction.paymentMethod || '',\r\n        receiptImage: transaction.receiptImage || ''\r\n      });\r\n      \r\n      // Set the date input value to the formatted string\r\n      setValue('date', formattedDate as any);\r\n    }\r\n  }, [open, transaction, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n      \r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    if (!transaction) return;\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Handle date conversion properly - ensure exact date is preserved\r\n      let formDate: Date;\r\n      \r\n      // If data.date is a string (from the date input), parse it correctly\r\n      if (typeof data.date === 'string') {\r\n        // Parse date string to ensure we get the exact date selected\r\n        const [year, month, day] = data.date.split('-').map(Number);\r\n        formDate = new Date(year, month - 1, day, 12, 0, 0); // Set to noon to avoid timezone issues\r\n      } else if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: Partial<CashTransactionFormData> = {\r\n        amount: Number(data.amount),\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n      \r\n      await onSubmit(transaction.id, formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!transaction) return null;\r\n\r\n  // Format date for the input field display\r\n  const inputDateValue = transaction.date.toISOString().split('T')[0];\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>Edit Transaction</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Input\r\n                  value={transaction.transactionType.replace('_', ' ')}\r\n                  disabled\r\n                  className=\"bg-gray-100\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"1\"\r\n                  {...register('amount', { \r\n                    required: 'Amount is required',\r\n                    min: { value: 1, message: 'Amount must be at least 1' }\r\n                  })}\r\n                  placeholder=\"0\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {watch('receiptImage') && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(watch('receiptImage')) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img \r\n                          src={watch('receiptImage')} \r\n                          alt=\"Receipt preview\" \r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"edit-date\">Date</Label>\r\n                <Input\r\n                  id=\"edit-date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button \r\n                  type=\"button\" \r\n                  variant=\"outline\" \r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button \r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Updating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Update Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {watch('receiptImage') && !isReceiptPDF(watch('receiptImage')) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={watch('receiptImage')}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditCashTransactionDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n        warning:\r\n          \"border-transparent bg-amber-500 text-white hover:bg-amber-600\",\r\n        success:\r\n          \"border-transparent bg-green-600 text-white hover:bg-green-700\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 3198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/ViewCashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose,\r\n  DrawerHeader,\r\n  DrawerTitle\r\n} from '@/components/ui/drawer';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { X, Eye } from 'lucide-react';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\n\r\ninterface ViewCashTransactionDialogProps {\r\n  transaction: CashTransaction | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst ViewCashTransactionDialog: React.FC<ViewCashTransactionDialogProps> = ({\r\n  transaction,\r\n  open,\r\n  onOpenChange\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const { settings } = useBusinessSettings();\r\n\r\n  if (!transaction) return null;\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    const currency = settings?.currency || 'USD';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency,\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in': return 'Cash In';\r\n      case 'cash_out': return 'Cash Out';\r\n      case 'transfer_in': return 'Transfer In';\r\n      case 'transfer_out': return 'Transfer Out';\r\n      default: return type;\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const content = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Date</label>\r\n          <p className=\"text-sm\">{transaction.date.toLocaleDateString()}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Amount</label>\r\n          <p className={`text-lg font-semibold ${\r\n            transaction.transactionType === 'cash_in' || transaction.transactionType === 'transfer_in' \r\n              ? 'text-green-600' \r\n              : 'text-red-600'\r\n          }`}>\r\n            {formatCurrency(transaction.amount)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Transaction Type</label>\r\n        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n          {getTransactionTypeLabel(transaction.transactionType)}\r\n        </Badge>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Description</label>\r\n        <p className=\"text-sm\">{transaction.description}</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Category</label>\r\n          <p className=\"text-sm\">{transaction.category || 'Not specified'}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Payment Method</label>\r\n          <p className=\"text-sm\">{transaction.paymentMethod || 'Not specified'}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Person in Charge</label>\r\n        <p className=\"text-sm\">{transaction.personInCharge || 'Not specified'}</p>\r\n      </div>\r\n\r\n      {transaction.tags && transaction.tags.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Tags</label>\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {transaction.tags.map((tag, index) => (\r\n              <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                {tag}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {transaction.receiptImage && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Receipt</label>\r\n          <div className=\"relative\">\r\n            <img \r\n              src={transaction.receiptImage} \r\n              alt=\"Receipt\" \r\n              className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            >\r\n              <Eye className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <>\r\n        <Drawer open={open} onOpenChange={onOpenChange}>\r\n          <DrawerContent className=\"max-h-[85vh]\">\r\n            <div className=\"relative px-4 py-6 pb-8\">\r\n              <DrawerClose className=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring\">\r\n                <X className=\"h-4 w-4\" />\r\n                <span className=\"sr-only\">Close</span>\r\n              </DrawerClose>\r\n              <DrawerHeader className=\"px-0 pb-4\">\r\n                <DrawerTitle className=\"text-lg\">Transaction Details</DrawerTitle>\r\n              </DrawerHeader>\r\n              <ScrollArea className=\"h-[calc(85vh-120px)] pr-4\">\r\n                {content}\r\n              </ScrollArea>\r\n            </div>\r\n          </DrawerContent>\r\n        </Drawer>\r\n\r\n        {transaction.receiptImage && (\r\n          <ImageViewer\r\n            isOpen={imageViewerOpen}\r\n            onOpenChange={setImageViewerOpen}\r\n            imageUrl={transaction.receiptImage}\r\n            imageAlt=\"Receipt image\"\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-[600px] max-h-[90vh]\">\r\n          <DialogHeader>\r\n            <DialogTitle>Transaction Details</DialogTitle>\r\n          </DialogHeader>\r\n          <ScrollArea className=\"max-h-[70vh] pr-4\">\r\n            {content}\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {transaction.receiptImage && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={transaction.receiptImage}\r\n          imageAlt=\"Receipt image\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ViewCashTransactionDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3712, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAW,IAAA,4HAAE,EAAC;sBAEd,cAAA,6LAAC,gNAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 3762, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashAccountDialog.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { CashAccountFormData } from '@/types/cash';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\n\r\ninterface CashAccountDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (data: CashAccountFormData) => void;\r\n  title: string;\r\n  initialData?: Partial<CashAccountFormData>;\r\n  isSubmitting?: boolean;\r\n}\r\n\r\nconst CashAccountDialog: React.FC<CashAccountDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  title,\r\n  initialData,\r\n  isSubmitting = false\r\n}) => {\r\n  const { settings } = useBusinessSettings();\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashAccountFormData>({\r\n    defaultValues: {\r\n      name: '',\r\n      description: '',\r\n      isDefault: false,\r\n      ...initialData\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (open && initialData) {\r\n      reset({\r\n        name: initialData.name || '',\r\n        description: initialData.description || '',\r\n        openingBalance: initialData.openingBalance || 0,\r\n        isDefault: initialData.isDefault || false\r\n      });\r\n    } else if (open) {\r\n      reset({\r\n        name: '',\r\n        description: '',\r\n        openingBalance: undefined as any,\r\n        isDefault: false\r\n      });\r\n    }\r\n  }, [open, initialData, reset]);\r\n\r\n  const isDefault = watch('isDefault');\r\n\r\n  const handleFormSubmit = (data: CashAccountFormData) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  // Use business settings currency, default to UGX if not set\r\n  const currency = settings.currency || 'UGX';\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>{title}</DialogTitle>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"name\">Account Name</Label>\r\n            <Input\r\n              id=\"name\"\r\n              {...register('name', { required: 'Account name is required' })}\r\n              placeholder=\"e.g., Main Cash, Petty Cash\"\r\n              disabled={isSubmitting}\r\n            />\r\n            {errors.name && (\r\n              <p className=\"text-sm text-red-600\">{errors.name.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"description\">Description (Optional)</Label>\r\n            <Textarea\r\n              id=\"description\"\r\n              {...register('description')}\r\n              placeholder=\"Brief description of this account\"\r\n              rows={3}\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"openingBalance\">Opening Balance ({currency})</Label>\r\n            <Input\r\n              id=\"openingBalance\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              {...register('openingBalance', {\r\n                required: 'Opening balance is required',\r\n                min: { value: 0, message: 'Opening balance cannot be negative' }\r\n              })}\r\n              placeholder=\"0.00\"\r\n              disabled={isSubmitting}\r\n            />\r\n            {errors.openingBalance && (\r\n              <p className=\"text-sm text-red-600\">{errors.openingBalance.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Checkbox\r\n              id=\"isDefault\"\r\n              checked={isDefault}\r\n              onCheckedChange={(checked) => setValue('isDefault', checked as boolean)}\r\n              disabled={isSubmitting}\r\n            />\r\n            <Label htmlFor=\"isDefault\" className=\"text-sm\">\r\n              Set as default account\r\n            </Label>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-2 pt-4\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isSubmitting}>\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isSubmitting}>\r\n              {isSubmitting\r\n                ? (initialData ? 'Updating...' : 'Creating...')\r\n                : (initialData ? 'Update Account' : 'Create Account')\r\n              }\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CashAccountDialog;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;AAWA,MAAM,oBAAsD,CAAC,EAC3D,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,KAAK,EACL,WAAW,EACX,eAAe,KAAK,EACrB;;IACC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,6JAAmB;IACxC,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,4KAAO,EAAsB;QAC7G,eAAe;YACb,MAAM;YACN,aAAa;YACb,WAAW;YACX,GAAG,WAAW;QAChB;IACF;IAEA,wKAAK,CAAC,SAAS;uCAAC;YACd,IAAI,QAAQ,aAAa;gBACvB,MAAM;oBACJ,MAAM,YAAY,IAAI,IAAI;oBAC1B,aAAa,YAAY,WAAW,IAAI;oBACxC,gBAAgB,YAAY,cAAc,IAAI;oBAC9C,WAAW,YAAY,SAAS,IAAI;gBACtC;YACF,OAAO,IAAI,MAAM;gBACf,MAAM;oBACJ,MAAM;oBACN,aAAa;oBACb,gBAAgB;oBAChB,WAAW;gBACb;YACF;QACF;sCAAG;QAAC;QAAM;QAAa;KAAM;IAE7B,MAAM,YAAY,MAAM;IAExB,MAAM,mBAAmB,CAAC;QACxB,SAAS;IACX;IAEA,4DAA4D;IAC5D,MAAM,WAAW,SAAS,QAAQ,IAAI;IAEtC,qBACE,6LAAC,+IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,sJAAa;YAAC,WAAU;;8BACvB,6LAAC,qJAAY;8BACX,cAAA,6LAAC,oJAAW;kCAAE;;;;;;;;;;;8BAEhB,6LAAC;oBAAK,UAAU,aAAa;oBAAmB,WAAU;;sCACxD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,6IAAK;oCAAC,SAAQ;8CAAO;;;;;;8CACtB,6LAAC,6IAAK;oCACJ,IAAG;oCACF,GAAG,SAAS,QAAQ;wCAAE,UAAU;oCAA2B,EAAE;oCAC9D,aAAY;oCACZ,UAAU;;;;;;gCAEX,OAAO,IAAI,kBACV,6LAAC;oCAAE,WAAU;8CAAwB,OAAO,IAAI,CAAC,OAAO;;;;;;;;;;;;sCAI5D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,6IAAK;oCAAC,SAAQ;8CAAc;;;;;;8CAC7B,6LAAC,mJAAQ;oCACP,IAAG;oCACF,GAAG,SAAS,cAAc;oCAC3B,aAAY;oCACZ,MAAM;oCACN,UAAU;;;;;;;;;;;;sCAId,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,6IAAK;oCAAC,SAAQ;;wCAAiB;wCAAkB;wCAAS;;;;;;;8CAC3D,6LAAC,6IAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,MAAK;oCACJ,GAAG,SAAS,kBAAkB;wCAC7B,UAAU;wCACV,KAAK;4CAAE,OAAO;4CAAG,SAAS;wCAAqC;oCACjE,EAAE;oCACF,aAAY;oCACZ,UAAU;;;;;;gCAEX,OAAO,cAAc,kBACpB,6LAAC;oCAAE,WAAU;8CAAwB,OAAO,cAAc,CAAC,OAAO;;;;;;;;;;;;sCAItE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,mJAAQ;oCACP,IAAG;oCACH,SAAS;oCACT,iBAAiB,CAAC,UAAY,SAAS,aAAa;oCACpD,UAAU;;;;;;8CAEZ,6LAAC,6IAAK;oCAAC,SAAQ;oCAAY,WAAU;8CAAU;;;;;;;;;;;;sCAKjD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,+IAAM;oCAAC,MAAK;oCAAS,SAAQ;oCAAU,SAAS,IAAM,aAAa;oCAAQ,UAAU;8CAAc;;;;;;8CAGpG,6LAAC,+IAAM;oCAAC,MAAK;oCAAS,UAAU;8CAC7B,eACI,cAAc,gBAAgB,gBAC9B,cAAc,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpD;GAzHM;;QAQiB,6JAAmB;QAC0C,4KAAO;;;KATrF;uCA2HS"}},
    {"offset": {"line": 4054, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 4198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,4HAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,IAAA,uJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,IAAA,uJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 4358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportCashTransactionsToPDF.ts"],"sourcesContent":["\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport const exportCashTransactionsToPDF = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  accountName?: string,\r\n  openingBalance: number = 0,\r\n  currency: string = 'USD',\r\n  dateRange?: { from: Date | undefined; to: Date | undefined },\r\n  businessSettings?: {\r\n    businessName: string;\r\n    businessAddress: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n  }\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  // Sort transactions chronologically (latest first) for display\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = b.date.getTime() - a.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time (latest first)\r\n    return b.createdAt.getTime() - a.createdAt.getTime();\r\n  });\r\n\r\n  // For balance calculation, we need to sort chronologically (oldest first)\r\n  const chronologicalTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = a.date.getTime() - b.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time\r\n    return a.createdAt.getTime() - b.createdAt.getTime();\r\n  });\r\n\r\n  // Calculate totals\r\n  const totalCashIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalCashOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  const totalTransferIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalTransferOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  // Calculate running balance for each transaction based on chronological order\r\n  let runningBalance = openingBalance;\r\n  const balanceMap = new Map<string, number>();\r\n  \r\n  chronologicalTransactions.forEach(transaction => {\r\n    if (transaction.transactionType === 'cash_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'cash_out') {\r\n      runningBalance -= transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_out') {\r\n      runningBalance -= transaction.amount;\r\n    }\r\n    balanceMap.set(transaction.id, runningBalance);\r\n  });\r\n\r\n  // Helper function to format transaction type for display\r\n  const formatTransactionType = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  // Prepare display data with correct balances for sorted (latest first) transactions\r\n  const transactionsWithBalance = sortedTransactions.map(transaction => {\r\n    return { \r\n      ...transaction, \r\n      balance: balanceMap.get(transaction.id) || 0,\r\n      formattedType: formatTransactionType(transaction.transactionType)\r\n    };\r\n  });\r\n\r\n  const accountBalance = runningBalance;\r\n\r\n  // Create new PDF document in portrait orientation\r\n  const pdf = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margins = { top: 15, right: 15, bottom: 15, left: 15 };\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  \r\n  let currentY = margins.top;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setTextColor(150, 150, 150); // Light gray color\r\n    pdf.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  // Table setup with new column widths for portrait format including Amount\r\n  const colWidths = [30, 55, 35, 30, 30]; // Date, Description, Transaction Type, Amount, Balance\r\n  const rowHeight = 8;\r\n  const headerHeight = 10;\r\n\r\n  // Table headers\r\n  const headers = [\r\n    'Date',\r\n    'Description',\r\n    'Transaction Type',\r\n    'Amount',\r\n    'Balance'\r\n  ];\r\n\r\n  // Function to draw table headers\r\n  const drawTableHeaders = () => {\r\n    // Draw header background\r\n    pdf.setFillColor(243, 244, 246);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight, 'F');\r\n\r\n    // Draw header borders\r\n    pdf.setLineWidth(0.3);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight);\r\n\r\n    // Header text\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    let currentX = margins.left;\r\n    \r\n    headers.forEach((header, index) => {\r\n      const colWidth = colWidths[index];\r\n      const textWidth = pdf.getTextWidth(header);\r\n      const textX = currentX + (colWidth - textWidth) / 2;\r\n      pdf.text(header, textX, currentY + 6);\r\n      \r\n      if (index < headers.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 2, currentX + colWidth, currentY + headerHeight - 2);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += headerHeight;\r\n  };\r\n\r\n  // Helper function to check if we need a new page\r\n  const checkPageBreak = (neededHeight: number) => {\r\n    if (currentY + neededHeight > pageHeight - margins.bottom - 15) { // Reserve space for watermark\r\n      addWatermark(); // Add watermark to current page before creating new one\r\n      pdf.addPage();\r\n      currentY = margins.top;\r\n      drawTableHeaders(); // Add headers to new page\r\n      // Reset font to normal after drawing headers on new page\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.setFontSize(9);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Header section with business details on left and title on right\r\n  const headerStartY = currentY;\r\n  \r\n  // Business details on the left\r\n  if (businessSettings) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(businessSettings.businessName, margins.left, currentY);\r\n    currentY += 6;\r\n    \r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(businessSettings.businessAddress, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessPhone, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessEmail, margins.left, currentY);\r\n  }\r\n  \r\n  // Reset currentY to header start for right-aligned content\r\n  currentY = headerStartY;\r\n  \r\n  // Title on the right\r\n  pdf.setFontSize(18);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const title = `Cash Transactions Report (${currency})`;\r\n  const titleWidth = pdf.getTextWidth(title);\r\n  pdf.text(title, pageWidth - margins.right - titleWidth, currentY);\r\n  currentY += 8;\r\n\r\n  // Account name if provided - right aligned under title\r\n  if (accountName) {\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const accountText = accountName;\r\n    const accountTextWidth = pdf.getTextWidth(accountText);\r\n    pdf.text(accountText, pageWidth - margins.right - accountTextWidth, currentY);\r\n    currentY += 6;\r\n  }\r\n\r\n  // Date range display - right aligned under title/account\r\n  if (dateRange?.from && dateRange?.to) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const fromDate = format(dateRange.from, 'dd/MM/yyyy');\r\n    const toDate = format(dateRange.to, 'dd/MM/yyyy');\r\n    \r\n    const dateText = fromDate === toDate ? fromDate : `${fromDate} - ${toDate}`;\r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  } else {\r\n    // If no date range is provided, determine from transaction dates or use today's date\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    \r\n    let dateText: string;\r\n    if (transactions.length > 0) {\r\n      // Find the earliest and latest transaction dates\r\n      const dates = transactions.map(t => t.date);\r\n      const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n      const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n      \r\n      const fromDateStr = format(earliestDate, 'dd/MM/yyyy');\r\n      const toDateStr = format(latestDate, 'dd/MM/yyyy');\r\n      \r\n      dateText = fromDateStr === toDateStr ? fromDateStr : `${fromDateStr} - ${toDateStr}`;\r\n    } else {\r\n      // Fallback to current date if no transactions\r\n      dateText = format(new Date(), 'dd/MM/yyyy');\r\n    }\r\n    \r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  }\r\n  \r\n  // Ensure we have enough space for both sections\r\n  currentY = Math.max(currentY, headerStartY + 25);\r\n\r\n  // Draw initial table headers\r\n  checkPageBreak(headerHeight + 10);\r\n  drawTableHeaders();\r\n\r\n  // Table data\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.setFontSize(9);\r\n\r\n  // Number formatter without currency symbol\r\n  const numberFormatter = new Intl.NumberFormat('en-US', {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  });\r\n\r\n  transactionsWithBalance.forEach((transaction, index) => {\r\n    checkPageBreak(rowHeight + 5);\r\n\r\n    // Format amount with negative sign for cash out and transfer out (no currency symbol)\r\n    const isNegativeTransaction = transaction.transactionType === 'cash_out' || transaction.transactionType === 'transfer_out';\r\n    const displayAmount = isNegativeTransaction ? -transaction.amount : transaction.amount;\r\n\r\n    const rowData = [\r\n      format(transaction.date, 'dd/MM/yyyy'),\r\n      transaction.description,\r\n      transaction.formattedType,\r\n      numberFormatter.format(displayAmount),\r\n      numberFormatter.format(transaction.balance)\r\n    ];\r\n\r\n    // Draw row background (alternating)\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(249, 250, 251);\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    }\r\n\r\n    // Draw row borders\r\n    pdf.setLineWidth(0.1);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight);\r\n\r\n    let currentX = margins.left;\r\n    \r\n    rowData.forEach((data, colIndex) => {\r\n      const colWidth = colWidths[colIndex];\r\n      let text = data;\r\n      \r\n      // For description column, allow truncation but for other columns, ensure full display\r\n      if (colIndex === 1) { // Description column\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 3) {\r\n          text = text.substring(0, text.length - 4) + '...';\r\n        }\r\n      } else if (colIndex === 3 || colIndex === 4) { // Amount and Balance columns\r\n        // Use smaller font if needed to fit full amount\r\n        let fontSize = 9;\r\n        pdf.setFontSize(fontSize);\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && fontSize > 6) {\r\n          fontSize -= 0.5;\r\n          pdf.setFontSize(fontSize);\r\n        }\r\n      }\r\n      \r\n      let textX = currentX + 2;\r\n      \r\n      // Right align amount and balance columns\r\n      if (colIndex === 3 || colIndex === 4) {\r\n        const textWidth = pdf.getTextWidth(text);\r\n        textX = currentX + colWidth - textWidth - 2;\r\n      }\r\n      \r\n      // Set all text to black color\r\n      pdf.setTextColor(0, 0, 0);\r\n      \r\n      pdf.text(text, textX, currentY + 5);\r\n      \r\n      // Reset font size\r\n      pdf.setFontSize(9);\r\n      \r\n      if (colIndex < rowData.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + rowHeight - 1);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Summary section\r\n  currentY += 10;\r\n  checkPageBreak(35);\r\n\r\n  // Summary title\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Summary', margins.left, currentY);\r\n  currentY += 8;\r\n\r\n  // Draw summary box\r\n  const summaryBoxHeight = 30;\r\n  const summaryBoxWidth = contentWidth * 0.9;\r\n  \r\n  pdf.setFillColor(248, 249, 250);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight, 'F');\r\n  pdf.setLineWidth(0.3);\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight);\r\n\r\n  // Summary data in columns without currency symbols\r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  const leftColumn = [\r\n    ['Opening Balance:', numberFormatter.format(openingBalance)],\r\n    ['Total Cash In:', numberFormatter.format(totalCashIn)],\r\n    ['Total Cash Out:', numberFormatter.format(totalCashOut)],\r\n    ['Final Balance:', numberFormatter.format(accountBalance)]\r\n  ];\r\n\r\n  const rightColumn = [\r\n    ['Total Transfer In:', numberFormatter.format(totalTransferIn)],\r\n    ['Total Transfer Out:', numberFormatter.format(totalTransferOut)]\r\n  ];\r\n\r\n  let summaryY = currentY + 3;\r\n  const leftColumnX = margins.left + 10;\r\n  const rightColumnX = margins.left + summaryBoxWidth / 2 + 10;\r\n\r\n  // Draw left column\r\n  leftColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, leftColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, leftColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Reset Y for right column\r\n  summaryY = currentY + 3;\r\n\r\n  // Draw right column\r\n  rightColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, rightColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, rightColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Add watermark to the final page\r\n  addWatermark();\r\n\r\n  // Generate filename based on report date range\r\n  let filename: string;\r\n  const accountPrefix = accountName ? accountName.replace(/[^a-z0-9]/gi, '-').toLowerCase() + '-' : '';\r\n  \r\n  if (dateRange?.from && dateRange?.to) {\r\n    const fromDate = format(dateRange.from, 'yyyy-MM-dd');\r\n    const toDate = format(dateRange.to, 'yyyy-MM-dd');\r\n    \r\n    if (fromDate === toDate) {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}.pdf`;\r\n    } else {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}_to_${toDate}.pdf`;\r\n    }\r\n  } else {\r\n    // Fallback to current date if no range provided\r\n    filename = `cash-transactions-${accountPrefix}${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n  }\r\n\r\n  pdf.save(filename);\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM,8BAA8B,CACzC,cACA,gBACA,gBACA,aACA,iBAAyB,CAAC,EAC1B,WAAmB,KAAK,EACxB,WACA;IAOA,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,MAAM;QACN;IACF;IAEA,+DAA+D;IAC/D,MAAM,qBAAqB;WAAI;KAAa,CAAC,IAAI,CAAC,CAAC,GAAG;QACpD,MAAM,iBAAiB,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE,IAAI,CAAC,OAAO;QACxD,IAAI,mBAAmB,GAAG,OAAO;QACjC,8DAA8D;QAC9D,OAAO,EAAE,SAAS,CAAC,OAAO,KAAK,EAAE,SAAS,CAAC,OAAO;IACpD;IAEA,0EAA0E;IAC1E,MAAM,4BAA4B;WAAI;KAAa,CAAC,IAAI,CAAC,CAAC,GAAG;QAC3D,MAAM,iBAAiB,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE,IAAI,CAAC,OAAO;QACxD,IAAI,mBAAmB,GAAG,OAAO;QACjC,+CAA+C;QAC/C,OAAO,EAAE,SAAS,CAAC,OAAO,KAAK,EAAE,SAAS,CAAC,OAAO;IACpD;IAEA,mBAAmB;IACnB,MAAM,cAAc,0BACjB,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,WAClC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,eAAe,0BAClB,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,YAClC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,kBAAkB,0BACrB,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,eAClC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,MAAM,mBAAmB,0BACtB,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,gBAClC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAEtC,8EAA8E;IAC9E,IAAI,iBAAiB;IACrB,MAAM,aAAa,IAAI;IAEvB,0BAA0B,OAAO,CAAC,CAAA;QAChC,IAAI,YAAY,eAAe,KAAK,WAAW;YAC7C,kBAAkB,YAAY,MAAM;QACtC,OAAO,IAAI,YAAY,eAAe,KAAK,YAAY;YACrD,kBAAkB,YAAY,MAAM;QACtC,OAAO,IAAI,YAAY,eAAe,KAAK,eAAe;YACxD,kBAAkB,YAAY,MAAM;QACtC,OAAO,IAAI,YAAY,eAAe,KAAK,gBAAgB;YACzD,kBAAkB,YAAY,MAAM;QACtC;QACA,WAAW,GAAG,CAAC,YAAY,EAAE,EAAE;IACjC;IAEA,yDAAyD;IACzD,MAAM,wBAAwB,CAAC;QAC7B,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,oFAAoF;IACpF,MAAM,0BAA0B,mBAAmB,GAAG,CAAC,CAAA;QACrD,OAAO;YACL,GAAG,WAAW;YACd,SAAS,WAAW,GAAG,CAAC,YAAY,EAAE,KAAK;YAC3C,eAAe,sBAAsB,YAAY,eAAe;QAClE;IACF;IAEA,MAAM,iBAAiB;IAEvB,kDAAkD;IAClD,MAAM,MAAM,IAAI,iKAAK,CAAC;QACpB,aAAa;QACb,MAAM;QACN,QAAQ;QACR,UAAU;IACZ;IAEA,MAAM,YAAY,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ;IAChD,MAAM,aAAa,IAAI,QAAQ,CAAC,QAAQ,CAAC,SAAS;IAClD,MAAM,UAAU;QAAE,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAG;IAC3D,MAAM,eAAe,YAAY,QAAQ,IAAI,GAAG,QAAQ,KAAK;IAE7D,IAAI,WAAW,QAAQ,GAAG;IAE1B,4CAA4C;IAC5C,MAAM,eAAe;QACnB,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,YAAY,CAAC,KAAK,KAAK,MAAM,mBAAmB;QACpD,IAAI,IAAI,CAAC,4BAA4B,YAAY,GAAG,aAAa,IAAI;YAAE,OAAO;QAAS;QACvF,IAAI,YAAY,CAAC,GAAG,GAAG,IAAI,iBAAiB;IAC9C;IAEA,0EAA0E;IAC1E,MAAM,YAAY;QAAC;QAAI;QAAI;QAAI;QAAI;KAAG,EAAE,uDAAuD;IAC/F,MAAM,YAAY;IAClB,MAAM,eAAe;IAErB,gBAAgB;IAChB,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;KACD;IAED,iCAAiC;IACjC,MAAM,mBAAmB;QACvB,yBAAyB;QACzB,IAAI,YAAY,CAAC,KAAK,KAAK;QAC3B,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,cAAc,cAAc;QAEjE,sBAAsB;QACtB,IAAI,YAAY,CAAC;QACjB,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,cAAc;QAEnD,cAAc;QACd,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,WAAW,QAAQ,IAAI;QAE3B,QAAQ,OAAO,CAAC,CAAC,QAAQ;YACvB,MAAM,WAAW,SAAS,CAAC,MAAM;YACjC,MAAM,YAAY,IAAI,YAAY,CAAC;YACnC,MAAM,QAAQ,WAAW,CAAC,WAAW,SAAS,IAAI;YAClD,IAAI,IAAI,CAAC,QAAQ,OAAO,WAAW;YAEnC,IAAI,QAAQ,QAAQ,MAAM,GAAG,GAAG;gBAC9B,IAAI,IAAI,CAAC,WAAW,UAAU,WAAW,GAAG,WAAW,UAAU,WAAW,eAAe;YAC7F;YAEA,YAAY;QACd;QAEA,YAAY;IACd;IAEA,iDAAiD;IACjD,MAAM,iBAAiB,CAAC;QACtB,IAAI,WAAW,eAAe,aAAa,QAAQ,MAAM,GAAG,IAAI;YAC9D,gBAAgB,wDAAwD;YACxE,IAAI,OAAO;YACX,WAAW,QAAQ,GAAG;YACtB,oBAAoB,0BAA0B;YAC9C,yDAAyD;YACzD,IAAI,OAAO,CAAC,aAAa;YACzB,IAAI,WAAW,CAAC;YAChB,OAAO;QACT;QACA,OAAO;IACT;IAEA,kEAAkE;IAClE,MAAM,eAAe;IAErB,+BAA+B;IAC/B,IAAI,kBAAkB;QACpB,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,IAAI,CAAC,iBAAiB,YAAY,EAAE,QAAQ,IAAI,EAAE;QACtD,YAAY;QAEZ,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,IAAI,CAAC,iBAAiB,eAAe,EAAE,QAAQ,IAAI,EAAE;QACzD,YAAY;QACZ,IAAI,IAAI,CAAC,iBAAiB,aAAa,EAAE,QAAQ,IAAI,EAAE;QACvD,YAAY;QACZ,IAAI,IAAI,CAAC,iBAAiB,aAAa,EAAE,QAAQ,IAAI,EAAE;IACzD;IAEA,2DAA2D;IAC3D,WAAW;IAEX,qBAAqB;IACrB,IAAI,WAAW,CAAC;IAChB,IAAI,OAAO,CAAC,aAAa;IACzB,MAAM,QAAQ,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;IACtD,MAAM,aAAa,IAAI,YAAY,CAAC;IACpC,IAAI,IAAI,CAAC,OAAO,YAAY,QAAQ,KAAK,GAAG,YAAY;IACxD,YAAY;IAEZ,uDAAuD;IACvD,IAAI,aAAa;QACf,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,MAAM,cAAc;QACpB,MAAM,mBAAmB,IAAI,YAAY,CAAC;QAC1C,IAAI,IAAI,CAAC,aAAa,YAAY,QAAQ,KAAK,GAAG,kBAAkB;QACpE,YAAY;IACd;IAEA,yDAAyD;IACzD,IAAI,WAAW,QAAQ,WAAW,IAAI;QACpC,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QACzB,MAAM,WAAW,IAAA,kKAAM,EAAC,UAAU,IAAI,EAAE;QACxC,MAAM,SAAS,IAAA,kKAAM,EAAC,UAAU,EAAE,EAAE;QAEpC,MAAM,WAAW,aAAa,SAAS,WAAW,GAAG,SAAS,GAAG,EAAE,QAAQ;QAC3E,MAAM,YAAY,IAAI,YAAY,CAAC;QACnC,IAAI,IAAI,CAAC,UAAU,YAAY,QAAQ,KAAK,GAAG,WAAW;QAC1D,YAAY;IACd,OAAO;QACL,qFAAqF;QACrF,IAAI,WAAW,CAAC;QAChB,IAAI,OAAO,CAAC,aAAa;QAEzB,IAAI;QACJ,IAAI,aAAa,MAAM,GAAG,GAAG;YAC3B,iDAAiD;YACjD,MAAM,QAAQ,aAAa,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;YAC1C,MAAM,eAAe,IAAI,KAAK,KAAK,GAAG,IAAI,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO;YAClE,MAAM,aAAa,IAAI,KAAK,KAAK,GAAG,IAAI,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO;YAEhE,MAAM,cAAc,IAAA,kKAAM,EAAC,cAAc;YACzC,MAAM,YAAY,IAAA,kKAAM,EAAC,YAAY;YAErC,WAAW,gBAAgB,YAAY,cAAc,GAAG,YAAY,GAAG,EAAE,WAAW;QACtF,OAAO;YACL,8CAA8C;YAC9C,WAAW,IAAA,kKAAM,EAAC,IAAI,QAAQ;QAChC;QAEA,MAAM,YAAY,IAAI,YAAY,CAAC;QACnC,IAAI,IAAI,CAAC,UAAU,YAAY,QAAQ,KAAK,GAAG,WAAW;QAC1D,YAAY;IACd;IAEA,gDAAgD;IAChD,WAAW,KAAK,GAAG,CAAC,UAAU,eAAe;IAE7C,6BAA6B;IAC7B,eAAe,eAAe;IAC9B;IAEA,aAAa;IACb,IAAI,OAAO,CAAC,aAAa;IACzB,IAAI,WAAW,CAAC;IAEhB,2CAA2C;IAC3C,MAAM,kBAAkB,IAAI,KAAK,YAAY,CAAC,SAAS;QACrD,uBAAuB;QACvB,uBAAuB;IACzB;IAEA,wBAAwB,OAAO,CAAC,CAAC,aAAa;QAC5C,eAAe,YAAY;QAE3B,sFAAsF;QACtF,MAAM,wBAAwB,YAAY,eAAe,KAAK,cAAc,YAAY,eAAe,KAAK;QAC5G,MAAM,gBAAgB,wBAAwB,CAAC,YAAY,MAAM,GAAG,YAAY,MAAM;QAEtF,MAAM,UAAU;YACd,IAAA,kKAAM,EAAC,YAAY,IAAI,EAAE;YACzB,YAAY,WAAW;YACvB,YAAY,aAAa;YACzB,gBAAgB,MAAM,CAAC;YACvB,gBAAgB,MAAM,CAAC,YAAY,OAAO;SAC3C;QAED,oCAAoC;QACpC,IAAI,QAAQ,MAAM,GAAG;YACnB,IAAI,YAAY,CAAC,KAAK,KAAK;YAC3B,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,cAAc,WAAW;QAChE;QAEA,mBAAmB;QACnB,IAAI,YAAY,CAAC;QACjB,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,cAAc;QAEnD,IAAI,WAAW,QAAQ,IAAI;QAE3B,QAAQ,OAAO,CAAC,CAAC,MAAM;YACrB,MAAM,WAAW,SAAS,CAAC,SAAS;YACpC,IAAI,OAAO;YAEX,sFAAsF;YACtF,IAAI,aAAa,GAAG;gBAClB,MAAO,IAAI,YAAY,CAAC,QAAQ,WAAW,KAAK,KAAK,MAAM,GAAG,EAAG;oBAC/D,OAAO,KAAK,SAAS,CAAC,GAAG,KAAK,MAAM,GAAG,KAAK;gBAC9C;YACF,OAAO,IAAI,aAAa,KAAK,aAAa,GAAG;gBAC3C,gDAAgD;gBAChD,IAAI,WAAW;gBACf,IAAI,WAAW,CAAC;gBAChB,MAAO,IAAI,YAAY,CAAC,QAAQ,WAAW,KAAK,WAAW,EAAG;oBAC5D,YAAY;oBACZ,IAAI,WAAW,CAAC;gBAClB;YACF;YAEA,IAAI,QAAQ,WAAW;YAEvB,yCAAyC;YACzC,IAAI,aAAa,KAAK,aAAa,GAAG;gBACpC,MAAM,YAAY,IAAI,YAAY,CAAC;gBACnC,QAAQ,WAAW,WAAW,YAAY;YAC5C;YAEA,8BAA8B;YAC9B,IAAI,YAAY,CAAC,GAAG,GAAG;YAEvB,IAAI,IAAI,CAAC,MAAM,OAAO,WAAW;YAEjC,kBAAkB;YAClB,IAAI,WAAW,CAAC;YAEhB,IAAI,WAAW,QAAQ,MAAM,GAAG,GAAG;gBACjC,IAAI,IAAI,CAAC,WAAW,UAAU,WAAW,GAAG,WAAW,UAAU,WAAW,YAAY;YAC1F;YAEA,YAAY;QACd;QAEA,YAAY;IACd;IAEA,kBAAkB;IAClB,YAAY;IACZ,eAAe;IAEf,gBAAgB;IAChB,IAAI,WAAW,CAAC;IAChB,IAAI,OAAO,CAAC,aAAa;IACzB,IAAI,IAAI,CAAC,WAAW,QAAQ,IAAI,EAAE;IAClC,YAAY;IAEZ,mBAAmB;IACnB,MAAM,mBAAmB;IACzB,MAAM,kBAAkB,eAAe;IAEvC,IAAI,YAAY,CAAC,KAAK,KAAK;IAC3B,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,iBAAiB,kBAAkB;IACxE,IAAI,YAAY,CAAC;IACjB,IAAI,YAAY,CAAC,KAAK,KAAK;IAC3B,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,WAAW,GAAG,iBAAiB;IAEtD,mDAAmD;IACnD,IAAI,WAAW,CAAC;IAChB,IAAI,OAAO,CAAC,aAAa;IAEzB,MAAM,aAAa;QACjB;YAAC;YAAoB,gBAAgB,MAAM,CAAC;SAAgB;QAC5D;YAAC;YAAkB,gBAAgB,MAAM,CAAC;SAAa;QACvD;YAAC;YAAmB,gBAAgB,MAAM,CAAC;SAAc;QACzD;YAAC;YAAkB,gBAAgB,MAAM,CAAC;SAAgB;KAC3D;IAED,MAAM,cAAc;QAClB;YAAC;YAAsB,gBAAgB,MAAM,CAAC;SAAiB;QAC/D;YAAC;YAAuB,gBAAgB,MAAM,CAAC;SAAkB;KAClE;IAED,IAAI,WAAW,WAAW;IAC1B,MAAM,cAAc,QAAQ,IAAI,GAAG;IACnC,MAAM,eAAe,QAAQ,IAAI,GAAG,kBAAkB,IAAI;IAE1D,mBAAmB;IACnB,WAAW,OAAO,CAAC,CAAC,CAAC,OAAO,MAAM;QAChC,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,IAAI,CAAC,OAAO,aAAa;QAC7B,IAAI,OAAO,CAAC,aAAa;QACzB,MAAM,aAAa,IAAI,YAAY,CAAC;QACpC,IAAI,IAAI,CAAC,OAAO,cAAc,aAAa,GAAG;QAC9C,YAAY;IACd;IAEA,2BAA2B;IAC3B,WAAW,WAAW;IAEtB,oBAAoB;IACpB,YAAY,OAAO,CAAC,CAAC,CAAC,OAAO,MAAM;QACjC,IAAI,OAAO,CAAC,aAAa;QACzB,IAAI,IAAI,CAAC,OAAO,cAAc;QAC9B,IAAI,OAAO,CAAC,aAAa;QACzB,MAAM,aAAa,IAAI,YAAY,CAAC;QACpC,IAAI,IAAI,CAAC,OAAO,eAAe,aAAa,GAAG;QAC/C,YAAY;IACd;IAEA,kCAAkC;IAClC;IAEA,+CAA+C;IAC/C,IAAI;IACJ,MAAM,gBAAgB,cAAc,YAAY,OAAO,CAAC,eAAe,KAAK,WAAW,KAAK,MAAM;IAElG,IAAI,WAAW,QAAQ,WAAW,IAAI;QACpC,MAAM,WAAW,IAAA,kKAAM,EAAC,UAAU,IAAI,EAAE;QACxC,MAAM,SAAS,IAAA,kKAAM,EAAC,UAAU,EAAE,EAAE;QAEpC,IAAI,aAAa,QAAQ;YACvB,WAAW,CAAC,kBAAkB,EAAE,gBAAgB,SAAS,IAAI,CAAC;QAChE,OAAO;YACL,WAAW,CAAC,kBAAkB,EAAE,gBAAgB,SAAS,IAAI,EAAE,OAAO,IAAI,CAAC;QAC7E;IACF,OAAO;QACL,gDAAgD;QAChD,WAAW,CAAC,kBAAkB,EAAE,gBAAgB,IAAA,kKAAM,EAAC,IAAI,QAAQ,cAAc,IAAI,CAAC;IACxF;IAEA,IAAI,IAAI,CAAC;AACX"}},
    {"offset": {"line": 4746, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportCashTransactionsToCSV.ts"],"sourcesContent":["\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\n\r\nexport const exportCashTransactionsToCSV = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  currency: string = 'USD'\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Account',\r\n    'Description',\r\n    'Category',\r\n    'Person in Charge',\r\n    'Amount',\r\n    'Payment Method'\r\n  ];\r\n\r\n  const csvData = transactions.map(transaction => [\r\n    format(transaction.date, 'yyyy-MM-dd'),\r\n    transaction.transactionType.replace('_', ' '),\r\n    getAccountName(transaction.accountId),\r\n    `\"${transaction.description.replace(/\"/g, '\"\"')}\"`,\r\n    transaction.category,\r\n    transaction.personInCharge || '',\r\n    transaction.amount.toString(),\r\n    transaction.paymentMethod || ''\r\n  ]);\r\n\r\n  const csvContent = [headers, ...csvData]\r\n    .map(row => row.join(','))\r\n    .join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  \r\n  if (link.download !== undefined) {\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `cash-transactions-${currency}-${format(new Date(), 'yyyy-MM-dd')}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;;AAEO,MAAM,8BAA8B,CACzC,cACA,gBACA,gBACA,WAAmB,KAAK;IAExB,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,MAAM;QACN;IACF;IAEA,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,UAAU,aAAa,GAAG,CAAC,CAAA,cAAe;YAC9C,IAAA,kKAAM,EAAC,YAAY,IAAI,EAAE;YACzB,YAAY,eAAe,CAAC,OAAO,CAAC,KAAK;YACzC,eAAe,YAAY,SAAS;YACpC,CAAC,CAAC,EAAE,YAAY,WAAW,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;YAClD,YAAY,QAAQ;YACpB,YAAY,cAAc,IAAI;YAC9B,YAAY,MAAM,CAAC,QAAQ;YAC3B,YAAY,aAAa,IAAI;SAC9B;IAED,MAAM,aAAa;QAAC;WAAY;KAAQ,CACrC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC,MACpB,IAAI,CAAC;IAER,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAA0B;IACtE,MAAM,OAAO,SAAS,aAAa,CAAC;IAEpC,IAAI,KAAK,QAAQ,KAAK,WAAW;QAC/B,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,KAAK,YAAY,CAAC,QAAQ;QAC1B,KAAK,YAAY,CAAC,YAAY,CAAC,kBAAkB,EAAE,SAAS,CAAC,EAAE,IAAA,kKAAM,EAAC,IAAI,QAAQ,cAAc,IAAI,CAAC;QACrG,KAAK,KAAK,CAAC,UAAU,GAAG;QACxB,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AACF"}},
    {"offset": {"line": 4804, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionsFilters.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Search, Download, FileText } from 'lucide-react';\r\n\r\ninterface CashTransactionsFiltersProps {\r\n  searchTerm: string;\r\n  onSearchChange: (value: string) => void;\r\n  transactionTypeFilter: string;\r\n  onTransactionTypeFilterChange: (value: string) => void;\r\n  onExportCSV: () => void;\r\n  onExportPDF: () => void;\r\n  totalTransactions: number;\r\n}\r\n\r\nconst CashTransactionsFilters: React.FC<CashTransactionsFiltersProps> = ({\r\n  searchTerm,\r\n  onSearchChange,\r\n  transactionTypeFilter,\r\n  onTransactionTypeFilterChange,\r\n  onExportCSV,\r\n  onExportPDF,\r\n  totalTransactions\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-4 mb-4\">\r\n      {/* Search and Filter Row */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search transactions...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n        \r\n        <Select value={transactionTypeFilter} onValueChange={onTransactionTypeFilterChange}>\r\n          <SelectTrigger>\r\n            <SelectValue placeholder=\"All transaction types\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">All Types</SelectItem>\r\n            <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n            <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n            <SelectItem value=\"transfer_in\">Transfer In</SelectItem>\r\n            <SelectItem value=\"transfer_out\">Transfer Out</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportCSV}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            CSV\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportPDF}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <FileText className=\"h-4 w-4 mr-2\" />\r\n            PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Results count */}\r\n      <div className=\"text-sm text-muted-foreground\">\r\n        {totalTransactions} transaction{totalTransactions !== 1 ? 's' : ''} found\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsFilters;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;AAYA,MAAM,0BAAkE,CAAC,EACvE,UAAU,EACV,cAAc,EACd,qBAAqB,EACrB,6BAA6B,EAC7B,WAAW,EACX,WAAW,EACX,iBAAiB,EAClB;IACC,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mNAAM;gCAAC,WAAU;;;;;;0CAClB,6LAAC,6IAAK;gCACJ,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;;;;;;;;;;;;kCAId,6LAAC,+IAAM;wBAAC,OAAO;wBAAuB,eAAe;;0CACnD,6LAAC,sJAAa;0CACZ,cAAA,6LAAC,oJAAW;oCAAC,aAAY;;;;;;;;;;;0CAE3B,6LAAC,sJAAa;;kDACZ,6LAAC,mJAAU;wCAAC,OAAM;kDAAM;;;;;;kDACxB,6LAAC,mJAAU;wCAAC,OAAM;kDAAU;;;;;;kDAC5B,6LAAC,mJAAU;wCAAC,OAAM;kDAAW;;;;;;kDAC7B,6LAAC,mJAAU;wCAAC,OAAM;kDAAc;;;;;;kDAChC,6LAAC,mJAAU;wCAAC,OAAM;kDAAe;;;;;;;;;;;;;;;;;;kCAIrC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,WAAU;;kDAEV,6LAAC,yNAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAGvC,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,WAAU;;kDAEV,6LAAC,6NAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;0BAO3C,6LAAC;gBAAI,WAAU;;oBACZ;oBAAkB;oBAAa,sBAAsB,IAAI,MAAM;oBAAG;;;;;;;;;;;;;AAI3E;KAhEM;uCAkES"}},
    {"offset": {"line": 5010, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useFinancialVisibility.ts"],"sourcesContent":["import { useProfiles } from '@/contexts/ProfileContext';\r\n\r\n/**\r\n * Hook to handle financial data visibility based on permissions\r\n */\r\nexport const useFinancialVisibility = () => {\r\n    const { hasPermission } = useProfiles();\r\n\r\n    const canViewCostPrice = hasPermission('inventory', 'view_cost_price');\r\n    const canViewProfit = hasPermission('inventory', 'view_profit');\r\n    const canViewSellingPrice = hasPermission('inventory', 'view_selling_price');\r\n\r\n    // Dashboard-specific permissions\r\n    const canViewTotalSales = hasPermission('dashboard', 'view_total_sales');\r\n    const canViewTotalGrossProfit = hasPermission('dashboard', 'view_gross_profit');\r\n    const canViewTotalExpenses = hasPermission('dashboard', 'view_total_expenses');\r\n    const canViewInventoryValue = hasPermission('dashboard', 'view_inventory_value');\r\n    const canViewSalesTypes = hasPermission('dashboard', 'view_sales_types');\r\n    const canViewAvgPrice = hasPermission('dashboard', 'view_avg_price');\r\n    const canViewTotalAmount = hasPermission('dashboard', 'view_total_amount');\r\n\r\n    // Finance and Expenses permissions\r\n    const canManageFinanceAccounts = hasPermission('finance', 'manage_accounts');\r\n    const canViewFinance = hasPermission('finance', 'view');\r\n    const canViewExpenses = hasPermission('expenses', 'view');\r\n    const canCreateExpenses = hasPermission('expenses', 'create');\r\n    const canEditExpenses = hasPermission('expenses', 'edit');\r\n    const canDeleteExpenses = hasPermission('expenses', 'delete');\r\n\r\n    /**\r\n     * Format a financial value or return a hidden indicator\r\n     */\r\n    const formatFinancial = (value: number | null | undefined, type: 'cost' | 'selling' | 'profit'): string => {\r\n        const hasAccess =\r\n            (type === 'cost' && canViewCostPrice) ||\r\n            (type === 'selling' && canViewSellingPrice) ||\r\n            (type === 'profit' && canViewProfit);\r\n\r\n        if (!hasAccess) {\r\n            return '';\r\n        }\r\n\r\n        return value?.toLocaleString() || '0';\r\n    };\r\n\r\n    return {\r\n        canViewCostPrice,\r\n        canViewProfit,\r\n        canViewSellingPrice,\r\n        canViewTotalSales,\r\n        canViewTotalGrossProfit,\r\n        canViewTotalExpenses,\r\n        canViewInventoryValue,\r\n        canViewSalesTypes,\r\n        canViewAvgPrice,\r\n        canViewTotalAmount,\r\n        canManageFinanceAccounts,\r\n        canViewFinance,\r\n        canViewExpenses,\r\n        canCreateExpenses,\r\n        canEditExpenses,\r\n        canDeleteExpenses,\r\n        formatFinancial,\r\n    };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;;AAKO,MAAM,yBAAyB;;IAClC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,oJAAW;IAErC,MAAM,mBAAmB,cAAc,aAAa;IACpD,MAAM,gBAAgB,cAAc,aAAa;IACjD,MAAM,sBAAsB,cAAc,aAAa;IAEvD,iCAAiC;IACjC,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,0BAA0B,cAAc,aAAa;IAC3D,MAAM,uBAAuB,cAAc,aAAa;IACxD,MAAM,wBAAwB,cAAc,aAAa;IACzD,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,kBAAkB,cAAc,aAAa;IACnD,MAAM,qBAAqB,cAAc,aAAa;IAEtD,mCAAmC;IACnC,MAAM,2BAA2B,cAAc,WAAW;IAC1D,MAAM,iBAAiB,cAAc,WAAW;IAChD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IACpD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IAEpD;;KAEC,GACD,MAAM,kBAAkB,CAAC,OAAkC;QACvD,MAAM,YACF,AAAC,SAAS,UAAU,oBACnB,SAAS,aAAa,uBACtB,SAAS,YAAY;QAE1B,IAAI,CAAC,WAAW;YACZ,OAAO;QACX;QAEA,OAAO,OAAO,oBAAoB;IACtC;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA3Da;;QACiB,oJAAW"}},
    {"offset": {"line": 5079, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionsList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport { Edit, Eye, Trash2, FileText, FileSpreadsheet } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { exportCashTransactionsToPDF } from '@/utils/exportCashTransactionsToPDF';\r\nimport { exportCashTransactionsToCSV } from '@/utils/exportCashTransactionsToCSV';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport CashTransactionsFilters from './CashTransactionsFilters';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface CashTransactionsListProps {\r\n  transactions: CashTransaction[];\r\n  accountId?: string | null;\r\n  showAccountColumn?: boolean;\r\n  onEditTransaction?: (transaction: CashTransaction) => void;\r\n  onViewTransaction?: (transaction: CashTransaction) => void;\r\n  onTransactionDeleted?: () => void;\r\n}\r\n\r\nconst CashTransactionsList: React.FC<CashTransactionsListProps> = ({\r\n  transactions,\r\n  accountId,\r\n  showAccountColumn = true,\r\n  onEditTransaction,\r\n  onViewTransaction,\r\n  onTransactionDeleted\r\n}) => {\r\n  const { deleteTransaction, transactions: allTransactions } = useCashTransactions(accountId || undefined);\r\n  const { accounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n  const isMobile = useIsMobile();\r\n\r\n  const canEdit = hasPermission('finance', 'edit');\r\n  const canDelete = hasPermission('finance', 'delete');\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params\r\n  const [searchTerm, setSearchTerm] = useState(() => searchParams.get('search') || '');\r\n  const [transactionTypeFilter, setTransactionTypeFilter] = useState(() => searchParams.get('type') || 'all');\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const search = searchParams.get('search') || '';\r\n    const type = searchParams.get('type') || 'all';\r\n\r\n    setSearchTerm(search);\r\n    setTransactionTypeFilter(type);\r\n  }, [searchParams]);\r\n\r\n  // Functions to update both state and URL\r\n  const updateSearchTerm = (value: string) => {\r\n    setSearchTerm(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value) {\r\n      newParams.set('search', value);\r\n    } else {\r\n      newParams.delete('search');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateTransactionTypeFilter = (value: string) => {\r\n    setTransactionTypeFilter(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value && value !== 'all') {\r\n      newParams.set('type', value);\r\n    } else {\r\n      newParams.delete('type');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  };\r\n\r\n  const getAccountName = (accountId: string | null) => {\r\n    if (!accountId) return 'Unknown Account';\r\n    const account = accounts.find(acc => acc.id === accountId);\r\n    return account?.name || 'Unknown Account';\r\n  };\r\n\r\n  // Filter transactions based on search term and transaction type\r\n  const filteredTransactions = transactions.filter(transaction => {\r\n    const matchesSearch =\r\n      transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      (transaction.personInCharge && transaction.personInCharge.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      getAccountName(transaction.accountId).toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesType = transactionTypeFilter === 'all' || transaction.transactionType === transactionTypeFilter;\r\n\r\n    return matchesSearch && matchesType;\r\n  });\r\n\r\n  // Pagination logic - show 50 transactions per page\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const transactionsPerPage = 50;\r\n  const totalPages = Math.ceil(filteredTransactions.length / transactionsPerPage);\r\n\r\n  const startIndex = (currentPage - 1) * transactionsPerPage;\r\n  const endIndex = startIndex + transactionsPerPage;\r\n  const paginatedTransactions = filteredTransactions.slice(startIndex, endIndex);\r\n\r\n  // Reset to page 1 when filters change\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, transactionTypeFilter]);\r\n\r\n\r\n  // Calculate opening balance for PDF export using the same logic as DailyCashSummary\r\n  const calculateOpeningBalanceForExport = (exportTransactions: CashTransaction[], targetAccountId?: string) => {\r\n    if (exportTransactions.length === 0) return 0;\r\n\r\n    // Get the earliest transaction date in the export set\r\n    const earliestDate = exportTransactions.reduce((earliest, transaction) => {\r\n      return transaction.date < earliest ? transaction.date : earliest;\r\n    }, exportTransactions[0].date);\r\n\r\n    // Calculate the day before the earliest transaction\r\n    const dayBeforeEarliest = new Date(earliestDate);\r\n    dayBeforeEarliest.setDate(dayBeforeEarliest.getDate() - 1);\r\n    const dayBeforeEarliestStr = dayBeforeEarliest.toISOString().split('T')[0];\r\n\r\n    // Get all transactions up to the day before the earliest transaction\r\n    let transactionsBeforeRange = allTransactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeEarliestStr\r\n    );\r\n\r\n    // Filter by account if specified\r\n    if (targetAccountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === targetAccountId);\r\n    }\r\n\r\n    // Calculate cash flow up to the day before\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    // Get account's initial opening balance\r\n    let accountOpeningBalance = 0;\r\n    if (targetAccountId) {\r\n      const account = accounts.find(acc => acc.id === targetAccountId);\r\n      accountOpeningBalance = account?.openingBalance || 0;\r\n    }\r\n\r\n    // Calculate opening balance: initial balance + net cash flow up to day before\r\n    return accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n  };\r\n\r\n  // Calculate the date range from filtered transactions\r\n  const getDateRangeFromTransactions = (transactions: CashTransaction[]) => {\r\n    if (transactions.length === 0) return undefined;\r\n\r\n    const dates = transactions.map(t => t.date);\r\n    const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n    const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n\r\n    return { from: earliestDate, to: latestDate };\r\n  };\r\n\r\n  // ... keep existing code (getTransactionTypeColor, getTransactionTypeLabel, getAmountColor functions)\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'bg-green-100 text-green-800 border-green-200';\r\n      case 'cash_out':\r\n        return 'bg-red-100 text-red-800 border-red-200';\r\n      case 'transfer_in':\r\n        return 'bg-blue-100 text-blue-800 border-blue-200';\r\n      case 'transfer_out':\r\n        return 'bg-orange-100 text-orange-800 border-orange-200';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  const getAmountColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'text-green-600 font-semibold';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'text-red-600 font-semibold';\r\n      default:\r\n        return 'font-semibold';\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    setDeletingId(id);\r\n    try {\r\n      const success = await deleteTransaction(id);\r\n      if (success && onTransactionDeleted) {\r\n        onTransactionDeleted();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting transaction:', error);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let accountName = '';\r\n\r\n      if (accountId) {\r\n        const account = accounts.find(acc => acc.id === accountId);\r\n        accountName = account?.name || '';\r\n      }\r\n\r\n      // Calculate the correct opening balance using the same logic as DailyCashSummary\r\n      const calculatedOpeningBalance = calculateOpeningBalanceForExport(filteredTransactions, accountId || undefined);\r\n\r\n      // Get the date range from filtered transactions\r\n      const dateRange = getDateRangeFromTransactions(filteredTransactions);\r\n\r\n      exportCashTransactionsToPDF(\r\n        filteredTransactions,\r\n        getAccountName,\r\n        formatCurrency,\r\n        accountName,\r\n        calculatedOpeningBalance, // Use calculated opening balance instead of account's initial balance\r\n        settings.currency || 'USD',\r\n        dateRange, // Pass the actual date range from transactions\r\n        {\r\n          businessName: settings.businessName || 'Your Business Name',\r\n          businessAddress: settings.businessAddress || 'Your Business Address',\r\n          businessPhone: settings.businessPhone || '(123) 456-7890',\r\n          businessEmail: settings.businessEmail || 'support@yourbusiness.com'\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.error('Error exporting PDF:', error);\r\n      alert('Failed to export PDF. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    exportCashTransactionsToCSV(filteredTransactions, getAccountName, formatCurrency);\r\n  };\r\n\r\n  if (transactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        <p>No transactions found.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Filters */}\r\n      <CashTransactionsFilters\r\n        searchTerm={searchTerm}\r\n        onSearchChange={updateSearchTerm}\r\n        transactionTypeFilter={transactionTypeFilter}\r\n        onTransactionTypeFilterChange={updateTransactionTypeFilter}\r\n        onExportCSV={handleExportCSV}\r\n        onExportPDF={handleExportPDF}\r\n        totalTransactions={filteredTransactions.length}\r\n      />\r\n\r\n      {filteredTransactions.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <p>No transactions found matching your filters.</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Results Summary */}\r\n          <div className=\"flex justify-between items-center text-sm text-muted-foreground\">\r\n            <span>\r\n              Showing {startIndex + 1}-{Math.min(endIndex, filteredTransactions.length)} of {filteredTransactions.length} transactions\r\n            </span>\r\n            {totalPages > 1 && (\r\n              <span>\r\n                Page {currentPage} of {totalPages}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {isMobile ? (\r\n            /* Mobile Transaction Cards */\r\n            <div className=\"space-y-4\">\r\n              {paginatedTransactions.map((transaction) => (\r\n                <div key={transaction.id} className=\"bg-white rounded-lg border p-4 space-y-3\">\r\n                  {/* Header */}\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"font-medium text-sm\">{transaction.description}</div>\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                        {transaction.personInCharge && `  ${transaction.personInCharge}`}\r\n                      </div>\r\n                    </div>\r\n                    <Badge className={`text-xs ${getTransactionTypeColor(transaction.transactionType)}`}>\r\n                      {getTransactionTypeLabel(transaction.transactionType)}\r\n                    </Badge>\r\n                  </div>\r\n\r\n                  {/* Amount */}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className={`text-lg ${getAmountColor(transaction.transactionType)}`}>\r\n                      {canManageFinanceAccounts ? formatCurrency(transaction.amount) : ''}\r\n                    </span>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-1\">\r\n                      {onViewTransaction && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onViewTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {onEditTransaction && canEdit && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onEditTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {canDelete && (\r\n                        <AlertDialog>\r\n                          <AlertDialogTrigger asChild>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                              disabled={deletingId === transaction.id}\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </AlertDialogTrigger>\r\n                          <AlertDialogContent>\r\n                            <AlertDialogHeader>\r\n                              <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                              <AlertDialogDescription>\r\n                                Are you sure you want to delete this transaction? This action cannot be undone.\r\n                              </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                              <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                              <AlertDialogAction\r\n                                onClick={() => handleDelete(transaction.id)}\r\n                                className=\"bg-red-600 hover:bg-red-700\"\r\n                              >\r\n                                Delete\r\n                              </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                          </AlertDialogContent>\r\n                        </AlertDialog>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Additional Info */}\r\n                  <div className=\"space-y-1 text-sm text-gray-600\">\r\n                    {showAccountColumn && (\r\n                      <div>Account: {getAccountName(transaction.accountId)}</div>\r\n                    )}\r\n                    {transaction.category && (\r\n                      <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200\">\r\n                        <span className=\"text-blue-800 font-medium\">Category: {transaction.category}</span>\r\n                      </div>\r\n                    )}\r\n                    {transaction.paymentMethod && (\r\n                      <div>Payment: {transaction.paymentMethod}</div>\r\n                    )}\r\n                    {transaction.tags && transaction.tags.length > 0 && (\r\n                      <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                        {transaction.tags.map((tag, index) => (\r\n                          <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                            {tag}\r\n                          </Badge>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            /* Desktop Table */\r\n            <div className=\"rounded-md border\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Date</TableHead>\r\n                    <TableHead>Description</TableHead>\r\n                    <TableHead>Type</TableHead>\r\n                    <TableHead className=\"text-right\">Amount</TableHead>\r\n                    <TableHead>Category</TableHead>\r\n                    {showAccountColumn && <TableHead>Account</TableHead>}\r\n                    <TableHead>Person in Charge</TableHead>\r\n                    <TableHead>Payment Method</TableHead>\r\n                    <TableHead>Tags</TableHead>\r\n                    <TableHead className=\"text-right\">Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {paginatedTransactions.map((transaction) => (\r\n                    <TableRow key={transaction.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                      </TableCell>\r\n                      <TableCell>{transaction.description}</TableCell>\r\n                      <TableCell>\r\n                        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n                          {getTransactionTypeLabel(transaction.transactionType)}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className={`text-right ${getAmountColor(transaction.transactionType)}`}>\r\n                        {canManageFinanceAccounts ? formatCurrency(transaction.amount) : ''}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {transaction.category ? (\r\n                          <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200 inline-block\">\r\n                            <span className=\"text-blue-800 font-medium\">{transaction.category}</span>\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      {showAccountColumn && (\r\n                        <TableCell>{getAccountName(transaction.accountId)}</TableCell>\r\n                      )}\r\n                      <TableCell>{transaction.personInCharge || '-'}</TableCell>\r\n                      <TableCell>{transaction.paymentMethod || '-'}</TableCell>\r\n                      <TableCell>\r\n                        {transaction.tags && transaction.tags.length > 0 ? (\r\n                          <div className=\"flex flex-wrap gap-1\">\r\n                            {transaction.tags.map((tag, index) => (\r\n                              <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                                {tag}\r\n                              </Badge>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex gap-1 justify-end\">\r\n                          {onViewTransaction && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onViewTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {onEditTransaction && hasPermission('finance', 'edit') && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onEditTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('finance', 'delete') && (\r\n                            <AlertDialog>\r\n                              <AlertDialogTrigger asChild>\r\n                                <Button\r\n                                  variant=\"ghost\"\r\n                                  size=\"sm\"\r\n                                  className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                                  disabled={deletingId === transaction.id}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </AlertDialogTrigger>\r\n                              <AlertDialogContent>\r\n                                <AlertDialogHeader>\r\n                                  <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                                  <AlertDialogDescription>\r\n                                    Are you sure you want to delete this transaction? This action cannot be undone.\r\n                                  </AlertDialogDescription>\r\n                                </AlertDialogHeader>\r\n                                <AlertDialogFooter>\r\n                                  <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                  <AlertDialogAction\r\n                                    onClick={() => handleDelete(transaction.id)}\r\n                                    className=\"bg-red-600 hover:bg-red-700\"\r\n                                  >\r\n                                    Delete\r\n                                  </AlertDialogAction>\r\n                                </AlertDialogFooter>\r\n                              </AlertDialogContent>\r\n                            </AlertDialog>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pagination Controls */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center items-center space-x-2 mt-6\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Previous\r\n              </Button>\r\n\r\n              <div className=\"flex space-x-1\">\r\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                  let pageNum;\r\n                  if (totalPages <= 5) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage <= 3) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage >= totalPages - 2) {\r\n                    pageNum = totalPages - 4 + i;\r\n                  } else {\r\n                    pageNum = currentPage - 2 + i;\r\n                  }\r\n\r\n                  return (\r\n                    <Button\r\n                      key={pageNum}\r\n                      variant={currentPage === pageNum ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(pageNum)}\r\n                      className=\"w-8 h-8 p-0\"\r\n                    >\r\n                      {pageNum}\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Next\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsList;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6130, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/DailyCashSummary.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format, startOfWeek, endOfWeek, startOfMonth, endOfMonth, subDays, addDays } from 'date-fns';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CalendarDays, TrendingUp, TrendingDown, ArrowRightLeft } from 'lucide-react';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { DailyCashSummary as DailyCashSummaryType, CashTransaction, CashTransactionFormData } from '@/types/cash';\r\nimport CashTransactionsList from './CashTransactionsList';\r\nimport ViewCashTransactionDialog from './ViewCashTransactionDialog';\r\nimport EditCashTransactionDialog from './EditCashTransactionDialog';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface DailyCashSummaryProps {\r\n  accountId?: string;\r\n}\r\n\r\ntype PeriodType = 'daily' | 'weekly' | 'monthly' | 'custom';\r\n\r\nconst DailyCashSummary: React.FC<DailyCashSummaryProps> = ({ accountId }) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params with fallbacks\r\n  const [periodType, setPeriodType] = useState<PeriodType>(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    return paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod) ? paramPeriod : 'daily';\r\n  });\r\n\r\n  const [selectedDate, setSelectedDate] = useState(() => {\r\n    const paramDate = searchParams.get('summaryDate');\r\n    return paramDate ? new Date(paramDate) : new Date();\r\n  });\r\n\r\n  const [customStartDate, setCustomStartDate] = useState(() => {\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    return paramStartDate ? new Date(paramStartDate) : new Date();\r\n  });\r\n\r\n  const [customEndDate, setCustomEndDate] = useState(() => {\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n    return paramEndDate ? new Date(paramEndDate) : new Date();\r\n  });\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    const paramDate = searchParams.get('summaryDate');\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n\r\n    if (paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod)) {\r\n      setPeriodType(paramPeriod);\r\n    } else {\r\n      setPeriodType('daily');\r\n    }\r\n\r\n    if (paramDate) {\r\n      setSelectedDate(new Date(paramDate));\r\n    }\r\n\r\n    if (paramStartDate) {\r\n      setCustomStartDate(new Date(paramStartDate));\r\n    }\r\n\r\n    if (paramEndDate) {\r\n      setCustomEndDate(new Date(paramEndDate));\r\n    }\r\n  }, [searchParams]);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [summary, setSummary] = useState<DailyCashSummaryType>({\r\n    date: new Date(),\r\n    openingBalance: 0,\r\n    cashIn: 0,\r\n    cashOut: 0,\r\n    transfersIn: 0,\r\n    transfersOut: 0,\r\n    closingBalance: 0\r\n  });\r\n\r\n  // Use optimized hooks with better caching\r\n  const { getDailySummary, getDateRangeSummary, transactions, updateTransaction, refreshTransactions } = useCashTransactions(accountId);\r\n  const { accounts, refreshAccounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const isMobile = useIsMobile();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n\r\n  // Memoize currency formatter\r\n  const formatCurrency = useCallback((amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  }, [settings.currency]);\r\n\r\n\r\n  // Functions to update both state and URL\r\n  const updatePeriodType = (value: PeriodType) => {\r\n    setPeriodType(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value !== 'daily') {\r\n      newParams.set('summaryPeriod', value);\r\n    } else {\r\n      newParams.delete('summaryPeriod');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateSelectedDate = (date: Date) => {\r\n    setSelectedDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    const dateStr = format(date, 'yyyy-MM-dd');\r\n    const todayStr = format(new Date(), 'yyyy-MM-dd');\r\n    if (dateStr !== todayStr) {\r\n      newParams.set('summaryDate', dateStr);\r\n    } else {\r\n      newParams.delete('summaryDate');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomStartDate = (date: Date) => {\r\n    setCustomStartDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryStartDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomEndDate = (date: Date) => {\r\n    setCustomEndDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryEndDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  // Memoized handlers for better performance\r\n  const handleDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateSelectedDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomStartDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomStartDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomEndDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomEndDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const goToToday = useCallback(() => {\r\n    const today = new Date();\r\n    updateSelectedDate(today);\r\n    updateCustomStartDate(today);\r\n    updateCustomEndDate(today);\r\n  }, []);\r\n\r\n  // Memoize date range calculation\r\n  const getDateRange = useMemo(() => {\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return {\r\n          start: startOfWeek(selectedDate, { weekStartsOn: 1 }),\r\n          end: endOfWeek(selectedDate, { weekStartsOn: 1 })\r\n        };\r\n      case 'monthly':\r\n        return {\r\n          start: startOfMonth(selectedDate),\r\n          end: endOfMonth(selectedDate)\r\n        };\r\n      case 'custom':\r\n        return {\r\n          start: customStartDate,\r\n          end: customEndDate\r\n        };\r\n      default:\r\n        return {\r\n          start: selectedDate,\r\n          end: selectedDate\r\n        };\r\n    }\r\n  }, [periodType, selectedDate, customStartDate, customEndDate]);\r\n\r\n  // Function to reload summary data\r\n  const reloadSummary = useCallback(async () => {\r\n    try {\r\n      let summaryData: DailyCashSummaryType;\r\n\r\n      if (periodType === 'daily') {\r\n        summaryData = await getDailySummary(selectedDate, accountId);\r\n      } else {\r\n        const { start, end } = getDateRange;\r\n        summaryData = await getDateRangeSummary(start, end, accountId);\r\n      }\r\n\r\n      setSummary(summaryData);\r\n    } catch (error) {\r\n      console.error('Error loading summary:', error);\r\n    }\r\n  }, [periodType, selectedDate, getDateRange, accountId, getDailySummary, getDateRangeSummary]);\r\n\r\n  // Optimized summary loading with debouncing to prevent excessive calls\r\n  useEffect(() => {\r\n    let timeoutId: NodeJS.Timeout;\r\n\r\n    const loadSummary = async () => {\r\n      await reloadSummary();\r\n    };\r\n\r\n    // Debounce the summary loading to prevent excessive calls\r\n    timeoutId = setTimeout(loadSummary, 100);\r\n\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [reloadSummary, transactions]);\r\n\r\n  // Memoize filtered transactions for better performance\r\n  const getFilteredTransactions = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    const startDateStr = start.toISOString().split('T')[0];\r\n    const endDateStr = end.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    return filteredTransactions;\r\n  }, [transactions, getDateRange, accountId]);\r\n\r\n  const handleViewTransaction = useCallback((transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleEditTransaction = useCallback((transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleUpdateTransaction = useCallback(async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes\r\n      await reloadSummary();\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  }, [updateTransaction, refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  // Enhanced transaction deleted handler with automatic refresh\r\n  const handleTransactionDeleted = useCallback(async () => {\r\n    try {\r\n      // Refresh both transactions and accounts data\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes instantly\r\n      await reloadSummary();\r\n\r\n      console.log('Successfully refreshed data after transaction deletion');\r\n    } catch (error) {\r\n      console.error('Error refreshing data after transaction deletion:', error);\r\n    }\r\n  }, [refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  const periodTransactions = getFilteredTransactions;\r\n\r\n  // Memoize period label\r\n  const getPeriodLabel = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return `Week of ${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      case 'monthly':\r\n        return format(selectedDate, 'MMMM yyyy');\r\n      case 'custom':\r\n        return `${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      default:\r\n        return format(selectedDate, 'MMMM d, yyyy');\r\n    }\r\n  }, [getDateRange, periodType, selectedDate]);\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6\">\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <div className=\"space-y-4\">\r\n            <CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\r\n              <CalendarDays className=\"h-5 w-5\" />\r\n              <span className=\"break-words\">Cash Summary</span>\r\n            </CardTitle>\r\n\r\n            {/* Mobile-optimized period label */}\r\n            <div className=\"text-sm md:text-base font-medium text-muted-foreground\">\r\n              {getPeriodLabel}\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"space-y-3\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\r\n                <div className=\"space-y-1\">\r\n                  <Label htmlFor=\"period\" className=\"text-xs font-medium\">Period</Label>\r\n                  <Select value={periodType} onValueChange={updatePeriodType}>\r\n                    <SelectTrigger className=\"h-9 text-sm\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"daily\">Daily</SelectItem>\r\n                      <SelectItem value=\"weekly\">Weekly</SelectItem>\r\n                      <SelectItem value=\"monthly\">Monthly</SelectItem>\r\n                      <SelectItem value=\"custom\">Custom Range</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {periodType === 'custom' ? (\r\n                  <>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"startDate\" className=\"text-xs font-medium\">Start Date</Label>\r\n                      <Input\r\n                        id=\"startDate\"\r\n                        type=\"date\"\r\n                        value={format(customStartDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomStartDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"endDate\" className=\"text-xs font-medium\">End Date</Label>\r\n                      <Input\r\n                        id=\"endDate\"\r\n                        type=\"date\"\r\n                        value={format(customEndDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomEndDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"space-y-1\">\r\n                    <Label htmlFor=\"date\" className=\"text-xs font-medium\">Date</Label>\r\n                    <Input\r\n                      id=\"date\"\r\n                      type=\"date\"\r\n                      value={format(selectedDate, 'yyyy-MM-dd')}\r\n                      onChange={handleDateChange}\r\n                      className=\"h-9 text-sm\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-end\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={goToToday}\r\n                    className=\"h-9 text-sm\"\r\n                  >\r\n                    Today\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Summary Grid - Changed to single column on mobile */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 md:gap-4\">\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-muted/50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Opening</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.openingBalance) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-green-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-green-600\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-green-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashIn) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-red-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-red-600\">\r\n                <TrendingDown className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-red-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashOut) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-blue-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-blue-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersIn) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-orange-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-orange-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-orange-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersOut) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-slate-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Closing</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance) : ''}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Net Change */}\r\n          <div className=\"pt-3 md:pt-4 border-t\">\r\n            <div className=\"text-sm md:text-base text-muted-foreground\">\r\n              Net Change:\r\n              <span className={`ml-1 font-semibold break-all ${summary.closingBalance - summary.openingBalance >= 0\r\n                ? 'text-green-600'\r\n                : 'text-red-600'\r\n                }`}>\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance - summary.openingBalance) : ''}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Transactions Table for Selected Period with Pagination */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">\r\n            <span className=\"break-words\">Transactions</span>\r\n            <span className=\"text-sm font-normal text-muted-foreground ml-2\">\r\n              ({periodTransactions.length} transaction{periodTransactions.length !== 1 ? 's' : ''})\r\n            </span>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={periodTransactions}\r\n            accountId={accountId}\r\n            showAccountColumn={!accountId}\r\n            onViewTransaction={handleViewTransaction}\r\n            onEditTransaction={handleEditTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyCashSummary;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/calendar.tsx"],"sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { DayPicker } from \"react-day-picker\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3 pointer-events-auto\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        caption_dropdowns: \"flex justify-center gap-1\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        dropdown: \"bg-background rounded-md border p-1 shadow-md\",\r\n        dropdown_month: \"w-[var(--rdp-caption-dropdown-month-width)]\",\r\n        dropdown_year: \"w-[var(--rdp-caption-dropdown-year-width)]\",\r\n        dropdown_icon: \"w-4 h-4\",\r\n        button_reset: \"appearance-none bg-transparent border-none p-0 m-0\",\r\n        vhidden: \"sr-only\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nCalendar.displayName = \"Calendar\";\r\n\r\nexport { Calendar };\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAEA;AACA;;;;;;AAIA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,6LAAC,8KAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,4HAAE,EAAC,2BAA2B;QACzC,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,mBAAmB;YACnB,KAAK;YACL,YAAY,IAAA,4HAAE,EACZ,IAAA,uJAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,4HAAE,EACL,IAAA,uJAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,UAAU;YACV,gBAAgB;YAChB,eAAe;YACf,eAAe;YACf,cAAc;YACd,SAAS;YACT,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,GAAG,QAAQ,iBAAK,6LAAC,sOAAW;oBAAC,WAAU;;;;;;YACpD,WAAW,CAAC,EAAE,GAAG,QAAQ,iBAAK,6LAAC,yOAAY;oBAAC,WAAU;;;;;;QACxD;QACC,GAAG,KAAK;;;;;;AAGf;KA1DS;AA2DT,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 7269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,MAAM,+BAAiB,2KAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,4HAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 7317, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/BulkTransactionAddTab.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { format } from 'date-fns';\r\nimport { Calendar as CalendarIcon, Plus, Trash2, ArrowUp, ArrowDown, Save, X, Info } from 'lucide-react';\r\nimport { CashTransactionFormData } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\n\r\ninterface TransactionRow extends CashTransactionFormData {\r\n    id: string;\r\n}\r\n\r\ninterface BulkTransactionAddTabProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onSuccess: () => void;\r\n}\r\n\r\nconst STORAGE_KEY = 'bulk_transactions_draft';\r\n\r\nconst BulkTransactionAddTab: React.FC<BulkTransactionAddTabProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onSuccess,\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { user } = useAuth();\r\n    const { accounts } = useCashAccounts();\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const [rows, setRows] = useState<TransactionRow[]>([]);\r\n    const [globalDate, setGlobalDate] = useState<Date>(new Date());\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Load draft from localStorage\r\n    useEffect(() => {\r\n        if (!open) return;\r\n\r\n        const savedDraft = localStorage.getItem(STORAGE_KEY);\r\n        if (savedDraft) {\r\n            try {\r\n                const parsed = JSON.parse(savedDraft);\r\n                setRows(parsed.map((r: any) => ({ ...r, date: new Date(r.date) })));\r\n            } catch (e) {\r\n                console.error('Failed to parse draft', e);\r\n                addEmptyRow();\r\n            }\r\n        } else {\r\n            setRows([]);\r\n            addEmptyRow();\r\n        }\r\n    }, [open]);\r\n\r\n    // Save draft to localStorage whenever rows change\r\n    useEffect(() => {\r\n        if (rows.length > 0) {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(rows));\r\n        } else {\r\n            localStorage.removeItem(STORAGE_KEY);\r\n        }\r\n    }, [rows]);\r\n\r\n    const addEmptyRow = () => {\r\n        const newId = Math.random().toString(36).substr(2, 9);\r\n        const newRow: TransactionRow = {\r\n            id: newId,\r\n            accountId: accountId,\r\n            amount: 0,\r\n            transactionType: 'cash_in',\r\n            description: '',\r\n            category: 'Other',\r\n            paymentMethod: 'Cash',\r\n            personInCharge: '',\r\n            tags: [],\r\n            date: globalDate, // Use the default/global date for new rows\r\n            receiptImage: ''\r\n        };\r\n        setRows(prev => [...prev, newRow]);\r\n    };\r\n\r\n    const removeRow = (id: string) => {\r\n        setRows(prev => prev.filter(r => r.id !== id));\r\n        if (rows.length === 1) {\r\n            addEmptyRow();\r\n        }\r\n    };\r\n\r\n    const updateRow = (id: string, updates: Partial<TransactionRow>) => {\r\n        setRows(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\r\n    };\r\n\r\n    const moveRow = (id: string, direction: 'up' | 'down') => {\r\n        const index = rows.findIndex(r => r.id === id);\r\n        if (index < 0) return;\r\n        if (direction === 'up' && index === 0) return;\r\n        if (direction === 'down' && index === rows.length - 1) return;\r\n\r\n        const newRows = [...rows];\r\n        const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n        [newRows[index], newRows[targetIndex]] = [newRows[targetIndex], newRows[index]];\r\n        setRows(newRows);\r\n    };\r\n\r\n    const handleSaveAll = async () => {\r\n        const validRows = rows.filter(r => r.amount > 0 && r.description.trim() !== '');\r\n        if (validRows.length === 0) {\r\n            alert('Please enter at least one valid transaction with amount and description');\r\n            return;\r\n        }\r\n\r\n        // Verify transfers have a destination\r\n        const invalidTransfers = validRows.filter(r => r.transactionType === 'transfer' && !r.toAccountId);\r\n        if (invalidTransfers.length > 0) {\r\n            alert('Please select a destination account for all transfers');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Use the date from each individual row\r\n            await createBulkTransactions(validRows.map(({ id, ...rest }) => ({ ...rest })));\r\n            localStorage.removeItem(STORAGE_KEY);\r\n            onSuccess();\r\n        } catch (e) {\r\n            console.error('Bulk save failed', e);\r\n            alert('Failed to save transactions. Please check your network connection.');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        if (isSaving) return;\r\n        onOpenChange(false);\r\n    };\r\n\r\n    const renderDesktop = () => (\r\n        <div className=\"overflow-x-auto rounded-md border\">\r\n            <Table>\r\n                <TableHeader className=\"bg-muted/50\">\r\n                    <TableRow>\r\n                        <TableHead className=\"w-[140px]\">Date</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Type</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Amount</TableHead>\r\n                        <TableHead>Description</TableHead>\r\n                        <TableHead className=\"w-[140px]\">Category</TableHead>\r\n                        <TableHead className=\"w-[150px]\">Details</TableHead>\r\n                        <TableHead className=\"w-[120px] text-right\">Actions</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {rows.map((row) => (\r\n                        <TableRow key={row.id} className=\"hover:bg-muted/30 transition-colors\">\r\n                            <TableCell>\r\n                                <Popover>\r\n                                    <PopoverTrigger asChild>\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"sm\"\r\n                                            className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                        >\r\n                                            <CalendarIcon className=\"mr-2 h-3 w-3 shrink-0\" />\r\n                                            <span className=\"truncate\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                        </Button>\r\n                                    </PopoverTrigger>\r\n                                    <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                        <Calendar\r\n                                            mode=\"single\"\r\n                                            selected={row.date}\r\n                                            onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                            initialFocus\r\n                                        />\r\n                                    </PopoverContent>\r\n                                </Popover>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.transactionType}\r\n                                    onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                        <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                        <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                {row.transactionType === 'transfer' && (\r\n                                    <div className=\"mt-1.5\">\r\n                                        <Select\r\n                                            value={row.toAccountId}\r\n                                            onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                                        >\r\n                                            <SelectTrigger className=\"text-[10px] h-7 px-2\">\r\n                                                <SelectValue placeholder=\"To Account\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                                    <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                )}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    value={row.amount || ''}\r\n                                    onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                    className=\"h-9 font-medium\"\r\n                                    placeholder=\"0.00\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    value={row.description}\r\n                                    onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                                    placeholder=\"Description...\"\r\n                                    className=\"h-9\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.category}\r\n                                    onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                        <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                        <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                        <SelectItem value=\"Other\">Other</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </TableCell>\r\n                            <TableCell className=\"space-y-1\">\r\n                                <Input\r\n                                    placeholder=\"Payment Method\"\r\n                                    value={row.paymentMethod}\r\n                                    onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                                <Input\r\n                                    placeholder=\"Person In Charge\"\r\n                                    value={row.personInCharge}\r\n                                    onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                                <div className=\"flex items-center justify-end gap-0.5\">\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                        <ArrowUp className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'down')}>\r\n                                        <ArrowDown className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-destructive/70 hover:text-destructive hover:bg-destructive/10\" onClick={() => removeRow(row.id)}>\r\n                                        <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n\r\n    const renderMobile = () => (\r\n        <div className=\"space-y-4 px-1\">\r\n            {rows.map((row, index) => (\r\n                <Card key={row.id} className=\"overflow-hidden border-l-4 border-l-primary/30\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between p-3 pb-2 bg-muted/20\">\r\n                        <CardTitle className=\"text-xs font-semibold uppercase tracking-wider text-muted-foreground\">\r\n                            Transaction {index + 1}\r\n                        </CardTitle>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                <ArrowUp className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-destructive/70\" onClick={() => removeRow(row.id)}>\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent className=\"p-3 space-y-3\">\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Popover>\r\n                                <PopoverTrigger asChild>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                    >\r\n                                        <CalendarIcon className=\"mr-2 h-3 w-3\" />\r\n                                        <span className=\"truncate text-xs\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                    </Button>\r\n                                </PopoverTrigger>\r\n                                <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                    <Calendar\r\n                                        mode=\"single\"\r\n                                        selected={row.date}\r\n                                        onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                        initialFocus\r\n                                    />\r\n                                </PopoverContent>\r\n                            </Popover>\r\n                            <Select\r\n                                value={row.transactionType}\r\n                                onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                type=\"number\"\r\n                                placeholder=\"Amount\"\r\n                                value={row.amount || ''}\r\n                                onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                className=\"h-9 font-medium\"\r\n                            />\r\n                            <Select\r\n                                value={row.category}\r\n                                onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                    <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                    <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                    <SelectItem value=\"Other\">Other</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {row.transactionType === 'transfer' && (\r\n                            <Select\r\n                                value={row.toAccountId}\r\n                                onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue placeholder=\"Target Account\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                        <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        )}\r\n\r\n                        <Input\r\n                            placeholder=\"Description\"\r\n                            value={row.description}\r\n                            onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                            className=\"h-9\"\r\n                        />\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                placeholder=\"Payment Method\"\r\n                                value={row.paymentMethod}\r\n                                onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                            <Input\r\n                                placeholder=\"Person In Charge\"\r\n                                value={row.personInCharge}\r\n                                onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isSaving && onOpenChange(val)}>\r\n            <DialogContent className=\"max-w-6xl w-[95vw] h-[95vh] sm:h-[90vh] flex flex-col p-0 overflow-hidden shadow-2xl border-none\">\r\n                <DialogHeader className=\"p-6 pb-2 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border-b\">\r\n                    <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                            <DialogTitle className=\"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2\">\r\n                                <Wallet className=\"h-5 w-5 text-blue-600\" />\r\n                                Bulk Transaction Entry\r\n                            </DialogTitle>\r\n                            <DialogDescription className=\"text-slate-500 dark:text-slate-400 mt-1\">\r\n                                Add multiple records at once. Each row can have its own date and details.\r\n                            </DialogDescription>\r\n                        </div>\r\n                    </div>\r\n                </DialogHeader>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 bg-slate-50/30 dark:bg-slate-950/30\">\r\n                    <div className=\"bg-white dark:bg-slate-900 rounded-xl p-4 shadow-sm border space-y-4\">\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                            <div className=\"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400\">\r\n                                <Alert className=\"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900 py-2\">\r\n                                    <Info className=\"h-4 w-4 text-blue-500\" />\r\n                                    <AlertDescription className=\"text-[11px] sm:text-xs\">\r\n                                        Use the <strong>Default Date</strong> to quickly set dates for newly added rows.\r\n                                    </AlertDescription>\r\n                                </Alert>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n                                <div className=\"flex-1 md:flex-initial\">\r\n                                    <p className=\"text-[10px] font-semibold text-muted-foreground uppercase mb-1 ml-1\">Default Date</p>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <Button variant=\"outline\" className={cn(\"justify-start text-left font-normal w-full md:w-[200px] h-10 shadow-sm\", !globalDate && \"text-muted-foreground\")}>\r\n                                                <CalendarIcon className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n                                                {globalDate ? format(globalDate, \"PPP\") : <span>Pick a date</span>}\r\n                                            </Button>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0 z-[80]\" align=\"end\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={globalDate}\r\n                                                onSelect={(date) => date && setGlobalDate(date)}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                </div>\r\n                                <div className=\"flex items-end h-full\">\r\n                                    <Button\r\n                                        onClick={addEmptyRow}\r\n                                        variant=\"secondary\"\r\n                                        className=\"gap-2 h-10 font-semibold border border-slate-200 dark:border-slate-800\"\r\n                                    >\r\n                                        <Plus className=\"h-4 w-4\" />\r\n                                        Add Row\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"min-h-[200px]\">\r\n                            {isMobile ? renderMobile() : renderDesktop()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-6 border-t bg-white dark:bg-slate-900 shrink-0\">\r\n                    <div className=\"text-sm font-medium text-slate-500\">\r\n                        Total Valid: <span className=\"text-indigo-600 dark:text-indigo-400 font-bold\">{rows.filter(r => r.amount > 0).length}</span>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            onClick={handleCancel}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                        >\r\n                            <X className=\"h-4 w-4\" />\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleSaveAll}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md transition-all active:scale-[0.98]\"\r\n                        >\r\n                            {isSaving ? <Save className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\r\n                            Save {rows.filter(r => r.amount > 0).length} Transactions\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\n// Internal icon for naming consistency but imports lucide-react Wallet\r\nconst Wallet = ({ className }: { className?: string }) => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className={className}\r\n    >\r\n        <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\" />\r\n        <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\" />\r\n        <path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\" />\r\n    </svg>\r\n);\r\n\r\nexport default BulkTransactionAddTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/progress.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-gray-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 transition-all\"\r\n      style={{ \r\n        transform: `translateX(-${100 - (value || 0)}%)`,\r\n        backgroundColor: \"#16a34a\"\r\n      }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,gEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBACL,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;gBAChD,iBAAiB;YACnB;;;;;;;;;;;;AAIN,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 8798, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/csvParser.ts"],"sourcesContent":["\r\nexport interface CSVProductRow {\r\n  'Product Name': string;\r\n  'Category': string;\r\n  'Description': string;\r\n  'Supplier': string;\r\n  'Creation Date': string;\r\n  'Initial Stock': string;\r\n  'Minimum Stock Level': string;\r\n  'Cost Price': string;\r\n  'Selling Price': string;\r\n  'Manufacturer Barcode'?: string;\r\n}\r\n\r\nexport interface CSVTransactionRow {\r\n  'Date': string;\r\n  'Type': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'To Account'?: string;\r\n}\r\n\r\nexport interface CSVExpenseRow {\r\n  'Date': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'Link to Finance'?: string; // 'true' or 'false'\r\n  'Finance Account'?: string; // Account name\r\n}\r\n\r\nexport interface ValidationError {\r\n  row: number;\r\n  field: string;\r\n  message: string;\r\n}\r\n\r\nexport interface ParsedCSVResult {\r\n  validRows: CSVProductRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\n// Proper CSV parser that handles quoted fields with commas\r\nconst parseCSVLine = (line: string): string[] => {\r\n  const result: string[] = [];\r\n  let current = '';\r\n  let inQuotes = false;\r\n  let i = 0;\r\n\r\n  while (i < line.length) {\r\n    const char = line[i];\r\n    const nextChar = line[i + 1];\r\n\r\n    if (char === '\"') {\r\n      if (inQuotes && nextChar === '\"') {\r\n        // Escaped quote - add single quote to current field\r\n        current += '\"';\r\n        i += 2; // Skip both quotes\r\n        continue;\r\n      } else {\r\n        // Toggle quote state\r\n        inQuotes = !inQuotes;\r\n      }\r\n    } else if (char === ',' && !inQuotes) {\r\n      // Field separator - push current field and reset\r\n      result.push(current.trim());\r\n      current = '';\r\n    } else {\r\n      // Regular character - add to current field\r\n      current += char;\r\n    }\r\n\r\n    i++;\r\n  }\r\n\r\n  // Push the last field\r\n  result.push(current.trim());\r\n  return result;\r\n};\r\n\r\nexport const parseCSV = (csvText: string): ParsedCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVProductRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVProductRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedTransactionCSVResult {\r\n  validRows: CSVTransactionRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseTransactionCSV = (csvText: string): ParsedTransactionCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVTransactionRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateTransactionCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVTransactionRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedExpenseCSVResult {\r\n  validRows: CSVExpenseRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseExpenseCSV = (csvText: string): ParsedExpenseCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVExpenseRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateExpenseCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVExpenseRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nconst validateCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  // Only validate that Product Name is present\r\n  if (!row['Product Name']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Product Name',\r\n      message: 'Product Name is required'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateTransactionCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Type'] || !['cash_in', 'cash_out', 'transfer'].includes(row['Type'].toLowerCase())) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Type',\r\n      message: 'Type must be \"cash_in\", \"cash_out\", or \"transfer\"'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  if (row['Type']?.toLowerCase() === 'transfer' && !row['To Account']) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'To Account',\r\n      message: 'To Account is required for transfers'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateExpenseCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  const linkToFinance = row['Link to Finance']?.toString().toLowerCase();\r\n  if (linkToFinance === 'true' && !row['Finance Account']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Finance Account',\r\n      message: 'Finance Account is required when Link to Finance is true'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const generateErrorLogCSV = (errors: ValidationError[], filename: string = 'upload_errors.csv') => {\r\n  const headers = ['Row', 'Field', 'Error Message'];\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...errors.map(error =>\r\n      [error.row, error.field, `\"${error.message}\"`].join(',')\r\n    )\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = filename;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const extractUniqueCategories = (validRows: CSVProductRow[]): string[] => {\r\n  const categories = validRows\r\n    .map(row => row['Category']?.trim())\r\n    .filter(category => category && category !== '');\r\n\r\n  return [...new Set(categories)];\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9052, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashCSVUploadDialog.tsx"],"sourcesContent":["import React, { useState, useRef, useMemo } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Upload, FileText, AlertCircle, CheckCircle, Download, Info, MoveRight } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { parseTransactionCSV, generateErrorLogCSV, ValidationError, CSVTransactionRow, validateTransactionCSVRow } from '@/utils/csvParser';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\n\r\ninterface CashCSVUploadDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onUploadComplete: () => void;\r\n}\r\n\r\ninterface UploadState {\r\n    step: 'select' | 'preview' | 'uploading' | 'complete';\r\n    file: File | null;\r\n    validRows: CSVTransactionRow[];\r\n    errors: ValidationError[];\r\n    totalRows: number;\r\n    uploadProgress: number;\r\n    successCount: number;\r\n    failureCount: number;\r\n    currentTransactionIndex: number;\r\n}\r\n\r\nconst CashCSVUploadDialog: React.FC<CashCSVUploadDialogProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onUploadComplete\r\n}) => {\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const { accounts } = useCashAccounts();\r\n    const [state, setState] = useState<UploadState>({\r\n        step: 'select',\r\n        file: null,\r\n        validRows: [],\r\n        errors: [],\r\n        totalRows: 0,\r\n        uploadProgress: 0,\r\n        successCount: 0,\r\n        failureCount: 0,\r\n        currentTransactionIndex: 0\r\n    });\r\n\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const convertCSVRowToTransaction = (row: CSVTransactionRow): CashTransactionFormData => {\r\n        let transactionDate = new Date();\r\n\r\n        const rawDate = row['Date'] as any;\r\n        const dateValue = rawDate?.toString();\r\n        if (dateValue) {\r\n            // Support raw Date objects from SheetJS {cellDates: true}\r\n            if (rawDate instanceof Date) {\r\n                transactionDate = rawDate;\r\n            } else {\r\n                // Support DD/MM/YYYY, D/M/YYYY, DD-MM-YYYY\r\n                const ddmmyyyyMatch = dateValue.match(/^(\\d{1,2})[/-](\\d{1,2})[/-](\\d{4})$/);\r\n                if (ddmmyyyyMatch) {\r\n                    const [, day, month, year] = ddmmyyyyMatch;\r\n                    transactionDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\r\n                } else {\r\n                    const parsedDate = new Date(dateValue);\r\n                    if (!isNaN(parsedDate.getTime())) {\r\n                        transactionDate = parsedDate;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // If something went wrong with the date, use today but ensure it's a valid object\r\n        if (isNaN(transactionDate.getTime())) {\r\n            transactionDate = new Date();\r\n        }\r\n\r\n        let toAccountId = '';\r\n        if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n            const targetAccount = accounts?.find(a =>\r\n                a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n            );\r\n            if (targetAccount) {\r\n                toAccountId = targetAccount.id;\r\n            }\r\n        }\r\n\r\n        return {\r\n            accountId: accountId || '',\r\n            amount: parseFloat(row['Amount']?.toString().replace(/[^0-9.-]/g, '') || '0'),\r\n            transactionType: (row['Type']?.toLowerCase() || 'cash_in') as 'cash_in' | 'cash_out' | 'transfer',\r\n            toAccountId,\r\n            category: row['Category'] || 'Other',\r\n            description: row['Description'] || '',\r\n            paymentMethod: row['Payment Method'] || 'Cash',\r\n            personInCharge: row['Person In Charge'] || '',\r\n            tags: [],\r\n            date: transactionDate,\r\n            receiptImage: ''\r\n        };\r\n    };\r\n\r\n    const handleFileSelect = async (file: File) => {\r\n        const isExcel = file.name.endsWith('.xlsx') || file.name.endsWith('.xls');\r\n        const isCSV = file.name.endsWith('.csv');\r\n\r\n        if (!isExcel && !isCSV) {\r\n            alert('Please select a CSV or Excel file');\r\n            return;\r\n        }\r\n\r\n        let result: { validRows: CSVTransactionRow[], errors: ValidationError[], totalRows: number };\r\n\r\n        if (isExcel) {\r\n            const buffer = await file.arrayBuffer();\r\n            const workbook = XLSX.read(buffer, { cellDates: true });\r\n            const firstSheetName = workbook.SheetNames[0];\r\n            const worksheet = workbook.Sheets[firstSheetName];\r\n\r\n            // Use SheetJS to get clean objects directly\r\n            const rawRows = XLSX.utils.sheet_to_json(worksheet) as any[];\r\n\r\n            // Map keys back to expected format if they differ slightly\r\n            const csvRows: CSVTransactionRow[] = rawRows.map(row => ({\r\n                'Date': row['Date'] || '',\r\n                'Type': row['Type'] || '',\r\n                'Amount': row['Amount'] || '',\r\n                'Description': row['Description'] || '',\r\n                'Category': row['Category'] || '',\r\n                'Payment Method': row['Payment Method'] || '',\r\n                'Person In Charge': row['Person In Charge'] || '',\r\n                'To Account': row['To Account'] || ''\r\n            }));\r\n\r\n            // Crucially: run the SAME validation as CSV\r\n            const validRows: CSVTransactionRow[] = [];\r\n            const errors: ValidationError[] = [];\r\n\r\n            csvRows.forEach((row, index) => {\r\n                const rowErrors = validateTransactionCSVRow(row, index + 2);\r\n\r\n                // Add specific validation for account matching if it's a transfer\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        rowErrors.push({\r\n                            row: index + 2,\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found or is the current account.`\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (rowErrors.length === 0) {\r\n                    validRows.push(row);\r\n                } else {\r\n                    errors.push(...rowErrors);\r\n                }\r\n            });\r\n\r\n            result = {\r\n                validRows,\r\n                errors,\r\n                totalRows: csvRows.length\r\n            };\r\n        } else {\r\n            const text = await file.text();\r\n            result = parseTransactionCSV(text);\r\n\r\n            // Post-process CSV results for account matching\r\n            const accountErrors: ValidationError[] = [];\r\n            const filteredValidRows: CSVTransactionRow[] = [];\r\n\r\n            result.validRows.forEach((row, index) => {\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        accountErrors.push({\r\n                            row: index + 2, // This might be slightly off for CSV if index is non-sequential, but usually okay\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found.`\r\n                        });\r\n                    } else {\r\n                        filteredValidRows.push(row);\r\n                    }\r\n                } else {\r\n                    filteredValidRows.push(row);\r\n                }\r\n            });\r\n\r\n            result.errors.push(...accountErrors);\r\n            result.validRows = filteredValidRows;\r\n        }\r\n\r\n        setState({\r\n            ...state,\r\n            step: 'preview',\r\n            file,\r\n            validRows: result.validRows,\r\n            errors: result.errors,\r\n            totalRows: result.totalRows\r\n        });\r\n    };\r\n\r\n    const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n\r\n        const file = e.dataTransfer.files[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n\r\n    const handleConfirmUpload = async () => {\r\n        setState(prev => ({ ...prev, step: 'uploading', uploadProgress: 0, currentTransactionIndex: 0 }));\r\n        setIsUploading(true);\r\n\r\n        const transactions = state.validRows.map(convertCSVRowToTransaction);\r\n\r\n        try {\r\n            await createBulkTransactions(transactions);\r\n\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: transactions.length,\r\n                failureCount: 0,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } catch (error) {\r\n            console.error('Bulk upload failed:', error);\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: 0,\r\n                failureCount: transactions.length,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        if (isUploading) return;\r\n\r\n        const wasSuccessfulUpload = state.step === 'complete' && state.successCount > 0;\r\n\r\n        setState({\r\n            step: 'select',\r\n            file: null,\r\n            validRows: [],\r\n            errors: [],\r\n            totalRows: 0,\r\n            uploadProgress: 0,\r\n            successCount: 0,\r\n            failureCount: 0,\r\n            currentTransactionIndex: 0\r\n        });\r\n\r\n        onOpenChange(false);\r\n\r\n        if (wasSuccessfulUpload) {\r\n            onUploadComplete();\r\n        }\r\n    };\r\n\r\n    const renderFileSelection = () => (\r\n        <div className=\"space-y-6\">\r\n            <div\r\n                className={cn(\r\n                    \"border-4 border-dashed rounded-2xl p-10 text-center cursor-pointer transition-all duration-300\",\r\n                    isDragging\r\n                        ? \"border-blue-500 bg-blue-50/50 scale-[1.01] shadow-lg\"\r\n                        : \"border-slate-200 dark:border-slate-800 hover:border-blue-400 hover:bg-slate-50/50 dark:hover:bg-slate-900/50\"\r\n                )}\r\n                onDrop={handleDrop}\r\n                onDragOver={handleDragOver}\r\n                onDragLeave={handleDragLeave}\r\n                onClick={() => fileInputRef.current?.click()}\r\n            >\r\n                <div className=\"bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-slow\">\r\n                    <Upload className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\r\n                </div>\r\n                <p className=\"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2\">\r\n                    Click or Drag File to Upload\r\n                </p>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 max-w-xs mx-auto mb-6\">\r\n                    Select your transaction data file. **CSV** and **Excel (.xlsx, .xls)** files are supported for bulk processing.\r\n                </p>\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">Multi-Format Support</span>\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"border rounded-xl overflow-hidden bg-white dark:bg-slate-900 shadow-sm\">\r\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 px-4 py-2 border-b flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Info className=\"h-4 w-4 text-blue-500\" />\r\n                        <span className=\"text-xs font-bold text-slate-700 dark:text-slate-300\">DATA FORMAT GUIDE</span>\r\n                    </div>\r\n                    <span className=\"text-[10px] text-slate-400 font-medium\">Headers are required</span>\r\n                </div>\r\n                <div className=\"overflow-x-auto p-0\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"bg-slate-100/30 dark:bg-slate-900/30\">\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Date</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Type</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Amount</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Description</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Category</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            <TableRow className=\"h-8 py-0\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">22/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-green-600 font-semibold italic\">cash_in</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">1500.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Product Sale #44</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Sales</TableCell>\r\n                            </TableRow>\r\n                            <TableRow className=\"h-8 py-0 border-none\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">21/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-red-600 font-semibold italic\">cash_out</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">450.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Office Supplies</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Expenses</TableCell>\r\n                            </TableRow>\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n                <div className=\"p-3 bg-blue-50/30 dark:bg-blue-900/10 text-[10px] text-blue-600 dark:text-blue-400 leading-relaxed border-t italic\">\r\n                    <strong>Note:</strong> Allowed types are: <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_in</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_out</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">transfer</code>\r\n                </div>\r\n            </div>\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n                onChange={handleFileInputChange}\r\n                className=\"hidden\"\r\n            />\r\n        </div>\r\n    );\r\n\r\n    const renderPreview = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                    <FileText className=\"h-5 w-5 text-blue-600\" />\r\n                    <div>\r\n                        <span className=\"text-sm font-bold text-slate-900 dark:text-slate-100\">{state.file?.name}</span>\r\n                        <p className=\"text-[10px] text-slate-500\">File attached and analyzed</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                    <Card className=\"shadow-none bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-emerald-600 dark:text-emerald-400\">{state.validRows.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-emerald-700 dark:text-emerald-500 uppercase\">Valid Rows</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-rose-50/50 dark:bg-rose-900/10 border-rose-100 dark:border-rose-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-rose-600 dark:text-rose-400\">{state.errors.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-rose-700 dark:text-rose-500 uppercase\">Invalid</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30 overflow-hidden text-center\">\r\n                        <CardContent className=\"p-4 flex flex-col items-center justify-center\">\r\n                            <div className=\"text-sm font-black text-blue-600 dark:text-blue-400 flex items-center gap-1\">\r\n                                {Math.round((state.validRows.length / state.totalRows) * 100) || 0}%\r\n                                <MoveRight className=\"h-3 w-3\" />\r\n                            </div>\r\n                            <p className=\"text-[10px] font-bold text-blue-700 dark:text-blue-500 uppercase\">Integrity</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n\r\n            {state.errors.length > 0 && (\r\n                <Alert variant=\"destructive\" className=\"bg-rose-50/50 dark:bg-rose-900/10 border-rose-200 dark:border-rose-900\">\r\n                    <AlertCircle className=\"h-4 w-4 text-rose-600\" />\r\n                    <AlertDescription className=\"text-xs text-rose-700 dark:text-rose-400 leading-relaxed font-medium\">\r\n                        Found {state.errors.length} rows with errors that will be skipped during the process.\r\n                        <Button\r\n                            variant=\"link\"\r\n                            className=\"p-0 h-auto ml-2 text-rose-700 dark:text-rose-400 underline font-bold\"\r\n                            onClick={() => generateErrorLogCSV(state.errors, 'transaction_upload_errors.csv')}\r\n                        >\r\n                            <Download className=\"h-3 w-3 mr-1 inline\" />\r\n                            View Error Details\r\n                        </Button>\r\n                    </AlertDescription>\r\n                </Alert>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    className=\"flex-1 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                    onClick={() => setState(prev => ({ ...prev, step: 'select' }))}\r\n                >\r\n                    Choose Different File\r\n                </Button>\r\n                <Button\r\n                    className=\"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md font-bold transition-all active:scale-[0.98]\"\r\n                    onClick={handleConfirmUpload}\r\n                    disabled={state.validRows.length === 0}\r\n                >\r\n                    Proceed with {state.validRows.length} Records\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderUploading = () => (\r\n        <div className=\"space-y-8 py-4\">\r\n            <div className=\"text-center space-y-2\">\r\n                <div className=\"relative w-20 h-20 mx-auto\">\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-slate-100 dark:border-slate-800\" />\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin\" />\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <Upload className=\"h-8 w-8 text-blue-500/50\" />\r\n                    </div>\r\n                </div>\r\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-slate-200\">Processing Data...</h3>\r\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 italic\">This will only take a few moments</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-2 px-4 text-center\">\r\n                <Progress value={state.uploadProgress} className=\"h-2 w-full bg-slate-100 dark:bg-slate-800\" />\r\n                <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">{Math.round(state.uploadProgress)}% Complete</span>\r\n            </div>\r\n\r\n            <Alert className=\"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-800\">\r\n                <Info className=\"h-4 w-4 text-slate-400\" />\r\n                <AlertDescription className=\"text-xs text-slate-500 dark:text-slate-400 font-medium\">\r\n                    We are verifying and persisting each transaction. Please keep your browser window active.\r\n                </AlertDescription>\r\n            </Alert>\r\n        </div>\r\n    );\r\n\r\n    const renderComplete = () => (\r\n        <div className=\"space-y-6 pt-4 text-center\">\r\n            <div className=\"bg-emerald-100 dark:bg-emerald-900/30 w-20 h-20 rounded-full flex items-center justify-center mx-auto shadow-inner\">\r\n                <CheckCircle className=\"h-10 w-10 text-emerald-600 dark:text-emerald-400\" />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n                <h3 className=\"text-xl font-black text-slate-900 dark:text-slate-100\">Synchronized Successfully!</h3>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium\">\r\n                    A total of <span className=\"text-emerald-600 dark:text-emerald-400 font-bold\">{state.successCount} transactions</span> have been merged into the financial ledger.\r\n                    {state.failureCount > 0 && <span className=\"text-rose-500 font-bold\"> ({state.failureCount} entries reported issues)</span>}\r\n                </p>\r\n            </div>\r\n            <Button\r\n                onClick={handleClose}\r\n                className=\"w-full h-12 rounded-xl text-lg font-bold shadow-lg transition-all hover:translate-y-[-2px] active:translate-y-[0px] bg-slate-900 hover:bg-black dark:bg-white dark:text-black dark:hover:bg-slate-200\"\r\n            >\r\n                Return to Dashboard\r\n            </Button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isUploading && onOpenChange(val)}>\r\n            <DialogContent className=\"sm:max-w-[550px] p-0 overflow-hidden rounded-3xl border-none shadow-2xl\">\r\n                <DialogHeader className=\"p-8 pb-4 bg-gradient-to-b from-slate-50/50 to-white dark:from-slate-900 dark:to-slate-950\">\r\n                    <DialogTitle className=\"flex items-center gap-3 text-2xl font-black tracking-tight text-slate-900 dark:text-slate-50\">\r\n                        <div className=\"bg-blue-600 p-2 rounded-xl text-white\">\r\n                            <Upload className=\"h-6 w-6\" />\r\n                        </div>\r\n                        Financial Importer\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-slate-500 dark:text-slate-400 font-medium mt-1\">\r\n                        Scale your data management by importing bulk CSV logs.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"px-8 pb-8 pt-0\">\r\n                    {state.step === 'select' && renderFileSelection()}\r\n                    {state.step === 'preview' && renderPreview()}\r\n                    {state.step === 'uploading' && renderUploading()}\r\n                    {state.step === 'complete' && renderComplete()}\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CashCSVUploadDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/csvTemplate.ts"],"sourcesContent":["\r\nexport const generateProductCSVTemplate = () => {\r\n  const headers = [\r\n    'Product Name',\r\n    'Category',\r\n    'Description',\r\n    'Supplier',\r\n    'Creation Date',\r\n    'Initial Stock',\r\n    'Minimum Stock Level',\r\n    'Cost Price',\r\n    'Selling Price'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '\"Sample Product with, commas\"',\r\n      'Electronics',\r\n      '\"A detailed product description, with commas and other punctuation!\"',\r\n      '\"Supplier Name, Inc.\"',\r\n      '15/01/2024',\r\n      '10',\r\n      '5',\r\n      '50.00',\r\n      '75.00'\r\n    ],\r\n    [\r\n      'Simple Product Name',\r\n      'Home & Garden',\r\n      'Basic description without commas',\r\n      'Basic Supplier',\r\n      '2024-01-16',\r\n      '-5',\r\n      '0',\r\n      '-25.50',\r\n      '100.75'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'product_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const generateTransactionCSVTemplate = () => {\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Amount',\r\n    'Description',\r\n    'Category',\r\n    'Payment Method',\r\n    'Person In Charge',\r\n    'To Account'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '22/12/2025',\r\n      'cash_in',\r\n      '1500.00',\r\n      'Sales income from morning shift',\r\n      'Sales',\r\n      'Cash',\r\n      'John Doe',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'cash_out',\r\n      '200.50',\r\n      'Purchased cleaning supplies',\r\n      'Expenses',\r\n      'Cash',\r\n      'Jane Smith',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'transfer',\r\n      '5000.00',\r\n      'Moving funds to main safe',\r\n      'Internal',\r\n      '',\r\n      'Admin',\r\n      'Main Safe'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'transaction_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n"],"names":[],"mappings":";;;;;;AACO,MAAM,6BAA6B;IACxC,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,aAAa;QACjB;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;KACF;IAED,MAAM,aAAa;QACjB,QAAQ,IAAI,CAAC;WACV,WAAW,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC;KACnC,CAAC,IAAI,CAAC;IAEP,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAAW;IACvD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;IACvC,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,IAAI,GAAG;IACZ,KAAK,QAAQ,GAAG;IAChB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,OAAO,GAAG,CAAC,eAAe,CAAC;AAC7B;AAEO,MAAM,iCAAiC;IAC5C,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,aAAa;QACjB;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;KACF;IAED,MAAM,aAAa;QACjB,QAAQ,IAAI,CAAC;WACV,WAAW,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC;KACnC,CAAC,IAAI,CAAC;IAEP,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAAW;IACvD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;IACvC,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,IAAI,GAAG;IACZ,KAAK,QAAQ,GAAG;IAChB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,OAAO,GAAG,CAAC,eAAe,CAAC;AAC7B"}},
    {"offset": {"line": 10361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/pages/CashAccount.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  Filter,\r\n  RotateCw,\r\n  ChevronLeft,\r\n  Eye,\r\n  Pencil,\r\n  Trash2,\r\n  Wallet,\r\n  ArrowUpRight,\r\n  ArrowDownLeft,\r\n  ArrowLeftRight,\r\n  MoreVertical,\r\n  Edit,\r\n  RefreshCw,\r\n  Upload,\r\n  Download,\r\n  ArrowLeft,\r\n  RefreshCcw,\r\n  ArrowDownRight,\r\n  ArrowRightLeft,\r\n  LayoutGrid,\r\n  Zap,\r\n  Loader2\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport CashTransactionDialog from '@/components/cash/CashTransactionDialog';\r\nimport EditCashTransactionDialog from '@/components/cash/EditCashTransactionDialog';\r\nimport ViewCashTransactionDialog from '@/components/cash/ViewCashTransactionDialog';\r\nimport CashAccountDialog from '@/components/cash/CashAccountDialog';\r\nimport CashTransactionsList from '@/components/cash/CashTransactionsList';\r\nimport DailyCashSummary from '@/components/cash/DailyCashSummary';\r\nimport BulkTransactionAddTab from '@/components/cash/BulkTransactionAddTab';\r\nimport CashCSVUploadDialog from '@/components/cash/CashCSVUploadDialog';\r\nimport { generateTransactionCSVTemplate } from '@/utils/csvTemplate';\r\nimport { CashTransactionFormData, CashAccountFormData, CashTransaction } from '@/types/cash';\r\nimport { formatCashAmount, cn } from '@/lib/utils';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle as AlertCircleIcon } from 'lucide-react';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst CashAccount = () => {\r\n  const { accountId } = useParams<{ accountId: string }>();\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const isMobile = useIsMobile();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { accounts, isLoading, updateAccount, refreshAccounts } = useCashAccounts();\r\n  const { transactions, createTransaction, updateTransaction, refreshTransactions, deleteTransaction, getDailySummary } = useCashTransactions(accountId);\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [isTransactionDialogOpen, setIsTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [isBulkTransactionDialogOpen, setIsBulkTransactionDialogOpen] = useState(false);\r\n  const [isCSVUploadDialogOpen, setIsCSVUploadDialogOpen] = useState(false);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditAccountDialogOpen, setIsEditAccountDialogOpen] = useState(false);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [todaysClosingBalance, setTodaysClosingBalance] = useState(0);\r\n  const [isLoadingBalance, setIsLoadingBalance] = useState(true);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n  const [presetTransactionType, setPresetTransactionType] = useState<'cash_in' | 'cash_out' | 'transfer'>('cash_in');\r\n\r\n  const [isSubmittingAccount, setIsSubmittingAccount] = useState(false);\r\n\r\n  const account = accounts.find(acc => acc.id === accountId);\r\n\r\n  // Store the current account ID and URL state in localStorage for navigation persistence\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const currentUrl = window.location.pathname + window.location.search;\r\n      localStorage.setItem('lastVisitedCashAccount', accountId);\r\n      localStorage.setItem('lastVisitedCashAccountUrl', currentUrl);\r\n    }\r\n  }, [accountId, searchParams]);\r\n\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const loadTodaysBalance = async () => {\r\n        setIsLoadingBalance(true);\r\n        try {\r\n          const summary = await getDailySummary(new Date(), accountId);\r\n          setTodaysClosingBalance(summary.closingBalance);\r\n        } finally {\r\n          setIsLoadingBalance(false);\r\n        }\r\n      };\r\n      loadTodaysBalance();\r\n    }\r\n  }, [accountId, getDailySummary, transactions]);\r\n\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    try {\r\n      await Promise.all([\r\n        refreshAccounts(),\r\n        refreshTransactions()\r\n      ]);\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error refreshing data:', error);\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const handleTransactionDeleted = async () => {\r\n    // Auto-refresh data after deletion\r\n    await Promise.all([\r\n      refreshTransactions(),\r\n      refreshAccounts()\r\n    ]);\r\n\r\n    // Refresh balance\r\n    if (accountId) {\r\n      setIsLoadingBalance(true);\r\n      const summary = await getDailySummary(new Date(), accountId);\r\n      setTodaysClosingBalance(summary.closingBalance);\r\n      setIsLoadingBalance(false);\r\n    }\r\n\r\n    // Force refresh of the DailyCashSummary component\r\n    setRefreshKey(prev => prev + 1);\r\n  };\r\n\r\n  const handleCreateTransaction = async (data: CashTransactionFormData) => {\r\n    try {\r\n      await createTransaction(data);\r\n      setIsTransactionDialogOpen(false);\r\n\r\n      // Auto-refresh data after creating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error creating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditTransaction = (transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleViewTransaction = (transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleUpdateTransaction = async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditAccount = async (data: CashAccountFormData) => {\r\n    setIsSubmittingAccount(true);\r\n    try {\r\n      if (accountId) {\r\n        await updateAccount(accountId, data);\r\n        setIsEditAccountDialogOpen(false);\r\n        // Refresh balance in case opening balance was changed\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating account:', error);\r\n    } finally {\r\n      setIsSubmittingAccount(false);\r\n    }\r\n  };\r\n\r\n  const handleQuickTransaction = (type: 'cash_in' | 'cash_out' | 'transfer') => {\r\n    setPresetTransactionType(type);\r\n    setIsTransactionDialogOpen(true);\r\n  };\r\n\r\n  if (businessLoading || !currentBusiness || isLoading || profilesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <LoadingSpinner message=\"Loading cash account details...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hasPermission('finance', 'view')) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircleIcon className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to view cash accounts.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/')} variant=\"outline\">\r\n            Back to Dashboard\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const canCreate = hasPermission('finance', 'create');\r\n  const canEdit = hasPermission('finance', 'edit');\r\n\r\n  if (!account) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Account not found</h2>\r\n          <Button onClick={() => navigate('/cash')}>\r\n            Back to Cash Accounts\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4 md:p-0\">\r\n      <CashTransactionDialog\r\n        open={isTransactionDialogOpen}\r\n        onOpenChange={setIsTransactionDialogOpen}\r\n        onSubmit={handleCreateTransaction}\r\n        accounts={accounts}\r\n        defaultAccountId={accountId}\r\n        presetTransactionType={presetTransactionType}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <CashAccountDialog\r\n        open={isEditAccountDialogOpen}\r\n        onOpenChange={setIsEditAccountDialogOpen}\r\n        onSubmit={handleEditAccount}\r\n        title=\"Edit Cash Account\"\r\n        initialData={{\r\n          name: account.name,\r\n          description: account.description || '',\r\n          openingBalance: account.openingBalance,\r\n          isDefault: account.isDefault\r\n        }}\r\n        isSubmitting={isSubmittingAccount}\r\n      />\r\n\r\n      <CashCSVUploadDialog\r\n        open={isCSVUploadDialogOpen}\r\n        onOpenChange={setIsCSVUploadDialogOpen}\r\n        accountId={accountId || ''}\r\n        onUploadComplete={() => {\r\n          setIsCSVUploadDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      <BulkTransactionAddTab\r\n        open={isBulkTransactionDialogOpen}\r\n        onOpenChange={setIsBulkTransactionDialogOpen}\r\n        accountId={accountId || ''}\r\n        onSuccess={() => {\r\n          setIsBulkTransactionDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      {/* Header Section */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size={isMobile ? \"sm\" : \"sm\"}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              // Clear the stored account when explicitly navigating back\r\n              localStorage.removeItem('lastVisitedCashAccount');\r\n              localStorage.removeItem('lastVisitedCashAccountUrl');\r\n              navigate('/cash');\r\n            }}\r\n            className=\"gap-2 px-2 md:px-3\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Back to Cash</span>\r\n            <span className=\"sm:hidden\">Back</span>\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <h1 className=\"text-2xl md:text-3xl font-bold break-words\">{account.name}</h1>\r\n          {account.description && (\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">{account.description}</p>\r\n          )}\r\n          <div className=\"text-lg md:text-xl font-semibold\">\r\n            {isLoadingBalance ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span>Current Balance:</span>\r\n                <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\r\n              </div>\r\n            ) : (\r\n              <span>Current Balance: {canManageFinanceAccounts ? formatCashAmount(todaysClosingBalance, settings.currency || 'USD') : ''}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex flex-wrap gap-2 sm:gap-3\">\r\n          {canEdit && (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => setIsEditAccountDialogOpen(true)}\r\n              className=\"gap-2 text-sm\"\r\n              size={isMobile ? \"sm\" : \"default\"}\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              Edit Account\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transaction Center */}\r\n      <Card className=\"border-none shadow-md overflow-hidden bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-950\">\r\n        <div className=\"p-4 sm:p-6 space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"space-y-1\">\r\n              <h3 className=\"text-lg font-bold tracking-tight\">Transaction Center</h3>\r\n              <p className=\"text-xs text-muted-foreground\">Manage your account entries efficiently</p>\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <Button\r\n                type=\"button\"\r\n                onClick={handleRefresh}\r\n                disabled={isRefreshing}\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Refresh Data\"\r\n              >\r\n                <RefreshCcw className={cn(\"h-4 w-4\", isRefreshing && \"animate-spin\")} />\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={generateTransactionCSVTemplate}\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Download CSV Template\"\r\n              >\r\n                <Download className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n            {/* Primary Action */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsTransactionDialogOpen(true)}\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 text-white shadow-lg border-none active:scale-[0.98] transition-all\",\r\n                canCreate ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-slate-400 cursor-not-allowed opacity-60\"\r\n              )}\r\n            >\r\n              <div className=\"bg-white/20 p-2 rounded-lg\">\r\n                <Plus className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">New Entry</span>\r\n                <span className=\"block text-[10px] opacity-80 font-medium\">Single Transaction</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* Bulk Entry */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsBulkTransactionDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10 hover:border-indigo-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600 dark:text-indigo-400\">\r\n                <LayoutGrid className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Bulk Entry</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Manual Batch</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* CSV Import */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsCSVUploadDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm col-span-1 sm:col-span-2 lg:col-span-1 active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10 hover:border-emerald-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-lg text-emerald-600 dark:text-emerald-400\">\r\n                <Upload className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Import CSV</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Process Legacy Logs</span>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Quick Access Shortcuts */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex items-center gap-2 px-1\">\r\n          <Zap className=\"h-4 w-4 text-amber-500 fill-amber-500\" />\r\n          <h4 className=\"text-sm font-bold uppercase tracking-wider text-slate-500\">Quick Shortcuts</h4>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_in')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-green-100 dark:border-green-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-green-50 dark:hover:bg-green-900/10 hover:border-green-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-green-100 dark:bg-green-900/30 p-1.5 rounded-md text-green-600\">\r\n                <ArrowUpRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-green-700 dark:text-green-400\">Cash In</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-green-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_out')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-red-100 dark:border-red-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-red-50 dark:hover:bg-red-900/10 hover:border-red-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-md text-red-600\">\r\n                <ArrowDownRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-red-700 dark:text-red-400\">Cash Out</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-red-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('transfer')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-blue-100 dark:border-blue-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:border-blue-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-md text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-blue-700 dark:text-blue-400\">Transfer</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Daily Summary */}\r\n      <DailyCashSummary key={refreshKey} accountId={accountId} />\r\n\r\n      {/* Transactions List */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">Recent Transactions</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={transactions}\r\n            accountId={accountId}\r\n            showAccountColumn={false}\r\n            onEditTransaction={handleEditTransaction}\r\n            onViewTransaction={handleViewTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashAccount;\r\n"],"names":[],"mappings":"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"}}]
}