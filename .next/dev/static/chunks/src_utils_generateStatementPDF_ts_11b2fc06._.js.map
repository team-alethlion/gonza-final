{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/generateStatementPDF.ts"],"sourcesContent":["\r\n\r\n\r\nexport interface StatementPDFOptions {\r\n  filename: string;\r\n  orientation?: 'portrait' | 'landscape';\r\n  format?: 'a4' | 'letter';\r\n  margins?: {\r\n    top: number;\r\n    right: number;\r\n    bottom: number;\r\n    left: number;\r\n  };\r\n  currency?: string;\r\n  customerName?: string;\r\n  businessName?: string;\r\n  businessAddress?: string;\r\n  businessPhone?: string;\r\n  businessEmail?: string;\r\n}\r\n\r\nexport interface StatementRow {\r\n  date: string;\r\n  details: string;\r\n  amount: number;\r\n  paid: number;\r\n  balance: number;\r\n}\r\n\r\n// Helper to format date as 'Nov 24th, 2025'\r\nfunction formatFriendlyDate(dateStr: string) {\r\n  const date = new Date(dateStr);\r\n  const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n  const day = date.getDate();\r\n  const daySuffix = (d: number) => {\r\n    if (d >= 11 && d <= 13) return 'th';\r\n    switch (d % 10) {\r\n      case 1: return 'st';\r\n      case 2: return 'nd';\r\n      case 3: return 'rd';\r\n      default: return 'th';\r\n    }\r\n  };\r\n  return `${months[date.getMonth()]} ${day}${daySuffix(day)}, ${date.getFullYear()}`;\r\n}\r\n\r\nexport const generateStatementPDF = async (\r\n  rows: StatementRow[],\r\n  options: StatementPDFOptions\r\n): Promise<void> => {\r\n\r\n  const {\r\n    filename,\r\n    orientation = 'portrait',\r\n    format = 'a4',\r\n    margins = { top: 15, right: 15, bottom: 15, left: 15 },\r\n    currency = '',\r\n    customerName = ''\r\n  } = options;\r\n\r\n  // Dynamically import jsPDF to avoid ReferenceError\r\n  const { jsPDF } = await import('jspdf');\r\n  const pdf = new jsPDF({ orientation, unit: 'mm', format, compress: true });\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  let y = margins.top;\r\n\r\n  // Header\r\n\r\n  pdf.setFontSize(14);\r\n  pdf.setTextColor(40, 53, 149);\r\n  pdf.text('Customer Statement', margins.left, y);\r\n  pdf.setFontSize(10);\r\n  pdf.setTextColor(60, 60, 60);\r\n  pdf.text(`Customer: ${customerName}`, margins.left, y + 6);\r\n  pdf.text(`Date: ${new Date().toLocaleDateString()}`, pageWidth - margins.right - 40, y + 6);\r\n  y += 14;\r\n\r\n  // Table header\r\n  pdf.setFontSize(11);\r\n  pdf.setTextColor(40, 53, 149);\r\n  const headers = ['Date', 'Details (Receipt/Invoice)', `Amount ${currency}`, `Balance ${currency}`];\r\n  const colWidths = [30, 85, 30, 30];\r\n  let x = margins.left;\r\n  headers.forEach((header, i) => {\r\n    pdf.text(header, x + 2, y);\r\n    x += colWidths[i];\r\n  });\r\n  y += 6;\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.line(margins.left, y, pageWidth - margins.right, y);\r\n  y += 2;\r\n\r\n  // Table rows\r\n  pdf.setFontSize(10);\r\n  pdf.setTextColor(30, 30, 30);\r\n  let totalAmountRowValue = 0, totalBalance = 0;\r\n  rows.forEach((row, idx) => {\r\n    x = margins.left;\r\n    pdf.setFillColor(idx % 2 === 0 ? 255 : 245, idx % 2 === 0 ? 255 : 248, idx % 2 === 0 ? 255 : 255);\r\n    pdf.rect(x, y - 4, contentWidth, 10, 'F');\r\n    pdf.text(formatFriendlyDate(row.date), x + 2, y + 2);\r\n    x += colWidths[0];\r\n    pdf.text(row.details, x + 2, y + 2, { maxWidth: colWidths[1] - 4 });\r\n    x += colWidths[1];\r\n\r\n    const isPayment = row.amount < 0;\r\n    if (isPayment) {\r\n      pdf.setTextColor(0, 128, 0); // Green for payments\r\n      pdf.text(`- ${Math.abs(row.amount).toLocaleString()}`, x + colWidths[2] - 2, y + 2, { align: 'right' });\r\n    } else {\r\n      pdf.setTextColor(30, 30, 30);\r\n      pdf.text(`${row.amount.toLocaleString()}`, x + colWidths[2] - 2, y + 2, { align: 'right' });\r\n    }\r\n\r\n    x += colWidths[2];\r\n    pdf.setTextColor(30, 30, 30);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(`${row.balance.toLocaleString()}`, x + colWidths[3] - 2, y + 2, { align: 'right' });\r\n    pdf.setFont('helvetica', 'normal');\r\n\r\n    totalAmountRowValue += row.amount;\r\n    totalBalance = row.balance; // Last row's balance is the final balance\r\n    y += 10;\r\n\r\n    // Reset text color for next row\r\n    pdf.setTextColor(30, 30, 30);\r\n\r\n    // Page break if needed\r\n    if (y > pageHeight - margins.bottom - 20) {\r\n      pdf.addPage();\r\n      y = margins.top;\r\n\r\n      // Re-draw header on new page? (Simple version, just continue)\r\n    }\r\n  });\r\n\r\n  // Table footer (totals)\r\n  pdf.setFontSize(11);\r\n  pdf.setTextColor(40, 53, 149);\r\n  x = margins.left;\r\n  pdf.setFillColor(230, 240, 255);\r\n  pdf.rect(x, y - 4, contentWidth, 7, 'F');\r\n  pdf.text(`FINAL BALANCE ${currency}`, x + colWidths[0] + colWidths[1] - 2, y, { align: 'right' });\r\n  x += colWidths[0] + colWidths[1];\r\n\r\n  // Empty space for \"Amount\" column in footer or show net?\r\n  x += colWidths[2];\r\n\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(`${totalBalance.toLocaleString()}`, x + colWidths[3] - 2, y, { align: 'right' });\r\n  pdf.setFont('helvetica', 'normal');\r\n  y += 10;\r\n\r\n  // Footer\r\n  pdf.setFontSize(10);\r\n  pdf.setTextColor(120, 120, 120);\r\n  pdf.text('Thank you for your business!', margins.left, pageHeight - margins.bottom - 8);\r\n  pdf.setFontSize(8);\r\n  pdf.setTextColor(150, 150, 150);\r\n  pdf.text('Generated by Gonza System', pageWidth / 2, pageHeight - 8, { align: 'center' });\r\n\r\n  pdf.save(filename);\r\n};\r\n"],"names":[],"mappings":"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"}}]
}