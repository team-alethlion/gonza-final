{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/EmptySalesState.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileText } from 'lucide-react';\r\n\r\nconst EmptySalesState: React.FC = () => {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"text-center py-12 bg-white rounded-lg shadow-md p-8\">\r\n      <div className=\"flex flex-col items-center gap-4\">\r\n        <div className=\"bg-slate-100 rounded-full p-4 w-16 h-16 flex items-center justify-center\">\r\n          <FileText className=\"h-8 w-8 text-slate-400\" />\r\n        </div>\r\n        <h3 className=\"text-xl font-semibold\">No sales records found</h3>\r\n        <p className=\"text-gray-500 mb-4\">\r\n          Create your first sale to start tracking your business performance\r\n        </p>\r\n        <Button onClick={() => router.push('/new-sale')} className=\"mt-2\">\r\n          Create Your First Sale\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptySalesState;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;AAEA,MAAM,kBAA4B;IAChC,MAAM,SAAS,IAAA,+IAAS;IAExB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,0NAAQ;wBAAC,WAAU;;;;;;;;;;;8BAEtB,8OAAC;oBAAG,WAAU;8BAAwB;;;;;;8BACtC,8OAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAGlC,8OAAC,4IAAM;oBAAC,SAAS,IAAM,OAAO,IAAI,CAAC;oBAAc,WAAU;8BAAO;;;;;;;;;;;;;;;;;AAM1E;uCAEe"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesTableSkeleton.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nconst SalesTableSkeleton = () => (\r\n  <div className=\"bg-white rounded-lg shadow-sm border border-border/50\">\r\n    <div className=\"p-4 sm:p-6 border-b border-border/50\">\r\n      <div className=\"flex flex-col gap-4\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          <div>\r\n            <div className=\"h-8 bg-gray-200 rounded w-48 animate-pulse\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-32 mt-2 animate-pulse\"></div>\r\n          </div>\r\n          <div className=\"h-10 bg-gray-200 rounded w-32 animate-pulse\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"p-4 sm:p-6\">\r\n      <div className=\"space-y-4\">\r\n        {[...Array(3)].map((_, i) => (\r\n          <div key={i} className=\"h-16 bg-gray-100 rounded animate-pulse\"></div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default SalesTableSkeleton;"],"names":[],"mappings":";;;;;;AAEA,MAAM,qBAAqB,kBACzB,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;0CAEjB,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAIrB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACZ;2BAAI,MAAM;qBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,8OAAC;4BAAY,WAAU;2BAAb;;;;;;;;;;;;;;;;;;;;;uCAOL"}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/NoBusinessState.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nconst NoBusinessState: React.FC = () => {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"p-6 text-center\">\r\n      <div className=\"bg-amber-50 border border-amber-200 p-4 rounded-md\">\r\n        <p className=\"text-amber-800 mb-4\">\r\n          No business location found. Please create a business location to manage sales.\r\n        </p>\r\n        <button\r\n          onClick={() => router.push('/business-management')}\r\n          className=\"bg-amber-600 text-white px-4 py-2 rounded hover:bg-amber-700\"\r\n        >\r\n          Manage Business Locations\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoBusinessState;"],"names":[],"mappings":";;;;;AACA;;;AAEA,MAAM,kBAA4B;IAChC,MAAM,SAAS,IAAA,+IAAS;IAExB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAAsB;;;;;;8BAGnC,8OAAC;oBACC,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;uCAEe"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/TableActions.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileDown, FileText, Plus } from 'lucide-react';\r\nimport { exportToCSV } from '@/utils/exportToCSV';\r\nimport { generateSalesReportVectorPDF } from '@/utils/generateSalesReportVectorPDF';\r\nimport { Sale } from '@/types';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { format } from 'date-fns';\r\nimport { getDateRangeFromFilter } from '@/utils/dateFilters';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\n\r\ninterface TableActionsProps {\r\n  filteredSales: Sale[];\r\n  allSales: Sale[];\r\n  currency: string;\r\n  dateFilter?: string;\r\n  dateRange?: { from: Date | undefined; to: Date | undefined };\r\n  specificDate?: Date;\r\n}\r\n\r\nconst TableActions: React.FC<TableActionsProps> = ({\r\n  filteredSales,\r\n  allSales,\r\n  currency,\r\n  dateFilter = 'all',\r\n  dateRange,\r\n  specificDate\r\n}) => {\r\n  const router = useRouter();\r\n  const { toast } = useToast();\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n\r\n  const handleExportCSV = () => {\r\n    exportToCSV(filteredSales.length > 0 ? filteredSales : allSales);\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    try {\r\n      const salesToExport = filteredSales.length > 0 ? filteredSales : allSales;\r\n\r\n      // Transform Sale objects to SaleData format expected by the PDF generator\r\n      const salesData = salesToExport.map(sale => {\r\n        // Calculate total amount with discounts and tax\r\n        const subtotal = sale.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n        const totalDiscounts = sale.items.reduce((sum, item) => sum + (item.discountAmount || 0), 0);\r\n        const netAmount = subtotal - totalDiscounts;\r\n        const totalAmount = netAmount * (1 + (sale.taxRate || 0) / 100);\r\n\r\n        return {\r\n          receipt_number: sale.receiptNumber,\r\n          customer_name: sale.customerName,\r\n          total_amount: totalAmount,\r\n          payment_status: sale.paymentStatus.toLowerCase(),\r\n          created_at: sale.date.toISOString(),\r\n          sale_date: sale.date.toISOString().split('T')[0],\r\n          items: sale.items.map(item => ({\r\n            product_name: item.description,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            total: item.price * item.quantity,\r\n            discount_amount: item.discountAmount || 0,\r\n            discount_percentage: item.discountPercentage || 0,\r\n            discount_type: item.discountType || undefined\r\n          }))\r\n        };\r\n      });\r\n\r\n      // Calculate actual date range for PDF - ensure we have valid dates\r\n      let actualDateRange: { from: Date | undefined; to: Date | undefined };\r\n\r\n      if (specificDate) {\r\n        // For specific date, use that date for both from and to\r\n        actualDateRange = { from: specificDate, to: specificDate };\r\n      } else if (dateRange?.from && dateRange?.to) {\r\n        // For custom range, use the provided range\r\n        actualDateRange = dateRange;\r\n      } else if (dateFilter && dateFilter !== 'all') {\r\n        // For predefined filters, get the actual date range\r\n        const range = getDateRangeFromFilter(dateFilter);\r\n        actualDateRange = range;\r\n      } else {\r\n        // For \"all\" filter, determine date range from actual sales data\r\n        if (salesToExport.length > 0) {\r\n          const dates = salesToExport.map(sale => sale.date);\r\n          const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n          const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n          actualDateRange = { from: earliestDate, to: latestDate };\r\n        } else {\r\n          // Fallback to current date if no sales\r\n          const today = new Date();\r\n          actualDateRange = { from: today, to: today };\r\n        }\r\n      }\r\n\r\n      generateSalesReportVectorPDF(\r\n        salesData,\r\n        'Current Period',\r\n        currency,\r\n        actualDateRange,\r\n        {\r\n          businessName: settings.businessName,\r\n          businessAddress: settings.businessAddress,\r\n          businessPhone: settings.businessPhone,\r\n          businessEmail: settings.businessEmail\r\n        }\r\n      );\r\n\r\n      toast({\r\n        title: \"Report Generated\",\r\n        description: \"PDF sales report has been created successfully.\",\r\n      });\r\n    } catch (error) {\r\n      console.error('Error generating PDF report:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to generate PDF report. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3 w-full\">\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <Button\r\n          onClick={handleExportCSV}\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          className=\"gap-2 h-12 text-sm border-border/50 font-medium\"\r\n        >\r\n          <FileDown className=\"h-4 w-4 shrink-0\" />\r\n          CSV\r\n        </Button>\r\n        <Button\r\n          onClick={handleExportPDF}\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          className=\"gap-2 h-12 text-sm border-border/50 font-medium\"\r\n        >\r\n          <FileText className=\"h-4 w-4 shrink-0\" />\r\n          PDF\r\n        </Button>\r\n      </div>\r\n      {hasPermission('sales', 'create') && (\r\n        <Button\r\n          onClick={() => router.push('/new-sale')}\r\n          size=\"lg\"\r\n          className=\"w-full gap-2 h-12 text-sm font-medium\"\r\n        >\r\n          <Plus className=\"h-4 w-4 shrink-0\" />\r\n          New Sale\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableActions;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,yHAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 632, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/calendar.tsx"],"sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { DayPicker } from \"react-day-picker\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3 pointer-events-auto\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        caption_dropdowns: \"flex justify-center gap-1\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        dropdown: \"bg-background rounded-md border p-1 shadow-md\",\r\n        dropdown_month: \"w-[var(--rdp-caption-dropdown-month-width)]\",\r\n        dropdown_year: \"w-[var(--rdp-caption-dropdown-year-width)]\",\r\n        dropdown_icon: \"w-4 h-4\",\r\n        button_reset: \"appearance-none bg-transparent border-none p-0 m-0\",\r\n        vhidden: \"sr-only\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nCalendar.displayName = \"Calendar\";\r\n\r\nexport { Calendar };\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAEA;AACA;;;;;;AAIA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,8OAAC,2KAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,yHAAE,EAAC,2BAA2B;QACzC,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,mBAAmB;YACnB,KAAK;YACL,YAAY,IAAA,yHAAE,EACZ,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,yHAAE,EACL,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,UAAU;YACV,gBAAgB;YAChB,eAAe;YACf,eAAe;YACf,cAAc;YACd,SAAS;YACT,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,GAAG,QAAQ,iBAAK,8OAAC,mOAAW;oBAAC,WAAU;;;;;;YACpD,WAAW,CAAC,EAAE,GAAG,QAAQ,iBAAK,8OAAC,sOAAY;oBAAC,WAAU;;;;;;QACxD;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/DateRangeFilter.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar as CalendarIcon } from \"lucide-react\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface DateRangeFilterProps {\r\n  dateRange: { from: Date | undefined; to: Date | undefined; };\r\n  onDateRangeChange: (range: { from: Date | undefined; to: Date | undefined; }) => void;\r\n}\r\n\r\nconst DateRangeFilter: React.FC<DateRangeFilterProps> = ({\r\n  dateRange,\r\n  onDateRangeChange\r\n}) => {\r\n  // Improved event prevention that doesn't interfere with the button click\r\n  const preventPropagation = (e: React.MouseEvent | React.TouchEvent) => {\r\n    e.stopPropagation();\r\n  };\r\n  \r\n  return (\r\n    <div \r\n      className=\"flex items-center space-x-2\"\r\n      onClick={preventPropagation}\r\n    >\r\n      <Popover>\r\n        <PopoverTrigger asChild>\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal\"\r\n          >\r\n            <CalendarIcon className=\"h-4 w-4\" />\r\n            <span>{dateRange.from ? format(dateRange.from, \"MMM d, yyyy\") : \"Start Date\"}</span>\r\n          </Button>\r\n        </PopoverTrigger>\r\n        <PopoverContent className=\"w-auto p-0 z-[100] bg-white shadow-lg\" align=\"start\">\r\n          <Calendar\r\n            initialFocus\r\n            mode=\"single\"\r\n            defaultMonth={dateRange?.from}\r\n            selected={dateRange?.from}\r\n            onSelect={(date) => onDateRangeChange({ ...dateRange, from: date })}\r\n            className=\"p-3 pointer-events-auto\"\r\n            showOutsideDays={true}\r\n          />\r\n        </PopoverContent>\r\n      </Popover>\r\n      \r\n      <span className=\"text-muted-foreground\">to</span>\r\n      \r\n      <Popover>\r\n        <PopoverTrigger asChild>\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal\"\r\n          >\r\n            <CalendarIcon className=\"h-4 w-4\" />\r\n            <span>{dateRange.to ? format(dateRange.to, \"MMM d, yyyy\") : \"End Date\"}</span>\r\n          </Button>\r\n        </PopoverTrigger>\r\n        <PopoverContent className=\"w-auto p-0 z-[100] bg-white shadow-lg\" align=\"start\">\r\n          <Calendar\r\n            initialFocus\r\n            mode=\"single\"\r\n            defaultMonth={dateRange?.to}\r\n            selected={dateRange?.to}\r\n            onSelect={(date) => onDateRangeChange({ ...dateRange, to: date })}\r\n            className=\"p-3 pointer-events-auto\"\r\n            showOutsideDays={true}\r\n          />\r\n        </PopoverContent>\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DateRangeFilter;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;;;;;;;AAOA,MAAM,kBAAkD,CAAC,EACvD,SAAS,EACT,iBAAiB,EAClB;IACC,yEAAyE;IACzE,MAAM,qBAAqB,CAAC;QAC1B,EAAE,eAAe;IACnB;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,SAAS;;0BAET,8OAAC,8IAAO;;kCACN,8OAAC,qJAAc;wBAAC,OAAO;kCACrB,cAAA,8OAAC,4IAAM;4BACL,SAAQ;4BACR,WAAU;;8CAEV,8OAAC,sNAAY;oCAAC,WAAU;;;;;;8CACxB,8OAAC;8CAAM,UAAU,IAAI,GAAG,IAAA,+JAAM,EAAC,UAAU,IAAI,EAAE,iBAAiB;;;;;;;;;;;;;;;;;kCAGpE,8OAAC,qJAAc;wBAAC,WAAU;wBAAwC,OAAM;kCACtE,cAAA,8OAAC,gJAAQ;4BACP,YAAY;4BACZ,MAAK;4BACL,cAAc,WAAW;4BACzB,UAAU,WAAW;4BACrB,UAAU,CAAC,OAAS,kBAAkB;oCAAE,GAAG,SAAS;oCAAE,MAAM;gCAAK;4BACjE,WAAU;4BACV,iBAAiB;;;;;;;;;;;;;;;;;0BAKvB,8OAAC;gBAAK,WAAU;0BAAwB;;;;;;0BAExC,8OAAC,8IAAO;;kCACN,8OAAC,qJAAc;wBAAC,OAAO;kCACrB,cAAA,8OAAC,4IAAM;4BACL,SAAQ;4BACR,WAAU;;8CAEV,8OAAC,sNAAY;oCAAC,WAAU;;;;;;8CACxB,8OAAC;8CAAM,UAAU,EAAE,GAAG,IAAA,+JAAM,EAAC,UAAU,EAAE,EAAE,iBAAiB;;;;;;;;;;;;;;;;;kCAGhE,8OAAC,qJAAc;wBAAC,WAAU;wBAAwC,OAAM;kCACtE,cAAA,8OAAC,gJAAQ;4BACP,YAAY;4BACZ,MAAK;4BACL,cAAc,WAAW;4BACzB,UAAU,WAAW;4BACrB,UAAU,CAAC,OAAS,kBAAkB;oCAAE,GAAG,SAAS;oCAAE,IAAI;gCAAK;4BAC/D,WAAU;4BACV,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAM7B;uCAEe"}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesTableFilters.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar as CalendarIcon } from \"lucide-react\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { format } from \"date-fns\";\r\nimport { Search, Filter, Tag } from 'lucide-react';\r\nimport DateRangeFilter from './DateRangeFilter';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\n\r\ninterface SalesTableFiltersProps {\r\n  searchQuery: string;\r\n  setSearchQuery: (query: string) => void;\r\n  paymentFilter: string;\r\n  setPaymentFilter: (filter: string) => void;\r\n  cashTransactionFilter: string;\r\n  setCashTransactionFilter: (filter: string) => void;\r\n  categoryFilter: string;\r\n  setCategoryFilter: (filter: string) => void;\r\n  dateFilter: string;\r\n  setDateFilter: (filter: string) => void;\r\n  dateRange: { from: Date | undefined; to: Date | undefined; };\r\n  setDateRange: (range: { from: Date | undefined; to: Date | undefined; }) => void;\r\n  specificDate: Date | undefined;\r\n  setSpecificDate: (date: Date | undefined) => void;\r\n  isCustomRange: boolean;\r\n  isSpecificDate: boolean;\r\n  sortOrder?: string;\r\n  setSortOrder?: (order: string) => void;\r\n}\r\n\r\nconst SalesTableFilters: React.FC<SalesTableFiltersProps> = ({\r\n  searchQuery,\r\n  setSearchQuery,\r\n  paymentFilter,\r\n  setPaymentFilter,\r\n  cashTransactionFilter,\r\n  setCashTransactionFilter,\r\n  categoryFilter,\r\n  setCategoryFilter,\r\n  dateFilter,\r\n  setDateFilter,\r\n  dateRange,\r\n  setDateRange,\r\n  specificDate,\r\n  setSpecificDate,\r\n  isCustomRange,\r\n  isSpecificDate,\r\n  sortOrder = 'desc',\r\n  setSortOrder\r\n}) => {\r\n  const { categories } = useSalesCategories();\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handleDateFilterChange = (value: string) => {\r\n    setDateFilter(value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-6 space-y-4\">\r\n      <div className=\"grid grid-cols-1 gap-4\">\r\n        {/* Search Input - Full Width */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search by customer, item, or receipt number...\"\r\n            className=\"pl-10 bg-white border-border/50 focus:border-primary h-10\"\r\n            value={searchQuery}\r\n            onChange={handleSearchChange}\r\n          />\r\n        </div>\r\n\r\n        {/* Filter Row */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-4 gap-3\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={paymentFilter} onValueChange={setPaymentFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Payment Status\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Payment Statuses</SelectItem>\r\n                <SelectItem value=\"Paid\">Paid</SelectItem>\r\n                <SelectItem value=\"NOT PAID\">NOT PAID</SelectItem>\r\n                <SelectItem value=\"Quote\">Quote</SelectItem>\r\n                <SelectItem value=\"Installment Sale\">Installment Sale</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={cashTransactionFilter} onValueChange={setCashTransactionFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Cash Transaction\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Sales</SelectItem>\r\n                <SelectItem value=\"linked\">Linked to Cash</SelectItem>\r\n                <SelectItem value=\"unlinked\">Not Linked to Cash</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Tag className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Category\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Categories</SelectItem>\r\n                <SelectItem value=\"none\">No Source</SelectItem>\r\n                {categories.map((category) => (\r\n                  <SelectItem key={category.id} value={category.id}>\r\n                    {category.name}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <CalendarIcon className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={dateFilter} onValueChange={handleDateFilterChange}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Date Range\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"today\">Today</SelectItem>\r\n                <SelectItem value=\"yesterday\">Yesterday</SelectItem>\r\n                <SelectItem value=\"this-week\">This Week</SelectItem>\r\n                <SelectItem value=\"last-week\">Last Week</SelectItem>\r\n                <SelectItem value=\"this-month\">This Month</SelectItem>\r\n                <SelectItem value=\"last-month\">Last Month</SelectItem>\r\n                <SelectItem value=\"this-year\">This Year</SelectItem>\r\n                <SelectItem value=\"specific\">Specific Date</SelectItem>\r\n                <SelectItem value=\"custom\">Custom Range</SelectItem>\r\n                <SelectItem value=\"all\">All Time</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isSpecificDate && (\r\n        <div className=\"pt-2 pb-1 border-t border-border/20\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal\"\r\n                >\r\n                  <CalendarIcon className=\"h-4 w-4\" />\r\n                  <span>{specificDate ? format(specificDate, \"MMM d, yyyy\") : \"Select Date\"}</span>\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0 z-[100] bg-white shadow-lg\" align=\"start\">\r\n                <Calendar\r\n                  initialFocus\r\n                  mode=\"single\"\r\n                  defaultMonth={specificDate}\r\n                  selected={specificDate}\r\n                  onSelect={setSpecificDate}\r\n                  className=\"p-3 pointer-events-auto\"\r\n                  showOutsideDays={true}\r\n                />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {isCustomRange && (\r\n        <div className=\"pt-2 pb-1 border-t border-border/20\">\r\n          <DateRangeFilter \r\n            dateRange={dateRange}\r\n            onDateRangeChange={setDateRange}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesTableFilters;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;AAuBA,MAAM,oBAAsD,CAAC,EAC3D,WAAW,EACX,cAAc,EACd,aAAa,EACb,gBAAgB,EAChB,qBAAqB,EACrB,wBAAwB,EACxB,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,aAAa,EACb,SAAS,EACT,YAAY,EACZ,YAAY,EACZ,eAAe,EACf,aAAa,EACb,cAAc,EACd,YAAY,MAAM,EAClB,YAAY,EACb;IACC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,wJAAkB;IACzC,MAAM,qBAAqB,CAAC;QAC1B,eAAe,EAAE,MAAM,CAAC,KAAK;IAC/B;IAEA,MAAM,yBAAyB,CAAC;QAC9B,cAAc;IAChB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC,0IAAK;gCACJ,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU;;;;;;;;;;;;kCAKd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,gNAAM;4CAAC,WAAU;;;;;;;;;;;kDAEpB,8OAAC,4IAAM;wCAAC,OAAO;wCAAe,eAAe;;0DAC3C,8OAAC,mJAAa;gDAAC,WAAU;0DACvB,cAAA,8OAAC,iJAAW;oDAAC,aAAY;;;;;;;;;;;0DAE3B,8OAAC,mJAAa;gDAAC,WAAU;;kEACvB,8OAAC,gJAAU;wDAAC,OAAM;kEAAM;;;;;;kEACxB,8OAAC,gJAAU;wDAAC,OAAM;kEAAO;;;;;;kEACzB,8OAAC,gJAAU;wDAAC,OAAM;kEAAW;;;;;;kEAC7B,8OAAC,gJAAU;wDAAC,OAAM;kEAAQ;;;;;;kEAC1B,8OAAC,gJAAU;wDAAC,OAAM;kEAAmB;;;;;;;;;;;;;;;;;;;;;;;;0CAK3C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,gNAAM;4CAAC,WAAU;;;;;;;;;;;kDAEpB,8OAAC,4IAAM;wCAAC,OAAO;wCAAuB,eAAe;;0DACnD,8OAAC,mJAAa;gDAAC,WAAU;0DACvB,cAAA,8OAAC,iJAAW;oDAAC,aAAY;;;;;;;;;;;0DAE3B,8OAAC,mJAAa;gDAAC,WAAU;;kEACvB,8OAAC,gJAAU;wDAAC,OAAM;kEAAM;;;;;;kEACxB,8OAAC,gJAAU;wDAAC,OAAM;kEAAS;;;;;;kEAC3B,8OAAC,gJAAU;wDAAC,OAAM;kEAAW;;;;;;;;;;;;;;;;;;;;;;;;0CAKnC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,uMAAG;4CAAC,WAAU;;;;;;;;;;;kDAEjB,8OAAC,4IAAM;wCAAC,OAAO;wCAAgB,eAAe;;0DAC5C,8OAAC,mJAAa;gDAAC,WAAU;0DACvB,cAAA,8OAAC,iJAAW;oDAAC,aAAY;;;;;;;;;;;0DAE3B,8OAAC,mJAAa;gDAAC,WAAU;;kEACvB,8OAAC,gJAAU;wDAAC,OAAM;kEAAM;;;;;;kEACxB,8OAAC,gJAAU;wDAAC,OAAM;kEAAO;;;;;;oDACxB,WAAW,GAAG,CAAC,CAAC,yBACf,8OAAC,gJAAU;4DAAmB,OAAO,SAAS,EAAE;sEAC7C,SAAS,IAAI;2DADC,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;;0CAQpC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,sNAAY;4CAAC,WAAU;;;;;;;;;;;kDAE1B,8OAAC,4IAAM;wCAAC,OAAO;wCAAY,eAAe;;0DACxC,8OAAC,mJAAa;gDAAC,WAAU;0DACvB,cAAA,8OAAC,iJAAW;oDAAC,aAAY;;;;;;;;;;;0DAE3B,8OAAC,mJAAa;gDAAC,WAAU;;kEACvB,8OAAC,gJAAU;wDAAC,OAAM;kEAAQ;;;;;;kEAC1B,8OAAC,gJAAU;wDAAC,OAAM;kEAAY;;;;;;kEAC9B,8OAAC,gJAAU;wDAAC,OAAM;kEAAY;;;;;;kEAC9B,8OAAC,gJAAU;wDAAC,OAAM;kEAAY;;;;;;kEAC9B,8OAAC,gJAAU;wDAAC,OAAM;kEAAa;;;;;;kEAC/B,8OAAC,gJAAU;wDAAC,OAAM;kEAAa;;;;;;kEAC/B,8OAAC,gJAAU;wDAAC,OAAM;kEAAY;;;;;;kEAC9B,8OAAC,gJAAU;wDAAC,OAAM;kEAAW;;;;;;kEAC7B,8OAAC,gJAAU;wDAAC,OAAM;kEAAS;;;;;;kEAC3B,8OAAC,gJAAU;wDAAC,OAAM;kEAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOjC,gCACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,8IAAO;;0CACN,8OAAC,qJAAc;gCAAC,OAAO;0CACrB,cAAA,8OAAC,4IAAM;oCACL,SAAQ;oCACR,WAAU;;sDAEV,8OAAC,sNAAY;4CAAC,WAAU;;;;;;sDACxB,8OAAC;sDAAM,eAAe,IAAA,+JAAM,EAAC,cAAc,iBAAiB;;;;;;;;;;;;;;;;;0CAGhE,8OAAC,qJAAc;gCAAC,WAAU;gCAAwC,OAAM;0CACtE,cAAA,8OAAC,gJAAQ;oCACP,YAAY;oCACZ,MAAK;oCACL,cAAc;oCACd,UAAU;oCACV,UAAU;oCACV,WAAU;oCACV,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQ5B,+BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,yJAAe;oBACd,WAAW;oBACX,mBAAmB;;;;;;;;;;;;;;;;;AAM/B;uCAEe"}},
    {"offset": {"line": 1462, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n        warning:\r\n          \"border-transparent bg-amber-500 text-white hover:bg-amber-600\",\r\n        success:\r\n          \"border-transparent bg-green-600 text-white hover:bg-green-700\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 1506, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesTableRow.tsx"],"sourcesContent":["import React from 'react';\r\nimport { format } from 'date-fns';\r\nimport { TableRow, TableCell } from '@/components/ui/table';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Printer, Edit, Trash2, FileText, Heart, MessageSquare } from 'lucide-react';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { Sale } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { canSendSMS } from '@/utils/smsUtils';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface SalesTableRowProps {\r\n  sale: Sale;\r\n  currency: string;\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  onSendPaymentReminder?: (sale: Sale) => void;\r\n  onSendThankYouNotice?: (sale: Sale) => void;\r\n  onSendPaymentReminderSMS?: (sale: Sale) => void;\r\n  onSendThankYouSMS?: (sale: Sale) => void;\r\n}\r\n\r\nconst SalesTableRow: React.FC<SalesTableRowProps> = ({\r\n  sale,\r\n  currency,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  onSendPaymentReminder,\r\n  onSendThankYouNotice,\r\n  onSendPaymentReminderSMS,\r\n  onSendThankYouSMS\r\n}) => {\r\n  const { accounts } = useCashAccounts();\r\n  const { transactions } = useCashTransactions();\r\n  const isMobile = useIsMobile();\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n  const { hasPermission } = useProfiles();\r\n  const { formatFinancial, canViewCostPrice, canViewProfit } = useFinancialVisibility();\r\n\r\n  const totalQuantity = sale.items.reduce((total, item) => total + item.quantity, 0);\r\n  const totalItemsPrice = sale.items.reduce((total, item) => total + item.price, 0);\r\n  const averagePrice = totalQuantity > 0 ? totalItemsPrice / sale.items.length : 0;\r\n\r\n  // Calculate subtotal from items with discount considerations\r\n  const subtotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Calculate total discount amount\r\n  const totalDiscount = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n\r\n  // Calculate tax amount based on subtotal and tax rate\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotal * (taxRate / 100);\r\n\r\n  // Total including tax\r\n  const saleTotal = subtotal + taxAmount;\r\n\r\n  // Calculate total cost\r\n  const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n  // Improved cash account name resolution with better logging\r\n  const getCashAccountName = () => {\r\n    if (!sale.cashTransactionId) {\r\n      console.log('No cash transaction ID for sale:', sale.id);\r\n      return null;\r\n    }\r\n\r\n    console.log('Looking for transaction with ID:', sale.cashTransactionId);\r\n    console.log('Available transactions count:', transactions.length);\r\n\r\n    // Find the transaction linked to this sale\r\n    const linkedTransaction = transactions.find(transaction => transaction.id === sale.cashTransactionId);\r\n    if (!linkedTransaction) {\r\n      console.log('No linked transaction found for sale:', sale.id, 'transaction ID:', sale.cashTransactionId);\r\n      console.log('All transaction IDs:', transactions.map(t => t.id));\r\n      return null;\r\n    }\r\n\r\n    console.log('Found linked transaction:', linkedTransaction);\r\n\r\n    if (!linkedTransaction.accountId) {\r\n      console.log('Linked transaction has no accountId:', linkedTransaction);\r\n      return null;\r\n    }\r\n\r\n    // Find the account linked to the transaction\r\n    const linkedAccount = accounts.find(account => account.id === linkedTransaction.accountId);\r\n    if (!linkedAccount) {\r\n      console.log('No linked account found for accountId:', linkedTransaction.accountId);\r\n      console.log('Available accounts:', accounts.map(a => ({ id: a.id, name: a.name })));\r\n      return null;\r\n    }\r\n\r\n    console.log('Successfully resolved cash account:', linkedAccount.name);\r\n    return linkedAccount.name;\r\n  };\r\n\r\n  let itemsDescription = \"No items\";\r\n  if (sale.items && Array.isArray(sale.items) && sale.items.length > 0) {\r\n    itemsDescription = sale.items[0].description;\r\n    if (sale.items.length > 1) {\r\n      itemsDescription += ` (+${sale.items.length - 1} more)`;\r\n    }\r\n  }\r\n\r\n  const cashAccountName = getCashAccountName();\r\n\r\n  // Determine display status\r\n  const getDisplayStatus = () => {\r\n    if (sale.paymentStatus === 'Installment Sale') {\r\n      return 'Installment';\r\n    }\r\n    return sale.paymentStatus;\r\n  };\r\n\r\n  // Get status styling\r\n  const getStatusStyling = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'Quote':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'Installment Sale':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'bg-yellow-100 text-yellow-800';\r\n    }\r\n  };\r\n\r\n  // Calculate actual amounts for installment sales based on payment history\r\n  const actualAmountPaid = sale.paymentStatus === 'Installment Sale'\r\n    ? payments.reduce((sum, payment) => sum + payment.amount, 0)\r\n    : sale.amountPaid || 0;\r\n\r\n  const actualAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, saleTotal - actualAmountPaid)\r\n    : sale.amountDue || 0;\r\n\r\n  // Check if this is a credit sale that needs payment reminder (exclude installment sales)\r\n  const isCreditSale = sale.paymentStatus === 'NOT PAID';\r\n\r\n  // Check if this is an installment sale with outstanding balance\r\n  const isInstallmentWithDue = sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0;\r\n\r\n  // Create a customer-like object for SMS checking\r\n  const customerForSMS = {\r\n    phoneNumber: sale.customerContact || null\r\n  };\r\n\r\n  const canSendSMSToCustomer = canSendSMS(customerForSMS);\r\n  const showSMSOptions = isMobile && canSendSMSToCustomer;\r\n\r\n  return (\r\n    <TableRow\r\n      className=\"cursor-pointer hover:bg-gray-50\"\r\n      onClick={() => onViewReceipt(sale)}\r\n    >\r\n      <TableCell className=\"font-medium\">\r\n        {format(new Date(sale.date), 'dd/MM/yyyy')}\r\n      </TableCell>\r\n      <TableCell>{sale.receiptNumber}</TableCell>\r\n      <TableCell>\r\n        <div className=\"space-y-1\">\r\n          <div>{sale.customerName}</div>\r\n          {cashAccountName && (\r\n            <Badge variant=\"outline\" className=\"text-xs bg-green-50 text-green-700 border-green-200\">\r\n              {cashAccountName}\r\n            </Badge>\r\n          )}\r\n          {sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0 && (\r\n            <Badge variant=\"outline\" className=\"text-xs bg-red-50 text-red-700 border-red-200\">\r\n              Due: {currency} {formatNumber(actualAmountDue)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <span className=\"line-clamp-1 cursor-help\">\r\n              {itemsDescription}\r\n            </span>\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"top\" className=\"max-w-xs\">\r\n            <div className=\"space-y-1\">\r\n              <p className=\"font-bold break-words whitespace-normal\">{itemsDescription}</p>\r\n            </div>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">{totalQuantity}</TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {currency} {formatNumber(averagePrice)}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {totalDiscount > 0 ? (\r\n          <span className=\"text-orange-600\">\r\n            -{currency} {formatNumber(totalDiscount)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"text-gray-400\">-</span>\r\n        )}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {canViewCostPrice ? `${currency} ${formatFinancial(totalCost, 'cost')}` : ''}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        <span className=\"text-green-600 font-medium\">\r\n          {canViewProfit ? `${currency} ${formatNumber(saleTotal - totalCost)}` : ''}\r\n        </span>\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {currency} {formatNumber(saleTotal)}\r\n        {sale.paymentStatus === 'Installment Sale' && actualAmountPaid > 0 && (\r\n          <div className=\"text-xs text-green-600\">\r\n            Paid: {currency} {formatNumber(actualAmountPaid)}\r\n          </div>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <span\r\n          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusStyling()}`}\r\n        >\r\n          {getDisplayStatus()}\r\n        </span>\r\n      </TableCell>\r\n      <TableCell onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"flex justify-end gap-1\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onViewReceipt(sale);\r\n            }}\r\n          >\r\n            <Printer className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">View Receipt</span>\r\n          </Button>\r\n\r\n          {isCreditSale && onSendPaymentReminder && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminder(sale);\r\n              }}\r\n              className=\"text-orange-600 hover:text-orange-700 hover:bg-orange-50\"\r\n              title=\"Send Payment Reminder\"\r\n            >\r\n              <FileText className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Payment Reminder</span>\r\n            </Button>\r\n          )}\r\n\r\n          {isInstallmentWithDue && onSendPaymentReminder && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminder(sale);\r\n              }}\r\n              className=\"text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\r\n              title=\"Send Due Payment Reminder\"\r\n            >\r\n              <FileText className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Due Payment Reminder</span>\r\n            </Button>\r\n          )}\r\n\r\n          {isCreditSale && showSMSOptions && onSendPaymentReminderSMS && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminderSMS(sale);\r\n              }}\r\n              className=\"text-orange-600 hover:text-orange-700 hover:bg-orange-50\"\r\n              title=\"Send Payment Reminder SMS\"\r\n            >\r\n              <MessageSquare className=\"h-3 w-3\" />\r\n              <span className=\"sr-only\">Send Payment Reminder SMS</span>\r\n            </Button>\r\n          )}\r\n\r\n          {onSendThankYouNotice && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendThankYouNotice(sale);\r\n              }}\r\n              className=\"text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n              title=\"Send Thank You Notice\"\r\n            >\r\n              <Heart className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Thank You Notice</span>\r\n            </Button>\r\n          )}\r\n\r\n          {showSMSOptions && onSendThankYouSMS && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendThankYouSMS(sale);\r\n              }}\r\n              className=\"text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n              title=\"Send Thank You SMS\"\r\n            >\r\n              <MessageSquare className=\"h-3 w-3\" />\r\n              <span className=\"sr-only\">Send Thank You SMS</span>\r\n            </Button>\r\n          )}\r\n\r\n          {hasPermission('sales', 'edit') && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onEditSale(sale);\r\n              }}\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Edit Sale</span>\r\n            </Button>\r\n          )}\r\n          {hasPermission('sales', 'delete') && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onDeleteSale(sale);\r\n              }}\r\n            >\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Delete Sale</span>\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nexport default SalesTableRow;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/pagination.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\r\n  <nav\r\n    role=\"navigation\"\r\n    aria-label=\"pagination\"\r\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\r\n    {...props}\r\n  />\r\n)\r\nPagination.displayName = \"Pagination\"\r\n\r\nconst PaginationContent = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    className={cn(\"flex flex-row items-center gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nPaginationContent.displayName = \"PaginationContent\"\r\n\r\nconst PaginationItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li ref={ref} className={cn(\"\", className)} {...props} />\r\n))\r\nPaginationItem.displayName = \"PaginationItem\"\r\n\r\ntype PaginationLinkProps = {\r\n  isActive?: boolean\r\n} & Pick<ButtonProps, \"size\"> &\r\n  React.ComponentProps<\"a\">\r\n\r\nconst PaginationLink = ({\r\n  className,\r\n  isActive,\r\n  size = \"icon\",\r\n  ...props\r\n}: PaginationLinkProps) => (\r\n  <a\r\n    aria-current={isActive ? \"page\" : undefined}\r\n    className={cn(\r\n      buttonVariants({\r\n        variant: isActive ? \"outline\" : \"ghost\",\r\n        size,\r\n      }),\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nPaginationLink.displayName = \"PaginationLink\"\r\n\r\nconst PaginationPrevious = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to previous page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pl-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronLeft className=\"h-4 w-4\" />\r\n    <span>Previous</span>\r\n  </PaginationLink>\r\n)\r\nPaginationPrevious.displayName = \"PaginationPrevious\"\r\n\r\nconst PaginationNext = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to next page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pr-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <span>Next</span>\r\n    <ChevronRight className=\"h-4 w-4\" />\r\n  </PaginationLink>\r\n)\r\nPaginationNext.displayName = \"PaginationNext\"\r\n\r\nconst PaginationEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    aria-hidden\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More pages</span>\r\n  </span>\r\n)\r\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\r\n\r\nexport {\r\n  Pagination,\r\n  PaginationContent,\r\n  PaginationEllipsis,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  PaginationNext,\r\n  PaginationPrevious,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAEA;AACA;;;;;;AAEA,MAAM,aAAa,CAAC,EAAE,SAAS,EAAE,GAAG,OAAoC,iBACtE,8OAAC;QACC,MAAK;QACL,cAAW;QACX,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,oCAAoC;QACjD,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAG,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,IAAI;QAAa,GAAG,KAAK;;;;;;AAEvD,eAAe,WAAW,GAAG;AAO7B,MAAM,iBAAiB,CAAC,EACtB,SAAS,EACT,QAAQ,EACR,OAAO,MAAM,EACb,GAAG,OACiB,iBACpB,8OAAC;QACC,gBAAc,WAAW,SAAS;QAClC,WAAW,IAAA,yHAAE,EACX,IAAA,oJAAc,EAAC;YACb,SAAS,WAAW,YAAY;YAChC;QACF,IACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG;AAE7B,MAAM,qBAAqB,CAAC,EAC1B,SAAS,EACT,GAAG,OACyC,iBAC5C,8OAAC;QACC,cAAW;QACX,MAAK;QACL,WAAW,IAAA,yHAAE,EAAC,gBAAgB;QAC7B,GAAG,KAAK;;0BAET,8OAAC,mOAAW;gBAAC,WAAU;;;;;;0BACvB,8OAAC;0BAAK;;;;;;;;;;;;AAGV,mBAAmB,WAAW,GAAG;AAEjC,MAAM,iBAAiB,CAAC,EACtB,SAAS,EACT,GAAG,OACyC,iBAC5C,8OAAC;QACC,cAAW;QACX,MAAK;QACL,WAAW,IAAA,yHAAE,EAAC,gBAAgB;QAC7B,GAAG,KAAK;;0BAET,8OAAC;0BAAK;;;;;;0BACN,8OAAC,sOAAY;gBAAC,WAAU;;;;;;;;;;;;AAG5B,eAAe,WAAW,GAAG;AAE7B,MAAM,qBAAqB,CAAC,EAC1B,SAAS,EACT,GAAG,OAC0B,iBAC7B,8OAAC;QACC,aAAW;QACX,WAAW,IAAA,yHAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;0BAET,8OAAC,kOAAc;gBAAC,WAAU;;;;;;0BAC1B,8OAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAG9B,mBAAmB,WAAW,GAAG"}},
    {"offset": {"line": 2302, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesTablePagination.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { \r\n  Pagination,\r\n  PaginationContent,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  PaginationNext,\r\n  PaginationPrevious\r\n} from '@/components/ui/pagination';\r\n\r\ninterface SalesTablePaginationProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nconst SalesTablePagination: React.FC<SalesTablePaginationProps> = ({\r\n  currentPage,\r\n  totalPages,\r\n  onPageChange\r\n}) => {\r\n  // Generate array of page numbers to display\r\n  const pageNumbers = [];\r\n  const maxPagesToShow = 3; // Reduced for better mobile experience\r\n  \r\n  if (totalPages <= maxPagesToShow) {\r\n    // Show all pages if less than max\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      pageNumbers.push(i);\r\n    }\r\n  } else {\r\n    // Always show first page\r\n    pageNumbers.push(1);\r\n    \r\n    // Calculate start and end of page range around current\r\n    let start = Math.max(2, currentPage - 1);\r\n    let end = Math.min(totalPages - 1, currentPage + 1);\r\n    \r\n    // Adjust range to show max pages\r\n    if (end - start + 1 < maxPagesToShow - 2) {\r\n      if (currentPage < totalPages / 2) {\r\n        end = Math.min(totalPages - 1, start + maxPagesToShow - 3);\r\n      } else {\r\n        start = Math.max(2, end - maxPagesToShow + 3);\r\n      }\r\n    }\r\n    \r\n    // Add ellipsis if needed\r\n    if (start > 2) {\r\n      pageNumbers.push('...');\r\n    }\r\n    \r\n    // Add pages in range\r\n    for (let i = start; i <= end; i++) {\r\n      pageNumbers.push(i);\r\n    }\r\n    \r\n    // Add ellipsis if needed\r\n    if (end < totalPages - 1) {\r\n      pageNumbers.push('...');\r\n    }\r\n    \r\n    // Always show last page\r\n    pageNumbers.push(totalPages);\r\n  }\r\n  \r\n  if (totalPages <= 1) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <div className=\"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-4\">\r\n      <div className=\"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1\">\r\n        Page {currentPage} of {totalPages}\r\n      </div>\r\n      \r\n      <Pagination className=\"mx-0 order-1 sm:order-2\">\r\n        <PaginationContent className=\"gap-1\">\r\n          <PaginationItem>\r\n            <PaginationPrevious\r\n              onClick={() => onPageChange(Math.max(1, currentPage - 1))}\r\n              className={`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${currentPage === 1 ? 'pointer-events-none opacity-50' : 'cursor-pointer'}`}\r\n            />\r\n          </PaginationItem>\r\n          \r\n          {pageNumbers.map((page, index) => (\r\n            <PaginationItem key={index} className=\"hidden sm:block\">\r\n              {page === '...' ? (\r\n                <span className=\"px-3 py-2 text-sm\">...</span>\r\n              ) : (\r\n                <PaginationLink\r\n                  isActive={currentPage === page}\r\n                  onClick={() => onPageChange(Number(page))}\r\n                  className=\"h-8 sm:h-9 w-8 sm:w-9 text-xs sm:text-sm\"\r\n                >\r\n                  {page}\r\n                </PaginationLink>\r\n              )}\r\n            </PaginationItem>\r\n          ))}\r\n          \r\n          {/* Mobile: Show current page number */}\r\n          <PaginationItem className=\"sm:hidden\">\r\n            <span className=\"h-8 w-8 flex items-center justify-center text-xs font-medium\">\r\n              {currentPage}\r\n            </span>\r\n          </PaginationItem>\r\n          \r\n          <PaginationItem>\r\n            <PaginationNext\r\n              onClick={() => onPageChange(Math.min(totalPages, currentPage + 1))}\r\n              className={`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${currentPage === totalPages ? 'pointer-events-none opacity-50' : 'cursor-pointer'}`}\r\n            />\r\n          </PaginationItem>\r\n        </PaginationContent>\r\n      </Pagination>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesTablePagination;\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAeA,MAAM,uBAA4D,CAAC,EACjE,WAAW,EACX,UAAU,EACV,YAAY,EACb;IACC,4CAA4C;IAC5C,MAAM,cAAc,EAAE;IACtB,MAAM,iBAAiB,GAAG,uCAAuC;IAEjE,IAAI,cAAc,gBAAgB;QAChC,kCAAkC;QAClC,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK;YACpC,YAAY,IAAI,CAAC;QACnB;IACF,OAAO;QACL,yBAAyB;QACzB,YAAY,IAAI,CAAC;QAEjB,uDAAuD;QACvD,IAAI,QAAQ,KAAK,GAAG,CAAC,GAAG,cAAc;QACtC,IAAI,MAAM,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc;QAEjD,iCAAiC;QACjC,IAAI,MAAM,QAAQ,IAAI,iBAAiB,GAAG;YACxC,IAAI,cAAc,aAAa,GAAG;gBAChC,MAAM,KAAK,GAAG,CAAC,aAAa,GAAG,QAAQ,iBAAiB;YAC1D,OAAO;gBACL,QAAQ,KAAK,GAAG,CAAC,GAAG,MAAM,iBAAiB;YAC7C;QACF;QAEA,yBAAyB;QACzB,IAAI,QAAQ,GAAG;YACb,YAAY,IAAI,CAAC;QACnB;QAEA,qBAAqB;QACrB,IAAK,IAAI,IAAI,OAAO,KAAK,KAAK,IAAK;YACjC,YAAY,IAAI,CAAC;QACnB;QAEA,yBAAyB;QACzB,IAAI,MAAM,aAAa,GAAG;YACxB,YAAY,IAAI,CAAC;QACnB;QAEA,wBAAwB;QACxB,YAAY,IAAI,CAAC;IACnB;IAEA,IAAI,cAAc,GAAG;QACnB,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBAA8D;oBACrE;oBAAY;oBAAK;;;;;;;0BAGzB,8OAAC,oJAAU;gBAAC,WAAU;0BACpB,cAAA,8OAAC,2JAAiB;oBAAC,WAAU;;sCAC3B,8OAAC,wJAAc;sCACb,cAAA,8OAAC,4JAAkB;gCACjB,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,GAAG,cAAc;gCACtD,WAAW,CAAC,2CAA2C,EAAE,gBAAgB,IAAI,mCAAmC,kBAAkB;;;;;;;;;;;wBAIrI,YAAY,GAAG,CAAC,CAAC,MAAM,sBACtB,8OAAC,wJAAc;gCAAa,WAAU;0CACnC,SAAS,sBACR,8OAAC;oCAAK,WAAU;8CAAoB;;;;;6FAEpC,8OAAC,wJAAc;oCACb,UAAU,gBAAgB;oCAC1B,SAAS,IAAM,aAAa,OAAO;oCACnC,WAAU;8CAET;;;;;;+BATc;;;;;sCAgBvB,8OAAC,wJAAc;4BAAC,WAAU;sCACxB,cAAA,8OAAC;gCAAK,WAAU;0CACb;;;;;;;;;;;sCAIL,8OAAC,wJAAc;sCACb,cAAA,8OAAC,wJAAc;gCACb,SAAS,IAAM,aAAa,KAAK,GAAG,CAAC,YAAY,cAAc;gCAC/D,WAAW,CAAC,2CAA2C,EAAE,gBAAgB,aAAa,mCAAmC,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzJ;uCAEe"}},
    {"offset": {"line": 2462, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,IAAA,oJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,IAAA,oJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2597, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/DeleteSaleDialog.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { \r\n  AlertDialog, \r\n  AlertDialogContent, \r\n  AlertDialogHeader, \r\n  AlertDialogTitle, \r\n  AlertDialogDescription, \r\n  AlertDialogFooter, \r\n  AlertDialogCancel, \r\n  AlertDialogAction \r\n} from '@/components/ui/alert-dialog';\r\n\r\ninterface DeleteSaleDialogProps {\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: () => Promise<void>;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nconst DeleteSaleDialog: React.FC<DeleteSaleDialogProps> = ({ \r\n  isOpen, \r\n  onOpenChange, \r\n  onConfirm,\r\n  isDeleting = false\r\n}) => {\r\n  return (\r\n    <AlertDialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Are you sure?</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            This action cannot be undone. This will permanently delete this sale record.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={onConfirm} \r\n            disabled={isDeleting}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90 disabled:opacity-50\"\r\n          >\r\n            {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n\r\nexport default DeleteSaleDialog;\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAkBA,MAAM,mBAAoD,CAAC,EACzD,MAAM,EACN,YAAY,EACZ,SAAS,EACT,aAAa,KAAK,EACnB;IACC,qBACE,8OAAC,0JAAW;QAAC,MAAM;QAAQ,cAAc;kBACvC,cAAA,8OAAC,iKAAkB;;8BACjB,8OAAC,gKAAiB;;sCAChB,8OAAC,+JAAgB;sCAAC;;;;;;sCAClB,8OAAC,qKAAsB;sCAAC;;;;;;;;;;;;8BAI1B,8OAAC,gKAAiB;;sCAChB,8OAAC,gKAAiB;4BAAC,UAAU;sCAAY;;;;;;sCACzC,8OAAC,gKAAiB;4BAChB,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,aAAa,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAM1C;uCAEe"}},
    {"offset": {"line": 2676, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 2703, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/customers/NoticeTemplateSelector.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { NoticeTemplate, noticeTemplates } from '@/utils/noticeTemplates';\r\n\r\ninterface NoticeTemplateSelectorProps {\r\n  selectedTemplate: string;\r\n  onTemplateChange: (templateId: string) => void;\r\n  onTemplateSelect: (template: NoticeTemplate) => void;\r\n}\r\n\r\nconst NoticeTemplateSelector: React.FC<NoticeTemplateSelectorProps> = ({\r\n  selectedTemplate,\r\n  onTemplateChange,\r\n  onTemplateSelect\r\n}) => {\r\n  const handleTemplateChange = (templateId: string) => {\r\n    onTemplateChange(templateId);\r\n    if (templateId === 'none') {\r\n      // Clear template selection\r\n      return;\r\n    }\r\n    const template = noticeTemplates.find(t => t.id === templateId);\r\n    if (template) {\r\n      onTemplateSelect(template);\r\n    }\r\n  };\r\n\r\n  const getCategoryColor = (category: string) => {\r\n    const colors = {\r\n      payment: 'bg-red-50 text-red-700 border-red-200',\r\n      policy: 'bg-blue-50 text-blue-700 border-blue-200',\r\n      general: 'bg-gray-50 text-gray-700 border-gray-200',\r\n      announcement: 'bg-green-50 text-green-700 border-green-200',\r\n      gratitude: 'bg-purple-50 text-purple-700 border-purple-200'\r\n    };\r\n    return colors[category as keyof typeof colors] || colors.general;\r\n  };\r\n\r\n  // Type guard to ensure we have a valid array\r\n  const templates = Array.isArray(noticeTemplates) ? noticeTemplates : [];\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"text-sm font-medium text-gray-700\">\r\n        Choose a Template (Optional)\r\n      </label>\r\n      <Select value={selectedTemplate} onValueChange={handleTemplateChange}>\r\n        <SelectTrigger className=\"w-full\">\r\n          <SelectValue placeholder=\"Select a notice template or start from scratch\" />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"max-h-80\">\r\n          <SelectItem value=\"none\">Start from scratch</SelectItem>\r\n          {templates.length > 0 && templates.map((template) => (\r\n            <SelectItem key={template.id} value={template.id}>\r\n              <div className=\"flex items-center justify-between w-full\">\r\n                <span className=\"font-medium\">{template.name}</span>\r\n                <Badge \r\n                  variant=\"outline\" \r\n                  className={`ml-2 text-xs ${getCategoryColor(template.category)}`}\r\n                >\r\n                  {template.category}\r\n                </Badge>\r\n              </div>\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n      \r\n      {selectedTemplate && selectedTemplate !== 'none' && (\r\n        <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            <strong>Template selected:</strong> {templates.find(t => t.id === selectedTemplate)?.name}\r\n          </p>\r\n          <p className=\"text-xs text-blue-600 mt-1\">\r\n            The template content has been added to your message. You can edit it as needed.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoticeTemplateSelector;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;AAQA,MAAM,yBAAgE,CAAC,EACrE,gBAAgB,EAChB,gBAAgB,EAChB,gBAAgB,EACjB;IACC,MAAM,uBAAuB,CAAC;QAC5B,iBAAiB;QACjB,IAAI,eAAe,QAAQ;YACzB,2BAA2B;YAC3B;QACF;QACA,MAAM,WAAW,kJAAe,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACpD,IAAI,UAAU;YACZ,iBAAiB;QACnB;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,SAAS;YACb,SAAS;YACT,QAAQ;YACR,SAAS;YACT,cAAc;YACd,WAAW;QACb;QACA,OAAO,MAAM,CAAC,SAAgC,IAAI,OAAO,OAAO;IAClE;IAEA,6CAA6C;IAC7C,MAAM,YAAY,MAAM,OAAO,CAAC,kJAAe,IAAI,kJAAe,GAAG,EAAE;IAEvE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;0BAAoC;;;;;;0BAGrD,8OAAC,4IAAM;gBAAC,OAAO;gBAAkB,eAAe;;kCAC9C,8OAAC,mJAAa;wBAAC,WAAU;kCACvB,cAAA,8OAAC,iJAAW;4BAAC,aAAY;;;;;;;;;;;kCAE3B,8OAAC,mJAAa;wBAAC,WAAU;;0CACvB,8OAAC,gJAAU;gCAAC,OAAM;0CAAO;;;;;;4BACxB,UAAU,MAAM,GAAG,KAAK,UAAU,GAAG,CAAC,CAAC,yBACtC,8OAAC,gJAAU;oCAAmB,OAAO,SAAS,EAAE;8CAC9C,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAe,SAAS,IAAI;;;;;;0DAC5C,8OAAC,0IAAK;gDACJ,SAAQ;gDACR,WAAW,CAAC,aAAa,EAAE,iBAAiB,SAAS,QAAQ,GAAG;0DAE/D,SAAS,QAAQ;;;;;;;;;;;;mCAPP,SAAS,EAAE;;;;;;;;;;;;;;;;;YAejC,oBAAoB,qBAAqB,wBACxC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAA2B;4BAAE,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,mBAAmB;;;;;;;kCAEvF,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;;;;;;;AAOpD;uCAEe"}},
    {"offset": {"line": 2871, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/customers/BusinessNoticeGenerator.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { FileText, Wand2, Download, AlertCircle, MessageSquare } from 'lucide-react';\r\nimport { Customer, Sale } from '@/types';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { generateNoticePDF } from '@/utils/generateNoticePDF';\r\nimport { formalizeText, enhanceForBusiness } from '@/utils/formalizeText';\r\nimport { NoticeTemplate, getTemplateById } from '@/utils/noticeTemplates';\r\nimport { openSMSApp, formatMessageForSMS, canSendSMS, openWhatsApp } from '@/utils/smsUtils';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { MessageCircle } from 'lucide-react';\r\nimport NoticeTemplateSelector from './NoticeTemplateSelector';\r\n\r\ninterface BusinessNoticeGeneratorProps {\r\n  customer: Customer;\r\n  open: boolean;\r\n  onClose: () => void;\r\n  defaultTemplate?: string;\r\n  sale?: Sale;\r\n}\r\n\r\nconst BusinessNoticeGenerator: React.FC<BusinessNoticeGeneratorProps> = ({\r\n  customer,\r\n  open,\r\n  onClose,\r\n  defaultTemplate,\r\n  sale\r\n}) => {\r\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('none');\r\n  const [subject, setSubject] = useState<string>('');\r\n  const [message, setMessage] = useState<string>('');\r\n  const [senderName, setSenderName] = useState<string>('');\r\n  const [isGenerating, setIsGenerating] = useState<boolean>(false);\r\n  const [showPreview, setShowPreview] = useState<boolean>(false);\r\n\r\n  const { settings } = useBusinessSettings();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  // Load default template when dialog opens\r\n  useEffect(() => {\r\n    if (open && defaultTemplate) {\r\n      const template = getTemplateById(defaultTemplate);\r\n      if (template) {\r\n        setSelectedTemplate(defaultTemplate);\r\n        setSubject(template.subject);\r\n\r\n        // If it's a thank you template and we have sale data, enhance the content\r\n        if (defaultTemplate === 'thank_you' && sale) {\r\n          const saleTotal = sale.items.reduce((total, item) => {\r\n            const itemSubtotal = item.price * item.quantity;\r\n            const discountAmount = item.discountType === 'amount'\r\n              ? (item.discountAmount || 0)\r\n              : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n            return total + (itemSubtotal - discountAmount);\r\n          }, 0);\r\n\r\n          // Add tax if applicable\r\n          const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n          const totalWithTax = saleTotal + taxAmount;\r\n\r\n          // Create items list\r\n          const itemsList = sale.items.map(item =>\r\n            ` ${item.description} (Qty: ${item.quantity})`\r\n          ).join('\\n');\r\n\r\n          const enhancedContent = `${template.content}\r\n\r\nReceipt Number: ${sale.receiptNumber}\r\n\r\nItems Purchased:\r\n${itemsList}\r\n\r\nTotal Amount: ${settings.currency} ${totalWithTax.toFixed(2)}\r\n\r\nIn case of any inquiries please call ${settings.businessPhone && settings.businessPhone !== '(123) 456-7890' ? settings.businessPhone : 'our office'}.\r\n\r\nWe appreciate your business and look forward to serving you again.`;\r\n\r\n          setMessage(enhancedContent);\r\n        } else {\r\n          setMessage(template.content);\r\n        }\r\n      }\r\n    }\r\n  }, [open, defaultTemplate, sale, settings.currency, settings.businessPhone]);\r\n\r\n  const handleTemplateSelect = (template: NoticeTemplate) => {\r\n    setSubject(template.subject);\r\n    setMessage(template.content);\r\n  };\r\n\r\n  const handleMakeFormal = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"No message to enhance\",\r\n        description: \"Please enter your message first.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const enhanced = enhanceForBusiness(message);\r\n      setMessage(enhanced);\r\n\r\n      toast({\r\n        title: \"Message enhanced!\",\r\n        description: \"Your message has been made more formal and professional.\",\r\n      });\r\n    } catch (error) {\r\n      console.error('Error enhancing message:', error);\r\n      toast({\r\n        title: \"Enhancement failed\",\r\n        description: \"Could not enhance the message. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleGeneratePDF = async () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before generating the notice.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n\r\n    try {\r\n      await generateNoticePDF(\r\n        {\r\n          customer,\r\n          subject: subject || 'Business Notice',\r\n          content: message,\r\n          senderName: senderName || undefined\r\n        },\r\n        settings\r\n      );\r\n\r\n      toast({\r\n        title: \"Notice generated successfully!\",\r\n        description: \"Your professional business notice has been downloaded as a PDF.\",\r\n      });\r\n\r\n      // Reset form after successful generation\r\n      setMessage('');\r\n      setSubject('');\r\n      setSelectedTemplate('none');\r\n      setSenderName('');\r\n      onClose();\r\n\r\n    } catch (error) {\r\n      console.error('Error generating notice:', error);\r\n      toast({\r\n        title: \"Generation failed\",\r\n        description: \"Failed to generate the notice. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMessage('');\r\n    setSubject('');\r\n    setSelectedTemplate('none');\r\n    setSenderName('');\r\n    setShowPreview(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleSendSMS = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before sending SMS.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!canSendSMS(customer)) {\r\n      toast({\r\n        title: \"Phone number required\",\r\n        description: \"Customer phone number is not available.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Format the message for SMS\r\n      const fullMessage = `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`;\r\n\r\n      const formattedMessage = formatMessageForSMS(fullMessage, settings.businessName);\r\n\r\n      openSMSApp({\r\n        phoneNumber: customer.phoneNumber!,\r\n        message: formattedMessage\r\n      });\r\n\r\n      toast({\r\n        title: \"SMS app opened\",\r\n        description: \"Your message has been prepared in the SMS app.\",\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error sending SMS:', error);\r\n      toast({\r\n        title: \"SMS failed\",\r\n        description: \"Failed to open SMS app. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const showSMSOption = isMobile && canSendSMS(customer);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-base sm:text-lg\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            Send Notice to {customer.fullName}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2\">\r\n          {/* Compose Section */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h3 className=\"text-base sm:text-lg font-semibold mb-3\">Compose Your Notice</h3>\r\n\r\n              {/* Template Selector */}\r\n              <NoticeTemplateSelector\r\n                selectedTemplate={selectedTemplate}\r\n                onTemplateChange={setSelectedTemplate}\r\n                onTemplateSelect={handleTemplateSelect}\r\n              />\r\n            </div>\r\n\r\n            {/* Subject */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"subject\" className=\"text-sm\">Subject Line</Label>\r\n              <Input\r\n                id=\"subject\"\r\n                value={subject}\r\n                onChange={(e) => setSubject(e.target.value)}\r\n                placeholder=\"Enter the subject of your notice\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label htmlFor=\"message\" className=\"text-sm\">Your Message</Label>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleMakeFormal}\r\n                  className=\"text-[10px] h-7 px-2\"\r\n                  disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                >\r\n                  <Wand2 className=\"h-3 w-3 mr-1\" />\r\n                  Make Formal\r\n                </Button>\r\n              </div>\r\n              <Textarea\r\n                id=\"message\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"What do you want to inform the customer about?\"\r\n                rows={isMobile ? 6 : 8}\r\n                className=\"resize-none text-sm\"\r\n              />\r\n              <p className=\"text-[10px] text-gray-500 leading-tight\">\r\n                {selectedTemplate !== 'none' ? 'Template content loaded. Edit as needed.' : 'Write in your own words - we\\'ll format it professionally.'}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Sender Name */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"sender\" className=\"text-sm\">Sender Name (Optional)</Label>\r\n              <Input\r\n                id=\"sender\"\r\n                value={senderName}\r\n                onChange={(e) => setSenderName(e.target.value)}\r\n                placeholder=\"Your name (defaults to business name)\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Business Settings Alert */}\r\n            {(!settings.businessLogo || !settings.signature) && (\r\n              <Card className=\"border-amber-200 bg-amber-50\">\r\n                <CardContent className=\"p-3\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <AlertCircle className=\"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                    <div className=\"text-[11px] sm:text-xs\">\r\n                      <p className=\"text-amber-800 font-medium\">Enhance your notices</p>\r\n                      <p className=\"text-amber-700\">\r\n                        {!settings.businessLogo && 'Add logo '}\r\n                        {(!settings.businessLogo && !settings.signature) && 'and '}\r\n                        {!settings.signature && 'upload signature '}\r\n                        in settings for better notices.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n\r\n          {/* Preview Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold\">Preview</h3>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setShowPreview(!showPreview)}\r\n                className=\"h-8 text-xs\"\r\n              >\r\n                {showPreview ? 'Hide' : 'Show'} Preview\r\n              </Button>\r\n            </div>\r\n\r\n            {showPreview && (\r\n              <Card className=\"border-gray-200 shadow-sm\">\r\n                <CardContent className=\"p-4 overflow-x-hidden\">\r\n                  <div className=\"space-y-3 text-[11px] sm:text-sm\">\r\n                    {/* Header */}\r\n                    <div className=\"border-b pb-2\">\r\n                      <div className=\"font-bold text-sm sm:text-base\">{settings.businessName || 'Your Business'}</div>\r\n                      <div className=\"text-gray-600 space-y-0.5\">\r\n                        {settings.businessAddress && <div className=\"truncate\">{settings.businessAddress}</div>}\r\n                        {settings.businessPhone && <div>Phone: {settings.businessPhone}</div>}\r\n                        {settings.businessEmail && <div className=\"truncate\">Email: {settings.businessEmail}</div>}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Date and Customer */}\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                      <div>Date: {new Date().toLocaleDateString()}</div>\r\n                      <div className=\"font-medium truncate\">{customer.fullName}</div>\r\n                    </div>\r\n\r\n                    {/* Subject */}\r\n                    {subject && (\r\n                      <div className=\"bg-gray-50 p-2 rounded\">\r\n                        <strong>Re: {subject}</strong>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Content */}\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"italic\">Dear {customer.fullName},</div>\r\n                      <div className=\"whitespace-pre-wrap leading-relaxed text-gray-800\">\r\n                        {message || 'Your message will appear here...'}\r\n                      </div>\r\n                      <div>Yours faithfully,</div>\r\n                      <div className=\"mt-4 font-bold\">\r\n                        {senderName || settings.businessName || 'Management'}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions - Responsive Footer */}\r\n        <div className=\"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t mt-2\">\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            <Button variant=\"outline\" onClick={handleClose} className=\"flex-1 sm:flex-none h-10 text-sm\">\r\n              Cancel\r\n            </Button>\r\n            {canSendSMS(customer) && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  openWhatsApp({\r\n                    phoneNumber: customer.phoneNumber!,\r\n                    message: `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`\r\n                  });\r\n                  toast({\r\n                    title: \"WhatsApp opened\",\r\n                    description: \"Your message has been prepared in WhatsApp.\",\r\n                  });\r\n                }}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-green-600 hover:text-green-700 hover:bg-green-50 h-10 text-sm\"\r\n              >\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n                WhatsApp\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            {showSMSOption && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSendSMS}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-10 text-sm\"\r\n              >\r\n                <MessageSquare className=\"h-4 w-4\" />\r\n                SMS\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={handleGeneratePDF}\r\n              disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...' || isGenerating}\r\n              className=\"flex-1 sm:flex-none gap-2 h-10 text-sm\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n              {isGenerating ? 'PDF...' : 'PDF'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BusinessNoticeGenerator;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAUA,MAAM,0BAAkE,CAAC,EACvE,QAAQ,EACR,IAAI,EACJ,OAAO,EACP,eAAe,EACf,IAAI,EACL;IACC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAS;IACjE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAS;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAS;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAS;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAU;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAU;IAExD,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,0JAAmB;IACxC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wIAAQ;IAC1B,MAAM,WAAW,IAAA,6IAAW;IAE5B,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACR,IAAI,QAAQ,iBAAiB;YAC3B,MAAM,WAAW,IAAA,kJAAe,EAAC;YACjC,IAAI,UAAU;gBACZ,oBAAoB;gBACpB,WAAW,SAAS,OAAO;gBAE3B,0EAA0E;gBAC1E,IAAI,oBAAoB,eAAe,MAAM;oBAC3C,MAAM,YAAY,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO;wBAC1C,MAAM,eAAe,KAAK,KAAK,GAAG,KAAK,QAAQ;wBAC/C,MAAM,iBAAiB,KAAK,YAAY,KAAK,WACxC,KAAK,cAAc,IAAI,IACxB,AAAC,eAAe,CAAC,KAAK,kBAAkB,IAAI,CAAC,IAAK;wBACtD,OAAO,QAAQ,CAAC,eAAe,cAAc;oBAC/C,GAAG;oBAEH,wBAAwB;oBACxB,MAAM,YAAY,YAAY,CAAC,CAAC,KAAK,OAAO,IAAI,CAAC,IAAI,GAAG;oBACxD,MAAM,eAAe,YAAY;oBAEjC,oBAAoB;oBACpB,MAAM,YAAY,KAAK,KAAK,CAAC,GAAG,CAAC,CAAA,OAC/B,CAAC,EAAE,EAAE,KAAK,WAAW,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAC/C,IAAI,CAAC;oBAEP,MAAM,kBAAkB,GAAG,SAAS,OAAO,CAAC;;gBAEtC,EAAE,KAAK,aAAa,CAAC;;;AAGrC,EAAE,UAAU;;cAEE,EAAE,SAAS,QAAQ,CAAC,CAAC,EAAE,aAAa,OAAO,CAAC,GAAG;;qCAExB,EAAE,SAAS,aAAa,IAAI,SAAS,aAAa,KAAK,mBAAmB,SAAS,aAAa,GAAG,aAAa;;kEAEnF,CAAC;oBAEzD,WAAW;gBACb,OAAO;oBACL,WAAW,SAAS,OAAO;gBAC7B;YACF;QACF;IACF,GAAG;QAAC;QAAM;QAAiB;QAAM,SAAS,QAAQ;QAAE,SAAS,aAAa;KAAC;IAE3E,MAAM,uBAAuB,CAAC;QAC5B,WAAW,SAAS,OAAO;QAC3B,WAAW,SAAS,OAAO;IAC7B;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY,uCAAuC;YACpH,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI;YACF,MAAM,WAAW,IAAA,mJAAkB,EAAC;YACpC,WAAW;YAEX,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;QACF;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY,uCAAuC;YACpH,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,gBAAgB;QAEhB,IAAI;YACF,MAAM,IAAA,sJAAiB,EACrB;gBACE;gBACA,SAAS,WAAW;gBACpB,SAAS;gBACT,YAAY,cAAc;YAC5B,GACA;YAGF,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YAEA,yCAAyC;YACzC,WAAW;YACX,WAAW;YACX,oBAAoB;YACpB,cAAc;YACd;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;QACF,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,cAAc;QAClB,WAAW;QACX,WAAW;QACX,oBAAoB;QACpB,cAAc;QACd,eAAe;QACf;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY,uCAAuC;YACpH,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI,CAAC,IAAA,sIAAU,EAAC,WAAW;YACzB,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QAEA,IAAI;YACF,6BAA6B;YAC7B,MAAM,cAAc,GAAG,UAAU,UAAU,SAAS,GAAG,KAAK,EAAE,SAAS,QAAQ,CAAC,KAAK,EAAE,QAAQ,uBAAuB,EAAE,cAAc,SAAS,YAAY,IAAI,cAAc;YAE7K,MAAM,mBAAmB,IAAA,+IAAmB,EAAC,aAAa,SAAS,YAAY;YAE/E,IAAA,sIAAU,EAAC;gBACT,aAAa,SAAS,WAAW;gBACjC,SAAS;YACX;YAEA,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;QACF;IACF;IAEA,MAAM,gBAAgB,YAAY,IAAA,sIAAU,EAAC;IAE7C,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;8BACX,cAAA,8OAAC,iJAAW;wBAAC,WAAU;;0CACrB,8OAAC,0NAAQ;gCAAC,WAAU;;;;;;4BAAY;4BAChB,SAAS,QAAQ;;;;;;;;;;;;8BAIrC,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAA0C;;;;;;sDAGxD,8OAAC,oKAAsB;4CACrB,kBAAkB;4CAClB,kBAAkB;4CAClB,kBAAkB;;;;;;;;;;;;8CAKtB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,0IAAK;4CAAC,SAAQ;4CAAU,WAAU;sDAAU;;;;;;sDAC7C,8OAAC,0IAAK;4CACJ,IAAG;4CACH,OAAO;4CACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4CAC1C,aAAY;4CACZ,WAAU;;;;;;;;;;;;8CAKd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,0IAAK;oDAAC,SAAQ;oDAAU,WAAU;8DAAU;;;;;;8DAC7C,8OAAC,4IAAM;oDACL,MAAK;oDACL,SAAQ;oDACR,MAAK;oDACL,SAAS;oDACT,WAAU;oDACV,UAAU,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY;;sEAErF,8OAAC,wNAAK;4DAAC,WAAU;;;;;;wDAAiB;;;;;;;;;;;;;sDAItC,8OAAC,gJAAQ;4CACP,IAAG;4CACH,OAAO;4CACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4CAC1C,aAAY;4CACZ,MAAM,WAAW,IAAI;4CACrB,WAAU;;;;;;sDAEZ,8OAAC;4CAAE,WAAU;sDACV,qBAAqB,SAAS,6CAA6C;;;;;;;;;;;;8CAKhF,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,0IAAK;4CAAC,SAAQ;4CAAS,WAAU;sDAAU;;;;;;sDAC5C,8OAAC,0IAAK;4CACJ,IAAG;4CACH,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,aAAY;4CACZ,WAAU;;;;;;;;;;;;gCAKb,CAAC,CAAC,SAAS,YAAY,IAAI,CAAC,SAAS,SAAS,mBAC7C,8OAAC,wIAAI;oCAAC,WAAU;8CACd,cAAA,8OAAC,+IAAW;wCAAC,WAAU;kDACrB,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,mOAAW;oDAAC,WAAU;;;;;;8DACvB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAA6B;;;;;;sEAC1C,8OAAC;4DAAE,WAAU;;gEACV,CAAC,SAAS,YAAY,IAAI;gEACzB,CAAC,SAAS,YAAY,IAAI,CAAC,SAAS,SAAS,IAAK;gEACnD,CAAC,SAAS,SAAS,IAAI;gEAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAW1D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAAqC;;;;;;sDACnD,8OAAC,4IAAM;4CACL,SAAQ;4CACR,MAAK;4CACL,SAAS,IAAM,eAAe,CAAC;4CAC/B,WAAU;;gDAET,cAAc,SAAS;gDAAO;;;;;;;;;;;;;gCAIlC,6BACC,8OAAC,wIAAI;oCAAC,WAAU;8CACd,cAAA,8OAAC,+IAAW;wCAAC,WAAU;kDACrB,cAAA,8OAAC;4CAAI,WAAU;;8DAEb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAkC,SAAS,YAAY,IAAI;;;;;;sEAC1E,8OAAC;4DAAI,WAAU;;gEACZ,SAAS,eAAe,kBAAI,8OAAC;oEAAI,WAAU;8EAAY,SAAS,eAAe;;;;;;gEAC/E,SAAS,aAAa,kBAAI,8OAAC;;wEAAI;wEAAQ,SAAS,aAAa;;;;;;;gEAC7D,SAAS,aAAa,kBAAI,8OAAC;oEAAI,WAAU;;wEAAW;wEAAQ,SAAS,aAAa;;;;;;;;;;;;;;;;;;;8DAKvF,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;;gEAAI;gEAAO,IAAI,OAAO,kBAAkB;;;;;;;sEACzC,8OAAC;4DAAI,WAAU;sEAAwB,SAAS,QAAQ;;;;;;;;;;;;gDAIzD,yBACC,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;;4DAAO;4DAAK;;;;;;;;;;;;8DAKjB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;;gEAAS;gEAAM,SAAS,QAAQ;gEAAC;;;;;;;sEAChD,8OAAC;4DAAI,WAAU;sEACZ,WAAW;;;;;;sEAEd,8OAAC;sEAAI;;;;;;sEACL,8OAAC;4DAAI,WAAU;sEACZ,cAAc,SAAS,YAAY,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAWxD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4IAAM;oCAAC,SAAQ;oCAAU,SAAS;oCAAa,WAAU;8CAAmC;;;;;;gCAG5F,IAAA,sIAAU,EAAC,2BACV,8OAAC,4IAAM;oCACL,SAAQ;oCACR,SAAS;wCACP,IAAA,wIAAY,EAAC;4CACX,aAAa,SAAS,WAAW;4CACjC,SAAS,GAAG,UAAU,UAAU,SAAS,GAAG,KAAK,EAAE,SAAS,QAAQ,CAAC,KAAK,EAAE,QAAQ,uBAAuB,EAAE,cAAc,SAAS,YAAY,IAAI,cAAc;wCACpK;wCACA,MAAM;4CACJ,OAAO;4CACP,aAAa;wCACf;oCACF;oCACA,UAAU,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY;oCACrF,WAAU;;sDAEV,8OAAC,yOAAa;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;;;;;;sCAM3C,8OAAC;4BAAI,WAAU;;gCACZ,+BACC,8OAAC,4IAAM;oCACL,SAAQ;oCACR,SAAS;oCACT,UAAU,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY;oCACrF,WAAU;;sDAEV,8OAAC,yOAAa;4CAAC,WAAU;;;;;;wCAAY;;;;;;;8CAIzC,8OAAC,4IAAM;oCACL,SAAS;oCACT,UAAU,CAAC,QAAQ,IAAI,MAAM,YAAY,gCAAgC,YAAY,yCAAyC;oCAC9H,WAAU;;sDAEV,8OAAC,sNAAQ;4CAAC,WAAU;;;;;;wCACnB,eAAe,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC;uCAEe"}},
    {"offset": {"line": 3671, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/drawer.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Drawer as DrawerPrimitive } from \"vaul\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Drawer = ({\r\n  shouldScaleBackground = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\r\n  <DrawerPrimitive.Root\r\n    shouldScaleBackground={shouldScaleBackground}\r\n    {...props}\r\n  />\r\n)\r\nDrawer.displayName = \"Drawer\"\r\n\r\nconst DrawerTrigger = DrawerPrimitive.Trigger\r\n\r\nconst DrawerPortal = DrawerPrimitive.Portal\r\n\r\nconst DrawerClose = DrawerPrimitive.Close\r\n\r\nconst DrawerOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\r\n\r\nconst DrawerContent = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DrawerPortal>\r\n    <DrawerOverlay />\r\n    <DrawerPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\r\n      {children}\r\n    </DrawerPrimitive.Content>\r\n  </DrawerPortal>\r\n))\r\nDrawerContent.displayName = \"DrawerContent\"\r\n\r\nconst DrawerHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerHeader.displayName = \"DrawerHeader\"\r\n\r\nconst DrawerFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerFooter.displayName = \"DrawerFooter\"\r\n\r\nconst DrawerTitle = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\r\n\r\nconst DrawerDescription = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerPortal,\r\n  DrawerOverlay,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerFooter,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,SAAS,CAAC,EACd,wBAAwB,IAAI,EAC5B,GAAG,OAC+C,iBAClD,8OAAC,gJAAe,CAAC,IAAI;QACnB,uBAAuB;QACtB,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG;AAErB,MAAM,gBAAgB,gJAAe,CAAC,OAAO;AAE7C,MAAM,eAAe,gJAAe,CAAC,MAAM;AAE3C,MAAM,cAAc,gJAAe,CAAC,KAAK;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,OAAO;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,gJAAe,CAAC,OAAO,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,gJAAe,CAAC,OAAO;gBACtB,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,kGACA;gBAED,GAAG,KAAK;;kCAET,8OAAC;wBAAI,WAAU;;;;;;oBACd;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG;AAE5B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,KAAK;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gJAAe,CAAC,KAAK,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,WAAW;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,gJAAe,CAAC,WAAW,CAAC,WAAW"}},
    {"offset": {"line": 3799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/customers/PaymentReminderPreviewDialog.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { Drawer, DrawerContent, DrawerHeader, DrawerTitle, DrawerFooter, DrawerClose } from '@/components/ui/drawer';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Download, Printer, Share2, X, Loader2, MessageCircle } from 'lucide-react';\r\nimport { Sale, Customer, BusinessSettings } from '@/types';\r\nimport { generatePaymentReminderPDF } from '@/utils/generatePaymentReminderPDF';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { openWhatsApp } from '@/utils/smsUtils';\r\n\r\ninterface PaymentReminderPreviewDialogProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    sale: Sale | null;\r\n    customer?: Customer | null;\r\n    unpaidSales?: Sale[];\r\n}\r\n\r\nconst PaymentReminderPreviewDialog: React.FC<PaymentReminderPreviewDialogProps> = ({\r\n    isOpen,\r\n    onOpenChange,\r\n    sale,\r\n    customer,\r\n    unpaidSales\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { settings, isLoading: settingsLoading } = useBusinessSettings();\r\n    const { toast } = useToast();\r\n    const [pdfUrl, setPdfUrl] = useState<string | null>(null);\r\n    const [pdfBlob, setPdfBlob] = useState<Blob | null>(null);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    // Prepare customer and sales data\r\n    const targetCustomer: Customer | null = customer || (sale ? {\r\n        id: 'placeholder',\r\n        fullName: sale.customerName,\r\n        phoneNumber: sale.customerContact,\r\n        email: null,\r\n        location: sale.customerAddress,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        loyaltyPoints: 0,\r\n        totalSpent: 0,\r\n        lastVisit: null,\r\n        categoryId: null,\r\n        birthday: null,\r\n        socialMedia: null,\r\n        gender: null,\r\n        tags: null,\r\n        notes: null\r\n    } as Customer : null);\r\n\r\n    const targetSales = unpaidSales || (sale ? [sale] : []);\r\n\r\n    // Calculate total amount due\r\n    const totalAmountDue = targetSales.reduce((sum, s) => {\r\n        const subtotal = s.items.reduce((itemSum, item) => itemSum + (item.price * item.quantity), 0);\r\n        const taxAmount = subtotal * ((s.taxRate || 0) / 100);\r\n        return sum + subtotal + taxAmount;\r\n    }, 0);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && targetCustomer && targetSales.length > 0 && settings) {\r\n            generatePreview();\r\n        } else if (!isOpen) {\r\n            if (pdfUrl) {\r\n                URL.revokeObjectURL(pdfUrl);\r\n                setPdfUrl(null);\r\n            }\r\n        }\r\n    }, [isOpen, settings]);\r\n\r\n    const generatePreview = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n\r\n        setIsGenerating(true);\r\n        try {\r\n            const blob = await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'blob'\r\n            ) as Blob;\r\n\r\n            const url = URL.createObjectURL(blob);\r\n            setPdfUrl(url);\r\n            setPdfBlob(blob);\r\n        } catch (error) {\r\n            console.error('Error generating preview:', error);\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to generate PDF preview.\",\r\n                variant: \"destructive\"\r\n            });\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n        try {\r\n            await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'save'\r\n            );\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to download PDF.\",\r\n                variant: \"destructive\"\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        if (pdfUrl) {\r\n            const printWindow = window.open(pdfUrl);\r\n            if (printWindow) {\r\n                printWindow.addEventListener('load', () => {\r\n                    printWindow.print();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        const fileName = `Payment_Reminder_${targetCustomer?.fullName.replace(/\\s+/g, '_') || 'Customer'}.pdf`;\r\n        const message = `Hello ${targetCustomer?.fullName || 'Customer'}, this is a payment reminder from ${settings?.businessName || 'our business'} regarding your outstanding balance of ${settings?.currency || ''} ${totalAmountDue.toLocaleString()}.`;\r\n\r\n        if (navigator.share && pdfBlob) {\r\n            try {\r\n                const file = new File([pdfBlob], fileName, { type: 'application/pdf' });\r\n\r\n                // Check if sharing files is supported\r\n                if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n                    await navigator.share({\r\n                        files: [file],\r\n                        title: 'Payment Reminder',\r\n                        text: message,\r\n                    });\r\n                    return; // Success\r\n                }\r\n\r\n                // If can't share files, try sharing just text\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else if (navigator.share) {\r\n            // No blob yet, just share text\r\n            try {\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else {\r\n            // Fallback: copy to clipboard\r\n            try {\r\n                await navigator.clipboard.writeText(message);\r\n                toast({\r\n                    title: \"Copied to clipboard\",\r\n                    description: \"Payment reminder summary copied to clipboard.\",\r\n                });\r\n            } catch (err) {\r\n                toast({\r\n                    title: \"Share failed\",\r\n                    description: \"Could not share or copy the message.\",\r\n                    variant: \"destructive\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const Content = () => (\r\n        <div className=\"flex flex-col h-full space-y-4\">\r\n            <div className=\"flex flex-wrap gap-2 justify-center py-2 order-first\">\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleShare}\r\n                    className=\"flex-1 min-w-[120px] bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100\"\r\n                >\r\n                    <Share2 className=\"h-4 w-4 mr-2 text-blue-600\" />\r\n                    Share\r\n                </Button>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handlePrint}\r\n                    className=\"flex-1 min-w-[120px]\"\r\n                    disabled={!pdfUrl}\r\n                >\r\n                    <Printer className=\"h-4 w-4 mr-2\" />\r\n                    Print\r\n                </Button>\r\n                <Button\r\n                    onClick={handleDownload}\r\n                    className=\"flex-1 min-w-[120px] bg-orange-500 hover:bg-orange-600\"\r\n                >\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Download\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 bg-gray-100 rounded-lg overflow-hidden min-h-[600px] relative\">\r\n                {isGenerating ? (\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center space-y-4 bg-white/50 backdrop-blur-sm\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-orange-500\" />\r\n                        <p className=\"text-sm font-medium text-gray-600\">Generating preview...</p>\r\n                    </div>\r\n                ) : pdfUrl ? (\r\n                    <iframe\r\n                        src={pdfUrl}\r\n                        className=\"w-full h-full min-h-[600px] border-none\"\r\n                        title=\"Payment Reminder Preview\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <p className=\"text-sm text-gray-500\">Preview not available.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (isMobile) {\r\n        return (\r\n            <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n                <DrawerContent className=\"max-h-[95vh]\">\r\n                    <DrawerHeader className=\"border-b pb-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <DrawerTitle>Payment Reminder Preview</DrawerTitle>\r\n                            <DrawerClose asChild>\r\n                                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\r\n                                    <X className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </DrawerClose>\r\n                        </div>\r\n                    </DrawerHeader>\r\n                    <div className=\"px-4 py-4 overflow-y-auto\">\r\n                        <Content />\r\n                    </div>\r\n                    <DrawerFooter className=\"pt-2 border-t\">\r\n                        <Button variant=\"outline\" onClick={() => onOpenChange(false)}>Close</Button>\r\n                    </DrawerFooter>\r\n                </DrawerContent>\r\n            </Drawer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl max-h-[90vh] flex flex-col p-0 overflow-hidden\">\r\n                <DialogHeader className=\"px-6 py-4 border-b\">\r\n                    <DialogTitle>Payment Reminder Preview</DialogTitle>\r\n                </DialogHeader>\r\n                <div className=\"flex-1 overflow-y-auto p-6 bg-gray-50/50\">\r\n                    <Content />\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default PaymentReminderPreviewDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4250, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesCategoryManager.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Plus, Edit, Trash2, Settings } from 'lucide-react';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\nimport { SalesCategory } from '@/types';\r\nconst SalesCategoryManager = () => {\r\n  const {\r\n    categories,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory,\r\n    createDefaultCategories\r\n  } = useSalesCategories();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [editingCategory, setEditingCategory] = useState<SalesCategory | null>(null);\r\n  const [editName, setEditName] = useState('');\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [categoryToDelete, setCategoryToDelete] = useState<SalesCategory | null>(null);\r\n  const handleCreate = async () => {\r\n    if (!newCategoryName.trim()) return;\r\n    const success = await createCategory(newCategoryName.trim());\r\n    if (success) {\r\n      setNewCategoryName('');\r\n    }\r\n  };\r\n  const handleEdit = async () => {\r\n    if (!editingCategory || !editName.trim()) return;\r\n    const success = await updateCategory(editingCategory.id, editName.trim());\r\n    if (success) {\r\n      setEditingCategory(null);\r\n      setEditName('');\r\n    }\r\n  };\r\n  const handleDelete = async () => {\r\n    if (!categoryToDelete) return;\r\n    const success = await deleteCategory(categoryToDelete.id);\r\n    if (success) {\r\n      setDeleteDialogOpen(false);\r\n      setCategoryToDelete(null);\r\n    }\r\n  };\r\n  const startEdit = (category: SalesCategory) => {\r\n    setEditingCategory(category);\r\n    setEditName(category.name);\r\n  };\r\n  const startDelete = (category: SalesCategory) => {\r\n    setCategoryToDelete(category);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n  const handleCreateDefaults = async () => {\r\n    await createDefaultCategories();\r\n  };\r\n  return <>\r\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n        <DialogTrigger asChild>\r\n          \r\n        </DialogTrigger>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>Manage Sales Categories</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Create new category */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"new-category\">Add New Category</Label>\r\n              <div className=\"flex gap-2\">\r\n                <Input id=\"new-category\" placeholder=\"Category name\" value={newCategoryName} onChange={e => setNewCategoryName(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleCreate()} />\r\n                <Button onClick={handleCreate} disabled={!newCategoryName.trim()}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Categories list */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <Label>Existing Categories</Label>\r\n                {categories.length === 0 && <Button variant=\"outline\" size=\"sm\" onClick={handleCreateDefaults}>\r\n                    Create Default Categories\r\n                  </Button>}\r\n              </div>\r\n              \r\n              {categories.length > 0 ? <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n                  {categories.map(category => <div key={category.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                      {editingCategory?.id === category.id ? <div className=\"flex gap-2 flex-1\">\r\n                          <Input value={editName} onChange={e => setEditName(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleEdit()} className=\"flex-1\" />\r\n                          <Button size=\"sm\" onClick={handleEdit}>Save</Button>\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => setEditingCategory(null)}>\r\n                            Cancel\r\n                          </Button>\r\n                        </div> : <>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"font-medium\">{category.name}</span>\r\n                            {category.is_default && <span className=\"text-xs bg-muted px-2 py-1 rounded\">Default</span>}\r\n                          </div>\r\n                          <div className=\"flex gap-2\">\r\n                            <Button size=\"sm\" variant=\"outline\" onClick={() => startEdit(category)}>\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"sm\" variant=\"outline\" onClick={() => startDelete(category)}>\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </>}\r\n                    </div>)}\r\n                </div> : <p className=\"text-muted-foreground text-sm\">No categories found. Create your first category above.</p>}\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Category</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete \"{categoryToDelete?.name}\"? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete}>Delete</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>;\r\n};\r\nexport default SalesCategoryManager;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4657, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesSummaryCards.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Sale } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { TrendingUp, DollarSign, Wallet } from 'lucide-react';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface SalesSummaryCardsProps {\r\n  sales: Sale[];\r\n  currency: string;\r\n}\r\n\r\nexport const SalesSummaryCards: React.FC<SalesSummaryCardsProps> = ({ sales, currency }) => {\r\n  const { formatFinancial, canViewCostPrice, canViewProfit, canViewTotalAmount, canViewSellingPrice } = useFinancialVisibility();\r\n\r\n  const summary = useMemo(() => {\r\n    return sales.reduce(\r\n      (acc, sale) => {\r\n        // Calculate subtotal from items with discount considerations\r\n        // Logic must match SalesTableRow to ensure consistency\r\n        const subtotal = sale.items.reduce((total, item) => {\r\n          const itemSubtotal = item.price * item.quantity;\r\n          const discountAmount = item.discountType === 'amount'\r\n            ? (item.discountAmount || 0)\r\n            : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n          return total + (itemSubtotal - discountAmount);\r\n        }, 0);\r\n\r\n        // Calculate tax amount\r\n        const taxRate = sale.taxRate || 0;\r\n        const taxAmount = subtotal * (taxRate / 100);\r\n\r\n        // Total including tax\r\n        const saleTotal = subtotal + taxAmount;\r\n\r\n        // Calculate total cost\r\n        const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n        return {\r\n          totalSales: acc.totalSales + saleTotal,\r\n          totalCost: acc.totalCost + totalCost,\r\n          totalProfit: acc.totalProfit + (saleTotal - totalCost)\r\n        };\r\n      },\r\n      { totalSales: 0, totalCost: 0, totalProfit: 0 }\r\n    );\r\n  }, [sales]);\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <Card className=\"bg-blue-50 border-blue-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-blue-600 mb-1\">Total Sales</p>\r\n            <h3 className=\"text-2xl font-bold text-blue-900\">\r\n              {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(summary.totalSales)}` : ''}\r\n            </h3>\r\n            <p className=\"text-xs text-blue-500 mt-1\">\r\n              Based on {sales.length} records\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center\">\r\n            <TrendingUp className=\"h-6 w-6 text-blue-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card className=\"bg-orange-50 border-orange-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-orange-600 mb-1\">Total Cost</p>\r\n            <h3 className=\"text-2xl font-bold text-orange-900\">\r\n              {canViewCostPrice ? `${currency} ${formatNumber(summary.totalCost)}` : ''}\r\n            </h3>\r\n            <p className=\"text-xs text-orange-500 mt-1\">\r\n              Cost of goods sold\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center\">\r\n            <Wallet className=\"h-6 w-6 text-orange-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card className=\"bg-green-50 border-green-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-green-600 mb-1\">Total Profit</p>\r\n            <h3 className=\"text-2xl font-bold text-green-900\">\r\n              {canViewProfit ? `${currency} ${formatNumber(summary.totalProfit)}` : ''}\r\n            </h3>\r\n            <p className=\"text-xs text-green-500 mt-1\">\r\n              Net earnings\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center\">\r\n            <DollarSign className=\"h-6 w-6 text-green-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;;;;;;;AAOO,MAAM,oBAAsD,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;IACrF,MAAM,EAAE,eAAe,EAAE,gBAAgB,EAAE,aAAa,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,GAAG,IAAA,gKAAsB;IAE5H,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,OAAO,MAAM,MAAM,CACjB,CAAC,KAAK;YACJ,6DAA6D;YAC7D,uDAAuD;YACvD,MAAM,WAAW,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO;gBACzC,MAAM,eAAe,KAAK,KAAK,GAAG,KAAK,QAAQ;gBAC/C,MAAM,iBAAiB,KAAK,YAAY,KAAK,WACxC,KAAK,cAAc,IAAI,IACxB,AAAC,eAAe,CAAC,KAAK,kBAAkB,IAAI,CAAC,IAAK;gBACtD,OAAO,QAAQ,CAAC,eAAe,cAAc;YAC/C,GAAG;YAEH,uBAAuB;YACvB,MAAM,UAAU,KAAK,OAAO,IAAI;YAChC,MAAM,YAAY,WAAW,CAAC,UAAU,GAAG;YAE3C,sBAAsB;YACtB,MAAM,YAAY,WAAW;YAE7B,uBAAuB;YACvB,MAAM,YAAY,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,OAAS,QAAS,KAAK,IAAI,GAAG,KAAK,QAAQ,EAAG;YAE1F,OAAO;gBACL,YAAY,IAAI,UAAU,GAAG;gBAC7B,WAAW,IAAI,SAAS,GAAG;gBAC3B,aAAa,IAAI,WAAW,GAAG,CAAC,YAAY,SAAS;YACvD;QACF,GACA;YAAE,YAAY;YAAG,WAAW;YAAG,aAAa;QAAE;IAElD,GAAG;QAAC;KAAM;IAEV,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,wIAAI;gBAAC,WAAU;0BACd,cAAA,8OAAC,+IAAW;oBAAC,WAAU;;sCACrB,8OAAC;;8CACC,8OAAC;oCAAE,WAAU;8CAAyC;;;;;;8CACtD,8OAAC;oCAAG,WAAU;8CACX,sBAAsB,sBAAsB,GAAG,SAAS,CAAC,EAAE,IAAA,mIAAY,EAAC,QAAQ,UAAU,GAAG,GAAG;;;;;;8CAEnG,8OAAC;oCAAE,WAAU;;wCAA6B;wCAC9B,MAAM,MAAM;wCAAC;;;;;;;;;;;;;sCAG3B,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,gOAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAK5B,8OAAC,wIAAI;gBAAC,WAAU;0BACd,cAAA,8OAAC,+IAAW;oBAAC,WAAU;;sCACrB,8OAAC;;8CACC,8OAAC;oCAAE,WAAU;8CAA2C;;;;;;8CACxD,8OAAC;oCAAG,WAAU;8CACX,mBAAmB,GAAG,SAAS,CAAC,EAAE,IAAA,mIAAY,EAAC,QAAQ,SAAS,GAAG,GAAG;;;;;;8CAEzE,8OAAC;oCAAE,WAAU;8CAA+B;;;;;;;;;;;;sCAI9C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,gNAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAKxB,8OAAC,wIAAI;gBAAC,WAAU;0BACd,cAAA,8OAAC,+IAAW;oBAAC,WAAU;;sCACrB,8OAAC;;8CACC,8OAAC;oCAAE,WAAU;8CAA0C;;;;;;8CACvD,8OAAC;oCAAG,WAAU;8CACX,gBAAgB,GAAG,SAAS,CAAC,EAAE,IAAA,mIAAY,EAAC,QAAQ,WAAW,GAAG,GAAG;;;;;;8CAExE,8OAAC;oCAAE,WAAU;8CAA8B;;;;;;;;;;;;sCAI7C,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,gOAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlC"}},
    {"offset": {"line": 4910, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/SalesTable.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { Table, TableBody, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport TableActions from '@/components/sales/TableActions';\r\nimport SalesTableFilters from '@/components/sales/SalesTableFilters';\r\nimport SalesTableRow from '@/components/sales/SalesTableRow';\r\nimport SalesTablePagination from '@/components/sales/SalesTablePagination';\r\nimport EmptySalesState from '@/components/sales/EmptySalesState';\r\nimport DeleteSaleDialog from '@/components/sales/DeleteSaleDialog';\r\nimport BusinessNoticeGenerator from '@/components/customers/BusinessNoticeGenerator';\r\nimport PaymentReminderPreviewDialog from '@/components/customers/PaymentReminderPreviewDialog';\r\nimport SalesCategoryManager from '@/components/sales/SalesCategoryManager';\r\nimport { SalesSummaryCards } from '@/components/sales/SalesSummaryCards';\r\nimport { useSalesFilters } from '@/hooks/useSalesFilters';\r\nimport { usePagination } from '@/hooks/usePagination';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Edit, Trash2, Receipt, FileText, Quote, Heart, MessageCircle } from 'lucide-react';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { generatePaymentReminderPDF } from '@/utils/generatePaymentReminderPDF';\r\nimport { openWhatsApp, getThankYouMessage, canSendSMS } from '@/utils/smsUtils';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\n\r\ninterface SalesTableProps {\r\n  sales: Sale[];\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  currency?: string;\r\n  onDateFilterChange?: (value: string) => void;\r\n  onDateRangeChange?: (range: { from: Date | undefined; to: Date | undefined; }) => void;\r\n  isLoading?: boolean;\r\n  mobileOptimized?: boolean;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: BusinessSettings = {\r\n  businessName: 'Your Business Name',\r\n  businessAddress: 'Your Business Address',\r\n  businessPhone: '(123) 456-7890',\r\n  businessEmail: 'support@yourbusiness.com',\r\n  businessLogo: '',\r\n  currency: 'UGX',\r\n};\r\n\r\n// Memoized mobile card component for better performance\r\nconst MobileCard = React.memo(({\r\n  sale,\r\n  settings,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  onSendPaymentReminder,\r\n  onSendThankYouNotice,\r\n  cashAccountName\r\n}: {\r\n  sale: Sale;\r\n  settings: BusinessSettings;\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  onSendPaymentReminder: (sale: Sale) => void;\r\n  onSendThankYouNotice: (sale: Sale) => void;\r\n  cashAccountName?: string | null;\r\n}) => {\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n  const { hasPermission } = useProfiles();\r\n  const { canViewCostPrice, canViewProfit, canViewSellingPrice, canViewTotalAmount } = useFinancialVisibility();\r\n  // Calculate subtotal from items with discount considerations\r\n  const subtotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Calculate total discount amount\r\n  const totalDiscount = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n\r\n  // Calculate tax amount based on subtotal and tax rate\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotal * (taxRate / 100);\r\n\r\n  // Calculate total including tax\r\n  const totalWithTax = subtotal + taxAmount;\r\n\r\n  // Calculate total cost\r\n  const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n  // Calculate actual amounts for installment sales based on payment history\r\n  const actualAmountPaid = sale.paymentStatus === 'Installment Sale'\r\n    ? payments.reduce((sum, payment) => sum + payment.amount, 0)\r\n    : sale.amountPaid || 0;\r\n\r\n  const actualAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, totalWithTax - actualAmountPaid)\r\n    : sale.amountDue || 0;\r\n\r\n  // Get primary item description (or combination)\r\n  let itemDescription = \"No items\";\r\n  if (sale.items && Array.isArray(sale.items) && sale.items.length > 0) {\r\n    itemDescription = sale.items[0].description;\r\n    if (sale.items.length > 1) {\r\n      itemDescription += ` (+${sale.items.length - 1} more)`;\r\n    }\r\n  }\r\n\r\n  // Determine status display and styling\r\n  const getStatusDisplay = () => {\r\n    if (sale.paymentStatus === 'Installment Sale') {\r\n      return 'Installment';\r\n    }\r\n    return sale.paymentStatus === 'NOT PAID' ? 'Credit' : sale.paymentStatus;\r\n  };\r\n\r\n  const getStatusStyling = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'bg-green-100 text-green-700';\r\n      case 'Quote':\r\n        return 'bg-purple-100 text-purple-700';\r\n      case 'Installment Sale':\r\n        return 'bg-blue-100 text-blue-700';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'bg-yellow-100 text-yellow-700';\r\n    }\r\n  };\r\n\r\n  const getReceiptButtonLabel = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'Receipt';\r\n      case 'NOT PAID':\r\n        return 'Invoice';\r\n      case 'Quote':\r\n        return 'Quotation';\r\n      default:\r\n        return 'Receipt';\r\n    }\r\n  };\r\n\r\n  const getReceiptButtonIcon = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return Receipt;\r\n      case 'NOT PAID':\r\n        return FileText;\r\n      case 'Quote':\r\n        return Quote;\r\n      default:\r\n        return Receipt;\r\n    }\r\n  };\r\n\r\n  // Check if this is a credit sale that needs payment reminder (exclude installment sales)\r\n  const isCreditSale = sale.paymentStatus === 'NOT PAID';\r\n\r\n  // Check if this is an installment sale with outstanding balance\r\n  const isInstallmentWithDue = sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0;\r\n  const ButtonIcon = getReceiptButtonIcon();\r\n  const buttonLabel = getReceiptButtonLabel();\r\n\r\n  return (\r\n    <Card className={`mb-3 bg-white border shadow-sm ${cashAccountName ? 'border-l-4 border-l-green-500 border-green-200' : 'border-gray-200'}`}>\r\n      <CardContent className=\"p-4\">\r\n        {cashAccountName && (\r\n          <div className=\"flex items-center gap-2 mb-2 p-2 bg-green-50 rounded-md border border-green-200\">\r\n            <div className=\"w-2 h-2 bg-green-500 rounded-full flex-shrink-0\"></div>\r\n            <span className=\"text-xs font-medium text-green-700 truncate\">\r\n              Linked to: {cashAccountName}\r\n            </span>\r\n          </div>\r\n        )}\r\n        <div className=\"flex justify-between items-start mb-3\">\r\n          <div className=\"flex-1 min-w-0 pr-2\">\r\n            <p className=\"font-semibold text-gray-900 text-sm truncate\">{sale.customerName}</p>\r\n            <p className=\"text-xs text-gray-500 mt-0.5\">{new Date(sale.date).toLocaleDateString('en-GB')}</p>\r\n            {sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0 && (\r\n              <Badge variant=\"outline\" className=\"text-xs bg-red-50 text-red-700 border-red-200 mt-1\">\r\n                Due: {canViewSellingPrice || canViewTotalAmount ? `${settings.currency} ${formatNumber(actualAmountDue)}` : ''}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <span\r\n            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${getStatusStyling()}`}\r\n          >\r\n            {getStatusDisplay()}\r\n          </span>\r\n        </div>\r\n\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <p className=\"text-xs text-gray-600 mb-3 line-clamp-1 cursor-help\">\r\n              {itemDescription}\r\n            </p>\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"top\" className=\"max-w-xs\">\r\n            <div className=\"space-y-1\">\r\n              <p className=\"font-bold break-words whitespace-normal\">{itemDescription}</p>\r\n            </div>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n\r\n        <div className=\"space-y-3 mb-3\">\r\n          {/* First row: Cost and Discount */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <p className=\"text-xs text-gray-500\">Cost</p>\r\n              <p className=\"font-semibold text-gray-900\">\r\n                {canViewCostPrice ? `${settings.currency} ${formatNumber(totalCost)}` : ''}\r\n              </p>\r\n            </div>\r\n            {totalDiscount > 0 ? (\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-gray-500\">Discount</p>\r\n                <p className=\"font-semibold text-orange-600\">\r\n                  {canViewSellingPrice ? `-${settings.currency} ${formatNumber(totalDiscount)}` : ''}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-gray-500\">Discount</p>\r\n                <p className=\"font-semibold text-gray-400\">-</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Second row: Total Amount and Profit */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <p className=\"text-xs text-gray-500\">Total Amount</p>\r\n              <p className=\"font-semibold text-gray-900\">\r\n                {canViewTotalAmount || canViewSellingPrice ? `${settings.currency} ${formatNumber(totalWithTax)}` : ''}\r\n              </p>\r\n              {taxRate > 0 && (\r\n                <p className=\"text-xs text-gray-500\">Tax incl.</p>\r\n              )}\r\n              {sale.paymentStatus === 'Installment Sale' && actualAmountPaid > 0 && (\r\n                <p className=\"text-xs text-green-600 mt-1\">\r\n                  Paid: {canViewTotalAmount || canViewSellingPrice ? `${settings.currency} ${formatNumber(actualAmountPaid)}` : ''}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs text-gray-500\">Profit</p>\r\n              <p className=\"font-semibold text-green-600\">\r\n                {canViewProfit ? `${settings.currency} ${formatNumber(totalWithTax - totalCost)}` : ''}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-3 border-t border-gray-100 space-y-2\">\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => onViewReceipt(sale)}\r\n              className=\"flex items-center gap-1.5 text-xs h-8 border-gray-200 flex-1 min-w-0\"\r\n            >\r\n              <ButtonIcon className=\"h-3 w-3 flex-shrink-0\" />\r\n              <span className=\"truncate\">{buttonLabel}</span>\r\n            </Button>\r\n\r\n            {isCreditSale && (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onSendPaymentReminder(sale)}\r\n                className=\"flex items-center gap-1.5 text-xs h-8 border-orange-200 text-orange-600 hover:bg-orange-50 flex-1 min-w-0\"\r\n              >\r\n                <FileText className=\"h-3 w-3 flex-shrink-0\" />\r\n                <span className=\"truncate\">Reminder</span>\r\n              </Button>\r\n            )}\r\n\r\n            {isInstallmentWithDue && (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onSendPaymentReminder(sale)}\r\n                className=\"flex items-center gap-1.5 text-xs h-8 border-blue-200 text-blue-600 hover:bg-blue-50 flex-1 min-w-0\"\r\n              >\r\n                <FileText className=\"h-3 w-3 flex-shrink-0\" />\r\n                <span className=\"truncate\">Due Reminder</span>\r\n              </Button>\r\n            )}\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => onSendThankYouNotice(sale)}\r\n              className=\"flex items-center gap-1.5 text-xs h-8 border-purple-200 text-purple-600 hover:bg-purple-50 flex-1 min-w-0\"\r\n            >\r\n              <Heart className=\"h-3 w-3 flex-shrink-0\" />\r\n              <span className=\"truncate\">Thanks</span>\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center gap-2\">\r\n            {hasPermission('sales', 'edit') && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onEditSale(sale)}\r\n                className=\"h-8 px-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-1\"\r\n              >\r\n                <Edit className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Edit</span>\r\n              </Button>\r\n            )}\r\n            {hasPermission('sales', 'delete') && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onDeleteSale(sale)}\r\n                className=\"h-8 px-3 hover:bg-red-50 hover:text-red-600 flex items-center gap-1\"\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Delete</span>\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n});\r\n\r\nMobileCard.displayName = 'MobileCard';\r\n\r\nconst SalesTable: React.FC<SalesTableProps> = ({\r\n  sales,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  currency = 'USD',\r\n  onDateFilterChange,\r\n  onDateRangeChange,\r\n  isLoading = false,\r\n  mobileOptimized = false\r\n}) => {\r\n  const [settings, setSettings] = useState<BusinessSettings>({ ...DEFAULT_SETTINGS, currency });\r\n  const [saleToDelete, setSaleToDelete] = useState<Sale | null>(null);\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [isDeletingSale, setIsDeletingSale] = useState(false);\r\n  const [selectedSaleForNotice, setSelectedSaleForNotice] = useState<Sale | null>(null);\r\n  const [isNoticeDialogOpen, setIsNoticeDialogOpen] = useState(false);\r\n  const [selectedPreviewSale, setSelectedPreviewSale] = useState<Sale | null>(null);\r\n  const [isPreviewDialogOpen, setIsPreviewDialogOpen] = useState(false);\r\n  const { accounts } = useCashAccounts();\r\n  const { transactions } = useCashTransactions();\r\n  const { settings: businessSettings } = useBusinessSettings();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  const {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    paymentFilter,\r\n    setPaymentFilter,\r\n    cashTransactionFilter,\r\n    setCashTransactionFilter,\r\n    categoryFilter,\r\n    setCategoryFilter,\r\n    dateFilter,\r\n    setDateFilter,\r\n    dateRange,\r\n    setDateRange,\r\n    specificDate,\r\n    setSpecificDate,\r\n    isCustomRange,\r\n    isSpecificDate,\r\n    filteredSales\r\n  } = useSalesFilters(sales);\r\n\r\n  // Memoize expensive operations\r\n  const memoizedFilteredSales = useMemo(() => filteredSales, [filteredSales]);\r\n\r\n  // Use smaller page sizes for mobile optimization\r\n  const pageSize = mobileOptimized ? 5 : 10;\r\n\r\n  const {\r\n    currentPage,\r\n    setCurrentPage,\r\n    paginatedItems: paginatedSales,\r\n    totalPages\r\n  } = usePagination<Sale>({\r\n    items: memoizedFilteredSales,\r\n    itemsPerPage: pageSize\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (onDateFilterChange) {\r\n      onDateFilterChange(dateFilter);\r\n    }\r\n  }, [dateFilter, onDateFilterChange]);\r\n\r\n  useEffect(() => {\r\n    if (onDateRangeChange && isCustomRange) {\r\n      onDateRangeChange(dateRange);\r\n    }\r\n  }, [dateRange, isCustomRange, onDateRangeChange]);\r\n\r\n  useEffect(() => {\r\n    setSettings(prevSettings => ({ ...prevSettings, currency }));\r\n\r\n    const savedSettings = localStorage.getItem('businessSettings');\r\n    if (savedSettings) {\r\n      const parsed = JSON.parse(savedSettings);\r\n      setSettings({ ...parsed, currency: currency || parsed.currency });\r\n    }\r\n  }, [currency]);\r\n\r\n  // Memoize cash account lookup\r\n  const getCashAccountName = useCallback((sale: Sale) => {\r\n    if (!sale.cashTransactionId) return null;\r\n\r\n    const linkedTransaction = transactions.find(transaction => transaction.id === sale.cashTransactionId);\r\n    if (!linkedTransaction || !linkedTransaction.accountId) return null;\r\n\r\n    const linkedAccount = accounts.find(account => account.id === linkedTransaction.accountId);\r\n    return linkedAccount ? linkedAccount.name : null;\r\n  }, [transactions, accounts]);\r\n\r\n  const getReceiptButtonLabel = useCallback((paymentStatus: string) => {\r\n    switch (paymentStatus) {\r\n      case 'Paid':\r\n        return 'Receipt';\r\n      case 'NOT PAID':\r\n        return 'Invoice';\r\n      case 'Quote':\r\n        return 'Quotation';\r\n      default:\r\n        return 'Receipt';\r\n    }\r\n  }, []);\r\n\r\n  const getReceiptButtonIcon = useCallback((paymentStatus: string) => {\r\n    switch (paymentStatus) {\r\n      case 'Paid':\r\n        return Receipt;\r\n      case 'NOT PAID':\r\n        return FileText;\r\n      case 'Quote':\r\n        return Quote;\r\n      default:\r\n        return Receipt;\r\n    }\r\n  }, []);\r\n\r\n  // Handle delete confirmation\r\n  const handleDeleteSale = useCallback((sale: Sale) => {\r\n    setSaleToDelete(sale);\r\n    setIsDeleteDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleConfirmDelete = useCallback(async () => {\r\n    if (saleToDelete && !isDeletingSale) {\r\n      setIsDeletingSale(true);\r\n      try {\r\n        await onDeleteSale(saleToDelete);\r\n        setIsDeleteDialogOpen(false);\r\n        setSaleToDelete(null);\r\n      } finally {\r\n        setIsDeletingSale(false);\r\n      }\r\n    }\r\n  }, [saleToDelete, onDeleteSale, isDeletingSale]);\r\n\r\n  const handleCancelDelete = useCallback((open: boolean) => {\r\n    if (!isDeletingSale && !open) {\r\n      setIsDeleteDialogOpen(false);\r\n      setSaleToDelete(null);\r\n    }\r\n  }, [isDeletingSale]);\r\n\r\n  // Handle thank you notice generation\r\n  const handleSendThankYouNotice = useCallback((sale: Sale) => {\r\n    setSelectedSaleForNotice(sale);\r\n    setIsNoticeDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleCloseNoticeDialog = useCallback(() => {\r\n    setIsNoticeDialogOpen(false);\r\n    setSelectedSaleForNotice(null);\r\n  }, []);\r\n\r\n  // Handle payment reminder generation\r\n  const handleSendPaymentReminder = useCallback(async (sale: Sale) => {\r\n    try {\r\n      // Create a customer object from the sale data\r\n      const customer = {\r\n        id: sale.customerId || '',\r\n        fullName: sale.customerName,\r\n        phoneNumber: sale.customerContact || '',\r\n        email: '',\r\n        location: sale.customerAddress || '',\r\n        categoryId: null,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        birthday: null,\r\n        socialMedia: null,\r\n        gender: null,\r\n        tags: null,\r\n        notes: null\r\n      };\r\n\r\n      // Calculate total amount due\r\n      const subtotal = sale.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n      const taxAmount = subtotal * ((sale.taxRate || 0) / 100);\r\n      const totalAmountDue = subtotal + taxAmount;\r\n\r\n      // Open the preview dialog instead of generating PDF directly\r\n      setSelectedPreviewSale(sale);\r\n      setIsPreviewDialogOpen(true);\r\n    } catch (error) {\r\n      console.error('Error generating payment reminder:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to generate payment reminder. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  }, [businessSettings, settings, toast]);\r\n\r\n  // Handle WhatsApp thank you message\r\n  const handleSendThankYouWhatsApp = useCallback((sale: Sale) => {\r\n    if (!canSendSMS({ phoneNumber: sale.customerContact })) {\r\n      toast({\r\n        title: \"Phone number required\",\r\n        description: \"Customer phone number is not available for WhatsApp.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const message = getThankYouMessage(sale, businessSettings || settings);\r\n    openWhatsApp({\r\n      phoneNumber: sale.customerContact!,\r\n      message\r\n    });\r\n\r\n    toast({\r\n      title: \"WhatsApp Opened\",\r\n      description: `Opening WhatsApp chat for ${sale.customerName}`\r\n    });\r\n  }, [businessSettings, settings, toast]);\r\n\r\n  // Show optimized loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[40vh] space-y-4\">\r\n        <img\r\n          src=\"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png\"\r\n          alt=\"Loading\"\r\n          className=\"w-12 h-12 animate-spin\"\r\n        />\r\n        <p className=\"text-muted-foreground text-sm\">Loading sales...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <>\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-border/50\">\r\n          <div className=\"p-4 sm:p-6 border-b border-border/50\">\r\n            <div className=\"flex flex-col gap-4\">\r\n              <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                  <h2 className=\"text-xl sm:text-2xl font-bold text-foreground\">Sales Records</h2>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    {memoizedFilteredSales.length} {memoizedFilteredSales.length === 1 ? 'record' : 'records'} found\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <SalesCategoryManager />\r\n                  <div className=\"w-full sm:w-auto\">\r\n                    <TableActions\r\n                      filteredSales={memoizedFilteredSales}\r\n                      allSales={sales}\r\n                      currency={settings.currency}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"p-4 sm:p-6\">\r\n            <SalesSummaryCards sales={memoizedFilteredSales} currency={settings.currency} />\r\n\r\n            <SalesTableFilters\r\n              searchQuery={searchQuery}\r\n              setSearchQuery={setSearchQuery}\r\n              paymentFilter={paymentFilter}\r\n              setPaymentFilter={setPaymentFilter}\r\n              cashTransactionFilter={cashTransactionFilter}\r\n              setCashTransactionFilter={setCashTransactionFilter}\r\n              categoryFilter={categoryFilter}\r\n              setCategoryFilter={setCategoryFilter}\r\n              dateFilter={dateFilter}\r\n              setDateFilter={setDateFilter}\r\n              dateRange={dateRange}\r\n              setDateRange={setDateRange}\r\n              specificDate={specificDate}\r\n              setSpecificDate={setSpecificDate}\r\n              isCustomRange={isCustomRange}\r\n              isSpecificDate={isSpecificDate}\r\n            />\r\n\r\n            {memoizedFilteredSales.length > 0 ? (\r\n              <>\r\n                {isMobile ? (\r\n                  <div className=\"space-y-3\">\r\n                    {paginatedSales.map((sale) => (\r\n                      <MobileCard\r\n                        key={sale.id}\r\n                        sale={sale}\r\n                        settings={settings}\r\n                        onViewReceipt={onViewReceipt}\r\n                        onEditSale={onEditSale}\r\n                        onDeleteSale={handleDeleteSale}\r\n                        onSendPaymentReminder={handleSendPaymentReminder}\r\n                        onSendThankYouNotice={handleSendThankYouNotice}\r\n                        cashAccountName={getCashAccountName(sale)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"overflow-x-auto border rounded-lg\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Receipt #</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead>Item</TableHead>\r\n                          <TableHead className=\"text-right\">Total Qty</TableHead>\r\n                          <TableHead className=\"text-right\">Avg Price</TableHead>\r\n                          <TableHead className=\"text-right\">Discount</TableHead>\r\n                          <TableHead className=\"text-right\">Cost</TableHead>\r\n                          <TableHead className=\"text-right\">Profit</TableHead>\r\n                          <TableHead className=\"text-right\">Total (incl. Tax)</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                          <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {paginatedSales.map((sale) => (\r\n                          <SalesTableRow\r\n                            key={sale.id}\r\n                            sale={sale}\r\n                            currency={settings.currency}\r\n                            onViewReceipt={onViewReceipt}\r\n                            onEditSale={onEditSale}\r\n                            onDeleteSale={handleDeleteSale}\r\n                            onSendPaymentReminder={handleSendPaymentReminder}\r\n                            onSendThankYouNotice={handleSendThankYouNotice}\r\n                          />\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                )}\r\n                <div className=\"mt-6\">\r\n                  <SalesTablePagination\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={setCurrentPage}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <EmptySalesState />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <DeleteSaleDialog\r\n          isOpen={isDeleteDialogOpen}\r\n          onOpenChange={handleCancelDelete}\r\n          onConfirm={handleConfirmDelete}\r\n          isDeleting={isDeletingSale}\r\n        />\r\n\r\n        {selectedSaleForNotice && (\r\n          <BusinessNoticeGenerator\r\n            customer={{\r\n              id: selectedSaleForNotice.customerId || '',\r\n              fullName: selectedSaleForNotice.customerName,\r\n              phoneNumber: selectedSaleForNotice.customerContact || '',\r\n              email: '',\r\n              location: selectedSaleForNotice.customerAddress || '',\r\n              categoryId: null,\r\n              createdAt: new Date(),\r\n              updatedAt: new Date(),\r\n              birthday: null,\r\n              socialMedia: null,\r\n              gender: null,\r\n              tags: null,\r\n              notes: null\r\n            }}\r\n            open={isNoticeDialogOpen}\r\n            onClose={handleCloseNoticeDialog}\r\n            defaultTemplate=\"thank_you\"\r\n            sale={selectedSaleForNotice}\r\n          />\r\n        )}\r\n\r\n        <PaymentReminderPreviewDialog\r\n          isOpen={isPreviewDialogOpen}\r\n          onOpenChange={setIsPreviewDialogOpen}\r\n          sale={selectedPreviewSale}\r\n        />\r\n      </>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default SalesTable;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6177, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesDataTable.tsx"],"sourcesContent":["import React, { Suspense } from 'react';\r\nimport { Sale } from '@/types';\r\nimport SalesTable from '@/components/SalesTable';\r\nimport SalesTableSkeleton from './SalesTableSkeleton';\r\n\r\ninterface SalesDataTableProps {\r\n  sales: Sale[];\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  currency: string;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst SalesDataTable: React.FC<SalesDataTableProps> = ({\r\n  sales,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  currency,\r\n  isLoading\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Suspense fallback={<SalesTableSkeleton />}>\r\n        <SalesTable\r\n          sales={sales}\r\n          onViewReceipt={onViewReceipt}\r\n          onEditSale={onEditSale}\r\n          onDeleteSale={onDeleteSale}\r\n          currency={currency}\r\n          isLoading={isLoading}\r\n          mobileOptimized={false} // Disable mobile optimization to show all records\r\n        />\r\n      </Suspense>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesDataTable;"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;;;;;AAWA,MAAM,iBAAgD,CAAC,EACrD,KAAK,EACL,aAAa,EACb,UAAU,EACV,YAAY,EACZ,QAAQ,EACR,SAAS,EACV;IACC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iNAAQ;YAAC,wBAAU,8OAAC,4JAAkB;;;;;sBACrC,cAAA,8OAAC,2IAAU;gBACT,OAAO;gBACP,eAAe;gBACf,YAAY;gBACZ,cAAc;gBACd,UAAU;gBACV,WAAW;gBACX,iBAAiB;;;;;;;;;;;;;;;;AAK3B;uCAEe"}},
    {"offset": {"line": 6227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ThermalReceipt.tsx"],"sourcesContent":["\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { parsePaymentInfo, useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { numberToWords } from '@/utils/numberToWords';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\n\r\ninterface ThermalReceiptProps {\r\n  sale: Sale;\r\n  currency?: string;\r\n  includePaymentInfo?: boolean;\r\n}\r\n\r\nconst ThermalReceipt: React.FC<ThermalReceiptProps> = ({\r\n  sale,\r\n  currency,\r\n  includePaymentInfo = true\r\n}) => {\r\n  const { settings, isLoading: settingsLoading } = useBusinessSettings();\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n\r\n  if (settingsLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-12 bg-gray-50 rounded-lg\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4\"></div>\r\n          <p className=\"text-sm text-gray-500 font-mono\">Preparing receipt...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getDocumentTitle = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Quote': return 'QUOTATION';\r\n      case 'Paid': return 'SALES RECEIPT';\r\n      case 'Installment Sale': return 'INSTALLMENT SALE';\r\n      case 'NOT PAID':\r\n      default: return 'INVOICE';\r\n    }\r\n  };\r\n\r\n  const getDocumentNumberLabel = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Quote': return 'Quote #:';\r\n      case 'Paid': return 'Receipt #:';\r\n      case 'Installment Sale': return 'Installment #:';\r\n      default: return 'Invoice #:';\r\n    }\r\n  };\r\n\r\n  const subtotalBeforeDiscount = sale.items.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n  const totalDiscountAmount = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n\r\n  const subtotalAfterDiscount = subtotalBeforeDiscount - totalDiscountAmount;\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotalAfterDiscount * (taxRate / 100);\r\n  const totalAmount = subtotalAfterDiscount + taxAmount;\r\n  const totalPaidFromHistory = (payments || []).reduce((sum, p) => sum + (p.amount || 0), 0);\r\n\r\n  const displayAmountPaid = sale.paymentStatus === 'Installment Sale' || (sale.paymentStatus === 'Paid' && totalPaidFromHistory > 0)\r\n    ? totalPaidFromHistory\r\n    : (sale.amountPaid || totalAmount);\r\n\r\n  const displayAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, totalAmount - totalPaidFromHistory)\r\n    : (sale.amountDue || 0);\r\n\r\n  const paymentMethods = settings.paymentInfo ? parsePaymentInfo(settings.paymentInfo) : [];\r\n  const hasPaymentInfo = includePaymentInfo &&\r\n    paymentMethods.length > 0 &&\r\n    paymentMethods.some(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '');\r\n\r\n  const displayCurrency = currency || settings.currency;\r\n  const receiptDate = new Date(sale.date);\r\n  const currentDateTime = new Date();\r\n\r\n  return (\r\n    <div className=\"flex justify-center bg-gray-100 p-4 sm:p-8 overflow-hidden\">\r\n      {/* Simulation of Thermal Paper */}\r\n      <div\r\n        className=\"relative bg-white shadow-2xl font-mono text-[11px] leading-tight text-black flex flex-col mx-auto\"\r\n        style={{\r\n          width: '58mm',\r\n          minHeight: '140mm',\r\n          padding: '6mm 4mm',\r\n          boxShadow: '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',\r\n          borderTop: '1px dashed #e5e7eb',\r\n          borderBottom: '1px dashed #e5e7eb',\r\n        }}\r\n      >\r\n        {/* Serrated Edge Pattern (Top) */}\r\n        <div className=\"absolute top-0 left-0 w-full h-1 overflow-hidden flex\" style={{ opacity: 0.2 }}>\r\n          {Array.from({ length: 20 }).map((_, i) => (\r\n            <div key={i} className=\"w-4 h-4 bg-gray-300 transform rotate-45 -translate-y-2 translate-x-1\" />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Header Section */}\r\n        <div className=\"flex flex-col items-center mb-4 text-center\">\r\n          {settings.businessLogo && (\r\n            <div className=\"mb-2 w-full flex justify-center\">\r\n              <img\r\n                src={settings.businessLogo}\r\n                alt=\"Logo\"\r\n                className=\"h-12 w-auto object-contain max-w-[40mm]\"\r\n              />\r\n            </div>\r\n          )}\r\n          <div className=\"text-[14px] font-black uppercase tracking-tight mb-0.5\">{settings.businessName}</div>\r\n          <div className=\"text-[9px] font-bold opacity-80\">{settings.businessAddress}</div>\r\n          <div className=\"text-[9px] font-bold opacity-80\">TEL: {settings.businessPhone}</div>\r\n          {settings.businessEmail && (\r\n            <div className=\"text-[9px] font-bold opacity-80 lowercase\">{settings.businessEmail}</div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Separator */}\r\n        <div className=\"border-b border-black border-dashed w-full my-2\"></div>\r\n\r\n        {/* Document Title & Basic Info */}\r\n        <div className=\"text-center mb-3\">\r\n          <div className=\"text-[12px] font-black underline mb-1\">{getDocumentTitle()}</div>\r\n          <div className=\"flex justify-between text-[9px] font-bold\">\r\n            <span>{getDocumentNumberLabel()}</span>\r\n            <span>{sale.receiptNumber}</span>\r\n          </div>\r\n          <div className=\"flex justify-between text-[9px]\">\r\n            <span>DATE:</span>\r\n            <span>{format(receiptDate, 'dd/MM/yyyy')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between text-[9px]\">\r\n            <span>TIME:</span>\r\n            <span>{format(currentDateTime, 'HH:mm')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between text-[9px] font-black\">\r\n            <span>STATUS:</span>\r\n            <span>{sale.paymentStatus.toUpperCase()}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Customer Section */}\r\n        {sale.customerName && (\r\n          <div className=\"mb-3 bg-gray-50 p-1.5 border border-gray-100 italic\">\r\n            <div className=\"font-black text-[9px] not-italic uppercase mb-0.5\">Customer:</div>\r\n            <div className=\"font-bold\">{sale.customerName}</div>\r\n            {sale.customerAddress && <div className=\"text-[9px] opacity-70\">{sale.customerAddress}</div>}\r\n            {sale.customerContact && <div className=\"text-[9px] opacity-70\">{sale.customerContact}</div>}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"border-b border-black border-dashed w-full my-2\"></div>\r\n\r\n        {/* Items Table */}\r\n        <div className=\"mb-4\">\r\n          <div className=\"flex justify-between font-black text-[9px] pb-1 border-b border-black mb-1.5 uppercase\">\r\n            <span className=\"w-[60%]\">Description</span>\r\n            <span className=\"w-[15%] text-right\">Qty</span>\r\n            <span className=\"w-[25%] text-right\">Amt</span>\r\n          </div>\r\n\r\n          {sale.items.map((item, index) => {\r\n            const itemSubtotal = item.quantity * item.price;\r\n            const discountAmount = item.discountType === 'amount'\r\n              ? (item.discountAmount || 0)\r\n              : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n            const finalAmount = itemSubtotal - discountAmount;\r\n\r\n            return (\r\n              <div key={index} className=\"mb-2 last:mb-0\">\r\n                <div className=\"font-bold text-[10px] break-words uppercase\">{item.description}</div>\r\n                <div className=\"flex justify-between text-[9px] items-center\">\r\n                  <span className=\"text-gray-600 font-bold truncate\">\r\n                    {formatNumber(item.price)}\r\n                  </span>\r\n                  <div className=\"flex-1 border-b border-dotted border-gray-300 mx-2\"></div>\r\n                  <span className=\"font-bold\">\r\n                    {formatNumber(item.quantity).padStart(2, '0')}x {formatNumber(finalAmount)}\r\n                  </span>\r\n                </div>\r\n                {discountAmount > 0 && (\r\n                  <div className=\"flex justify-between text-[8px] italic text-gray-500 font-bold\">\r\n                    <span>- DISCOUNT {item.discountType === 'percentage' ? `(${item.discountPercentage}%)` : ''}</span>\r\n                    <span>-{formatNumber(discountAmount)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <div className=\"border-b border-black border-dashed w-full my-2\"></div>\r\n\r\n        {/* Totals Section */}\r\n        <div className=\"mb-4 space-y-0.5\">\r\n          <div className=\"flex justify-between font-bold\">\r\n            <span>SUBTOTAL:</span>\r\n            <span>{displayCurrency} {formatNumber(subtotalBeforeDiscount)}</span>\r\n          </div>\r\n          {totalDiscountAmount > 0 && (\r\n            <div className=\"flex justify-between font-bold italic opacity-70\">\r\n              <span>DISCOUNT:</span>\r\n              <span>-{displayCurrency} {formatNumber(totalDiscountAmount)}</span>\r\n            </div>\r\n          )}\r\n          {taxRate > 0 && (\r\n            <div className=\"flex justify-between font-bold\">\r\n              <span>TAX ({taxRate}%):</span>\r\n              <span>{displayCurrency} {formatNumber(taxAmount)}</span>\r\n            </div>\r\n          )}\r\n          <div className=\"flex justify-between font-black text-[13px] border-t border-black pt-1.5 mt-1\">\r\n            <span>TOTAL:</span>\r\n            <span>{displayCurrency} {formatNumber(totalAmount)}</span>\r\n          </div>\r\n\r\n          {sale.paymentStatus === 'Installment Sale' && (\r\n            <div className=\"mt-2 pt-1 border-t border-gray-200 border-dotted\">\r\n              <div className=\"flex justify-between font-bold\">\r\n                <span>PAID:</span>\r\n                <span>{displayCurrency} {formatNumber(displayAmountPaid)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between font-black text-red-600\">\r\n                <span>DUE:</span>\r\n                <span>{displayCurrency} {formatNumber(displayAmountDue)}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Amount in Words */}\r\n        <div className=\"mb-4 text-[9px] italic opacity-80 border-t border-b border-gray-100 py-1\">\r\n          <span className=\"font-black not-italic uppercase\">Words:</span> {displayCurrency} {numberToWords(totalAmount)} only.\r\n        </div>\r\n\r\n        {/* Payment Info */}\r\n        {hasPaymentInfo && (\r\n          <div className=\"mb-4 text-[9px]\">\r\n            <div className=\"font-black underline mb-1 uppercase\">Payment Channels:</div>\r\n            {paymentMethods\r\n              .filter(p => p.method.trim() !== '' || p.accountNumber.trim() !== '' || p.accountName.trim() !== '')\r\n              .map((p, i) => (\r\n                <div key={i} className=\"mb-1 last:mb-0 font-bold\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"uppercase\">{p.method}:</span>\r\n                    <span>{p.accountNumber}</span>\r\n                  </div>\r\n                  <div className=\"text-[8px] opacity-70 italic text-right\">{p.accountName}</div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes */}\r\n        {sale.notes && (\r\n          <div className=\"mb-4 text-[9px] border border-gray-100 p-1 bg-gray-50\">\r\n            <div className=\"font-black uppercase mb-0.5\">Notes:</div>\r\n            <div className=\"font-bold opacity-70 whitespace-pre-wrap italic\">{sale.notes}</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Signature Section */}\r\n        <div className=\"mt-auto pt-6 flex flex-col items-center\">\r\n          {settings.signature ? (\r\n            <div className=\"flex flex-col items-center\">\r\n              <img\r\n                src={settings.signature}\r\n                alt=\"Signature\"\r\n                className=\"h-10 w-auto object-contain mb-1 mix-blend-multiply opacity-90\"\r\n              />\r\n              <div className=\"w-[80%] border-t border-black border-dashed\"></div>\r\n              <div className=\"text-[8px] font-black uppercase mt-1\">Authorized Signature</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"w-full flex flex-col items-center\">\r\n              <div className=\"w-[80%] border-t border-black border-dashed pt-1\"></div>\r\n              <div className=\"text-[8px] font-black uppercase mt-1\">Authorized Signature</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"text-center mt-6\">\r\n          <div className=\"text-[10px] font-black mb-1 italic\">THANK YOU!</div>\r\n          <div className=\"text-[8px] font-bold opacity-60\">\r\n            GONZA SYSTEMS SUPPORT\r\n            <br />\r\n            PRINTED AT {format(new Date(), 'HH:mm dd/MM/yy')}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Serrated Edge Pattern (Bottom) */}\r\n        <div className=\"absolute bottom-0 left-0 w-full h-1 overflow-hidden flex\" style={{ opacity: 0.2 }}>\r\n          {Array.from({ length: 20 }).map((_, i) => (\r\n            <div key={i} className=\"w-4 h-4 bg-gray-300 transform rotate-45 translate-y-2 translate-x-1\" />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThermalReceipt;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/PrintableReceipt.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Share2 } from \"lucide-react\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { generatePDF } from '@/utils/generatePDF';\r\nimport { directPrint } from '@/utils/directPrint';\r\nimport { format } from 'date-fns';\r\nimport { Printer, Download, Loader2, Smartphone } from 'lucide-react';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { parsePaymentInfo, useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { numberToWords } from '@/utils/numberToWords';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { isIOS, isAndroid } from '@/utils/deviceDetection';\r\nimport ThermalReceipt from './ThermalReceipt';\r\nimport { toast } from 'sonner';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\nimport { print, checkBridgeStatus } from \"@/utils/thermalPrinterPlug\";\r\nimport { generateThermalText } from \"@/utils/generateThermalText\";\r\nimport { generateThermalReceipt } from \"@/utils/generateThermalReceipt\";\r\n\r\ninterface PrintableReceiptProps {\r\n  sale: Sale;\r\n  currency?: string;\r\n  isMobile?: boolean;\r\n  includePaymentInfo?: boolean;\r\n}\r\n\r\ntype ReceiptType = 'standard' | 'thermal';\r\n\r\nconst PrintableReceipt: React.FC<PrintableReceiptProps> = ({\r\n  sale,\r\n  currency,\r\n  isMobile,\r\n  includePaymentInfo = true\r\n}) => {\r\n  const receiptRef = useRef<HTMLDivElement>(null);\r\n  const thermalReceiptRef = useRef<HTMLDivElement>(null);\r\n  const { settings, isLoading: settingsLoading } = useBusinessSettings();\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n  const [receiptType, setReceiptType] = useState<ReceiptType>('standard');\r\n  const [isPrinting, setIsPrinting] = useState(false);\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [isSharing, setIsSharing] = useState(false);\r\n  const [isBridgeOnline, setIsBridgeOnline] = useState(false);\r\n  const isMobileDevice = useIsMobile();\r\n\r\n  // Update receipt type when settings are loaded\r\n  useEffect(() => {\r\n    if (settings.defaultPrintFormat) {\r\n      setReceiptType(settings.defaultPrintFormat);\r\n    }\r\n\r\n    // Check bridge status on mount\r\n    const checkBridge = async () => {\r\n      const isOnline = await checkBridgeStatus();\r\n      setIsBridgeOnline(isOnline);\r\n    };\r\n    checkBridge();\r\n  }, [settings.defaultPrintFormat]);\r\n\r\n  // Determine document title based on payment status\r\n  const getDocumentTitle = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Quote':\r\n        return 'QUOTATION';\r\n      case 'Paid':\r\n        return 'SALES RECEIPT';\r\n      case 'Installment Sale':\r\n        return 'INVOICE';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'INVOICE';\r\n    }\r\n  };\r\n\r\n  const getDocumentNumberLabel = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Quote':\r\n        return 'Quote #:';\r\n      case 'Paid':\r\n        return 'Receipt #:';\r\n      case 'Installment Sale':\r\n        return 'Installment #:';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'Invoice #:';\r\n    }\r\n  };\r\n\r\n  const documentTitle = getDocumentTitle();\r\n  const documentNumberLabel = getDocumentNumberLabel();\r\n\r\n  // Calculate subtotal with discounts\r\n  const subtotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Calculate tax amount based on taxRate (default to 0 if not present)\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotal * (taxRate / 100);\r\n\r\n  // Total amount including tax\r\n  const totalAmount = subtotal + taxAmount;\r\n\r\n  // For installment sales, use payment history total; for others use the provided amounts\r\n  const totalPaidFromHistory = payments.reduce((sum, payment) => sum + payment.amount, 0);\r\n  const displayAmountPaid = sale.paymentStatus === 'Installment Sale' || (sale.paymentStatus === 'Paid' && totalPaidFromHistory > 0)\r\n    ? totalPaidFromHistory\r\n    : (sale.amountPaid || totalAmount);\r\n  const displayAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, totalAmount - totalPaidFromHistory)\r\n    : (sale.amountDue || 0);\r\n\r\n  // Get the total amount in words\r\n  const totalAmountInWords = numberToWords(totalAmount);\r\n\r\n  // Check if we should show the tax row\r\n  const showTaxRow = taxRate > 0;\r\n\r\n  // Check if this is an installment sale\r\n  const isInstallmentSale = sale.paymentStatus === 'Installment Sale';\r\n\r\n  // Parse payment info into structured format\r\n  const paymentMethods = settings.paymentInfo ? parsePaymentInfo(settings.paymentInfo) : [];\r\n  // Only show payment methods table if there are valid payment methods AND includePaymentInfo is true\r\n  const hasPaymentInfo = includePaymentInfo &&\r\n    paymentMethods.length > 0 &&\r\n    paymentMethods.some(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '');\r\n\r\n  // Use the currency prop if provided, otherwise use the one from settings\r\n  const displayCurrency = currency || settings.currency;\r\n\r\n  // Check if device is iOS or Android\r\n  const isIOSDevice = isIOS();\r\n  const isAndroidDevice = isAndroid();\r\n\r\n  // Get the receipt date and current time for display\r\n  const receiptDate = new Date(sale.date);\r\n  const currentDateTime = new Date();\r\n\r\n  // Helper function to create structured receipt data\r\n  const createReceiptData = () => {\r\n    const receiptDate = new Date(sale.date);\r\n    const currentDateTime = new Date();\r\n    const paymentMethods = settings.paymentInfo ? parsePaymentInfo(settings.paymentInfo) : [];\r\n    const hasPaymentInfo = includePaymentInfo &&\r\n      paymentMethods.length > 0 &&\r\n      paymentMethods.some(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '');\r\n\r\n    return {\r\n      documentTitle: getDocumentTitle(),\r\n      documentNumberLabel: getDocumentNumberLabel(),\r\n      receiptNumber: sale.receiptNumber,\r\n      date: format(receiptDate, 'MMM dd, yyyy'),\r\n      time: format(currentDateTime, 'hh:mm a'),\r\n      status: sale.paymentStatus,\r\n      businessName: settings.businessName,\r\n      businessAddress: settings.businessAddress,\r\n      businessPhone: settings.businessPhone,\r\n      businessEmail: settings.businessEmail,\r\n      businessLogo: settings.businessLogo,\r\n      signature: settings.signature,\r\n      customerName: sale.customerName,\r\n      customerAddress: sale.customerAddress,\r\n      customerContact: sale.customerContact,\r\n      items: sale.items.map(item => {\r\n        const itemSubtotal = item.quantity * item.price;\r\n        const discountAmount = item.discountType === 'amount'\r\n          ? (item.discountAmount || 0)\r\n          : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n        return {\r\n          description: item.description,\r\n          quantity: item.quantity,\r\n          unitPrice: item.price,\r\n          discountPercentage: item.discountPercentage || 0,\r\n          discountAmount,\r\n          discountType: item.discountType || 'percentage',\r\n          amount: itemSubtotal - discountAmount\r\n        };\r\n      }),\r\n      subtotal,\r\n      taxRate,\r\n      taxAmount,\r\n      totalAmount,\r\n      amountPaid: displayAmountPaid,\r\n      amountDue: displayAmountDue,\r\n      isInstallmentSale,\r\n      totalAmountInWords,\r\n      paymentMethods: hasPaymentInfo ? paymentMethods.filter(pm =>\r\n        pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== ''\r\n      ) : undefined,\r\n      currency: displayCurrency,\r\n      showTaxRow,\r\n      hasPaymentInfo,\r\n      notes: sale.notes\r\n    };\r\n  };\r\n\r\n  // Optimized download handler with vector PDF for standard receipts\r\n  const handleDownloadPDF = async () => {\r\n    if (!receiptRef.current) return;\r\n\r\n    setIsDownloading(true);\r\n\r\n    try {\r\n      toast.success('Preparing download...');\r\n\r\n      const filePrefix = sale.paymentStatus === 'Quote'\r\n        ? 'Quote'\r\n        : (sale.paymentStatus === 'Paid' ? 'Receipt' : 'Invoice');\r\n\r\n      const fileName = receiptType === 'thermal'\r\n        ? `${filePrefix}_Thermal-${sale.receiptNumber}.pdf`\r\n        : `${filePrefix}-${sale.receiptNumber}.pdf`;\r\n\r\n      if (receiptType === 'standard') {\r\n        // Use new vector PDF generation for standard receipts\r\n        const { generateReceiptVectorPDF } = await import('@/utils/generateReceiptVectorPDF');\r\n        const receiptData = createReceiptData();\r\n        await generateReceiptVectorPDF(receiptData, {\r\n          filename: fileName,\r\n          orientation: 'portrait',\r\n          format: 'a4',\r\n          margins: { top: 20, right: 20, bottom: 20, left: 20 }\r\n        });\r\n      } else {\r\n        // Use existing method for thermal receipts\r\n        await generatePDF(receiptRef.current, fileName, { isReceipt: true });\r\n      }\r\n\r\n      toast.success('Receipt downloaded successfully!');\r\n    } catch (error) {\r\n      console.error('Error downloading receipt:', error);\r\n      toast.error('Failed to download receipt. Please try again.');\r\n    } finally {\r\n      setIsDownloading(false);\r\n    }\r\n  };\r\n\r\n  // Share handle share\r\n  const handleShare = async () => {\r\n    setIsSharing(true);\r\n    try {\r\n      const { generateReceiptVectorPDF } = await import('@/utils/generateReceiptVectorPDF');\r\n      const receiptData = createReceiptData();\r\n      const pdfBlob = await generateReceiptVectorPDF(receiptData, { returnBlob: true });\r\n      if (!pdfBlob) return;\r\n\r\n      //  Use dynamic prefix same as download\r\n      const filePrefix =\r\n        sale.paymentStatus === 'Quote'\r\n          ? 'Quotation'\r\n          : sale.paymentStatus === 'Paid'\r\n            ? 'Receipt'\r\n            : 'Invoice';\r\n\r\n      const fileName = `${filePrefix}-${sale.receiptNumber}.pdf`;\r\n\r\n      const file = new File([pdfBlob], fileName, { type: 'application/pdf' });\r\n\r\n      if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n        await navigator.share({\r\n          files: [file],\r\n          title: `${filePrefix} - ${sale.receiptNumber}`,\r\n          text: `${filePrefix} #${sale.receiptNumber}`,\r\n        });\r\n        toast.success(`${filePrefix} shared successfully!`);\r\n      } else {\r\n        toast.error('Sharing not supported on this device.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sharing document:', error);\r\n      toast.error('Failed to share document.');\r\n    } finally {\r\n      setIsSharing(false);\r\n    }\r\n  };\r\n\r\n  // Optimized print handler with PDF generation for desktop\r\n  const handlePrint = async () => {\r\n    const printElement =\r\n      receiptType === 'thermal' ? thermalReceiptRef.current : receiptRef.current;\r\n    if (!printElement) return;\r\n\r\n    setIsPrinting(true);\r\n\r\n    try {\r\n      if (receiptType === 'thermal') {\r\n        const saleWithPayments = { ...sale, payments: payments || [] };\r\n        const receiptData = await generateThermalReceipt(saleWithPayments, settings, displayCurrency);\r\n\r\n        // Always use public API (prefers bridge now)\r\n        const result = await print(receiptData, settings.defaultPrinterName);\r\n        const { success, message } = result || { success: false, message: 'Unknown print error' };\r\n\r\n        success ? toast.success(message) : toast.error(message);\r\n        return;\r\n      }\r\n\r\n      toast.success('Preparing receipt for printing...');\r\n\r\n      if (isMobileDevice) {\r\n        const baseDocumentName =\r\n          sale.paymentStatus === 'Quote'\r\n            ? 'Quotation'\r\n            : sale.paymentStatus === 'Paid'\r\n              ? 'Receipt'\r\n              : 'Invoice';\r\n\r\n        directPrint(printElement, baseDocumentName);\r\n        toast.success('Print dialog opened!');\r\n      } else {\r\n        const { generateReceiptVectorPDF } = await import(\r\n          '@/utils/generateReceiptVectorPDF'\r\n        );\r\n        const receiptData = createReceiptData();\r\n        const pdfBlob = await generateReceiptVectorPDF(receiptData, {\r\n          returnBlob: true,\r\n        });\r\n\r\n        if (pdfBlob) {\r\n          const blobUrl = URL.createObjectURL(pdfBlob);\r\n          const printWindow = window.open(blobUrl, '_blank');\r\n\r\n          if (printWindow) {\r\n            printWindow.addEventListener('load', () => {\r\n              setTimeout(() => {\r\n                printWindow.focus();\r\n                printWindow.print();\r\n                printWindow.addEventListener('afterprint', () => printWindow.close());\r\n              }, 500);\r\n            });\r\n          }\r\n\r\n          setTimeout(() => URL.revokeObjectURL(blobUrl), 30000);\r\n        }\r\n\r\n        toast.success('Print dialog opened!');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error printing receipt:', error);\r\n      toast.error(error?.message || 'Failed to print receipt. Please try again.');\r\n    } finally {\r\n      setIsPrinting(false);\r\n    }\r\n  };\r\n\r\n  const handleDirectThermalPrint = async () => {\r\n    setIsPrinting(true);\r\n    try {\r\n      const saleWithPayments = { ...sale, payments };\r\n      const receiptData = await generateThermalReceipt(saleWithPayments, settings, displayCurrency);\r\n      const result = await print(receiptData, settings.defaultPrinterName);\r\n      const { success, message } = result || { success: false, message: 'Unknown print error' };\r\n\r\n      if (success) {\r\n        toast.success(message || 'Sent to thermal printer');\r\n      } else {\r\n        toast.error(message || 'Thermal printing failed');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error in direct thermal print:', error);\r\n      toast.error(error?.message || 'Failed to print thermal receipt');\r\n    } finally {\r\n      setIsPrinting(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Show loading state while business settings are loading\r\n  if (settingsLoading) {\r\n    return (\r\n      <div className={`bg-white ${isMobile ? 'p-2' : 'p-6'} rounded-lg shadow-md`}>\r\n        <div className=\"mb-4 flex justify-between items-center flex-wrap\">\r\n          <h2 className={`${isMobile ? 'text-xl' : 'text-2xl'} font-bold text-sales-primary`}>{documentTitle}</h2>\r\n        </div>\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <div className=\"text-center\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground\" />\r\n            <p className=\"text-muted-foreground\">Loading business settings...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-white ${isMobile ? 'p-2' : 'p-6'} rounded-lg shadow-md`}>\r\n      <div className=\"mb-4 flex justify-between items-center flex-wrap\">\r\n        <h2 className={`${isMobile ? 'text-xl' : 'text-2xl'} font-bold text-sales-primary`}>{documentTitle}</h2>\r\n\r\n        <div className=\"print:hidden flex space-x-2 mt-2 sm:mt-0\">\r\n          {/* Smart Print button - handles both Standard (System Print) and Thermal (Direct/Bridge) */}\r\n          {!isMobile && (\r\n            <Button\r\n              variant=\"default\"\r\n              size=\"default\"\r\n              onClick={handlePrint}\r\n              disabled={isPrinting || isDownloading || isSharing}\r\n              className=\"flex items-center\"\r\n              title=\"Print\"\r\n            >\r\n              {isPrinting ? (\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <Printer className=\"h-4 w-4\" />\r\n              )}\r\n            </Button>\r\n          )}\r\n\r\n          {/* Other actions moved to a dropdown or kept separate? User said 'just one print button'. \r\n              I'll keep Download and Share but grouped to keep 'Print' as the ONE print action. */}\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size={isMobile ? \"sm\" : \"default\"}\r\n              onClick={handleDownloadPDF}\r\n              disabled={isPrinting || isDownloading || isSharing}\r\n              className=\"flex items-center\"\r\n              title=\"Download PDF\"\r\n            >\r\n              {isDownloading ? (\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <Download className=\"h-4 w-4\" />\r\n              )}\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size={isMobile ? \"sm\" : \"default\"}\r\n              onClick={handleShare}\r\n              disabled={isPrinting || isDownloading || isSharing}\r\n              className=\"flex items-center\"\r\n              title=\"Share\"\r\n            >\r\n              {isSharing ? (\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <Share2 className=\"h-4 w-4\" />\r\n              )}\r\n            </Button>\r\n\r\n            {/* Mobile Bluetooth Print App Integration - Visible only on mobile for the app */}\r\n            {isMobile && (\r\n              <Button\r\n                variant=\"outline\"\r\n                size={isMobile ? \"sm\" : \"default\"}\r\n                onClick={async () => {\r\n                  const ua = navigator.userAgent || \"\";\r\n                  const isAndroidActual = /android/i.test(ua);\r\n                  const isIOSActual = !isAndroidActual && (/iPad|iPhone|iPod/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n                  // Diagnostics\r\n                  console.warn('--- MOBILE PRINT START ---');\r\n                  console.warn('User Agent:', ua);\r\n                  console.warn('isAndroid (Direct Check):', isAndroidActual);\r\n                  console.warn('isIOS (Direct Check):', isIOSActual);\r\n\r\n                  const platformParam = isAndroidActual ? 'platform=android' : (isIOSActual ? 'platform=ios' : 'default');\r\n                  const anonKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\r\n                  const functionUrl = `${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/print-receipt?id=${sale.id}&${platformParam}&apikey=${anonKey}`;\r\n\r\n                  setIsPrinting(true);\r\n                  try {\r\n                    console.log('Fetching from:', functionUrl);\r\n                    const response = await fetch(functionUrl);\r\n\r\n                    if (!response.ok) {\r\n                      const errorBody = await response.text();\r\n                      console.error('Print Function Error:', response.status, errorBody);\r\n                      throw new Error(`Server ${response.status}: ${errorBody || 'Bad Request'}`);\r\n                    }\r\n\r\n                    const data = await response.json();\r\n                    console.log('Data fetched successfully');\r\n\r\n                    if (isAndroidActual) {\r\n                      console.log('Redirecting to Android App using RAW URL...');\r\n                      window.location.href = `my.bluetoothprint.scheme://${functionUrl}`;\r\n                    } else if (isIOSActual) {\r\n                      console.log('Redirecting to iOS App (Direct Push)...');\r\n                      const encodedJSON = encodeURIComponent(JSON.stringify(data));\r\n                      window.location.href = `thermer://print?data=${encodedJSON}`;\r\n                    } else {\r\n                      toast.error('Mobile printing is optimized for iOS and Android');\r\n                    }\r\n                  } catch (error: any) {\r\n                    console.error('Unified Print Error:', error);\r\n                    toast.error(error.message || 'Failed to prepare receipt');\r\n                  } finally {\r\n                    setIsPrinting(false);\r\n                    console.warn('--- MOBILE PRINT END ---');\r\n                  }\r\n                }}\r\n                className=\"flex items-center text-blue-600 border-blue-200 hover:bg-blue-50\"\r\n                title=\"Print\"\r\n              >\r\n                {isPrinting ? (\r\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                ) : (\r\n                  <Printer className=\"h-4 w-4\" />\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div className=\"mb-4 print:hidden\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <label htmlFor=\"receipt-type\" className=\"text-sm font-medium\">\r\n            Receipt Format:\r\n          </label>\r\n          <Select value={receiptType} onValueChange={(value: ReceiptType) => setReceiptType(value)}>\r\n            <SelectTrigger className=\"w-48\">\r\n              <SelectValue placeholder=\"Select receipt type\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"standard\">Standard Receipt</SelectItem>\r\n              <SelectItem value=\"thermal\">Thermal Receipt</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={receiptRef}>\r\n        {receiptType === 'thermal' ? (\r\n          <div ref={thermalReceiptRef}>\r\n            <ThermalReceipt\r\n              sale={sale}\r\n              currency={displayCurrency}\r\n              includePaymentInfo={includePaymentInfo}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div className={`border-[1.5px] border-black ${isMobile ? 'p-3' : 'p-6'} rounded-md`}>\r\n            <div className=\"flex flex-col items-center mb-4 gap-2 text-center w-full\">\r\n              <div className=\"w-full\">\r\n                <div className=\"text-lg sm:text-2xl font-bold text-gray-900 mb-1\">{settings.businessName?.toUpperCase()}</div>\r\n                <div className={`${isMobile ? 'text-xs' : 'text-sm'} text-gray-600 font-medium`}>{settings.businessAddress}</div>\r\n                <div className=\"text-xs sm:text-sm text-gray-600\">Phone: {settings.businessPhone} | Email: {settings.businessEmail}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <Separator className=\"my-3 sm:my-4 border-black border-t-[1.5px]\" />\r\n\r\n            <div className=\"text-center mb-4\">\r\n              <h1 className={`font-bold ${isMobile ? 'text-xl' : 'text-2xl'} uppercase tracking-wider text-gray-900`}>\r\n                {sale.paymentStatus === 'Quote' ? 'QUOTATION' : (sale.paymentStatus === 'Paid' ? 'SALES RECEIPT' : 'INVOICE')}\r\n              </h1>\r\n            </div>\r\n\r\n            <div className=\"flex justify-between mb-4 sm:mb-6 text-sm flex-wrap gap-2\">\r\n              <div>\r\n                <div className=\"font-semibold\">{documentNumberLabel} {sale.receiptNumber}</div>\r\n                <div>Date: {format(receiptDate, 'MMM dd, yyyy')}</div>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <div className=\"font-semibold\">{sale.paymentStatus}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4 sm:mb-6\">\r\n              <h3 className=\"font-semibold mb-2 text-sm\">Customer Information:</h3>\r\n              <div className=\"text-sm\">\r\n                <div>{sale.customerName}</div>\r\n                <div>{sale.customerAddress}</div>\r\n                <div>{sale.customerContact}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n              {/* Desktop Table View */}\r\n              <div className=\"hidden sm:block\">\r\n                <table className=\"w-full mb-4 sm:mb-6 text-sm\">\r\n                  <thead>\r\n                    <tr className=\"border-b border-black border-b-[1.5px]\">\r\n                      <th className=\"py-2 text-left bg-gray-200 px-2\">Description</th>\r\n                      <th className=\"py-2 text-right bg-gray-200 px-2\">Qty</th>\r\n                      <th className=\"py-2 text-right bg-gray-200 px-2\">Unit Price</th>\r\n                      <th className=\"py-2 text-right bg-gray-200 px-2\">Discount</th>\r\n                      <th className=\"py-2 text-right bg-gray-200 px-2\">Amount</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {sale.items.map((item, index) => {\r\n                      const itemSubtotal = item.quantity * item.price;\r\n                      const discountAmount = item.discountType === 'amount'\r\n                        ? (item.discountAmount || 0)\r\n                        : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n                      const finalAmount = itemSubtotal - discountAmount;\r\n\r\n                      return (\r\n                        <tr key={index} className=\"border-b border-black\">\r\n                          <td className=\"py-2 sm:py-3 break-all whitespace-normal\">{item.description}</td>\r\n                          <td className=\"py-2 sm:py-3 text-right\">{formatNumber(item.quantity)}</td>\r\n                          <td className=\"py-2 sm:py-3 text-right\">{displayCurrency} {formatNumber(item.price)}</td>\r\n                          <td className=\"py-2 sm:py-3 text-right\">\r\n                            {item.discountType === 'amount'\r\n                              ? (item.discountAmount && item.discountAmount > 0 ? `${displayCurrency} ${formatNumber(item.discountAmount)}` : '-')\r\n                              : ((item.discountPercentage || 0) > 0 ? `${item.discountPercentage}%` : '-')\r\n                            }\r\n                          </td>\r\n                          <td className=\"py-2 sm:py-3 text-right\">{displayCurrency} {formatNumber(finalAmount)}</td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                  <tfoot>\r\n                    {(() => {\r\n                      const totalDiscount = sale.items.reduce((total, item) => {\r\n                        const itemSubtotal = item.quantity * item.price;\r\n                        const discountAmount = item.discountType === 'amount'\r\n                          ? (item.discountAmount || 0)\r\n                          : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n                        return total + discountAmount;\r\n                      }, 0);\r\n\r\n                      return (\r\n                        <>\r\n                          <tr className=\"border-t border-black border-t-[1.5px]\">\r\n                            <td colSpan={4} className=\"py-2 text-right font-medium bg-gray-200 px-2\">Subtotal (before discount):</td>\r\n                            <td className=\"py-2 text-right bg-gray-200 px-2\">{displayCurrency} {formatNumber(subtotal + totalDiscount)}</td>\r\n                          </tr>\r\n                          {totalDiscount > 0 && (\r\n                            <tr>\r\n                              <td colSpan={4} className=\"py-2 text-right font-medium bg-orange-100 px-2\">Total Discount:</td>\r\n                              <td className=\"py-2 text-right bg-orange-100 px-2\">-{displayCurrency} {formatNumber(totalDiscount)}</td>\r\n                            </tr>\r\n                          )}\r\n                          <tr>\r\n                            <td colSpan={4} className=\"py-2 text-right font-medium bg-gray-200 px-2\">Subtotal:</td>\r\n                            <td className=\"py-2 text-right bg-gray-200 px-2\">{displayCurrency} {formatNumber(subtotal)}</td>\r\n                          </tr>\r\n                        </>\r\n                      );\r\n                    })()}\r\n                    {showTaxRow && (\r\n                      <tr>\r\n                        <td colSpan={4} className=\"py-2 text-right font-medium bg-gray-200 px-2\">Tax ({taxRate}%):</td>\r\n                        <td className=\"py-2 text-right bg-gray-200 px-2\">{displayCurrency} {formatNumber(taxAmount)}</td>\r\n                      </tr>\r\n                    )}\r\n                    <tr className=\"border-t border-black border-t-[1.5px] font-bold\">\r\n                      <td colSpan={4} className=\"py-2 sm:py-3 text-right bg-gray-300 px-2\">Total:</td>\r\n                      <td className=\"py-2 sm:py-3 text-right bg-gray-300 px-2\">{displayCurrency} {formatNumber(totalAmount)}</td>\r\n                    </tr>\r\n                    {isInstallmentSale && (\r\n                      <>\r\n                        <tr>\r\n                          <td colSpan={4} className=\"py-2 text-right font-medium bg-blue-100 px-2\">Amount Paid:</td>\r\n                          <td className=\"py-2 text-right bg-blue-100 px-2\">{displayCurrency} {formatNumber(displayAmountPaid)}</td>\r\n                        </tr>\r\n                        <tr>\r\n                          <td colSpan={4} className=\"py-2 text-right font-medium bg-red-100 px-2\">Amount Due:</td>\r\n                          <td className=\"py-2 text-right bg-red-100 px-2\">{displayCurrency} {formatNumber(displayAmountDue)}</td>\r\n                        </tr>\r\n                      </>\r\n                    )}\r\n                    <tr>\r\n                      <td colSpan={5} className=\"py-2 sm:py-3 text-left border-t border-black px-2 italic\">\r\n                        <span className=\"font-medium\">Amount in words:</span> {displayCurrency} {totalAmountInWords} only\r\n                      </td>\r\n                    </tr>\r\n                  </tfoot>\r\n                </table>\r\n              </div>\r\n\r\n              {/* Mobile Stacked View */}\r\n              <div className=\"block sm:hidden\">\r\n                <div className=\"border-b-2 border-black mb-2 pb-1 font-bold\">Items</div>\r\n                {sale.items.map((item, index) => {\r\n                  const itemSubtotal = item.quantity * item.price;\r\n                  const discountAmount = item.discountType === 'amount'\r\n                    ? (item.discountAmount || 0)\r\n                    : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n                  const finalAmount = itemSubtotal - discountAmount;\r\n\r\n                  return (\r\n                    <div key={index} className=\"mb-3 border-b border-gray-200 pb-2 last:border-0\">\r\n                      <div className=\"font-bold text-sm mb-1 break-all whitespace-normal\">{item.description}</div>\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <div className=\"text-gray-600\">\r\n                          {formatNumber(item.quantity)} x {displayCurrency} {formatNumber(item.price)}\r\n                        </div>\r\n                        <div className=\"font-bold\">\r\n                          {displayCurrency} {formatNumber(finalAmount)}\r\n                        </div>\r\n                      </div>\r\n                      {discountAmount > 0 && (\r\n                        <div className=\"flex justify-between text-xs text-orange-600 italic mt-0.5\">\r\n                          <span>Discount {item.discountType === 'percentage' ? `(${item.discountPercentage}%)` : ''}</span>\r\n                          <span>-{displayCurrency} {formatNumber(discountAmount)}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n\r\n                {/* Mobile Totals */}\r\n                <div className=\"mt-4 border-t-2 border-black pt-2 space-y-1\">\r\n                  {(() => {\r\n                    const totalDiscount = sale.items.reduce((total, item) => {\r\n                      const itemSubtotal = item.quantity * item.price;\r\n                      const discountAmount = item.discountType === 'amount'\r\n                        ? (item.discountAmount || 0)\r\n                        : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n                      return total + discountAmount;\r\n                    }, 0);\r\n\r\n                    return (\r\n                      <>\r\n                        <div className=\"flex justify-between text-sm\">\r\n                          <span className=\"font-medium\">Subtotal (before disc):</span>\r\n                          <span>{displayCurrency} {formatNumber(subtotal + totalDiscount)}</span>\r\n                        </div>\r\n                        {totalDiscount > 0 && (\r\n                          <div className=\"flex justify-between text-sm text-orange-600\">\r\n                            <span className=\"font-medium\">Total Discount:</span>\r\n                            <span>-{displayCurrency} {formatNumber(totalDiscount)}</span>\r\n                          </div>\r\n                        )}\r\n                        <div className=\"flex justify-between text-sm\">\r\n                          <span className=\"font-medium\">Subtotal:</span>\r\n                          <span>{displayCurrency} {formatNumber(subtotal)}</span>\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })()}\r\n\r\n                  {showTaxRow && (\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span className=\"font-medium\">Tax ({taxRate}%):</span>\r\n                      <span>{displayCurrency} {formatNumber(taxAmount)}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex justify-between text-base font-bold border-t border-black pt-1 mt-1\">\r\n                    <span>Total:</span>\r\n                    <span>{displayCurrency} {formatNumber(totalAmount)}</span>\r\n                  </div>\r\n\r\n                  {isInstallmentSale && (\r\n                    <>\r\n                      <div className=\"flex justify-between text-sm text-blue-600 pt-1\">\r\n                        <span className=\"font-medium\">Amount Paid:</span>\r\n                        <span>{displayCurrency} {formatNumber(displayAmountPaid)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-sm text-red-600\">\r\n                        <span className=\"font-medium\">Amount Due:</span>\r\n                        <span>{displayCurrency} {formatNumber(displayAmountDue)}</span>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  <div className=\"pt-2 text-xs italic border-t border-gray-200 mt-2\">\r\n                    <span className=\"font-medium\">Words:</span> {displayCurrency} {totalAmountInWords} only\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {hasPaymentInfo && (\r\n              <div className=\"mt-4 pt-3 border-t border-black\">\r\n                <h3 className=\"font-semibold text-sm mb-2\">Payment Information:</h3>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-gray-200\">\r\n                        <th className=\"font-medium py-1 px-2 text-left\">Payment Method</th>\r\n                        <th className=\"font-medium py-1 px-2 text-left\">Account Number</th>\r\n                        <th className=\"font-medium py-1 px-2 text-left\">Account Name</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {paymentMethods\r\n                        .filter(payment => payment.method.trim() !== '' || payment.accountNumber.trim() !== '' || payment.accountName.trim() !== '')\r\n                        .map((payment, index) => (\r\n                          <tr key={index}>\r\n                            <td className=\"py-1 px-2 font-medium\">{payment.method}</td>\r\n                            <td className=\"py-1 px-2\">{payment.accountNumber}</td>\r\n                            <td className=\"py-1 px-2\">{payment.accountName}</td>\r\n                          </tr>\r\n                        ))\r\n                      }\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {sale.notes && (\r\n              <div className=\"mt-4 pt-3 border-t border-black\">\r\n                <h3 className=\"font-semibold text-sm mb-2\">Notes:</h3>\r\n                <div className=\"text-sm whitespace-pre-wrap\">{sale.notes}</div>\r\n              </div>\r\n            )}\r\n\r\n\r\n            <div className=\"text-center text-xs sm:text-sm mt-4 sm:mt-8\">\r\n              <p className=\"font-medium\">Thank you for your business!</p>\r\n              <p className=\"text-gray-600 text-xs mt-3\">Created by Gonza Systems</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default PrintableReceipt;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8921, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/ReceiptDialog.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Sale } from '@/types';\r\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose,\r\n  DrawerTrigger\r\n} from '@/components/ui/drawer';\r\nimport PrintableReceipt from '@/components/PrintableReceipt';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { X } from 'lucide-react';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\n\r\ninterface ReceiptDialogProps {\r\n  isOpen: boolean;\r\n  sale: Sale | null;\r\n  currency: string;\r\n  onOpenChange: (open: boolean) => void;\r\n  includePaymentInfo?: boolean;\r\n}\r\n\r\nconst ReceiptDialog: React.FC<ReceiptDialogProps> = ({ \r\n  isOpen, \r\n  sale, \r\n  currency,\r\n  onOpenChange,\r\n  includePaymentInfo = true\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n        <DrawerContent className=\"max-h-[85vh]\">\r\n          <div className=\"relative px-4 py-6 pb-8\">\r\n            <DrawerClose className=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring\">\r\n              <X className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Close</span>\r\n            </DrawerClose>\r\n            <ScrollArea className=\"h-[75vh] pr-4 pb-4\">\r\n              {sale && <PrintableReceipt sale={sale} currency={currency} isMobile={true} includePaymentInfo={includePaymentInfo} />}\r\n            </ScrollArea>\r\n          </div>\r\n        </DrawerContent>\r\n      </Drawer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-3xl max-h-[90vh]\">\r\n        <ScrollArea className=\"h-[80vh] pr-4\">\r\n          {sale && <PrintableReceipt sale={sale} currency={currency} includePaymentInfo={includePaymentInfo} />}\r\n        </ScrollArea>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ReceiptDialog;\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAMA;AACA;AACA;AACA;;;;;;;;AAUA,MAAM,gBAA8C,CAAC,EACnD,MAAM,EACN,IAAI,EACJ,QAAQ,EACR,YAAY,EACZ,qBAAqB,IAAI,EAC1B;IACC,MAAM,WAAW,IAAA,6IAAW;IAE5B,IAAI,UAAU;QACZ,qBACE,8OAAC,4IAAM;YAAC,MAAM;YAAQ,cAAc;sBAClC,cAAA,8OAAC,mJAAa;gBAAC,WAAU;0BACvB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iJAAW;4BAAC,WAAU;;8CACrB,8OAAC,iMAAC;oCAAC,WAAU;;;;;;8CACb,8OAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;sCAE5B,8OAAC,wJAAU;4BAAC,WAAU;sCACnB,sBAAQ,8OAAC,iJAAgB;gCAAC,MAAM;gCAAM,UAAU;gCAAU,UAAU;gCAAM,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;IAM3G;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;YAAC,WAAU;sBACvB,cAAA,8OAAC,wJAAU;gBAAC,WAAU;0BACnB,sBAAQ,8OAAC,iJAAgB;oBAAC,MAAM;oBAAM,UAAU;oBAAU,oBAAoB;;;;;;;;;;;;;;;;;;;;;AAKzF;uCAEe"}},
    {"offset": {"line": 9045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesReceiptDialog.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Sale } from '@/types';\r\nimport ReceiptDialog from './ReceiptDialog';\r\n\r\ninterface SalesReceiptDialogProps {\r\n  selectedSale: Sale | null;\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  currency: string;\r\n}\r\n\r\nconst SalesReceiptDialog: React.FC<SalesReceiptDialogProps> = ({\r\n  selectedSale,\r\n  isOpen,\r\n  onOpenChange,\r\n  currency\r\n}) => {\r\n  if (!selectedSale) return null;\r\n\r\n  return (\r\n    <ReceiptDialog\r\n      sale={selectedSale}\r\n      isOpen={isOpen}\r\n      onOpenChange={onOpenChange}\r\n      currency={currency}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SalesReceiptDialog;"],"names":[],"mappings":";;;;;AAEA;;;AASA,MAAM,qBAAwD,CAAC,EAC7D,YAAY,EACZ,MAAM,EACN,YAAY,EACZ,QAAQ,EACT;IACC,IAAI,CAAC,cAAc,OAAO;IAE1B,qBACE,8OAAC,uJAAa;QACZ,MAAM;QACN,QAAQ;QACR,cAAc;QACd,UAAU;;;;;;AAGhB;uCAEe"}},
    {"offset": {"line": 9071, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesCategoryAnalysis.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { PieChart, Pie, Cell, Legend, ResponsiveContainer, Tooltip } from 'recharts';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { Sale } from '@/types';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { TrendingUp, DollarSign, ShoppingCart, Trophy, Target, Edit2, Trash2, Plus, Check, X, Settings, CalendarIcon } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { format, isAfter, isBefore, isEqual, startOfDay, endOfDay, startOfWeek, endOfWeek, startOfMonth, endOfMonth, startOfYear, endOfYear, subDays, subWeeks, subMonths, subYears } from 'date-fns';\r\nimport { cn } from '@/lib/utils';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\ninterface SalesCategoryAnalysisProps {\r\n  sales: Sale[];\r\n  formatCurrency: (amount: number) => string;\r\n}\r\nconst SalesCategoryAnalysis: React.FC<SalesCategoryAnalysisProps> = ({\r\n  sales,\r\n  formatCurrency\r\n}) => {\r\n  const { canViewProfit } = useFinancialVisibility();\r\n  const {\r\n    categories,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory\r\n  } = useSalesCategories();\r\n  const isMobile = useIsMobile();\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editingName, setEditingName] = useState('');\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [categoryToDelete, setCategoryToDelete] = useState<{\r\n    id: string;\r\n    name: string;\r\n  } | null>(null);\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [dateFilter, setDateFilter] = useState<string>('all-time');\r\n  const [customDateFrom, setCustomDateFrom] = useState<Date | undefined>();\r\n  const [customDateTo, setCustomDateTo] = useState<Date | undefined>();\r\n  const [specificDate, setSpecificDate] = useState<Date | undefined>();\r\n  const getDateRange = (filter: string) => {\r\n    const now = new Date();\r\n    switch (filter) {\r\n      case 'today':\r\n        return {\r\n          start: startOfDay(now),\r\n          end: endOfDay(now)\r\n        };\r\n      case 'yesterday':\r\n        const yesterday = subDays(now, 1);\r\n        return {\r\n          start: startOfDay(yesterday),\r\n          end: endOfDay(yesterday)\r\n        };\r\n      case 'this-week':\r\n        return {\r\n          start: startOfWeek(now),\r\n          end: endOfWeek(now)\r\n        };\r\n      case 'last-week':\r\n        const lastWeekStart = startOfWeek(subWeeks(now, 1));\r\n        const lastWeekEnd = endOfWeek(subWeeks(now, 1));\r\n        return {\r\n          start: lastWeekStart,\r\n          end: lastWeekEnd\r\n        };\r\n      case 'this-month':\r\n        return {\r\n          start: startOfMonth(now),\r\n          end: endOfMonth(now)\r\n        };\r\n      case 'last-month':\r\n        const lastMonthStart = startOfMonth(subMonths(now, 1));\r\n        const lastMonthEnd = endOfMonth(subMonths(now, 1));\r\n        return {\r\n          start: lastMonthStart,\r\n          end: lastMonthEnd\r\n        };\r\n      case 'this-year':\r\n        return {\r\n          start: startOfYear(now),\r\n          end: endOfYear(now)\r\n        };\r\n      case 'specific-date':\r\n        if (specificDate) {\r\n          return {\r\n            start: startOfDay(specificDate),\r\n            end: endOfDay(specificDate)\r\n          };\r\n        }\r\n        return null;\r\n      case 'custom-range':\r\n        if (customDateFrom && customDateTo) {\r\n          return {\r\n            start: startOfDay(customDateFrom),\r\n            end: endOfDay(customDateTo)\r\n          };\r\n        } else if (customDateFrom) {\r\n          return {\r\n            start: startOfDay(customDateFrom),\r\n            end: endOfDay(now)\r\n          };\r\n        } else if (customDateTo) {\r\n          return {\r\n            start: startOfDay(new Date(0)),\r\n            end: endOfDay(customDateTo)\r\n          };\r\n        }\r\n        return null;\r\n      case 'all-time':\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  const categoryPerformance = useMemo(() => {\r\n    // Filter sales by selected date range\r\n    let filteredSales = sales;\r\n    const dateRange = getDateRange(dateFilter);\r\n    if (dateRange) {\r\n      filteredSales = sales.filter(sale => {\r\n        const saleDate = new Date(sale.date);\r\n        return saleDate >= dateRange.start && saleDate <= dateRange.end;\r\n      });\r\n    }\r\n    const categoryData = categories.map(category => {\r\n      const categorySales = filteredSales.filter(sale => sale.categoryId === category.id);\r\n      const totalRevenue = categorySales.reduce((sum, sale) => {\r\n        const saleTotal = sale.items.reduce((itemSum, item) => itemSum + item.quantity * item.price, 0);\r\n        return sum + saleTotal;\r\n      }, 0);\r\n      const totalProfit = categorySales.reduce((sum, sale) => sum + (sale.profit || 0), 0);\r\n      const totalTransactions = categorySales.length;\r\n      const averageTransactionValue = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\r\n      return {\r\n        name: category.name,\r\n        revenue: totalRevenue,\r\n        profit: totalProfit,\r\n        transactions: totalTransactions,\r\n        averageValue: averageTransactionValue\r\n      };\r\n    });\r\n\r\n    // Add uncategorized sales\r\n    const uncategorizedSales = filteredSales.filter(sale => !sale.categoryId);\r\n    if (uncategorizedSales.length > 0) {\r\n      const totalRevenue = uncategorizedSales.reduce((sum, sale) => {\r\n        const saleTotal = sale.items.reduce((itemSum, item) => itemSum + item.quantity * item.price, 0);\r\n        return sum + saleTotal;\r\n      }, 0);\r\n      const totalProfit = uncategorizedSales.reduce((sum, sale) => sum + (sale.profit || 0), 0);\r\n      const totalTransactions = uncategorizedSales.length;\r\n      const averageTransactionValue = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\r\n      categoryData.push({\r\n        name: 'Uncategorized',\r\n        revenue: totalRevenue,\r\n        profit: totalProfit,\r\n        transactions: totalTransactions,\r\n        averageValue: averageTransactionValue\r\n      });\r\n    }\r\n    return categoryData.sort((a, b) => b.revenue - a.revenue);\r\n  }, [sales, categories, dateFilter, customDateFrom, customDateTo, specificDate]);\r\n  const pieChartData = useMemo(() => {\r\n    return categoryPerformance.filter(cat => cat.revenue > 0).map((category, index) => ({\r\n      ...category,\r\n      fill: `hsl(var(--chart-${index % 5 + 1}))`\r\n    }));\r\n  }, [categoryPerformance]);\r\n  const COLORS = ['hsl(var(--chart-1))', 'hsl(var(--chart-2))', 'hsl(var(--chart-3))', 'hsl(var(--chart-4))', 'hsl(var(--chart-5))'];\r\n  const PieTooltip = ({\r\n    active,\r\n    payload\r\n  }: any) => {\r\n    if (active && payload && payload.length) {\r\n      const data = payload[0].payload;\r\n      const percentage = (data.revenue / categoryPerformance.reduce((sum, cat) => sum + cat.revenue, 0) * 100).toFixed(1);\r\n      return <div className=\"bg-background border rounded-lg p-3 shadow-lg\">\r\n        <p className=\"font-medium\">{data.name}</p>\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Revenue: {formatCurrency(data.revenue)}\r\n        </p>\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Share: {percentage}%\r\n        </p>\r\n      </div>;\r\n    }\r\n    return null;\r\n  };\r\n  const getIcon = (index: number) => {\r\n    const icons = [DollarSign, TrendingUp, ShoppingCart, Target];\r\n    const Icon = icons[index % icons.length];\r\n    return <Icon className=\"w-4 h-4 text-muted-foreground\" />;\r\n  };\r\n  const handleEditStart = (category: any) => {\r\n    setEditingId(category.id);\r\n    setEditingName(category.name);\r\n  };\r\n  const handleEditSave = async () => {\r\n    if (!editingId || !editingName.trim()) return;\r\n    try {\r\n      await updateCategory(editingId, editingName.trim());\r\n      setEditingId(null);\r\n      setEditingName('');\r\n      toast.success('Category updated successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to update category');\r\n    }\r\n  };\r\n  const handleEditCancel = () => {\r\n    setEditingId(null);\r\n    setEditingName('');\r\n  };\r\n  const handleDelete = async () => {\r\n    if (!categoryToDelete) return;\r\n    setIsDeleting(true);\r\n    try {\r\n      await deleteCategory(categoryToDelete.id);\r\n      toast.success('Category deleted successfully');\r\n      setDeleteDialogOpen(false);\r\n      setCategoryToDelete(null);\r\n    } catch (error) {\r\n      toast.error('Failed to delete category');\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n  const handleDeleteClick = (category: {\r\n    id: string;\r\n    name: string;\r\n  }) => {\r\n    setCategoryToDelete(category);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName.trim()) return;\r\n    setIsAdding(true);\r\n    try {\r\n      await createCategory(newCategoryName.trim());\r\n      setNewCategoryName('');\r\n      toast.success('Category created successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to create category');\r\n    } finally {\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n  return <div className=\"space-y-6\">\r\n    {/* Category Management Section */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Settings className=\"w-5 h-5 text-primary\" />\r\n          Manage Sales Sources\r\n        </CardTitle>\r\n        <CardDescription>Create, edit, or delete sales sources</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"space-y-4\">\r\n          {/* Create new source */}\r\n          <div className=\"flex gap-2 p-3 bg-muted/30 rounded-lg\">\r\n            <Input placeholder=\"Enter New Sales Source\" value={newCategoryName} onChange={e => setNewCategoryName(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleCreateCategory()} className=\"flex-1\" />\r\n            <Button onClick={handleCreateCategory} disabled={!newCategoryName.trim() || isAdding} size=\"sm\" className=\"shrink-0\">\r\n              {isAdding ? <>\r\n                <div className=\"w-4 h-4 mr-1 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n                Adding...\r\n              </> : <>\r\n                <Plus className=\"w-4 h-4 mr-1\" />\r\n                Add\r\n              </>}\r\n            </Button>\r\n          </div>\r\n\r\n          {/* List existing sources */}\r\n          <div className=\"space-y-2\">\r\n            {categories.map(category => <div key={category.id} className=\"flex items-center gap-2 p-3 border rounded-lg bg-background hover:bg-muted/20 transition-colors\">\r\n              {editingId === category.id ? <>\r\n                <Input value={editingName} onChange={e => setEditingName(e.target.value)} onKeyDown={e => {\r\n                  if (e.key === 'Enter') handleEditSave();\r\n                  if (e.key === 'Escape') handleEditCancel();\r\n                }} className=\"flex-1\" autoFocus />\r\n                <Button size=\"sm\" variant=\"outline\" onClick={handleEditSave}>\r\n                  <Check className=\"w-4 h-4\" />\r\n                </Button>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={handleEditCancel}>\r\n                  <X className=\"w-4 h-4\" />\r\n                </Button>\r\n              </> : <>\r\n                <span className=\"flex-1 font-medium\">{category.name}</span>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleEditStart(category)}>\r\n                  <Edit2 className=\"w-4 h-4\" />\r\n                </Button>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleDeleteClick(category)} className=\"text-destructive hover:bg-destructive hover:text-destructive-foreground\">\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </Button>\r\n              </>}\r\n            </div>)}\r\n\r\n            {categories.length === 0 && <div className=\"text-center py-8 text-muted-foreground\">\r\n              No sources found. Create your first source above.\r\n            </div>}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Date Filter */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <CalendarIcon className=\"w-5 h-5 text-primary\" />\r\n          Date Filter\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Filter source performance by time period\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"flex flex-col sm:flex-row gap-4 items-end\">\r\n          <div className=\"flex-1\">\r\n            <label className=\"text-sm font-medium mb-2 block\">Time Period</label>\r\n            <Select value={dateFilter} onValueChange={setDateFilter}>\r\n              <SelectTrigger className=\"w-full\">\r\n                <SelectValue placeholder=\"Select time period\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-background border shadow-lg z-50\">\r\n                <SelectItem value=\"today\">Today</SelectItem>\r\n                <SelectItem value=\"yesterday\">Yesterday</SelectItem>\r\n                <SelectItem value=\"this-week\">This Week</SelectItem>\r\n                <SelectItem value=\"last-week\">Last Week</SelectItem>\r\n                <SelectItem value=\"this-month\">This Month</SelectItem>\r\n                <SelectItem value=\"last-month\">Last Month</SelectItem>\r\n                <SelectItem value=\"this-year\">This Year</SelectItem>\r\n                <SelectItem value=\"all-time\">All Time</SelectItem>\r\n                <SelectItem value=\"specific-date\">Specific Date</SelectItem>\r\n                <SelectItem value=\"custom-range\">Custom Range</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Custom Date Range Fields */}\r\n        {dateFilter === 'custom-range' && <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">From Date</label>\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className={cn(\"w-full justify-start text-left font-normal\", !customDateFrom && \"text-muted-foreground\")}>\r\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                  {customDateFrom ? format(customDateFrom, \"PPP\") : <span>Pick start date</span>}\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                <Calendar mode=\"single\" selected={customDateFrom} onSelect={setCustomDateFrom} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">To Date</label>\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className={cn(\"w-full justify-start text-left font-normal\", !customDateTo && \"text-muted-foreground\")}>\r\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                  {customDateTo ? format(customDateTo, \"PPP\") : <span>Pick end date</span>}\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                <Calendar mode=\"single\" selected={customDateTo} onSelect={setCustomDateTo} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n        </div>}\r\n\r\n        {/* Specific Date Field */}\r\n        {dateFilter === 'specific-date' && <div className=\"mt-4\">\r\n          <label className=\"text-sm font-medium mb-2 block\">Select Date</label>\r\n          <Popover>\r\n            <PopoverTrigger asChild>\r\n              <Button variant=\"outline\" className={cn(\"w-full sm:w-64 justify-start text-left font-normal\", !specificDate && \"text-muted-foreground\")}>\r\n                <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                {specificDate ? format(specificDate, \"PPP\") : <span>Pick a date</span>}\r\n              </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n              <Calendar mode=\"single\" selected={specificDate} onSelect={setSpecificDate} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n            </PopoverContent>\r\n          </Popover>\r\n        </div>}\r\n\r\n        {dateFilter !== 'all-time' && <div className=\"mt-4 p-3 bg-muted/30 rounded-lg\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Showing results for: <span className=\"font-medium\">{dateFilter === 'today' ? 'Today' : dateFilter === 'yesterday' ? 'Yesterday' : dateFilter === 'this-week' ? 'This Week' : dateFilter === 'last-week' ? 'Last Week' : dateFilter === 'this-month' ? 'This Month' : dateFilter === 'last-month' ? 'Last Month' : dateFilter === 'this-year' ? 'This Year' : dateFilter === 'specific-date' && specificDate ? format(specificDate, \"PPP\") : dateFilter === 'custom-range' && customDateFrom && customDateTo ? `${format(customDateFrom, \"PPP\")} to ${format(customDateTo, \"PPP\")}` : dateFilter === 'custom-range' && customDateFrom ? `From ${format(customDateFrom, \"PPP\")}` : dateFilter === 'custom-range' && customDateTo ? `Until ${format(customDateTo, \"PPP\")}` : 'Custom Period'}</span>\r\n          </p>\r\n        </div>}\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Category Rankings Table */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Trophy className=\"w-5 h-5 text-primary\" />\r\n          Source Rankings\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Best performing sources ranked by revenue\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {categoryPerformance.length > 0 ? isMobile ? <div className=\"space-y-3\">\r\n          {categoryPerformance.map((category, index) => <Card key={category.name} className=\"border border-border bg-card\">\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold\">\r\n                    {index + 1}\r\n                  </div>\r\n                  <h3 className=\"font-semibold text-lg\">{category.name}</h3>\r\n                </div>\r\n                <Trophy className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 gap-3\">\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <DollarSign className=\"w-4 h-4 text-green-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Total Revenue</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{formatCurrency(category.revenue)}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <TrendingUp className=\"w-4 h-4 text-blue-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Total Profit</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{canViewProfit ? formatCurrency(category.profit) : ''}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ShoppingCart className=\"w-4 h-4 text-purple-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Number of Sales</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{category.transactions}</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>)}\r\n        </div> : <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead className=\"w-12\">#</TableHead>\r\n              <TableHead>Source Name</TableHead>\r\n              <TableHead className=\"text-right\">Total Revenue</TableHead>\r\n              <TableHead className=\"text-right\">Total Profit</TableHead>\r\n              <TableHead className=\"text-right\">Number of Sales</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {categoryPerformance.map((category, index) => <TableRow key={category.name}>\r\n              <TableCell className=\"font-medium\">\r\n                <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold\">\r\n                  {index + 1}\r\n                </div>\r\n              </TableCell>\r\n              <TableCell className=\"font-medium\">{category.name}</TableCell>\r\n              <TableCell className=\"text-right font-mono\">{formatCurrency(category.revenue)}</TableCell>\r\n              <TableCell className=\"text-right font-mono\">{canViewProfit ? formatCurrency(category.profit) : ''}</TableCell>\r\n              <TableCell className=\"text-right\">{category.transactions}</TableCell>\r\n            </TableRow>)}\r\n          </TableBody>\r\n        </Table> : <div className=\"flex items-center justify-center h-64 text-muted-foreground\">\r\n          No performance data available\r\n        </div>}\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Delete Confirmation Dialog */}\r\n    <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Delete Source</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            Are you sure you want to delete the source \"{categoryToDelete?.name}\"?\r\n            This action cannot be undone. All sales in this source will be moved to \"Uncategorized\".\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel onClick={() => setCategoryToDelete(null)}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction onClick={handleDelete} disabled={isDeleting} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n            {isDeleting ? <>\r\n              <div className=\"w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n              Deleting...\r\n            </> : 'Delete Source'}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  </div>;\r\n};\r\nexport default SalesCategoryAnalysis;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10537, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/DeletedSalesTable.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { format } from 'date-fns';\r\nimport { DeletedSale } from '@/hooks/useDeletedSales';\r\nimport { Trash2, User, Clock, Package } from 'lucide-react';\r\n\r\ninterface DeletedSalesTableProps {\r\n    sales: DeletedSale[];\r\n    isLoading: boolean;\r\n    currency?: string;\r\n}\r\n\r\nexport const DeletedSalesTable: React.FC<DeletedSalesTableProps> = ({ sales, isLoading, currency = 'UGX' }) => {\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center py-12 space-y-4\">\r\n                <div className=\"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n                <p className=\"text-muted-foreground text-sm\">Loading deleted sales history...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (sales.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-12 border rounded-lg bg-muted/20\">\r\n                <Trash2 className=\"mx-auto h-12 w-12 text-muted-foreground opacity-20 mb-4\" />\r\n                <h3 className=\"text-lg font-medium\">Deleted Sales history is empty</h3>\r\n                <p className=\"text-muted-foreground\">Deleted sales logs will appear here.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"border rounded-lg overflow-hidden bg-white\">\r\n            <Table>\r\n                <TableHeader className=\"bg-muted/50\">\r\n                    <TableRow>\r\n                        <TableHead>Receipt #</TableHead>\r\n                        <TableHead>Customer</TableHead>\r\n                        <TableHead>Items</TableHead>\r\n                        <TableHead className=\"text-right\">Total Qty</TableHead>\r\n                        <TableHead className=\"text-right\">Total Amount</TableHead>\r\n                        <TableHead>Deleted At</TableHead>\r\n                        <TableHead>Deleted By</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {sales.map((sale) => (\r\n                        <TableRow key={sale.id} className=\"hover:bg-muted/30\">\r\n                            <TableCell className=\"font-mono font-medium\">{sale.receiptNumber}</TableCell>\r\n                            <TableCell>{sale.customerName}</TableCell>\r\n                            <TableCell>\r\n                                <div className=\"max-w-[250px]\">\r\n                                    <div className=\"flex flex-wrap gap-1\">\r\n                                        {sale.items.map((item, idx) => {\r\n                                            const qty = item.quantity ?? item.qty ?? 0;\r\n                                            return (\r\n                                                <Badge key={idx} variant=\"outline\" className=\"text-[10px] py-0 h-4 bg-muted/30\">\r\n                                                    {qty}x {item.description}\r\n                                                </Badge>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right font-medium\">\r\n                                {sale.totalQuantity}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right font-semibold\">\r\n                                {currency} {sale.amount.toLocaleString()}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\r\n                                    <Clock className=\"h-3 w-3\" />\r\n                                    {format(new Date(sale.deletedAt), 'MMM d, h:mm a')}\r\n                                </div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <div className=\"flex items-center gap-1.5 text-xs\">\r\n                                    <User className=\"h-3 w-3 text-muted-foreground\" />\r\n                                    {sale.deletedBy}\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AAAA;AAAA;;;;;;AAQO,MAAM,oBAAsD,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,WAAW,KAAK,EAAE;IACtG,IAAI,WAAW;QACX,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAE,WAAU;8BAAgC;;;;;;;;;;;;IAGzD;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACpB,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC,oNAAM;oBAAC,WAAU;;;;;;8BAClB,8OAAC;oBAAG,WAAU;8BAAsB;;;;;;8BACpC,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAGjD;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC,0IAAK;;8BACF,8OAAC,gJAAW;oBAAC,WAAU;8BACnB,cAAA,8OAAC,6IAAQ;;0CACL,8OAAC,8IAAS;0CAAC;;;;;;0CACX,8OAAC,8IAAS;0CAAC;;;;;;0CACX,8OAAC,8IAAS;0CAAC;;;;;;0CACX,8OAAC,8IAAS;gCAAC,WAAU;0CAAa;;;;;;0CAClC,8OAAC,8IAAS;gCAAC,WAAU;0CAAa;;;;;;0CAClC,8OAAC,8IAAS;0CAAC;;;;;;0CACX,8OAAC,8IAAS;0CAAC;;;;;;;;;;;;;;;;;8BAGnB,8OAAC,8IAAS;8BACL,MAAM,GAAG,CAAC,CAAC,qBACR,8OAAC,6IAAQ;4BAAe,WAAU;;8CAC9B,8OAAC,8IAAS;oCAAC,WAAU;8CAAyB,KAAK,aAAa;;;;;;8CAChE,8OAAC,8IAAS;8CAAE,KAAK,YAAY;;;;;;8CAC7B,8OAAC,8IAAS;8CACN,cAAA,8OAAC;wCAAI,WAAU;kDACX,cAAA,8OAAC;4CAAI,WAAU;sDACV,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM;gDACnB,MAAM,MAAM,KAAK,QAAQ,IAAI,KAAK,GAAG,IAAI;gDACzC,qBACI,8OAAC,0IAAK;oDAAW,SAAQ;oDAAU,WAAU;;wDACxC;wDAAI;wDAAG,KAAK,WAAW;;mDADhB;;;;;4CAIpB;;;;;;;;;;;;;;;;8CAIZ,8OAAC,8IAAS;oCAAC,WAAU;8CAChB,KAAK,aAAa;;;;;;8CAEvB,8OAAC,8IAAS;oCAAC,WAAU;;wCAChB;wCAAS;wCAAE,KAAK,MAAM,CAAC,cAAc;;;;;;;8CAE1C,8OAAC,8IAAS;8CACN,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,6MAAK;gDAAC,WAAU;;;;;;4CAChB,IAAA,+JAAM,EAAC,IAAI,KAAK,KAAK,SAAS,GAAG;;;;;;;;;;;;8CAG1C,8OAAC,8IAAS;8CACN,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,0MAAI;gDAAC,WAAU;;;;;;4CACf,KAAK,SAAS;;;;;;;;;;;;;2BAhCZ,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;AAyC9C"}},
    {"offset": {"line": 10832, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/sales/SalesContent.tsx"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport EmptySalesState from './EmptySalesState';\r\nimport SalesTableSkeleton from './SalesTableSkeleton';\r\nimport NoBusinessState from './NoBusinessState';\r\nimport SalesDataTable from './SalesDataTable';\r\nimport SalesReceiptDialog from './SalesReceiptDialog';\r\nimport SalesCategoryAnalysis from './SalesCategoryAnalysis';\r\nimport { DeletedSalesTable } from './DeletedSalesTable';\r\nimport { useSalesData } from '@/hooks/useSalesData';\r\nimport { useDeletedSales } from '@/hooks/useDeletedSales';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCurrentUser } from '@/hooks/useCurrentUser';\r\nimport { useSalesActions } from '@/hooks/useSalesActions';\r\nimport { RefreshCw, History, Trash2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nexport const SalesContent: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { settings } = useBusinessSettings();\r\n  const { userId } = useCurrentUser();\r\n\r\n  // Fetch ALL sales data without any page size limit\r\n  const {\r\n    sales,\r\n    isLoading: salesLoading,\r\n    deleteSale,\r\n    refetch,\r\n    isFetching\r\n  } = useSalesData(userId, 'desc');\r\n\r\n  const {\r\n    deletedSales,\r\n    isLoading: deletedLoading,\r\n    refetch: refetchDeleted\r\n  } = useDeletedSales();\r\n\r\n  const {\r\n    selectedSale,\r\n    isReceiptDialogOpen,\r\n    handleEditSale,\r\n    handleViewReceipt,\r\n    handleDeleteSale,\r\n    handleCloseReceiptDialog\r\n  } = useSalesActions();\r\n\r\n  // Show loading while business context OR user ID is loading\r\n  if (businessLoading || !userId) {\r\n    return (\r\n      <div className=\"p-6 space-y-6\">\r\n        <SalesTableSkeleton />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentBusiness) {\r\n    return <NoBusinessState />;\r\n  }\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: settings.currency || 'UGX',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  };\r\n\r\n  const handleRefresh = async () => {\r\n    if (activeTab === 'deleted-sales') {\r\n      await refetchDeleted();\r\n    } else {\r\n      await refetch();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-6\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-2xl font-bold tracking-tight\">Sales Management</h2>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleRefresh}\r\n            className=\"flex items-center gap-2\"\r\n            disabled={isFetching || deletedLoading}\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${(isFetching || deletedLoading) ? 'animate-spin' : ''}`} />\r\n            {(isFetching || deletedLoading) ? 'Refreshing...' : 'Refresh'}\r\n          </Button>\r\n        </div>\r\n\r\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"overview\">Sales Overview</TabsTrigger>\r\n            <TabsTrigger value=\"analysis\">Sales Source</TabsTrigger>\r\n            <TabsTrigger value=\"deleted-sales\" className=\"flex items-center gap-2 text-destructive data-[state=active]:text-destructive\">\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              Deleted Sales\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"overview\" className=\"mt-0\">\r\n            {salesLoading && !sales.length ? (\r\n              <SalesTableSkeleton />\r\n            ) : sales.length === 0 ? (\r\n              <EmptySalesState />\r\n            ) : (\r\n              <SalesDataTable\r\n                sales={sales}\r\n                onViewReceipt={handleViewReceipt}\r\n                onEditSale={handleEditSale}\r\n                onDeleteSale={handleDeleteSale(deleteSale)}\r\n                currency={settings.currency}\r\n                isLoading={salesLoading}\r\n              />\r\n            )}\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"analysis\" className=\"mt-6\">\r\n            <SalesCategoryAnalysis\r\n              sales={sales}\r\n              formatCurrency={formatCurrency}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"deleted-sales\" className=\"mt-6\">\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex flex-col gap-1\">\r\n                <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                  <Trash2 className=\"h-5 w-5 text-muted-foreground\" />\r\n                  Deleted Sales History\r\n                </h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  View and manage recently deleted sales records.\r\n                </p>\r\n              </div>\r\n              <DeletedSalesTable\r\n                sales={deletedSales}\r\n                isLoading={deletedLoading}\r\n                currency={settings.currency}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <SalesReceiptDialog\r\n        selectedSale={selectedSale}\r\n        isOpen={isReceiptDialogOpen}\r\n        onOpenChange={handleCloseReceiptDialog}\r\n        currency={settings.currency}\r\n      />\r\n    </>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}}]
}