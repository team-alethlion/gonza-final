{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCashAccounts.ts"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { CashAccount } from '@/types/cash';\r\nimport {\r\n  getCashAccountsAction,\r\n  createCashAccountAction,\r\n  updateCashAccountAction,\r\n  deleteCashAccountAction,\r\n  deleteCashAccountWithTransactionsAction,\r\n  getCashAccountBalanceAction\r\n} from '@/app/actions/finance';\r\n\r\nexport const useCashAccounts = () => {\r\n  const [accounts, setAccounts] = useState<CashAccount[]>([]);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadAccounts = useCallback(async (): Promise<CashAccount[]> => {\r\n    if (!currentBusiness?.id) return [];\r\n\r\n    try {\r\n      const result = await getCashAccountsAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch accounts');\r\n      }\r\n\r\n      return result.data.map((account: any) => ({\r\n        ...account,\r\n        createdAt: new Date(account.createdAt),\r\n        updatedAt: new Date(account.updatedAt)\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error loading cash accounts:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash accounts\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  const queryKey = ['cash_accounts', currentBusiness?.id];\r\n  const { data: queriedAccounts, isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadAccounts,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 30_000,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedAccounts) {\r\n      setAccounts(queriedAccounts);\r\n    }\r\n  }, [queriedAccounts]);\r\n\r\n  const isLoading = isQueryLoading && !queriedAccounts;\r\n\r\n  const refreshAccounts = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  const createAccount = useCallback(async (accountData: {\r\n    name: string;\r\n    description?: string;\r\n    openingBalance: number;\r\n    isDefault?: boolean;\r\n  }) => {\r\n    if (!currentBusiness?.id || !user?.id) return null;\r\n\r\n    try {\r\n      const result = await createCashAccountAction({\r\n        ...accountData,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success || !result.data) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account created successfully\"\r\n      });\r\n\r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Error creating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  }, [currentBusiness?.id, user?.id, queryClient, queryKey, toast]);\r\n\r\n  const updateAccount = async (id: string, updates: Partial<CashAccount>) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await updateCashAccountAction(id, {\r\n        ...updates,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account updated successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteAccount = async (id: string, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return { success: false, hasTransactions: false };\r\n\r\n    try {\r\n      const result = await deleteCashAccountAction(id, currentBusiness.id);\r\n\r\n      if (result.success) {\r\n        queryClient.invalidateQueries({ queryKey });\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Cash account deleted successfully\"\r\n        });\r\n        if (onDeleted) onDeleted();\r\n      }\r\n\r\n      return result as any;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return { success: false, hasTransactions: false };\r\n    }\r\n  };\r\n\r\n  const deleteAccountWithTransactions = async (id: string, deleteTransactions: boolean = false, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await deleteCashAccountWithTransactionsAction(id, currentBusiness.id, deleteTransactions);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: deleteTransactions\r\n          ? \"Account and transactions deleted\"\r\n          : \"Account deleted (records unlinked)\"\r\n      });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    if (!currentBusiness?.id) return 0;\r\n    try {\r\n      const result = await getCashAccountBalanceAction(accountId, currentBusiness.id);\r\n      if (result.success) return result.data as number;\r\n      return 0;\r\n    } catch (error) {\r\n      console.error('Error getting balance:', error);\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  return useMemo(() => ({\r\n    accounts,\r\n    isLoading,\r\n    createAccount,\r\n    updateAccount,\r\n    deleteAccount,\r\n    deleteAccountWithTransactions,\r\n    getAccountBalance,\r\n    loadAccounts,\r\n    refreshAccounts\r\n  }), [accounts, isLoading, createAccount, updateAccount, deleteAccount, deleteAccountWithTransactions, getAccountBalance, loadAccounts, refreshAccounts]);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useCashTransactions.ts"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  CashTransaction,\r\n  DbCashTransaction,\r\n  CashTransactionFormData,\r\n  DailyCashSummary,\r\n  mapDbCashTransactionToCashTransaction\r\n} from '@/types/cash';\r\nimport {\r\n  getCashTransactionsAction,\r\n  createCashTransactionAction,\r\n  updateCashTransactionAction,\r\n  deleteCashTransactionAction,\r\n  getAccountOpeningBalanceAction,\r\n  createBulkCashTransactionsAction\r\n} from '@/app/actions/finance';\r\n\r\nexport const useCashTransactions = (accountId?: string) => {\r\n  const { user } = useAuth();\r\n  const { currentBusiness } = useBusiness();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadTransactions = useCallback(async (): Promise<CashTransaction[]> => {\r\n    try {\r\n      if (!user || !currentBusiness) {\r\n        return [];\r\n      }\r\n\r\n      const result = await getCashTransactionsAction(currentBusiness.id, accountId);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch transactions');\r\n      }\r\n\r\n      // Format all transactions\r\n      const formattedTransactions = result.data.map((item: any) => {\r\n        const dbTransaction: DbCashTransaction = {\r\n          id: item.id,\r\n          user_id: item.user_id,\r\n          account_id: item.account_id,\r\n          amount: Number(item.amount),\r\n          transaction_type: item.transaction_type,\r\n          category: item.category,\r\n          description: item.description,\r\n          person_in_charge: item.person_in_charge,\r\n          tags: item.tags,\r\n          date: item.date,\r\n          payment_method: item.payment_method,\r\n          receipt_image: item.receipt_image,\r\n          created_at: item.created_at,\r\n          updated_at: item.updated_at\r\n        };\r\n        return mapDbCashTransactionToCashTransaction(dbTransaction);\r\n      });\r\n\r\n      // Sort\r\n      formattedTransactions.sort((a, b) => {\r\n        const dateCompare = new Date(b.date).getTime() - new Date(a.date).getTime();\r\n        if (dateCompare !== 0) return dateCompare;\r\n        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n      });\r\n\r\n      return formattedTransactions;\r\n    } catch (error) {\r\n      console.error('Error loading cash transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash transactions\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [user, currentBusiness?.id, accountId, toast]);\r\n\r\n  const queryKey = useMemo(() => ['cash_transactions', currentBusiness?.id, user?.id, accountId], [currentBusiness?.id, user?.id, accountId]);\r\n\r\n  const { data: transactions = [], isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadTransactions,\r\n    enabled: !!user && !!currentBusiness?.id,\r\n    staleTime: 30_000,\r\n  });\r\n\r\n  const isLoading = isQueryLoading && transactions.length === 0;\r\n\r\n  const createTransaction = async (transactionData: CashTransactionFormData) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated');\r\n\r\n      const result = await createCashTransactionAction({\r\n        ...transactionData,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: transactionData.transactionType === 'transfer'\r\n          ? \"Transfer completed successfully\"\r\n          : \"Cash transaction created successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      return Array.isArray(result.data)\r\n        ? mapDbCashTransactionToCashTransaction(result.data[0])\r\n        : mapDbCashTransactionToCashTransaction(result.data as any);\r\n    } catch (error) {\r\n      console.error('Error creating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const createBulkTransactions = async (transactionsData: CashTransactionFormData[]) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated');\r\n\r\n      const payloads = transactionsData.map(t => ({\r\n        ...t,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      }));\r\n\r\n      const result = await createBulkCashTransactionsAction(payloads);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Successfully created ${transactionsData.length} transactions`\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return (result.data as any[]).map((item: any) => mapDbCashTransactionToCashTransaction(item));\r\n    } catch (error) {\r\n      console.error('Error creating bulk transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create bulk transactions\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const updateTransaction = async (id: string, updates: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      const result = await updateCashTransactionAction(id, updates);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Transaction updated successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return mapDbCashTransactionToCashTransaction(result.data as any);\r\n    } catch (error) {\r\n      console.error('Error updating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const deleteTransaction = async (id: string, onDeleted?: () => void) => {\r\n    try {\r\n      if (!currentBusiness) throw new Error('No business selected');\r\n      const result = await deleteCashTransactionAction(id, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash transaction deleted successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountOpeningBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    try {\r\n      if (!currentBusiness) return 0;\r\n      const result = await getAccountOpeningBalanceAction(accountId, currentBusiness.id);\r\n      return result.success ? result.data : 0;\r\n    } catch (error) {\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  const getDailySummary = useCallback(async (date: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const dateStr = date.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] === dateStr\r\n    );\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterday = new Date(date);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n    const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n    let yesterdayTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= yesterdayStr\r\n    );\r\n\r\n    if (accountId) {\r\n      yesterdayTransactions = yesterdayTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const yesterdayCashIn = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterdayCashOut = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + yesterdayCashIn - yesterdayCashOut;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const getDateRangeSummary = useCallback(async (startDate: Date, endDate: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const startDateStr = startDate.toISOString().split('T')[0];\r\n    const endDateStr = endDate.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const dayBeforeStart = new Date(startDate);\r\n    dayBeforeStart.setDate(dayBeforeStart.getDate() - 1);\r\n    const dayBeforeStartStr = dayBeforeStart.toISOString().split('T')[0];\r\n\r\n    let transactionsBeforeRange = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeStartStr\r\n    );\r\n\r\n    if (accountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date: startDate,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const refreshTransactions = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  return useMemo(() => ({\r\n    transactions,\r\n    isLoading,\r\n    createTransaction,\r\n    createBulkTransactions,\r\n    updateTransaction,\r\n    deleteTransaction,\r\n    getDailySummary,\r\n    getDateRangeSummary,\r\n    refreshTransactions\r\n  }), [transactions, isLoading, createTransaction, createBulkTransactions, updateTransaction, deleteTransaction, getDailySummary, getDateRangeSummary, refreshTransactions]);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { getBusinessSettingsAction, upsertBusinessSettingsAction } from '@/app/actions/business-settings';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const data = await getBusinessSettingsAction(currentBusiness.id);\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name || '',\r\n          businessAddress: data.business_address || '',\r\n          businessPhone: data.business_phone || '',\r\n          businessEmail: data.business_email || '',\r\n          businessLogo: data.business_logo || undefined,\r\n          currency: data.currency || 'UGX',\r\n          signature: data.signature || undefined,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const userData = { user: { id: '00000000-0000-0000-0000-000000000000' } }; // Mocked user id for now\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const response = await upsertBusinessSettingsAction(currentBusiness.id, userData.user.id, updateData);\r\n\r\n      if (!response.success) {\r\n        console.error('Supabase error updating business settings:', response.error);\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;AACA;AAEA;AAAA;;;;;;AAmBO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,eAAe,YAAY,IAAI,OAAO,IAAI;QAC7C,OAAO,EAAE;IACX;IAEA,MAAM,QAAQ,YAAY,KAAK,CAAC,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,OAAO;IACrE,MAAM,UAA4E,EAAE;IAEpF,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,KAAK,EAAG;QACxC,IAAI,IAAI,IAAI,MAAM,MAAM,EAAE;YACxB,QAAQ,IAAI,CAAC;gBACX,QAAQ,KAAK,CAAC,EAAE,CAAC,IAAI;gBACrB,eAAe,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI;gBAChC,aAAa,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI;YAChC;QACF;IACF;IAEA,OAAO;AACT;AAGO,MAAM,gCAAgC,CAAC;IAC5C,OAAO,eACJ,MAAM,CAAC,CAAA,KAAM,GAAG,MAAM,CAAC,IAAI,OAAO,MAAM,GAAG,aAAa,CAAC,IAAI,OAAO,MAAM,GAAG,WAAW,CAAC,IAAI,OAAO,IACpG,GAAG,CAAC,CAAA,KAAM,GAAG,GAAG,MAAM,CAAC,EAAE,EAAE,GAAG,aAAa,CAAC,EAAE,EAAE,GAAG,WAAW,EAAE,EAChE,IAAI,CAAC;AACV;AAEA,sCAAsC;AACtC,MAAM,qBAAqB,IAAwB,CAAC;QAClD,cAAc;QACd,iBAAiB;QACjB,eAAe;QACf,eAAe;QACf,UAAU;QACV,aAAa;QACb,oBAAoB;IACtB,CAAC;AAEM,MAAM,sBAAsB;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAmB;IAC3D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wIAAQ;IAC1B,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,kJAAW;IAEvC,MAAM,eAAe;QACnB,IAAI,CAAC,iBAAiB;YACpB,OAAO;QACT;QAEA,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,0LAAyB,EAAC,gBAAgB,EAAE;YAE/D,IAAI,MAAM;gBACR,qCAAqC;gBACrC,MAAM,cAAc,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,KAAK,WAC5D,AAAC,KAAK,QAAQ,CAA6B,YAAY,IAAc,KAAK;gBAE5E,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,cAAc,KAAK,aAAa,IAAI;oBACpC,iBAAiB,KAAK,gBAAgB,IAAI;oBAC1C,eAAe,KAAK,cAAc,IAAI;oBACtC,eAAe,KAAK,cAAc,IAAI;oBACtC,cAAc,KAAK,aAAa,IAAI;oBACpC,UAAU,KAAK,QAAQ,IAAI;oBAC3B,WAAW,KAAK,SAAS,IAAI;oBAC7B,aAAa;oBACb,oBAAoB,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,KAAK,WAC5D,AAAC,KAAK,QAAQ,CAA6B,oBAAoB,IAA8B,aAAa;oBAC5G,oBAAoB,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,KAAK,WAC5D,AAAC,KAAK,QAAQ,CAA6B,oBAAoB,IAAc,KAAK;oBACpF,oBAAoB,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,KAAK,WAC5D,AAAC,KAAK,QAAQ,CAA6B,oBAAoB,IAA2B,QAAQ;oBACpG,kBAAkB,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,KAAK,WAC1D,AAAC,KAAK,QAAQ,CAA6B,kBAAkB,IAAuB,SAAS;gBACjG;YACF,OAAO;gBACL,OAAO;YACT;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;QACT;IACF;IAEA,MAAM,iBAAiB,OAAO;QAC5B,IAAI,CAAC,iBAAiB;YACpB,QAAQ,KAAK,CAAC;YACd,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;QACT;QAEA,IAAI;YACF,MAAM,WAAW;gBAAE,MAAM;oBAAE,IAAI;gBAAuC;YAAE,GAAG,yBAAyB;YAEpG,gDAAgD;YAChD,MAAM,WAAW;gBACf,cAAc,YAAY,cAAc,CAAC,iBAAiB,YAAY,WAAW,GAAG,SAAS,WAAW,IAAI;gBAC5G,sBAAsB,YAAY,cAAc,CAAC,wBAAwB,YAAY,kBAAkB,GAAG,SAAS,kBAAkB,IAAI;gBACzI,sBAAsB,YAAY,cAAc,CAAC,wBAAwB,YAAY,kBAAkB,GAAG,SAAS,kBAAkB,IAAI;gBACzI,sBAAsB,YAAY,cAAc,CAAC,wBAAwB,YAAY,kBAAkB,GAAG,SAAS,kBAAkB,IAAI;gBACzI,oBAAoB,YAAY,cAAc,CAAC,sBAAsB,YAAY,gBAAgB,GAAG,SAAS,gBAAgB,IAAI;YACnI;YAEA,MAAM,aAAa;gBACjB,eAAe,YAAY,cAAc,CAAC,kBAAkB,YAAY,YAAY,GAAG,SAAS,YAAY;gBAC5G,kBAAkB,YAAY,cAAc,CAAC,qBAAqB,YAAY,eAAe,GAAG,SAAS,eAAe;gBACxH,gBAAgB,YAAY,cAAc,CAAC,mBAAmB,YAAY,aAAa,GAAG,SAAS,aAAa;gBAChH,gBAAgB,YAAY,cAAc,CAAC,mBAAmB,YAAY,aAAa,GAAG,SAAS,aAAa;gBAChH,eAAe,YAAY,cAAc,CAAC,kBAAkB,YAAY,YAAY,GAAG,SAAS,YAAY;gBAC5G,UAAU,YAAY,cAAc,CAAC,cAAc,YAAY,QAAQ,GAAG,SAAS,QAAQ;gBAC3F,WAAW,YAAY,cAAc,CAAC,eAAe,YAAY,SAAS,GAAG,SAAS,SAAS;gBAC/F,UAAU;YACZ;YAEA,MAAM,WAAW,MAAM,IAAA,6LAA4B,EAAC,gBAAgB,EAAE,EAAE,SAAS,IAAI,CAAC,EAAE,EAAE;YAE1F,IAAI,CAAC,SAAS,OAAO,EAAE;gBACrB,QAAQ,KAAK,CAAC,8CAA8C,SAAS,KAAK;gBAC1E,MAAM,IAAI,MAAM,SAAS,KAAK;YAChC;YAEA,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YAEA,gCAAgC;YAChC;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;YACnD,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA,OAAO;QACT;IACF;IAEA,uDAAuD;IACvD,MAAM,EAAE,MAAM,WAAW,EAAE,WAAW,cAAc,EAAE,UAAU,EAAE,OAAO,EAAE,GAAG,IAAA,uLAAQ,EAAC;QACrF,UAAU;YAAC;YAAoB,iBAAiB;SAAG;QACnD,SAAS;QACT,SAAS,CAAC,CAAC,iBAAiB;QAC5B,WAAW,IAAI;QACf,QAAQ,KAAK;QACb,sBAAsB;QACtB,oBAAoB;IACtB;IAEA,yCAAyC;IACzC,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa;YACf,YAAY;QACd,OAAO,IAAI,CAAC,iBAAiB;YAC3B,YAAY;QACd;IACF,GAAG;QAAC;QAAa;KAAgB;IAEjC,sCAAsC;IACtC,IAAA,kNAAS,EAAC;QACR,aAAa,kBAAkB;IACjC,GAAG;QAAC;QAAgB;KAAW;IAE/B,OAAO;QACL;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useFinancialVisibility.ts"],"sourcesContent":["import { useProfiles } from '@/contexts/ProfileContext';\r\n\r\n/**\r\n * Hook to handle financial data visibility based on permissions\r\n */\r\nexport const useFinancialVisibility = () => {\r\n    const { hasPermission } = useProfiles();\r\n\r\n    const canViewCostPrice = hasPermission('inventory', 'view_cost_price');\r\n    const canViewProfit = hasPermission('inventory', 'view_profit');\r\n    const canViewSellingPrice = hasPermission('inventory', 'view_selling_price');\r\n\r\n    // Dashboard-specific permissions\r\n    const canViewTotalSales = hasPermission('dashboard', 'view_total_sales');\r\n    const canViewTotalGrossProfit = hasPermission('dashboard', 'view_gross_profit');\r\n    const canViewTotalExpenses = hasPermission('dashboard', 'view_total_expenses');\r\n    const canViewInventoryValue = hasPermission('dashboard', 'view_inventory_value');\r\n    const canViewSalesTypes = hasPermission('dashboard', 'view_sales_types');\r\n    const canViewAvgPrice = hasPermission('dashboard', 'view_avg_price');\r\n    const canViewTotalAmount = hasPermission('dashboard', 'view_total_amount');\r\n\r\n    // Finance and Expenses permissions\r\n    const canManageFinanceAccounts = hasPermission('finance', 'manage_accounts');\r\n    const canViewFinance = hasPermission('finance', 'view');\r\n    const canViewExpenses = hasPermission('expenses', 'view');\r\n    const canCreateExpenses = hasPermission('expenses', 'create');\r\n    const canEditExpenses = hasPermission('expenses', 'edit');\r\n    const canDeleteExpenses = hasPermission('expenses', 'delete');\r\n\r\n    /**\r\n     * Format a financial value or return a hidden indicator\r\n     */\r\n    const formatFinancial = (value: number | null | undefined, type: 'cost' | 'selling' | 'profit'): string => {\r\n        const hasAccess =\r\n            (type === 'cost' && canViewCostPrice) ||\r\n            (type === 'selling' && canViewSellingPrice) ||\r\n            (type === 'profit' && canViewProfit);\r\n\r\n        if (!hasAccess) {\r\n            return '•••';\r\n        }\r\n\r\n        return value?.toLocaleString() || '0';\r\n    };\r\n\r\n    return {\r\n        canViewCostPrice,\r\n        canViewProfit,\r\n        canViewSellingPrice,\r\n        canViewTotalSales,\r\n        canViewTotalGrossProfit,\r\n        canViewTotalExpenses,\r\n        canViewInventoryValue,\r\n        canViewSalesTypes,\r\n        canViewAvgPrice,\r\n        canViewTotalAmount,\r\n        canManageFinanceAccounts,\r\n        canViewFinance,\r\n        canViewExpenses,\r\n        canCreateExpenses,\r\n        canEditExpenses,\r\n        canDeleteExpenses,\r\n        formatFinancial,\r\n    };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAKO,MAAM,yBAAyB;IAClC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,iJAAW;IAErC,MAAM,mBAAmB,cAAc,aAAa;IACpD,MAAM,gBAAgB,cAAc,aAAa;IACjD,MAAM,sBAAsB,cAAc,aAAa;IAEvD,iCAAiC;IACjC,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,0BAA0B,cAAc,aAAa;IAC3D,MAAM,uBAAuB,cAAc,aAAa;IACxD,MAAM,wBAAwB,cAAc,aAAa;IACzD,MAAM,oBAAoB,cAAc,aAAa;IACrD,MAAM,kBAAkB,cAAc,aAAa;IACnD,MAAM,qBAAqB,cAAc,aAAa;IAEtD,mCAAmC;IACnC,MAAM,2BAA2B,cAAc,WAAW;IAC1D,MAAM,iBAAiB,cAAc,WAAW;IAChD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IACpD,MAAM,kBAAkB,cAAc,YAAY;IAClD,MAAM,oBAAoB,cAAc,YAAY;IAEpD;;KAEC,GACD,MAAM,kBAAkB,CAAC,OAAkC;QACvD,MAAM,YACF,AAAC,SAAS,UAAU,oBACnB,SAAS,aAAa,uBACtB,SAAS,YAAY;QAE1B,IAAI,CAAC,WAAW;YACZ,OAAO;QACX;QAEA,OAAO,OAAO,oBAAoB;IACtC;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/types/cash.ts"],"sourcesContent":["\r\n// Cash management types\r\nexport interface CashAccount {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashAccount {\r\n  id: string;\r\n  user_id: string;\r\n  name: string;\r\n  description: string | null;\r\n  opening_balance: number;\r\n  is_default: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashTransaction {\r\n  id: string;\r\n  accountId: string | null;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out';\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string | null;\r\n  tags: string[] | null;\r\n  date: Date;\r\n  paymentMethod: string | null;\r\n  receiptImage: string | null;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashTransaction {\r\n  id: string;\r\n  user_id: string;\r\n  account_id: string | null;\r\n  amount: number;\r\n  transaction_type: string;\r\n  category: string;\r\n  description: string;\r\n  person_in_charge: string | null;\r\n  tags: string[] | null;\r\n  date: string;\r\n  payment_method: string | null;\r\n  receipt_image: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashAccountFormData {\r\n  name: string;\r\n  description: string;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n}\r\n\r\nexport interface CashTransactionFormData {\r\n  accountId: string;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer';\r\n  toAccountId?: string;\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string;\r\n  tags: string[];\r\n  date: Date;\r\n  paymentMethod: string;\r\n  receiptImage: string;\r\n}\r\n\r\nexport interface DailyCashSummary {\r\n  date: Date;\r\n  openingBalance: number;\r\n  cashIn: number;\r\n  cashOut: number;\r\n  transfersIn: number;\r\n  transfersOut: number;\r\n  closingBalance: number;\r\n}\r\n\r\n// Conversion functions\r\nexport const mapDbCashAccountToCashAccount = (dbAccount: DbCashAccount): CashAccount => {\r\n  return {\r\n    id: dbAccount.id,\r\n    name: dbAccount.name,\r\n    description: dbAccount.description,\r\n    openingBalance: Number(dbAccount.opening_balance),\r\n    isDefault: dbAccount.is_default,\r\n    createdAt: new Date(dbAccount.created_at),\r\n    updatedAt: new Date(dbAccount.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbInsert = (formData: CashAccountFormData, userId: string): Omit<DbCashAccount, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    name: formData.name,\r\n    description: formData.description || null,\r\n    opening_balance: formData.openingBalance,\r\n    is_default: formData.isDefault\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbUpdate = (formData: Partial<CashAccountFormData>): Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> => {\r\n  const result: Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> = {};\r\n\r\n  if (formData.name !== undefined) result.name = formData.name;\r\n  if (formData.description !== undefined) result.description = formData.description || null;\r\n  if (formData.openingBalance !== undefined) result.opening_balance = formData.openingBalance;\r\n  if (formData.isDefault !== undefined) result.is_default = formData.isDefault;\r\n\r\n  return result;\r\n};\r\n\r\nexport const mapDbCashTransactionToCashTransaction = (dbTransaction: DbCashTransaction): CashTransaction => {\r\n  return {\r\n    id: dbTransaction.id,\r\n    accountId: dbTransaction.account_id,\r\n    amount: Number(dbTransaction.amount),\r\n    transactionType: dbTransaction.transaction_type as 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out',\r\n    category: dbTransaction.category,\r\n    description: dbTransaction.description,\r\n    personInCharge: dbTransaction.person_in_charge,\r\n    tags: dbTransaction.tags,\r\n    date: new Date(dbTransaction.date),\r\n    paymentMethod: dbTransaction.payment_method,\r\n    receiptImage: dbTransaction.receipt_image,\r\n    createdAt: new Date(dbTransaction.created_at),\r\n    updatedAt: new Date(dbTransaction.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashTransactionFormToDbInsert = (formData: CashTransactionFormData, userId: string): Omit<DbCashTransaction, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    account_id: formData.accountId,\r\n    amount: formData.amount,\r\n    transaction_type: formData.transactionType,\r\n    category: formData.category,\r\n    description: formData.description,\r\n    person_in_charge: formData.personInCharge || null,\r\n    tags: formData.tags.length > 0 ? formData.tags : null,\r\n    date: formData.date.toISOString().split('T')[0],\r\n    payment_method: formData.paymentMethod || null,\r\n    receipt_image: formData.receiptImage || null\r\n  };\r\n};\r\n"],"names":[],"mappings":"AACA,wBAAwB;;;;;;;;;;;;;AAuFjB,MAAM,gCAAgC,CAAC;IAC5C,OAAO;QACL,IAAI,UAAU,EAAE;QAChB,MAAM,UAAU,IAAI;QACpB,aAAa,UAAU,WAAW;QAClC,gBAAgB,OAAO,UAAU,eAAe;QAChD,WAAW,UAAU,UAAU;QAC/B,WAAW,IAAI,KAAK,UAAU,UAAU;QACxC,WAAW,IAAI,KAAK,UAAU,UAAU;IAC1C;AACF;AAEO,MAAM,+BAA+B,CAAC,UAA+B;IAC1E,OAAO;QACL,SAAS;QACT,MAAM,SAAS,IAAI;QACnB,aAAa,SAAS,WAAW,IAAI;QACrC,iBAAiB,SAAS,cAAc;QACxC,YAAY,SAAS,SAAS;IAChC;AACF;AAEO,MAAM,+BAA+B,CAAC;IAC3C,MAAM,SAAuF,CAAC;IAE9F,IAAI,SAAS,IAAI,KAAK,WAAW,OAAO,IAAI,GAAG,SAAS,IAAI;IAC5D,IAAI,SAAS,WAAW,KAAK,WAAW,OAAO,WAAW,GAAG,SAAS,WAAW,IAAI;IACrF,IAAI,SAAS,cAAc,KAAK,WAAW,OAAO,eAAe,GAAG,SAAS,cAAc;IAC3F,IAAI,SAAS,SAAS,KAAK,WAAW,OAAO,UAAU,GAAG,SAAS,SAAS;IAE5E,OAAO;AACT;AAEO,MAAM,wCAAwC,CAAC;IACpD,OAAO;QACL,IAAI,cAAc,EAAE;QACpB,WAAW,cAAc,UAAU;QACnC,QAAQ,OAAO,cAAc,MAAM;QACnC,iBAAiB,cAAc,gBAAgB;QAC/C,UAAU,cAAc,QAAQ;QAChC,aAAa,cAAc,WAAW;QACtC,gBAAgB,cAAc,gBAAgB;QAC9C,MAAM,cAAc,IAAI;QACxB,MAAM,IAAI,KAAK,cAAc,IAAI;QACjC,eAAe,cAAc,cAAc;QAC3C,cAAc,cAAc,aAAa;QACzC,WAAW,IAAI,KAAK,cAAc,UAAU;QAC5C,WAAW,IAAI,KAAK,cAAc,UAAU;IAC9C;AACF;AAEO,MAAM,mCAAmC,CAAC,UAAmC;IAClF,OAAO;QACL,SAAS;QACT,YAAY,SAAS,SAAS;QAC9B,QAAQ,SAAS,MAAM;QACvB,kBAAkB,SAAS,eAAe;QAC1C,UAAU,SAAS,QAAQ;QAC3B,aAAa,SAAS,WAAW;QACjC,kBAAkB,SAAS,cAAc,IAAI;QAC7C,MAAM,SAAS,IAAI,CAAC,MAAM,GAAG,IAAI,SAAS,IAAI,GAAG;QACjD,MAAM,SAAS,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAC/C,gBAAgB,SAAS,aAAa,IAAI;QAC1C,eAAe,SAAS,YAAY,IAAI;IAC1C;AACF"}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportCashTransactionsToPDF.ts"],"sourcesContent":["\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport const exportCashTransactionsToPDF = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  accountName?: string,\r\n  openingBalance: number = 0,\r\n  currency: string = 'USD',\r\n  dateRange?: { from: Date | undefined; to: Date | undefined },\r\n  businessSettings?: {\r\n    businessName: string;\r\n    businessAddress: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n  }\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  // Sort transactions chronologically (latest first) for display\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = b.date.getTime() - a.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time (latest first)\r\n    return b.createdAt.getTime() - a.createdAt.getTime();\r\n  });\r\n\r\n  // For balance calculation, we need to sort chronologically (oldest first)\r\n  const chronologicalTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = a.date.getTime() - b.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time\r\n    return a.createdAt.getTime() - b.createdAt.getTime();\r\n  });\r\n\r\n  // Calculate totals\r\n  const totalCashIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalCashOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  const totalTransferIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalTransferOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  // Calculate running balance for each transaction based on chronological order\r\n  let runningBalance = openingBalance;\r\n  const balanceMap = new Map<string, number>();\r\n  \r\n  chronologicalTransactions.forEach(transaction => {\r\n    if (transaction.transactionType === 'cash_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'cash_out') {\r\n      runningBalance -= transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_out') {\r\n      runningBalance -= transaction.amount;\r\n    }\r\n    balanceMap.set(transaction.id, runningBalance);\r\n  });\r\n\r\n  // Helper function to format transaction type for display\r\n  const formatTransactionType = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  // Prepare display data with correct balances for sorted (latest first) transactions\r\n  const transactionsWithBalance = sortedTransactions.map(transaction => {\r\n    return { \r\n      ...transaction, \r\n      balance: balanceMap.get(transaction.id) || 0,\r\n      formattedType: formatTransactionType(transaction.transactionType)\r\n    };\r\n  });\r\n\r\n  const accountBalance = runningBalance;\r\n\r\n  // Create new PDF document in portrait orientation\r\n  const pdf = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margins = { top: 15, right: 15, bottom: 15, left: 15 };\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  \r\n  let currentY = margins.top;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setTextColor(150, 150, 150); // Light gray color\r\n    pdf.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  // Table setup with new column widths for portrait format including Amount\r\n  const colWidths = [30, 55, 35, 30, 30]; // Date, Description, Transaction Type, Amount, Balance\r\n  const rowHeight = 8;\r\n  const headerHeight = 10;\r\n\r\n  // Table headers\r\n  const headers = [\r\n    'Date',\r\n    'Description',\r\n    'Transaction Type',\r\n    'Amount',\r\n    'Balance'\r\n  ];\r\n\r\n  // Function to draw table headers\r\n  const drawTableHeaders = () => {\r\n    // Draw header background\r\n    pdf.setFillColor(243, 244, 246);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight, 'F');\r\n\r\n    // Draw header borders\r\n    pdf.setLineWidth(0.3);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight);\r\n\r\n    // Header text\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    let currentX = margins.left;\r\n    \r\n    headers.forEach((header, index) => {\r\n      const colWidth = colWidths[index];\r\n      const textWidth = pdf.getTextWidth(header);\r\n      const textX = currentX + (colWidth - textWidth) / 2;\r\n      pdf.text(header, textX, currentY + 6);\r\n      \r\n      if (index < headers.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 2, currentX + colWidth, currentY + headerHeight - 2);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += headerHeight;\r\n  };\r\n\r\n  // Helper function to check if we need a new page\r\n  const checkPageBreak = (neededHeight: number) => {\r\n    if (currentY + neededHeight > pageHeight - margins.bottom - 15) { // Reserve space for watermark\r\n      addWatermark(); // Add watermark to current page before creating new one\r\n      pdf.addPage();\r\n      currentY = margins.top;\r\n      drawTableHeaders(); // Add headers to new page\r\n      // Reset font to normal after drawing headers on new page\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.setFontSize(9);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Header section with business details on left and title on right\r\n  const headerStartY = currentY;\r\n  \r\n  // Business details on the left\r\n  if (businessSettings) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(businessSettings.businessName, margins.left, currentY);\r\n    currentY += 6;\r\n    \r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(businessSettings.businessAddress, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessPhone, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessEmail, margins.left, currentY);\r\n  }\r\n  \r\n  // Reset currentY to header start for right-aligned content\r\n  currentY = headerStartY;\r\n  \r\n  // Title on the right\r\n  pdf.setFontSize(18);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const title = `Cash Transactions Report (${currency})`;\r\n  const titleWidth = pdf.getTextWidth(title);\r\n  pdf.text(title, pageWidth - margins.right - titleWidth, currentY);\r\n  currentY += 8;\r\n\r\n  // Account name if provided - right aligned under title\r\n  if (accountName) {\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const accountText = accountName;\r\n    const accountTextWidth = pdf.getTextWidth(accountText);\r\n    pdf.text(accountText, pageWidth - margins.right - accountTextWidth, currentY);\r\n    currentY += 6;\r\n  }\r\n\r\n  // Date range display - right aligned under title/account\r\n  if (dateRange?.from && dateRange?.to) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const fromDate = format(dateRange.from, 'dd/MM/yyyy');\r\n    const toDate = format(dateRange.to, 'dd/MM/yyyy');\r\n    \r\n    const dateText = fromDate === toDate ? fromDate : `${fromDate} - ${toDate}`;\r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  } else {\r\n    // If no date range is provided, determine from transaction dates or use today's date\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    \r\n    let dateText: string;\r\n    if (transactions.length > 0) {\r\n      // Find the earliest and latest transaction dates\r\n      const dates = transactions.map(t => t.date);\r\n      const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n      const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n      \r\n      const fromDateStr = format(earliestDate, 'dd/MM/yyyy');\r\n      const toDateStr = format(latestDate, 'dd/MM/yyyy');\r\n      \r\n      dateText = fromDateStr === toDateStr ? fromDateStr : `${fromDateStr} - ${toDateStr}`;\r\n    } else {\r\n      // Fallback to current date if no transactions\r\n      dateText = format(new Date(), 'dd/MM/yyyy');\r\n    }\r\n    \r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  }\r\n  \r\n  // Ensure we have enough space for both sections\r\n  currentY = Math.max(currentY, headerStartY + 25);\r\n\r\n  // Draw initial table headers\r\n  checkPageBreak(headerHeight + 10);\r\n  drawTableHeaders();\r\n\r\n  // Table data\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.setFontSize(9);\r\n\r\n  // Number formatter without currency symbol\r\n  const numberFormatter = new Intl.NumberFormat('en-US', {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  });\r\n\r\n  transactionsWithBalance.forEach((transaction, index) => {\r\n    checkPageBreak(rowHeight + 5);\r\n\r\n    // Format amount with negative sign for cash out and transfer out (no currency symbol)\r\n    const isNegativeTransaction = transaction.transactionType === 'cash_out' || transaction.transactionType === 'transfer_out';\r\n    const displayAmount = isNegativeTransaction ? -transaction.amount : transaction.amount;\r\n\r\n    const rowData = [\r\n      format(transaction.date, 'dd/MM/yyyy'),\r\n      transaction.description,\r\n      transaction.formattedType,\r\n      numberFormatter.format(displayAmount),\r\n      numberFormatter.format(transaction.balance)\r\n    ];\r\n\r\n    // Draw row background (alternating)\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(249, 250, 251);\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    }\r\n\r\n    // Draw row borders\r\n    pdf.setLineWidth(0.1);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight);\r\n\r\n    let currentX = margins.left;\r\n    \r\n    rowData.forEach((data, colIndex) => {\r\n      const colWidth = colWidths[colIndex];\r\n      let text = data;\r\n      \r\n      // For description column, allow truncation but for other columns, ensure full display\r\n      if (colIndex === 1) { // Description column\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 3) {\r\n          text = text.substring(0, text.length - 4) + '...';\r\n        }\r\n      } else if (colIndex === 3 || colIndex === 4) { // Amount and Balance columns\r\n        // Use smaller font if needed to fit full amount\r\n        let fontSize = 9;\r\n        pdf.setFontSize(fontSize);\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && fontSize > 6) {\r\n          fontSize -= 0.5;\r\n          pdf.setFontSize(fontSize);\r\n        }\r\n      }\r\n      \r\n      let textX = currentX + 2;\r\n      \r\n      // Right align amount and balance columns\r\n      if (colIndex === 3 || colIndex === 4) {\r\n        const textWidth = pdf.getTextWidth(text);\r\n        textX = currentX + colWidth - textWidth - 2;\r\n      }\r\n      \r\n      // Set all text to black color\r\n      pdf.setTextColor(0, 0, 0);\r\n      \r\n      pdf.text(text, textX, currentY + 5);\r\n      \r\n      // Reset font size\r\n      pdf.setFontSize(9);\r\n      \r\n      if (colIndex < rowData.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + rowHeight - 1);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Summary section\r\n  currentY += 10;\r\n  checkPageBreak(35);\r\n\r\n  // Summary title\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Summary', margins.left, currentY);\r\n  currentY += 8;\r\n\r\n  // Draw summary box\r\n  const summaryBoxHeight = 30;\r\n  const summaryBoxWidth = contentWidth * 0.9;\r\n  \r\n  pdf.setFillColor(248, 249, 250);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight, 'F');\r\n  pdf.setLineWidth(0.3);\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight);\r\n\r\n  // Summary data in columns without currency symbols\r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  const leftColumn = [\r\n    ['Opening Balance:', numberFormatter.format(openingBalance)],\r\n    ['Total Cash In:', numberFormatter.format(totalCashIn)],\r\n    ['Total Cash Out:', numberFormatter.format(totalCashOut)],\r\n    ['Final Balance:', numberFormatter.format(accountBalance)]\r\n  ];\r\n\r\n  const rightColumn = [\r\n    ['Total Transfer In:', numberFormatter.format(totalTransferIn)],\r\n    ['Total Transfer Out:', numberFormatter.format(totalTransferOut)]\r\n  ];\r\n\r\n  let summaryY = currentY + 3;\r\n  const leftColumnX = margins.left + 10;\r\n  const rightColumnX = margins.left + summaryBoxWidth / 2 + 10;\r\n\r\n  // Draw left column\r\n  leftColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, leftColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, leftColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Reset Y for right column\r\n  summaryY = currentY + 3;\r\n\r\n  // Draw right column\r\n  rightColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, rightColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, rightColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Add watermark to the final page\r\n  addWatermark();\r\n\r\n  // Generate filename based on report date range\r\n  let filename: string;\r\n  const accountPrefix = accountName ? accountName.replace(/[^a-z0-9]/gi, '-').toLowerCase() + '-' : '';\r\n  \r\n  if (dateRange?.from && dateRange?.to) {\r\n    const fromDate = format(dateRange.from, 'yyyy-MM-dd');\r\n    const toDate = format(dateRange.to, 'yyyy-MM-dd');\r\n    \r\n    if (fromDate === toDate) {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}.pdf`;\r\n    } else {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}_to_${toDate}.pdf`;\r\n    }\r\n  } else {\r\n    // Fallback to current date if no range provided\r\n    filename = `cash-transactions-${accountPrefix}${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n  }\r\n\r\n  pdf.save(filename);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/exportCashTransactionsToCSV.ts"],"sourcesContent":["\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\n\r\nexport const exportCashTransactionsToCSV = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  currency: string = 'USD'\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Account',\r\n    'Description',\r\n    'Category',\r\n    'Person in Charge',\r\n    'Amount',\r\n    'Payment Method'\r\n  ];\r\n\r\n  const csvData = transactions.map(transaction => [\r\n    format(transaction.date, 'yyyy-MM-dd'),\r\n    transaction.transactionType.replace('_', ' '),\r\n    getAccountName(transaction.accountId),\r\n    `\"${transaction.description.replace(/\"/g, '\"\"')}\"`,\r\n    transaction.category,\r\n    transaction.personInCharge || '',\r\n    transaction.amount.toString(),\r\n    transaction.paymentMethod || ''\r\n  ]);\r\n\r\n  const csvContent = [headers, ...csvData]\r\n    .map(row => row.join(','))\r\n    .join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  \r\n  if (link.download !== undefined) {\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `cash-transactions-${currency}-${format(new Date(), 'yyyy-MM-dd')}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;;AAEO,MAAM,8BAA8B,CACzC,cACA,gBACA,gBACA,WAAmB,KAAK;IAExB,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,MAAM;QACN;IACF;IAEA,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,UAAU,aAAa,GAAG,CAAC,CAAA,cAAe;YAC9C,IAAA,+JAAM,EAAC,YAAY,IAAI,EAAE;YACzB,YAAY,eAAe,CAAC,OAAO,CAAC,KAAK;YACzC,eAAe,YAAY,SAAS;YACpC,CAAC,CAAC,EAAE,YAAY,WAAW,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;YAClD,YAAY,QAAQ;YACpB,YAAY,cAAc,IAAI;YAC9B,YAAY,MAAM,CAAC,QAAQ;YAC3B,YAAY,aAAa,IAAI;SAC9B;IAED,MAAM,aAAa;QAAC;WAAY;KAAQ,CACrC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC,MACpB,IAAI,CAAC;IAER,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAA0B;IACtE,MAAM,OAAO,SAAS,aAAa,CAAC;IAEpC,IAAI,KAAK,QAAQ,KAAK,WAAW;QAC/B,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,KAAK,YAAY,CAAC,QAAQ;QAC1B,KAAK,YAAY,CAAC,YAAY,CAAC,kBAAkB,EAAE,SAAS,CAAC,EAAE,IAAA,+JAAM,EAAC,IAAI,QAAQ,cAAc,IAAI,CAAC;QACrG,KAAK,KAAK,CAAC,UAAU,GAAG;QACxB,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AACF"}},
    {"offset": {"line": 1324, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/csvParser.ts"],"sourcesContent":["\r\nexport interface CSVProductRow {\r\n  'Product Name': string;\r\n  'Category': string;\r\n  'Description': string;\r\n  'Supplier': string;\r\n  'Creation Date': string;\r\n  'Initial Stock': string;\r\n  'Minimum Stock Level': string;\r\n  'Cost Price': string;\r\n  'Selling Price': string;\r\n  'Manufacturer Barcode'?: string;\r\n}\r\n\r\nexport interface CSVTransactionRow {\r\n  'Date': string;\r\n  'Type': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'To Account'?: string;\r\n}\r\n\r\nexport interface CSVExpenseRow {\r\n  'Date': string;\r\n  'Amount': string;\r\n  'Description': string;\r\n  'Category': string;\r\n  'Payment Method'?: string;\r\n  'Person In Charge'?: string;\r\n  'Link to Finance'?: string; // 'true' or 'false'\r\n  'Finance Account'?: string; // Account name\r\n}\r\n\r\nexport interface ValidationError {\r\n  row: number;\r\n  field: string;\r\n  message: string;\r\n}\r\n\r\nexport interface ParsedCSVResult {\r\n  validRows: CSVProductRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\n// Proper CSV parser that handles quoted fields with commas\r\nconst parseCSVLine = (line: string): string[] => {\r\n  const result: string[] = [];\r\n  let current = '';\r\n  let inQuotes = false;\r\n  let i = 0;\r\n\r\n  while (i < line.length) {\r\n    const char = line[i];\r\n    const nextChar = line[i + 1];\r\n\r\n    if (char === '\"') {\r\n      if (inQuotes && nextChar === '\"') {\r\n        // Escaped quote - add single quote to current field\r\n        current += '\"';\r\n        i += 2; // Skip both quotes\r\n        continue;\r\n      } else {\r\n        // Toggle quote state\r\n        inQuotes = !inQuotes;\r\n      }\r\n    } else if (char === ',' && !inQuotes) {\r\n      // Field separator - push current field and reset\r\n      result.push(current.trim());\r\n      current = '';\r\n    } else {\r\n      // Regular character - add to current field\r\n      current += char;\r\n    }\r\n\r\n    i++;\r\n  }\r\n\r\n  // Push the last field\r\n  result.push(current.trim());\r\n  return result;\r\n};\r\n\r\nexport const parseCSV = (csvText: string): ParsedCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVProductRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVProductRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedTransactionCSVResult {\r\n  validRows: CSVTransactionRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseTransactionCSV = (csvText: string): ParsedTransactionCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVTransactionRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateTransactionCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVTransactionRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nexport interface ParsedExpenseCSVResult {\r\n  validRows: CSVExpenseRow[];\r\n  errors: ValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\nexport const parseExpenseCSV = (csvText: string): ParsedExpenseCSVResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  if (lines.length < 1) return { validRows: [], errors: [], totalRows: 0 };\r\n\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVExpenseRow[] = [];\r\n  const errors: ValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    if (!lines[i].trim()) continue;\r\n\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate required fields\r\n    const rowErrors = validateExpenseCSVRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVExpenseRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nconst validateCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  // Only validate that Product Name is present\r\n  if (!row['Product Name']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Product Name',\r\n      message: 'Product Name is required'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateTransactionCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Type'] || !['cash_in', 'cash_out', 'transfer'].includes(row['Type'].toLowerCase())) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Type',\r\n      message: 'Type must be \"cash_in\", \"cash_out\", or \"transfer\"'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  if (row['Type']?.toLowerCase() === 'transfer' && !row['To Account']) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'To Account',\r\n      message: 'To Account is required for transfers'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validateExpenseCSVRow = (row: any, rowNumber: number): ValidationError[] => {\r\n  const errors: ValidationError[] = [];\r\n\r\n  if (!row['Amount'] || isNaN(Number(row['Amount'])) || Number(row['Amount']) <= 0) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Amount',\r\n      message: 'Amount must be a positive number'\r\n    });\r\n  }\r\n\r\n  if (!row['Description']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Description',\r\n      message: 'Description is required'\r\n    });\r\n  }\r\n\r\n  const linkToFinance = row['Link to Finance']?.toString().toLowerCase();\r\n  if (linkToFinance === 'true' && !row['Finance Account']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Finance Account',\r\n      message: 'Finance Account is required when Link to Finance is true'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const generateErrorLogCSV = (errors: ValidationError[], filename: string = 'upload_errors.csv') => {\r\n  const headers = ['Row', 'Field', 'Error Message'];\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...errors.map(error =>\r\n      [error.row, error.field, `\"${error.message}\"`].join(',')\r\n    )\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = filename;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const extractUniqueCategories = (validRows: CSVProductRow[]): string[] => {\r\n  const categories = validRows\r\n    .map(row => row['Category']?.trim())\r\n    .filter(category => category && category !== '');\r\n\r\n  return [...new Set(categories)];\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1575, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/utils/csvTemplate.ts"],"sourcesContent":["\r\nexport const generateProductCSVTemplate = () => {\r\n  const headers = [\r\n    'Product Name',\r\n    'Category',\r\n    'Description',\r\n    'Supplier',\r\n    'Creation Date',\r\n    'Initial Stock',\r\n    'Minimum Stock Level',\r\n    'Cost Price',\r\n    'Selling Price'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '\"Sample Product with, commas\"',\r\n      'Electronics',\r\n      '\"A detailed product description, with commas and other punctuation!\"',\r\n      '\"Supplier Name, Inc.\"',\r\n      '15/01/2024',\r\n      '10',\r\n      '5',\r\n      '50.00',\r\n      '75.00'\r\n    ],\r\n    [\r\n      'Simple Product Name',\r\n      'Home & Garden',\r\n      'Basic description without commas',\r\n      'Basic Supplier',\r\n      '2024-01-16',\r\n      '-5',\r\n      '0',\r\n      '-25.50',\r\n      '100.75'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'product_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const generateTransactionCSVTemplate = () => {\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Amount',\r\n    'Description',\r\n    'Category',\r\n    'Payment Method',\r\n    'Person In Charge',\r\n    'To Account'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '22/12/2025',\r\n      'cash_in',\r\n      '1500.00',\r\n      'Sales income from morning shift',\r\n      'Sales',\r\n      'Cash',\r\n      'John Doe',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'cash_out',\r\n      '200.50',\r\n      'Purchased cleaning supplies',\r\n      'Expenses',\r\n      'Cash',\r\n      'Jane Smith',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'transfer',\r\n      '5000.00',\r\n      'Moving funds to main safe',\r\n      'Internal',\r\n      '',\r\n      'Admin',\r\n      'Main Safe'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'transaction_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n"],"names":[],"mappings":";;;;;;AACO,MAAM,6BAA6B;IACxC,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,aAAa;QACjB;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;KACF;IAED,MAAM,aAAa;QACjB,QAAQ,IAAI,CAAC;WACV,WAAW,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC;KACnC,CAAC,IAAI,CAAC;IAEP,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAAW;IACvD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;IACvC,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,IAAI,GAAG;IACZ,KAAK,QAAQ,GAAG;IAChB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,OAAO,GAAG,CAAC,eAAe,CAAC;AAC7B;AAEO,MAAM,iCAAiC;IAC5C,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,aAAa;QACjB;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD;YACE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;KACF;IAED,MAAM,aAAa;QACjB,QAAQ,IAAI,CAAC;WACV,WAAW,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC;KACnC,CAAC,IAAI,CAAC;IAEP,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAAW;IACvD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;IACvC,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,IAAI,GAAG;IACZ,KAAK,QAAQ,GAAG;IAChB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,OAAO,GAAG,CAAC,eAAe,CAAC;AAC7B"}},
    {"offset": {"line": 1700, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/pages/CashAccount.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  Filter,\r\n  RotateCw,\r\n  ChevronLeft,\r\n  Eye,\r\n  Pencil,\r\n  Trash2,\r\n  Wallet,\r\n  ArrowUpRight,\r\n  ArrowDownLeft,\r\n  ArrowLeftRight,\r\n  MoreVertical,\r\n  Edit,\r\n  RefreshCw,\r\n  Upload,\r\n  Download,\r\n  ArrowLeft,\r\n  RefreshCcw,\r\n  ArrowDownRight,\r\n  ArrowRightLeft,\r\n  LayoutGrid,\r\n  Zap,\r\n  Loader2\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport CashTransactionDialog from '@/components/cash/CashTransactionDialog';\r\nimport EditCashTransactionDialog from '@/components/cash/EditCashTransactionDialog';\r\nimport ViewCashTransactionDialog from '@/components/cash/ViewCashTransactionDialog';\r\nimport CashAccountDialog from '@/components/cash/CashAccountDialog';\r\nimport CashTransactionsList from '@/components/cash/CashTransactionsList';\r\nimport DailyCashSummary from '@/components/cash/DailyCashSummary';\r\nimport BulkTransactionAddTab from '@/components/cash/BulkTransactionAddTab';\r\nimport CashCSVUploadDialog from '@/components/cash/CashCSVUploadDialog';\r\nimport { generateTransactionCSVTemplate } from '@/utils/csvTemplate';\r\nimport { CashTransactionFormData, CashAccountFormData, CashTransaction } from '@/types/cash';\r\nimport { formatCashAmount, cn } from '@/lib/utils';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle as AlertCircleIcon } from 'lucide-react';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst CashAccount = () => {\r\n  const { accountId } = useParams<{ accountId: string }>();\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const isMobile = useIsMobile();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { accounts, isLoading, updateAccount, refreshAccounts } = useCashAccounts();\r\n  const { transactions, createTransaction, updateTransaction, refreshTransactions, deleteTransaction, getDailySummary } = useCashTransactions(accountId);\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [isTransactionDialogOpen, setIsTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [isBulkTransactionDialogOpen, setIsBulkTransactionDialogOpen] = useState(false);\r\n  const [isCSVUploadDialogOpen, setIsCSVUploadDialogOpen] = useState(false);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditAccountDialogOpen, setIsEditAccountDialogOpen] = useState(false);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [todaysClosingBalance, setTodaysClosingBalance] = useState(0);\r\n  const [isLoadingBalance, setIsLoadingBalance] = useState(true);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n  const [presetTransactionType, setPresetTransactionType] = useState<'cash_in' | 'cash_out' | 'transfer'>('cash_in');\r\n\r\n  const [isSubmittingAccount, setIsSubmittingAccount] = useState(false);\r\n\r\n  const account = accounts.find(acc => acc.id === accountId);\r\n\r\n  // Store the current account ID and URL state in localStorage for navigation persistence\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const currentUrl = window.location.pathname + window.location.search;\r\n      localStorage.setItem('lastVisitedCashAccount', accountId);\r\n      localStorage.setItem('lastVisitedCashAccountUrl', currentUrl);\r\n    }\r\n  }, [accountId, searchParams]);\r\n\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const loadTodaysBalance = async () => {\r\n        setIsLoadingBalance(true);\r\n        try {\r\n          const summary = await getDailySummary(new Date(), accountId);\r\n          setTodaysClosingBalance(summary.closingBalance);\r\n        } finally {\r\n          setIsLoadingBalance(false);\r\n        }\r\n      };\r\n      loadTodaysBalance();\r\n    }\r\n  }, [accountId, getDailySummary, transactions]);\r\n\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    try {\r\n      await Promise.all([\r\n        refreshAccounts(),\r\n        refreshTransactions()\r\n      ]);\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error refreshing data:', error);\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const handleTransactionDeleted = async () => {\r\n    // Auto-refresh data after deletion\r\n    await Promise.all([\r\n      refreshTransactions(),\r\n      refreshAccounts()\r\n    ]);\r\n\r\n    // Refresh balance\r\n    if (accountId) {\r\n      setIsLoadingBalance(true);\r\n      const summary = await getDailySummary(new Date(), accountId);\r\n      setTodaysClosingBalance(summary.closingBalance);\r\n      setIsLoadingBalance(false);\r\n    }\r\n\r\n    // Force refresh of the DailyCashSummary component\r\n    setRefreshKey(prev => prev + 1);\r\n  };\r\n\r\n  const handleCreateTransaction = async (data: CashTransactionFormData) => {\r\n    try {\r\n      await createTransaction(data);\r\n      setIsTransactionDialogOpen(false);\r\n\r\n      // Auto-refresh data after creating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error creating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditTransaction = (transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleViewTransaction = (transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleUpdateTransaction = async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditAccount = async (data: CashAccountFormData) => {\r\n    setIsSubmittingAccount(true);\r\n    try {\r\n      if (accountId) {\r\n        await updateAccount(accountId, data);\r\n        setIsEditAccountDialogOpen(false);\r\n        // Refresh balance in case opening balance was changed\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating account:', error);\r\n    } finally {\r\n      setIsSubmittingAccount(false);\r\n    }\r\n  };\r\n\r\n  const handleQuickTransaction = (type: 'cash_in' | 'cash_out' | 'transfer') => {\r\n    setPresetTransactionType(type);\r\n    setIsTransactionDialogOpen(true);\r\n  };\r\n\r\n  if (businessLoading || !currentBusiness || isLoading || profilesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <LoadingSpinner message=\"Loading cash account details...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hasPermission('finance', 'view')) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircleIcon className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to view cash accounts.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/')} variant=\"outline\">\r\n            Back to Dashboard\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const canCreate = hasPermission('finance', 'create');\r\n  const canEdit = hasPermission('finance', 'edit');\r\n\r\n  if (!account) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Account not found</h2>\r\n          <Button onClick={() => navigate('/cash')}>\r\n            Back to Cash Accounts\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4 md:p-0\">\r\n      <CashTransactionDialog\r\n        open={isTransactionDialogOpen}\r\n        onOpenChange={setIsTransactionDialogOpen}\r\n        onSubmit={handleCreateTransaction}\r\n        accounts={accounts}\r\n        defaultAccountId={accountId}\r\n        presetTransactionType={presetTransactionType}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <CashAccountDialog\r\n        open={isEditAccountDialogOpen}\r\n        onOpenChange={setIsEditAccountDialogOpen}\r\n        onSubmit={handleEditAccount}\r\n        title=\"Edit Cash Account\"\r\n        initialData={{\r\n          name: account.name,\r\n          description: account.description || '',\r\n          openingBalance: account.openingBalance,\r\n          isDefault: account.isDefault\r\n        }}\r\n        isSubmitting={isSubmittingAccount}\r\n      />\r\n\r\n      <CashCSVUploadDialog\r\n        open={isCSVUploadDialogOpen}\r\n        onOpenChange={setIsCSVUploadDialogOpen}\r\n        accountId={accountId || ''}\r\n        onUploadComplete={() => {\r\n          setIsCSVUploadDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      <BulkTransactionAddTab\r\n        open={isBulkTransactionDialogOpen}\r\n        onOpenChange={setIsBulkTransactionDialogOpen}\r\n        accountId={accountId || ''}\r\n        onSuccess={() => {\r\n          setIsBulkTransactionDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      {/* Header Section */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size={isMobile ? \"sm\" : \"sm\"}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              // Clear the stored account when explicitly navigating back\r\n              localStorage.removeItem('lastVisitedCashAccount');\r\n              localStorage.removeItem('lastVisitedCashAccountUrl');\r\n              navigate('/cash');\r\n            }}\r\n            className=\"gap-2 px-2 md:px-3\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Back to Cash</span>\r\n            <span className=\"sm:hidden\">Back</span>\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <h1 className=\"text-2xl md:text-3xl font-bold break-words\">{account.name}</h1>\r\n          {account.description && (\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">{account.description}</p>\r\n          )}\r\n          <div className=\"text-lg md:text-xl font-semibold\">\r\n            {isLoadingBalance ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span>Current Balance:</span>\r\n                <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\r\n              </div>\r\n            ) : (\r\n              <span>Current Balance: {canManageFinanceAccounts ? formatCashAmount(todaysClosingBalance, settings.currency || 'USD') : '•••'}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex flex-wrap gap-2 sm:gap-3\">\r\n          {canEdit && (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => setIsEditAccountDialogOpen(true)}\r\n              className=\"gap-2 text-sm\"\r\n              size={isMobile ? \"sm\" : \"default\"}\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              Edit Account\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transaction Center */}\r\n      <Card className=\"border-none shadow-md overflow-hidden bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-950\">\r\n        <div className=\"p-4 sm:p-6 space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"space-y-1\">\r\n              <h3 className=\"text-lg font-bold tracking-tight\">Transaction Center</h3>\r\n              <p className=\"text-xs text-muted-foreground\">Manage your account entries efficiently</p>\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <Button\r\n                type=\"button\"\r\n                onClick={handleRefresh}\r\n                disabled={isRefreshing}\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Refresh Data\"\r\n              >\r\n                <RefreshCcw className={cn(\"h-4 w-4\", isRefreshing && \"animate-spin\")} />\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={generateTransactionCSVTemplate}\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Download CSV Template\"\r\n              >\r\n                <Download className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n            {/* Primary Action */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsTransactionDialogOpen(true)}\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 text-white shadow-lg border-none active:scale-[0.98] transition-all\",\r\n                canCreate ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-slate-400 cursor-not-allowed opacity-60\"\r\n              )}\r\n            >\r\n              <div className=\"bg-white/20 p-2 rounded-lg\">\r\n                <Plus className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">New Entry</span>\r\n                <span className=\"block text-[10px] opacity-80 font-medium\">Single Transaction</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* Bulk Entry */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsBulkTransactionDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10 hover:border-indigo-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600 dark:text-indigo-400\">\r\n                <LayoutGrid className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Bulk Entry</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Manual Batch</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* CSV Import */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsCSVUploadDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm col-span-1 sm:col-span-2 lg:col-span-1 active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10 hover:border-emerald-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-lg text-emerald-600 dark:text-emerald-400\">\r\n                <Upload className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Import CSV</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Process Legacy Logs</span>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Quick Access Shortcuts */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex items-center gap-2 px-1\">\r\n          <Zap className=\"h-4 w-4 text-amber-500 fill-amber-500\" />\r\n          <h4 className=\"text-sm font-bold uppercase tracking-wider text-slate-500\">Quick Shortcuts</h4>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_in')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-green-100 dark:border-green-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-green-50 dark:hover:bg-green-900/10 hover:border-green-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-green-100 dark:bg-green-900/30 p-1.5 rounded-md text-green-600\">\r\n                <ArrowUpRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-green-700 dark:text-green-400\">Cash In</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-green-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_out')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-red-100 dark:border-red-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-red-50 dark:hover:bg-red-900/10 hover:border-red-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-md text-red-600\">\r\n                <ArrowDownRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-red-700 dark:text-red-400\">Cash Out</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-red-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('transfer')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-blue-100 dark:border-blue-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:border-blue-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-md text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-blue-700 dark:text-blue-400\">Transfer</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Daily Summary */}\r\n      <DailyCashSummary key={refreshKey} accountId={accountId} />\r\n\r\n      {/* Transactions List */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">Recent Transactions</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={transactions}\r\n            accountId={accountId}\r\n            showAccountColumn={false}\r\n            onEditTransaction={handleEditTransaction}\r\n            onViewTransaction={handleViewTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashAccount;\r\n"],"names":[],"mappings":"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"}}]
}