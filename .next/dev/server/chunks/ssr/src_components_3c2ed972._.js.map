{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/drawer.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Drawer as DrawerPrimitive } from \"vaul\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Drawer = ({\r\n  shouldScaleBackground = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\r\n  <DrawerPrimitive.Root\r\n    shouldScaleBackground={shouldScaleBackground}\r\n    {...props}\r\n  />\r\n)\r\nDrawer.displayName = \"Drawer\"\r\n\r\nconst DrawerTrigger = DrawerPrimitive.Trigger\r\n\r\nconst DrawerPortal = DrawerPrimitive.Portal\r\n\r\nconst DrawerClose = DrawerPrimitive.Close\r\n\r\nconst DrawerOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\r\n\r\nconst DrawerContent = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DrawerPortal>\r\n    <DrawerOverlay />\r\n    <DrawerPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\r\n      {children}\r\n    </DrawerPrimitive.Content>\r\n  </DrawerPortal>\r\n))\r\nDrawerContent.displayName = \"DrawerContent\"\r\n\r\nconst DrawerHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerHeader.displayName = \"DrawerHeader\"\r\n\r\nconst DrawerFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerFooter.displayName = \"DrawerFooter\"\r\n\r\nconst DrawerTitle = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\r\n\r\nconst DrawerDescription = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerPortal,\r\n  DrawerOverlay,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerFooter,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,SAAS,CAAC,EACd,wBAAwB,IAAI,EAC5B,GAAG,OAC+C,iBAClD,8OAAC,gJAAe,CAAC,IAAI;QACnB,uBAAuB;QACtB,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG;AAErB,MAAM,gBAAgB,gJAAe,CAAC,OAAO;AAE7C,MAAM,eAAe,gJAAe,CAAC,MAAM;AAE3C,MAAM,cAAc,gJAAe,CAAC,KAAK;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,OAAO;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kCAAkC;QAC/C,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,gJAAe,CAAC,OAAO,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,gJAAe,CAAC,OAAO;gBACtB,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,kGACA;gBAED,GAAG,KAAK;;kCAET,8OAAC;wBAAI,WAAU;;;;;;oBACd;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG;AAE5B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,KAAK;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,gJAAe,CAAC,KAAK,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gJAAe,CAAC,WAAW;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,gJAAe,CAAC,WAAW,CAAC,WAAW"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/ImageViewer.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose\r\n} from '@/components/ui/drawer';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ImageViewerProps {\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  imageUrl: string;\r\n  imageAlt?: string;\r\n}\r\n\r\nconst ImageViewer: React.FC<ImageViewerProps> = ({ \r\n  isOpen, \r\n  onOpenChange, \r\n  imageUrl, \r\n  imageAlt = \"Receipt image\" \r\n}) => {\r\n  const isMobile = useIsMobile();\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n        <DrawerContent className=\"max-h-[90vh]\">\r\n          <div className=\"relative p-4\">\r\n            <DrawerClose className=\"absolute right-4 top-4 z-10 rounded-sm opacity-70 hover:opacity-100 bg-black/50 text-white p-2\">\r\n              <X className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Close</span>\r\n            </DrawerClose>\r\n            <div className=\"flex items-center justify-center min-h-[70vh]\">\r\n              <img \r\n                src={imageUrl} \r\n                alt={imageAlt}\r\n                className=\"max-w-full max-h-[80vh] object-contain rounded-lg\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </DrawerContent>\r\n      </Drawer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] p-4\">\r\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\r\n          <img \r\n            src={imageUrl} \r\n            alt={imageAlt}\r\n            className=\"max-w-full max-h-[80vh] object-contain rounded-lg\"\r\n          />\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ImageViewer;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAKA;AACA;;;;;;AASA,MAAM,cAA0C,CAAC,EAC/C,MAAM,EACN,YAAY,EACZ,QAAQ,EACR,WAAW,eAAe,EAC3B;IACC,MAAM,WAAW,IAAA,6IAAW;IAE5B,IAAI,UAAU;QACZ,qBACE,8OAAC,4IAAM;YAAC,MAAM;YAAQ,cAAc;sBAClC,cAAA,8OAAC,mJAAa;gBAAC,WAAU;0BACvB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iJAAW;4BAAC,WAAU;;8CACrB,8OAAC,iMAAC;oCAAC,WAAU;;;;;;8CACb,8OAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;sCAE5B,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,KAAK;gCACL,KAAK;gCACL,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOxB;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;YAAC,WAAU;sBACvB,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,KAAK;oBACL,KAAK;oBACL,WAAU;;;;;;;;;;;;;;;;;;;;;AAMtB;uCAEe"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface CashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (data: CashTransactionFormData) => void;\r\n  accounts: CashAccount[];\r\n  defaultAccountId?: string;\r\n  presetTransactionType?: 'cash_in' | 'cash_out' | 'transfer';\r\n}\r\n\r\nconst CashTransactionDialog: React.FC<CashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  accounts,\r\n  defaultAccountId,\r\n  presetTransactionType\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>({\r\n    defaultValues: {\r\n      accountId: defaultAccountId || '',\r\n      transactionType: presetTransactionType || 'cash_in',\r\n      category: '',\r\n      description: '',\r\n      personInCharge: '',\r\n      tags: [],\r\n      date: new Date(),\r\n      paymentMethod: '',\r\n      receiptImage: ''\r\n    }\r\n  });\r\n\r\n  const transactionType = watch('transactionType');\r\n  const receiptImage = watch('receiptImage');\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const today = new Date();\r\n      const todayString = today.toISOString().split('T')[0];\r\n\r\n      reset({\r\n        accountId: defaultAccountId || '',\r\n        amount: undefined as any,\r\n        transactionType: presetTransactionType || 'cash_in',\r\n        category: '',\r\n        description: '',\r\n        personInCharge: '',\r\n        tags: [],\r\n        date: today,\r\n        paymentMethod: '',\r\n        receiptImage: ''\r\n      });\r\n\r\n      // Set the preset transaction type if provided\r\n      if (presetTransactionType) {\r\n        setValue('transactionType', presetTransactionType);\r\n      }\r\n\r\n      // Set today's date in the date input with proper string format\r\n      setValue('date', todayString as any);\r\n    }\r\n  }, [open, defaultAccountId, presetTransactionType, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n\r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    console.log('Raw form data:', data);\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Ensure we have a proper date\r\n      let formDate: Date;\r\n      if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else if (typeof data.date === 'string') {\r\n        formDate = new Date(data.date);\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: CashTransactionFormData = {\r\n        accountId: data.accountId,\r\n        amount: Number(data.amount),\r\n        transactionType: data.transactionType,\r\n        toAccountId: data.toAccountId,\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n\r\n      console.log('Processed form data being submitted:', formData);\r\n      await onSubmit(formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>New Transaction</DialogTitle>\r\n          </DialogHeader>\r\n\r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"accountId\">Account</Label>\r\n                <Select\r\n                  value={watch('accountId')}\r\n                  onValueChange={(value) => {\r\n                    setValue('accountId', value);\r\n                    // Focus transaction type after selection\r\n                    setTimeout(() => {\r\n                      const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                      transactionTypeSelect?.focus();\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                          transactionTypeSelect?.focus();\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue placeholder=\"Select account\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {accounts.map((account) => (\r\n                      <SelectItem key={account.id} value={account.id}>\r\n                        {account.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n                {errors.accountId && (\r\n                  <p className=\"text-sm text-red-600\">{errors.accountId.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Select\r\n                  value={transactionType}\r\n                  onValueChange={(value) => {\r\n                    setValue('transactionType', value as 'cash_in' | 'cash_out' | 'transfer');\r\n                    // Focus next field after selection\r\n                    setTimeout(() => {\r\n                      if (value === 'transfer') {\r\n                        const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                        toAccountSelect?.focus();\r\n                      } else {\r\n                        document.getElementById('amount')?.focus();\r\n                      }\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          if (transactionType === 'transfer') {\r\n                            const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                            toAccountSelect?.focus();\r\n                          } else {\r\n                            document.getElementById('amount')?.focus();\r\n                          }\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {transactionType === 'transfer' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"toAccountId\">To Account</Label>\r\n                  <Select\r\n                    value={watch('toAccountId') || ''}\r\n                    onValueChange={(value) => {\r\n                      setValue('toAccountId', value);\r\n                      // Focus amount after selection\r\n                      setTimeout(() => {\r\n                        document.getElementById('amount')?.focus();\r\n                      }, 100);\r\n                    }}\r\n                  >\r\n                    <SelectTrigger\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          e.preventDefault();\r\n                          setTimeout(() => {\r\n                            document.getElementById('amount')?.focus();\r\n                          }, 100);\r\n                        }\r\n                      }}\r\n                    >\r\n                      <SelectValue placeholder=\"Select destination account\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {accounts\r\n                        .filter(account => account.id !== watch('accountId'))\r\n                        .map((account) => (\r\n                          <SelectItem key={account.id} value={account.id}>\r\n                            {account.name}\r\n                          </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  {...register('amount', {\r\n                    required: 'Amount is required',\r\n                    min: { value: 0.01, message: 'Amount must be greater than 0' }\r\n                  })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('category')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"0.00\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('description')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      document.getElementById('personInCharge')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('paymentMethod')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('date')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {receiptImage && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(receiptImage) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img\r\n                          src={receiptImage}\r\n                          alt=\"Receipt preview\"\r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"date\">Date</Label>\r\n                <Input\r\n                  id=\"date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      const submitButton = document.querySelector('button[type=\"submit\"]') as HTMLElement;\r\n                      submitButton?.focus();\r\n                    }\r\n                  }}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Creating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Create Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {receiptImage && !isReceiptPDF(receiptImage) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={receiptImage}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CashTransactionDialog;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAWA,MAAM,wBAA8D,CAAC,EACnE,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,gBAAgB,EAChB,qBAAqB,EACtB;IACC,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,yKAAO,EAA0B;QACjH,eAAe;YACb,WAAW,oBAAoB;YAC/B,iBAAiB,yBAAyB;YAC1C,UAAU;YACV,aAAa;YACb,gBAAgB;YAChB,MAAM,EAAE;YACR,MAAM,IAAI;YACV,eAAe;YACf,cAAc;QAChB;IACF;IAEA,MAAM,kBAAkB,MAAM;IAC9B,MAAM,eAAe,MAAM;IAC3B,MAAM,WAAW,IAAA,6IAAW;IAC5B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wIAAQ;IAE1B,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,MAAM;YACR,MAAM,QAAQ,IAAI;YAClB,MAAM,cAAc,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAErD,MAAM;gBACJ,WAAW,oBAAoB;gBAC/B,QAAQ;gBACR,iBAAiB,yBAAyB;gBAC1C,UAAU;gBACV,aAAa;gBACb,gBAAgB;gBAChB,MAAM,EAAE;gBACR,MAAM;gBACN,eAAe;gBACf,cAAc;YAChB;YAEA,8CAA8C;YAC9C,IAAI,uBAAuB;gBACzB,SAAS,mBAAmB;YAC9B;YAEA,+DAA+D;YAC/D,SAAS,QAAQ;QACnB;IACF,GAAG;QAAC;QAAM;QAAkB;QAAuB;QAAO;KAAS;IAEnE,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QACpC,IAAI,MAAM;YACR,kBAAkB;YAClB,MAAM,UAAU,KAAK,IAAI,CAAC,UAAU,CAAC;YACrC,MAAM,QAAQ,KAAK,IAAI,KAAK;YAE5B,IAAI,CAAC,WAAW,CAAC,OAAO;gBACtB,MAAM;oBACJ,OAAO;oBACP,aAAa;oBACb,SAAS;gBACX;gBACA;YACF;YAEA,2CAA2C;YAC3C,MAAM,UAAU,IAAI,eAAe,CAAC;YACpC,SAAS,gBAAgB;QAC3B;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,kEAAkE;QAClE,OAAO,OAAO,IAAI,QAAQ,CAAC;IAC7B;IAEA,MAAM,gBAAgB;QACpB,SAAS,gBAAgB;IAC3B;IAEA,MAAM,mBAAmB,OAAO;QAC9B,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,gBAAgB;QAEhB,IAAI;YACF,+BAA+B;YAC/B,IAAI;YACJ,IAAI,KAAK,IAAI,YAAY,MAAM;gBAC7B,WAAW,KAAK,IAAI;YACtB,OAAO,IAAI,OAAO,KAAK,IAAI,KAAK,UAAU;gBACxC,WAAW,IAAI,KAAK,KAAK,IAAI;YAC/B,OAAO;gBACL,WAAW,IAAI;YACjB;YAEA,MAAM,WAAoC;gBACxC,WAAW,KAAK,SAAS;gBACzB,QAAQ,OAAO,KAAK,MAAM;gBAC1B,iBAAiB,KAAK,eAAe;gBACrC,aAAa,KAAK,WAAW;gBAC7B,UAAU,KAAK,QAAQ;gBACvB,aAAa,KAAK,WAAW;gBAC7B,gBAAgB,KAAK,cAAc;gBACnC,MAAM,EAAE;gBACR,MAAM;gBACN,eAAe,KAAK,aAAa;gBACjC,cAAc,KAAK,YAAY;YACjC;YAEA,QAAQ,GAAG,CAAC,wCAAwC;YACpD,MAAM,SAAS;QACjB,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE;;0BACE,8OAAC,4IAAM;gBAAC,MAAM;gBAAM,cAAc;0BAChC,cAAA,8OAAC,mJAAa;oBAAC,WAAW,GAAG,WAAW,qCAAqC,oBAAoB;;sCAC/F,8OAAC,kJAAY;4BAAC,WAAW,WAAW,SAAS;sCAC3C,cAAA,8OAAC,iJAAW;0CAAC;;;;;;;;;;;sCAGf,8OAAC,wJAAU;4BAAC,WAAW,WAAW,8BAA8B;sCAC9D,cAAA,8OAAC;gCAAK,UAAU,aAAa;gCAAmB,WAAU;;kDACxD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAY;;;;;;0DAC3B,8OAAC,4IAAM;gDACL,OAAO,MAAM;gDACb,eAAe,CAAC;oDACd,SAAS,aAAa;oDACtB,yCAAyC;oDACzC,WAAW;wDACT,MAAM,wBAAwB,SAAS,gBAAgB,CAAC,oBAAoB,CAAC,EAAE;wDAC/E,uBAAuB;oDACzB,GAAG;gDACL;;kEAEA,8OAAC,mJAAa;wDACZ,WAAW,CAAC;4DACV,IAAI,EAAE,GAAG,KAAK,SAAS;gEACrB,EAAE,cAAc;gEAChB,WAAW;oEACT,MAAM,wBAAwB,SAAS,gBAAgB,CAAC,oBAAoB,CAAC,EAAE;oEAC/E,uBAAuB;gEACzB,GAAG;4DACL;wDACF;kEAEA,cAAA,8OAAC,iJAAW;4DAAC,aAAY;;;;;;;;;;;kEAE3B,8OAAC,mJAAa;kEACX,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,gJAAU;gEAAkB,OAAO,QAAQ,EAAE;0EAC3C,QAAQ,IAAI;+DADE,QAAQ,EAAE;;;;;;;;;;;;;;;;4CAMhC,OAAO,SAAS,kBACf,8OAAC;gDAAE,WAAU;0DAAwB,OAAO,SAAS,CAAC,OAAO;;;;;;;;;;;;kDAIjE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAkB;;;;;;0DACjC,8OAAC,4IAAM;gDACL,OAAO;gDACP,eAAe,CAAC;oDACd,SAAS,mBAAmB;oDAC5B,mCAAmC;oDACnC,WAAW;wDACT,IAAI,UAAU,YAAY;4DACxB,MAAM,kBAAkB,SAAS,gBAAgB,CAAC,oBAAoB,CAAC,EAAE;4DACzE,iBAAiB;wDACnB,OAAO;4DACL,SAAS,cAAc,CAAC,WAAW;wDACrC;oDACF,GAAG;gDACL;;kEAEA,8OAAC,mJAAa;wDACZ,WAAW,CAAC;4DACV,IAAI,EAAE,GAAG,KAAK,SAAS;gEACrB,EAAE,cAAc;gEAChB,WAAW;oEACT,IAAI,oBAAoB,YAAY;wEAClC,MAAM,kBAAkB,SAAS,gBAAgB,CAAC,oBAAoB,CAAC,EAAE;wEACzE,iBAAiB;oEACnB,OAAO;wEACL,SAAS,cAAc,CAAC,WAAW;oEACrC;gEACF,GAAG;4DACL;wDACF;kEAEA,cAAA,8OAAC,iJAAW;;;;;;;;;;kEAEd,8OAAC,mJAAa;;0EACZ,8OAAC,gJAAU;gEAAC,OAAM;0EAAU;;;;;;0EAC5B,8OAAC,gJAAU;gEAAC,OAAM;0EAAW;;;;;;0EAC7B,8OAAC,gJAAU;gEAAC,OAAM;0EAAW;;;;;;;;;;;;;;;;;;;;;;;;oCAKlC,oBAAoB,4BACnB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAc;;;;;;0DAC7B,8OAAC,4IAAM;gDACL,OAAO,MAAM,kBAAkB;gDAC/B,eAAe,CAAC;oDACd,SAAS,eAAe;oDACxB,+BAA+B;oDAC/B,WAAW;wDACT,SAAS,cAAc,CAAC,WAAW;oDACrC,GAAG;gDACL;;kEAEA,8OAAC,mJAAa;wDACZ,WAAW,CAAC;4DACV,IAAI,EAAE,GAAG,KAAK,SAAS;gEACrB,EAAE,cAAc;gEAChB,WAAW;oEACT,SAAS,cAAc,CAAC,WAAW;gEACrC,GAAG;4DACL;wDACF;kEAEA,cAAA,8OAAC,iJAAW;4DAAC,aAAY;;;;;;;;;;;kEAE3B,8OAAC,mJAAa;kEACX,SACE,MAAM,CAAC,CAAA,UAAW,QAAQ,EAAE,KAAK,MAAM,cACvC,GAAG,CAAC,CAAC,wBACJ,8OAAC,gJAAU;gEAAkB,OAAO,QAAQ,EAAE;0EAC3C,QAAQ,IAAI;+DADE,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;kDASvC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAS;;;;;;0DACxB,8OAAC,0IAAK;gDACJ,IAAG;gDACH,MAAK;gDACL,MAAK;gDACJ,GAAG,SAAS,UAAU;oDACrB,UAAU;oDACV,KAAK;wDAAE,OAAO;wDAAM,SAAS;oDAAgC;gDAC/D,EAAE;gDACF,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS;wDACrB,EAAE,cAAc;wDAChB,SAAS,cAAc,CAAC,aAAa;oDACvC;gDACF;gDACA,aAAY;;;;;;4CAEb,OAAO,MAAM,kBACZ,8OAAC;gDAAE,WAAU;0DAAwB,OAAO,MAAM,CAAC,OAAO;;;;;;;;;;;;kDAI9D,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAW;;;;;;0DAC1B,8OAAC,0IAAK;gDACJ,IAAG;gDACF,GAAG,SAAS,WAAW;gDACxB,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS;wDACrB,EAAE,cAAc;wDAChB,SAAS,cAAc,CAAC,gBAAgB;oDAC1C;gDACF;gDACA,aAAY;;;;;;;;;;;;kDAIhB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAc;;;;;;0DAC7B,8OAAC,gJAAQ;gDACP,IAAG;gDACF,GAAG,SAAS,eAAe;oDAAE,UAAU;gDAA0B,EAAE;gDACpE,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;wDACpC,EAAE,cAAc;wDAChB,SAAS,cAAc,CAAC,mBAAmB;oDAC7C;gDACF;gDACA,aAAY;gDACZ,MAAM;gDACN,WAAW,WAAW,iBAAiB;;;;;;4CAExC,OAAO,WAAW,kBACjB,8OAAC;gDAAE,WAAU;0DAAwB,OAAO,WAAW,CAAC,OAAO;;;;;;;;;;;;kDAInE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAiB;;;;;;0DAChC,8OAAC,0IAAK;gDACJ,IAAG;gDACF,GAAG,SAAS,iBAAiB;gDAC9B,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS;wDACrB,EAAE,cAAc;wDAChB,SAAS,cAAc,CAAC,kBAAkB;oDAC5C;gDACF;gDACA,aAAY;;;;;;;;;;;;kDAIhB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAgB;;;;;;0DAC/B,8OAAC,0IAAK;gDACJ,IAAG;gDACF,GAAG,SAAS,gBAAgB;gDAC7B,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS;wDACrB,EAAE,cAAc;wDAChB,SAAS,cAAc,CAAC,SAAS;oDACnC;gDACF;gDACA,aAAY;;;;;;;;;;;;kDAIhB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAe;;;;;;0DAC9B,8OAAC,0IAAK;gDACJ,IAAG;gDACH,MAAK;gDACL,QAAO;gDACP,UAAU;gDACV,WAAU;;;;;;4CAEX,8BACC,8OAAC;gDAAI,WAAU;0DACZ,aAAa,8BACZ,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,0NAAQ;4DAAC,WAAU;;;;;;sEACpB,8OAAC;4DAAK,WAAU;sEAAU;;;;;;sEAC1B,8OAAC,4IAAM;4DACL,MAAK;4DACL,SAAQ;4DACR,MAAK;4DACL,WAAU;4DACV,SAAS;sEAET,cAAA,8OAAC,iMAAC;gEAAC,WAAU;;;;;;;;;;;;;;;;6GAIjB;;sEACE,8OAAC;4DACC,KAAK;4DACL,KAAI;4DACJ,WAAU;4DACV,SAAS,IAAM,mBAAmB;;;;;;sEAEpC,8OAAC,4IAAM;4DACL,MAAK;4DACL,SAAQ;4DACR,MAAK;4DACL,WAAU;4DACV,SAAS,IAAM,mBAAmB;sEAElC,cAAA,8OAAC,uMAAG;gEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kDAQ3B,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0IAAK;gDAAC,SAAQ;0DAAO;;;;;;0DACtB,8OAAC,0IAAK;gDACJ,IAAG;gDACH,MAAK;gDACJ,GAAG,SAAS,QAAQ;oDAAE,UAAU;gDAAmB,EAAE;gDACtD,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS;wDACrB,EAAE,cAAc;wDAChB,MAAM,eAAe,SAAS,aAAa,CAAC;wDAC5C,cAAc;oDAChB;gDACF;;;;;;4CAED,OAAO,IAAI,kBACV,8OAAC;gDAAE,WAAU;0DAAwB,OAAO,IAAI,CAAC,OAAO;;;;;;;;;;;;kDAI5D,8OAAC;wCAAI,WAAW,CAAC,KAAK,EAAE,WAAW,mBAAmB,wBAAwB,KAAK,CAAC;;0DAClF,8OAAC,4IAAM;gDACL,MAAK;gDACL,SAAQ;gDACR,SAAS,IAAM,aAAa;gDAC5B,WAAW,WAAW,WAAW;gDACjC,UAAU;0DACX;;;;;;0DAGD,8OAAC,4IAAM;gDACL,MAAK;gDACL,WAAW,WAAW,WAAW;gDACjC,UAAU;0DAET,6BACC,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,+IAAc;4DAAC,MAAK;4DAAK,WAAU;;;;;;sEACpC,8OAAC;sEAAK;;;;;;;;;;;+FAGR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASb,gBAAgB,CAAC,aAAa,+BAC7B,8OAAC,kJAAW;gBACV,QAAQ;gBACR,cAAc;gBACd,UAAU;gBACV,UAAS;;;;;;;;AAKnB;uCAEe"}},
    {"offset": {"line": 1123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/EditCashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { CashTransaction, CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface EditCashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (id: string, data: Partial<CashTransactionFormData>) => void;\r\n  transaction: CashTransaction | null;\r\n  accounts: CashAccount[];\r\n}\r\n\r\nconst EditCashTransactionDialog: React.FC<EditCashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  transaction,\r\n  accounts\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>();\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open && transaction) {\r\n      // Format date as YYYY-MM-DD for the date input\r\n      const formattedDate = transaction.date.toISOString().split('T')[0];\r\n      \r\n      reset({\r\n        accountId: transaction.accountId || '',\r\n        amount: transaction.amount,\r\n        transactionType: transaction.transactionType === 'transfer_in' || transaction.transactionType === 'transfer_out' \r\n          ? 'transfer' \r\n          : transaction.transactionType,\r\n        category: transaction.category,\r\n        description: transaction.description,\r\n        personInCharge: transaction.personInCharge || '',\r\n        tags: [],\r\n        date: transaction.date, // Keep as Date object for the form\r\n        paymentMethod: transaction.paymentMethod || '',\r\n        receiptImage: transaction.receiptImage || ''\r\n      });\r\n      \r\n      // Set the date input value to the formatted string\r\n      setValue('date', formattedDate as any);\r\n    }\r\n  }, [open, transaction, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n      \r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    if (!transaction) return;\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Handle date conversion properly - ensure exact date is preserved\r\n      let formDate: Date;\r\n      \r\n      // If data.date is a string (from the date input), parse it correctly\r\n      if (typeof data.date === 'string') {\r\n        // Parse date string to ensure we get the exact date selected\r\n        const [year, month, day] = data.date.split('-').map(Number);\r\n        formDate = new Date(year, month - 1, day, 12, 0, 0); // Set to noon to avoid timezone issues\r\n      } else if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: Partial<CashTransactionFormData> = {\r\n        amount: Number(data.amount),\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n      \r\n      await onSubmit(transaction.id, formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!transaction) return null;\r\n\r\n  // Format date for the input field display\r\n  const inputDateValue = transaction.date.toISOString().split('T')[0];\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>Edit Transaction</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Input\r\n                  value={transaction.transactionType.replace('_', ' ')}\r\n                  disabled\r\n                  className=\"bg-gray-100\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"1\"\r\n                  {...register('amount', { \r\n                    required: 'Amount is required',\r\n                    min: { value: 1, message: 'Amount must be at least 1' }\r\n                  })}\r\n                  placeholder=\"0\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {watch('receiptImage') && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(watch('receiptImage')) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img \r\n                          src={watch('receiptImage')} \r\n                          alt=\"Receipt preview\" \r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"edit-date\">Date</Label>\r\n                <Input\r\n                  id=\"edit-date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button \r\n                  type=\"button\" \r\n                  variant=\"outline\" \r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button \r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Updating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Update Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {watch('receiptImage') && !isReceiptPDF(watch('receiptImage')) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={watch('receiptImage')}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditCashTransactionDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1698, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n        warning:\r\n          \"border-transparent bg-amber-500 text-white hover:bg-amber-600\",\r\n        success:\r\n          \"border-transparent bg-green-600 text-white hover:bg-green-700\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/ViewCashTransactionDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose,\r\n  DrawerHeader,\r\n  DrawerTitle\r\n} from '@/components/ui/drawer';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { X, Eye } from 'lucide-react';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\n\r\ninterface ViewCashTransactionDialogProps {\r\n  transaction: CashTransaction | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst ViewCashTransactionDialog: React.FC<ViewCashTransactionDialogProps> = ({\r\n  transaction,\r\n  open,\r\n  onOpenChange\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const { settings } = useBusinessSettings();\r\n\r\n  if (!transaction) return null;\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    const currency = settings?.currency || 'USD';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency,\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in': return 'Cash In';\r\n      case 'cash_out': return 'Cash Out';\r\n      case 'transfer_in': return 'Transfer In';\r\n      case 'transfer_out': return 'Transfer Out';\r\n      default: return type;\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const content = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Date</label>\r\n          <p className=\"text-sm\">{transaction.date.toLocaleDateString()}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Amount</label>\r\n          <p className={`text-lg font-semibold ${\r\n            transaction.transactionType === 'cash_in' || transaction.transactionType === 'transfer_in' \r\n              ? 'text-green-600' \r\n              : 'text-red-600'\r\n          }`}>\r\n            {formatCurrency(transaction.amount)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Transaction Type</label>\r\n        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n          {getTransactionTypeLabel(transaction.transactionType)}\r\n        </Badge>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Description</label>\r\n        <p className=\"text-sm\">{transaction.description}</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Category</label>\r\n          <p className=\"text-sm\">{transaction.category || 'Not specified'}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Payment Method</label>\r\n          <p className=\"text-sm\">{transaction.paymentMethod || 'Not specified'}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Person in Charge</label>\r\n        <p className=\"text-sm\">{transaction.personInCharge || 'Not specified'}</p>\r\n      </div>\r\n\r\n      {transaction.tags && transaction.tags.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Tags</label>\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {transaction.tags.map((tag, index) => (\r\n              <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                {tag}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {transaction.receiptImage && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Receipt</label>\r\n          <div className=\"relative\">\r\n            <img \r\n              src={transaction.receiptImage} \r\n              alt=\"Receipt\" \r\n              className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            >\r\n              <Eye className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <>\r\n        <Drawer open={open} onOpenChange={onOpenChange}>\r\n          <DrawerContent className=\"max-h-[85vh]\">\r\n            <div className=\"relative px-4 py-6 pb-8\">\r\n              <DrawerClose className=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring\">\r\n                <X className=\"h-4 w-4\" />\r\n                <span className=\"sr-only\">Close</span>\r\n              </DrawerClose>\r\n              <DrawerHeader className=\"px-0 pb-4\">\r\n                <DrawerTitle className=\"text-lg\">Transaction Details</DrawerTitle>\r\n              </DrawerHeader>\r\n              <ScrollArea className=\"h-[calc(85vh-120px)] pr-4\">\r\n                {content}\r\n              </ScrollArea>\r\n            </div>\r\n          </DrawerContent>\r\n        </Drawer>\r\n\r\n        {transaction.receiptImage && (\r\n          <ImageViewer\r\n            isOpen={imageViewerOpen}\r\n            onOpenChange={setImageViewerOpen}\r\n            imageUrl={transaction.receiptImage}\r\n            imageAlt=\"Receipt image\"\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-[600px] max-h-[90vh]\">\r\n          <DialogHeader>\r\n            <DialogTitle>Transaction Details</DialogTitle>\r\n          </DialogHeader>\r\n          <ScrollArea className=\"max-h-[70vh] pr-4\">\r\n            {content}\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {transaction.receiptImage && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={transaction.receiptImage}\r\n          imageAlt=\"Receipt image\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ViewCashTransactionDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2242, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,yHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 2285, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashAccountDialog.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { CashAccountFormData } from '@/types/cash';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\n\r\ninterface CashAccountDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (data: CashAccountFormData) => void;\r\n  title: string;\r\n  initialData?: Partial<CashAccountFormData>;\r\n  isSubmitting?: boolean;\r\n}\r\n\r\nconst CashAccountDialog: React.FC<CashAccountDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  title,\r\n  initialData,\r\n  isSubmitting = false\r\n}) => {\r\n  const { settings } = useBusinessSettings();\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashAccountFormData>({\r\n    defaultValues: {\r\n      name: '',\r\n      description: '',\r\n      isDefault: false,\r\n      ...initialData\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (open && initialData) {\r\n      reset({\r\n        name: initialData.name || '',\r\n        description: initialData.description || '',\r\n        openingBalance: initialData.openingBalance || 0,\r\n        isDefault: initialData.isDefault || false\r\n      });\r\n    } else if (open) {\r\n      reset({\r\n        name: '',\r\n        description: '',\r\n        openingBalance: undefined as any,\r\n        isDefault: false\r\n      });\r\n    }\r\n  }, [open, initialData, reset]);\r\n\r\n  const isDefault = watch('isDefault');\r\n\r\n  const handleFormSubmit = (data: CashAccountFormData) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  // Use business settings currency, default to UGX if not set\r\n  const currency = settings.currency || 'UGX';\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>{title}</DialogTitle>\r\n        </DialogHeader>\r\n        <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"name\">Account Name</Label>\r\n            <Input\r\n              id=\"name\"\r\n              {...register('name', { required: 'Account name is required' })}\r\n              placeholder=\"e.g., Main Cash, Petty Cash\"\r\n              disabled={isSubmitting}\r\n            />\r\n            {errors.name && (\r\n              <p className=\"text-sm text-red-600\">{errors.name.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"description\">Description (Optional)</Label>\r\n            <Textarea\r\n              id=\"description\"\r\n              {...register('description')}\r\n              placeholder=\"Brief description of this account\"\r\n              rows={3}\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"openingBalance\">Opening Balance ({currency})</Label>\r\n            <Input\r\n              id=\"openingBalance\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              {...register('openingBalance', {\r\n                required: 'Opening balance is required',\r\n                min: { value: 0, message: 'Opening balance cannot be negative' }\r\n              })}\r\n              placeholder=\"0.00\"\r\n              disabled={isSubmitting}\r\n            />\r\n            {errors.openingBalance && (\r\n              <p className=\"text-sm text-red-600\">{errors.openingBalance.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Checkbox\r\n              id=\"isDefault\"\r\n              checked={isDefault}\r\n              onCheckedChange={(checked) => setValue('isDefault', checked as boolean)}\r\n              disabled={isSubmitting}\r\n            />\r\n            <Label htmlFor=\"isDefault\" className=\"text-sm\">\r\n              Set as default account\r\n            </Label>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-2 pt-4\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isSubmitting}>\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isSubmitting}>\r\n              {isSubmitting\r\n                ? (initialData ? 'Updating...' : 'Creating...')\r\n                : (initialData ? 'Update Account' : 'Create Account')\r\n              }\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CashAccountDialog;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2561, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 2677, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,IAAA,oJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,IAAA,oJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2812, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionsFilters.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Search, Download, FileText } from 'lucide-react';\r\n\r\ninterface CashTransactionsFiltersProps {\r\n  searchTerm: string;\r\n  onSearchChange: (value: string) => void;\r\n  transactionTypeFilter: string;\r\n  onTransactionTypeFilterChange: (value: string) => void;\r\n  onExportCSV: () => void;\r\n  onExportPDF: () => void;\r\n  totalTransactions: number;\r\n}\r\n\r\nconst CashTransactionsFilters: React.FC<CashTransactionsFiltersProps> = ({\r\n  searchTerm,\r\n  onSearchChange,\r\n  transactionTypeFilter,\r\n  onTransactionTypeFilterChange,\r\n  onExportCSV,\r\n  onExportPDF,\r\n  totalTransactions\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-4 mb-4\">\r\n      {/* Search and Filter Row */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search transactions...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n        \r\n        <Select value={transactionTypeFilter} onValueChange={onTransactionTypeFilterChange}>\r\n          <SelectTrigger>\r\n            <SelectValue placeholder=\"All transaction types\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">All Types</SelectItem>\r\n            <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n            <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n            <SelectItem value=\"transfer_in\">Transfer In</SelectItem>\r\n            <SelectItem value=\"transfer_out\">Transfer Out</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportCSV}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            CSV\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportPDF}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <FileText className=\"h-4 w-4 mr-2\" />\r\n            PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Results count */}\r\n      <div className=\"text-sm text-muted-foreground\">\r\n        {totalTransactions} transaction{totalTransactions !== 1 ? 's' : ''} found\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsFilters;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;AAYA,MAAM,0BAAkE,CAAC,EACvE,UAAU,EACV,cAAc,EACd,qBAAqB,EACrB,6BAA6B,EAC7B,WAAW,EACX,WAAW,EACX,iBAAiB,EAClB;IACC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC,0IAAK;gCACJ,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;;;;;;;;;;;;kCAId,8OAAC,4IAAM;wBAAC,OAAO;wBAAuB,eAAe;;0CACnD,8OAAC,mJAAa;0CACZ,cAAA,8OAAC,iJAAW;oCAAC,aAAY;;;;;;;;;;;0CAE3B,8OAAC,mJAAa;;kDACZ,8OAAC,gJAAU;wCAAC,OAAM;kDAAM;;;;;;kDACxB,8OAAC,gJAAU;wCAAC,OAAM;kDAAU;;;;;;kDAC5B,8OAAC,gJAAU;wCAAC,OAAM;kDAAW;;;;;;kDAC7B,8OAAC,gJAAU;wCAAC,OAAM;kDAAc;;;;;;kDAChC,8OAAC,gJAAU;wCAAC,OAAM;kDAAe;;;;;;;;;;;;;;;;;;kCAIrC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,WAAU;;kDAEV,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAGvC,8OAAC,4IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,WAAU;;kDAEV,8OAAC,0NAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;0BAO3C,8OAAC;gBAAI,WAAU;;oBACZ;oBAAkB;oBAAa,sBAAsB,IAAI,MAAM;oBAAG;;;;;;;;;;;;;AAI3E;uCAEe"}},
    {"offset": {"line": 3012, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashTransactionsList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport { Edit, Eye, Trash2, FileText, FileSpreadsheet } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { exportCashTransactionsToPDF } from '@/utils/exportCashTransactionsToPDF';\r\nimport { exportCashTransactionsToCSV } from '@/utils/exportCashTransactionsToCSV';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport CashTransactionsFilters from './CashTransactionsFilters';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface CashTransactionsListProps {\r\n  transactions: CashTransaction[];\r\n  accountId?: string | null;\r\n  showAccountColumn?: boolean;\r\n  onEditTransaction?: (transaction: CashTransaction) => void;\r\n  onViewTransaction?: (transaction: CashTransaction) => void;\r\n  onTransactionDeleted?: () => void;\r\n}\r\n\r\nconst CashTransactionsList: React.FC<CashTransactionsListProps> = ({\r\n  transactions,\r\n  accountId,\r\n  showAccountColumn = true,\r\n  onEditTransaction,\r\n  onViewTransaction,\r\n  onTransactionDeleted\r\n}) => {\r\n  const { deleteTransaction, transactions: allTransactions } = useCashTransactions(accountId || undefined);\r\n  const { accounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n  const isMobile = useIsMobile();\r\n\r\n  const canEdit = hasPermission('finance', 'edit');\r\n  const canDelete = hasPermission('finance', 'delete');\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params\r\n  const [searchTerm, setSearchTerm] = useState(() => searchParams.get('search') || '');\r\n  const [transactionTypeFilter, setTransactionTypeFilter] = useState(() => searchParams.get('type') || 'all');\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const search = searchParams.get('search') || '';\r\n    const type = searchParams.get('type') || 'all';\r\n\r\n    setSearchTerm(search);\r\n    setTransactionTypeFilter(type);\r\n  }, [searchParams]);\r\n\r\n  // Functions to update both state and URL\r\n  const updateSearchTerm = (value: string) => {\r\n    setSearchTerm(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value) {\r\n      newParams.set('search', value);\r\n    } else {\r\n      newParams.delete('search');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateTransactionTypeFilter = (value: string) => {\r\n    setTransactionTypeFilter(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value && value !== 'all') {\r\n      newParams.set('type', value);\r\n    } else {\r\n      newParams.delete('type');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  };\r\n\r\n  const getAccountName = (accountId: string | null) => {\r\n    if (!accountId) return 'Unknown Account';\r\n    const account = accounts.find(acc => acc.id === accountId);\r\n    return account?.name || 'Unknown Account';\r\n  };\r\n\r\n  // Filter transactions based on search term and transaction type\r\n  const filteredTransactions = transactions.filter(transaction => {\r\n    const matchesSearch =\r\n      transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      (transaction.personInCharge && transaction.personInCharge.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      getAccountName(transaction.accountId).toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesType = transactionTypeFilter === 'all' || transaction.transactionType === transactionTypeFilter;\r\n\r\n    return matchesSearch && matchesType;\r\n  });\r\n\r\n  // Pagination logic - show 50 transactions per page\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const transactionsPerPage = 50;\r\n  const totalPages = Math.ceil(filteredTransactions.length / transactionsPerPage);\r\n\r\n  const startIndex = (currentPage - 1) * transactionsPerPage;\r\n  const endIndex = startIndex + transactionsPerPage;\r\n  const paginatedTransactions = filteredTransactions.slice(startIndex, endIndex);\r\n\r\n  // Reset to page 1 when filters change\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, transactionTypeFilter]);\r\n\r\n\r\n  // Calculate opening balance for PDF export using the same logic as DailyCashSummary\r\n  const calculateOpeningBalanceForExport = (exportTransactions: CashTransaction[], targetAccountId?: string) => {\r\n    if (exportTransactions.length === 0) return 0;\r\n\r\n    // Get the earliest transaction date in the export set\r\n    const earliestDate = exportTransactions.reduce((earliest, transaction) => {\r\n      return transaction.date < earliest ? transaction.date : earliest;\r\n    }, exportTransactions[0].date);\r\n\r\n    // Calculate the day before the earliest transaction\r\n    const dayBeforeEarliest = new Date(earliestDate);\r\n    dayBeforeEarliest.setDate(dayBeforeEarliest.getDate() - 1);\r\n    const dayBeforeEarliestStr = dayBeforeEarliest.toISOString().split('T')[0];\r\n\r\n    // Get all transactions up to the day before the earliest transaction\r\n    let transactionsBeforeRange = allTransactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeEarliestStr\r\n    );\r\n\r\n    // Filter by account if specified\r\n    if (targetAccountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === targetAccountId);\r\n    }\r\n\r\n    // Calculate cash flow up to the day before\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    // Get account's initial opening balance\r\n    let accountOpeningBalance = 0;\r\n    if (targetAccountId) {\r\n      const account = accounts.find(acc => acc.id === targetAccountId);\r\n      accountOpeningBalance = account?.openingBalance || 0;\r\n    }\r\n\r\n    // Calculate opening balance: initial balance + net cash flow up to day before\r\n    return accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n  };\r\n\r\n  // Calculate the date range from filtered transactions\r\n  const getDateRangeFromTransactions = (transactions: CashTransaction[]) => {\r\n    if (transactions.length === 0) return undefined;\r\n\r\n    const dates = transactions.map(t => t.date);\r\n    const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n    const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n\r\n    return { from: earliestDate, to: latestDate };\r\n  };\r\n\r\n  // ... keep existing code (getTransactionTypeColor, getTransactionTypeLabel, getAmountColor functions)\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'bg-green-100 text-green-800 border-green-200';\r\n      case 'cash_out':\r\n        return 'bg-red-100 text-red-800 border-red-200';\r\n      case 'transfer_in':\r\n        return 'bg-blue-100 text-blue-800 border-blue-200';\r\n      case 'transfer_out':\r\n        return 'bg-orange-100 text-orange-800 border-orange-200';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  const getAmountColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'text-green-600 font-semibold';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'text-red-600 font-semibold';\r\n      default:\r\n        return 'font-semibold';\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    setDeletingId(id);\r\n    try {\r\n      const success = await deleteTransaction(id);\r\n      if (success && onTransactionDeleted) {\r\n        onTransactionDeleted();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting transaction:', error);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let accountName = '';\r\n\r\n      if (accountId) {\r\n        const account = accounts.find(acc => acc.id === accountId);\r\n        accountName = account?.name || '';\r\n      }\r\n\r\n      // Calculate the correct opening balance using the same logic as DailyCashSummary\r\n      const calculatedOpeningBalance = calculateOpeningBalanceForExport(filteredTransactions, accountId || undefined);\r\n\r\n      // Get the date range from filtered transactions\r\n      const dateRange = getDateRangeFromTransactions(filteredTransactions);\r\n\r\n      exportCashTransactionsToPDF(\r\n        filteredTransactions,\r\n        getAccountName,\r\n        formatCurrency,\r\n        accountName,\r\n        calculatedOpeningBalance, // Use calculated opening balance instead of account's initial balance\r\n        settings.currency || 'USD',\r\n        dateRange, // Pass the actual date range from transactions\r\n        {\r\n          businessName: settings.businessName || 'Your Business Name',\r\n          businessAddress: settings.businessAddress || 'Your Business Address',\r\n          businessPhone: settings.businessPhone || '(123) 456-7890',\r\n          businessEmail: settings.businessEmail || 'support@yourbusiness.com'\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.error('Error exporting PDF:', error);\r\n      alert('Failed to export PDF. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    exportCashTransactionsToCSV(filteredTransactions, getAccountName, formatCurrency);\r\n  };\r\n\r\n  if (transactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        <p>No transactions found.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Filters */}\r\n      <CashTransactionsFilters\r\n        searchTerm={searchTerm}\r\n        onSearchChange={updateSearchTerm}\r\n        transactionTypeFilter={transactionTypeFilter}\r\n        onTransactionTypeFilterChange={updateTransactionTypeFilter}\r\n        onExportCSV={handleExportCSV}\r\n        onExportPDF={handleExportPDF}\r\n        totalTransactions={filteredTransactions.length}\r\n      />\r\n\r\n      {filteredTransactions.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <p>No transactions found matching your filters.</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Results Summary */}\r\n          <div className=\"flex justify-between items-center text-sm text-muted-foreground\">\r\n            <span>\r\n              Showing {startIndex + 1}-{Math.min(endIndex, filteredTransactions.length)} of {filteredTransactions.length} transactions\r\n            </span>\r\n            {totalPages > 1 && (\r\n              <span>\r\n                Page {currentPage} of {totalPages}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {isMobile ? (\r\n            /* Mobile Transaction Cards */\r\n            <div className=\"space-y-4\">\r\n              {paginatedTransactions.map((transaction) => (\r\n                <div key={transaction.id} className=\"bg-white rounded-lg border p-4 space-y-3\">\r\n                  {/* Header */}\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"font-medium text-sm\">{transaction.description}</div>\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                        {transaction.personInCharge && `  ${transaction.personInCharge}`}\r\n                      </div>\r\n                    </div>\r\n                    <Badge className={`text-xs ${getTransactionTypeColor(transaction.transactionType)}`}>\r\n                      {getTransactionTypeLabel(transaction.transactionType)}\r\n                    </Badge>\r\n                  </div>\r\n\r\n                  {/* Amount */}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className={`text-lg ${getAmountColor(transaction.transactionType)}`}>\r\n                      {canManageFinanceAccounts ? formatCurrency(transaction.amount) : ''}\r\n                    </span>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-1\">\r\n                      {onViewTransaction && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onViewTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {onEditTransaction && canEdit && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onEditTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {canDelete && (\r\n                        <AlertDialog>\r\n                          <AlertDialogTrigger asChild>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                              disabled={deletingId === transaction.id}\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </AlertDialogTrigger>\r\n                          <AlertDialogContent>\r\n                            <AlertDialogHeader>\r\n                              <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                              <AlertDialogDescription>\r\n                                Are you sure you want to delete this transaction? This action cannot be undone.\r\n                              </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                              <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                              <AlertDialogAction\r\n                                onClick={() => handleDelete(transaction.id)}\r\n                                className=\"bg-red-600 hover:bg-red-700\"\r\n                              >\r\n                                Delete\r\n                              </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                          </AlertDialogContent>\r\n                        </AlertDialog>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Additional Info */}\r\n                  <div className=\"space-y-1 text-sm text-gray-600\">\r\n                    {showAccountColumn && (\r\n                      <div>Account: {getAccountName(transaction.accountId)}</div>\r\n                    )}\r\n                    {transaction.category && (\r\n                      <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200\">\r\n                        <span className=\"text-blue-800 font-medium\">Category: {transaction.category}</span>\r\n                      </div>\r\n                    )}\r\n                    {transaction.paymentMethod && (\r\n                      <div>Payment: {transaction.paymentMethod}</div>\r\n                    )}\r\n                    {transaction.tags && transaction.tags.length > 0 && (\r\n                      <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                        {transaction.tags.map((tag, index) => (\r\n                          <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                            {tag}\r\n                          </Badge>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            /* Desktop Table */\r\n            <div className=\"rounded-md border\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Date</TableHead>\r\n                    <TableHead>Description</TableHead>\r\n                    <TableHead>Type</TableHead>\r\n                    <TableHead className=\"text-right\">Amount</TableHead>\r\n                    <TableHead>Category</TableHead>\r\n                    {showAccountColumn && <TableHead>Account</TableHead>}\r\n                    <TableHead>Person in Charge</TableHead>\r\n                    <TableHead>Payment Method</TableHead>\r\n                    <TableHead>Tags</TableHead>\r\n                    <TableHead className=\"text-right\">Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {paginatedTransactions.map((transaction) => (\r\n                    <TableRow key={transaction.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                      </TableCell>\r\n                      <TableCell>{transaction.description}</TableCell>\r\n                      <TableCell>\r\n                        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n                          {getTransactionTypeLabel(transaction.transactionType)}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className={`text-right ${getAmountColor(transaction.transactionType)}`}>\r\n                        {canManageFinanceAccounts ? formatCurrency(transaction.amount) : ''}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {transaction.category ? (\r\n                          <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200 inline-block\">\r\n                            <span className=\"text-blue-800 font-medium\">{transaction.category}</span>\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      {showAccountColumn && (\r\n                        <TableCell>{getAccountName(transaction.accountId)}</TableCell>\r\n                      )}\r\n                      <TableCell>{transaction.personInCharge || '-'}</TableCell>\r\n                      <TableCell>{transaction.paymentMethod || '-'}</TableCell>\r\n                      <TableCell>\r\n                        {transaction.tags && transaction.tags.length > 0 ? (\r\n                          <div className=\"flex flex-wrap gap-1\">\r\n                            {transaction.tags.map((tag, index) => (\r\n                              <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                                {tag}\r\n                              </Badge>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex gap-1 justify-end\">\r\n                          {onViewTransaction && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onViewTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {onEditTransaction && hasPermission('finance', 'edit') && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onEditTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('finance', 'delete') && (\r\n                            <AlertDialog>\r\n                              <AlertDialogTrigger asChild>\r\n                                <Button\r\n                                  variant=\"ghost\"\r\n                                  size=\"sm\"\r\n                                  className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                                  disabled={deletingId === transaction.id}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </AlertDialogTrigger>\r\n                              <AlertDialogContent>\r\n                                <AlertDialogHeader>\r\n                                  <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                                  <AlertDialogDescription>\r\n                                    Are you sure you want to delete this transaction? This action cannot be undone.\r\n                                  </AlertDialogDescription>\r\n                                </AlertDialogHeader>\r\n                                <AlertDialogFooter>\r\n                                  <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                  <AlertDialogAction\r\n                                    onClick={() => handleDelete(transaction.id)}\r\n                                    className=\"bg-red-600 hover:bg-red-700\"\r\n                                  >\r\n                                    Delete\r\n                                  </AlertDialogAction>\r\n                                </AlertDialogFooter>\r\n                              </AlertDialogContent>\r\n                            </AlertDialog>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pagination Controls */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center items-center space-x-2 mt-6\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Previous\r\n              </Button>\r\n\r\n              <div className=\"flex space-x-1\">\r\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                  let pageNum;\r\n                  if (totalPages <= 5) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage <= 3) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage >= totalPages - 2) {\r\n                    pageNum = totalPages - 4 + i;\r\n                  } else {\r\n                    pageNum = currentPage - 2 + i;\r\n                  }\r\n\r\n                  return (\r\n                    <Button\r\n                      key={pageNum}\r\n                      variant={currentPage === pageNum ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(pageNum)}\r\n                      className=\"w-8 h-8 p-0\"\r\n                    >\r\n                      {pageNum}\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Next\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsList;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4036, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/DailyCashSummary.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format, startOfWeek, endOfWeek, startOfMonth, endOfMonth, subDays, addDays } from 'date-fns';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CalendarDays, TrendingUp, TrendingDown, ArrowRightLeft } from 'lucide-react';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { DailyCashSummary as DailyCashSummaryType, CashTransaction, CashTransactionFormData } from '@/types/cash';\r\nimport CashTransactionsList from './CashTransactionsList';\r\nimport ViewCashTransactionDialog from './ViewCashTransactionDialog';\r\nimport EditCashTransactionDialog from './EditCashTransactionDialog';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface DailyCashSummaryProps {\r\n  accountId?: string;\r\n}\r\n\r\ntype PeriodType = 'daily' | 'weekly' | 'monthly' | 'custom';\r\n\r\nconst DailyCashSummary: React.FC<DailyCashSummaryProps> = ({ accountId }) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params with fallbacks\r\n  const [periodType, setPeriodType] = useState<PeriodType>(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    return paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod) ? paramPeriod : 'daily';\r\n  });\r\n\r\n  const [selectedDate, setSelectedDate] = useState(() => {\r\n    const paramDate = searchParams.get('summaryDate');\r\n    return paramDate ? new Date(paramDate) : new Date();\r\n  });\r\n\r\n  const [customStartDate, setCustomStartDate] = useState(() => {\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    return paramStartDate ? new Date(paramStartDate) : new Date();\r\n  });\r\n\r\n  const [customEndDate, setCustomEndDate] = useState(() => {\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n    return paramEndDate ? new Date(paramEndDate) : new Date();\r\n  });\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    const paramDate = searchParams.get('summaryDate');\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n\r\n    if (paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod)) {\r\n      setPeriodType(paramPeriod);\r\n    } else {\r\n      setPeriodType('daily');\r\n    }\r\n\r\n    if (paramDate) {\r\n      setSelectedDate(new Date(paramDate));\r\n    }\r\n\r\n    if (paramStartDate) {\r\n      setCustomStartDate(new Date(paramStartDate));\r\n    }\r\n\r\n    if (paramEndDate) {\r\n      setCustomEndDate(new Date(paramEndDate));\r\n    }\r\n  }, [searchParams]);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [summary, setSummary] = useState<DailyCashSummaryType>({\r\n    date: new Date(),\r\n    openingBalance: 0,\r\n    cashIn: 0,\r\n    cashOut: 0,\r\n    transfersIn: 0,\r\n    transfersOut: 0,\r\n    closingBalance: 0\r\n  });\r\n\r\n  // Use optimized hooks with better caching\r\n  const { getDailySummary, getDateRangeSummary, transactions, updateTransaction, refreshTransactions } = useCashTransactions(accountId);\r\n  const { accounts, refreshAccounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const isMobile = useIsMobile();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n\r\n  // Memoize currency formatter\r\n  const formatCurrency = useCallback((amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  }, [settings.currency]);\r\n\r\n\r\n  // Functions to update both state and URL\r\n  const updatePeriodType = (value: PeriodType) => {\r\n    setPeriodType(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value !== 'daily') {\r\n      newParams.set('summaryPeriod', value);\r\n    } else {\r\n      newParams.delete('summaryPeriod');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateSelectedDate = (date: Date) => {\r\n    setSelectedDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    const dateStr = format(date, 'yyyy-MM-dd');\r\n    const todayStr = format(new Date(), 'yyyy-MM-dd');\r\n    if (dateStr !== todayStr) {\r\n      newParams.set('summaryDate', dateStr);\r\n    } else {\r\n      newParams.delete('summaryDate');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomStartDate = (date: Date) => {\r\n    setCustomStartDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryStartDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomEndDate = (date: Date) => {\r\n    setCustomEndDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryEndDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  // Memoized handlers for better performance\r\n  const handleDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateSelectedDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomStartDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomStartDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomEndDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomEndDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const goToToday = useCallback(() => {\r\n    const today = new Date();\r\n    updateSelectedDate(today);\r\n    updateCustomStartDate(today);\r\n    updateCustomEndDate(today);\r\n  }, []);\r\n\r\n  // Memoize date range calculation\r\n  const getDateRange = useMemo(() => {\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return {\r\n          start: startOfWeek(selectedDate, { weekStartsOn: 1 }),\r\n          end: endOfWeek(selectedDate, { weekStartsOn: 1 })\r\n        };\r\n      case 'monthly':\r\n        return {\r\n          start: startOfMonth(selectedDate),\r\n          end: endOfMonth(selectedDate)\r\n        };\r\n      case 'custom':\r\n        return {\r\n          start: customStartDate,\r\n          end: customEndDate\r\n        };\r\n      default:\r\n        return {\r\n          start: selectedDate,\r\n          end: selectedDate\r\n        };\r\n    }\r\n  }, [periodType, selectedDate, customStartDate, customEndDate]);\r\n\r\n  // Function to reload summary data\r\n  const reloadSummary = useCallback(async () => {\r\n    try {\r\n      let summaryData: DailyCashSummaryType;\r\n\r\n      if (periodType === 'daily') {\r\n        summaryData = await getDailySummary(selectedDate, accountId);\r\n      } else {\r\n        const { start, end } = getDateRange;\r\n        summaryData = await getDateRangeSummary(start, end, accountId);\r\n      }\r\n\r\n      setSummary(summaryData);\r\n    } catch (error) {\r\n      console.error('Error loading summary:', error);\r\n    }\r\n  }, [periodType, selectedDate, getDateRange, accountId, getDailySummary, getDateRangeSummary]);\r\n\r\n  // Optimized summary loading with debouncing to prevent excessive calls\r\n  useEffect(() => {\r\n    let timeoutId: NodeJS.Timeout;\r\n\r\n    const loadSummary = async () => {\r\n      await reloadSummary();\r\n    };\r\n\r\n    // Debounce the summary loading to prevent excessive calls\r\n    timeoutId = setTimeout(loadSummary, 100);\r\n\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [reloadSummary, transactions]);\r\n\r\n  // Memoize filtered transactions for better performance\r\n  const getFilteredTransactions = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    const startDateStr = start.toISOString().split('T')[0];\r\n    const endDateStr = end.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    return filteredTransactions;\r\n  }, [transactions, getDateRange, accountId]);\r\n\r\n  const handleViewTransaction = useCallback((transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleEditTransaction = useCallback((transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleUpdateTransaction = useCallback(async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes\r\n      await reloadSummary();\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  }, [updateTransaction, refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  // Enhanced transaction deleted handler with automatic refresh\r\n  const handleTransactionDeleted = useCallback(async () => {\r\n    try {\r\n      // Refresh both transactions and accounts data\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes instantly\r\n      await reloadSummary();\r\n\r\n      console.log('Successfully refreshed data after transaction deletion');\r\n    } catch (error) {\r\n      console.error('Error refreshing data after transaction deletion:', error);\r\n    }\r\n  }, [refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  const periodTransactions = getFilteredTransactions;\r\n\r\n  // Memoize period label\r\n  const getPeriodLabel = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return `Week of ${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      case 'monthly':\r\n        return format(selectedDate, 'MMMM yyyy');\r\n      case 'custom':\r\n        return `${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      default:\r\n        return format(selectedDate, 'MMMM d, yyyy');\r\n    }\r\n  }, [getDateRange, periodType, selectedDate]);\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6\">\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <div className=\"space-y-4\">\r\n            <CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\r\n              <CalendarDays className=\"h-5 w-5\" />\r\n              <span className=\"break-words\">Cash Summary</span>\r\n            </CardTitle>\r\n\r\n            {/* Mobile-optimized period label */}\r\n            <div className=\"text-sm md:text-base font-medium text-muted-foreground\">\r\n              {getPeriodLabel}\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"space-y-3\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\r\n                <div className=\"space-y-1\">\r\n                  <Label htmlFor=\"period\" className=\"text-xs font-medium\">Period</Label>\r\n                  <Select value={periodType} onValueChange={updatePeriodType}>\r\n                    <SelectTrigger className=\"h-9 text-sm\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"daily\">Daily</SelectItem>\r\n                      <SelectItem value=\"weekly\">Weekly</SelectItem>\r\n                      <SelectItem value=\"monthly\">Monthly</SelectItem>\r\n                      <SelectItem value=\"custom\">Custom Range</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {periodType === 'custom' ? (\r\n                  <>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"startDate\" className=\"text-xs font-medium\">Start Date</Label>\r\n                      <Input\r\n                        id=\"startDate\"\r\n                        type=\"date\"\r\n                        value={format(customStartDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomStartDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"endDate\" className=\"text-xs font-medium\">End Date</Label>\r\n                      <Input\r\n                        id=\"endDate\"\r\n                        type=\"date\"\r\n                        value={format(customEndDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomEndDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"space-y-1\">\r\n                    <Label htmlFor=\"date\" className=\"text-xs font-medium\">Date</Label>\r\n                    <Input\r\n                      id=\"date\"\r\n                      type=\"date\"\r\n                      value={format(selectedDate, 'yyyy-MM-dd')}\r\n                      onChange={handleDateChange}\r\n                      className=\"h-9 text-sm\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-end\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={goToToday}\r\n                    className=\"h-9 text-sm\"\r\n                  >\r\n                    Today\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Summary Grid - Changed to single column on mobile */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 md:gap-4\">\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-muted/50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Opening</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.openingBalance) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-green-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-green-600\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-green-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashIn) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-red-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-red-600\">\r\n                <TrendingDown className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-red-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashOut) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-blue-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-blue-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersIn) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-orange-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-orange-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-orange-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersOut) : ''}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-slate-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Closing</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance) : ''}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Net Change */}\r\n          <div className=\"pt-3 md:pt-4 border-t\">\r\n            <div className=\"text-sm md:text-base text-muted-foreground\">\r\n              Net Change:\r\n              <span className={`ml-1 font-semibold break-all ${summary.closingBalance - summary.openingBalance >= 0\r\n                ? 'text-green-600'\r\n                : 'text-red-600'\r\n                }`}>\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance - summary.openingBalance) : ''}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Transactions Table for Selected Period with Pagination */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">\r\n            <span className=\"break-words\">Transactions</span>\r\n            <span className=\"text-sm font-normal text-muted-foreground ml-2\">\r\n              ({periodTransactions.length} transaction{periodTransactions.length !== 1 ? 's' : ''})\r\n            </span>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={periodTransactions}\r\n            accountId={accountId}\r\n            showAccountColumn={!accountId}\r\n            onViewTransaction={handleViewTransaction}\r\n            onEditTransaction={handleEditTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyCashSummary;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/calendar.tsx"],"sourcesContent":["\r\nimport * as React from \"react\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { DayPicker } from \"react-day-picker\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3 pointer-events-auto\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        caption_dropdowns: \"flex justify-center gap-1\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        dropdown: \"bg-background rounded-md border p-1 shadow-md\",\r\n        dropdown_month: \"w-[var(--rdp-caption-dropdown-month-width)]\",\r\n        dropdown_year: \"w-[var(--rdp-caption-dropdown-year-width)]\",\r\n        dropdown_icon: \"w-4 h-4\",\r\n        button_reset: \"appearance-none bg-transparent border-none p-0 m-0\",\r\n        vhidden: \"sr-only\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\nCalendar.displayName = \"Calendar\";\r\n\r\nexport { Calendar };\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAEA;AACA;;;;;;AAIA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,8OAAC,2KAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,yHAAE,EAAC,2BAA2B;QACzC,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,mBAAmB;YACnB,KAAK;YACL,YAAY,IAAA,yHAAE,EACZ,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,yHAAE,EACL,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,UAAU;YACV,gBAAgB;YAChB,eAAe;YACf,eAAe;YACf,cAAc;YACd,SAAS;YACT,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,GAAG,QAAQ,iBAAK,8OAAC,mOAAW;oBAAC,WAAU;;;;;;YACpD,WAAW,CAAC,EAAE,GAAG,QAAQ,iBAAK,8OAAC,sOAAY;oBAAC,WAAU;;;;;;QACxD;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 5105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,yHAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 5146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/BulkTransactionAddTab.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { format } from 'date-fns';\r\nimport { Calendar as CalendarIcon, Plus, Trash2, ArrowUp, ArrowDown, Save, X, Info } from 'lucide-react';\r\nimport { CashTransactionFormData } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\n\r\ninterface TransactionRow extends CashTransactionFormData {\r\n    id: string;\r\n}\r\n\r\ninterface BulkTransactionAddTabProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onSuccess: () => void;\r\n}\r\n\r\nconst STORAGE_KEY = 'bulk_transactions_draft';\r\n\r\nconst BulkTransactionAddTab: React.FC<BulkTransactionAddTabProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onSuccess,\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { user } = useAuth();\r\n    const { accounts } = useCashAccounts();\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const [rows, setRows] = useState<TransactionRow[]>([]);\r\n    const [globalDate, setGlobalDate] = useState<Date>(new Date());\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Load draft from localStorage\r\n    useEffect(() => {\r\n        if (!open) return;\r\n\r\n        const savedDraft = localStorage.getItem(STORAGE_KEY);\r\n        if (savedDraft) {\r\n            try {\r\n                const parsed = JSON.parse(savedDraft);\r\n                setRows(parsed.map((r: any) => ({ ...r, date: new Date(r.date) })));\r\n            } catch (e) {\r\n                console.error('Failed to parse draft', e);\r\n                addEmptyRow();\r\n            }\r\n        } else {\r\n            setRows([]);\r\n            addEmptyRow();\r\n        }\r\n    }, [open]);\r\n\r\n    // Save draft to localStorage whenever rows change\r\n    useEffect(() => {\r\n        if (rows.length > 0) {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(rows));\r\n        } else {\r\n            localStorage.removeItem(STORAGE_KEY);\r\n        }\r\n    }, [rows]);\r\n\r\n    const addEmptyRow = () => {\r\n        const newId = Math.random().toString(36).substr(2, 9);\r\n        const newRow: TransactionRow = {\r\n            id: newId,\r\n            accountId: accountId,\r\n            amount: 0,\r\n            transactionType: 'cash_in',\r\n            description: '',\r\n            category: 'Other',\r\n            paymentMethod: 'Cash',\r\n            personInCharge: '',\r\n            tags: [],\r\n            date: globalDate, // Use the default/global date for new rows\r\n            receiptImage: ''\r\n        };\r\n        setRows(prev => [...prev, newRow]);\r\n    };\r\n\r\n    const removeRow = (id: string) => {\r\n        setRows(prev => prev.filter(r => r.id !== id));\r\n        if (rows.length === 1) {\r\n            addEmptyRow();\r\n        }\r\n    };\r\n\r\n    const updateRow = (id: string, updates: Partial<TransactionRow>) => {\r\n        setRows(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\r\n    };\r\n\r\n    const moveRow = (id: string, direction: 'up' | 'down') => {\r\n        const index = rows.findIndex(r => r.id === id);\r\n        if (index < 0) return;\r\n        if (direction === 'up' && index === 0) return;\r\n        if (direction === 'down' && index === rows.length - 1) return;\r\n\r\n        const newRows = [...rows];\r\n        const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n        [newRows[index], newRows[targetIndex]] = [newRows[targetIndex], newRows[index]];\r\n        setRows(newRows);\r\n    };\r\n\r\n    const handleSaveAll = async () => {\r\n        const validRows = rows.filter(r => r.amount > 0 && r.description.trim() !== '');\r\n        if (validRows.length === 0) {\r\n            alert('Please enter at least one valid transaction with amount and description');\r\n            return;\r\n        }\r\n\r\n        // Verify transfers have a destination\r\n        const invalidTransfers = validRows.filter(r => r.transactionType === 'transfer' && !r.toAccountId);\r\n        if (invalidTransfers.length > 0) {\r\n            alert('Please select a destination account for all transfers');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Use the date from each individual row\r\n            await createBulkTransactions(validRows.map(({ id, ...rest }) => ({ ...rest })));\r\n            localStorage.removeItem(STORAGE_KEY);\r\n            onSuccess();\r\n        } catch (e) {\r\n            console.error('Bulk save failed', e);\r\n            alert('Failed to save transactions. Please check your network connection.');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        if (isSaving) return;\r\n        onOpenChange(false);\r\n    };\r\n\r\n    const renderDesktop = () => (\r\n        <div className=\"overflow-x-auto rounded-md border\">\r\n            <Table>\r\n                <TableHeader className=\"bg-muted/50\">\r\n                    <TableRow>\r\n                        <TableHead className=\"w-[140px]\">Date</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Type</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Amount</TableHead>\r\n                        <TableHead>Description</TableHead>\r\n                        <TableHead className=\"w-[140px]\">Category</TableHead>\r\n                        <TableHead className=\"w-[150px]\">Details</TableHead>\r\n                        <TableHead className=\"w-[120px] text-right\">Actions</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {rows.map((row) => (\r\n                        <TableRow key={row.id} className=\"hover:bg-muted/30 transition-colors\">\r\n                            <TableCell>\r\n                                <Popover>\r\n                                    <PopoverTrigger asChild>\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"sm\"\r\n                                            className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                        >\r\n                                            <CalendarIcon className=\"mr-2 h-3 w-3 shrink-0\" />\r\n                                            <span className=\"truncate\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                        </Button>\r\n                                    </PopoverTrigger>\r\n                                    <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                        <Calendar\r\n                                            mode=\"single\"\r\n                                            selected={row.date}\r\n                                            onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                            initialFocus\r\n                                        />\r\n                                    </PopoverContent>\r\n                                </Popover>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.transactionType}\r\n                                    onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                        <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                        <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                {row.transactionType === 'transfer' && (\r\n                                    <div className=\"mt-1.5\">\r\n                                        <Select\r\n                                            value={row.toAccountId}\r\n                                            onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                                        >\r\n                                            <SelectTrigger className=\"text-[10px] h-7 px-2\">\r\n                                                <SelectValue placeholder=\"To Account\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                                    <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                )}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    value={row.amount || ''}\r\n                                    onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                    className=\"h-9 font-medium\"\r\n                                    placeholder=\"0.00\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    value={row.description}\r\n                                    onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                                    placeholder=\"Description...\"\r\n                                    className=\"h-9\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.category}\r\n                                    onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                        <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                        <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                        <SelectItem value=\"Other\">Other</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </TableCell>\r\n                            <TableCell className=\"space-y-1\">\r\n                                <Input\r\n                                    placeholder=\"Payment Method\"\r\n                                    value={row.paymentMethod}\r\n                                    onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                                <Input\r\n                                    placeholder=\"Person In Charge\"\r\n                                    value={row.personInCharge}\r\n                                    onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                                <div className=\"flex items-center justify-end gap-0.5\">\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                        <ArrowUp className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'down')}>\r\n                                        <ArrowDown className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-destructive/70 hover:text-destructive hover:bg-destructive/10\" onClick={() => removeRow(row.id)}>\r\n                                        <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n\r\n    const renderMobile = () => (\r\n        <div className=\"space-y-4 px-1\">\r\n            {rows.map((row, index) => (\r\n                <Card key={row.id} className=\"overflow-hidden border-l-4 border-l-primary/30\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between p-3 pb-2 bg-muted/20\">\r\n                        <CardTitle className=\"text-xs font-semibold uppercase tracking-wider text-muted-foreground\">\r\n                            Transaction {index + 1}\r\n                        </CardTitle>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                <ArrowUp className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-destructive/70\" onClick={() => removeRow(row.id)}>\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent className=\"p-3 space-y-3\">\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Popover>\r\n                                <PopoverTrigger asChild>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                    >\r\n                                        <CalendarIcon className=\"mr-2 h-3 w-3\" />\r\n                                        <span className=\"truncate text-xs\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                    </Button>\r\n                                </PopoverTrigger>\r\n                                <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                    <Calendar\r\n                                        mode=\"single\"\r\n                                        selected={row.date}\r\n                                        onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                        initialFocus\r\n                                    />\r\n                                </PopoverContent>\r\n                            </Popover>\r\n                            <Select\r\n                                value={row.transactionType}\r\n                                onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                type=\"number\"\r\n                                placeholder=\"Amount\"\r\n                                value={row.amount || ''}\r\n                                onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                className=\"h-9 font-medium\"\r\n                            />\r\n                            <Select\r\n                                value={row.category}\r\n                                onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                    <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                    <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                    <SelectItem value=\"Other\">Other</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {row.transactionType === 'transfer' && (\r\n                            <Select\r\n                                value={row.toAccountId}\r\n                                onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue placeholder=\"Target Account\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                        <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        )}\r\n\r\n                        <Input\r\n                            placeholder=\"Description\"\r\n                            value={row.description}\r\n                            onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                            className=\"h-9\"\r\n                        />\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                placeholder=\"Payment Method\"\r\n                                value={row.paymentMethod}\r\n                                onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                            <Input\r\n                                placeholder=\"Person In Charge\"\r\n                                value={row.personInCharge}\r\n                                onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isSaving && onOpenChange(val)}>\r\n            <DialogContent className=\"max-w-6xl w-[95vw] h-[95vh] sm:h-[90vh] flex flex-col p-0 overflow-hidden shadow-2xl border-none\">\r\n                <DialogHeader className=\"p-6 pb-2 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border-b\">\r\n                    <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                            <DialogTitle className=\"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2\">\r\n                                <Wallet className=\"h-5 w-5 text-blue-600\" />\r\n                                Bulk Transaction Entry\r\n                            </DialogTitle>\r\n                            <DialogDescription className=\"text-slate-500 dark:text-slate-400 mt-1\">\r\n                                Add multiple records at once. Each row can have its own date and details.\r\n                            </DialogDescription>\r\n                        </div>\r\n                    </div>\r\n                </DialogHeader>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 bg-slate-50/30 dark:bg-slate-950/30\">\r\n                    <div className=\"bg-white dark:bg-slate-900 rounded-xl p-4 shadow-sm border space-y-4\">\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                            <div className=\"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400\">\r\n                                <Alert className=\"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900 py-2\">\r\n                                    <Info className=\"h-4 w-4 text-blue-500\" />\r\n                                    <AlertDescription className=\"text-[11px] sm:text-xs\">\r\n                                        Use the <strong>Default Date</strong> to quickly set dates for newly added rows.\r\n                                    </AlertDescription>\r\n                                </Alert>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n                                <div className=\"flex-1 md:flex-initial\">\r\n                                    <p className=\"text-[10px] font-semibold text-muted-foreground uppercase mb-1 ml-1\">Default Date</p>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <Button variant=\"outline\" className={cn(\"justify-start text-left font-normal w-full md:w-[200px] h-10 shadow-sm\", !globalDate && \"text-muted-foreground\")}>\r\n                                                <CalendarIcon className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n                                                {globalDate ? format(globalDate, \"PPP\") : <span>Pick a date</span>}\r\n                                            </Button>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0 z-[80]\" align=\"end\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={globalDate}\r\n                                                onSelect={(date) => date && setGlobalDate(date)}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                </div>\r\n                                <div className=\"flex items-end h-full\">\r\n                                    <Button\r\n                                        onClick={addEmptyRow}\r\n                                        variant=\"secondary\"\r\n                                        className=\"gap-2 h-10 font-semibold border border-slate-200 dark:border-slate-800\"\r\n                                    >\r\n                                        <Plus className=\"h-4 w-4\" />\r\n                                        Add Row\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"min-h-[200px]\">\r\n                            {isMobile ? renderMobile() : renderDesktop()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-6 border-t bg-white dark:bg-slate-900 shrink-0\">\r\n                    <div className=\"text-sm font-medium text-slate-500\">\r\n                        Total Valid: <span className=\"text-indigo-600 dark:text-indigo-400 font-bold\">{rows.filter(r => r.amount > 0).length}</span>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            onClick={handleCancel}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                        >\r\n                            <X className=\"h-4 w-4\" />\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleSaveAll}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md transition-all active:scale-[0.98]\"\r\n                        >\r\n                            {isSaving ? <Save className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\r\n                            Save {rows.filter(r => r.amount > 0).length} Transactions\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\n// Internal icon for naming consistency but imports lucide-react Wallet\r\nconst Wallet = ({ className }: { className?: string }) => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className={className}\r\n    >\r\n        <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\" />\r\n        <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\" />\r\n        <path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\" />\r\n    </svg>\r\n);\r\n\r\nexport default BulkTransactionAddTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6558, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/progress.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-gray-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 transition-all\"\r\n      style={{ \r\n        transform: `translateX(-${100 - (value || 0)}%)`,\r\n        backgroundColor: \"#16a34a\"\r\n      }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,gEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAU;YACV,OAAO;gBACL,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;gBAChD,iBAAiB;YACnB;;;;;;;;;;;AAIN,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 6596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/cash/CashCSVUploadDialog.tsx"],"sourcesContent":["import React, { useState, useRef, useMemo } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Upload, FileText, AlertCircle, CheckCircle, Download, Info, MoveRight } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { parseTransactionCSV, generateErrorLogCSV, ValidationError, CSVTransactionRow, validateTransactionCSVRow } from '@/utils/csvParser';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\n\r\ninterface CashCSVUploadDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onUploadComplete: () => void;\r\n}\r\n\r\ninterface UploadState {\r\n    step: 'select' | 'preview' | 'uploading' | 'complete';\r\n    file: File | null;\r\n    validRows: CSVTransactionRow[];\r\n    errors: ValidationError[];\r\n    totalRows: number;\r\n    uploadProgress: number;\r\n    successCount: number;\r\n    failureCount: number;\r\n    currentTransactionIndex: number;\r\n}\r\n\r\nconst CashCSVUploadDialog: React.FC<CashCSVUploadDialogProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onUploadComplete\r\n}) => {\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const { accounts } = useCashAccounts();\r\n    const [state, setState] = useState<UploadState>({\r\n        step: 'select',\r\n        file: null,\r\n        validRows: [],\r\n        errors: [],\r\n        totalRows: 0,\r\n        uploadProgress: 0,\r\n        successCount: 0,\r\n        failureCount: 0,\r\n        currentTransactionIndex: 0\r\n    });\r\n\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const convertCSVRowToTransaction = (row: CSVTransactionRow): CashTransactionFormData => {\r\n        let transactionDate = new Date();\r\n\r\n        const rawDate = row['Date'] as any;\r\n        const dateValue = rawDate?.toString();\r\n        if (dateValue) {\r\n            // Support raw Date objects from SheetJS {cellDates: true}\r\n            if (rawDate instanceof Date) {\r\n                transactionDate = rawDate;\r\n            } else {\r\n                // Support DD/MM/YYYY, D/M/YYYY, DD-MM-YYYY\r\n                const ddmmyyyyMatch = dateValue.match(/^(\\d{1,2})[/-](\\d{1,2})[/-](\\d{4})$/);\r\n                if (ddmmyyyyMatch) {\r\n                    const [, day, month, year] = ddmmyyyyMatch;\r\n                    transactionDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\r\n                } else {\r\n                    const parsedDate = new Date(dateValue);\r\n                    if (!isNaN(parsedDate.getTime())) {\r\n                        transactionDate = parsedDate;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // If something went wrong with the date, use today but ensure it's a valid object\r\n        if (isNaN(transactionDate.getTime())) {\r\n            transactionDate = new Date();\r\n        }\r\n\r\n        let toAccountId = '';\r\n        if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n            const targetAccount = accounts?.find(a =>\r\n                a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n            );\r\n            if (targetAccount) {\r\n                toAccountId = targetAccount.id;\r\n            }\r\n        }\r\n\r\n        return {\r\n            accountId: accountId || '',\r\n            amount: parseFloat(row['Amount']?.toString().replace(/[^0-9.-]/g, '') || '0'),\r\n            transactionType: (row['Type']?.toLowerCase() || 'cash_in') as 'cash_in' | 'cash_out' | 'transfer',\r\n            toAccountId,\r\n            category: row['Category'] || 'Other',\r\n            description: row['Description'] || '',\r\n            paymentMethod: row['Payment Method'] || 'Cash',\r\n            personInCharge: row['Person In Charge'] || '',\r\n            tags: [],\r\n            date: transactionDate,\r\n            receiptImage: ''\r\n        };\r\n    };\r\n\r\n    const handleFileSelect = async (file: File) => {\r\n        const isExcel = file.name.endsWith('.xlsx') || file.name.endsWith('.xls');\r\n        const isCSV = file.name.endsWith('.csv');\r\n\r\n        if (!isExcel && !isCSV) {\r\n            alert('Please select a CSV or Excel file');\r\n            return;\r\n        }\r\n\r\n        let result: { validRows: CSVTransactionRow[], errors: ValidationError[], totalRows: number };\r\n\r\n        if (isExcel) {\r\n            const buffer = await file.arrayBuffer();\r\n            const workbook = XLSX.read(buffer, { cellDates: true });\r\n            const firstSheetName = workbook.SheetNames[0];\r\n            const worksheet = workbook.Sheets[firstSheetName];\r\n\r\n            // Use SheetJS to get clean objects directly\r\n            const rawRows = XLSX.utils.sheet_to_json(worksheet) as any[];\r\n\r\n            // Map keys back to expected format if they differ slightly\r\n            const csvRows: CSVTransactionRow[] = rawRows.map(row => ({\r\n                'Date': row['Date'] || '',\r\n                'Type': row['Type'] || '',\r\n                'Amount': row['Amount'] || '',\r\n                'Description': row['Description'] || '',\r\n                'Category': row['Category'] || '',\r\n                'Payment Method': row['Payment Method'] || '',\r\n                'Person In Charge': row['Person In Charge'] || '',\r\n                'To Account': row['To Account'] || ''\r\n            }));\r\n\r\n            // Crucially: run the SAME validation as CSV\r\n            const validRows: CSVTransactionRow[] = [];\r\n            const errors: ValidationError[] = [];\r\n\r\n            csvRows.forEach((row, index) => {\r\n                const rowErrors = validateTransactionCSVRow(row, index + 2);\r\n\r\n                // Add specific validation for account matching if it's a transfer\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        rowErrors.push({\r\n                            row: index + 2,\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found or is the current account.`\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (rowErrors.length === 0) {\r\n                    validRows.push(row);\r\n                } else {\r\n                    errors.push(...rowErrors);\r\n                }\r\n            });\r\n\r\n            result = {\r\n                validRows,\r\n                errors,\r\n                totalRows: csvRows.length\r\n            };\r\n        } else {\r\n            const text = await file.text();\r\n            result = parseTransactionCSV(text);\r\n\r\n            // Post-process CSV results for account matching\r\n            const accountErrors: ValidationError[] = [];\r\n            const filteredValidRows: CSVTransactionRow[] = [];\r\n\r\n            result.validRows.forEach((row, index) => {\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        accountErrors.push({\r\n                            row: index + 2, // This might be slightly off for CSV if index is non-sequential, but usually okay\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found.`\r\n                        });\r\n                    } else {\r\n                        filteredValidRows.push(row);\r\n                    }\r\n                } else {\r\n                    filteredValidRows.push(row);\r\n                }\r\n            });\r\n\r\n            result.errors.push(...accountErrors);\r\n            result.validRows = filteredValidRows;\r\n        }\r\n\r\n        setState({\r\n            ...state,\r\n            step: 'preview',\r\n            file,\r\n            validRows: result.validRows,\r\n            errors: result.errors,\r\n            totalRows: result.totalRows\r\n        });\r\n    };\r\n\r\n    const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n\r\n        const file = e.dataTransfer.files[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n\r\n    const handleConfirmUpload = async () => {\r\n        setState(prev => ({ ...prev, step: 'uploading', uploadProgress: 0, currentTransactionIndex: 0 }));\r\n        setIsUploading(true);\r\n\r\n        const transactions = state.validRows.map(convertCSVRowToTransaction);\r\n\r\n        try {\r\n            await createBulkTransactions(transactions);\r\n\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: transactions.length,\r\n                failureCount: 0,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } catch (error) {\r\n            console.error('Bulk upload failed:', error);\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: 0,\r\n                failureCount: transactions.length,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        if (isUploading) return;\r\n\r\n        const wasSuccessfulUpload = state.step === 'complete' && state.successCount > 0;\r\n\r\n        setState({\r\n            step: 'select',\r\n            file: null,\r\n            validRows: [],\r\n            errors: [],\r\n            totalRows: 0,\r\n            uploadProgress: 0,\r\n            successCount: 0,\r\n            failureCount: 0,\r\n            currentTransactionIndex: 0\r\n        });\r\n\r\n        onOpenChange(false);\r\n\r\n        if (wasSuccessfulUpload) {\r\n            onUploadComplete();\r\n        }\r\n    };\r\n\r\n    const renderFileSelection = () => (\r\n        <div className=\"space-y-6\">\r\n            <div\r\n                className={cn(\r\n                    \"border-4 border-dashed rounded-2xl p-10 text-center cursor-pointer transition-all duration-300\",\r\n                    isDragging\r\n                        ? \"border-blue-500 bg-blue-50/50 scale-[1.01] shadow-lg\"\r\n                        : \"border-slate-200 dark:border-slate-800 hover:border-blue-400 hover:bg-slate-50/50 dark:hover:bg-slate-900/50\"\r\n                )}\r\n                onDrop={handleDrop}\r\n                onDragOver={handleDragOver}\r\n                onDragLeave={handleDragLeave}\r\n                onClick={() => fileInputRef.current?.click()}\r\n            >\r\n                <div className=\"bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-slow\">\r\n                    <Upload className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\r\n                </div>\r\n                <p className=\"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2\">\r\n                    Click or Drag File to Upload\r\n                </p>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 max-w-xs mx-auto mb-6\">\r\n                    Select your transaction data file. **CSV** and **Excel (.xlsx, .xls)** files are supported for bulk processing.\r\n                </p>\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">Multi-Format Support</span>\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"border rounded-xl overflow-hidden bg-white dark:bg-slate-900 shadow-sm\">\r\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 px-4 py-2 border-b flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Info className=\"h-4 w-4 text-blue-500\" />\r\n                        <span className=\"text-xs font-bold text-slate-700 dark:text-slate-300\">DATA FORMAT GUIDE</span>\r\n                    </div>\r\n                    <span className=\"text-[10px] text-slate-400 font-medium\">Headers are required</span>\r\n                </div>\r\n                <div className=\"overflow-x-auto p-0\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"bg-slate-100/30 dark:bg-slate-900/30\">\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Date</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Type</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Amount</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Description</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Category</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            <TableRow className=\"h-8 py-0\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">22/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-green-600 font-semibold italic\">cash_in</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">1500.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Product Sale #44</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Sales</TableCell>\r\n                            </TableRow>\r\n                            <TableRow className=\"h-8 py-0 border-none\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">21/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-red-600 font-semibold italic\">cash_out</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">450.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Office Supplies</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Expenses</TableCell>\r\n                            </TableRow>\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n                <div className=\"p-3 bg-blue-50/30 dark:bg-blue-900/10 text-[10px] text-blue-600 dark:text-blue-400 leading-relaxed border-t italic\">\r\n                    <strong>Note:</strong> Allowed types are: <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_in</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_out</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">transfer</code>\r\n                </div>\r\n            </div>\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n                onChange={handleFileInputChange}\r\n                className=\"hidden\"\r\n            />\r\n        </div>\r\n    );\r\n\r\n    const renderPreview = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                    <FileText className=\"h-5 w-5 text-blue-600\" />\r\n                    <div>\r\n                        <span className=\"text-sm font-bold text-slate-900 dark:text-slate-100\">{state.file?.name}</span>\r\n                        <p className=\"text-[10px] text-slate-500\">File attached and analyzed</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                    <Card className=\"shadow-none bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-emerald-600 dark:text-emerald-400\">{state.validRows.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-emerald-700 dark:text-emerald-500 uppercase\">Valid Rows</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-rose-50/50 dark:bg-rose-900/10 border-rose-100 dark:border-rose-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-rose-600 dark:text-rose-400\">{state.errors.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-rose-700 dark:text-rose-500 uppercase\">Invalid</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30 overflow-hidden text-center\">\r\n                        <CardContent className=\"p-4 flex flex-col items-center justify-center\">\r\n                            <div className=\"text-sm font-black text-blue-600 dark:text-blue-400 flex items-center gap-1\">\r\n                                {Math.round((state.validRows.length / state.totalRows) * 100) || 0}%\r\n                                <MoveRight className=\"h-3 w-3\" />\r\n                            </div>\r\n                            <p className=\"text-[10px] font-bold text-blue-700 dark:text-blue-500 uppercase\">Integrity</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n\r\n            {state.errors.length > 0 && (\r\n                <Alert variant=\"destructive\" className=\"bg-rose-50/50 dark:bg-rose-900/10 border-rose-200 dark:border-rose-900\">\r\n                    <AlertCircle className=\"h-4 w-4 text-rose-600\" />\r\n                    <AlertDescription className=\"text-xs text-rose-700 dark:text-rose-400 leading-relaxed font-medium\">\r\n                        Found {state.errors.length} rows with errors that will be skipped during the process.\r\n                        <Button\r\n                            variant=\"link\"\r\n                            className=\"p-0 h-auto ml-2 text-rose-700 dark:text-rose-400 underline font-bold\"\r\n                            onClick={() => generateErrorLogCSV(state.errors, 'transaction_upload_errors.csv')}\r\n                        >\r\n                            <Download className=\"h-3 w-3 mr-1 inline\" />\r\n                            View Error Details\r\n                        </Button>\r\n                    </AlertDescription>\r\n                </Alert>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    className=\"flex-1 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                    onClick={() => setState(prev => ({ ...prev, step: 'select' }))}\r\n                >\r\n                    Choose Different File\r\n                </Button>\r\n                <Button\r\n                    className=\"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md font-bold transition-all active:scale-[0.98]\"\r\n                    onClick={handleConfirmUpload}\r\n                    disabled={state.validRows.length === 0}\r\n                >\r\n                    Proceed with {state.validRows.length} Records\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderUploading = () => (\r\n        <div className=\"space-y-8 py-4\">\r\n            <div className=\"text-center space-y-2\">\r\n                <div className=\"relative w-20 h-20 mx-auto\">\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-slate-100 dark:border-slate-800\" />\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin\" />\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <Upload className=\"h-8 w-8 text-blue-500/50\" />\r\n                    </div>\r\n                </div>\r\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-slate-200\">Processing Data...</h3>\r\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 italic\">This will only take a few moments</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-2 px-4 text-center\">\r\n                <Progress value={state.uploadProgress} className=\"h-2 w-full bg-slate-100 dark:bg-slate-800\" />\r\n                <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">{Math.round(state.uploadProgress)}% Complete</span>\r\n            </div>\r\n\r\n            <Alert className=\"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-800\">\r\n                <Info className=\"h-4 w-4 text-slate-400\" />\r\n                <AlertDescription className=\"text-xs text-slate-500 dark:text-slate-400 font-medium\">\r\n                    We are verifying and persisting each transaction. Please keep your browser window active.\r\n                </AlertDescription>\r\n            </Alert>\r\n        </div>\r\n    );\r\n\r\n    const renderComplete = () => (\r\n        <div className=\"space-y-6 pt-4 text-center\">\r\n            <div className=\"bg-emerald-100 dark:bg-emerald-900/30 w-20 h-20 rounded-full flex items-center justify-center mx-auto shadow-inner\">\r\n                <CheckCircle className=\"h-10 w-10 text-emerald-600 dark:text-emerald-400\" />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n                <h3 className=\"text-xl font-black text-slate-900 dark:text-slate-100\">Synchronized Successfully!</h3>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium\">\r\n                    A total of <span className=\"text-emerald-600 dark:text-emerald-400 font-bold\">{state.successCount} transactions</span> have been merged into the financial ledger.\r\n                    {state.failureCount > 0 && <span className=\"text-rose-500 font-bold\"> ({state.failureCount} entries reported issues)</span>}\r\n                </p>\r\n            </div>\r\n            <Button\r\n                onClick={handleClose}\r\n                className=\"w-full h-12 rounded-xl text-lg font-bold shadow-lg transition-all hover:translate-y-[-2px] active:translate-y-[0px] bg-slate-900 hover:bg-black dark:bg-white dark:text-black dark:hover:bg-slate-200\"\r\n            >\r\n                Return to Dashboard\r\n            </Button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isUploading && onOpenChange(val)}>\r\n            <DialogContent className=\"sm:max-w-[550px] p-0 overflow-hidden rounded-3xl border-none shadow-2xl\">\r\n                <DialogHeader className=\"p-8 pb-4 bg-gradient-to-b from-slate-50/50 to-white dark:from-slate-900 dark:to-slate-950\">\r\n                    <DialogTitle className=\"flex items-center gap-3 text-2xl font-black tracking-tight text-slate-900 dark:text-slate-50\">\r\n                        <div className=\"bg-blue-600 p-2 rounded-xl text-white\">\r\n                            <Upload className=\"h-6 w-6\" />\r\n                        </div>\r\n                        Financial Importer\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-slate-500 dark:text-slate-400 font-medium mt-1\">\r\n                        Scale your data management by importing bulk CSV logs.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"px-8 pb-8 pt-0\">\r\n                    {state.step === 'select' && renderFileSelection()}\r\n                    {state.step === 'preview' && renderPreview()}\r\n                    {state.step === 'uploading' && renderUploading()}\r\n                    {state.step === 'complete' && renderComplete()}\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CashCSVUploadDialog;\r\n"],"names":[],"mappings":"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"}}]
}