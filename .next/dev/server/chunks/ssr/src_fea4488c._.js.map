{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/settings/BusinessProfileForm.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ImagePlus, Building, Briefcase, Users } from 'lucide-react';\r\nimport { BusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { useOnboarding } from '@/hooks/useOnboarding';\r\nimport { toast } from 'sonner';\r\n\r\nconst BUSINESS_SIZES = [\r\n  { value: '1-5', label: '1–5 employees' },\r\n  { value: '6-20', label: '6–20 employees' },\r\n  { value: '21-50', label: '21–50 employees' },\r\n  { value: '50+', label: '50+ employees' },\r\n];\r\n\r\ninterface BusinessProfileFormProps {\r\n  settings: BusinessSettings;\r\n  onSettingsChange: (e: any) => void;\r\n  onLogoChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nconst BusinessProfileForm: React.FC<BusinessProfileFormProps> = ({\r\n  settings,\r\n  onSettingsChange,\r\n  onLogoChange,\r\n}) => {\r\n  const { onboarding, saveOnboarding } = useOnboarding();\r\n\r\n  const [natureOfBusiness, setNatureOfBusiness] = React.useState(\r\n    onboarding?.nature_of_business ?? ''\r\n  );\r\n  const [businessSize, setBusinessSize] = React.useState(\r\n    onboarding?.business_size ?? ''\r\n  );\r\n  const [savingExtra, setSavingExtra] = React.useState(false);\r\n\r\n  // Sync when onboarding data loads\r\n  React.useEffect(() => {\r\n    if (onboarding) {\r\n      setNatureOfBusiness(onboarding.nature_of_business ?? '');\r\n      setBusinessSize(onboarding.business_size ?? '');\r\n    }\r\n  }, [onboarding]);\r\n\r\n  const handleSaveExtra = async () => {\r\n    if (!onboarding) return;\r\n    setSavingExtra(true);\r\n    try {\r\n      await saveOnboarding({\r\n        ...onboarding,\r\n        nature_of_business: natureOfBusiness || undefined,\r\n        business_size: businessSize || undefined,\r\n        completed: onboarding.completed,\r\n      });\r\n      toast.success('Business details updated');\r\n    } catch {\r\n      toast.error('Failed to update business details');\r\n    } finally {\r\n      setSavingExtra(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mb-6\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Building className=\"h-5 w-5 text-blue-600\" />\r\n          <CardTitle>Business Profile</CardTitle>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Logo */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"businessLogo\">Business Logo</Label>\r\n          <div className=\"flex items-center space-x-4\">\r\n            {settings.businessLogo && (\r\n              <img\r\n                src={settings.businessLogo}\r\n                alt=\"Business Logo\"\r\n                className=\"w-16 h-16 object-contain\"\r\n              />\r\n            )}\r\n            <div className=\"flex-1\">\r\n              <Input\r\n                id=\"businessLogo\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={onLogoChange}\r\n                className=\"hidden\"\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => document.getElementById('businessLogo')?.click()}\r\n                className=\"w-full\"\r\n              >\r\n                <ImagePlus className=\"mr-2 h-4 w-4\" />\r\n                Upload Logo\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Currency */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"currency\">Currency</Label>\r\n          <Input\r\n            id=\"currency\"\r\n            name=\"currency\"\r\n            value={settings.currency}\r\n            onChange={onSettingsChange}\r\n            placeholder=\"Enter your preferred currency (e.g., USD, EUR, GBP)\"\r\n          />\r\n        </div>\r\n\r\n        {/* Default Receipt Format */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"defaultPrintFormat\">Default Receipt Format</Label>\r\n          <Select\r\n            value={settings.defaultPrintFormat || 'standard'}\r\n            onValueChange={(value) => onSettingsChange({ target: { name: 'defaultPrintFormat', value } })}\r\n          >\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Select default receipt format\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"standard\">Standard Receipt (A4/Letter)</SelectItem>\r\n              <SelectItem value=\"thermal\">Thermal Receipt</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Choose the default format for printing receipts. You can still switch formats when printing.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Business Name */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"businessName\">Business Name</Label>\r\n          <Input\r\n            id=\"businessName\"\r\n            name=\"businessName\"\r\n            value={settings.businessName}\r\n            onChange={onSettingsChange}\r\n            placeholder=\"\"\r\n          />\r\n        </div>\r\n\r\n        {/* Business Address */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"businessAddress\">Business Address</Label>\r\n          <Input\r\n            id=\"businessAddress\"\r\n            name=\"businessAddress\"\r\n            value={settings.businessAddress}\r\n            onChange={onSettingsChange}\r\n            placeholder=\"\"\r\n          />\r\n        </div>\r\n\r\n        {/* Business Phone */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"businessPhone\">Business Phone</Label>\r\n          <Input\r\n            id=\"businessPhone\"\r\n            name=\"businessPhone\"\r\n            value={settings.businessPhone}\r\n            onChange={onSettingsChange}\r\n            placeholder=\"\"\r\n          />\r\n        </div>\r\n\r\n        {/* Business Email */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"businessEmail\">Business Email</Label>\r\n          <Input\r\n            id=\"businessEmail\"\r\n            name=\"businessEmail\"\r\n            value={settings.businessEmail}\r\n            onChange={onSettingsChange}\r\n            type=\"email\"\r\n            placeholder=\"\"\r\n          />\r\n        </div>\r\n\r\n        {/* Divider for onboarding-linked fields */}\r\n        <div className=\"border-t pt-4 space-y-4\">\r\n          <p className=\"text-xs text-muted-foreground font-medium uppercase tracking-wide\">\r\n            Additional Business Info\r\n          </p>\r\n\r\n          {/* Nature of Business */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"natureOfBusiness\" className=\"flex items-center gap-2\">\r\n              <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\r\n              Nature of Business\r\n              <span className=\"text-muted-foreground text-xs font-normal\">(optional)</span>\r\n            </Label>\r\n            <Input\r\n              id=\"natureOfBusiness\"\r\n              value={natureOfBusiness}\r\n              onChange={(e) => setNatureOfBusiness(e.target.value)}\r\n              placeholder=\"\"\r\n            />\r\n          </div>\r\n\r\n          {/* Business Size */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"businessSizeSettings\" className=\"flex items-center gap-2\">\r\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n              Business Size\r\n              <span className=\"text-muted-foreground text-xs font-normal\">(optional)</span>\r\n            </Label>\r\n            <Select\r\n              value={businessSize}\r\n              onValueChange={setBusinessSize}\r\n            >\r\n              <SelectTrigger id=\"businessSizeSettings\" className=\"w-full\">\r\n                <SelectValue placeholder=\"Select number of employees\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {BUSINESS_SIZES.map((size) => (\r\n                  <SelectItem key={size.value} value={size.value}>\r\n                    {size.label}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {onboarding && (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleSaveExtra}\r\n              disabled={savingExtra}\r\n              className=\"w-full\"\r\n            >\r\n              {savingExtra ? 'Saving...' : 'Save Nature & Size'}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BusinessProfileForm;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/settings/PaymentMethodsManager.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Plus, Trash2, CreditCard } from 'lucide-react';\r\n\r\ninterface PaymentMethod {\r\n  method: string;\r\n  accountNumber: string;\r\n  accountName: string;\r\n}\r\n\r\ninterface PaymentMethodsManagerProps {\r\n  paymentMethods: PaymentMethod[];\r\n  onPaymentMethodChange: (index: number, field: 'method' | 'accountNumber' | 'accountName', value: string) => void;\r\n  onAddPaymentMethod: () => void;\r\n  onRemovePaymentMethod: (index: number) => void;\r\n}\r\n\r\nconst PaymentMethodsManager: React.FC<PaymentMethodsManagerProps> = ({\r\n  paymentMethods,\r\n  onPaymentMethodChange,\r\n  onAddPaymentMethod,\r\n  onRemovePaymentMethod,\r\n}) => {\r\n  return (\r\n    <Card className=\"mb-6\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <CreditCard className=\"h-5 w-5 text-blue-600\" />\r\n            <CardTitle>Payment Information</CardTitle>\r\n          </div>\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\" \r\n            onClick={onAddPaymentMethod}\r\n            className=\"text-xs\"\r\n          >\r\n            <Plus className=\"mr-1 h-3 w-3\" />\r\n            Add Method\r\n          </Button>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"border rounded-md p-3\">\r\n          <Table className=\"text-sm w-full\">\r\n            <TableHeader>\r\n              <TableRow className=\"bg-gray-100\">\r\n                <TableHead className=\"font-medium py-1 px-2 w-[30%] text-left\">Payment Method</TableHead>\r\n                <TableHead className=\"font-medium py-1 px-2 w-[30%] text-left\">Account Number</TableHead>\r\n                <TableHead className=\"font-medium py-1 px-2 text-left\">Account Name</TableHead>\r\n                <TableHead className=\"w-[50px]\"></TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {paymentMethods.length > 0 ? (\r\n                paymentMethods.map((payment, index) => (\r\n                  <TableRow key={`payment-${index}`} className=\"border-b border-gray-100\">\r\n                    <TableCell className=\"py-1 px-2\">\r\n                      <Input\r\n                        value={payment.method}\r\n                        onChange={(e) => onPaymentMethodChange(index, 'method', e.target.value)}\r\n                        placeholder=\"e.g., Bank Transfer\"\r\n                        className=\"w-full p-1 h-8 text-sm\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell className=\"py-1 px-2\">\r\n                      <Input\r\n                        value={payment.accountNumber}\r\n                        onChange={(e) => onPaymentMethodChange(index, 'accountNumber', e.target.value)}\r\n                        placeholder=\"e.g., 12345678\"\r\n                        className=\"w-full p-1 h-8 text-sm\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell className=\"py-1 px-2\">\r\n                      <Input\r\n                        value={payment.accountName}\r\n                        onChange={(e) => onPaymentMethodChange(index, 'accountName', e.target.value)}\r\n                        placeholder=\"e.g., John Doe\"\r\n                        className=\"w-full p-1 h-8 text-sm\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell className=\"py-1 px-2\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => onRemovePaymentMethod(index)}\r\n                        className=\"h-6 w-6 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              ) : (\r\n                <TableRow>\r\n                  <TableCell colSpan={4} className=\"text-center py-4 text-sm text-muted-foreground\">\r\n                    No payment methods added yet. Click \"Add Method\" to add one.\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        \r\n        <p className=\"text-xs text-muted-foreground mt-3\">\r\n          Enter payment information to display on receipts. Each row will appear in the payment information table on receipts.\r\n          Leave empty if you don't want to show payment information.\r\n        </p>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PaymentMethodsManager;"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;;;;;;;AAeA,MAAM,wBAA8D,CAAC,EACnE,cAAc,EACd,qBAAqB,EACrB,kBAAkB,EAClB,qBAAqB,EACtB;IACC,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC,8IAAU;0BACT,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gOAAU;oCAAC,WAAU;;;;;;8CACtB,8OAAC,6IAAS;8CAAC;;;;;;;;;;;;sCAEb,8OAAC,4IAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS;4BACT,WAAU;;8CAEV,8OAAC,0MAAI;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;0BAKvC,8OAAC,+IAAW;;kCACV,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,0IAAK;4BAAC,WAAU;;8CACf,8OAAC,gJAAW;8CACV,cAAA,8OAAC,6IAAQ;wCAAC,WAAU;;0DAClB,8OAAC,8IAAS;gDAAC,WAAU;0DAA0C;;;;;;0DAC/D,8OAAC,8IAAS;gDAAC,WAAU;0DAA0C;;;;;;0DAC/D,8OAAC,8IAAS;gDAAC,WAAU;0DAAkC;;;;;;0DACvD,8OAAC,8IAAS;gDAAC,WAAU;;;;;;;;;;;;;;;;;8CAGzB,8OAAC,8IAAS;8CACP,eAAe,MAAM,GAAG,IACvB,eAAe,GAAG,CAAC,CAAC,SAAS,sBAC3B,8OAAC,6IAAQ;4CAA0B,WAAU;;8DAC3C,8OAAC,8IAAS;oDAAC,WAAU;8DACnB,cAAA,8OAAC,0IAAK;wDACJ,OAAO,QAAQ,MAAM;wDACrB,UAAU,CAAC,IAAM,sBAAsB,OAAO,UAAU,EAAE,MAAM,CAAC,KAAK;wDACtE,aAAY;wDACZ,WAAU;;;;;;;;;;;8DAGd,8OAAC,8IAAS;oDAAC,WAAU;8DACnB,cAAA,8OAAC,0IAAK;wDACJ,OAAO,QAAQ,aAAa;wDAC5B,UAAU,CAAC,IAAM,sBAAsB,OAAO,iBAAiB,EAAE,MAAM,CAAC,KAAK;wDAC7E,aAAY;wDACZ,WAAU;;;;;;;;;;;8DAGd,8OAAC,8IAAS;oDAAC,WAAU;8DACnB,cAAA,8OAAC,0IAAK;wDACJ,OAAO,QAAQ,WAAW;wDAC1B,UAAU,CAAC,IAAM,sBAAsB,OAAO,eAAe,EAAE,MAAM,CAAC,KAAK;wDAC3E,aAAY;wDACZ,WAAU;;;;;;;;;;;8DAGd,8OAAC,8IAAS;oDAAC,WAAU;8DACnB,cAAA,8OAAC,4IAAM;wDACL,SAAQ;wDACR,MAAK;wDACL,SAAS,IAAM,sBAAsB;wDACrC,WAAU;kEAEV,cAAA,8OAAC,oNAAM;4DAAC,WAAU;;;;;;;;;;;;;;;;;2CAhCT,CAAC,QAAQ,EAAE,OAAO;;;;sGAsCnC,8OAAC,6IAAQ;kDACP,cAAA,8OAAC,8IAAS;4CAAC,SAAS;4CAAG,WAAU;sDAAiD;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAS5F,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;;;;;;;AAO1D;uCAEe"}},
    {"offset": {"line": 965, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/signature/SignaturePad.tsx"],"sourcesContent":["\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport SignaturePad from 'signature_pad';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Trash2, Save, Edit } from 'lucide-react';\r\n\r\ninterface SignaturePadComponentProps {\r\n  onSave: (signatureDataUrl: string) => void;\r\n  existingSignature?: string;\r\n  className?: string;\r\n}\r\n\r\nconst SignaturePadComponent: React.FC<SignaturePadComponentProps> = ({\r\n  onSave,\r\n  existingSignature,\r\n  className = \"\"\r\n}) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const signaturePadRef = useRef<SignaturePad | null>(null);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [showPad, setShowPad] = useState(!existingSignature);\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current && showPad) {\r\n      // Initialize signature pad\r\n      signaturePadRef.current = new SignaturePad(canvasRef.current, {\r\n        backgroundColor: 'rgb(255, 255, 255)',\r\n        penColor: 'rgb(0, 0, 0)',\r\n        minWidth: 2,\r\n        maxWidth: 4,\r\n        throttle: 16,\r\n        minDistance: 5,\r\n      });\r\n\r\n      const signaturePad = signaturePadRef.current;\r\n\r\n      // Set up event listeners\r\n      const handleBeginStroke = () => setIsDrawing(true);\r\n      const handleEndStroke = () => setIsDrawing(false);\r\n\r\n      signaturePad.addEventListener('beginStroke', handleBeginStroke);\r\n      signaturePad.addEventListener('endStroke', handleEndStroke);\r\n\r\n      // Resize canvas to match container\r\n      const resizeCanvas = () => {\r\n        if (canvasRef.current) {\r\n          const canvas = canvasRef.current;\r\n          const container = canvas.parentElement;\r\n          if (container) {\r\n            const rect = container.getBoundingClientRect();\r\n            const ratio = Math.max(window.devicePixelRatio || 1, 1);\r\n            \r\n            canvas.width = rect.width * ratio;\r\n            canvas.height = 200 * ratio;\r\n            canvas.style.width = `${rect.width}px`;\r\n            canvas.style.height = '200px';\r\n            \r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n              ctx.scale(ratio, ratio);\r\n            }\r\n            \r\n            signaturePad.clear();\r\n          }\r\n        }\r\n      };\r\n\r\n      resizeCanvas();\r\n      window.addEventListener('resize', resizeCanvas);\r\n\r\n      return () => {\r\n        signaturePad.removeEventListener('beginStroke', handleBeginStroke);\r\n        signaturePad.removeEventListener('endStroke', handleEndStroke);\r\n        window.removeEventListener('resize', resizeCanvas);\r\n        signaturePad.off();\r\n      };\r\n    }\r\n  }, [showPad]);\r\n\r\n  const clearSignature = () => {\r\n    if (signaturePadRef.current) {\r\n      signaturePadRef.current.clear();\r\n      setIsDrawing(false);\r\n    }\r\n  };\r\n\r\n  const saveSignature = () => {\r\n    if (signaturePadRef.current && !signaturePadRef.current.isEmpty()) {\r\n      const dataUrl = signaturePadRef.current.toDataURL('image/png', 0.8);\r\n      onSave(dataUrl);\r\n      setShowPad(false);\r\n    }\r\n  };\r\n\r\n  const hasSignature = signaturePadRef.current && !signaturePadRef.current.isEmpty();\r\n\r\n  if (!showPad && existingSignature) {\r\n    return (\r\n      <div className={`space-y-4 ${className}`}>\r\n        <Card className=\"p-4\">\r\n          <CardContent className=\"p-0\">\r\n            <div className=\"text-center space-y-3\">\r\n              <p className=\"text-sm text-muted-foreground\">Current Signature:</p>\r\n              <div className=\"border rounded-lg p-4 bg-white\">\r\n                <img\r\n                  src={existingSignature}\r\n                  alt=\"Current Signature\"\r\n                  className=\"max-h-24 mx-auto object-contain\"\r\n                />\r\n              </div>\r\n              <Button\r\n                onClick={() => setShowPad(true)}\r\n                variant=\"outline\"\r\n                className=\"w-full\"\r\n              >\r\n                <Edit className=\"mr-2 h-4 w-4\" />\r\n                Replace Signature\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      <Card className=\"p-4\">\r\n        <CardContent className=\"p-0\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm text-muted-foreground mb-2\">\r\n                Draw your signature using your finger or stylus\r\n              </p>\r\n            </div>\r\n            \r\n            {/* Signature Canvas */}\r\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg bg-white relative overflow-hidden\">\r\n              <canvas\r\n                ref={canvasRef}\r\n                className=\"w-full h-[200px] touch-none\"\r\n                style={{ touchAction: 'none' }}\r\n              />\r\n              {!hasSignature && !isDrawing && (\r\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                  <p className=\"text-gray-400 text-sm\">Sign here</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex gap-2\">\r\n              <Button\r\n                onClick={clearSignature}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                disabled={!hasSignature}\r\n              >\r\n                <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                Clear\r\n              </Button>\r\n              <Button\r\n                onClick={saveSignature}\r\n                className=\"flex-1\"\r\n                disabled={!hasSignature}\r\n              >\r\n                <Save className=\"mr-2 h-4 w-4\" />\r\n                Save Signature\r\n              </Button>\r\n            </div>\r\n\r\n            {existingSignature && (\r\n              <Button\r\n                onClick={() => setShowPad(false)}\r\n                variant=\"ghost\"\r\n                className=\"w-full\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignaturePadComponent;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1270, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/settings/SignatureManager.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Signature, Smartphone, X, PenTool } from 'lucide-react';\r\nimport SignaturePadComponent from '@/components/signature/SignaturePad';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\n\r\ninterface SignatureManagerProps {\r\n  signature: string | undefined | null;\r\n  onSignatureChange: (signature: string) => void;\r\n  onSignaturePadSave: (signatureDataUrl: string) => Promise<void>;\r\n  onRemoveSignature: () => Promise<void>;\r\n}\r\n\r\nconst SignatureUploader = ({ signature, onChange, onRemove }: { \r\n  signature: string | undefined | null, \r\n  onChange: (signature: string) => void,\r\n  onRemove: () => void\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <Label htmlFor=\"signature\">Upload Signature Image</Label>\r\n      <div className=\"flex items-center space-x-4\">\r\n        {signature && (\r\n          <div className=\"relative border rounded bg-white p-2\">\r\n            <img\r\n              src={signature}\r\n              alt=\"Business Signature\"\r\n              className=\"w-32 h-16 object-contain\"\r\n            />\r\n            <Button \r\n              variant=\"destructive\" \r\n              size=\"icon\" \r\n              className=\"absolute -top-2 -right-2 h-6 w-6 rounded-full\" \r\n              onClick={onRemove}\r\n            >\r\n              <X className=\"h-3 w-3\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n        <div className=\"flex-1\">\r\n          <Input\r\n            id=\"signature\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={(e) => {\r\n              const file = e.target.files?.[0];\r\n              if (file) {\r\n                const reader = new FileReader();\r\n                reader.onloadend = () => {\r\n                  onChange(reader.result as string);\r\n                };\r\n                reader.readAsDataURL(file);\r\n              }\r\n            }}\r\n            className=\"hidden\"\r\n          />\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => document.getElementById('signature')?.click()}\r\n            className=\"w-full\"\r\n          >\r\n            <Signature className=\"mr-2 h-4 w-4\" />\r\n            {signature ? 'Change Signature' : 'Upload Signature'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <p className=\"text-xs text-muted-foreground\">\r\n        Upload an image of your signature to display on receipts and invoices, or remove it if you don't want to include it\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SignatureManager: React.FC<SignatureManagerProps> = ({\r\n  signature,\r\n  onSignatureChange,\r\n  onSignaturePadSave,\r\n  onRemoveSignature,\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n\r\n  return (\r\n    <Card className=\"mb-6\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center gap-2\">\r\n          <PenTool className=\"h-5 w-5 text-blue-600\" />\r\n          <CardTitle>Business Signature</CardTitle>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Mobile Signature Pad */}\r\n        {isMobile && (\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <Smartphone className=\"h-4 w-4 text-blue-600\" />\r\n              <Label className=\"text-sm font-medium text-blue-600\">\r\n                Draw Your Signature\r\n              </Label>\r\n            </div>\r\n            <SignaturePadComponent\r\n              onSave={onSignaturePadSave}\r\n              existingSignature={signature}\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        {/* File Upload Option */}\r\n        <div className=\"space-y-2\">\r\n          <SignatureUploader\r\n            signature={signature}\r\n            onChange={onSignatureChange}\r\n            onRemove={onRemoveSignature}\r\n          />\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SignatureManager;"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;AASA,MAAM,oBAAoB,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAIzD;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,0IAAK;gBAAC,SAAQ;0BAAY;;;;;;0BAC3B,8OAAC;gBAAI,WAAU;;oBACZ,2BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,KAAK;gCACL,KAAI;gCACJ,WAAU;;;;;;0CAEZ,8OAAC,4IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;0CAET,cAAA,8OAAC,iMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAInB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0IAAK;gCACJ,IAAG;gCACH,MAAK;gCACL,QAAO;gCACP,UAAU,CAAC;oCACT,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;oCAChC,IAAI,MAAM;wCACR,MAAM,SAAS,IAAI;wCACnB,OAAO,SAAS,GAAG;4CACjB,SAAS,OAAO,MAAM;wCACxB;wCACA,OAAO,aAAa,CAAC;oCACvB;gCACF;gCACA,WAAU;;;;;;0CAEZ,8OAAC,4IAAM;gCACL,SAAQ;gCACR,SAAS,IAAM,SAAS,cAAc,CAAC,cAAc;gCACrD,WAAU;;kDAEV,8OAAC,yNAAS;wCAAC,WAAU;;;;;;oCACpB,YAAY,qBAAqB;;;;;;;;;;;;;;;;;;;0BAIxC,8OAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;;AAKnD;AAEA,MAAM,mBAAoD,CAAC,EACzD,SAAS,EACT,iBAAiB,EACjB,kBAAkB,EAClB,iBAAiB,EAClB;IACC,MAAM,WAAW,IAAA,6IAAW;IAE5B,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC,8IAAU;0BACT,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uNAAO;4BAAC,WAAU;;;;;;sCACnB,8OAAC,6IAAS;sCAAC;;;;;;;;;;;;;;;;;0BAGf,8OAAC,+IAAW;gBAAC,WAAU;;oBAEpB,0BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4NAAU;wCAAC,WAAU;;;;;;kDACtB,8OAAC,0IAAK;wCAAC,WAAU;kDAAoC;;;;;;;;;;;;0CAIvD,8OAAC,0JAAqB;gCACpB,QAAQ;gCACR,mBAAmB;;;;;;;;;;;;kCAMzB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAW;4BACX,UAAU;4BACV,UAAU;;;;;;;;;;;;;;;;;;;;;;;AAMtB;uCAEe"}},
    {"offset": {"line": 1524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/settings/PrivacySettings.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Shield, Mail } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  DialogClose\r\n} from '@/components/ui/dialog';\r\n\r\ninterface PrivacySettingsProps {\r\n  onRequestDataDeletion: () => void;\r\n}\r\n\r\nconst PrivacySettings: React.FC<PrivacySettingsProps> = ({ onRequestDataDeletion }) => {\r\n  return (\r\n    <Card className=\"mb-6\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Shield className=\"h-5 w-5 text-blue-600\" />\r\n          <CardTitle>Privacy & Data</CardTitle>\r\n        </div>\r\n        <CardDescription>\r\n          Manage your privacy settings and data\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h3 className=\"font-medium\">Privacy Policy</h3>\r\n            <p className=\"text-sm text-gray-500\">Review our privacy policy</p>\r\n          </div>\r\n          <Button variant=\"outline\" asChild>\r\n            <Link to=\"/privacy-policy\">View Policy</Link>\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h3 className=\"font-medium\">Delete My Data</h3>\r\n            <p className=\"text-sm text-gray-500\">Request deletion of your personal information</p>\r\n          </div>\r\n          <Dialog>\r\n            <DialogTrigger asChild>\r\n              <Button variant=\"outline\">\r\n                <Mail className=\"mr-2 h-4 w-4\" />\r\n                Request Deletion\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>Request Data Deletion</DialogTitle>\r\n                <DialogDescription>\r\n                  This will open your email client to send a request for data deletion.\r\n                  Our team will process your request and contact you for verification.\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              <div className=\"flex justify-end space-x-2 mt-4\">\r\n                <DialogClose asChild>\r\n                  <Button variant=\"outline\">Cancel</Button>\r\n                </DialogClose>\r\n                <Button onClick={onRequestDataDeletion}>\r\n                  Proceed\r\n                </Button>\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n        \r\n        <p className=\"text-xs text-muted-foreground\">\r\n          You can request deletion of your account and associated data at any time.\r\n        </p>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PrivacySettings;"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAcA,MAAM,kBAAkD,CAAC,EAAE,qBAAqB,EAAE;IAChF,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC,8IAAU;;kCACT,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC,6IAAS;0CAAC;;;;;;;;;;;;kCAEb,8OAAC,mJAAe;kCAAC;;;;;;;;;;;;0BAInB,8OAAC,+IAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAc;;;;;;kDAC5B,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,8OAAC,4IAAM;gCAAC,SAAQ;gCAAU,OAAO;0CAC/B,cAAA,8OAAC,+KAAI;oCAAC,IAAG;8CAAkB;;;;;;;;;;;;;;;;;kCAI/B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAc;;;;;;kDAC5B,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,8OAAC,4IAAM;;kDACL,8OAAC,mJAAa;wCAAC,OAAO;kDACpB,cAAA,8OAAC,4IAAM;4CAAC,SAAQ;;8DACd,8OAAC,0MAAI;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;kDAIrC,8OAAC,mJAAa;;0DACZ,8OAAC,kJAAY;;kEACX,8OAAC,iJAAW;kEAAC;;;;;;kEACb,8OAAC,uJAAiB;kEAAC;;;;;;;;;;;;0DAKrB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,iJAAW;wDAAC,OAAO;kEAClB,cAAA,8OAAC,4IAAM;4DAAC,SAAQ;sEAAU;;;;;;;;;;;kEAE5B,8OAAC,4IAAM;wDAAC,SAAS;kEAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAQhD,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;;;;;;;AAMrD;uCAEe"}},
    {"offset": {"line": 1788, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/app/actions/business-settings.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getBusinessSettingsAction(branchId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId }\r\n        });\r\n\r\n        if (!settings) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            id: settings.id,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            currency: settings.currency,\r\n            signature: settings.signatureImage,\r\n            metadata: settings.metadata || {}\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching business settings:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function upsertBusinessSettingsAction(branchId: string, userId: string, updateData: any) {\r\n    try {\r\n        // Validate user access to branch\r\n        const branch = await db.branch.findFirst({\r\n            where: {\r\n                id: branchId,\r\n                OR: [\r\n                    { adminId: userId },\r\n                    { users: { some: { id: userId } } }\r\n                ]\r\n            }\r\n        });\r\n\r\n        if (!branch) {\r\n            return { success: false, error: 'Unauthorized to update branch settings' };\r\n        }\r\n\r\n        const data = {\r\n            businessName: updateData.business_name,\r\n            address: updateData.business_address,\r\n            phone: updateData.business_phone,\r\n            email: updateData.business_email,\r\n            logo: updateData.business_logo,\r\n            currency: updateData.currency,\r\n            signatureImage: updateData.signature,\r\n            metadata: updateData.metadata\r\n        };\r\n\r\n        const upserted = await db.branchSettings.upsert({\r\n            where: { branchId: branchId },\r\n            update: data,\r\n            create: {\r\n                branchId: branchId,\r\n                ...data\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: upserted.id,\r\n                business_name: upserted.businessName,\r\n                business_address: upserted.address,\r\n                business_phone: upserted.phone,\r\n                business_email: upserted.email,\r\n                business_logo: upserted.logo,\r\n                currency: upserted.currency,\r\n                signature: upserted.signatureImage,\r\n                metadata: upserted.metadata\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error upserting business settings:', error);\r\n        return { success: false, error: error.message || 'Failed to update settings' };\r\n    }\r\n}\r\n\r\nexport async function getAccountStatusAction(userId: string) {\r\n    try {\r\n        const user = await db.user.findUnique({\r\n            where: { id: userId },\r\n            select: {\r\n                isFrozen: true,\r\n                createdAt: true,\r\n                subscriptions: {\r\n                    where: { status: 'active' },\r\n                    orderBy: { endDate: 'desc' },\r\n                    take: 1\r\n                },\r\n                branches: {\r\n                    select: { id: true }\r\n                }\r\n            }\r\n        });\r\n\r\n        if (!user) return null;\r\n\r\n        const activeSub = user.subscriptions[0];\r\n        const now = new Date();\r\n        const daysRemaining = activeSub ? Math.ceil((activeSub.endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)) : 0;\r\n\r\n        return {\r\n            is_frozen: user.isFrozen,\r\n            location_limit: 1, // Traditional limit or from subscription\r\n            billing_amount: activeSub ? Number(activeSub.amount) : 50000,\r\n            billing_duration: 'Monthly',\r\n            days_remaining: Math.max(0, daysRemaining),\r\n            next_billing_date: activeSub?.endDate.toISOString() || ''\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching account status:', error);\r\n        return { is_frozen: false, location_limit: 1, billing_amount: 50000, billing_duration: 'Monthly', days_remaining: 30, next_billing_date: '' };\r\n    }\r\n}\r\n\r\nexport async function getOnboardingStatusAction(locationId: string) {\r\n    try {\r\n        const settings = await db.branchSettings.findUnique({\r\n            where: { branchId: locationId }\r\n        });\r\n\r\n        if (!settings) return null;\r\n\r\n        return {\r\n            id: settings.id,\r\n            location_id: settings.branchId,\r\n            business_name: settings.businessName,\r\n            business_address: settings.address,\r\n            business_phone: settings.phone,\r\n            business_email: settings.email,\r\n            business_logo: settings.logo,\r\n            completed: !!settings.businessName && !!settings.phone, // Simplified completion check\r\n            is_frozen: false // Should come from branch or user status\r\n        };\r\n    } catch (error) {\r\n        console.error('Error fetching onboarding status:', error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,6DAAA"}},
    {"offset": {"line": 1802, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettings.ts"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { getBusinessSettingsAction, upsertBusinessSettingsAction } from '@/app/actions/business-settings';\r\n\r\nexport interface BusinessSettings {\r\n  id?: string;\r\n  businessName: string;\r\n  businessAddress: string;\r\n  businessPhone: string;\r\n  businessEmail: string;\r\n  businessLogo?: string;\r\n  currency: string;\r\n  signature?: string;\r\n  paymentInfo?: string;\r\n  defaultPrintFormat?: 'standard' | 'thermal';\r\n  defaultPrinterName?: string;\r\n  defaultPrinterType?: 'USB' | 'Bluetooth';\r\n  printerPaperSize?: '58mm' | '80mm';\r\n}\r\n\r\n// Utility function to parse payment info text into structured format\r\nexport const parsePaymentInfo = (paymentInfo: string): { method: string, accountNumber: string, accountName: string }[] => {\r\n  if (!paymentInfo || paymentInfo.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  const lines = paymentInfo.split('\\n').filter(line => line.trim() !== '');\r\n  const methods: { method: string, accountNumber: string, accountName: string }[] = [];\r\n\r\n  for (let i = 0; i < lines.length; i += 3) {\r\n    if (i + 2 < lines.length) {\r\n      methods.push({\r\n        method: lines[i].trim(),\r\n        accountNumber: lines[i + 1].trim(),\r\n        accountName: lines[i + 2].trim()\r\n      });\r\n    }\r\n  }\r\n\r\n  return methods;\r\n};\r\n\r\n// Utility function to convert payment methods array back to string format\r\nexport const convertPaymentMethodsToString = (paymentMethods: { method: string, accountNumber: string, accountName: string }[]): string => {\r\n  return paymentMethods\r\n    .filter(pm => pm.method.trim() !== '' || pm.accountNumber.trim() !== '' || pm.accountName.trim() !== '')\r\n    .map(pm => `${pm.method}\\n${pm.accountNumber}\\n${pm.accountName}`)\r\n    .join('\\n');\r\n};\r\n\r\n// Default settings for new businesses\r\nconst getDefaultSettings = (): BusinessSettings => ({\r\n  businessName: '',\r\n  businessAddress: '',\r\n  businessPhone: '',\r\n  businessEmail: '',\r\n  currency: 'UGX',\r\n  paymentInfo: '',\r\n  defaultPrintFormat: 'standard'\r\n});\r\n\r\nexport const useBusinessSettings = () => {\r\n  const [settings, setSettings] = useState<BusinessSettings>(getDefaultSettings());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadSettings = async (): Promise<BusinessSettings> => {\r\n    if (!currentBusiness) {\r\n      return getDefaultSettings();\r\n    }\r\n\r\n    try {\r\n      const data = await getBusinessSettingsAction(currentBusiness.id);\r\n\r\n      if (data) {\r\n        // Extract payment info from metadata\r\n        const paymentInfo = data.metadata && typeof data.metadata === 'object' ?\r\n          (data.metadata as Record<string, unknown>).payment_info as string || '' : '';\r\n\r\n        return {\r\n          id: data.id,\r\n          businessName: data.business_name || '',\r\n          businessAddress: data.business_address || '',\r\n          businessPhone: data.business_phone || '',\r\n          businessEmail: data.business_email || '',\r\n          businessLogo: data.business_logo || undefined,\r\n          currency: data.currency || 'UGX',\r\n          signature: data.signature || undefined,\r\n          paymentInfo: paymentInfo,\r\n          defaultPrintFormat: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_print_format as 'standard' | 'thermal' || 'standard' : 'standard',\r\n          defaultPrinterName: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_name as string || '' : '',\r\n          defaultPrinterType: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).default_printer_type as 'USB' | 'Bluetooth' || 'USB' : 'USB',\r\n          printerPaperSize: data.metadata && typeof data.metadata === 'object' ?\r\n            (data.metadata as Record<string, unknown>).printer_paper_size as '58mm' | '80mm' || '58mm' : '58mm'\r\n        };\r\n      } else {\r\n        return getDefaultSettings();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return getDefaultSettings();\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (newSettings: Partial<BusinessSettings>) => {\r\n    if (!currentBusiness) {\r\n      console.error('No business selected for updating settings');\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const userData = { user: { id: '00000000-0000-0000-0000-000000000000' } }; // Mocked user id for now\r\n\r\n      // Prepare the metadata object with payment info\r\n      const metadata = {\r\n        payment_info: newSettings.hasOwnProperty('paymentInfo') ? newSettings.paymentInfo : settings.paymentInfo || '',\r\n        default_print_format: newSettings.hasOwnProperty('defaultPrintFormat') ? newSettings.defaultPrintFormat : settings.defaultPrintFormat || 'standard',\r\n        default_printer_name: newSettings.hasOwnProperty('defaultPrinterName') ? newSettings.defaultPrinterName : settings.defaultPrinterName || '',\r\n        default_printer_type: newSettings.hasOwnProperty('defaultPrinterType') ? newSettings.defaultPrinterType : settings.defaultPrinterType || 'USB',\r\n        printer_paper_size: newSettings.hasOwnProperty('printerPaperSize') ? newSettings.printerPaperSize : settings.printerPaperSize || '58mm'\r\n      };\r\n\r\n      const updateData = {\r\n        business_name: newSettings.hasOwnProperty('businessName') ? newSettings.businessName : settings.businessName,\r\n        business_address: newSettings.hasOwnProperty('businessAddress') ? newSettings.businessAddress : settings.businessAddress,\r\n        business_phone: newSettings.hasOwnProperty('businessPhone') ? newSettings.businessPhone : settings.businessPhone,\r\n        business_email: newSettings.hasOwnProperty('businessEmail') ? newSettings.businessEmail : settings.businessEmail,\r\n        business_logo: newSettings.hasOwnProperty('businessLogo') ? newSettings.businessLogo : settings.businessLogo,\r\n        currency: newSettings.hasOwnProperty('currency') ? newSettings.currency : settings.currency,\r\n        signature: newSettings.hasOwnProperty('signature') ? newSettings.signature : settings.signature,\r\n        metadata: metadata\r\n      };\r\n\r\n      const response = await upsertBusinessSettingsAction(currentBusiness.id, userData.user.id, updateData);\r\n\r\n      if (!response.success) {\r\n        console.error('Supabase error updating business settings:', response.error);\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business settings updated successfully\"\r\n      });\r\n\r\n      // Refetch settings after update\r\n      refetch();\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating business settings:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business settings. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // React Query for settings loading with proper caching\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching, refetch } = useQuery({\r\n    queryKey: ['businessSettings', currentBusiness?.id],\r\n    queryFn: loadSettings,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  // Sync React Query data with local state\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setSettings(queriedData);\r\n    } else if (!currentBusiness) {\r\n      setSettings(getDefaultSettings());\r\n    }\r\n  }, [queriedData, currentBusiness]);\r\n\r\n  // Sync loading state from React Query\r\n  useEffect(() => {\r\n    setIsLoading(isQueryLoading || isFetching);\r\n  }, [isQueryLoading, isFetching]);\r\n\r\n  return {\r\n    settings,\r\n    isLoading,\r\n    updateSettings,\r\n    loadSettings\r\n  };\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1991, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/hooks/useBusinessSettingsForm.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { toast } from 'sonner';\r\nimport {\r\n  useBusinessSettings,\r\n  parsePaymentInfo,\r\n  convertPaymentMethodsToString,\r\n  BusinessSettings\r\n} from '@/hooks/useBusinessSettings';\r\n\r\ninterface PaymentMethod {\r\n  method: string;\r\n  accountNumber: string;\r\n  accountName: string;\r\n}\r\n\r\nexport const useBusinessSettingsForm = () => {\r\n  const { settings, isLoading: settingsLoading, updateSettings } = useBusinessSettings();\r\n  const [loading, setLoading] = useState(false);\r\n  const [localSettings, setLocalSettings] = useState(settings);\r\n  const [paymentMethods, setPaymentMethods] = useState<PaymentMethod[]>([]);\r\n  const [paymentMethodsInitialized, setPaymentMethodsInitialized] = useState(false);\r\n\r\n  // Update local settings when hook settings change\r\n  useEffect(() => {\r\n    setLocalSettings(settings);\r\n    setPaymentMethodsInitialized(false);\r\n  }, [settings]);\r\n\r\n  // Parse payment methods from the payment info text\r\n  useEffect(() => {\r\n    if (!paymentMethodsInitialized) {\r\n      if (localSettings.paymentInfo) {\r\n        const parsedMethods = parsePaymentInfo(localSettings.paymentInfo);\r\n        setPaymentMethods(parsedMethods);\r\n      } else {\r\n        setPaymentMethods([]);\r\n      }\r\n      setPaymentMethodsInitialized(true);\r\n    }\r\n  }, [localSettings.paymentInfo, paymentMethodsInitialized]);\r\n\r\n  const handleBusinessChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setLocalSettings(prev => ({ ...prev, [name]: value }));\r\n  }, []);\r\n\r\n  const handleLogoChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setLocalSettings(prev => ({ ...prev, businessLogo: reader.result as string }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }, []);\r\n\r\n  const handleSignatureChange = useCallback((signature: string) => {\r\n    setLocalSettings(prev => ({ ...prev, signature }));\r\n  }, []);\r\n\r\n  const handleSignaturePadSave = useCallback(async (signatureDataUrl: string) => {\r\n    try {\r\n      const updatedSettings = { ...localSettings, signature: signatureDataUrl };\r\n      setLocalSettings(updatedSettings);\r\n      const success = await updateSettings(updatedSettings);\r\n      \r\n      if (success) {\r\n        toast.success('Business settings and signature saved successfully');\r\n      } else {\r\n        setLocalSettings(prev => ({ ...prev, signature: settings.signature }));\r\n        toast.error('Failed to save signature');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving signature:', error);\r\n      setLocalSettings(prev => ({ ...prev, signature: settings.signature }));\r\n      toast.error('Failed to save signature');\r\n    }\r\n  }, [updateSettings, settings.signature, localSettings]);\r\n\r\n  const handleRemoveSignature = useCallback(async () => {\r\n    try {\r\n      setLocalSettings(prev => ({ ...prev, signature: undefined }));\r\n      const success = await updateSettings({ signature: null });\r\n      \r\n      if (success) {\r\n        toast.success('Business signature removed successfully');\r\n      } else {\r\n        setLocalSettings(prev => ({ ...prev, signature: settings.signature }));\r\n        toast.error('Failed to remove signature');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing signature:', error);\r\n      setLocalSettings(prev => ({ ...prev, signature: settings.signature }));\r\n      toast.error('Failed to remove signature');\r\n    }\r\n  }, [updateSettings, settings.signature]);\r\n\r\n  const handlePaymentMethodChange = useCallback((index: number, field: 'method' | 'accountNumber' | 'accountName', value: string) => {\r\n    const updatedPaymentMethods = [...paymentMethods];\r\n    updatedPaymentMethods[index] = {\r\n      ...updatedPaymentMethods[index],\r\n      [field]: value\r\n    };\r\n    setPaymentMethods(updatedPaymentMethods);\r\n    \r\n    const newPaymentInfoStr = convertPaymentMethodsToString(updatedPaymentMethods);\r\n    setLocalSettings(prev => ({ ...prev, paymentInfo: newPaymentInfoStr }));\r\n  }, [paymentMethods]);\r\n\r\n  const addPaymentMethod = useCallback(() => {\r\n    const newPaymentMethods = [...paymentMethods, { method: '', accountNumber: '', accountName: '' }];\r\n    setPaymentMethods(newPaymentMethods);\r\n    \r\n    const newPaymentInfoStr = convertPaymentMethodsToString(newPaymentMethods);\r\n    setLocalSettings(prev => ({ ...prev, paymentInfo: newPaymentInfoStr }));\r\n  }, [paymentMethods]);\r\n\r\n  const removePaymentMethod = useCallback((index: number) => {\r\n    const updatedPaymentMethods = [...paymentMethods];\r\n    updatedPaymentMethods.splice(index, 1);\r\n    setPaymentMethods(updatedPaymentMethods);\r\n    \r\n    const newPaymentInfoStr = convertPaymentMethodsToString(updatedPaymentMethods);\r\n    setLocalSettings(prev => ({ ...prev, paymentInfo: newPaymentInfoStr }));\r\n  }, [paymentMethods]);\r\n\r\n  const saveBusinessSettings = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const success = await updateSettings(localSettings);\r\n      if (success) {\r\n        toast.success('Business settings saved successfully!');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving business settings:', error);\r\n      toast.error('Failed to save business settings');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [localSettings, updateSettings]);\r\n\r\n  return {\r\n    // State\r\n    localSettings,\r\n    paymentMethods,\r\n    loading,\r\n    settingsLoading,\r\n\r\n    // Handlers\r\n    handleBusinessChange,\r\n    handleLogoChange,\r\n    handleSignatureChange,\r\n    handleSignaturePadSave,\r\n    handleRemoveSignature,\r\n    handlePaymentMethodChange,\r\n    addPaymentMethod,\r\n    removePaymentMethod,\r\n    saveBusinessSettings,\r\n  };\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/ui/badge.tsx"],"sourcesContent":["\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n        warning:\r\n          \"border-transparent bg-amber-500 text-white hover:bg-amber-600\",\r\n        success:\r\n          \"border-transparent bg-green-600 text-white hover:bg-green-700\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 2247, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/settings/PrinterBridgeSettings.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Download, RefreshCw, Printer, ExternalLink, CheckCircle2, AlertCircle, Settings2, Loader2 } from 'lucide-react';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\n\r\ninterface PrinterDevice {\r\n    name: string;\r\n    type?: string;\r\n    status?: string;\r\n    isOnline?: boolean;\r\n    message?: string;\r\n}\r\n\r\nconst PrinterBridgeSettings: React.FC = () => {\r\n    const { toast } = useToast();\r\n    const { settings, updateSettings } = useBusinessSettings();\r\n    const [isScanning, setIsScanning] = useState(false);\r\n    const [updatingPrinter, setUpdatingPrinter] = useState<string | null>(null);\r\n    const [printers, setPrinters] = useState<PrinterDevice[]>([]);\r\n    const [bridgeStatus, setBridgeStatus] = useState<'online' | 'offline' | 'checking'>('checking');\r\n\r\n    const checkBridgeStatus = async () => {\r\n        const addresses = ['http://localhost:5000', 'http://127.0.0.1:5000'];\r\n\r\n        for (const addr of addresses) {\r\n            try {\r\n                const response = await fetch(`${addr}/printers`, {\r\n                    signal: AbortSignal.timeout(3000),\r\n                    mode: 'cors'\r\n                });\r\n                if (response.ok) {\r\n                    setBridgeStatus('online');\r\n                    const data = await response.json();\r\n                    setPrinters(data || []);\r\n                    return; // Found it!\r\n                }\r\n            } catch (error) {\r\n                // Continue to next address\r\n            }\r\n        }\r\n        setBridgeStatus('offline');\r\n    };\r\n\r\n    useEffect(() => {\r\n        checkBridgeStatus();\r\n        const interval = setInterval(checkBridgeStatus, 10000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleScanDevices = async () => {\r\n        setIsScanning(true);\r\n        try {\r\n            const response = await fetch('http://localhost:5000/printers');\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setPrinters(data || []);\r\n                setBridgeStatus('online');\r\n                toast({\r\n                    title: \"Scan complete\",\r\n                    description: `Found ${data.length} printers.`,\r\n                });\r\n            } else {\r\n                throw new Error('Bridge offline');\r\n            }\r\n        } catch (error) {\r\n            setBridgeStatus('offline');\r\n            toast({\r\n                title: \"Scan failed\",\r\n                description: \"Could not connect to Printer Bridge. Make sure it is installed and running.\",\r\n                variant: \"destructive\"\r\n            });\r\n        } finally {\r\n            setIsScanning(false);\r\n        }\r\n    };\r\n\r\n    const handleSetDefaultPrinter = async (printerName: string) => {\r\n        setUpdatingPrinter(printerName);\r\n        try {\r\n            // Cast to any to avoid complex Partial issues if hook type hasn't fully propagated in IDE\r\n            const success = await (updateSettings as any)({\r\n                defaultPrinterName: printerName\r\n            });\r\n            if (success) {\r\n                toast({\r\n                    title: \"Default printer updated\",\r\n                    description: `${printerName} is now your default printer.`,\r\n                });\r\n            }\r\n        } finally {\r\n            setUpdatingPrinter(null);\r\n        }\r\n    };\r\n\r\n    const handleDownloadBridge = () => {\r\n        window.open('/PrinterBridge-Setup.zip', '_blank');\r\n    };\r\n\r\n    const handleOpenGuide = () => {\r\n        window.open('/PRINTER-BRIDGE-GUIDE.pdf', '_blank');\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <div className=\"flex justify-between items-start\">\r\n                    <div>\r\n                        <CardTitle className=\"text-xl flex items-center gap-2\">\r\n                            Printer Bridge\r\n                            {bridgeStatus === 'online' ? (\r\n                                <Badge variant=\"success\" className=\"bg-green-500 hover:bg-green-600\">Connected</Badge>\r\n                            ) : bridgeStatus === 'offline' ? (\r\n                                <Badge variant=\"destructive\">Offline</Badge>\r\n                            ) : (\r\n                                <Badge variant=\"secondary\">Checking...</Badge>\r\n                            )}\r\n                        </CardTitle>\r\n                        <CardDescription>\r\n                            Connect to local thermal printers and barcode label printers.\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={handleOpenGuide} className=\"gap-2\">\r\n                        <ExternalLink className=\"h-4 w-4\" />\r\n                        Guide\r\n                    </Button>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n                <div className=\"bg-muted/30 p-4 rounded-lg border border-dashed text-center\">\r\n                    <h4 className=\"font-medium mb-2\">Need the Printer Bridge app?</h4>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">\r\n                        Download and install our bridge service to enable high-speed local printing.\r\n                    </p>\r\n                    <div className=\"flex flex-wrap justify-center gap-3\">\r\n                        <Button onClick={handleDownloadBridge} className=\"gap-2 bg-blue-600 hover:bg-blue-700\">\r\n                            <Download className=\"h-4 w-4\" />\r\n                            Download Printer Bridge\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            className=\"gap-2 border-blue-200 hover:bg-blue-50 hover:text-blue-700\"\r\n                            onClick={() => window.open('https://drive.google.com/drive/folders/1xWpU63y1tKVnTVF5ftNVyhL82oR_EjnG?usp=sharing', '_blank')}\r\n                        >\r\n                            <ExternalLink className=\"h-4 w-4\" />\r\n                            Download Drivers\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4 border-b pb-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <Settings2 className=\"h-5 w-5 text-gray-500\" />\r\n                        <h4 className=\"font-semibold text-base\">Configuration</h4>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"paper-size\">Thermal Paper Size</Label>\r\n                            <Select\r\n                                value={settings.printerPaperSize || '58mm'}\r\n                                onValueChange={(value) => (updateSettings as any)({ printerPaperSize: value })}\r\n                            >\r\n                                <SelectTrigger id=\"paper-size\">\r\n                                    <SelectValue placeholder=\"Select paper size\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"58mm\">58mm (Standard Receipt)</SelectItem>\r\n                                    <SelectItem value=\"80mm\">80mm (Wide Receipt)</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                                58mm aligns left. 80mm centers content.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <Label className=\"text-base font-semibold\">Connected Printers</Label>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={handleScanDevices}\r\n                            disabled={isScanning}\r\n                            className=\"gap-2\"\r\n                        >\r\n                            <RefreshCw className={`h-4 w-4 ${isScanning ? 'animate-spin' : ''}`} />\r\n                            Scan\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {bridgeStatus === 'offline' ? (\r\n                        <div className=\"space-y-3\">\r\n                            <div className=\"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-md text-sm\">\r\n                                <AlertCircle className=\"h-4 w-4\" />\r\n                                Bridge service is not responding.\r\n                            </div>\r\n                            <div className=\"text-xs space-y-2 p-3 bg-muted rounded-md border\">\r\n                                <p className=\"font-semibold\">Troubleshooting Steps:</p>\r\n                                <ol className=\"list-decimal ml-4 space-y-1\">\r\n                                    <li>Ensure the Printer Bridge app is open and shows \"Server running on port 5000\".</li>\r\n                                    <li>If using Chrome, try opening <a href=\"http://localhost:5000/printers\" target=\"_blank\" className=\"text-blue-600 underline\">this link</a> manually. If it works there but not here, it's a browser security block.</li>\r\n                                    <li>Try restarting the bridge app.</li>\r\n                                </ol>\r\n                            </div>\r\n                        </div>\r\n                    ) : printers.length === 0 ? (\r\n                        <div className=\"text-sm text-muted-foreground text-center py-4 border rounded-md italic\">\r\n                            No printers found. Make sure your printers are turned on and connected to your computer.\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid gap-2\">\r\n                            {printers.map((printer) => (\r\n                                <div\r\n                                    key={printer.name}\r\n                                    className={`flex items-center justify-between p-3 border rounded-md ${settings.defaultPrinterName === printer.name ? 'bg-secondary/20 border-secondary' : 'bg-card'\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <Printer className={`h-5 w-5 ${settings.defaultPrinterName === printer.name ? 'text-secondary' : 'text-muted-foreground'}`} />\r\n                                        <div>\r\n                                            <p className=\"font-medium text-sm\">{printer.name}</p>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {settings.defaultPrinterName === printer.name && (\r\n                                                    <p className=\"text-xs text-secondary-foreground flex items-center gap-1\">\r\n                                                        <CheckCircle2 className=\"h-3 w-3\" /> Default\r\n                                                    </p>\r\n                                                )}\r\n                                                {printer.status && (\r\n                                                    <Badge variant=\"outline\" className=\"text-[10px] h-4 px-1\">\r\n                                                        {printer.status}\r\n                                                    </Badge>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    {settings.defaultPrinterName !== printer.name && (\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"icon\"\r\n                                            onClick={() => handleSetDefaultPrinter(printer.name)}\r\n                                            disabled={updatingPrinter !== null}\r\n                                            title=\"Set Default\"\r\n                                        >\r\n                                            {updatingPrinter === printer.name ? (\r\n                                                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                            ) : (\r\n                                                <CheckCircle2 className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default PrinterBridgeSettings;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2900, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/FINAL/src/components/BusinessSettings.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useAuth } from './auth/AuthProvider';\r\nimport BusinessProfileForm from '@/components/settings/BusinessProfileForm';\r\nimport PaymentMethodsManager from '@/components/settings/PaymentMethodsManager';\r\nimport SignatureManager from '@/components/settings/SignatureManager';\r\nimport PrivacySettings from '@/components/settings/PrivacySettings';\r\nimport { useBusinessSettingsForm } from '@/hooks/useBusinessSettingsForm';\r\nimport PrinterBridgeSettings from '@/components/settings/PrinterBridgeSettings';\r\n\r\n\r\nconst BusinessSettings = () => {\r\n  const { user } = useAuth();\r\n  const {\r\n    localSettings,\r\n    paymentMethods,\r\n    loading,\r\n    settingsLoading,\r\n    handleBusinessChange,\r\n    handleLogoChange,\r\n    handleSignatureChange,\r\n    handleSignaturePadSave,\r\n    handleRemoveSignature,\r\n    handlePaymentMethodChange,\r\n    addPaymentMethod,\r\n    removePaymentMethod,\r\n    saveBusinessSettings,\r\n  } = useBusinessSettingsForm();\r\n\r\n  if (!user) {\r\n    return <div className=\"text-center py-8\">Please log in to access settings</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto space-y-6\">\r\n      {settingsLoading ? (\r\n        <Card>\r\n          <CardContent className=\"flex justify-center py-8\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <>\r\n          <BusinessProfileForm\r\n            settings={localSettings}\r\n            onSettingsChange={handleBusinessChange}\r\n            onLogoChange={handleLogoChange}\r\n          />\r\n\r\n          <SignatureManager\r\n            signature={localSettings.signature}\r\n            onSignatureChange={handleSignatureChange}\r\n            onSignaturePadSave={handleSignaturePadSave}\r\n            onRemoveSignature={handleRemoveSignature}\r\n          />\r\n\r\n          <PaymentMethodsManager\r\n            paymentMethods={paymentMethods}\r\n            onPaymentMethodChange={handlePaymentMethodChange}\r\n            onAddPaymentMethod={addPaymentMethod}\r\n            onRemovePaymentMethod={removePaymentMethod}\r\n          />\r\n\r\n          <PrinterBridgeSettings />\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Account Information</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\">Account Email Address</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  value={user?.email || ''}\r\n                  readOnly\r\n                  disabled\r\n                  className=\"bg-muted\"\r\n                />\r\n                <p className=\"text-xs text-muted-foreground\">Email cannot be changed</p>\r\n              </div>\r\n\r\n              <Button\r\n                onClick={saveBusinessSettings}\r\n                className=\"w-full\"\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    Saving...\r\n                  </>\r\n                ) : (\r\n                  'Save Business Settings'\r\n                )}\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <PrivacySettings onRequestDataDeletion={() => {\r\n            const subject = encodeURIComponent(`Data Deletion Request - ${user?.email}`);\r\n            const body = encodeURIComponent(\r\n              `Hello,\\n\\nI would like to request deletion of all my data associated with the account ${user?.email}.\\n\\nThank you.`\r\n            );\r\n            const mailtoUrl = `mailto:gonzabrands@gmail.com?subject=${subject}&body=${body}`;\r\n            window.location.href = mailtoUrl;\r\n            toast.success('Email client opened for data deletion request');\r\n          }} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusinessSettings;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAGA,MAAM,mBAAmB;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qJAAO;IACxB,MAAM,EACJ,aAAa,EACb,cAAc,EACd,OAAO,EACP,eAAe,EACf,oBAAoB,EACpB,gBAAgB,EAChB,qBAAqB,EACrB,sBAAsB,EACtB,qBAAqB,EACrB,yBAAyB,EACzB,gBAAgB,EAChB,mBAAmB,EACnB,oBAAoB,EACrB,GAAG,IAAA,kKAAuB;IAE3B,IAAI,CAAC,MAAM;QACT,qBAAO,8OAAC;YAAI,WAAU;sBAAmB;;;;;;IAC3C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,gCACC,8OAAC,wIAAI;sBACH,cAAA,8OAAC,+IAAW;gBAAC,WAAU;0BACrB,cAAA,8OAAC,4NAAO;oBAAC,WAAU;;;;;;;;;;;;;;;qEAIvB;;8BACE,8OAAC,gKAAmB;oBAClB,UAAU;oBACV,kBAAkB;oBAClB,cAAc;;;;;;8BAGhB,8OAAC,6JAAgB;oBACf,WAAW,cAAc,SAAS;oBAClC,mBAAmB;oBACnB,oBAAoB;oBACpB,mBAAmB;;;;;;8BAGrB,8OAAC,kKAAqB;oBACpB,gBAAgB;oBAChB,uBAAuB;oBACvB,oBAAoB;oBACpB,uBAAuB;;;;;;8BAGzB,8OAAC,kKAAqB;;;;;8BAEtB,8OAAC,wIAAI;;sCACH,8OAAC,8IAAU;sCACT,cAAA,8OAAC,6IAAS;0CAAC;;;;;;;;;;;sCAEb,8OAAC,+IAAW;4BAAC,WAAU;;8CACrB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,0IAAK;4CAAC,SAAQ;sDAAQ;;;;;;sDACvB,8OAAC,0IAAK;4CACJ,IAAG;4CACH,OAAO,MAAM,SAAS;4CACtB,QAAQ;4CACR,QAAQ;4CACR,WAAU;;;;;;sDAEZ,8OAAC;4CAAE,WAAU;sDAAgC;;;;;;;;;;;;8CAG/C,8OAAC,4IAAM;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CAET,wBACC;;0DACE,8OAAC,4NAAO;gDAAC,WAAU;;;;;;4CAA8B;;uDAInD;;;;;;;;;;;;;;;;;;8BAMR,8OAAC,4JAAe;oBAAC,uBAAuB;wBACtC,MAAM,UAAU,mBAAmB,CAAC,wBAAwB,EAAE,MAAM,OAAO;wBAC3E,MAAM,OAAO,mBACX,CAAC,sFAAsF,EAAE,MAAM,MAAM,eAAe,CAAC;wBAEvH,MAAM,YAAY,CAAC,qCAAqC,EAAE,QAAQ,MAAM,EAAE,MAAM;wBAChF,OAAO,QAAQ,CAAC,IAAI,GAAG;wBACvB,iJAAK,CAAC,OAAO,CAAC;oBAChB;;;;;;;;;;;;;AAKV;uCAEe"}}]
}