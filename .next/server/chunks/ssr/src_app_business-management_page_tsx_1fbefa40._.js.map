{"version":3,"sources":["../../../../src/app/business-management/page.tsx","../../../../src/app/actions/data%3Af6ae93%20%3Ctext/javascript%3E","../../../../src/components/business/RestoreDialog.tsx","../../../../src/components/business/NewBusinessDialog.tsx","../../../../src/hooks/useBusinessBackup.ts","../../../../src/components/business/BusinessPasswordManager.tsx","../../../../node_modules/lucide-react/src/icons/shield-off.ts","../../../../src/components/business/BackupDialog.tsx","../../../../src/components/business/ResetBusinessDialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Plus, Building2, Settings, Trash2, Pencil, Check, RotateCcw, Download, Upload, Lock, Shield } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\n\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { NewBusinessDialog } from '@/components/business/NewBusinessDialog';\r\nimport { ResetBusinessDialog } from '@/components/business/ResetBusinessDialog';\r\nimport { BackupDialog } from '@/components/business/BackupDialog';\r\nimport { RestoreDialog } from '@/components/business/RestoreDialog';\r\nimport { BusinessPasswordDialog } from '@/components/business/BusinessPasswordDialog';\r\nimport { BusinessPasswordManager } from '@/components/business/BusinessPasswordManager';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useBusinessPassword } from '@/hooks/useBusinessPassword';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\n\r\nconst BusinessManagement = () => {\r\n  const { businessLocations, currentBusiness, switchBusiness, updateBusiness, deleteBusiness, resetBusiness, locationLimit } = useBusiness();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n  const {\r\n    setBusinessPassword,\r\n    verifyBusinessPassword,\r\n    removeBusinessPassword,\r\n    isLoading: passwordLoading\r\n  } = useBusinessPassword();\r\n  const { hasPermission } = useProfiles();\r\n  const canManage = hasPermission('settings', 'manage');\r\n  const [showNewDialog, setShowNewDialog] = useState(false);\r\n  const [showLimitDialog, setShowLimitDialog] = useState(false);\r\n  const [showBackupDialog, setShowBackupDialog] = useState(false);\r\n  const [showRestoreDialog, setShowRestoreDialog] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editingName, setEditingName] = useState('');\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n  const [resettingId, setResettingId] = useState<string | null>(null);\r\n  const [isResetting, setIsResetting] = useState(false);\r\n\r\n  // Password protection states\r\n  const [showPasswordDialog, setShowPasswordDialog] = useState(false);\r\n  const [showPasswordManager, setShowPasswordManager] = useState(false);\r\n  const [passwordPromptData, setPasswordPromptData] = useState<{\r\n    businessId: string;\r\n    businessName: string;\r\n    onVerified: () => void;\r\n  } | null>(null);\r\n  const [managingPasswordBusinessId, setManagingPasswordBusinessId] = useState<string | null>(null);\r\n\r\n  const handleStartEdit = (id: string, currentName: string) => {\r\n    setEditingId(id);\r\n    setEditingName(currentName);\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (!editingId || !editingName.trim()) return;\r\n\r\n    const success = await updateBusiness(editingId, editingName.trim());\r\n\r\n    if (success) {\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business name updated successfully\",\r\n      });\r\n      setEditingId(null);\r\n      setEditingName('');\r\n    } else {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update business name\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditingName('');\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!deletingId) return;\r\n\r\n    const success = await deleteBusiness(deletingId);\r\n\r\n    if (success) {\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Business deleted successfully\",\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete business\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n\r\n    setDeletingId(null);\r\n  };\r\n\r\n  const handleSwitchBusiness = (businessId: string) => {\r\n    switchBusiness(businessId, (businessId, businessName, onVerified) => {\r\n      setPasswordPromptData({ businessId, businessName, onVerified });\r\n      setShowPasswordDialog(true);\r\n    });\r\n  };\r\n\r\n  const handlePasswordVerified = () => {\r\n    if (passwordPromptData) {\r\n      passwordPromptData.onVerified();\r\n      toast({\r\n        title: \"Business Switched\",\r\n        description: \"You are now working with the selected business\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePasswordManagerOpen = (businessId: string) => {\r\n    setManagingPasswordBusinessId(businessId);\r\n    setShowPasswordManager(true);\r\n  };\r\n\r\n  const handlePasswordSet = (businessId: string, hasPassword: boolean) => {\r\n    // Update the business location in the state to reflect password change\r\n    const updatedLocations = businessLocations.map(location =>\r\n      location.id === businessId\r\n        ? { ...location, switch_password_hash: hasPassword ? 'has_password' : undefined }\r\n        : location\r\n    );\r\n    // This is a local state update - the actual data will be refreshed on next load\r\n  };\r\n\r\n  const handleReset = async () => {\r\n    if (!resettingId) return;\r\n\r\n    setIsResetting(true);\r\n    console.log('Starting reset for business:', resettingId);\r\n\r\n    try {\r\n      const success = await resetBusiness(resettingId);\r\n\r\n      if (success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Business location has been reset successfully\",\r\n        });\r\n        console.log('Reset completed successfully');\r\n        // Reload the page after successful reset\r\n        setTimeout(() => window.location.reload(), 1500);\r\n      } else {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Failed to reset business location\",\r\n          variant: \"destructive\"\r\n        });\r\n        console.error('Reset failed');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error during reset:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to reset business location\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setResettingId(null);\r\n      setIsResetting(false);\r\n    }\r\n  };\r\n\r\n  const getResettingBusinessName = () => {\r\n    const business = businessLocations.find(b => b.id === resettingId);\r\n    return business?.name || '';\r\n  };\r\n\r\n\r\n  const handleCreateNewClick = () => {\r\n    if (businessLocations.length >= locationLimit) {\r\n      setShowLimitDialog(true);\r\n    } else {\r\n      setShowNewDialog(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 relative\">\r\n      {/* Reset Progress Overlay */}\r\n      {isResetting && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center\">\r\n          <div className=\"bg-white rounded-lg p-6 shadow-xl max-w-sm mx-4 w-full\">\r\n            <div className=\"text-center space-y-4\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Resetting Business</h3>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Clearing all data for \"{getResettingBusinessName()}\"...\r\n                <br />\r\n                <span className=\"text-xs text-gray-500 mt-1 block\">\r\n                  Please don't close this window. This may take a few moments.\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className={isResetting ? \"pointer-events-none opacity-50\" : \"\"}>\r\n        {/* Header */}\r\n        <div className=\"space-y-3 md:space-y-2\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n            <div>\r\n              <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900\">Business Management</h1>\r\n              <p className=\"text-sm md:text-base text-gray-600 mt-1\">Manage your business locations and settings</p>\r\n            </div>\r\n            <div className=\"flex flex-col md:flex-row gap-2\">\r\n              <div className=\"flex gap-2\">\r\n                {canManage && (\r\n                  <Button\r\n                    onClick={() => setShowBackupDialog(true)}\r\n                    variant=\"outline\"\r\n                    className=\"flex-1 md:flex-none flex items-center justify-center gap-2\"\r\n                    size={isMobile ? \"default\" : \"default\"}\r\n                    disabled={!currentBusiness || isResetting}\r\n                  >\r\n                    <Download className=\"h-4 w-4\" />\r\n                    {isMobile ? 'Backup' : 'Backup Data'}\r\n                  </Button>\r\n                )}\r\n                {canManage && (\r\n                  <Button\r\n                    onClick={() => setShowRestoreDialog(true)}\r\n                    variant=\"outline\"\r\n                    className=\"flex-1 md:flex-none flex items-center justify-center gap-2\"\r\n                    size={isMobile ? \"default\" : \"default\"}\r\n                    disabled={!currentBusiness || isResetting}\r\n                  >\r\n                    <Upload className=\"h-4 w-4\" />\r\n                    {isMobile ? 'Restore' : 'Restore Data'}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              {canManage && (\r\n                <Button\r\n                  onClick={handleCreateNewClick}\r\n                  className=\"w-full md:w-auto flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700\"\r\n                  size={isMobile ? \"default\" : \"default\"}\r\n                  disabled={isResetting}\r\n                >\r\n                  <Plus className=\"h-4 w-4\" />\r\n                  Create New Business\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Current Business */}\r\n        {currentBusiness && (\r\n          <Card className=\"border-blue-200 bg-gradient-to-r from-blue-50 to-blue-100/50\">\r\n            <CardHeader className=\"pb-3\">\r\n              <CardTitle className=\"flex items-center gap-2 text-blue-800 text-lg md:text-xl\">\r\n                <div className=\"p-2 bg-blue-200 rounded-lg\">\r\n                  <Building2 className=\"h-5 w-5\" />\r\n                </div>\r\n                Current Business\r\n              </CardTitle>\r\n              <CardDescription className=\"text-blue-600 text-sm\">\r\n                You are currently working with this business\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"pt-0\">\r\n              <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n                <div className=\"space-y-1\">\r\n                  <h3 className=\"font-semibold text-lg md:text-xl text-blue-900\">{currentBusiness.name}</h3>\r\n                  <p className=\"text-sm text-blue-600\">\r\n                    Created: {new Date(currentBusiness.created_at).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 flex-wrap\">\r\n                  {currentBusiness.is_default && (\r\n                    <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-700 text-xs\">\r\n                      Default\r\n                    </Badge>\r\n                  )}\r\n                  <Badge className=\"bg-green-500 text-white text-xs\">\r\n                    Active\r\n                  </Badge>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* All Businesses */}\r\n        <Card className=\"shadow-sm\">\r\n          <CardHeader className=\"pb-4\">\r\n            <CardTitle className=\"text-lg md:text-xl\">All Businesses</CardTitle>\r\n            <CardDescription className=\"text-sm\">\r\n              Manage your business locations. You can switch between them, edit their names, reset them, or delete them.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {businessLocations.length === 0 ? (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center\">\r\n                    <Building2 className=\"h-10 w-10 text-gray-400\" />\r\n                  </div>\r\n                  <p className=\"text-gray-600 font-medium\">No businesses found</p>\r\n                  <p className=\"text-sm text-gray-400 mt-1\">Create your first business to get started</p>\r\n                </div>\r\n              ) : (\r\n                businessLocations.map((business) => (\r\n                  <div\r\n                    key={business.id}\r\n                    className={`p-4 border rounded-xl transition-all ${currentBusiness?.id === business.id\r\n                      ? 'border-blue-300 bg-blue-50/50 shadow-sm'\r\n                      : 'border-gray-200 bg-white hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-3\">\r\n                      <div className=\"flex items-start gap-3 flex-1\">\r\n                        <div className={`p-2 rounded-lg ${currentBusiness?.id === business.id ? 'bg-blue-200' : 'bg-gray-100'\r\n                          }`}>\r\n                          <Building2 className=\"h-5 w-5 text-gray-600\" />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          {editingId === business.id ? (\r\n                            <div className=\"space-y-2\">\r\n                              <Label htmlFor={`edit-${business.id}`} className=\"text-sm font-medium\">Business Name</Label>\r\n                              <Input\r\n                                id={`edit-${business.id}`}\r\n                                value={editingName}\r\n                                onChange={(e) => setEditingName(e.target.value)}\r\n                                className=\"h-9\"\r\n                                onKeyDown={(e) => {\r\n                                  if (e.key === 'Enter') handleSaveEdit();\r\n                                  if (e.key === 'Escape') handleCancelEdit();\r\n                                }}\r\n                                autoFocus\r\n                              />\r\n                            </div>\r\n                          ) : (\r\n                            <>\r\n                              <div className=\"flex items-center gap-2 flex-wrap mb-1\">\r\n                                <h4 className=\"font-semibold text-gray-900 text-base\">{business.name}</h4>\r\n                                {business.switch_password_hash && (\r\n                                  <Lock className=\"h-4 w-4 text-amber-500\" />\r\n                                )}\r\n                                {business.is_default && (\r\n                                  <Badge variant=\"outline\" className=\"text-xs\">\r\n                                    Default\r\n                                  </Badge>\r\n                                )}\r\n                                {currentBusiness?.id === business.id && (\r\n                                  <Badge className=\"text-xs bg-green-500 text-white\">\r\n                                    Current\r\n                                  </Badge>\r\n                                )}\r\n                              </div>\r\n                              <p className=\"text-sm text-gray-500\">\r\n                                Created: {new Date(business.created_at).toLocaleDateString()}\r\n                                {business.switch_password_hash && (\r\n                                  <span className=\"text-amber-600 ml-2\">â€¢ Password Protected</span>\r\n                                )}\r\n                              </p>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2 md:flex-shrink-0\">\r\n                        {editingId === business.id ? (\r\n                          <div className=\"flex gap-2 w-full md:w-auto\">\r\n                            <Button size=\"sm\" onClick={handleSaveEdit} className=\"flex-1 md:flex-none\">\r\n                              <Check className=\"h-4 w-4 md:mr-1\" />\r\n                              <span className=\"md:inline\">Save</span>\r\n                            </Button>\r\n                            <Button size=\"sm\" variant=\"outline\" onClick={handleCancelEdit} className=\"flex-1 md:flex-none\">\r\n                              Cancel\r\n                            </Button>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"flex gap-2 w-full md:w-auto\">\r\n                            {currentBusiness?.id !== business.id && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleSwitchBusiness(business.id)}\r\n                                className=\"flex-1 md:flex-none text-sm\"\r\n                                disabled={isResetting}\r\n                              >\r\n                                Switch To\r\n                              </Button>\r\n                            )}\r\n                            {canManage && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => handleStartEdit(business.id, business.name)}\r\n                                className=\"p-2\"\r\n                                disabled={isResetting}\r\n                              >\r\n                                <Pencil className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                            {canManage && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => handlePasswordManagerOpen(business.id)}\r\n                                className=\"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n                                title={business.switch_password_hash ? \"Manage Password\" : \"Set Password\"}\r\n                                disabled={isResetting}\r\n                              >\r\n                                <Shield className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                            {canManage && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => setResettingId(business.id)}\r\n                                className=\"p-2 text-amber-600 hover:text-amber-700 hover:bg-amber-50\"\r\n                                disabled={isResetting}\r\n                              >\r\n                                <RotateCcw className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                            {!business.is_default && canManage && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => setDeletingId(business.id)}\r\n                                className=\"p-2 text-red-600 hover:text-red-700 hover:bg-red-50\"\r\n                                disabled={isResetting}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* New Business Dialog */}\r\n      <NewBusinessDialog\r\n        open={showNewDialog}\r\n        onOpenChange={setShowNewDialog}\r\n      />\r\n\r\n      {/* Backup Dialog */}\r\n      <BackupDialog\r\n        open={showBackupDialog}\r\n        onOpenChange={setShowBackupDialog}\r\n      />\r\n\r\n      {/* Restore Dialog */}\r\n      <RestoreDialog\r\n        open={showRestoreDialog}\r\n        onOpenChange={setShowRestoreDialog}\r\n      />\r\n\r\n      {/* Reset Business Dialog */}\r\n      <ResetBusinessDialog\r\n        open={!!resettingId}\r\n        onOpenChange={() => setResettingId(null)}\r\n        onConfirm={handleReset}\r\n        businessName={getResettingBusinessName()}\r\n      />\r\n\r\n      {/* Password Dialog */}\r\n      <BusinessPasswordDialog\r\n        open={showPasswordDialog}\r\n        onOpenChange={setShowPasswordDialog}\r\n        businessName={passwordPromptData?.businessName || ''}\r\n        onPasswordVerified={handlePasswordVerified}\r\n        onVerifyPassword={async (password) => {\r\n          if (passwordPromptData) {\r\n            return await verifyBusinessPassword(passwordPromptData.businessId, password);\r\n          }\r\n          return false;\r\n        }}\r\n      />\r\n\r\n      {/* Password Manager Dialog */}\r\n      {managingPasswordBusinessId && (\r\n        <BusinessPasswordManager\r\n          open={showPasswordManager}\r\n          onOpenChange={setShowPasswordManager}\r\n          businessId={managingPasswordBusinessId}\r\n          businessName={businessLocations.find(b => b.id === managingPasswordBusinessId)?.name || ''}\r\n          hasPassword={!!businessLocations.find(b => b.id === managingPasswordBusinessId)?.switch_password_hash}\r\n          onPasswordSet={handlePasswordSet}\r\n          onSetPassword={setBusinessPassword}\r\n          onRemovePassword={async (businessId: string, currentPassword: string) => {\r\n            // First verify the password\r\n            const isVerified = await verifyBusinessPassword(businessId, currentPassword);\r\n            if (isVerified) {\r\n              return await removeBusinessPassword(businessId);\r\n            }\r\n            return false;\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={!!deletingId} onOpenChange={() => setDeletingId(null)}>\r\n        <AlertDialogContent className=\"mx-4 max-w-md\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Business</AlertDialogTitle>\r\n            <AlertDialogDescription className=\"text-sm\">\r\n              Are you sure you want to delete this business? This action cannot be undone\r\n              and will permanently delete all associated data including products, sales,\r\n              customers, and expenses.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter className=\"flex-col-reverse md:flex-row gap-2\">\r\n            <AlertDialogCancel className=\"w-full md:w-auto\">Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete} className=\"w-full md:w-auto bg-red-600 hover:bg-red-700\">\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Location Limit Dialog - Using AlertDialog for better visibility */}\r\n      <AlertDialog open={showLimitDialog} onOpenChange={setShowLimitDialog}>\r\n        <AlertDialogContent className=\"mx-4 max-w-md\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"flex items-center gap-2 text-amber-600\">\r\n              <Shield className=\"h-5 w-5\" />\r\n              Location Limit Reached\r\n            </AlertDialogTitle>\r\n            <AlertDialogDescription className=\"text-sm pt-2\">\r\n              <div className=\"space-y-4\">\r\n                <p className=\"font-medium text-foreground\">\r\n                  You have reached the maximum allowed limit of <span className=\"font-bold text-amber-600\">{locationLimit} locations</span>.\r\n                </p>\r\n                <div className=\"bg-muted/50 p-4 rounded-lg border border-border/50 text-sm space-y-2\">\r\n                  <p>To add more locations, please contact Admin support:</p>\r\n                  <a href=\"tel:+256758519696\" className=\"block text-primary font-bold text-lg hover:underline\">+256 758519696</a>\r\n                  <p className=\"text-xs text-muted-foreground italic\">Note: Additional charges may apply for increasing your location limit.</p>\r\n                </div>\r\n              </div>\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel className=\"w-full\">Close</AlertDialogCancel>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusinessManagement;\r\n","/* __next_internal_action_entry_do_not_use__ [{\"60cb37a955a3f0fc9842da415e4b6b6c26c486a212\":\"getBusinessBackupDataAction\"},\"src/app/actions/expenses.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"60cb37a955a3f0fc9842da415e4b6b6c26c486a212\",callServer,void 0,findSourceMapURL,\"getBusinessBackupDataAction\");export{$$RSC_SERVER_ACTION_1 as getBusinessBackupDataAction};","import React, { useRef, useState } from 'react';\r\nimport { Upload, AlertTriangle } from 'lucide-react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { useBusinessBackup } from '@/hooks/useBusinessBackup';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\n\r\ninterface RestoreDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const RestoreDialog: React.FC<RestoreDialogProps> = ({ open, onOpenChange }) => {\r\n  const { importBusinessData, isImporting, progress } = useBusinessBackup();\r\n  const { currentBusiness } = useBusiness();\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      if (file.type === 'application/json' || file.name.endsWith('.json')) {\r\n        setSelectedFile(file);\r\n        setShowWarning(true);\r\n      } else {\r\n        alert('Please select a valid JSON backup file');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    if (!selectedFile) return;\r\n    \r\n    const success = await importBusinessData(selectedFile);\r\n    if (success) {\r\n      onOpenChange(false);\r\n      setSelectedFile(null);\r\n      setShowWarning(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onOpenChange(false);\r\n    setSelectedFile(null);\r\n    setShowWarning(false);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleCancel}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Upload className=\"h-5 w-5\" />\r\n            Restore Business Data\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Import business data from a backup file. This will replace all current data.\r\n            {currentBusiness && (\r\n              <span className=\"block mt-2 font-medium text-foreground\">\r\n                Target Business: {currentBusiness.name}\r\n              </span>\r\n            )}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          {!selectedFile && (\r\n            <div className=\"flex flex-col items-center justify-center border-2 border-dashed border-border rounded-lg p-6\">\r\n              <Upload className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Select a backup file to restore\r\n              </p>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                disabled={isImporting}\r\n              >\r\n                Choose File\r\n              </Button>\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".json\"\r\n                onChange={handleFileSelect}\r\n                className=\"hidden\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {selectedFile && !isImporting && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"p-3 bg-muted rounded-lg\">\r\n                <p className=\"text-sm font-medium\">Selected File:</p>\r\n                <p className=\"text-sm text-muted-foreground\">{selectedFile.name}</p>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {(selectedFile.size / 1024).toFixed(1)} KB\r\n                </p>\r\n              </div>\r\n\r\n              {showWarning && (\r\n                <Alert>\r\n                  <AlertTriangle className=\"h-4 w-4\" />\r\n                  <AlertDescription>\r\n                    <strong>Warning:</strong> This will permanently replace all current business data \r\n                    including products, sales, customers, and settings. This action cannot be undone.\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {isImporting && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                Restoring data... {progress.toFixed(0)}%\r\n              </div>\r\n              <Progress value={progress} className=\"w-full\" />\r\n              <p className=\"text-xs text-muted-foreground text-center\">\r\n                Please don't close this window. The app will reload automatically when complete.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <DialogFooter className=\"flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={handleCancel}\r\n            disabled={isImporting}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          {selectedFile && (\r\n            <Button\r\n              onClick={handleRestore}\r\n              disabled={isImporting || !currentBusiness}\r\n              variant=\"destructive\"\r\n            >\r\n              {isImporting ? 'Restoring...' : 'Restore Data'}\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};","\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface NewBusinessDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const NewBusinessDialog: React.FC<NewBusinessDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n}) => {\r\n  const [name, setName] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { createBusiness } = useBusiness();\r\n  const { toast } = useToast();\r\n\r\n  // Reset form when dialog opens/closes\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setName('');\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [open]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!name.trim()) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Business name is required\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      console.log('Creating business with name:', name.trim());\r\n      const newBusiness = await createBusiness(name.trim());\r\n      \r\n      if (newBusiness) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Business created successfully\",\r\n        });\r\n        setName('');\r\n        onOpenChange(false);\r\n      } else {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Failed to create business\",\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating business:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create business\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log('Input value changing to:', e.target.value);\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setName('');\r\n    onOpenChange(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\" onOpenAutoFocus={(e) => e.preventDefault()}>\r\n        <DialogHeader>\r\n          <DialogTitle>Create New Business</DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"businessName\">Business Name</Label>\r\n            <Input\r\n              id=\"businessName\"\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Enter business name\"\r\n              disabled={isSubmitting}\r\n              autoComplete=\"off\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end gap-2 pt-4\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleCancel}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isSubmitting || !name.trim()}>\r\n              {isSubmitting ? 'Creating...' : 'Create Business'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n","\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { toast } from 'sonner';\r\nimport { getBusinessBackupDataAction } from '@/app/actions/expenses';\r\n\r\ninterface BackupMetadata {\r\n  version: string;\r\n  timestamp: string;\r\n  businessName: string;\r\n  businessId: string;\r\n  exportType: 'full_backup';\r\n}\r\n\r\ninterface BackupData {\r\n  metadata: BackupMetadata;\r\n  data: Record<string, any[]>;\r\n}\r\n\r\nexport const useBusinessBackup = () => {\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isImporting, setIsImporting] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const { user } = useAuth();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const exportBusinessData = async () => {\r\n    if (!user || !currentBusiness) {\r\n      toast.error('No business selected for backup');\r\n      return;\r\n    }\r\n\r\n    setIsExporting(true);\r\n    setProgress(10);\r\n\r\n    try {\r\n      const result = await getBusinessBackupDataAction(user.id, currentBusiness.id);\r\n\r\n      if (!result.success) {\r\n        throw new Error(result.error || 'Export failed');\r\n      }\r\n\r\n      setProgress(90);\r\n\r\n      const backupData: BackupData = {\r\n        metadata: {\r\n          version: '1.0',\r\n          timestamp: new Date().toISOString(),\r\n          businessName: currentBusiness.name,\r\n          businessId: currentBusiness.id,\r\n          exportType: 'full_backup',\r\n        },\r\n        data: result.data as Record<string, any[]>,\r\n      };\r\n\r\n      const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `${currentBusiness.name.replace(/[^a-zA-Z0-9]/g, '_')}_backup_${new Date().toISOString().split('T')[0]}.json`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n\r\n      setProgress(100);\r\n      toast.success('Backup completed successfully');\r\n    } catch (error) {\r\n      console.error('Backup failed:', error);\r\n      toast.error('Backup failed. Please try again.');\r\n    } finally {\r\n      setIsExporting(false);\r\n      setProgress(0);\r\n    }\r\n  };\r\n\r\n  const importBusinessData = async (_file: File): Promise<boolean> => {\r\n    toast.error('Data import is not yet supported with the new Prisma backend. Please contact support.');\r\n    return false;\r\n  };\r\n\r\n  return {\r\n    exportBusinessData,\r\n    importBusinessData,\r\n    isExporting,\r\n    isImporting,\r\n    progress,\r\n  };\r\n};","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { Lock, Eye, EyeOff, Shield, ShieldOff } from 'lucide-react';\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface BusinessPasswordManagerProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  businessId: string;\r\n  businessName: string;\r\n  hasPassword: boolean;\r\n  onPasswordSet: (businessId: string, hasPassword: boolean) => void;\r\n  onSetPassword: (businessId: string, password: string) => Promise<boolean>;\r\n  onRemovePassword: (businessId: string, currentPassword: string) => Promise<boolean>;\r\n}\r\n\r\nexport const BusinessPasswordManager: React.FC<BusinessPasswordManagerProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  businessId,\r\n  businessName,\r\n  hasPassword,\r\n  onPasswordSet,\r\n  onSetPassword,\r\n  onRemovePassword,\r\n}) => {\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [showRemoveDialog, setShowRemoveDialog] = useState(false);\r\n  const [showPasswordConfirmation, setShowPasswordConfirmation] = useState(false);\r\n  const [confirmationPassword, setConfirmationPassword] = useState('');\r\n  const [showConfirmationPassword, setShowConfirmationPassword] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const validatePassword = () => {\r\n    if (password.length < 6) {\r\n      toast({\r\n        title: \"Password Too Short\",\r\n        description: \"Password must be at least 6 characters long.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      toast({\r\n        title: \"Passwords Don't Match\",\r\n        description: \"Please make sure both passwords are identical.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSetPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validatePassword()) return;\r\n\r\n    setIsProcessing(true);\r\n    \r\n    try {\r\n      const success = await onSetPassword(businessId, password);\r\n      \r\n      if (success) {\r\n        onPasswordSet(businessId, true);\r\n        setPassword('');\r\n        setConfirmPassword('');\r\n        onOpenChange(false);\r\n        \r\n        toast({\r\n          title: \"Password Set Successfully\",\r\n          description: `Business \"${businessName}\" is now password protected.`,\r\n        });\r\n        \r\n        // Refresh the app to reflect password protection instantly\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error setting password:', error);\r\n      toast({\r\n        title: \"Failed to Set Password\",\r\n        description: \"Please try again later.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirmPasswordRemoval = async () => {\r\n    if (!confirmationPassword.trim()) {\r\n      toast({\r\n        title: \"Password Required\",\r\n        description: \"Please enter the current password to remove protection.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    \r\n    try {\r\n      const success = await onRemovePassword(businessId, confirmationPassword);\r\n      \r\n      if (success) {\r\n        onPasswordSet(businessId, false);\r\n        setShowRemoveDialog(false);\r\n        setShowPasswordConfirmation(false);\r\n        setConfirmationPassword('');\r\n        onOpenChange(false);\r\n        \r\n        toast({\r\n          title: \"Password Removed\",\r\n          description: `Business \"${businessName}\" is no longer password protected.`,\r\n        });\r\n        \r\n        // Refresh the app to reflect password removal instantly\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing password:', error);\r\n      toast({\r\n        title: \"Failed to Remove Password\",\r\n        description: \"Please try again later.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleRemovePassword = () => {\r\n    setShowPasswordConfirmation(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setPassword('');\r\n    setConfirmPassword('');\r\n    setShowPassword(false);\r\n    setShowConfirmPassword(false);\r\n    setShowPasswordConfirmation(false);\r\n    setConfirmationPassword('');\r\n    setShowConfirmationPassword(false);\r\n    onOpenChange(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader className=\"text-center\">\r\n            <div className=\"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\r\n              {hasPassword ? (\r\n                <Shield className=\"h-6 w-6 text-primary\" />\r\n              ) : (\r\n                <ShieldOff className=\"h-6 w-6 text-muted-foreground\" />\r\n              )}\r\n            </div>\r\n            <DialogTitle className=\"text-xl\">\r\n              {hasPassword ? 'Change Business Password' : 'Set Business Password'}\r\n            </DialogTitle>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">\r\n              {hasPassword \r\n                ? `Update the password for \"${businessName}\"`\r\n                : `Set a password to protect access to \"${businessName}\"`\r\n              }\r\n            </p>\r\n          </DialogHeader>\r\n\r\n          {hasPassword ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-center p-4 rounded-lg bg-muted/50\">\r\n                <Lock className=\"h-8 w-8 mx-auto mb-2 text-primary\" />\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  This business is currently password protected\r\n                </p>\r\n              </div>\r\n              \r\n              {showPasswordConfirmation ? (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"p-4 rounded-lg bg-amber-50 border border-amber-200\">\r\n                    <p className=\"text-sm text-amber-800 font-medium mb-2\">\r\n                      Enter current password to remove protection\r\n                    </p>\r\n                    <div className=\"relative\">\r\n                      <Input\r\n                        type={showConfirmationPassword ? \"text\" : \"password\"}\r\n                        value={confirmationPassword}\r\n                        onChange={(e) => setConfirmationPassword(e.target.value)}\r\n                        placeholder=\"Enter current password\"\r\n                        disabled={isProcessing}\r\n                        className=\"pr-10\"\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                        onClick={() => setShowConfirmationPassword(!showConfirmationPassword)}\r\n                        disabled={isProcessing}\r\n                      >\r\n                        {showConfirmationPassword ? (\r\n                          <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex gap-3\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        setShowPasswordConfirmation(false);\r\n                        setConfirmationPassword('');\r\n                      }}\r\n                      disabled={isProcessing}\r\n                      className=\"flex-1\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"destructive\"\r\n                      onClick={handleConfirmPasswordRemoval}\r\n                      disabled={isProcessing || !confirmationPassword.trim()}\r\n                      className=\"flex-1\"\r\n                    >\r\n                      {isProcessing ? \"Removing...\" : \"Remove Password\"}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex justify-center\">\r\n                  <Button\r\n                    variant=\"destructive\"\r\n                    onClick={handleRemovePassword}\r\n                    disabled={isProcessing}\r\n                    className=\"w-full max-w-xs\"\r\n                  >\r\n                    Remove Password\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : null}\r\n\r\n          {(!hasPassword || password || confirmPassword) && (\r\n            <form onSubmit={handleSetPassword} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"new-password\">New Password</Label>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    id=\"new-password\"\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    placeholder=\"Enter new password (min 6 characters)\"\r\n                    disabled={isProcessing}\r\n                    className=\"pr-10\"\r\n                  />\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    {showPassword ? (\r\n                      <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\r\n                    ) : (\r\n                      <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    id=\"confirm-password\"\r\n                    type={showConfirmPassword ? \"text\" : \"password\"}\r\n                    value={confirmPassword}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                    placeholder=\"Confirm new password\"\r\n                    disabled={isProcessing}\r\n                    className=\"pr-10\"\r\n                  />\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\r\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    {showConfirmPassword ? (\r\n                      <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\r\n                    ) : (\r\n                      <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-4\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={handleClose}\r\n                  disabled={isProcessing}\r\n                  className=\"flex-1\"\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={isProcessing || !password.trim() || !confirmPassword.trim()}\r\n                  className=\"flex-1\"\r\n                >\r\n                  {isProcessing ? \"Setting...\" : hasPassword ? \"Update Password\" : \"Set Password\"}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={showRemoveDialog} onOpenChange={setShowRemoveDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Remove Password Protection?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              This will remove password protection from \"{businessName}\". Anyone with access to your account will be able to switch to this business without entering a password.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={isProcessing}>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleRemovePassword}\r\n              disabled={isProcessing}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              {isProcessing ? \"Removing...\" : \"Remove Password\"}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>\r\n  );\r\n};","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShieldOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMiAyIDIwIDIwIiAvPgogIDxwYXRoIGQ9Ik01IDVhMSAxIDAgMCAwLTEgMXY3YzAgNSAzLjUgNy41IDcuNjcgOC45NGExIDEgMCAwIDAgLjY3LjAxYzIuMzUtLjgyIDQuNDgtMS45NyA1LjktMy43MSIgLz4KICA8cGF0aCBkPSJNOS4zMDkgMy42NTJBMTIuMjUyIDEyLjI1MiAwIDAgMCAxMS4yNCAyLjI4YTEuMTcgMS4xNyAwIDAgMSAxLjUyIDBDMTQuNTEgMy44MSAxNyA1IDE5IDVhMSAxIDAgMCAxIDEgMXY3YTkuNzg0IDkuNzg0IDAgMCAxLS4wOCAxLjI2NCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shield-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldOff = createLucideIcon('ShieldOff', [\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n  [\n    'path',\n    {\n      d: 'M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71',\n      key: '1jlk70',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264',\n      key: '18rp1v',\n    },\n  ],\n]);\n\nexport default ShieldOff;\n","import React from 'react';\r\nimport { Download } from 'lucide-react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { useBusinessBackup } from '@/hooks/useBusinessBackup';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\n\r\ninterface BackupDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const BackupDialog: React.FC<BackupDialogProps> = ({ open, onOpenChange }) => {\r\n  const { exportBusinessData, isExporting, progress } = useBusinessBackup();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const handleBackup = async () => {\r\n    await exportBusinessData();\r\n    if (!isExporting) {\r\n      onOpenChange(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Download className=\"h-5 w-5\" />\r\n            Backup Business Data\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Export all your business data including products, sales, customers, expenses, and settings.\r\n            {currentBusiness && (\r\n              <span className=\"block mt-2 font-medium text-foreground\">\r\n                Business: {currentBusiness.name}\r\n              </span>\r\n            )}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {isExporting && (\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              Preparing backup... {progress.toFixed(0)}%\r\n            </div>\r\n            <Progress value={progress} className=\"w-full\" />\r\n          </div>\r\n        )}\r\n\r\n        <DialogFooter className=\"flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => onOpenChange(false)}\r\n            disabled={isExporting}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={handleBackup}\r\n            disabled={isExporting || !currentBusiness}\r\n          >\r\n            {isExporting ? 'Exporting...' : 'Start Backup'}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};","\r\nimport React from 'react';\r\nimport { RotateCcw } from 'lucide-react';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\n\r\ninterface ResetBusinessDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: () => void;\r\n  businessName: string;\r\n}\r\n\r\nexport const ResetBusinessDialog: React.FC<ResetBusinessDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onConfirm,\r\n  businessName,\r\n}) => {\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent className=\"mx-4 max-w-md\">\r\n        <AlertDialogHeader>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"p-2 bg-amber-100 rounded-lg\">\r\n              <RotateCcw className=\"h-5 w-5 text-amber-600\" />\r\n            </div>\r\n            <AlertDialogTitle>Reset Business Location</AlertDialogTitle>\r\n          </div>\r\n          <AlertDialogDescription className=\"text-sm space-y-2\">\r\n            <p className=\"font-medium text-gray-900\">\r\n              Are you sure you want to reset \"{businessName}\"?\r\n            </p>\r\n            <p>\r\n              This will permanently delete ALL data for this business location including:\r\n            </p>\r\n            <ul className=\"list-disc list-inside text-xs space-y-1 ml-2\">\r\n              <li>All products and inventory</li>\r\n              <li>All sales records and receipts</li>\r\n              <li>All customers and their data</li>\r\n              <li>All expenses and transactions</li>\r\n              <li>All cash accounts and balances</li>\r\n              <li>All tasks and categories</li>\r\n              <li>All business settings</li>\r\n            </ul>\r\n            <p className=\"font-medium text-red-600 mt-2\">\r\n              This action cannot be undone!\r\n            </p>\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter className=\"flex-col-reverse md:flex-row gap-2\">\r\n          <AlertDialogCancel className=\"w-full md:w-auto\">Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={onConfirm} \r\n            className=\"w-full md:w-auto bg-amber-600 hover:bg-amber-700 text-white\"\r\n          >\r\n            Reset Business\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAWA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QGnBA,EAAA,EAAA,CAAA,CAAA,QAiBO,IAAM,EAAsD,CAAC,MAClE,CAAI,cACJ,CAAY,CACb,IACC,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,gBAAE,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAChC,CAAE,OAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAG1B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,IACH,EADS,AACD,IACR,GAAgB,GAEpB,EAAG,CAAC,EAAK,EAET,IAAM,EAAe,MAAO,IAG1B,GAFA,EAAE,cAAc,GAEZ,CAAC,EAAK,IAAI,GAAI,YAChB,EAAM,CACJ,MAAO,QACP,YAAa,4BACb,QAAS,aACX,GAIF,GAAgB,GAEhB,GAAI,CACF,QAAQ,GAAG,CAAC,+BAAgC,EAAK,IAAI,IACjC,MAAM,EAAe,EAAK,IAAI,KAGhD,EAAM,CACJ,MAAO,UACP,YAAa,+BACf,GACA,EAAQ,IACR,GAAa,IAEb,EAAM,CACJ,MAAO,QACP,YAAa,4BACb,QAAS,aACX,EAEJ,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,EAAM,CACJ,MAAO,QACP,YAAa,4BACb,QAAS,aACX,EACF,QAAU,CACR,GAAgB,EAClB,CACF,EAYA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,cAAc,gBAAiB,AAAC,GAAM,EAAE,cAAc,aAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,0BAGf,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,kBAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,OACL,MAAO,EACP,SAxBe,AAAD,CAwBJ,GAvBpB,QAAQ,GAAG,CAAC,2BAA4B,EAAE,MAAM,CAAC,KAAK,EACtD,EAAQ,EAAE,MAAM,CAAC,KAAK,CACxB,EAsBY,YAAY,sBACZ,SAAU,EACV,aAAa,MACb,UAAU,cAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,UACR,QA/BS,CA+BA,IA9BnB,EAAQ,IACR,GAAa,EACf,EA6BY,SAAU,WACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,GAAgB,CAAC,EAAK,IAAI,YACvD,EAAe,cAAgB,8BAO9C,EK5Ga,EAA0D,CAAC,MACtE,CAAI,CACJ,cAAY,WACZ,CAAS,CACT,cAAY,CACb,GAEG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAM,aAAc,WACrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,CAAC,UAAU,0BAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,6BAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,UAAC,+BAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,UAAU,8BAChC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,sCAA4B,mCACN,EAAa,QAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,gFAGH,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,yDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,+BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,mCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,iCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,kCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,mCACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,6BACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,6BAEN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,wCAKjD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,UAAU,+CAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,UAAU,4BAAmB,WAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,QAAS,EACT,UAAU,uEACX,2BDpDX,IAAA,EAAA,EAAA,CAAA,CAAA,QHTA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QHJ+L,EAAA,EAAA,CAAA,CAAA,QAAsG,IAAM,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAa,AAAqB,EAAC,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,+BGoBva,EAAoB,KAC/B,GAAM,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACnC,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAyDvC,MAAO,CACL,mBAxDyB,UACzB,GAAI,CAAC,GAAQ,CAAC,EAAiB,YAC7B,EAAA,KAAK,CAAC,KAAK,CAAC,mCAId,EAAe,IACf,EAAY,IAEZ,GAAI,CACF,IAAM,EAAS,MAAM,EAA4B,EAAK,EAAE,CAAE,EAAgB,EAAE,EAE5E,GAAI,CAAC,EAAO,OAAO,CACjB,CADmB,KACb,AAAI,MAAM,EAAO,KAAK,EAAI,iBAGlC,EAAY,IAEZ,IAAM,EAAyB,CAC7B,SAAU,CACR,QAAS,MACT,UAAW,IAAI,OAAO,WAAW,GACjC,aAAc,EAAgB,IAAI,CAClC,WAAY,EAAgB,EAAE,CAC9B,WAAY,aACd,EACA,KAAM,EAAO,IAAI,AACnB,EAEM,EAAO,IAAI,KAAK,CAAC,KAAK,SAAS,CAAC,EAAY,KAAM,GAAG,CAAE,CAAE,KAAM,kBAAmB,GAClF,EAAM,IAAI,eAAe,CAAC,GAC1B,EAAO,SAAS,aAAa,CAAC,KACpC,EAAK,IAAI,CAAG,EACZ,EAAK,QAAQ,CAAG,CAAA,EAAG,EAAgB,IAAI,CAAC,OAAO,CAAC,gBAAiB,KAAK,QAAQ,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAC7H,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAK,KAAK,GACV,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,IAAI,eAAe,CAAC,GAEpB,EAAY,KACZ,EAAA,KAAK,CAAC,OAAO,CAAC,gCAChB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,iBAAkB,GAChC,EAAA,KAAK,CAAC,KAAK,CAAC,mCACd,QAAU,CACR,EAAe,IACf,EAAY,EACd,CACF,EASE,mBAPyB,MAAO,IAChC,EAAA,KAAK,CAAC,KAAK,CAAC,0FACL,eAMP,cACA,WACA,CACF,CACF,EGrEa,EAA4C,CAAC,MAAE,CAAI,CAAE,cAAY,CAAE,IAC9E,GAAM,oBAAE,CAAkB,aAAE,CAAW,UAAE,CAAQ,CAAE,CAAG,IAChD,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAW,AAAX,IAEtB,EAAe,UACnB,MAAM,IACF,AAAC,GACH,GAAa,EAEjB,EAEA,GALoB,GAMlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,oCACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YAAY,0BAGlC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAAC,8FAEhB,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,mDAAyC,aAC5C,EAAgB,IAAI,UAMtC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CAAgC,uBACxB,EAAS,OAAO,CAAC,GAAG,OAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAO,EAAU,UAAU,cAIzC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,qEACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,IAAM,GAAa,GAC5B,SAAU,WACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EACT,SAAU,GAAe,CAAC,WAEzB,EAAc,eAAiB,wBAM5C,EL3EA,IAAA,EAAA,EAAA,CAAA,CAAA,OAWA,EAAA,EAAA,CAAA,CAAA,QASO,IAAM,EAA8C,CAAC,CAAE,MAAI,cAAE,CAAY,CAAE,IAChF,GAAM,oBAAE,CAAkB,aAAE,CAAW,UAAE,CAAQ,CAAE,CAAG,IAChD,CAAE,iBAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACjC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACxD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MAcxC,EAAgB,UACpB,AAAI,CAAC,GAEW,MAAM,EAAmB,GAFtB,EAIjB,GAAa,GACb,EAAgB,MAChB,GAAe,GAEnB,EAEM,EAAe,KACnB,GAAa,GACb,EAAgB,MAChB,GAAe,GACX,EAAa,OAAO,EAAE,CACxB,EAAa,OAAO,CAAC,KAAK,CAAG,EAAA,CAEjC,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,oCACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,2BAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAAC,+EAEhB,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,mDAAyC,oBACrC,EAAgB,IAAI,UAM9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yCAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,oCAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,IAAM,EAAa,OAAO,EAAE,QACrC,SAAU,WACX,gBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,KAAK,OACL,OAAO,QACP,SApEW,AAAC,CAoEF,GAnEtB,IAAM,EAAO,EAAM,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAChC,IACgB,EADV,mBACJ,EAAK,IAAI,EAA2B,EAAK,IAAI,CAAC,QAAQ,CAAC,UAAU,AACnE,EAAgB,GAChB,GAAe,IAEf,MAAM,0CAGZ,EA2Dc,UAAU,cAKf,GAAgB,CAAC,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAAsB,mBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAa,IAAI,GAC/D,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,CAAC,EAAa,IAAI,CAAG,IAAA,CAAI,CAAE,OAAO,CAAC,GAAG,YAI1C,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,WACf,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,sJAQlC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CAAgC,qBAC1B,EAAS,OAAO,CAAC,GAAG,OAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAO,EAAU,UAAU,WACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDAA4C,2FAO/D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,qEACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,EACT,SAAU,WACX,WAGA,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,EACT,SAAU,GAAe,CAAC,EAC1B,QAAQ,uBAEP,EAAc,eAAiB,wBAO9C,EFpIA,IAAA,EAAA,EAAA,CAAA,CAAA,QKpBA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,YCOM,CAAA,CAAA,CAAA,CAAA,CAAY,AAAZ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAY,OAAA,EAAiB,WAAa,CAAA,CAAA,AAC9C,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAC3C,CACE,AADF,CACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACA,CAAA,AACE,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACH,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACP,CAAA,CACF,CAAA,AACA,CACE,AADF,CACE,CAAA,KACA,CAAA,4IAEO,CAAA,CAAA,MACP,CAAA,CACF,CACD,EDTY,EAAkE,CAAC,MAC9E,CAAI,cACJ,CAAY,YACZ,CAAU,cACV,CAAY,aACZ,CAAW,eACX,CAAa,eACb,CAAa,kBACb,CAAgB,CACjB,IACC,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAC3C,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnD,CAAC,EAA0B,EAA4B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnE,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3D,CAAC,EAA0B,EAA4B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnE,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAwBpB,EAAoB,MAAO,IAG/B,GAFA,CAEI,CAFF,AAEG,cAFW,GAtBhB,AAAI,EAAS,CAwBY,KAxBN,CAAG,GAAG,AACvB,EAAM,CACJ,MAAO,qBACP,YAAa,+CACb,QAAS,aACX,IACO,GAGL,IAAa,IACf,EAAM,CACJ,MAAO,IAFuB,oBAG9B,YAAa,iDACb,QAAS,aACX,IACO,IAWT,GAAgB,GAEhB,GAAI,CACc,MAAM,EAAc,EAAY,KAG9C,EAAc,EAAY,IAC1B,EAAY,IACZ,EAAmB,IACnB,GAAa,GAEb,EAAM,CACJ,MAAO,4BACP,YAAa,CAAC,UAAU,EAAE,EAAa,4BAA4B,CAAC,AACtE,GAGA,WAAW,KACT,OAAO,QAAQ,CAAC,MAAM,EACxB,EAAG,KAEP,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAM,CACJ,MAAO,yBACP,YAAa,0BACb,QAAS,aACX,EACF,QAAU,CACR,GAAgB,EAClB,EACF,EAEM,EAA+B,UACnC,GAAI,CAAC,EAAqB,IAAI,GAAI,YAChC,EAAM,CACJ,MAAO,oBACP,YAAa,0DACb,QAAS,aACX,GAIF,GAAgB,GAEhB,GAAI,CACc,MAAM,EAAiB,EAAY,KAGjD,EAAc,GAAY,GAC1B,GAAoB,GACpB,EAA4B,IAC5B,EAAwB,IACxB,GAAa,GAEb,EAAM,CACJ,MAAO,mBACP,YAAa,CAAC,UAAU,EAAE,EAAa,kCAAkC,CAAC,AAC5E,GAGA,WAAW,KACT,OAAO,QAAQ,CAAC,MAAM,EACxB,EAAG,KAEP,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,EAAM,CACJ,MAAO,4BACP,YAAa,0BACb,QAAS,aACX,EACF,QAAU,CACR,GAAgB,EAClB,CACF,EAEM,EAAuB,KAC3B,EAA4B,GAC9B,EAaA,MACE,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,wBACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8FACZ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yBAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,UAAU,oCAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,mBACpB,EAAc,2BAA6B,0BAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CACV,EACG,CAAC,yBAAyB,EAAE,EAAa,CAAC,CAAC,CAC3C,CAAC,qCAAqC,EAAE,EAAa,CAAC,CAAC,MAK9D,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,sCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,qDAK9C,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA0C,gDAGvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAM,EAA2B,OAAS,WAC1C,MAAO,EACP,SAAU,AAAC,GAAM,EAAwB,EAAE,MAAM,CAAC,KAAK,EACvD,YAAY,yBACZ,SAAU,EACV,UAAU,UAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,QACR,KAAK,KACL,UAAU,+DACV,QAAS,IAAM,EAA4B,CAAC,GAC5C,SAAU,WAET,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,kCAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,0CAMvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,KACP,GAA4B,GAC5B,EAAwB,GAC1B,EACA,SAAU,EACV,UAAU,kBACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,cACR,QAAS,EACT,SAAU,GAAgB,CAAC,EAAqB,IAAI,GACpD,UAAU,kBAET,EAAe,cAAgB,0BAKtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,cACR,QAAS,EACT,SAAU,EACV,UAAU,2BACX,yBAML,KAEH,CAAC,CAAC,GAAe,GAAY,CAAA,CAAe,EAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAmB,UAAU,sBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,iBAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAM,EAAe,OAAS,WAC9B,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,wCACZ,SAAU,EACV,UAAU,UAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,QACR,KAAK,KACL,UAAU,+DACV,QAAS,IAAM,EAAgB,CAAC,GAChC,SAAU,WAET,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,kCAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,0CAMvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,4BAAmB,qBAClC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,mBACH,KAAM,EAAsB,OAAS,WACrC,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,YAAY,uBACZ,SAAU,EACV,UAAU,UAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,QACR,KAAK,KACL,UAAU,+DACV,QAAS,IAAM,EAAuB,CAAC,GACvC,SAAU,WAET,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,kCAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,0CAMvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,UACR,QAhLI,CAgLK,IA/KvB,EAAY,IACZ,EAAmB,IACnB,GAAgB,GAChB,GAAuB,GACvB,GAA4B,GAC5B,EAAwB,IACxB,GAA4B,GAC5B,GAAa,EACf,EAwKgB,SAAU,EACV,UAAU,kBACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,SAAU,GAAgB,CAAC,EAAS,IAAI,IAAM,CAAC,EAAgB,IAAI,GACnE,UAAU,kBAET,EAAe,aAAe,EAAc,kBAAoB,4BAQ7E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAkB,aAAc,WACjD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,WACjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,UAAC,gCAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,sBAAsB,CAAA,WAAC,8CACsB,EAAa,mHAG7D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,SAAU,WAAc,WAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,QAAS,EACT,SAAU,EACV,UAAU,8EAET,EAAe,cAAgB,8BAO9C,ELlVA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,yBAE2B,KACzB,GAAM,mBAAE,CAAiB,CAAE,iBAAe,gBAAE,CAAc,CAAE,gBAAc,gBAAE,CAAc,eAAE,CAAa,eAAE,CAAa,CAAE,CAAG,CAAA,EAAA,EAAA,WAAW,AAAX,IACvH,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IACtB,qBACJ,CAAmB,wBACnB,CAAsB,wBACtB,CAAsB,CACtB,UAAW,CAAe,CAC3B,CAAG,CAAA,EAAA,EAAA,mBAAA,AAAmB,IACjB,eAAE,CAAa,CAAE,CAAG,CAAA,EAAA,EAAA,WAAW,AAAX,IACpB,EAAY,EAAc,WAAY,UACtC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnD,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpD,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACzC,CAAC,GAAY,GAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACtD,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACxD,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGzC,CAAC,GAAoB,GAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvD,CAAC,GAAqB,GAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzD,CAAC,GAAoB,GAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAIlD,MACJ,CAAC,GAA4B,GAA8B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAOtF,GAAiB,UACrB,AAAK,GAAc,CAAf,EAA2B,IAAI,GAAjB,CAAqB,CAEvB,MAAM,EAAe,EAAW,GAAY,IAAI,KAG9D,EAAM,CACJ,MAAO,UACP,YAAa,oCACf,GACA,EAAa,MACb,GAAe,KAEf,EAAM,CACJ,MAAO,QACP,YAAa,iCACb,QAAS,aACX,GAEJ,EAEM,GAAmB,KACvB,EAAa,MACb,GAAe,GACjB,EAEM,GAAe,UACnB,AAAK,IAAD,CAEY,MAAM,CAFL,CAEoB,IAGnC,EAAM,CACJ,MAAO,UACP,YAAa,+BACf,GAEA,EAAM,CACJ,MAAO,QACP,YAAa,4BACb,QAAS,aACX,GAGF,GAAc,MAChB,EAkCM,GAAc,UAClB,GAAK,CAAD,GAEJ,IAAe,GACf,EAHkB,MAGV,GAAG,CAAC,+BAAgC,IAE5C,GAAI,CACc,MAAM,EAAc,KAGlC,EAAM,CACJ,MAAO,UACP,YAAa,+CACf,GACA,QAAQ,GAAG,CAAC,gCAEZ,WAAW,IAAM,OAAO,QAAQ,CAAC,MAAM,GAAI,QAE3C,EAAM,CACJ,MAAO,QACP,YAAa,oCACb,QAAS,aACX,GACA,QAAQ,KAAK,CAAC,gBAElB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,sBAAuB,GACrC,EAAM,CACJ,MAAO,QACP,YAAa,oCACb,QAAS,aACX,EACF,QAAU,CACR,GAAe,MACf,IAAe,EACjB,EACF,EAEM,GAA2B,KAC/B,IAAM,EAAW,EAAkB,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,IACtD,OAAO,GAAU,MAAQ,EAC3B,EAWA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CAEZ,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACf,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,uBACpD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,0BACX,KAA2B,OACnD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GACD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CAAmC,2EAQ7D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,GAAc,iCAAmC,aAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wDAA+C,wBAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA0C,mDAEzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,IAAM,GAAoB,GACnC,QAAQ,UACR,UAAU,6DACV,KAAiB,CAAX,SACN,EAD6B,OACnB,CAAC,GAAmB,aAE9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACnB,EAAW,SAAW,iBAG1B,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,IAAM,GAAqB,GACpC,QAAQ,UACR,UAAU,6DACV,KAAiB,CAAX,SACN,EAD6B,OACnB,CAAC,GAAmB,aAE9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YACjB,EAAW,UAAY,qBAI7B,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAjEa,CAiEJ,IAhEnB,EAAkB,MAAM,EAAI,EAC9B,GAAmB,GAEnB,GAAiB,EAErB,EA4DgB,AAjEiC,UAiEvB,wFACV,KAAiB,CAAX,SACN,EAD6B,OACnB,aAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,iCASrC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,yEACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBACpB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qEACnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,cACjB,sBAGR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,iCAAwB,oDAIrD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0DAAkD,EAAgB,IAAI,GACpF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,YACzB,IAAI,KAAK,EAAgB,UAAU,EAAE,kBAAkB,SAGrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACZ,EAAgB,UAAU,EACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,6CAAoC,YAI3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,2CAAkC,sBAU7D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,sBACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,8BAAqB,mBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,mBAAU,kHAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACiB,IAA7B,EAAkB,MAAM,CACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,8BAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA4B,wBACzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,iDAG5C,EAAkB,GAAG,CAAC,AAAC,GACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,UAAW,CAAC,qCAAqC,EAAE,GAAiB,KAAO,EAAS,EAAE,CAClF,0CACA,4CAAA,CACA,UAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,eAAe,EAAE,GAAiB,KAAO,EAAS,EAAE,CAAG,cAAgB,cAAA,CACpF,UACF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,4BAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,IAAc,EAAS,EAAE,CACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,CAAC,KAAK,EAAE,EAAS,EAAE,CAAA,CAAE,CAAE,UAAU,+BAAsB,kBACvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAI,CAAC,KAAK,EAAE,EAAS,EAAE,CAAA,CAAE,CACzB,MAAO,GACP,SAAU,AAAC,GAAM,GAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,MACV,UAAW,AAAC,IACI,UAAV,EAAE,GAAG,EAAc,KACnB,AAAU,aAAR,GAAG,EAAe,IAC1B,EACA,SAAS,CAAA,CAAA,OAIb,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAyC,EAAS,IAAI,GACnE,EAAS,oBAAoB,EAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,2BAEjB,EAAS,UAAU,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAAU,YAI9C,GAAiB,KAAO,EAAS,EAAE,EAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,2CAAkC,eAKvD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,YACzB,IAAI,KAAK,EAAS,UAAU,EAAE,kBAAkB,GACzD,EAAS,oBAAoB,EAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+BAAsB,oCAQlD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACZ,IAAc,EAAS,EAAE,CACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAS,GAAgB,UAAU,gCACnD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,oBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,YAE9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAQ,UAAU,QAAS,GAAkB,UAAU,+BAAsB,cAKjG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACZ,GAAiB,KAAO,EAAS,EAAE,EAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,UACR,QAAS,IAAM,CA7R3C,EA6RgE,EAAS,EAAE,CA7RhD,CAAC,EAAY,EAAc,GAAvC,EACb,GAAsB,YAAE,eAAY,EAAc,YAAW,GAC7D,IAAsB,EACxB,IA2R4B,UAAU,8BACV,SAAU,YACX,cAIF,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,gBA7VpB,EA6VoC,EAAS,EAAE,CA7VnC,EA6VqC,EAAS,IAAI,MA5VrF,EAAa,GACb,GAAe,KA4Va,UAAU,MACV,SAAU,YAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,cAGrB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,CAlS3C,GAkSqE,EAAS,EAAE,EAjShF,GAAuB,KAkSK,UAAU,GAnSR,4DAoSF,MAAO,EAAS,oBAAoB,CAAG,kBAAoB,eAC3D,SAAU,YAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,cAGrB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,GAAe,EAAS,EAAE,EACzC,UAAU,4DACV,SAAU,YAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,cAGxB,CAAC,EAAS,UAAU,EAAI,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,QACR,QAAS,IAAM,GAAc,EAAS,EAAE,EACxC,UAAU,sDACV,SAAU,YAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,uBA3HzB,EAAS,EAAE,aA2I9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,aAAc,IAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,aAAc,IAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,aAAc,IAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,CAAC,CAAC,GACR,aAAc,IAAM,GAAe,MACnC,UAAW,GACX,aAAc,OAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,sBAAsB,CAAA,CACrB,KAAM,GACN,aAAc,GACd,aAAc,IAAoB,cAAgB,GAClD,mBAtXyB,CAsXL,IArXpB,KACF,GAAmB,UAAU,EADP,CAEtB,EAAM,CACJ,MAAO,oBACP,YAAa,gDACf,GAEJ,EA+WM,iBAAkB,MAAO,GACvB,EAAI,IACK,MAAM,EAAuB,GAAmB,KADjC,KAC2C,CAAE,KAOxE,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,GACN,aAAc,GACd,WAAY,GACZ,aAAc,EAAkB,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,KAA6B,MAAQ,GACxF,YAAa,CAAC,CAAC,EAAkB,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,KAA6B,qBACjF,cAxXkB,CAAC,AAwXJ,EAxXwB,KAEpB,EAAkB,GAAG,CAAC,GAC7C,EAAS,EAAE,GAAK,EACZ,CAAE,GAAG,CAAQ,CAAE,qBAAsB,EAAc,oBAAiB,CAAU,EAC9E,EAGR,EAiXQ,cAAe,EACf,iBAAkB,MAAO,EAAoB,IAG3C,EADmB,EACf,IADqB,EAAuB,EAAY,IAC5C,AACP,MAAM,EAAuB,KAQ5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,CAAC,CAAC,GAAY,aAAc,IAAM,GAAc,eACjE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,CAAC,UAAU,0BAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,UAAC,oBAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,UAAU,mBAAU,uLAM9C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,UAAU,+CAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,UAAU,4BAAmB,WAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,QAAS,GAAc,UAAU,wDAA+C,mBAQzG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAiB,aAAc,WAChD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,CAAC,UAAU,0BAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,UAAU,mDAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,4BAGhC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,UAAU,wBAChC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wCAA8B,iDACK,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,EAAc,gBAAiB,OAE3H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,yDACH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,oBAAoB,UAAU,gEAAuD,mBAC7F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDAAuC,sFAK5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,UAAU,kBAAS,mBAMlD","ignoreList":[6]}