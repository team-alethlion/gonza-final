module.exports=[921612,a=>{"use strict";let b,c,d,e,f,g;var h,i,j,k,l=a.i(653774);let m=(0,l.registerPlugin)("Storage",{web:()=>a.A(703429).then(a=>new a.StorageWeb)});(h=k||(k={})).Unimplemented="UNIMPLEMENTED",h.Unavailable="UNAVAILABLE";class n extends Error{constructor(a,b,c){super(a),this.message=a,this.code=b,this.data=c}}let o=(b=(j=i="u">typeof globalThis?globalThis:"u">typeof self?self:a.g).CapacitorCustomPlatform||null,d=(c=j.Capacitor||{}).Plugins=c.Plugins||{},e=()=>{var a,c;return null!==b?b.name:(null==j?void 0:j.androidBridge)?"android":(null==(c=null==(a=null==j?void 0:j.webkit)?void 0:a.messageHandlers)?void 0:c.bridge)?"ios":"web"},f=a=>{var b;return null==(b=c.PluginHeaders)?void 0:b.find(b=>b.name===a)},g=new Map,c.convertFileSrc||(c.convertFileSrc=a=>a),c.getPlatform=e,c.handleError=a=>j.console.error(a),c.isNativePlatform=()=>"web"!==e(),c.isPluginAvailable=a=>{let b=g.get(a);return!!((null==b?void 0:b.platforms.has(e()))||f(a))},c.registerPlugin=(a,h={})=>{let i,j=g.get(a);if(j)return console.warn(`Capacitor plugin "${a}" already registered. Cannot register plugins twice.`),j.proxy;let l=e(),m=f(a),o=async()=>(!i&&l in h?i=i="function"==typeof h[l]?await h[l]():h[l]:null!==b&&!i&&"web"in h&&(i=i="function"==typeof h.web?await h.web():h.web),i),p=b=>{let d,e=(...e)=>{let f=o().then(f=>{let g=((b,d)=>{var e,f;if(m){let f=null==m?void 0:m.methods.find(a=>d===a.name);if(f)if("promise"===f.rtype)return b=>c.nativePromise(a,d.toString(),b);else return(b,e)=>c.nativeCallback(a,d.toString(),b,e);if(b)return null==(e=b[d])?void 0:e.bind(b)}else if(b)return null==(f=b[d])?void 0:f.bind(b);else throw new n(`"${a}" plugin is not implemented on ${l}`,k.Unimplemented)})(f,b);if(g){let a=g(...e);return d=null==a?void 0:a.remove,a}throw new n(`"${a}.${b}()" is not implemented on ${l}`,k.Unimplemented)});return"addListener"===b&&(f.remove=async()=>d()),f};return e.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(e,"name",{value:b,writable:!1,configurable:!1}),e},q=p("addListener"),r=p("removeListener"),s=(a,b)=>{let c=q({eventName:a},b),d=async()=>{r({eventName:a,callbackId:await c},b)},e=new Promise(a=>c.then(()=>a({remove:d})));return e.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await d()},e},t=new Proxy({},{get(a,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?s:q;case"removeListener":return r;default:return p(b)}}});return d[a]=t,g.set(a,{name:a,proxy:t,platforms:new Set([...Object.keys(h),...m?[l]:[]])}),t},c.Exception=n,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,i.Capacitor=c),p=o.registerPlugin;class q{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(a,b){let c=!1;this.listeners[a]||(this.listeners[a]=[],c=!0),this.listeners[a].push(b);let d=this.windowListeners[a];return d&&!d.registered&&this.addWindowListener(d),c&&this.sendRetainedArgumentsForEvent(a),Promise.resolve({remove:async()=>this.removeListener(a,b)})}async removeAllListeners(){for(let a in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[a]);this.windowListeners={}}notifyListeners(a,b,c){let d=this.listeners[a];if(!d){if(c){let c=this.retainedEventArguments[a];c||(c=[]),c.push(b),this.retainedEventArguments[a]=c}return}d.forEach(a=>a(b))}hasListeners(a){var b;return!!(null==(b=this.listeners[a])?void 0:b.length)}registerWindowListener(a,b){this.windowListeners[b]={registered:!1,windowEventName:a,pluginEventName:b,handler:a=>{this.notifyListeners(b,a)}}}unimplemented(a="not implemented"){return new o.Exception(a,k.Unimplemented)}unavailable(a="not available"){return new o.Exception(a,k.Unavailable)}async removeListener(a,b){let c=this.listeners[a];if(!c)return;let d=c.indexOf(b);this.listeners[a].splice(d,1),this.listeners[a].length||this.removeWindowListener(this.windowListeners[a])}addWindowListener(a){window.addEventListener(a.windowEventName,a.handler),a.registered=!0}removeWindowListener(a){a&&(window.removeEventListener(a.windowEventName,a.handler),a.registered=!1)}sendRetainedArgumentsForEvent(a){let b=this.retainedEventArguments[a];b&&(delete this.retainedEventArguments[a],b.forEach(b=>{this.notifyListeners(a,b)}))}}let r=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class s extends q{async getCookies(){let a=document.cookie,b={};return a.split(";").forEach(a=>{if(a.length<=0)return;let[c,d]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=c.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),d=d.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent).trim(),b[c]=d}),b}async setCookie(a){try{let b=r(a.key),c=r(a.value),d=`; expires=${(a.expires||"").replace("expires=","")}`,e=(a.path||"/").replace("path=",""),f=null!=a.url&&a.url.length>0?`domain=${a.url}`:"";document.cookie=`${b}=${c||""}${d}; path=${e}; ${f};`}catch(a){return Promise.reject(a)}}async deleteCookie(a){try{document.cookie=`${a.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{for(let a of document.cookie.split(";")||[])document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(a){return Promise.reject(a)}}async clearAllCookies(){try{await this.clearCookies()}catch(a){return Promise.reject(a)}}}p("CapacitorCookies",{web:()=>new s});let t=async a=>new Promise((b,c)=>{let d=new FileReader;d.onload=()=>{let a=d.result;b(a.indexOf(",")>=0?a.split(",")[1]:a)},d.onerror=a=>c(a),d.readAsDataURL(a)});class u extends q{async request(a){let b,c,d=((a,b={})=>{let c=Object.assign({method:a.method||"GET",headers:a.headers},b),d=((a={})=>{let b=Object.keys(a);return Object.keys(a).map(a=>a.toLocaleLowerCase()).reduce((c,d,e)=>(c[d]=a[b[e]],c),{})})(a.headers)["content-type"]||"";if("string"==typeof a.data)c.body=a.data;else if(d.includes("application/x-www-form-urlencoded")){let b=new URLSearchParams;for(let[c,d]of Object.entries(a.data||{}))b.set(c,d);c.body=b.toString()}else if(d.includes("multipart/form-data")||a.data instanceof FormData){let b=new FormData;if(a.data instanceof FormData)a.data.forEach((a,c)=>{b.append(c,a)});else for(let c of Object.keys(a.data))b.append(c,a.data[c]);c.body=b;let d=new Headers(c.headers);d.delete("content-type"),c.headers=d}else(d.includes("application/json")||"object"==typeof a.data)&&(c.body=JSON.stringify(a.data));return c})(a,a.webFetchExtra),e=((a,b=!0)=>a?Object.entries(a).reduce((a,c)=>{let d,e,[f,g]=c;return Array.isArray(g)?(e="",g.forEach(a=>{d=b?encodeURIComponent(a):a,e+=`${f}=${d}&`}),e.slice(0,-1)):(d=b?encodeURIComponent(g):g,e=`${f}=${d}`),`${a}&${e}`},"").substr(1):null)(a.params,a.shouldEncodeUrlParams),f=e?`${a.url}?${e}`:a.url,g=await fetch(f,d),h=g.headers.get("content-type")||"",{responseType:i="text"}=g.ok?a:{};switch(h.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":c=await g.blob(),b=await t(c);break;case"json":b=await g.json();break;default:b=await g.text()}let j={};return g.headers.forEach((a,b)=>{j[b]=a}),{data:b,headers:j,status:g.status,url:g.url}}async get(a){return this.request(Object.assign(Object.assign({},a),{method:"GET"}))}async post(a){return this.request(Object.assign(Object.assign({},a),{method:"POST"}))}async put(a){return this.request(Object.assign(Object.assign({},a),{method:"PUT"}))}async patch(a){return this.request(Object.assign(Object.assign({},a),{method:"PATCH"}))}async delete(a){return this.request(Object.assign(Object.assign({},a),{method:"DELETE"}))}}p("CapacitorHttp",{web:()=>new u});let v=p("BluetoothSpp"),w=null;async function x(a){if(!l.Capacitor.isNativePlatform())return{success:!1,message:"Not a native platform"};try{await v.requestPermissions();let b=(await m.get({key:"selected_printer"})).value;if(b)try{console.log("Trying stored printer:",b);let a=await v.connect({address:b});a?.connected?(w=b,console.log("Connected using stored printer.")):b=null}catch(a){console.log("Stored printer failed. Falling back to selection."),b=null}if(!b&&!w){console.log("Listing paired devices...");let a=await v.listPairedDevices();if(!a?.devices?.length)throw Error("No paired devices found");let b=a.devices.map(a=>a.name||a.address),c=prompt(`Select a Bluetooth device:
${b.map((a,b)=>`${b+1}: ${a}`).join("\n")}`,"1"),d=parseInt(c||"1",10)-1;if(d<0||d>=a.devices.length)throw Error("Invalid device selection");let e=a.devices[d];console.log("Connecting to",e.name,e.address);let f=await v.connect({address:e.address});if(!f?.connected)throw Error("Failed to connect");w=e.address,await m.set({key:"selected_printer",value:e.address}),console.log("Printer saved:",e.address)}return await v.write({data:a}),await v.write({data:"\x1bd\x03"}),{success:!0,message:"Printed successfully"}}catch(a){console.error("Bluetooth print failed:",a);try{await v.disconnect()}catch(a){}return w=null,{success:!1,message:a?.message||"Unknown error"}}}v.addListener("connected",a=>console.log("Event: connected",a)),v.addListener("connectionFailed",a=>console.log("Event: connectionFailed",a)),v.addListener("disconnected",a=>console.log("Event: disconnected",a)),v.addListener("deviceFound",a=>console.log("Event: deviceFound",a)),v.addListener("discoveryFinished",()=>console.log("Event: discoveryFinished")),a.s(["printBluetooth",()=>x],921612)},703429,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_@capacitor_storage_dist_esm_web_9c41951d.js"].map(b=>a.l(b))).then(()=>b(112842)))}];

//# sourceMappingURL=_a61bfc6b._.js.map