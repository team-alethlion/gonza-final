module.exports=[3048,(a,b,c)=>{let d=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw d.code="MODULE_UNPARSABLE",d},781560,a=>{"use strict";let b=(0,a.i(170106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],781560)},400210,a=>{"use strict";let b=(0,a.i(170106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},347178,a=>{"use strict";let b;var c=a.i(572131),d=a.i(750104),e=a.i(470121),f=a.i(897942),g=a.i(507554),h=a.i(187924),i=Symbol("radix.slottable"),j="AlertDialog",[k,l]=(0,d.createContextScope)(j,[f.createDialogScope]),m=(0,f.createDialogScope)(),n=a=>{let{__scopeAlertDialog:b,...c}=a,d=m(b);return(0,h.jsx)(f.Root,{...d,...c,modal:!0})};n.displayName=j;var o=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,h.jsx)(f.Trigger,{...e,...d,ref:b})});o.displayName="AlertDialogTrigger";var p=a=>{let{__scopeAlertDialog:b,...c}=a,d=m(b);return(0,h.jsx)(f.Portal,{...d,...c})};p.displayName="AlertDialogPortal";var q=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,h.jsx)(f.Overlay,{...e,...d,ref:b})});q.displayName="AlertDialogOverlay";var r="AlertDialogContent",[s,t]=k(r),u=((b=({children:a})=>(0,h.jsx)(h.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=i,b),v=c.forwardRef((a,b)=>{let{__scopeAlertDialog:d,children:i,...j}=a,k=m(d),l=c.useRef(null),n=(0,e.useComposedRefs)(b,l),o=c.useRef(null);return(0,h.jsx)(f.WarningProvider,{contentName:r,titleName:w,docsSlug:"alert-dialog",children:(0,h.jsx)(s,{scope:d,cancelRef:o,children:(0,h.jsxs)(f.Content,{role:"alertdialog",...k,...j,ref:n,onOpenAutoFocus:(0,g.composeEventHandlers)(j.onOpenAutoFocus,a=>{a.preventDefault(),o.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,h.jsx)(u,{children:i}),(0,h.jsx)(D,{contentRef:l})]})})})});v.displayName=r;var w="AlertDialogTitle",x=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,h.jsx)(f.Title,{...e,...d,ref:b})});x.displayName=w;var y="AlertDialogDescription",z=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,h.jsx)(f.Description,{...e,...d,ref:b})});z.displayName=y;var A=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,h.jsx)(f.Close,{...e,...d,ref:b})});A.displayName="AlertDialogAction";var B="AlertDialogCancel",C=c.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,{cancelRef:g}=t(B,c),i=m(c),j=(0,e.useComposedRefs)(b,g);return(0,h.jsx)(f.Close,{...i,...d,ref:j})});C.displayName=B;var D=({contentRef:a})=>{let b=`\`${r}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${r}\` by passing a \`${y}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${r}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null};a.s(["Action",()=>A,"AlertDialog",()=>n,"AlertDialogAction",()=>A,"AlertDialogCancel",()=>C,"AlertDialogContent",()=>v,"AlertDialogDescription",()=>z,"AlertDialogOverlay",()=>q,"AlertDialogPortal",()=>p,"AlertDialogTitle",()=>x,"AlertDialogTrigger",()=>o,"Cancel",()=>C,"Content",()=>v,"Description",()=>z,"Overlay",()=>q,"Portal",()=>p,"Root",()=>n,"Title",()=>x,"Trigger",()=>o,"createAlertDialogScope",()=>l],347178)},486192,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(347178),e=a.i(368114),f=a.i(699570);let g=d.Root,h=d.Trigger,i=d.Portal,j=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Overlay,{className:(0,e.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:f}));j.displayName=d.Overlay.displayName;let k=c.forwardRef(({className:a,...c},f)=>(0,b.jsxs)(i,{children:[(0,b.jsx)(j,{}),(0,b.jsx)(d.Content,{ref:f,className:(0,e.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c})]}));k.displayName=d.Content.displayName;let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...c});l.displayName="AlertDialogHeader";let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});m.displayName="AlertDialogFooter";let n=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Title,{ref:f,className:(0,e.cn)("text-lg font-semibold",a),...c}));n.displayName=d.Title.displayName;let o=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Description,{ref:f,className:(0,e.cn)("text-sm text-muted-foreground",a),...c}));o.displayName=d.Description.displayName;let p=c.forwardRef(({className:a,...c},g)=>(0,b.jsx)(d.Action,{ref:g,className:(0,e.cn)((0,f.buttonVariants)(),a),...c}));p.displayName=d.Action.displayName;let q=c.forwardRef(({className:a,...c},g)=>(0,b.jsx)(d.Cancel,{ref:g,className:(0,e.cn)((0,f.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...c}));q.displayName=d.Cancel.displayName,a.s(["AlertDialog",()=>g,"AlertDialogAction",()=>p,"AlertDialogCancel",()=>q,"AlertDialogContent",()=>k,"AlertDialogDescription",()=>o,"AlertDialogFooter",()=>m,"AlertDialogHeader",()=>l,"AlertDialogTitle",()=>n,"AlertDialogTrigger",()=>h])},973308,a=>{"use strict";var b=a.i(572131),c=a.i(478793),d=a.i(169819),e=a.i(3048);a.s(["useCategories",0,a=>{let[f,g]=(0,b.useState)([]),[h,i]=(0,b.useState)(!0),{toast:j}=(0,c.useToast)(),{currentBusiness:k}=(0,d.useBusiness)(),l=(0,b.useCallback)(async()=>{try{if(!k?.id){g([]),i(!1);return}i(!0);let a=await (0,e.getProductCategoriesAction)(k.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch categories");let b=a.data.map(a=>({id:a.id,name:a.name,createdAt:a.createdAt?new Date(a.createdAt):a.created_at?new Date(a.created_at):void 0}));g(b)}catch(a){console.error("Error loading categories:",a),j({title:"Error",description:"Failed to load product categories.",variant:"destructive"})}finally{i(!1)}},[k?.id,j]);(0,b.useEffect)(()=>{l()},[l]);let m=async b=>{try{if(!a||!k?.id)return null;let c=f.find(a=>a.name.toLowerCase()===b.toLowerCase());if(c)return j({title:"Category exists",description:"This category already exists."}),c;let d=await (0,e.createProductCategoryAction)(k.id,a,b);if(!d.success||!d.data)throw Error(d.error);let h={id:d.data.id,name:d.data.name,createdAt:new Date(d.data.createdAt)};return g(a=>[...a,h]),j({title:"Success",description:"Category created successfully"}),h}catch(a){return console.error("Error creating category:",a),j({title:"Error",description:"Failed to create category.",variant:"destructive"}),null}},n=async(a,b)=>{try{if(f.find(c=>c.name.toLowerCase()===b.toLowerCase()&&c.id!==a))return j({title:"Category exists",description:"Another category with this name already exists."}),!1;let c=await (0,e.updateProductCategoryAction)(a,b);if(!c.success)throw Error(c.error);return g(c=>c.map(c=>c.id===a?{...c,name:b}:c)),j({title:"Success",description:"Category updated successfully"}),!0}catch(a){return console.error("Error updating category:",a),j({title:"Error",description:"Failed to update category.",variant:"destructive"}),!1}};return{categories:f,isLoading:h,loadCategories:l,createCategory:m,updateCategory:n,deleteCategory:async a=>{try{let b=await (0,e.deleteProductCategoryAction)(a);if(!b.success)return j({title:"Cannot delete category",description:b.error||"Failed to delete category.",variant:"destructive"}),!1;return g(b=>b.filter(b=>b.id!==a)),j({title:"Success",description:"Category deleted successfully"}),!0}catch(a){return console.error("Error deleting category:",a),j({title:"Error",description:"Failed to delete category.",variant:"destructive"}),!1}}}}])},699464,a=>{"use strict";let b=(0,a.i(170106).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],699464)},22922,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(665967),e=a.i(357999),f=a.i(699570),g=a.i(866718),h=a.i(400210),i=a.i(915618),j=a.i(699464),k=a.i(781560),l=a.i(391956),m=a.i(973308),n=a.i(591119),o=a.i(814574),p=a.i(486192),q=a.i(823292);a.s(["default",0,()=>{let a=(0,d.useNavigate)(),{user:r}=(0,l.useAuth)(),{categories:s,isLoading:t,createCategory:u,updateCategory:v,deleteCategory:w}=(0,m.useCategories)(r?.id),[x]=(0,e.useSearchParams)(),y=x.get("returnTo"),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(!1),H=async()=>{if(!z.trim())return void q.toast.error("Category name cannot be empty");G(!0);try{await u(z.trim())&&(q.toast.success("Category created successfully"),A(""))}finally{G(!1)}},I=async()=>{if(!B||!D.trim())return void q.toast.error("Category name cannot be empty");G(!0);try{await v(B,D.trim())&&(q.toast.success("Category updated successfully"),C(null),E(""))}finally{G(!1)}},J=async a=>{G(!0);try{await w(a)&&q.toast.success("Category deleted successfully")}finally{G(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{y?a(y):a("/products")},className:"flex items-center gap-1",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"}),y?"Back to Product Form":"Back to Products"]})}),(0,b.jsx)("h1",{className:"text-2xl font-bold md:text-3xl text-sales-dark",children:"Categories"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your product categories"})]})}),(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsxs)(n.CardTitle,{className:"flex items-center justify-between",children:["Add New Category",(0,b.jsxs)(o.Dialog,{children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Plus,{className:"h-4 w-4"}),"Add Category"]})}),(0,b.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Create New Category"}),(0,b.jsx)(o.DialogDescription,{children:"Enter a name for your new product category."})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)(g.Input,{placeholder:"Enter category name",value:z,onChange:a=>A(a.target.value)})}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(o.DialogClose,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"outline",children:"Cancel"})}),(0,b.jsx)(f.Button,{onClick:H,disabled:!z.trim()||F,children:F?"Creating...":"Create Category"})]})]})]})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:'Create categories to organize your products better. Click "Add Category" to get started.'})})]}),s.length>0&&(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsxs)(n.CardTitle,{children:["Existing Categories (",s.length,")"]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:s.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50",children:[(0,b.jsx)("h3",{className:"font-medium",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{var b,c;return b=a.id,c=a.name,void(C(b),E(c))},className:"flex items-center gap-1",children:[(0,b.jsx)(j.Pencil,{className:"h-4 w-4"}),"Edit"]}),(0,b.jsxs)(p.AlertDialog,{children:[(0,b.jsx)(p.AlertDialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-destructive hover:text-destructive",children:[(0,b.jsx)(k.Trash2,{className:"h-4 w-4"}),"Delete"]})}),(0,b.jsxs)(p.AlertDialogContent,{children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{children:"Delete Category"}),(0,b.jsxs)(p.AlertDialogDescription,{children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone. Products using this category will need to be reassigned.']})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(p.AlertDialogAction,{onClick:()=>J(a.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Category"})]})]})]})]})]},a.id))})})]}),null!==B&&(0,b.jsx)(o.Dialog,{open:null!==B,onOpenChange:a=>!a&&C(null),children:(0,b.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Edit Category"}),(0,b.jsx)(o.DialogDescription,{children:"Update the name of this category."})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)(g.Input,{placeholder:"Enter category name",value:D,onChange:a=>E(a.target.value)})}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>C(null),children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:I,disabled:!D.trim()||F,children:F?"Saving...":"Save Changes"})]})]})}),0===s.length&&!t&&(0,b.jsx)(n.Card,{children:(0,b.jsx)(n.CardContent,{className:"py-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No categories created yet. Create your first category to get started."})})})]})}])}];

//# sourceMappingURL=_ea0fc4fd._.js.map