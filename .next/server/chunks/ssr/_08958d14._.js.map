{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/history.ts","../../../../src/components/inventory/EditStockHistoryDialog.tsx","../../../../src/components/inventory/DeleteStockHistoryDialog.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name History\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgogIDxwYXRoIGQ9Ik0xMiA3djVsNCAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/history\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst History = createLucideIcon('History', [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n  ['path', { d: 'M12 7v5l4 2', key: '1fdv2h' }],\n]);\n\nexport default History;\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { StockHistoryEntry } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\n\r\ninterface EditStockHistoryDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  entry: StockHistoryEntry | null;\r\n  onConfirm: (entryId: string, newQuantity: number, newReason: string, newDate?: Date) => Promise<boolean>;\r\n  isInitialStock?: boolean;\r\n  stockHistory?: StockHistoryEntry[];\r\n  productCreatedAt?: Date;\r\n}\r\n\r\nconst EditStockHistoryDialog: React.FC<EditStockHistoryDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  entry,\r\n  onConfirm,\r\n  isInitialStock = false,\r\n  stockHistory = [],\r\n  productCreatedAt,\r\n}) => {\r\n  const [quantityChange, setQuantityChange] = useState<number | ''>(0);\r\n  const [newReason, setNewReason] = useState<string>('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [validationError, setValidationError] = useState<string>('');\r\n  const { toast } = useToast();\r\n  const { hasPermission } = useProfiles();\r\n\r\n  // Get the initial stock date (chronologically first entry)\r\n  const getInitialStockDate = (): Date | null => {\r\n    if (stockHistory.length === 0) return null;\r\n    const sortedHistory = [...stockHistory].sort((a, b) => a.createdAt.getTime() - b.createdAt.getTime());\r\n    return sortedHistory[0]?.createdAt || null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (entry) {\r\n      setQuantityChange(entry.newQuantity - entry.oldQuantity);\r\n      setNewReason(entry.changeReason);\r\n      setValidationError(''); // Clear validation error when entry changes\r\n    }\r\n  }, [entry]);\r\n\r\n  const validateQuantityChange = (newChange: number, currentChange: number): string => {\r\n    // If current change is negative, don't allow changing to positive\r\n    if (currentChange < 0 && newChange > 0) {\r\n      return 'Cannot change from negative to positive value.';\r\n    }\r\n    // If current change is positive, don't allow changing to negative\r\n    if (currentChange > 0 && newChange < 0) {\r\n      return 'Cannot change from positive to negative value.';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const handleQuantityChange = (value: string) => {\r\n    // Always allow empty string so users can clear the field\r\n    if (value === '') {\r\n      setQuantityChange('');\r\n      setValidationError('');\r\n      return;\r\n    }\r\n\r\n    const numericValue = parseInt(value) || 0;\r\n    const currentChange = quantityChange === '' ? 0 : quantityChange;\r\n\r\n    const error = validateQuantityChange(numericValue, currentChange);\r\n\r\n    // Only update the input if validation passes\r\n    if (!error) {\r\n      setQuantityChange(numericValue);\r\n      setValidationError('');\r\n    } else {\r\n      // Show validation error but don't update the input\r\n      setValidationError(error);\r\n    }\r\n  };\r\n\r\n  const handleReasonChange = (value: string) => {\r\n    setNewReason(value);\r\n  };\r\n\r\n  const handleSubmit = async (skipDateUpdate = false) => {\r\n    if (!entry) return;\r\n\r\n    const changeAmount = quantityChange === '' ? 0 : quantityChange;\r\n\r\n    // Validate quantity change before submitting\r\n    const originalChange = entry.newQuantity - entry.oldQuantity;\r\n    const error = validateQuantityChange(changeAmount, originalChange);\r\n    if (error) {\r\n      toast({\r\n        title: \"Invalid quantity change\",\r\n        description: error,\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const newQuantity = entry.oldQuantity + changeAmount;\r\n\r\n    if (!newReason.trim()) {\r\n      toast({\r\n        title: \"Invalid reason\",\r\n        description: \"Please provide a reason for this stock change\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const success = await onConfirm(\r\n        entry.id,\r\n        newQuantity,\r\n        newReason.trim()\r\n      );\r\n\r\n      if (success) {\r\n        toast({\r\n          title: \"Stock history updated\",\r\n          description: \"The stock history entry has been updated successfully.\"\r\n        });\r\n        onOpenChange(false);\r\n      } else {\r\n        toast({\r\n          title: \"Update failed\",\r\n          description: \"Failed to update stock history entry. Please try again.\",\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating stock history:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"An error occurred while updating the stock history.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onOpenChange(false);\r\n  };\r\n\r\n  if (!entry) return null;\r\n\r\n  // Check if this entry was created by a sale operation\r\n  const isSaleRelatedEntry = (entry: StockHistoryEntry): boolean => {\r\n    const saleReasons = ['Sale', 'Delete sale', 'Deleted Sale', 'Sale qty edit'];\r\n    return saleReasons.some(reason => entry.changeReason.toLowerCase().includes(reason.toLowerCase()));\r\n  };\r\n\r\n  const formatChangeReason = (reason: string): string => {\r\n    return reason\r\n      .replace('Deleted sale', 'Deleted Sale');\r\n  };\r\n\r\n  // If this is initial stock, show form with date editing enabled but with validation\r\n  if (isInitialStock) {\r\n    return (\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle>Edit Initial Stock Entry</DialogTitle>\r\n            <DialogDescription>\r\n              This is the initial stock entry. You can modify quantity, reason, and date, but the date must be earlier than all other stock transactions.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"quantity\">Quantity Change</Label>\r\n              <Input\r\n                id=\"quantity\"\r\n                type=\"number\"\r\n                value={quantityChange}\r\n                onChange={(e) => handleQuantityChange(e.target.value)}\r\n                className={validationError ? 'border-destructive border-2 bg-destructive/5 focus:border-destructive focus:ring-destructive' : ''}\r\n              />\r\n              {validationError && (\r\n                <p className=\"text-sm text-destructive\">{validationError}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"reason\">Change Reason</Label>\r\n              <Input\r\n                id=\"reason\"\r\n                value={newReason}\r\n                onChange={(e) => setNewReason(e.target.value)}\r\n                placeholder=\"Enter reason for stock change\"\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2 mt-6\">\r\n            <Button variant=\"outline\" onClick={handleCancel} disabled={isSubmitting}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={() => handleSubmit()}\r\n              disabled={isSubmitting || !hasPermission('inventory', 'stock_adjustment')}\r\n            >\r\n              {isSubmitting ? 'Updating...' : 'Update Entry'}\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // If this is a sale-related entry, show a restricted message\r\n  if (isSaleRelatedEntry(entry)) {\r\n    return (\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle>Cannot Edit Sale-Related Entry</DialogTitle>\r\n            <DialogDescription>\r\n              This stock history entry was created by a sales operation and can only be modified through the Edit Sale form.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-muted p-3 rounded-lg space-y-2\">\r\n              <div className=\"font-medium\">Entry Details:</div>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div><strong>Date:</strong> {format(entry.createdAt, 'PPP p')}</div>\r\n                <div><strong>Change:</strong> {entry.oldQuantity} → {entry.newQuantity}</div>\r\n                <div><strong>Reason:</strong> {formatChangeReason(entry.changeReason)}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\r\n              <div className=\"text-blue-800 text-sm\">\r\n                <strong>Note:</strong> To modify this entry, please use the Edit Sale form in the Sales section.\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2 mt-6\">\r\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n              Close\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  const originalChange = entry.newQuantity - entry.oldQuantity;\r\n  const changeAmount = quantityChange === '' ? 0 : quantityChange;\r\n  const newQuantity = entry.oldQuantity + changeAmount;\r\n  const newChange = changeAmount;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle>Edit Stock History Entry</DialogTitle>\r\n          <DialogDescription>\r\n            Modify the details of this stock history entry. The product's current stock will be recalculated after saving.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n            <div>\r\n              <Label className=\"text-muted-foreground\">Original</Label>\r\n              <div className=\"font-medium\">\r\n                {entry.oldQuantity} → {entry.newQuantity}\r\n              </div>\r\n              <div className={`text-xs ${originalChange >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                {originalChange >= 0 ? '+' : ''}{originalChange}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <Label className=\"text-muted-foreground\">New</Label>\r\n              <div className=\"font-medium\">\r\n                {entry.oldQuantity} → {newQuantity}\r\n              </div>\r\n              <div className={`text-xs ${newChange >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                {newChange >= 0 ? '+' : ''}{newChange}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"quantity\">Quantity Change</Label>\r\n            <Input\r\n              id=\"quantity\"\r\n              type=\"number\"\r\n              value={quantityChange}\r\n              onChange={(e) => handleQuantityChange(e.target.value)}\r\n              className={validationError ? 'border-destructive border-2 bg-destructive/5 focus:border-destructive focus:ring-destructive' : ''}\r\n            />\r\n            {entry && (\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                ⚠️ {(quantityChange === '' ? 0 : quantityChange) < 0\r\n                  ? \"Current change is negative - you cannot change to positive values\"\r\n                  : \"Current change is positive - you cannot change to negative values\"\r\n                }\r\n              </p>\r\n            )}\r\n            {validationError && (\r\n              <p className=\"text-sm text-destructive\">{validationError}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"reason\">Change Reason</Label>\r\n            <Input\r\n              id=\"reason\"\r\n              value={newReason}\r\n              onChange={(e) => setNewReason(e.target.value)}\r\n              placeholder=\"Enter reason for stock change\"\r\n            />\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-2 mt-6\">\r\n          <Button variant=\"outline\" onClick={handleCancel} disabled={isSubmitting}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={() => handleSubmit()}\r\n            disabled={isSubmitting || !hasPermission('inventory', 'stock_adjustment')}\r\n          >\r\n            {isSubmitting ? 'Updating...' : 'Update Entry'}\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditStockHistoryDialog;","import React, { useState } from 'react';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { StockHistoryEntry } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { AlertTriangle } from 'lucide-react';\r\n\r\ninterface DeleteStockHistoryDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  entry: StockHistoryEntry | null;\r\n  onConfirm: (entryId: string) => Promise<boolean>;\r\n}\r\n\r\nconst DeleteStockHistoryDialog: React.FC<DeleteStockHistoryDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  entry,\r\n  onConfirm,\r\n}) => {\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const handleDelete = async () => {\r\n    if (!entry) return;\r\n\r\n    setIsDeleting(true);\r\n\r\n    try {\r\n      const success = await onConfirm(entry.id);\r\n\r\n      if (success) {\r\n        toast({\r\n          title: \"Stock history deleted\",\r\n          description: \"The stock history entry has been deleted and stock recalculated.\"\r\n        });\r\n        onOpenChange(false);\r\n      } else {\r\n        toast({\r\n          title: \"Delete failed\",\r\n          description: \"Failed to delete stock history entry. Please try again.\",\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting stock history:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"An error occurred while deleting the stock history.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (!entry) return null;\r\n\r\n  // Check if this entry was created by a sale operation\r\n  const isSaleRelatedEntry = (entry: StockHistoryEntry): boolean => {\r\n    const saleReasons = ['Sale', 'Delete sale', 'Deleted Sale', 'Sale qty edit'];\r\n    return saleReasons.some(reason => entry.changeReason.toLowerCase().includes(reason.toLowerCase()));\r\n  };\r\n\r\n  const formatChangeReason = (reason: string): string => {\r\n    return reason\r\n      .replace('Deleted sale', 'Deleted Sale');\r\n  };\r\n\r\n  // If this is a sale-related entry, show a restricted message\r\n  if (isSaleRelatedEntry(entry)) {\r\n    return (\r\n      <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"flex items-center gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-blue-600\" />\r\n              Cannot Delete Sale-Related Entry\r\n            </AlertDialogTitle>\r\n            <AlertDialogDescription className=\"space-y-3\">\r\n              <p>\r\n                This stock history entry was created by a sales operation and cannot be deleted directly.\r\n              </p>\r\n\r\n              <div className=\"bg-muted p-3 rounded-lg space-y-2\">\r\n                <div className=\"font-medium\">Entry Details:</div>\r\n                <div className=\"text-sm space-y-1\">\r\n                  <div><strong>Date:</strong> {format(entry.createdAt, 'PPP p')}</div>\r\n                  <div><strong>Change:</strong> {entry.oldQuantity} → {entry.newQuantity}</div>\r\n                  <div><strong>Reason:</strong> {formatChangeReason(entry.changeReason)}</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\r\n                <div className=\"text-blue-800 text-sm\">\r\n                  <strong>Note:</strong> To remove this entry, please edit or delete the corresponding sale in the Sales section.\r\n                </div>\r\n              </div>\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Close</AlertDialogCancel>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    );\r\n  }\r\n\r\n  const stockChange = entry.newQuantity - entry.oldQuantity;\r\n\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle className=\"flex items-center gap-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-destructive\" />\r\n            Delete Stock History Entry\r\n          </AlertDialogTitle>\r\n          <AlertDialogDescription className=\"space-y-3\">\r\n            <p>\r\n              Are you sure you want to delete this stock history entry? This action cannot be undone.\r\n            </p>\r\n\r\n            <div className=\"bg-muted p-3 rounded-lg space-y-2\">\r\n              <div className=\"font-medium\">Entry Details:</div>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div><strong>Date:</strong> {format(entry.createdAt, 'PPP p')}</div>\r\n                <div><strong>Change:</strong> {entry.oldQuantity} → {entry.newQuantity}</div>\r\n                <div className={`${stockChange >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  <strong>Impact:</strong> {stockChange >= 0 ? '+' : ''}{stockChange} units\r\n                </div>\r\n                <div><strong>Reason:</strong> {formatChangeReason(entry.changeReason)}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-amber-50 border border-amber-200 p-3 rounded-lg\">\r\n              <div className=\"text-amber-800 text-sm\">\r\n                <strong>Warning:</strong> After deletion, the product's current stock will be automatically recalculated based on the remaining stock history entries.\r\n              </div>\r\n            </div>\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction\r\n            onClick={handleDelete}\r\n            disabled={isDeleting}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n          >\r\n            {isDeleting ? 'Deleting...' : 'Delete Entry'}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n\r\nexport default DeleteStockHistoryDialog;"],"names":[],"mappings":"wCAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,AAAV,CAAA,CAAA,CAAA,CAAA,QAAU,OAAA,EAAiB,SAAW,CAAA,CAAA,AAC1C,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAqD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAClF,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AACzC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC7C,CAAA,CAAA,gFCjBD,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAOA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,2EAYsE,CAAC,MACrE,CAAI,cACJ,CAAY,OACZ,CAAK,WACL,CAAS,gBACT,GAAiB,CAAK,CACtB,eAAe,EAAE,kBACjB,CAAgB,CACjB,IACC,GAAM,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,GAC5D,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiB,IAC7C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiB,IACzD,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,eAAE,CAAa,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IASrC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,IACF,EAAkB,CADT,CACe,WAAW,CAAG,EAAM,WAAW,EACvD,EAAa,EAAM,YAAY,EAC/B,EAAmB,IAEvB,CAF4B,CAEzB,CAAC,EAAM,EAEV,IAAM,EAAyB,CAAC,EAAmB,IAEjD,AAAI,EAAgB,GAAK,EAAY,EAC5B,CAD+B,eAN8B,iCAUlE,EAAgB,GAAK,EAAY,EAC5B,CAD+B,gDAGjC,GAGH,EAAuB,AAAC,IAE5B,GAAI,AAAU,OAAI,CAChB,EAAkB,IAClB,EAAmB,IACnB,MACF,CAEA,IAAM,EAAe,SAAS,IAAU,EAClC,EAAmC,KAAnB,EAAwB,EAAI,EAE5C,EAAQ,EAAuB,EAAc,GAG9C,EAKH,EAAmB,GALT,CACV,EAAkB,GAClB,EAAmB,IAKvB,EAMM,EAAe,MAAO,GAAiB,CAAK,IAChD,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAkC,KAAnB,EAAwB,EAAI,EAG3C,EAAiB,EAAM,WAAW,CAAG,EAAM,WAAW,CACtD,EAAQ,EAAuB,EAAc,GACnD,GAAI,EAAO,YACT,EAAM,CACJ,MAAO,0BACP,YAAa,EACb,QAAS,aACX,GAIF,IAAM,EAAc,EAAM,WAAW,CAAG,EAExC,GAAI,CAAC,EAAU,IAAI,GAAI,YACrB,EAAM,CACJ,MAAO,iBACP,YAAa,gDACb,QAAS,aACX,GAIF,GAAgB,GAEhB,GAAI,CACc,MAAM,EACpB,EAAM,EAAE,CACR,EACA,EAAU,IAAI,KAId,EAAM,CACJ,MAAO,wBACP,YAAa,wDACf,GACA,GAAa,IAEb,EAAM,CACJ,MAAO,gBACP,YAAa,0DACb,QAAS,aACX,EAEJ,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gCAAiC,GAC/C,EAAM,CACJ,MAAO,QACP,YAAa,sDACb,QAAS,aACX,EACF,QAAU,CACR,GAAgB,EAClB,CACF,EAEM,EAAe,KACnB,EAAa,GACf,EAEA,GAAI,CAAC,EAAO,OAAO,KAcnB,GAAI,EACF,MACE,CAAA,EAAA,EAAA,GAAA,AAFgB,EAEf,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,mJAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,oBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACH,KAAK,SACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAqB,EAAE,MAAM,CAAC,KAAK,EACpD,UAAW,EAAkB,+FAAiG,KAE/H,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,OAI7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,kBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,SACH,MAAO,EACP,SAAW,AAAD,GAAO,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,wCAMlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,EAAc,SAAU,WAAc,WAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,IAAM,IACf,SAAU,GAAgB,CAAC,EAAc,YAAa,6BAErD,EAAe,cAAgB,yBAS5C,GAhES,AADa,CAAC,AAiEnB,OAjE2B,cAAe,eAAgB,gBAAgB,CACzD,IAAI,CAAC,GAAU,AAgEb,EAhEmB,MAgEX,MAhEuB,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAO,WAAW,KAiE9F,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,sHAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,mBAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,IAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAM,SAAS,CAAE,YACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAE,EAAM,WAAW,CAAC,MAAI,EAAM,WAAW,IACtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAqB,AA7EvD,EA6E6D,YAAY,CA5E7E,OAAO,CAAC,eAAgB,yBAgFnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,qFAK5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,GAAa,YAAQ,iBASxE,IAAM,EAAiB,EAAM,WAAW,CAAG,EAAM,WAAW,CACtD,EAAkC,KAAnB,EAAwB,EAAI,EAC3C,EAAc,EAAM,WAAW,CAAG,EAGxC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,wBACvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,sHAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iCAAwB,aACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACZ,EAAM,WAAW,CAAC,MAAI,EAAM,WAAW,IAE1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,GAAkB,EAAI,iBAAmB,eAAA,CAAgB,WACjF,GAAkB,EAAI,IAAM,GAAI,QAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iCAAwB,QACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACZ,EAAM,WAAW,CAAC,MAAI,KAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,GAAa,EAAI,iBAAmB,eAAA,CAAgB,WAC5E,GAAa,EAAI,IAAM,GA7BpB,WAkCV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,oBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACH,KAAK,SACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAqB,EAAE,MAAM,CAAC,KAAK,EACpD,UAAW,EAAkB,+FAAiG,KAE/H,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CAAgC,MACvC,CAAoB,KAAnB,EAAwB,EAAI,CAAA,CAAc,CAAI,EAC/C,oEACA,uEAIP,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,OAI7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,kBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,SACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,wCAMlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,EAAc,SAAU,WAAc,WAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAS,IAAM,IACf,SAAU,GAAgB,CAAC,EAAc,YAAa,6BAErD,EAAe,cAAgB,wBAM5C,6EClWA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAWA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,2DAS0E,CAAC,MACzE,CAAI,cACJ,CAAY,OACZ,CAAK,CACL,WAAS,CACV,IACC,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAE,OAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEpB,EAAe,UACnB,GAAK,CAAD,EAEJ,EAAc,EAFF,EAIZ,GAAI,CACc,MAAM,EAAU,EAAM,EAAE,GAGtC,EAAM,CACJ,MAAO,wBACP,YAAa,kEACf,GACA,GAAa,IAEb,EAAM,CACJ,MAAO,gBACP,YAAa,0DACb,QAAS,aACX,EAEJ,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gCAAiC,GAC/C,EAAM,CACJ,MAAO,QACP,YAAa,sDACb,QAAS,aACX,EACF,QAAU,CACR,GAAc,EAChB,EACF,EAEA,GAAI,CAAC,EAAO,OAAO,KAcnB,GATS,AADa,CAUlB,AAVmB,OAAQ,cAAe,eAAgB,gBAAgB,CACzD,IAAI,CAAC,GAAU,AASb,EATmB,MASX,MATuB,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAO,WAAW,KAU9F,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAM,aAAc,WACrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,WACjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,UAAU,oCAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,0BAA0B,sCAGrD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,UAAU,sBAChC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,8FAIH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,mBAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,IAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAM,SAAS,CAAE,YACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAE,EAAM,WAAW,CAAC,MAAI,EAAM,WAAW,IACtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAqB,EAAM,YAAY,iDAIxE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,uGAK9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,iBAO7B,IAAM,EAAc,EAAM,WAAW,CAAG,EAAM,WAAW,CAEzD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAM,aAAc,WACrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,kBAAkB,CAAA,WACjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,gBAAgB,CAAA,CAAC,UAAU,oCAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,6BAA6B,gCAGxD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,UAAU,sBAChC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,4FAIH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,mBAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,IAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAM,SAAS,CAAE,YACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAE,EAAM,WAAW,CAAC,MAAI,EAAM,WAAW,IACtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAG,GAAe,EAAI,iBAAmB,eAAA,CAAgB,WACvE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAE,GAAe,EAAI,IAAM,GAAI,EAAY,YAErE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,YAAgB,IAAqB,AAlEvD,EAkE6D,YAAY,CAjE7E,OAAO,CAAC,eAAgB,yBAqEnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,2IAKjC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,SAAU,WAAY,WACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,QAAS,EACT,SAAU,EACV,UAAU,8EAET,EAAa,cAAgB,wBAM1C","ignoreList":[0]}