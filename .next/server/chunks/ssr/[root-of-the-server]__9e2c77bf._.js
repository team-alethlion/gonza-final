module.exports=[126741,a=>{"use strict";let b=(0,a.i(564375).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);a.s(["Printer",()=>b],126741)},852741,(a,b,c)=>{let d=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw d.code="MODULE_UNPARSABLE",d},121677,a=>{"use strict";a.s(["clearInventoryCaches",0,a=>{}])},482331,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(224993),f=a.i(964889),g=a.i(500885),h=a.i(121677),i=a.i(852741),j=b([e,f,g]);[e,f,g]=j.then?(await j)():j,a.s(["useProducts",0,(a,b=50)=>{let[c,j]=(0,d.useState)([]),[k,l]=(0,d.useState)(1),[m,n]=(0,d.useState)(b),[o,p]=(0,d.useState)(0),[q,r]=(0,d.useState)(!1),{settings:s}=(0,e.useBusinessSettings)(),{currentBusiness:t}=(0,f.useBusiness)(),u=(0,g.useQueryClient)(),[v,w]=(0,d.useState)({search:"",category:"all",stockStatus:"all"}),[x,y]=(0,d.useState)(null),z=(0,d.useCallback)(a=>{if(a.search!==v.search){r(!0),x&&clearTimeout(x);let a=setTimeout(()=>{r(!1)},600);y(a)}w(a)},[v.search,x]),A=(0,d.useCallback)(async()=>{if(!a||!t)return{products:[],count:0};try{return await (0,i.getProductsAction)({userId:a,businessId:t.id,page:k,pageSize:m,search:v.search,category:"all"===v.category?void 0:v.category,stockStatus:v.stockStatus})}catch(a){return console.error("Error loading products from server action:",a),{products:[],count:0}}},[a,t?.id,k,m,v.search,v.category,v.stockStatus]),B=(0,d.useMemo)(()=>["products",a,t?.id],[a,t?.id]),C=(0,d.useMemo)(()=>[...B,k,m,v.search,v.category,v.stockStatus],[B,k,m,v.search,v.category,v.stockStatus]),{data:D,isLoading:E,isFetching:F,refetch:G}=(0,g.useQuery)({queryKey:C,queryFn:A,enabled:!!a&&!!t?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0});(0,d.useEffect)(()=>{D&&(j(D.products),p(D.count))},[D]);let H=E&&!D&&!q,I=async b=>{try{if(!a)return null;return console.warn("Image upload redirecting to server action (TODO)"),null}catch(a){return console.error("Error in uploadProductImage:",a),null}},J=async b=>{try{if(!a||!t)return null;let c=await (0,i.createProductAction)({...b,userId:a,businessId:t.id});if(!c)return null;return j(a=>[c,...a]),p(a=>a+1),u.invalidateQueries({queryKey:B}),(0,h.clearInventoryCaches)(u),c}catch(a){return console.error("Error creating product:",a),null}},K=async(b,c,d,e=!1,f,g,j,k)=>{try{if(!a||!t)return!1;let g=c.imageUrl;if(d&&(g=await I(d)),!await (0,i.updateProductAction)(b,{...c,imageUrl:g,userId:a,businessId:t.id,isFromSale:e,customChangeReason:f,referenceId:j}))return!1;return u.invalidateQueries({queryKey:B}),(0,h.clearInventoryCaches)(u),!0}catch(a){return console.error("Error updating product:",a),!1}},L=async b=>{try{if(!a)return!1;if(await (0,i.deleteProductAction)(b))return u.invalidateQueries({queryKey:B}),(0,h.clearInventoryCaches)(u),!0;return!1}catch(a){return console.error("Error deleting product:",a),!1}},M=async(b,c,d,e,f,g)=>{try{if(!a||!t)return!1;let c=await (0,i.updateProductsBulkAction)(b.map(a=>({id:a.id,updated:a.updated})),t.id);return c&&(u.invalidateQueries({queryKey:B}),(0,h.clearInventoryCaches)(u)),c}catch(a){return console.error("Error in bulk update:",a),!1}};return{products:c,isLoading:H,loadProducts:A,page:k,setPage:l,pageSize:m,setPageSize:n,totalCount:o,createProduct:J,updateProduct:K,updateProductsBulk:M,deleteProduct:L,uploadProductImage:I,refetch:G,isFetching:F,filters:v,setFilters:z}}]),c()}catch(a){c(a)}},!1),506766,a=>{"use strict";let b=(0,a.i(564375).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],506766)},718192,a=>{"use strict";let b=(0,a.i(564375).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],718192)},120327,a=>{"use strict";let b=(0,a.i(564375).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],120327)},352519,a=>{"use strict";let b=(0,a.i(564375).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],352519)},755760,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(396465),f=a.i(914619),g=a.i(158799),h=a.i(393551),i=a.i(792071),j=b([e,g,h]);[e,g,h]=j.then?(await j)():j,a.s(["default",0,({dateRange:a,onDateRangeChange:b})=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",onClick:a=>{a.stopPropagation()},children:[(0,d.jsxs)(g.Popover,{children:[(0,d.jsx)(g.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(e.Button,{variant:"outline",className:"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal",children:[(0,d.jsx)(f.Calendar,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:a.from?(0,i.format)(a.from,"MMM d, yyyy"):"Start Date"})]})}),(0,d.jsx)(g.PopoverContent,{className:"w-auto p-0 z-[100] bg-white shadow-lg",align:"start",children:(0,d.jsx)(h.Calendar,{initialFocus:!0,mode:"single",defaultMonth:a?.from,selected:a?.from,onSelect:c=>b({...a,from:c}),className:"p-3 pointer-events-auto",showOutsideDays:!0})})]}),(0,d.jsx)("span",{className:"text-muted-foreground",children:"to"}),(0,d.jsxs)(g.Popover,{children:[(0,d.jsx)(g.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(e.Button,{variant:"outline",className:"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal",children:[(0,d.jsx)(f.Calendar,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:a.to?(0,i.format)(a.to,"MMM d, yyyy"):"End Date"})]})}),(0,d.jsx)(g.PopoverContent,{className:"w-auto p-0 z-[100] bg-white shadow-lg",align:"start",children:(0,d.jsx)(h.Calendar,{initialFocus:!0,mode:"single",defaultMonth:a?.to,selected:a?.to,onSelect:c=>b({...a,to:c}),className:"p-3 pointer-events-auto",showOutsideDays:!0})})]})]})]),c()}catch(a){c(a)}},!1),419068,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(566571),g=a.i(643228),h=(a.i(718192),a.i(799856)),i=a.i(396465),j=b([h,i]);[h,i]=j.then?(await j)():j;let k=({className:a,...b})=>(0,d.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,h.cn)("mx-auto flex w-full justify-center",a),...b});k.displayName="Pagination";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("ul",{ref:c,className:(0,h.cn)("flex flex-row items-center gap-1",a),...b}));l.displayName="PaginationContent";let m=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("li",{ref:c,className:(0,h.cn)("",a),...b}));m.displayName="PaginationItem";let n=({className:a,isActive:b,size:c="icon",...e})=>(0,d.jsx)("a",{"aria-current":b?"page":void 0,className:(0,h.cn)((0,i.buttonVariants)({variant:b?"outline":"ghost",size:c}),a),...e});n.displayName="PaginationLink";let o=({className:a,...b})=>(0,d.jsxs)(n,{"aria-label":"Go to previous page",size:"default",className:(0,h.cn)("gap-1 pl-2.5",a),...b,children:[(0,d.jsx)(f.ChevronLeft,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:"Previous"})]});o.displayName="PaginationPrevious";let p=({className:a,...b})=>(0,d.jsxs)(n,{"aria-label":"Go to next page",size:"default",className:(0,h.cn)("gap-1 pr-2.5",a),...b,children:[(0,d.jsx)("span",{children:"Next"}),(0,d.jsx)(g.ChevronRight,{className:"h-4 w-4"})]});p.displayName="PaginationNext",a.s(["Pagination",()=>k,"PaginationContent",()=>l,"PaginationItem",()=>m,"PaginationLink",()=>n,"PaginationNext",()=>p,"PaginationPrevious",()=>o]),c()}catch(a){c(a)}},!1),647952,a=>a.a(async(b,c)=>{try{let b=await a.y("jspdf-autotable-5c625e36d5d80eee");a.n(b),c()}catch(a){c(a)}},!0),637610,a=>{"use strict";let b=(0,a.i(564375).default)("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);a.s(["FileDown",()=>b],637610)},630227,a=>{"use strict";var b=a.i(127669);function c({items:a,itemsPerPage:c=20}){let[d,e]=(0,b.useState)(1),f=(0,b.useMemo)(()=>Math.max(1,Math.ceil(a.length/c)),[a,c]);(0,b.useMemo)(()=>{d>f&&e(f)},[f,d]);let g=(0,b.useMemo)(()=>{let b=(d-1)*c;return a.slice(b,b+c)},[a,d,c]);return{currentPage:d,setCurrentPage:e,paginatedItems:g,totalPages:f}}a.s(["usePagination",()=>c])},996217,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(419068),f=b([e]);[e]=f.then?(await f)():f,a.s(["default",0,({currentPage:a,totalPages:b,onPageChange:c})=>{let f=[];if(b<=3)for(let a=1;a<=b;a++)f.push(a);else{f.push(1);let c=Math.max(2,a-1),d=Math.min(b-1,a+1);d-c+1<1&&(a<b/2?d=Math.min(b-1,c+3-3):c=Math.max(2,d-3+3)),c>2&&f.push("...");for(let a=c;a<=d;a++)f.push(a);d<b-1&&f.push("..."),f.push(b)}return b<=1?null:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-4",children:[(0,d.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1",children:["Page ",a," of ",b]}),(0,d.jsx)(e.Pagination,{className:"mx-0 order-1 sm:order-2",children:(0,d.jsxs)(e.PaginationContent,{className:"gap-1",children:[(0,d.jsx)(e.PaginationItem,{children:(0,d.jsx)(e.PaginationPrevious,{onClick:()=>c(Math.max(1,a-1)),className:`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${1===a?"pointer-events-none opacity-50":"cursor-pointer"}`})}),f.map((b,f)=>(0,d.jsx)(e.PaginationItem,{className:"hidden sm:block",children:"..."===b?(0,d.jsx)("span",{className:"px-3 py-2 text-sm",children:"..."}):(0,d.jsx)(e.PaginationLink,{isActive:a===b,onClick:()=>c(Number(b)),className:"h-8 sm:h-9 w-8 sm:w-9 text-xs sm:text-sm",children:b})},f)),(0,d.jsx)(e.PaginationItem,{className:"sm:hidden",children:(0,d.jsx)("span",{className:"h-8 w-8 flex items-center justify-center text-xs font-medium",children:a})}),(0,d.jsx)(e.PaginationItem,{children:(0,d.jsx)(e.PaginationNext,{onClick:()=>c(Math.min(b,a+1)),className:`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${a===b?"pointer-events-none opacity-50":"cursor-pointer"}`})})]})})]})}]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__9e2c77bf._.js.map