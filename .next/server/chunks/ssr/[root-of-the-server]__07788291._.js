module.exports=[852741,(a,b,c)=>{let d=Error("Could not parse module '[project]/src/app/actions/products.ts'\n\n'import', and 'export' cannot be used outside of module code");throw d.code="MODULE_UNPARSABLE",d},493901,a=>{"use strict";let b=(0,a.i(564375).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],493901)},946032,a=>{"use strict";let b=(0,a.i(564375).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],946032)},2026,a=>{"use strict";let b=(0,a.i(564375).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],2026)},42720,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-alert-dialog-c4990a6b721eb22e");a.n(b),c()}catch(a){c(a)}},!0),893759,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(42720),g=a.i(799856),h=a.i(396465),i=b([f,g,h]);[f,g,h]=i.then?(await i)():i;let j=f.Root,k=f.Trigger,l=f.Portal,m=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Overlay,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));m.displayName=f.Overlay.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(l,{children:[(0,d.jsx)(m,{}),(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));n.displayName=f.Content.displayName;let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});o.displayName="AlertDialogHeader";let p=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});p.displayName="AlertDialogFooter";let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Title,{ref:c,className:(0,g.cn)("text-lg font-semibold",a),...b}));q.displayName=f.Title.displayName;let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Description,{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));r.displayName=f.Description.displayName;let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Action,{ref:c,className:(0,g.cn)((0,h.buttonVariants)(),a),...b}));s.displayName=f.Action.displayName;let t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Cancel,{ref:c,className:(0,g.cn)((0,h.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));t.displayName=f.Cancel.displayName,a.s(["AlertDialog",()=>j,"AlertDialogAction",()=>s,"AlertDialogCancel",()=>t,"AlertDialogContent",()=>n,"AlertDialogDescription",()=>r,"AlertDialogFooter",()=>p,"AlertDialogHeader",()=>o,"AlertDialogTitle",()=>q,"AlertDialogTrigger",()=>k]),c()}catch(a){c(a)}},!1),985522,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(108191),f=a.i(964889),g=a.i(852741),h=b([f]);[f]=h.then?(await h)():h,a.s(["useCategories",0,a=>{let[b,c]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),{toast:j}=(0,e.useToast)(),{currentBusiness:k}=(0,f.useBusiness)(),l=(0,d.useCallback)(async()=>{try{if(!k?.id){c([]),i(!1);return}i(!0);let a=await (0,g.getProductCategoriesAction)(k.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch categories");let b=a.data.map(a=>({id:a.id,name:a.name,createdAt:a.createdAt?new Date(a.createdAt):a.created_at?new Date(a.created_at):void 0}));c(b)}catch(a){console.error("Error loading categories:",a),j({title:"Error",description:"Failed to load product categories.",variant:"destructive"})}finally{i(!1)}},[k?.id,j]);(0,d.useEffect)(()=>{l()},[l]);let m=async d=>{try{if(!a||!k?.id)return null;let e=b.find(a=>a.name.toLowerCase()===d.toLowerCase());if(e)return j({title:"Category exists",description:"This category already exists."}),e;let f=await (0,g.createProductCategoryAction)(k.id,a,d);if(!f.success||!f.data)throw Error(f.error);let h={id:f.data.id,name:f.data.name,createdAt:new Date(f.data.createdAt)};return c(a=>[...a,h]),j({title:"Success",description:"Category created successfully"}),h}catch(a){return console.error("Error creating category:",a),j({title:"Error",description:"Failed to create category.",variant:"destructive"}),null}},n=async(a,d)=>{try{if(b.find(b=>b.name.toLowerCase()===d.toLowerCase()&&b.id!==a))return j({title:"Category exists",description:"Another category with this name already exists."}),!1;let e=await (0,g.updateProductCategoryAction)(a,d);if(!e.success)throw Error(e.error);return c(b=>b.map(b=>b.id===a?{...b,name:d}:b)),j({title:"Success",description:"Category updated successfully"}),!0}catch(a){return console.error("Error updating category:",a),j({title:"Error",description:"Failed to update category.",variant:"destructive"}),!1}},o=async a=>{try{let b=await (0,g.deleteProductCategoryAction)(a);if(!b.success)return j({title:"Cannot delete category",description:b.error||"Failed to delete category.",variant:"destructive"}),!1;return c(b=>b.filter(b=>b.id!==a)),j({title:"Success",description:"Category deleted successfully"}),!0}catch(a){return console.error("Error deleting category:",a),j({title:"Error",description:"Failed to delete category.",variant:"destructive"}),!1}};return{categories:b,isLoading:h,loadCategories:l,createCategory:m,updateCategory:n,deleteCategory:o}}]),c()}catch(a){c(a)}},!1),303748,a=>{"use strict";let b=(0,a.i(564375).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],303748)},669117,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(747899),g=a.i(396465),h=a.i(112779),i=a.i(2026),j=a.i(493901),k=a.i(303748),l=a.i(946032),m=a.i(531811),n=a.i(985522),o=a.i(811705),p=a.i(109254),q=a.i(893759),r=a.i(169320),s=b([g,h,m,n,o,p,q,r]);[g,h,m,n,o,p,q,r]=s.then?(await s)():s,a.s(["default",0,()=>{let a=(0,f.useNavigate)(),{user:b}=(0,m.useAuth)(),{categories:c,isLoading:s,createCategory:t,updateCategory:u,deleteCategory:v}=(0,n.useCategories)(b?.id),[w]=(0,f.useSearchParams)(),x=w.get("returnTo"),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(null),[C,D]=(0,e.useState)(""),[E,F]=(0,e.useState)(!1),G=async()=>{if(!y.trim())return void r.toast.error("Category name cannot be empty");F(!0);try{await t(y.trim())&&(r.toast.success("Category created successfully"),z(""))}finally{F(!1)}},H=async()=>{if(!A||!C.trim())return void r.toast.error("Category name cannot be empty");F(!0);try{await u(A,C.trim())&&(r.toast.success("Category updated successfully"),B(null),D(""))}finally{F(!1)}},I=async a=>{F(!0);try{await v(a)&&r.toast.success("Category deleted successfully")}finally{F(!1)}};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,d.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>{x?a(x):a("/products")},className:"flex items-center gap-1",children:[(0,d.jsx)(i.ArrowLeft,{className:"h-4 w-4"}),x?"Back to Product Form":"Back to Products"]})}),(0,d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl text-sales-dark",children:"Categories"}),(0,d.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your product categories"})]})}),(0,d.jsxs)(o.Card,{children:[(0,d.jsx)(o.CardHeader,{children:(0,d.jsxs)(o.CardTitle,{className:"flex items-center justify-between",children:["Add New Category",(0,d.jsxs)(p.Dialog,{children:[(0,d.jsx)(p.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{className:"flex items-center gap-2",children:[(0,d.jsx)(j.Plus,{className:"h-4 w-4"}),"Add Category"]})}),(0,d.jsxs)(p.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsxs)(p.DialogHeader,{children:[(0,d.jsx)(p.DialogTitle,{children:"Create New Category"}),(0,d.jsx)(p.DialogDescription,{children:"Enter a name for your new product category."})]}),(0,d.jsx)("div",{className:"py-4",children:(0,d.jsx)(h.Input,{placeholder:"Enter category name",value:y,onChange:a=>z(a.target.value)})}),(0,d.jsxs)(p.DialogFooter,{children:[(0,d.jsx)(p.DialogClose,{asChild:!0,children:(0,d.jsx)(g.Button,{variant:"outline",children:"Cancel"})}),(0,d.jsx)(g.Button,{onClick:G,disabled:!y.trim()||E,children:E?"Creating...":"Create Category"})]})]})]})]})}),(0,d.jsx)(o.CardContent,{children:(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:'Create categories to organize your products better. Click "Add Category" to get started.'})})]}),c.length>0&&(0,d.jsxs)(o.Card,{children:[(0,d.jsx)(o.CardHeader,{children:(0,d.jsxs)(o.CardTitle,{children:["Existing Categories (",c.length,")"]})}),(0,d.jsx)(o.CardContent,{children:(0,d.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md bg-gray-50",children:[(0,d.jsx)("h3",{className:"font-medium",children:a.name}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{var b,c;return b=a.id,c=a.name,void(B(b),D(c))},className:"flex items-center gap-1",children:[(0,d.jsx)(k.Pencil,{className:"h-4 w-4"}),"Edit"]}),(0,d.jsxs)(q.AlertDialog,{children:[(0,d.jsx)(q.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-destructive hover:text-destructive",children:[(0,d.jsx)(l.Trash2,{className:"h-4 w-4"}),"Delete"]})}),(0,d.jsxs)(q.AlertDialogContent,{children:[(0,d.jsxs)(q.AlertDialogHeader,{children:[(0,d.jsx)(q.AlertDialogTitle,{children:"Delete Category"}),(0,d.jsxs)(q.AlertDialogDescription,{children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone. Products using this category will need to be reassigned.']})]}),(0,d.jsxs)(q.AlertDialogFooter,{children:[(0,d.jsx)(q.AlertDialogCancel,{children:"Cancel"}),(0,d.jsx)(q.AlertDialogAction,{onClick:()=>I(a.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Category"})]})]})]})]})]},a.id))})})]}),null!==A&&(0,d.jsx)(p.Dialog,{open:null!==A,onOpenChange:a=>!a&&B(null),children:(0,d.jsxs)(p.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsxs)(p.DialogHeader,{children:[(0,d.jsx)(p.DialogTitle,{children:"Edit Category"}),(0,d.jsx)(p.DialogDescription,{children:"Update the name of this category."})]}),(0,d.jsx)("div",{className:"py-4",children:(0,d.jsx)(h.Input,{placeholder:"Enter category name",value:C,onChange:a=>D(a.target.value)})}),(0,d.jsxs)(p.DialogFooter,{children:[(0,d.jsx)(g.Button,{variant:"outline",onClick:()=>B(null),children:"Cancel"}),(0,d.jsx)(g.Button,{onClick:H,disabled:!C.trim()||E,children:E?"Saving...":"Save Changes"})]})]})}),0===c.length&&!s&&(0,d.jsx)(o.Card,{children:(0,d.jsx)(o.CardContent,{className:"py-8 text-center",children:(0,d.jsx)("p",{className:"text-muted-foreground mb-4",children:"No categories created yet. Create your first category to get started."})})})]})}]),c()}catch(a){c(a)}},!1),759950,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(539141),h=a.i(706555),i=a.i(669117),j=a.i(509193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Categories",pathname:"/Categories",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Categories",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__07788291._.js.map