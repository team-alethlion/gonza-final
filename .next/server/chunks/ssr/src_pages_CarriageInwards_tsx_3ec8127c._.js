module.exports=[418790,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(665967),e=a.i(699570),f=a.i(915618),g=a.i(669520),h=a.i(400210),i=a.i(391956),j=a.i(169819),k=a.i(256711),l=a.i(206015),m=a.i(591119),n=a.i(786304),o=a.i(824569),p=a.i(781560),q=a.i(177156),r=a.i(368114),s=a.i(866102),t=a.i(400291);let u=({carriageInwards:a,onEdit:c,onDelete:d,onView:f,isLoading:g})=>{let{settings:h}=(0,s.useBusinessSettings)(),{canViewCostPrice:i}=(0,t.useFinancialVisibility)(),j=h.currency||"USD",u=a.reduce((a,b)=>a+b.amount,0);return g?(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"p-6",children:(0,b.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,b.jsx)("div",{className:"animate-pulse",children:"Loading carriage inwards records..."})})})}):0===a.length?(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"No carriage inwards records found"}),(0,b.jsx)("p",{className:"text-sm",children:"Add your first transport cost record to get started."})]})})}):(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(m.CardTitle,{children:"Carriage Inwards Records"}),i&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),(0,b.jsx)("p",{className:"text-lg font-bold",children:(0,r.formatCashCurrency)(u,j)})]})]})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Date"}),(0,b.jsx)(l.TableHead,{children:"Supplier Name"}),(0,b.jsx)(l.TableHead,{children:"Details"}),i&&(0,b.jsx)(l.TableHead,{className:"text-right",children:"Amount"}),(0,b.jsx)(l.TableHead,{children:"Payment"}),(0,b.jsx)(l.TableHead,{className:"text-center",children:"Actions"})]})}),(0,b.jsx)(l.TableBody,{children:a.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{children:(0,k.format)(a.date,"MMM dd, yyyy")}),(0,b.jsx)(l.TableCell,{className:"font-medium",children:a.supplierName}),(0,b.jsx)(l.TableCell,{children:(0,b.jsx)("div",{className:"max-w-xs truncate",title:a.details,children:a.details})}),i&&(0,b.jsx)(l.TableCell,{className:"text-right font-medium",children:(0,r.formatCashCurrency)(a.amount,j)}),(0,b.jsx)(l.TableCell,{children:a.cashAccountId?(0,b.jsx)(n.Badge,{variant:"secondary",children:"Paid"}):(0,b.jsx)(n.Badge,{variant:"outline",children:"Not Linked"})}),(0,b.jsx)(l.TableCell,{children:(0,b.jsxs)("div",{className:"flex justify-center gap-1",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>f(a),title:"View details",children:(0,b.jsx)(q.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>c(a),title:"Edit record",children:(0,b.jsx)(o.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>d(a.id),title:"Delete record",children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},a.id))})]})})})]})};var v=a.i(866718),w=a.i(870430),x=a.i(429246),y=a.i(320146),z=a.i(599209),A=a.i(580701),B=a.i(730769),C=a.i(291914);let D=({onSubmit:a,onCancel:d,initialData:f,isEditing:g=!1})=>{let[h,i]=(0,c.useState)({supplierName:f?.supplierName||"",details:f?.details||"",amount:f?.amount||0,date:f?.date||new Date,cashAccountId:f?.cashAccountId||void 0}),[j,l]=(0,c.useState)(!1),{accounts:n}=(0,C.useCashAccounts)(),o=async b=>{if(b.preventDefault(),h.supplierName.trim()&&h.details.trim()&&!(h.amount<=0)){l(!0);try{await a(h)}finally{l(!1)}}},p=h.cashAccountId||"none";return(0,b.jsxs)(m.Card,{className:"w-full max-w-2xl mx-auto",children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:g?"Edit Carriage Inwards":"Add New Carriage Inwards"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"supplierName",children:"Supplier Name *"}),(0,b.jsx)(v.Input,{id:"supplierName",value:h.supplierName,onChange:a=>i({...h,supplierName:a.target.value}),onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),document.getElementById("details")?.focus())},placeholder:"Enter supplier name",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"details",children:"Details *"}),(0,b.jsx)(x.Textarea,{id:"details",value:h.details,onChange:a=>i({...h,details:a.target.value}),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),document.getElementById("amount")?.focus())},placeholder:"Enter transport details",rows:3,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"amount",children:"Amount *"}),(0,b.jsx)(v.Input,{id:"amount",type:"number",step:"0.01",min:"0",value:h.amount,onChange:a=>i({...h,amount:parseFloat(a.target.value)||0}),onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let b=document.querySelector('[role="combobox"]');b&&b.focus()}},placeholder:"0.00",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{children:"Date *"}),(0,b.jsxs)(z.Popover,{children:[(0,b.jsx)(z.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:(0,r.cn)("w-full justify-start text-left font-normal",!h.date&&"text-muted-foreground"),onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let b=document.querySelector('button[role="combobox"]:last-of-type');b&&b.focus()}},children:[(0,b.jsx)(B.CalendarIcon,{className:"mr-2 h-4 w-4"}),h.date?(0,k.format)(h.date,"PPP"):(0,b.jsx)("span",{children:"Pick a date"})]})}),(0,b.jsx)(z.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(y.Calendar,{mode:"single",selected:h.date,onSelect:a=>a&&i({...h,date:a}),disabled:a=>a>new Date,initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"cashAccount",children:"Cash Account (Optional)"}),(0,b.jsxs)(A.Select,{value:p,onValueChange:a=>{i({...h,cashAccountId:"none"===a?void 0:a}),setTimeout(()=>{let a=document.querySelector('button[type="submit"]');a?.focus()},100)},children:[(0,b.jsx)(A.SelectTrigger,{onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),setTimeout(()=>{let a=document.querySelector('button[type="submit"]');a?.focus()},100))},children:(0,b.jsx)(A.SelectValue,{placeholder:"Select a cash account"})}),(0,b.jsxs)(A.SelectContent,{children:[(0,b.jsx)(A.SelectItem,{value:"none",children:"No cash account"}),n.map(a=>(0,b.jsx)(A.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(e.Button,{type:"submit",disabled:j||!h.supplierName.trim()||!h.details.trim()||h.amount<=0,className:"flex-1",children:j?"Saving...":g?"Update":"Add"}),(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:d,disabled:j,className:"flex-1",children:"Cancel"})]})]})})]})};var E=a.i(672635),F=a.i(478793),G=a.i(770094),H=a.i(371844),I=a.i(890914);a.s(["default",0,()=>{let a=(0,d.useNavigate)(),{user:k}=(0,i.useAuth)(),{currentBusiness:l,isLoading:n}=(0,j.useBusiness)(),{toast:o}=(0,F.useToast)(),p=(0,G.useIsMobile)(),{settings:q}=(0,s.useBusinessSettings)(),{hasPermission:r}=(0,I.useProfiles)(),t=r("inventory","create"),v=r("inventory","edit"),w=r("inventory","delete"),{carriageInwards:x,isLoading:y,createCarriageInward:z,updateCarriageInward:A,deleteCarriageInward:B}=(0,E.useCarriageInwards)(),[C,J]=(0,c.useState)(!1),K=x.reduce((a,b)=>a+Number(b.amount),0),L=x.length,M=[...new Set(x.map(a=>a.supplierName))].length,N=x.filter(a=>{let b=new Date(a.date),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}).length,O=()=>{o({title:"Data refreshed",description:"Carriage inwards data has been updated."})};return n||!l||y?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,b.jsx)(H.default,{}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading carriage inwards data..."})]}):(0,b.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[(0,b.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>a("/inventory"),className:"shrink-0 h-8 w-8",title:"Back to inventory",children:(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg md:text-2xl lg:text-3xl font-bold text-sales-dark",children:"Carriage Inwards"}),(0,b.jsx)("p",{className:"text-xs md:text-base text-muted-foreground",children:"Track transportation and delivery costs for your inventory"})]})]}),p?(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[t&&(0,b.jsxs)(e.Button,{onClick:()=>J(!C),className:"flex-1 gap-2 h-9",variant:C?"outline":"default",children:[(0,b.jsx)(f.Plus,{size:16})," ",C?"Cancel":"Add Entry"]}),(0,b.jsx)(e.Button,{onClick:O,variant:"outline",size:"icon",disabled:y,className:"shrink-0 h-9 w-9",children:(0,b.jsx)(g.RefreshCw,{className:`h-4 w-4 ${y?"animate-spin":""}`})})]})}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:O,variant:"outline",size:"icon",disabled:y,title:"Refresh data",children:(0,b.jsx)(g.RefreshCw,{className:`h-4 w-4 ${y?"animate-spin":""}`})}),t&&(0,b.jsxs)(e.Button,{onClick:()=>J(!C),className:"gap-2",children:[(0,b.jsx)(f.Plus,{size:16})," ",C?"Cancel":"Add Entry"]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[(0,b.jsx)(m.Card,{className:"overflow-hidden",children:(0,b.jsx)(m.CardContent,{className:"p-3 md:p-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Amount"}),(0,b.jsxs)("p",{className:"text-lg md:text-xl font-bold",children:[q.currency||"USD"," ",K.toFixed(2)]})]})})}),(0,b.jsx)(m.Card,{className:"overflow-hidden",children:(0,b.jsx)(m.CardContent,{className:"p-3 md:p-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Entries"}),(0,b.jsx)("p",{className:"text-lg md:text-xl font-bold",children:L})]})})}),(0,b.jsx)(m.Card,{className:"overflow-hidden",children:(0,b.jsx)(m.CardContent,{className:"p-3 md:p-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suppliers"}),(0,b.jsx)("p",{className:"text-lg md:text-xl font-bold",children:M})]})})}),(0,b.jsx)(m.Card,{className:"overflow-hidden",children:(0,b.jsx)(m.CardContent,{className:"p-3 md:p-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This Month"}),(0,b.jsx)("p",{className:"text-lg md:text-xl font-bold",children:N})]})})})]}),C&&(0,b.jsxs)(m.Card,{className:"shadow-sm",children:[(0,b.jsx)(m.CardHeader,{className:"pb-2 md:pb-6",children:(0,b.jsx)(m.CardTitle,{className:"text-sm md:text-lg",children:"Add New Carriage Entry"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(D,{onSubmit:async a=>{try{await z(a),J(!1),o({title:"Entry created",description:"Carriage inwards entry has been successfully created."})}catch(a){o({title:"Error",description:"Failed to create carriage inwards entry.",variant:"destructive"})}},onCancel:()=>J(!1)})})]}),(0,b.jsxs)(m.Card,{className:"shadow-sm",children:[(0,b.jsx)(m.CardHeader,{className:"pb-2 md:pb-6",children:(0,b.jsx)(m.CardTitle,{className:"text-sm md:text-lg",children:"Carriage Inwards Entries"})}),(0,b.jsx)(m.CardContent,{className:"p-0",children:(0,b.jsx)(u,{carriageInwards:x,isLoading:y,onEdit:v?a=>{console.log("Edit record:",a)}:void 0,onDelete:w?B:void 0,onView:a=>{console.log("View record:",a)}})})]})]})}],418790)}];

//# sourceMappingURL=src_pages_CarriageInwards_tsx_3ec8127c._.js.map