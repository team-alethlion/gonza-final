module.exports=[768889,a=>{"use strict";var b=a.i(187924),c=a.i(591119),d=a.i(866718),e=a.i(870430),f=a.i(699570),g=a.i(596221),h=a.i(823292),i=a.i(391956),j=a.i(572131),k=a.i(170106);let l=(0,k.default)("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),m=(0,k.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var n=a.i(941961),o=a.i(660246),p=a.i(580701),q=a.i(284415);let r=[{value:"1-5",label:"1–5 employees"},{value:"6-20",label:"6–20 employees"},{value:"21-50",label:"21–50 employees"},{value:"50+",label:"50+ employees"}],s=({settings:a,onSettingsChange:g,onLogoChange:i})=>{let{onboarding:k,saveOnboarding:s}=(0,q.useOnboarding)(),[t,u]=j.default.useState(k?.nature_of_business??""),[v,w]=j.default.useState(k?.business_size??""),[x,y]=j.default.useState(!1);j.default.useEffect(()=>{k&&(u(k.nature_of_business??""),w(k.business_size??""))},[k]);let z=async()=>{if(k){y(!0);try{await s({...k,nature_of_business:t||void 0,business_size:v||void 0,completed:k.completed}),h.toast.success("Business details updated")}catch{h.toast.error("Failed to update business details")}finally{y(!1)}}};return(0,b.jsxs)(c.Card,{className:"mb-6",children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(c.CardTitle,{children:"Business Profile"})]})}),(0,b.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"businessLogo",children:"Business Logo"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[a.businessLogo&&(0,b.jsx)("img",{src:a.businessLogo,alt:"Business Logo",className:"w-16 h-16 object-contain"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(d.Input,{id:"businessLogo",type:"file",accept:"image/*",onChange:i,className:"hidden"}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>document.getElementById("businessLogo")?.click(),className:"w-full",children:[(0,b.jsx)(l,{className:"mr-2 h-4 w-4"}),"Upload Logo"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"currency",children:"Currency"}),(0,b.jsx)(d.Input,{id:"currency",name:"currency",value:a.currency,onChange:g,placeholder:"Enter your preferred currency (e.g., USD, EUR, GBP)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"defaultPrintFormat",children:"Default Receipt Format"}),(0,b.jsxs)(p.Select,{value:a.defaultPrintFormat||"standard",onValueChange:a=>g({target:{name:"defaultPrintFormat",value:a}}),children:[(0,b.jsx)(p.SelectTrigger,{className:"w-full",children:(0,b.jsx)(p.SelectValue,{placeholder:"Select default receipt format"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"standard",children:"Standard Receipt (A4/Letter)"}),(0,b.jsx)(p.SelectItem,{value:"thermal",children:"Thermal Receipt"})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose the default format for printing receipts. You can still switch formats when printing."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"businessName",children:"Business Name"}),(0,b.jsx)(d.Input,{id:"businessName",name:"businessName",value:a.businessName,onChange:g,placeholder:""})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"businessAddress",children:"Business Address"}),(0,b.jsx)(d.Input,{id:"businessAddress",name:"businessAddress",value:a.businessAddress,onChange:g,placeholder:""})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"businessPhone",children:"Business Phone"}),(0,b.jsx)(d.Input,{id:"businessPhone",name:"businessPhone",value:a.businessPhone,onChange:g,placeholder:""})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"businessEmail",children:"Business Email"}),(0,b.jsx)(d.Input,{id:"businessEmail",name:"businessEmail",value:a.businessEmail,onChange:g,type:"email",placeholder:""})]}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Additional Business Info"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(e.Label,{htmlFor:"natureOfBusiness",className:"flex items-center gap-2",children:[(0,b.jsx)(n.Briefcase,{className:"h-4 w-4 text-muted-foreground"}),"Nature of Business",(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-normal",children:"(optional)"})]}),(0,b.jsx)(d.Input,{id:"natureOfBusiness",value:t,onChange:a=>u(a.target.value),placeholder:""})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(e.Label,{htmlFor:"businessSizeSettings",className:"flex items-center gap-2",children:[(0,b.jsx)(o.Users,{className:"h-4 w-4 text-muted-foreground"}),"Business Size",(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-normal",children:"(optional)"})]}),(0,b.jsxs)(p.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(p.SelectTrigger,{id:"businessSizeSettings",className:"w-full",children:(0,b.jsx)(p.SelectValue,{placeholder:"Select number of employees"})}),(0,b.jsx)(p.SelectContent,{children:r.map(a=>(0,b.jsx)(p.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),k&&(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:z,disabled:x,className:"w-full",children:x?"Saving...":"Save Nature & Size"})]})]})]})};var t=a.i(206015),u=a.i(915618),v=a.i(781560),w=a.i(911156);let x=({paymentMethods:a,onPaymentMethodChange:e,onAddPaymentMethod:g,onRemovePaymentMethod:h})=>(0,b.jsxs)(c.Card,{className:"mb-6",children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.CreditCard,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(c.CardTitle,{children:"Payment Information"})]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:g,className:"text-xs",children:[(0,b.jsx)(u.Plus,{className:"mr-1 h-3 w-3"}),"Add Method"]})]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"border rounded-md p-3",children:(0,b.jsxs)(t.Table,{className:"text-sm w-full",children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{className:"bg-gray-100",children:[(0,b.jsx)(t.TableHead,{className:"font-medium py-1 px-2 w-[30%] text-left",children:"Payment Method"}),(0,b.jsx)(t.TableHead,{className:"font-medium py-1 px-2 w-[30%] text-left",children:"Account Number"}),(0,b.jsx)(t.TableHead,{className:"font-medium py-1 px-2 text-left",children:"Account Name"}),(0,b.jsx)(t.TableHead,{className:"w-[50px]"})]})}),(0,b.jsx)(t.TableBody,{children:a.length>0?a.map((a,c)=>(0,b.jsxs)(t.TableRow,{className:"border-b border-gray-100",children:[(0,b.jsx)(t.TableCell,{className:"py-1 px-2",children:(0,b.jsx)(d.Input,{value:a.method,onChange:a=>e(c,"method",a.target.value),placeholder:"e.g., Bank Transfer",className:"w-full p-1 h-8 text-sm"})}),(0,b.jsx)(t.TableCell,{className:"py-1 px-2",children:(0,b.jsx)(d.Input,{value:a.accountNumber,onChange:a=>e(c,"accountNumber",a.target.value),placeholder:"e.g., 12345678",className:"w-full p-1 h-8 text-sm"})}),(0,b.jsx)(t.TableCell,{className:"py-1 px-2",children:(0,b.jsx)(d.Input,{value:a.accountName,onChange:a=>e(c,"accountName",a.target.value),placeholder:"e.g., John Doe",className:"w-full p-1 h-8 text-sm"})}),(0,b.jsx)(t.TableCell,{className:"py-1 px-2",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>h(c),className:"h-6 w-6 text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,b.jsx)(v.Trash2,{className:"h-4 w-4"})})})]},`payment-${c}`)):(0,b.jsx)(t.TableRow,{children:(0,b.jsx)(t.TableCell,{colSpan:4,className:"text-center py-4 text-sm text-muted-foreground",children:'No payment methods added yet. Click "Add Method" to add one.'})})})]})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Enter payment information to display on receipts. Each row will appear in the payment information table on receipts. Leave empty if you don't want to show payment information."})]})]}),y=(0,k.default)("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]),z=(0,k.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var A=a.i(633508);let B=(0,k.default)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);var C=class{x;y;pressure;time;constructor(a,b,c,d){if(isNaN(a)||isNaN(b))throw Error(`Point is invalid: (${a}, ${b})`);this.x=+a,this.y=+b,this.pressure=c||0,this.time=d||Date.now()}distanceTo(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))}equals(a){return this.x===a.x&&this.y===a.y&&this.pressure===a.pressure&&this.time===a.time}velocityFrom(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):0}},D=class a{constructor(a,b,c,d,e,f){this.startPoint=a,this.control2=b,this.control1=c,this.endPoint=d,this.startWidth=e,this.endWidth=f}static fromPoints(b,c){let d=this.calculateControlPoints(b[0],b[1],b[2]).c2,e=this.calculateControlPoints(b[1],b[2],b[3]).c1;return new a(b[1],d,e,b[2],c.start,c.end)}static calculateControlPoints(a,b,c){let d=a.x-b.x,e=a.y-b.y,f=b.x-c.x,g=b.y-c.y,h={x:(a.x+b.x)/2,y:(a.y+b.y)/2},i={x:(b.x+c.x)/2,y:(b.y+c.y)/2},j=Math.sqrt(d*d+e*e),k=Math.sqrt(f*f+g*g),l=h.x-i.x,m=h.y-i.y,n=j+k==0?0:k/(j+k),o={x:i.x+l*n,y:i.y+m*n},p=b.x-o.x,q=b.y-o.y;return{c1:new C(h.x+p,h.y+q),c2:new C(i.x+p,i.y+q)}}length(){let a,b,c=0;for(let d=0;d<=10;d+=1){let e=d/10,f=this.point(e,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),g=this.point(e,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(d>0){let d=f-a,e=g-b;c+=Math.sqrt(d*d+e*e)}a=f,b=g}return c}point(a,b,c,d,e){return b*(1-a)*(1-a)*(1-a)+3*c*(1-a)*(1-a)*a+3*d*(1-a)*a*a+e*a*a*a}},E=class{_et;constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(a,b,c){this._et.addEventListener(a,b,c)}dispatchEvent(a){return this._et.dispatchEvent(a)}removeEventListener(a,b,c){this._et.removeEventListener(a,b,c)}},F=class a extends E{constructor(b,c={}){super(),this.canvas=b,this.velocityFilterWeight=c.velocityFilterWeight||.7,this.minWidth=c.minWidth||.5,this.maxWidth=c.maxWidth||2.5,this.throttle=c.throttle??16,this.minDistance=c.minDistance??5,this.dotSize=c.dotSize||0,this.penColor=c.penColor||"black",this.backgroundColor=c.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=c.compositeOperation||"source-over",this.canvasContextOptions=c.canvasContextOptions??{},this._strokeMoveUpdate=this.throttle?function(a,b=250){let c,d,e,f=0,g=null,h=()=>{f=Date.now(),g=null,c=a.apply(d,e),g||(d=null,e=[])};return function(...i){let j=Date.now(),k=b-(j-f);return d=this,e=i,k<=0||k>b?(g&&(clearTimeout(g),g=null),f=j,c=a.apply(d,e),g||(d=null,e=[])):g||(g=window.setTimeout(h,k)),c}}(a.prototype._strokeUpdate,this.throttle):a.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._handlePointerCancel=this._handlePointerCancel.bind(this),this._handleTouchCancel=this._handleTouchCancel.bind(this),this._ctx=b.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}dotSize;minWidth;maxWidth;penColor;minDistance;velocityFilterWeight;compositeOperation;backgroundColor;throttle;canvasContextOptions;_ctx;_drawingStroke=!1;_isEmpty=!0;_dataUrl;_dataUrlOptions;_lastPoints=[];_data=[];_lastVelocity=0;_lastWidth=0;_strokeMoveUpdate;_strokePointerId;clear(){let{_ctx:a,canvas:b}=this;a.fillStyle=this.backgroundColor,a.clearRect(0,0,b.width,b.height),a.fillRect(0,0,b.width,b.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._dataUrl=void 0,this._dataUrlOptions=void 0,this._strokePointerId=void 0}redraw(){let a=this._data,b=this._dataUrl,c=this._dataUrlOptions;this.clear(),b&&this.fromDataURL(b,c),this.fromData(a,{clear:!1})}fromDataURL(a,b={}){return new Promise((c,d)=>{let e=new Image,f=b.ratio||window.devicePixelRatio||1,g=b.width||this.canvas.width/f,h=b.height||this.canvas.height/f,i=b.xOffset||0,j=b.yOffset||0;this._reset(this._getPointGroupOptions()),e.onload=()=>{this._ctx.drawImage(e,i,j,g,h),c()},e.onerror=a=>{d(a)},e.crossOrigin="anonymous",e.src=a,this._isEmpty=!1,this._dataUrl=a,this._dataUrlOptions={...b}})}toDataURL(a="image/png",b){return"image/svg+xml"===a?("object"!=typeof b&&(b=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(b))}`):("number"!=typeof b&&(b=void 0),this.canvas.toDataURL(a,b))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none",this.canvas.style.webkitUserSelect="none";let a=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!a?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.style.webkitUserSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){let a=window.document===this.canvas.ownerDocument?window:this.canvas.ownerDocument.defaultView??this.canvas.ownerDocument;return{addEventListener:a.addEventListener.bind(a),removeEventListener:a.removeEventListener.bind(a)}}_removeMoveUpEventListeners(){let{removeEventListener:a}=this._getListenerFunctions();a("pointermove",this._handlePointerMove),a("pointerup",this._handlePointerUp),a("pointercancel",this._handlePointerCancel),a("mousemove",this._handleMouseMove),a("mouseup",this._handleMouseUp),a("touchmove",this._handleTouchMove),a("touchend",this._handleTouchEnd),a("touchcancel",this._handleTouchCancel)}isEmpty(){return this._isEmpty}fromData(a,{clear:b=!0}={}){b&&this.clear(),this._fromData(a,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(a)}toData(){return this._data}_isLeftButtonPressed(a,b){return b?1===a.buttons:(1&a.buttons)==1}_pointerEventToSignatureEvent(a){return{event:a,type:a.type,x:a.clientX,y:a.clientY,pressure:"pressure"in a?a.pressure:0}}_touchEventToSignatureEvent(a){let b=a.changedTouches[0];return{event:a,type:a.type,x:b.clientX,y:b.clientY,pressure:b.force}}_handleMouseDown(a){this._isLeftButtonPressed(a,!0)&&!this._drawingStroke&&this._strokeBegin(this._pointerEventToSignatureEvent(a))}_handleMouseMove(a){this._isLeftButtonPressed(a,!0)&&this._drawingStroke?this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a)):this._strokeEnd(this._pointerEventToSignatureEvent(a),!1)}_handleMouseUp(a){this._isLeftButtonPressed(a)||this._strokeEnd(this._pointerEventToSignatureEvent(a))}_handleTouchStart(a){1!==a.targetTouches.length||this._drawingStroke||(a.cancelable&&a.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(a)))}_handleTouchMove(a){if(1===a.targetTouches.length){if(a.cancelable&&a.preventDefault(),!this._drawingStroke)return void this._strokeEnd(this._touchEventToSignatureEvent(a),!1);this._strokeMoveUpdate(this._touchEventToSignatureEvent(a))}}_handleTouchEnd(a){0===a.targetTouches.length&&(a.cancelable&&a.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(a)))}_handlePointerCancel(a){this._allowPointerId(a)&&(a.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(a),!1))}_handleTouchCancel(a){a.cancelable&&a.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(a),!1)}_getPointerId(a){return a.persistentDeviceId||a.pointerId}_allowPointerId(a,b=!1){return void 0===this._strokePointerId?b:this._getPointerId(a)===this._strokePointerId}_handlePointerDown(a){!this._drawingStroke&&this._isLeftButtonPressed(a)&&this._allowPointerId(a,!0)&&(this._strokePointerId=this._getPointerId(a),a.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(a)))}_handlePointerMove(a){if(this._allowPointerId(a)){if(!this._isLeftButtonPressed(a,!0)||!this._drawingStroke)return void this._strokeEnd(this._pointerEventToSignatureEvent(a),!1);a.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a))}}_handlePointerUp(a){!this._isLeftButtonPressed(a)&&this._allowPointerId(a)&&(a.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(a)))}_getPointGroupOptions(a){return{penColor:a&&"penColor"in a?a.penColor:this.penColor,dotSize:a&&"dotSize"in a?a.dotSize:this.dotSize,minWidth:a&&"minWidth"in a?a.minWidth:this.minWidth,maxWidth:a&&"maxWidth"in a?a.maxWidth:this.maxWidth,velocityFilterWeight:a&&"velocityFilterWeight"in a?a.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:a&&"compositeOperation"in a?a.compositeOperation:this.compositeOperation}}_strokeBegin(a){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:a,cancelable:!0})))return;let{addEventListener:b}=this._getListenerFunctions();switch(a.event.type){case"mousedown":b("mousemove",this._handleMouseMove,{passive:!1}),b("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":b("touchmove",this._handleTouchMove,{passive:!1}),b("touchend",this._handleTouchEnd,{passive:!1}),b("touchcancel",this._handleTouchCancel,{passive:!1});break;case"pointerdown":b("pointermove",this._handlePointerMove,{passive:!1}),b("pointerup",this._handlePointerUp,{passive:!1}),b("pointercancel",this._handlePointerCancel,{passive:!1})}this._drawingStroke=!0;let c=this._getPointGroupOptions(),d={...c,points:[]};this._data.push(d),this._reset(c),this._strokeUpdate(a)}_strokeUpdate(a){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(a);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:a}));let b=this._createPoint(a.x,a.y,a.pressure),c=this._data[this._data.length-1],d=c.points,e=d.length>0&&d[d.length-1],f=!!e&&b.distanceTo(e)<=this.minDistance,g=this._getPointGroupOptions(c);if(!e||!(e&&f)){let a=this._addPoint(b,g);e?a&&this._drawCurve(a,g):this._drawDot(b,g),d.push({time:b.time,x:b.x,y:b.y,pressure:b.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:a}))}_strokeEnd(a,b=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(b&&this._strokeUpdate(a),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:a})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(a){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(a.minWidth+a.maxWidth)/2,this._ctx.fillStyle=a.penColor,this._ctx.globalCompositeOperation=a.compositeOperation}_createPoint(a,b,c){let d=this.canvas.getBoundingClientRect();return new C(a-d.left,b-d.top,c,new Date().getTime())}_addPoint(a,b){let{_lastPoints:c}=this;if(c.push(a),c.length>2){3===c.length&&c.unshift(c[0]);let a=this._calculateCurveWidths(c[1],c[2],b),d=D.fromPoints(c,a);return c.shift(),d}return null}_calculateCurveWidths(a,b,c){let d=c.velocityFilterWeight*b.velocityFrom(a)+(1-c.velocityFilterWeight)*this._lastVelocity,e=this._strokeWidth(d,c),f={end:e,start:this._lastWidth};return this._lastVelocity=d,this._lastWidth=e,f}_strokeWidth(a,b){return Math.max(b.maxWidth/(a+1),b.minWidth)}_drawCurveSegment(a,b,c){let d=this._ctx;d.moveTo(a,b),d.arc(a,b,c,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(a,b){let c=this._ctx,d=a.endWidth-a.startWidth,e=2*Math.ceil(a.length());c.beginPath(),c.fillStyle=b.penColor;for(let c=0;c<e;c+=1){let f=c/e,g=f*f,h=g*f,i=1-f,j=i*i,k=j*i,l=k*a.startPoint.x;l+=3*j*f*a.control1.x+3*i*g*a.control2.x+h*a.endPoint.x;let m=k*a.startPoint.y;m+=3*j*f*a.control1.y+3*i*g*a.control2.y+h*a.endPoint.y;let n=Math.min(a.startWidth+h*d,b.maxWidth);this._drawCurveSegment(l,m,n)}c.closePath(),c.fill()}_drawDot(a,b){let c=this._ctx,d=b.dotSize>0?b.dotSize:(b.minWidth+b.maxWidth)/2;c.beginPath(),this._drawCurveSegment(a.x,a.y,d),c.closePath(),c.fillStyle=b.penColor,c.fill()}_fromData(a,b,c){for(let d of a){let{points:a}=d,e=this._getPointGroupOptions(d);if(a.length>1)for(let c=0;c<a.length;c+=1){let d=a[c],f=new C(d.x,d.y,d.pressure,d.time);0===c&&this._reset(e);let g=this._addPoint(f,e);g&&b(g,e)}else this._reset(e),c(a[0],e)}}toSVG({includeBackgroundColor:a=!1,includeDataUrl:b=!1}={}){let c=this._data,d=Math.max(window.devicePixelRatio||1,1),e=this.canvas.width/d,f=this.canvas.height/d,g=document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.setAttribute("xmlns","http://www.w3.org/2000/svg"),g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("viewBox",`0 0 ${e} ${f}`),g.setAttribute("width",e.toString()),g.setAttribute("height",f.toString()),a&&this.backgroundColor){let a=document.createElement("rect");a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("fill",this.backgroundColor),g.appendChild(a)}if(b&&this._dataUrl){let a=this._dataUrlOptions?.ratio||window.devicePixelRatio||1,b=this._dataUrlOptions?.width||this.canvas.width/a,c=this._dataUrlOptions?.height||this.canvas.height/a,d=this._dataUrlOptions?.xOffset||0,e=this._dataUrlOptions?.yOffset||0,f=document.createElement("image");f.setAttribute("x",d.toString()),f.setAttribute("y",e.toString()),f.setAttribute("width",b.toString()),f.setAttribute("height",c.toString()),f.setAttribute("preserveAspectRatio","none"),f.setAttribute("href",this._dataUrl),g.appendChild(f)}return this._fromData(c,(a,{penColor:b})=>{let c=document.createElement("path");if(!isNaN(a.control1.x)&&!isNaN(a.control1.y)&&!isNaN(a.control2.x)&&!isNaN(a.control2.y)){let d=`M ${a.startPoint.x.toFixed(3)},${a.startPoint.y.toFixed(3)} C ${a.control1.x.toFixed(3)},${a.control1.y.toFixed(3)} ${a.control2.x.toFixed(3)},${a.control2.y.toFixed(3)} ${a.endPoint.x.toFixed(3)},${a.endPoint.y.toFixed(3)}`;c.setAttribute("d",d),c.setAttribute("stroke-width",(2.25*a.endWidth).toFixed(3)),c.setAttribute("stroke",b),c.setAttribute("fill","none"),c.setAttribute("stroke-linecap","round"),g.appendChild(c)}},(a,{penColor:b,dotSize:c,minWidth:d,maxWidth:e})=>{let f=document.createElement("circle");f.setAttribute("r",(c>0?c:(d+e)/2).toString()),f.setAttribute("cx",a.x.toString()),f.setAttribute("cy",a.y.toString()),f.setAttribute("fill",b),g.appendChild(f)}),g.outerHTML}},G=a.i(114548),H=a.i(824569);let I=({onSave:a,existingSignature:d,className:e=""})=>{let g=(0,j.useRef)(null),h=(0,j.useRef)(null),[i,k]=(0,j.useState)(!1),[l,m]=(0,j.useState)(!d);(0,j.useEffect)(()=>{if(g.current&&l){h.current=new F(g.current,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)",minWidth:2,maxWidth:4,throttle:16,minDistance:5});let a=h.current,b=()=>k(!0),c=()=>k(!1);a.addEventListener("beginStroke",b),a.addEventListener("endStroke",c);let d=()=>{if(g.current){let b=g.current,c=b.parentElement;if(c){let d=c.getBoundingClientRect(),e=Math.max(window.devicePixelRatio||1,1);b.width=d.width*e,b.height=200*e,b.style.width=`${d.width}px`,b.style.height="200px";let f=b.getContext("2d");f&&f.scale(e,e),a.clear()}}};return d(),window.addEventListener("resize",d),()=>{a.removeEventListener("beginStroke",b),a.removeEventListener("endStroke",c),window.removeEventListener("resize",d),a.off()}}},[l]);let n=h.current&&!h.current.isEmpty();return!l&&d?(0,b.jsx)("div",{className:`space-y-4 ${e}`,children:(0,b.jsx)(c.Card,{className:"p-4",children:(0,b.jsx)(c.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"text-center space-y-3",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Signature:"}),(0,b.jsx)("div",{className:"border rounded-lg p-4 bg-white",children:(0,b.jsx)("img",{src:d,alt:"Current Signature",className:"max-h-24 mx-auto object-contain"})}),(0,b.jsxs)(f.Button,{onClick:()=>m(!0),variant:"outline",className:"w-full",children:[(0,b.jsx)(H.Edit,{className:"mr-2 h-4 w-4"}),"Replace Signature"]})]})})})}):(0,b.jsx)("div",{className:`space-y-4 ${e}`,children:(0,b.jsx)(c.Card,{className:"p-4",children:(0,b.jsx)(c.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Draw your signature using your finger or stylus"})}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg bg-white relative overflow-hidden",children:[(0,b.jsx)("canvas",{ref:g,className:"w-full h-[200px] touch-none",style:{touchAction:"none"}}),!n&&!i&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"Sign here"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{onClick:()=>{h.current&&(h.current.clear(),k(!1))},variant:"outline",className:"flex-1",disabled:!n,children:[(0,b.jsx)(v.Trash2,{className:"mr-2 h-4 w-4"}),"Clear"]}),(0,b.jsxs)(f.Button,{onClick:()=>{h.current&&!h.current.isEmpty()&&(a(h.current.toDataURL("image/png",.8)),m(!1))},className:"flex-1",disabled:!n,children:[(0,b.jsx)(G.Save,{className:"mr-2 h-4 w-4"}),"Save Signature"]})]}),d&&(0,b.jsx)(f.Button,{onClick:()=>m(!1),variant:"ghost",className:"w-full",children:"Cancel"})]})})})})};var J=a.i(770094);let K=({signature:a,onChange:c,onRemove:g})=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"signature",children:"Upload Signature Image"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[a&&(0,b.jsxs)("div",{className:"relative border rounded bg-white p-2",children:[(0,b.jsx)("img",{src:a,alt:"Business Signature",className:"w-32 h-16 object-contain"}),(0,b.jsx)(f.Button,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:g,children:(0,b.jsx)(A.X,{className:"h-3 w-3"})})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(d.Input,{id:"signature",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{c(a.result)},a.readAsDataURL(b)}},className:"hidden"}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>document.getElementById("signature")?.click(),className:"w-full",children:[(0,b.jsx)(y,{className:"mr-2 h-4 w-4"}),a?"Change Signature":"Upload Signature"]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload an image of your signature to display on receipts and invoices, or remove it if you don't want to include it"})]}),L=({signature:a,onSignatureChange:d,onSignaturePadSave:f,onRemoveSignature:g})=>{let h=(0,J.useIsMobile)();return(0,b.jsxs)(c.Card,{className:"mb-6",children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(B,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(c.CardTitle,{children:"Business Signature"})]})}),(0,b.jsxs)(c.CardContent,{className:"space-y-4",children:[h&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(z,{className:"h-4 w-4 text-blue-600"}),(0,b.jsx)(e.Label,{className:"text-sm font-medium text-blue-600",children:"Draw Your Signature"})]}),(0,b.jsx)(I,{onSave:f,existingSignature:a})]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(K,{signature:a,onChange:d,onRemove:g})})]})]})};var M=a.i(603314),N=a.i(992258),O=a.i(357999),P=a.i(814574);let Q=({onRequestDataDeletion:a})=>(0,b.jsxs)(c.Card,{className:"mb-6",children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(M.Shield,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(c.CardTitle,{children:"Privacy & Data"})]}),(0,b.jsx)(c.CardDescription,{children:"Manage your privacy settings and data"})]}),(0,b.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:"Privacy Policy"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Review our privacy policy"})]}),(0,b.jsx)(f.Button,{variant:"outline",asChild:!0,children:(0,b.jsx)(O.Link,{to:"/privacy-policy",children:"View Policy"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:"Delete My Data"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Request deletion of your personal information"})]}),(0,b.jsxs)(P.Dialog,{children:[(0,b.jsx)(P.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(N.Mail,{className:"mr-2 h-4 w-4"}),"Request Deletion"]})}),(0,b.jsxs)(P.DialogContent,{children:[(0,b.jsxs)(P.DialogHeader,{children:[(0,b.jsx)(P.DialogTitle,{children:"Request Data Deletion"}),(0,b.jsx)(P.DialogDescription,{children:"This will open your email client to send a request for data deletion. Our team will process your request and contact you for verification."})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,b.jsx)(P.DialogClose,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"outline",children:"Cancel"})}),(0,b.jsx)(f.Button,{onClick:a,children:"Proceed"})]})]})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"You can request deletion of your account and associated data at any time."})]})]});var R=a.i(866102),S=a.i(786304),T=a.i(284505),U=a.i(669520),V=a.i(771931),W=a.i(452495),X=a.i(167453),Y=a.i(292e3),Z=a.i(165385),$=a.i(478793);let _=()=>{let{toast:a}=(0,$.useToast)(),{settings:d,updateSettings:h}=(0,R.useBusinessSettings)(),[i,k]=(0,j.useState)(!1),[l,m]=(0,j.useState)(null),[n,o]=(0,j.useState)([]),[q,r]=(0,j.useState)("checking"),s=async()=>{for(let a of["http://localhost:5000","http://127.0.0.1:5000"])try{let b=await fetch(`${a}/printers`,{signal:AbortSignal.timeout(3e3),mode:"cors"});if(b.ok){r("online");let a=await b.json();o(a||[]);return}}catch(a){}r("offline")};(0,j.useEffect)(()=>{s();let a=setInterval(s,1e4);return()=>clearInterval(a)},[]);let t=async()=>{k(!0);try{let b=await fetch("http://localhost:5000/printers");if(b.ok){let c=await b.json();o(c||[]),r("online"),a({title:"Scan complete",description:`Found ${c.length} printers.`})}else throw Error("Bridge offline")}catch(b){r("offline"),a({title:"Scan failed",description:"Could not connect to Printer Bridge. Make sure it is installed and running.",variant:"destructive"})}finally{k(!1)}},u=async b=>{m(b);try{await h({defaultPrinterName:b})&&a({title:"Default printer updated",description:`${b} is now your default printer.`})}finally{m(null)}};return(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(c.CardTitle,{className:"text-xl flex items-center gap-2",children:["Printer Bridge","online"===q?(0,b.jsx)(S.Badge,{variant:"success",className:"bg-green-500 hover:bg-green-600",children:"Connected"}):"offline"===q?(0,b.jsx)(S.Badge,{variant:"destructive",children:"Offline"}):(0,b.jsx)(S.Badge,{variant:"secondary",children:"Checking..."})]}),(0,b.jsx)(c.CardDescription,{children:"Connect to local thermal printers and barcode label printers."})]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{window.open("/PRINTER-BRIDGE-GUIDE.pdf","_blank")},className:"gap-2",children:[(0,b.jsx)(W.ExternalLink,{className:"h-4 w-4"}),"Guide"]})]})}),(0,b.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-muted/30 p-4 rounded-lg border border-dashed text-center",children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Need the Printer Bridge app?"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Download and install our bridge service to enable high-speed local printing."}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,b.jsxs)(f.Button,{onClick:()=>{window.open("/PrinterBridge-Setup.zip","_blank")},className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(T.Download,{className:"h-4 w-4"}),"Download Printer Bridge"]}),(0,b.jsxs)(f.Button,{variant:"outline",className:"gap-2 border-blue-200 hover:bg-blue-50 hover:text-blue-700",onClick:()=>window.open("https://drive.google.com/drive/folders/1xWpU63y1tKVnTVF5ftNVyhL82oR_EjnG?usp=sharing","_blank"),children:[(0,b.jsx)(W.ExternalLink,{className:"h-4 w-4"}),"Download Drivers"]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-b pb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(Z.Settings2,{className:"h-5 w-5 text-gray-500"}),(0,b.jsx)("h4",{className:"font-semibold text-base",children:"Configuration"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"paper-size",children:"Thermal Paper Size"}),(0,b.jsxs)(p.Select,{value:d.printerPaperSize||"58mm",onValueChange:a=>h({printerPaperSize:a}),children:[(0,b.jsx)(p.SelectTrigger,{id:"paper-size",children:(0,b.jsx)(p.SelectValue,{placeholder:"Select paper size"})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"58mm",children:"58mm (Standard Receipt)"}),(0,b.jsx)(p.SelectItem,{value:"80mm",children:"80mm (Wide Receipt)"})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"58mm aligns left. 80mm centers content."})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(e.Label,{className:"text-base font-semibold",children:"Connected Printers"}),(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:t,disabled:i,className:"gap-2",children:[(0,b.jsx)(U.RefreshCw,{className:`h-4 w-4 ${i?"animate-spin":""}`}),"Scan"]})]}),"offline"===q?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-md text-sm",children:[(0,b.jsx)(Y.AlertCircle,{className:"h-4 w-4"}),"Bridge service is not responding."]}),(0,b.jsxs)("div",{className:"text-xs space-y-2 p-3 bg-muted rounded-md border",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Troubleshooting Steps:"}),(0,b.jsxs)("ol",{className:"list-decimal ml-4 space-y-1",children:[(0,b.jsx)("li",{children:'Ensure the Printer Bridge app is open and shows "Server running on port 5000".'}),(0,b.jsxs)("li",{children:["If using Chrome, try opening ",(0,b.jsx)("a",{href:"http://localhost:5000/printers",target:"_blank",className:"text-blue-600 underline",children:"this link"})," manually. If it works there but not here, it's a browser security block."]}),(0,b.jsx)("li",{children:"Try restarting the bridge app."})]})]})]}):0===n.length?(0,b.jsx)("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-md italic",children:"No printers found. Make sure your printers are turned on and connected to your computer."}):(0,b.jsx)("div",{className:"grid gap-2",children:n.map(a=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 border rounded-md ${d.defaultPrinterName===a.name?"bg-secondary/20 border-secondary":"bg-card"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(V.Printer,{className:`h-5 w-5 ${d.defaultPrinterName===a.name?"text-secondary":"text-muted-foreground"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[d.defaultPrinterName===a.name&&(0,b.jsxs)("p",{className:"text-xs text-secondary-foreground flex items-center gap-1",children:[(0,b.jsx)(X.CheckCircle2,{className:"h-3 w-3"})," Default"]}),a.status&&(0,b.jsx)(S.Badge,{variant:"outline",className:"text-[10px] h-4 px-1",children:a.status})]})]})]}),d.defaultPrinterName!==a.name&&(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:()=>u(a.name),disabled:null!==l,title:"Set Default",children:l===a.name?(0,b.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(X.CheckCircle2,{className:"h-4 w-4"})})]},a.name))})]})]})]})};a.s(["default",0,()=>{let{user:a}=(0,i.useAuth)(),{localSettings:k,paymentMethods:l,loading:m,settingsLoading:n,handleBusinessChange:o,handleLogoChange:p,handleSignatureChange:q,handleSignaturePadSave:r,handleRemoveSignature:t,handlePaymentMethodChange:u,addPaymentMethod:v,removePaymentMethod:w,saveBusinessSettings:y}=(()=>{let{settings:a,isLoading:b,updateSettings:c}=(0,R.useBusinessSettings)(),[d,e]=(0,j.useState)(!1),[f,g]=(0,j.useState)(a),[i,k]=(0,j.useState)([]),[l,m]=(0,j.useState)(!1);(0,j.useEffect)(()=>{g(a),m(!1)},[a]),(0,j.useEffect)(()=>{l||(f.paymentInfo?k((0,R.parsePaymentInfo)(f.paymentInfo)):k([]),m(!0))},[f.paymentInfo,l]);let n=(0,j.useCallback)(a=>{let{name:b,value:c}=a.target;g(a=>({...a,[b]:c}))},[]),o=(0,j.useCallback)(a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{g(b=>({...b,businessLogo:a.result}))},a.readAsDataURL(b)}},[]),p=(0,j.useCallback)(a=>{g(b=>({...b,signature:a}))},[]),q=(0,j.useCallback)(async b=>{try{let d={...f,signature:b};g(d),await c(d)?h.toast.success("Business settings and signature saved successfully"):(g(b=>({...b,signature:a.signature})),h.toast.error("Failed to save signature"))}catch(b){console.error("Error saving signature:",b),g(b=>({...b,signature:a.signature})),h.toast.error("Failed to save signature")}},[c,a.signature,f]),r=(0,j.useCallback)(async()=>{try{g(a=>({...a,signature:void 0})),await c({signature:null})?h.toast.success("Business signature removed successfully"):(g(b=>({...b,signature:a.signature})),h.toast.error("Failed to remove signature"))}catch(b){console.error("Error removing signature:",b),g(b=>({...b,signature:a.signature})),h.toast.error("Failed to remove signature")}},[c,a.signature]),s=(0,j.useCallback)((a,b,c)=>{let d=[...i];d[a]={...d[a],[b]:c},k(d);let e=(0,R.convertPaymentMethodsToString)(d);g(a=>({...a,paymentInfo:e}))},[i]),t=(0,j.useCallback)(()=>{let a=[...i,{method:"",accountNumber:"",accountName:""}];k(a);let b=(0,R.convertPaymentMethodsToString)(a);g(a=>({...a,paymentInfo:b}))},[i]),u=(0,j.useCallback)(a=>{let b=[...i];b.splice(a,1),k(b);let c=(0,R.convertPaymentMethodsToString)(b);g(a=>({...a,paymentInfo:c}))},[i]),v=(0,j.useCallback)(async()=>{e(!0);try{await c(f)&&h.toast.success("Business settings saved successfully!")}catch(a){console.error("Error saving business settings:",a),h.toast.error("Failed to save business settings")}finally{e(!1)}},[f,c]);return{localSettings:f,paymentMethods:i,loading:d,settingsLoading:b,handleBusinessChange:n,handleLogoChange:o,handleSignatureChange:p,handleSignaturePadSave:q,handleRemoveSignature:r,handlePaymentMethodChange:s,addPaymentMethod:t,removePaymentMethod:u,saveBusinessSettings:v}})();return a?(0,b.jsx)("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:n?(0,b.jsx)(c.Card,{children:(0,b.jsx)(c.CardContent,{className:"flex justify-center py-8",children:(0,b.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{settings:k,onSettingsChange:o,onLogoChange:p}),(0,b.jsx)(L,{signature:k.signature,onSignatureChange:q,onSignaturePadSave:r,onRemoveSignature:t}),(0,b.jsx)(x,{paymentMethods:l,onPaymentMethodChange:u,onAddPaymentMethod:v,onRemovePaymentMethod:w}),(0,b.jsx)(_,{}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Account Information"})}),(0,b.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"email",children:"Account Email Address"}),(0,b.jsx)(d.Input,{id:"email",value:a?.email||"",readOnly:!0,disabled:!0,className:"bg-muted"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),(0,b.jsx)(f.Button,{onClick:y,className:"w-full",disabled:m,children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Business Settings"})]})]}),(0,b.jsx)(Q,{onRequestDataDeletion:()=>{let b=encodeURIComponent(`Data Deletion Request - ${a?.email}`),c=encodeURIComponent(`Hello,

I would like to request deletion of all my data associated with the account ${a?.email}.

Thank you.`),d=`mailto:gonzabrands@gmail.com?subject=${b}&body=${c}`;window.location.href=d,h.toast.success("Email client opened for data deletion request")}})]})}):(0,b.jsx)("div",{className:"text-center py-8",children:"Please log in to access settings"})}],768889)}];

//# sourceMappingURL=src_components_BusinessSettings_tsx_39c53863._.js.map