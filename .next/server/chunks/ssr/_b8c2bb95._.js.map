{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/external-link.ts","../../../../src/hooks/useProductImage.ts","../../../../src/components/inventory/ProductForm.tsx","../../../../src/pages/NewProduct.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('ExternalLink', [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n]);\n\nexport default ExternalLink;\n","import { useToast } from '@/hooks/use-toast';\r\n\r\n/**\r\n * Hook for handling product image uploads with enhanced compression\r\n */\r\nexport const useProductImage = (userId: string | undefined) => {\r\n  const { toast } = useToast();\r\n\r\n  /**\r\n   * Progressive compression that guarantees file size under 10KB\r\n   * @param file The original image file\r\n   * @returns A promise that resolves to the compressed file\r\n   */\r\n  const compressImage = async (file: File): Promise<File> => {\r\n    const MAX_SIZE_KB = 10;\r\n    const MAX_SIZE_BYTES = MAX_SIZE_KB * 1024;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const reader = new FileReader();\r\n        reader.onerror = () => {\r\n          console.error('FileReader error');\r\n          reject(new Error('Failed to read file'));\r\n        };\r\n\r\n        reader.onload = (event) => {\r\n          try {\r\n            const img = new Image();\r\n            img.onerror = () => {\r\n              console.error('Image load error');\r\n              reject(new Error('Failed to load image'));\r\n            };\r\n\r\n            img.onload = () => {\r\n              try {\r\n                // Progressive compression function\r\n                const compressWithQuality = (width: number, height: number, quality: number): Promise<File> => {\r\n                  return new Promise((resolveCompress) => {\r\n                    const canvas = document.createElement('canvas');\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n\r\n                    const ctx = canvas.getContext('2d');\r\n                    if (!ctx) {\r\n                      reject(new Error('Could not get canvas context'));\r\n                      return;\r\n                    }\r\n\r\n                    // Clear canvas and draw image\r\n                    ctx.clearRect(0, 0, width, height);\r\n                    ctx.drawImage(img, 0, 0, width, height);\r\n\r\n                    // Convert to JPEG with specified quality\r\n                    canvas.toBlob(\r\n                      (blob) => {\r\n                        if (!blob) {\r\n                          reject(new Error('Could not compress image'));\r\n                          return;\r\n                        }\r\n\r\n                        const compressedFile = new File([blob], `${file.name.replace(/\\.[^/.]+$/, '')}-optimized.jpg`, {\r\n                          type: 'image/jpeg',\r\n                          lastModified: Date.now(),\r\n                        });\r\n\r\n                        resolveCompress(compressedFile);\r\n                      },\r\n                      'image/jpeg',\r\n                      quality\r\n                    );\r\n                  });\r\n                };\r\n\r\n                // Progressive compression algorithm\r\n                const progressiveCompress = async () => {\r\n                  let { width, height } = img;\r\n\r\n                  // Start with reasonable dimensions and quality\r\n                  const maxDimension = 400;\r\n                  if (width > maxDimension || height > maxDimension) {\r\n                    const aspectRatio = width / height;\r\n                    if (width > height) {\r\n                      width = maxDimension;\r\n                      height = width / aspectRatio;\r\n                    } else {\r\n                      height = maxDimension;\r\n                      width = height * aspectRatio;\r\n                    }\r\n                  }\r\n\r\n                  // Ensure dimensions are valid\r\n                  width = Math.max(50, Math.floor(width));\r\n                  height = Math.max(50, Math.floor(height));\r\n\r\n                  // Try different quality levels\r\n                  const qualityLevels = [0.8, 0.6, 0.4, 0.3, 0.2, 0.1, 0.05, 0.02, 0.01];\r\n\r\n                  for (const quality of qualityLevels) {\r\n                    const compressedFile = await compressWithQuality(width, height, quality);\r\n\r\n                    if (compressedFile.size <= MAX_SIZE_BYTES) {\r\n                      console.log(`Image compression successful:`);\r\n                      console.log(`  Original: ${(file.size / 1024).toFixed(1)}KB`);\r\n                      console.log(`  Compressed: ${(compressedFile.size / 1024).toFixed(1)}KB`);\r\n                      console.log(`  Reduction: ${((file.size - compressedFile.size) / file.size * 100).toFixed(1)}%`);\r\n                      console.log(`  Dimensions: ${width}x${height}px`);\r\n                      console.log(`  Quality: ${(quality * 100).toFixed(0)}%`);\r\n\r\n                      return compressedFile;\r\n                    }\r\n                  }\r\n\r\n                  // If still too large, reduce dimensions further\r\n                  const dimensionReductions = [0.8, 0.6, 0.5, 0.4, 0.3, 0.25, 0.2];\r\n\r\n                  for (const reduction of dimensionReductions) {\r\n                    const newWidth = Math.max(50, Math.floor(width * reduction));\r\n                    const newHeight = Math.max(50, Math.floor(height * reduction));\r\n\r\n                    for (const quality of [0.1, 0.05, 0.02, 0.01]) {\r\n                      const compressedFile = await compressWithQuality(newWidth, newHeight, quality);\r\n\r\n                      if (compressedFile.size <= MAX_SIZE_BYTES) {\r\n                        console.log(`Image compression successful with dimension reduction:`);\r\n                        console.log(`  Original: ${(file.size / 1024).toFixed(1)}KB`);\r\n                        console.log(`  Compressed: ${(compressedFile.size / 1024).toFixed(1)}KB`);\r\n                        console.log(`  Reduction: ${((file.size - compressedFile.size) / file.size * 100).toFixed(1)}%`);\r\n                        console.log(`  Dimensions: ${newWidth}x${newHeight}px`);\r\n                        console.log(`  Quality: ${(quality * 100).toFixed(0)}%`);\r\n\r\n                        return compressedFile;\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  // Final fallback - create a very small image\r\n                  const finalFile = await compressWithQuality(50, 50, 0.01);\r\n                  console.log(`Image compression fallback:`);\r\n                  console.log(`  Original: ${(file.size / 1024).toFixed(1)}KB`);\r\n                  console.log(`  Compressed: ${(finalFile.size / 1024).toFixed(1)}KB`);\r\n                  console.log(`  Dimensions: 50x50px`);\r\n\r\n                  return finalFile;\r\n                };\r\n\r\n                progressiveCompress().then(resolve).catch(reject);\r\n\r\n              } catch (error) {\r\n                console.error('Canvas processing error:', error);\r\n                reject(new Error('Failed to process image on canvas'));\r\n              }\r\n            };\r\n\r\n            img.src = event.target?.result as string;\r\n          } catch (error) {\r\n            console.error('Image creation error:', error);\r\n            reject(new Error('Failed to create image'));\r\n          }\r\n        };\r\n\r\n        reader.readAsDataURL(file);\r\n      } catch (error) {\r\n        console.error('File reading setup error:', error);\r\n        reject(new Error('Failed to setup file reader'));\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Additional optimization to remove EXIF data and metadata\r\n   * @param file The image file to optimize\r\n   * @returns Promise resolving to optimized file\r\n   */\r\n  const removeMetadata = async (file: File): Promise<File> => {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const reader = new FileReader();\r\n        reader.onerror = () => reject(new Error('Failed to read file'));\r\n\r\n        reader.onload = (event) => {\r\n          try {\r\n            const img = new Image();\r\n            img.onerror = () => reject(new Error('Failed to load image'));\r\n\r\n            img.onload = () => {\r\n              try {\r\n                const canvas = document.createElement('canvas');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n\r\n                const ctx = canvas.getContext('2d');\r\n                if (!ctx) {\r\n                  reject(new Error('Could not get canvas context'));\r\n                  return;\r\n                }\r\n\r\n                ctx.drawImage(img, 0, 0);\r\n\r\n                canvas.toBlob(\r\n                  (blob) => {\r\n                    if (!blob) {\r\n                      reject(new Error('Could not process image'));\r\n                      return;\r\n                    }\r\n\r\n                    const cleanFile = new File([blob], file.name, {\r\n                      type: file.type,\r\n                      lastModified: Date.now(),\r\n                    });\r\n\r\n                    resolve(cleanFile);\r\n                  },\r\n                  file.type,\r\n                  0.95\r\n                );\r\n              } catch (error) {\r\n                console.error('Metadata removal canvas error:', error);\r\n                reject(new Error('Failed to process image'));\r\n              }\r\n            };\r\n\r\n            img.src = event.target?.result as string;\r\n          } catch (error) {\r\n            console.error('Metadata removal image error:', error);\r\n            reject(new Error('Failed to load image'));\r\n          }\r\n        };\r\n\r\n        reader.readAsDataURL(file);\r\n      } catch (error) {\r\n        console.error('Metadata removal setup error:', error);\r\n        reject(new Error('Failed to setup file reader'));\r\n      }\r\n    });\r\n  };\r\n\r\n  const uploadProductImage = async (file: File): Promise<string | null> => {\r\n    try {\r\n      if (!userId || !file) {\r\n        console.error('Missing userId or file for image upload');\r\n        return null;\r\n      }\r\n\r\n      // Check if the file is an image\r\n      if (!file.type.startsWith('image/')) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Only image files are allowed.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return null;\r\n      }\r\n\r\n      // Check file size (max 20MB before compression)\r\n      if (file.size > 20 * 1024 * 1024) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Image file is too large. Maximum size is 20MB.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return null;\r\n      }\r\n\r\n      console.log('Starting image processing...');\r\n\r\n      // Show compression progress\r\n      toast({\r\n        title: \"Processing Image\",\r\n        description: \"Optimizing image to under 10KB...\",\r\n      });\r\n\r\n      // Remove metadata first, then compress\r\n      const cleanFile = await removeMetadata(file);\r\n      const compressedFile = await compressImage(cleanFile);\r\n\r\n      // Verify final size\r\n      const finalSizeKB = compressedFile.size / 1024;\r\n      console.log(`Final compressed size: ${finalSizeKB.toFixed(1)}KB`);\r\n\r\n      // Mock upload for now - in a real app this would call a server action\r\n      console.warn('Image upload placeholder – integration with Prisma server action/storage required');\r\n\r\n      toast({\r\n        title: \"Image Processed\",\r\n        description: `Image optimized to ${finalSizeKB.toFixed(1)}KB. Backend upload is pending migration.`,\r\n      });\r\n\r\n      // Returning a data URL as a temporary \"upload result\" so it can be previewed\r\n      return new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve(reader.result as string);\r\n        reader.readAsDataURL(compressedFile);\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error uploading product image:', error);\r\n      toast({\r\n        title: \"Upload Error\",\r\n        description: \"Failed to process image.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return {\r\n    uploadProductImage,\r\n    compressImage,\r\n    removeMetadata\r\n  };\r\n};\r\n","import React, { useState, useEffect, useRef, DragEvent } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Product, ProductCategory, ProductFormData } from '@/types';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { toast } from 'sonner';\r\nimport { Trash2, Upload, ExternalLink, Loader2, Zap, Calendar, Printer } from 'lucide-react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useProductImage } from '@/hooks/useProductImage';\r\nimport { cn } from '@/lib/utils';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { Calendar as CalendarComponent } from '@/components/ui/calendar';\r\nimport { format } from 'date-fns';\r\nimport { Switch } from '@/components/ui/switch';\r\n\r\ninterface ProductFormProps {\r\n  initialData?: Product;\r\n  categories: ProductCategory[];\r\n  onProductSubmit: (data: ProductFormData & { autoPrintLabel?: boolean, printQuantity?: number }) => void;\r\n  isLoading: boolean;\r\n}\r\n\r\n// Extended form data type to handle quantity as string or number\r\ninterface ExtendedProductFormData extends Omit<ProductFormData, 'quantity'> {\r\n  quantity: number | string;\r\n  createdAt?: Date;\r\n  autoPrintLabel?: boolean;\r\n  printQuantity: number;\r\n}\r\n\r\nconst ProductForm: React.FC<ProductFormProps> = ({\r\n  initialData,\r\n  categories,\r\n  onProductSubmit,\r\n  isLoading,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const { settings } = useBusinessSettings();\r\n  const { user } = useAuth();\r\n  const { uploadProductImage, compressImage } = useProductImage(user?.id);\r\n\r\n  // Function to get initial form data\r\n  const getInitialFormData = (productData?: Product): ExtendedProductFormData => {\r\n    if (productData) {\r\n      // When editing/duplicating, use the product's data\r\n      return {\r\n        name: productData.name,\r\n        barcode: productData.barcode || '',\r\n        manufacturerBarcode: productData.manufacturerBarcode || '',\r\n        description: productData.description || '',\r\n        category: productData.category,\r\n        quantity: productData.quantity ?? 0,\r\n        costPrice: productData.costPrice,\r\n        sellingPrice: productData.sellingPrice,\r\n        supplier: productData.supplier || '',\r\n        minimumStock: productData.minimumStock,\r\n        imageFile: null,\r\n        imageUrl: productData.imageUrl,\r\n        createdAt: productData.createdAt || new Date(), // Use product's creation date\r\n        printQuantity: 1,\r\n        autoPrintLabel: false\r\n      };\r\n    } else {\r\n      // When creating new product, use defaults\r\n      return {\r\n        name: '',\r\n        barcode: '',\r\n        manufacturerBarcode: '',\r\n        description: '',\r\n        category: '',\r\n        quantity: 0,\r\n        costPrice: undefined,\r\n        sellingPrice: undefined,\r\n        supplier: '',\r\n        minimumStock: undefined,\r\n        imageFile: null,\r\n        imageUrl: null,\r\n        createdAt: new Date(), // Default to current date for new products\r\n        autoPrintLabel: true, // Default to true for new products as requested\r\n        printQuantity: 1\r\n      };\r\n    }\r\n  };\r\n\r\n  // Form state - initialize with proper data immediately\r\n  const [formData, setFormData] = useState<ExtendedProductFormData>(() =>\r\n    getInitialFormData(initialData)\r\n  );\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\r\n  const [imageChanged, setImageChanged] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [compressing, setCompressing] = useState(false);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [compressionStats, setCompressionStats] = useState<{\r\n    originalSize: number;\r\n    compressedSize: number;\r\n    reduction: number;\r\n  } | null>(null);\r\n  const [isCalendarOpen, setIsCalendarOpen] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Update form data when initialData changes\r\n  useEffect(() => {\r\n    if (initialData) {\r\n      console.log('ProductForm - Setting form data from initialData:', initialData);\r\n      console.log('ProductForm - InitialData createdAt:', initialData.createdAt);\r\n\r\n      const newFormData = getInitialFormData(initialData);\r\n      setFormData(newFormData);\r\n\r\n      console.log('ProductForm - Form data set to:', newFormData);\r\n      console.log('ProductForm - Form createdAt set to:', newFormData.createdAt);\r\n\r\n      if (initialData.imageUrl) {\r\n        setImagePreview(initialData.imageUrl);\r\n      }\r\n    }\r\n  }, [initialData]);\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    let processedValue: any = value;\r\n\r\n    // Convert numeric fields to numbers or undefined if empty\r\n    if (\r\n      name === 'quantity' ||\r\n      name === 'minimumStock' ||\r\n      name === 'costPrice' ||\r\n      name === 'sellingPrice'\r\n    ) {\r\n      // For quantity, allow empty string and convert to number when not empty\r\n      if (name === 'quantity') {\r\n        if (value === '') {\r\n          processedValue = ''; // Keep as empty string to allow deletion\r\n        } else {\r\n          processedValue = parseFloat(value) || 0; // Allow decimal values\r\n        }\r\n        console.log('Quantity changed to:', processedValue);\r\n      } else {\r\n        processedValue = value === '' ? undefined : parseFloat(value);\r\n      }\r\n    }\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: processedValue\r\n    });\r\n\r\n    // Clear error when field is edited\r\n    if (errors[name]) {\r\n      setErrors({\r\n        ...errors,\r\n        [name]: ''\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCategoryChange = (value: string) => {\r\n    setFormData({\r\n      ...formData,\r\n      category: value\r\n    });\r\n\r\n    if (errors.category) {\r\n      setErrors({\r\n        ...errors,\r\n        category: ''\r\n      });\r\n    }\r\n\r\n    // Focus description field after category selection\r\n    setTimeout(() => {\r\n      document.getElementById('description')?.focus();\r\n    }, 100);\r\n  };\r\n\r\n  const handleDateChange = (date: Date | undefined) => {\r\n    if (date) {\r\n      // Set time to Noon (12:00:00) to avoid timezone issues where midnight UTC becomes 3 AM EAT\r\n      const adjustedDate = new Date(date);\r\n      adjustedDate.setHours(12, 0, 0, 0);\r\n\r\n      console.log('ProductForm - Date changed to:', adjustedDate);\r\n      setFormData({\r\n        ...formData,\r\n        createdAt: adjustedDate\r\n      });\r\n      setIsCalendarOpen(false);\r\n    }\r\n  };\r\n\r\n  const processImageFile = async (file: File) => {\r\n    if (file.size > 20 * 1024 * 1024) { // 20MB\r\n      toast.error('Image file is too large. Maximum size is 20MB.');\r\n      return;\r\n    }\r\n\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('Only image files are allowed.');\r\n      return;\r\n    }\r\n\r\n    setCompressing(true);\r\n    setCompressionStats(null);\r\n\r\n    try {\r\n      // Use the compressImage function from the properly called hook\r\n      const compressedFile = await compressImage(file);\r\n\r\n      // Calculate compression stats\r\n      const reduction = ((file.size - compressedFile.size) / file.size * 100);\r\n      setCompressionStats({\r\n        originalSize: file.size,\r\n        compressedSize: compressedFile.size,\r\n        reduction: reduction\r\n      });\r\n\r\n      setFormData({\r\n        ...formData,\r\n        imageFile: compressedFile\r\n      });\r\n\r\n      setImageChanged(true);\r\n\r\n      // Create preview\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setImagePreview(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(compressedFile);\r\n\r\n      toast.success(`Image optimized to ${(compressedFile.size / 1024).toFixed(1)}KB!`);\r\n    } catch (error) {\r\n      console.error('Error compressing image:', error);\r\n      toast.error('Failed to process image. Please try again.');\r\n    } finally {\r\n      setCompressing(false);\r\n    }\r\n  };\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n\r\n    if (file) {\r\n      processImageFile(file);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e: DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = (e: DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleDrop = (e: DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      const file = e.dataTransfer.files[0];\r\n      processImageFile(file);\r\n    }\r\n  };\r\n\r\n  const handleImageUploadClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const removeImage = () => {\r\n    setFormData({\r\n      ...formData,\r\n      imageFile: null,\r\n      imageUrl: null  // Clear the image URL when removing image\r\n    });\r\n    setImagePreview(null);\r\n    setImageChanged(true);\r\n    setCompressionStats(null);\r\n\r\n    // Reset the file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Product name is required';\r\n    }\r\n\r\n    // Category is optional, so no validation needed\r\n\r\n    // Note: Initial stock can now be negative to handle cases like backorders or inventory deficits\r\n    // Removed validation that prevented negative initial stock values\r\n\r\n    if (formData.costPrice !== undefined && formData.costPrice < 0) {\r\n      newErrors.costPrice = 'Cost price cannot be negative';\r\n    }\r\n\r\n    if (formData.sellingPrice !== undefined && formData.sellingPrice < 0) {\r\n      newErrors.sellingPrice = 'Selling price cannot be negative';\r\n    }\r\n\r\n    if (formData.minimumStock !== undefined && formData.minimumStock < 0) {\r\n      newErrors.minimumStock = 'Minimum stock cannot be negative';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    console.log('ProductForm - Form data before validation:', formData);\r\n    console.log('ProductForm - Quantity value:', formData.quantity, 'Type:', typeof formData.quantity);\r\n    console.log('ProductForm - CreatedAt value:', formData.createdAt);\r\n\r\n    if (!validateForm()) {\r\n      toast.error('Please correct the errors in the form');\r\n      return;\r\n    }\r\n\r\n    let finalImageUrl = formData.imageUrl;\r\n\r\n    try {\r\n      // Handle image upload separately if needed\r\n      if (imageChanged && formData.imageFile) {\r\n        setUploading(true);\r\n        toast.info('Uploading optimized image...');\r\n        finalImageUrl = await uploadProductImage(formData.imageFile);\r\n\r\n        if (!finalImageUrl) {\r\n          setUploading(false);\r\n          return; // Stop if image upload failed - error is already shown by the hook\r\n        }\r\n        toast.success('Image uploaded successfully!');\r\n      } else if (imageChanged && !formData.imageFile) {\r\n        // Image was removed\r\n        finalImageUrl = null;\r\n      }\r\n\r\n      // Prepare final submission data - convert empty string quantity to 0\r\n      const finalQuantity = typeof formData.quantity === 'string' ? (formData.quantity === '' ? 0 : Number(formData.quantity)) : formData.quantity;\r\n      const submissionData = {\r\n        ...formData,\r\n        imageUrl: finalImageUrl,\r\n        quantity: finalQuantity // Convert to number for submission\r\n      };\r\n\r\n      console.log('ProductForm - Final submission data:', submissionData);\r\n      console.log('ProductForm - Final quantity being submitted:', submissionData.quantity);\r\n      console.log('ProductForm - Final createdAt being submitted:', submissionData.createdAt);\r\n\r\n      // Submit form with final image URL\r\n      await onProductSubmit(submissionData);\r\n    } catch (error) {\r\n      console.error('Error handling form submission:', error);\r\n      toast.error('Something went wrong. Please try again.');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const isSubmitting = isLoading || uploading;\r\n\r\n  return (\r\n    <Card className=\"w-full\">\r\n      <CardHeader>\r\n        <CardTitle>{initialData ? 'Edit Product' : 'New Product'}</CardTitle>\r\n        <CardDescription>Enter the product details below. Only name is required.</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div className=\"grid md:grid-cols-2 gap-6\">\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"name\">Product Name*</Label>\r\n                <Input\r\n                  id=\"name\"\r\n                  name=\"name\"\r\n                  value={formData.name}\r\n                  onChange={handleChange}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      const categorySelect = document.querySelector('[role=\"combobox\"]') as HTMLElement;\r\n                      categorySelect?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Enter product name\"\r\n                  className={errors.name ? 'border-red-500' : ''}\r\n                  disabled={isSubmitting}\r\n                />\r\n                {errors.name && (\r\n                  <p className=\"text-red-500 text-xs\">{errors.name}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"manufacturerBarcode\">Manufacturer Barcode (Optional)</Label>\r\n                <Input\r\n                  id=\"manufacturerBarcode\"\r\n                  name=\"manufacturerBarcode\"\r\n                  value={formData.manufacturerBarcode}\r\n                  onChange={handleChange}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      const categorySelect = document.querySelector('[role=\"combobox\"]') as HTMLElement;\r\n                      categorySelect?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Enter manufacturer barcode (if any)\"\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n\r\n\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Need to create a new category? Go to the{' '}\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"link\"\r\n                    className=\"p-0 h-auto text-blue-600 underline\"\r\n                    onClick={() => navigate(`/categories?returnTo=${encodeURIComponent(window.location.pathname)}`)}\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    Categories page <ExternalLink className=\"h-3 w-3 ml-1 inline\" />\r\n                  </Button>\r\n                  {' '}first, then return here to select it.\r\n                </p>\r\n                <Select\r\n                  value={formData.category}\r\n                  onValueChange={handleCategoryChange}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <SelectTrigger\r\n                    className={cn(errors.category ? 'border-red-500' : '')}\r\n                    onKeyDown={(e) => {\r\n                      console.log('SelectTrigger keydown:', e.key, 'Category:', formData.category);\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        console.log('Enter pressed on SelectTrigger, focusing description');\r\n                        // Always move to description when Enter is pressed\r\n                        setTimeout(() => {\r\n                          const descriptionField = document.getElementById('description');\r\n                          console.log('Description field found:', !!descriptionField);\r\n                          descriptionField?.focus();\r\n                        }, 50);\r\n                        return false;\r\n                      } else if (e.key === 'Escape') {\r\n                        // On Escape, also move to description\r\n                        setTimeout(() => {\r\n                          document.getElementById('description')?.focus();\r\n                        }, 50);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue placeholder=\"Select category (optional)\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {categories.length > 0 ? (\r\n                      categories.map((category) => (\r\n                        <SelectItem key={category.id} value={category.name}>\r\n                          {category.name}\r\n                        </SelectItem>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"p-2 text-sm text-muted-foreground\">\r\n                        No categories available\r\n                      </div>\r\n                    )}\r\n                  </SelectContent>\r\n                </Select>\r\n                {errors.category && (\r\n                  <p className=\"text-red-500 text-xs\">{errors.category}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  name=\"description\"\r\n                  value={formData.description}\r\n                  onChange={handleChange}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      document.getElementById('supplier')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Enter product description\"\r\n                  className=\"resize-none h-32\"\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"supplier\">Supplier</Label>\r\n                <Input\r\n                  id=\"supplier\"\r\n                  name=\"supplier\"\r\n                  value={formData.supplier}\r\n                  onChange={handleChange}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('quantity')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Enter supplier name\"\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid gap-3\">\r\n                <Label>Created Date</Label>\r\n                <Popover open={isCalendarOpen} onOpenChange={setIsCalendarOpen}>\r\n                  <PopoverTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className={cn(\r\n                        \"w-full justify-start text-left font-normal\",\r\n                        !formData.createdAt && \"text-muted-foreground\",\r\n                        initialData && \"cursor-not-allowed opacity-60\"\r\n                      )}\r\n                      disabled={isSubmitting || !!initialData}\r\n                    >\r\n                      <Calendar className=\"mr-2 h-4 w-4\" />\r\n                      {formData.createdAt ? format(formData.createdAt, \"PPP\") : \"Pick a date\"}\r\n                    </Button>\r\n                  </PopoverTrigger>\r\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                    <CalendarComponent\r\n                      mode=\"single\"\r\n                      selected={formData.createdAt}\r\n                      onSelect={handleDateChange}\r\n                      disabled={(date) => date > new Date()}\r\n                      initialFocus\r\n                    />\r\n                  </PopoverContent>\r\n                </Popover>\r\n                {initialData && (\r\n                  <div className=\"bg-amber-50 border border-amber-200 p-3 rounded-lg\">\r\n                    <div className=\"text-amber-800 text-sm\">\r\n                      <strong>Note:</strong> To edit the creation date, please edit the initial stock history entry for this product through the inventory stock history.\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid gap-3\">\r\n                <Label htmlFor=\"imageFile\">Product Image</Label>\r\n                <div className=\"flex flex-col items-center space-y-4\">\r\n                  {imagePreview ? (\r\n                    <div className=\"relative w-full\">\r\n                      <img\r\n                        src={imagePreview}\r\n                        alt=\"Product preview\"\r\n                        className=\"w-full h-40 object-contain border rounded-md\"\r\n                      />\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"destructive\"\r\n                        size=\"icon\"\r\n                        className=\"absolute top-2 right-2 rounded-full h-8 w-8\"\r\n                        onClick={removeImage}\r\n                        disabled={isSubmitting || compressing}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n\r\n                      {/* Compression stats display */}\r\n                      {compressionStats && (\r\n                        <div className=\"mt-2 p-2 bg-green-50 border border-green-200 rounded-md\">\r\n                          <div className=\"flex items-center gap-2 text-green-700\">\r\n                            <Zap className=\"h-4 w-4\" />\r\n                            <span className=\"text-xs font-medium\">\r\n                              Optimized to {(compressionStats.compressedSize / 1024).toFixed(1)}KB\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs text-green-600 mt-1\">\r\n                            {(compressionStats.originalSize / 1024).toFixed(1)}KB → {(compressionStats.compressedSize / 1024).toFixed(1)}KB ({compressionStats.reduction.toFixed(1)}% reduction)\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div\r\n                      className={cn(\r\n                        \"border-2 border-dashed rounded-md p-8 w-full flex flex-col items-center justify-center cursor-pointer transition-colors\",\r\n                        isDragging ? \"border-blue-500 bg-blue-50\" : \"border-gray-300 hover:border-gray-400\",\r\n                        (isSubmitting || compressing) && \"opacity-50 cursor-not-allowed\"\r\n                      )}\r\n                      onDragOver={handleDragOver}\r\n                      onDragLeave={handleDragLeave}\r\n                      onDrop={handleDrop}\r\n                      onClick={!(isSubmitting || compressing) ? handleImageUploadClick : undefined}\r\n                    >\r\n                      {compressing ? (\r\n                        <>\r\n                          <Loader2 className=\"h-10 w-10 text-blue-500 mb-2 animate-spin\" />\r\n                          <p className=\"text-sm text-gray-500\">Optimizing image...</p>\r\n                          <p className=\"text-xs text-gray-400\">Compressing to under 15KB</p>\r\n                        </>\r\n                      ) : uploading ? (\r\n                        <>\r\n                          <Loader2 className=\"h-10 w-10 text-blue-500 mb-2 animate-spin\" />\r\n                          <p className=\"text-sm text-gray-500\">Uploading image...</p>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Upload className=\"h-10 w-10 text-gray-400 mb-2\" />\r\n                          <p className=\"text-sm text-gray-500\">\r\n                            Click to upload or drag and drop\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-400\">PNG, JPG, GIF up to 20MB</p>\r\n                          <p className=\"text-xs text-blue-500 mt-1\">\r\n                            ⚡ Auto Image compression for instant loading\r\n                          </p>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    ref={fileInputRef}\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageChange}\r\n                    className=\"hidden\"\r\n                    disabled={isSubmitting || compressing}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid md:grid-cols-2 gap-4\">\r\n                <div className=\"grid gap-3\">\r\n                  <Label htmlFor=\"quantity\">Initial Stock</Label>\r\n                  <Input\r\n                    id=\"quantity\"\r\n                    name=\"quantity\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.quantity}\r\n                    onChange={handleChange}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        document.getElementById('minimumStock')?.focus();\r\n                      }\r\n                    }}\r\n                    className={errors.quantity ? 'border-red-500' : ''}\r\n                    disabled={isSubmitting}\r\n                    placeholder=\"Enter initial stock quantity (can be negative)\"\r\n                  />\r\n                  {errors.quantity && (\r\n                    <p className=\"text-red-500 text-xs\">{errors.quantity}</p>\r\n                  )}\r\n                  {initialData && (\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Current stock: {initialData.quantity} units\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid gap-3\">\r\n                  <Label htmlFor=\"minimumStock\">Minimum Stock Level</Label>\r\n                  <Input\r\n                    id=\"minimumStock\"\r\n                    name=\"minimumStock\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.minimumStock === undefined ? '' : formData.minimumStock}\r\n                    onChange={handleChange}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        document.getElementById('costPrice')?.focus();\r\n                      }\r\n                    }}\r\n                    className={errors.minimumStock ? 'border-red-500' : ''}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors.minimumStock && (\r\n                    <p className=\"text-red-500 text-xs\">{errors.minimumStock}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid md:grid-cols-2 gap-4\">\r\n                <div className=\"grid gap-3\">\r\n                  <Label htmlFor=\"costPrice\">Cost Price</Label>\r\n                  <div className=\"flex\">\r\n                    <span className=\"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">\r\n                      {settings.currency}\r\n                    </span>\r\n                    <Input\r\n                      id=\"costPrice\"\r\n                      name=\"costPrice\"\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      value={formData.costPrice === undefined ? '' : formData.costPrice}\r\n                      onChange={handleChange}\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          e.preventDefault();\r\n                          document.getElementById('sellingPrice')?.focus();\r\n                        }\r\n                      }}\r\n                      className={`rounded-l-none ${errors.costPrice ? 'border-red-500' : ''}`}\r\n                      disabled={isSubmitting}\r\n                    />\r\n                  </div>\r\n                  {errors.costPrice && (\r\n                    <p className=\"text-red-500 text-xs\">{errors.costPrice}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid gap-3\">\r\n                  <Label htmlFor=\"sellingPrice\">Selling Price</Label>\r\n                  <div className=\"flex\">\r\n                    <span className=\"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">\r\n                      {settings.currency}\r\n                    </span>\r\n                    <Input\r\n                      id=\"sellingPrice\"\r\n                      name=\"sellingPrice\"\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      value={formData.sellingPrice === undefined ? '' : formData.sellingPrice}\r\n                      onChange={handleChange}\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          e.preventDefault();\r\n                          const submitButton = document.querySelector('button[type=\"submit\"]') as HTMLElement;\r\n                          submitButton?.focus();\r\n                        }\r\n                      }}\r\n                      className={`rounded-l-none ${errors.sellingPrice ? 'border-red-500' : ''}`}\r\n                      disabled={isSubmitting}\r\n                    />\r\n                  </div>\r\n                  {errors.sellingPrice && (\r\n                    <p className=\"text-red-500 text-xs\">{errors.sellingPrice}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid gap-3\">\r\n                <p className=\"text-sm text-gray-500\">\r\n                  * Required fields | Initial Stock: The starting quantity for this product\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              type=\"button\"\r\n              onClick={() => navigate('/inventory')}\r\n              disabled={isSubmitting || compressing}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting || compressing}\r\n              className=\"min-w-[100px]\"\r\n            >\r\n              {compressing ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Optimizing...\r\n                </>\r\n              ) : isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  {uploading ? 'Uploading...' : 'Saving...'}\r\n                </>\r\n              ) : (\r\n                initialData ? 'Update Product' : 'Create Product'\r\n              )}\r\n            </Button>\r\n          </div>\r\n\r\n          {!initialData && (\r\n            <div className=\"flex flex-col md:flex-row items-center justify-end gap-4 pt-3 border-t\">\r\n              {formData.autoPrintLabel && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Label htmlFor=\"printQuantity\" className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Quantity to print:\r\n                  </Label>\r\n                  <Input\r\n                    id=\"printQuantity\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    className=\"w-20 h-8\"\r\n                    value={formData.printQuantity}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, printQuantity: parseInt(e.target.value) || 1 }))}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Printer className=\"h-4 w-4 text-muted-foreground\" />\r\n                <Label htmlFor=\"autoPrint\" className=\"text-sm font-medium cursor-pointer\">\r\n                  Auto-print barcode label\r\n                </Label>\r\n                <Switch\r\n                  id=\"autoPrint\"\r\n                  checked={formData.autoPrintLabel}\r\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, autoPrintLabel: checked }))}\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ProductForm;\r\n","\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams, useLocation } from 'react-router-dom';\r\nimport ProductForm from '@/components/inventory/ProductForm';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useProducts } from '@/hooks/useProducts';\r\nimport { useCategories } from '@/hooks/useCategories';\r\nimport { Product, ProductFormData } from '@/types';\r\nimport { toast } from 'sonner';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ArrowLeft, RefreshCw } from 'lucide-react';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle } from 'lucide-react';\r\n\r\nconst NewProduct = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const { products, isLoading: productsLoading, createProduct, updateProduct, loadProducts, refetch } = useProducts(user?.id, 10000); // Load all products\r\n  const { categories, isLoading: categoriesLoading } = useCategories(user?.id);\r\n  const [product, setProduct] = useState<Product | undefined>(undefined);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [loadError, setLoadError] = useState<string | null>(null);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [dataLoaded, setDataLoaded] = useState(false);\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n\r\n  // Check for duplicate data from navigation state\r\n  const duplicateData = location.state?.duplicateData;\r\n\r\n  const loadProductData = async () => {\r\n    if (id) {\r\n      // If refreshing, set state \r\n      setIsRefreshing(true);\r\n\r\n      // Clear any previous error\r\n      setLoadError(null);\r\n\r\n      // Load fresh product data\r\n      const { data: refetchedData } = await refetch();\r\n      const fetchedProducts = refetchedData?.products || [];\r\n\r\n      const foundProduct = fetchedProducts.find(p => p.id === id);\r\n\r\n      if (foundProduct) {\r\n        setProduct(foundProduct);\r\n        setDataLoaded(true);\r\n      } else {\r\n        setLoadError('Product not found. It may have been deleted or you may not have permission to view it.');\r\n        toast.error('Product not found');\r\n      }\r\n\r\n      setIsRefreshing(false);\r\n    } else if (duplicateData) {\r\n      // For duplicate mode, set the data as loaded\r\n      setDataLoaded(true);\r\n    } else {\r\n      // For new product mode\r\n      setDataLoaded(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Only load if we have an ID, haven't loaded yet, and products are available\r\n    if (id && products.length > 0 && !dataLoaded) {\r\n      const foundProduct = products.find(p => p.id === id);\r\n\r\n      if (foundProduct) {\r\n        setProduct(foundProduct);\r\n        setDataLoaded(true);\r\n        // Clear any previous error\r\n        setLoadError(null);\r\n      } else if (products.length > 0) {\r\n        // Only set error if we have products loaded but didn't find the one we're looking for\r\n        setLoadError('Product not found. It may have been deleted or you may not have permission to view it.');\r\n        toast.error('Product not found');\r\n      }\r\n    } else if (!id) {\r\n      // New product or duplicate mode\r\n      setDataLoaded(true);\r\n    }\r\n  }, [id, products.length, dataLoaded]); // Use products.length instead of products array\r\n\r\n  const handleRefresh = async () => {\r\n    toast.info('Refreshing product data...');\r\n    setDataLoaded(false);\r\n    await loadProductData();\r\n  };\r\n\r\n  const handleProductSubmit = async (formData: ProductFormData & { createdAt?: Date, autoPrintLabel?: boolean, printQuantity?: number }) => {\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      if (id && product) {\r\n        // ... (update existing product logic - unchanged)\r\n        const updateData = {\r\n          name: formData.name,\r\n          description: formData.description || '',\r\n          category: formData.category || '',\r\n          quantity: formData.quantity,\r\n          costPrice: formData.costPrice ?? 0,\r\n          sellingPrice: formData.sellingPrice ?? 0,\r\n          supplier: formData.supplier || '',\r\n          minimumStock: formData.minimumStock ?? 0,\r\n          imageUrl: formData.imageUrl || null,\r\n          createdAt: formData.createdAt,\r\n          barcode: formData.barcode,\r\n          manufacturerBarcode: formData.manufacturerBarcode\r\n        };\r\n\r\n        const result = await updateProduct(id, updateData);\r\n\r\n        if (result) {\r\n          toast.success('Product updated successfully');\r\n          navigate(`/inventory/${id}`);\r\n        } else {\r\n          toast.error('Failed to update product');\r\n        }\r\n      } else {\r\n        // Create new product\r\n        if (!user?.id) {\r\n          toast.error('You must be logged in to create products');\r\n          return;\r\n        }\r\n\r\n        const createData = {\r\n          id: '',\r\n          name: formData.name,\r\n          description: formData.description || '',\r\n          category: formData.category || '',\r\n          quantity: formData.quantity,\r\n          costPrice: formData.costPrice ?? 0,\r\n          sellingPrice: formData.sellingPrice ?? 0,\r\n          supplier: formData.supplier || '',\r\n          minimumStock: formData.minimumStock ?? 0,\r\n          imageUrl: formData.imageUrl || null,\r\n          createdAt: formData.createdAt || new Date(),\r\n          updatedAt: new Date(),\r\n          barcode: formData.barcode || '',\r\n          manufacturerBarcode: formData.manufacturerBarcode || ''\r\n        };\r\n\r\n        const newProduct = await createProduct(createData);\r\n\r\n        if (newProduct) {\r\n          toast.success('Product created successfully');\r\n\r\n          // Auto-print label if requested\r\n          if (formData.autoPrintLabel && newProduct.barcode) {\r\n            try {\r\n              const printQty = formData.printQuantity || 1;\r\n              toast.info(`Sending ${printQty} barcode label${printQty > 1 ? 's' : ''} to printer...`);\r\n              await fetch('http://localhost:5000/print/label', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                mode: 'cors',\r\n                body: JSON.stringify({\r\n                  PrinterName: settings.defaultPrinterName || 'Label Printer',\r\n                  Content: `SIZE 50 mm, 30 mm\\nGAP 3 mm, 0 mm\\nCLS\\nTEXT 15,20,\"3\",0,1,1,\"${newProduct.name}\"\\nBARCODE 15,70,\"128\",60,1,0,2,2,\"${newProduct.barcode}\"\\nTEXT 15,180,\"3\",0,1,1,\"${settings.currency} ${formatNumber(newProduct.sellingPrice)}\"\\nPRINT ${printQty}\\n`\r\n                })\r\n              });\r\n              toast.success('Barcode label printed');\r\n            } catch (err) {\r\n              console.error('Failed to auto-print label:', err);\r\n              toast.error('Failed to print label. Is the Printer Bridge running?');\r\n            }\r\n          }\r\n\r\n          navigate(`/inventory/${newProduct.id}`);\r\n        } else {\r\n          toast.error('Failed to create product');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting product:', error);\r\n      toast.error('An error occurred while saving the product');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isLoading = productsLoading || categoriesLoading || isSubmitting || isRefreshing;\r\n\r\n  // Determine initial data - use duplicateData if available, otherwise use product for edit mode\r\n  const initialData = duplicateData ? {\r\n    ...duplicateData,\r\n    quantity: 0, // Always start with 0 quantity for duplicates\r\n    id: '', // No ID for new product\r\n    itemNumber: '', // Will be auto-generated\r\n    createdAt: new Date(), // Use current time for duplicate, not original product time\r\n    updatedAt: new Date(),\r\n    barcode: '', // Clear barcode to avoid unique constraint conflict\r\n    manufacturerBarcode: '' // Clear manufacturer barcode as well\r\n  } as Product : product;\r\n\r\n  // Permission Check\r\n  const canEdit = id ? hasPermission('inventory', 'edit') : true;\r\n  const canCreate = !id ? hasPermission('inventory', 'create') : true;\r\n\r\n  if (profilesLoading || productsLoading || categoriesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!canEdit || !canCreate) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to {id ? 'edit this product' : 'create a new product'}.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/inventory')} variant=\"outline\">\r\n            Back to Inventory\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Don't render the form until we have loaded the data or determined we don't need to load it\r\n  if (id && !dataLoaded && !loadError) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => navigate('/inventory')}\r\n            className=\"flex items-center gap-1\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" /> Back to Inventory\r\n          </Button>\r\n        </div>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4\"></div>\r\n            <p className=\"text-gray-600\">Loading product data...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => navigate('/inventory')}\r\n          className=\"flex items-center gap-1\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4\" /> Back to Inventory\r\n        </Button>\r\n\r\n        {/* Add refresh button when in edit mode */}\r\n        {id && (\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleRefresh}\r\n            disabled={isLoading}\r\n            className=\"flex items-center gap-1\"\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${isRefreshing ? 'animate-spin' : ''}`} />\r\n            {isRefreshing ? 'Refreshing...' : 'Refresh Data'}\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {loadError ? (\r\n        <div className=\"p-6 bg-red-50 border border-red-200 rounded-md\">\r\n          <h3 className=\"text-lg font-medium text-red-800 mb-2\">Error Loading Product</h3>\r\n          <p className=\"text-red-600\">{loadError}</p>\r\n          <Button\r\n            className=\"mt-4\"\r\n            onClick={() => navigate('/inventory')}\r\n          >\r\n            Return to Inventory\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <ProductForm\r\n          initialData={initialData}\r\n          categories={categories}\r\n          onProductSubmit={handleProductSubmit}\r\n          isLoading={isLoading}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewProduct;\r\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[0,4]}