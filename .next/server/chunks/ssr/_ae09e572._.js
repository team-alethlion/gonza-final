module.exports=[291914,a=>{"use strict";var b=a.i(572131),c=a.i(478793),d=a.i(169819),e=a.i(391956),f=a.i(433217),g=a.i(937927),h=a.i(405050);let i=(0,h.createServerReference)("408055c65091de6e86656304d04a002881aed3acc6",h.callServer,void 0,h.findSourceMapURL,"getCashAccountsAction"),j=(0,h.createServerReference)("40fec0c16d5b967e0b7b13b4f39e9f33caa55d98fd",h.callServer,void 0,h.findSourceMapURL,"createCashAccountAction"),k=(0,h.createServerReference)("60cff6e1bde4cdde91ed3aaa29411ed65f1ac6b8ba",h.callServer,void 0,h.findSourceMapURL,"updateCashAccountAction"),l=(0,h.createServerReference)("609fff12b333f8481f6eaa00c9f6ed0ca7485d5f62",h.callServer,void 0,h.findSourceMapURL,"deleteCashAccountAction"),m=(0,h.createServerReference)("701a700c12f80accdeeab232d537f79439d8fe9e50",h.callServer,void 0,h.findSourceMapURL,"deleteCashAccountWithTransactionsAction"),n=(0,h.createServerReference)("60a22285198ef838d83b1b4a602809518cbd22267e",h.callServer,void 0,h.findSourceMapURL,"getCashAccountBalanceAction");a.s(["useCashAccounts",0,()=>{let[a,h]=(0,b.useState)([]),{toast:o}=(0,c.useToast)(),{currentBusiness:p}=(0,d.useBusiness)(),{user:q}=(0,e.useAuth)(),r=(0,g.useQueryClient)(),s=(0,b.useCallback)(async()=>{if(!p?.id)return[];try{let a=await i(p.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch accounts");return a.data.map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}))}catch(a){return console.error("Error loading cash accounts:",a),o({title:"Error",description:"Failed to load cash accounts",variant:"destructive"}),[]}},[p?.id,o]),t=["cash_accounts",p?.id],{data:u,isLoading:v}=(0,f.useQuery)({queryKey:t,queryFn:s,enabled:!!p?.id,staleTime:3e4});(0,b.useEffect)(()=>{u&&h(u)},[u]);let w=v&&!u,x=(0,b.useCallback)(()=>{r.invalidateQueries({queryKey:t})},[r,t]),y=(0,b.useCallback)(async a=>{if(!p?.id||!q?.id)return null;try{let b=await j({...a,userId:q.id,locationId:p.id});if(!b.success||!b.data)throw Error(b.error);return r.invalidateQueries({queryKey:t}),o({title:"Success",description:"Cash account created successfully"}),b.data}catch(a){return console.error("Error creating cash account:",a),o({title:"Error",description:"Failed to create cash account",variant:"destructive"}),null}},[p?.id,q?.id,r,t,o]),z=async(a,b)=>{if(!p?.id)return!1;try{let c=await k(a,{...b,locationId:p.id});if(!c.success)throw Error(c.error);return r.invalidateQueries({queryKey:t}),o({title:"Success",description:"Cash account updated successfully"}),!0}catch(a){return console.error("Error updating cash account:",a),o({title:"Error",description:"Failed to update cash account",variant:"destructive"}),!1}},A=async(a,b)=>{if(!p?.id)return{success:!1,hasTransactions:!1};try{let c=await l(a,p.id);return c.success&&(r.invalidateQueries({queryKey:t}),o({title:"Success",description:"Cash account deleted successfully"}),b&&b()),c}catch(a){return console.error("Error deleting cash account:",a),o({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),{success:!1,hasTransactions:!1}}},B=async(a,b=!1,c)=>{if(!p?.id)return!1;try{let d=await m(a,p.id,b);if(!d.success)throw Error(d.error);return r.invalidateQueries({queryKey:t}),o({title:"Success",description:b?"Account and transactions deleted":"Account deleted (records unlinked)"}),c&&c(),!0}catch(a){return console.error("Error deleting cash account:",a),o({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),!1}},C=(0,b.useCallback)(async a=>{if(!p?.id)return 0;try{let b=await n(a,p.id);if(b.success)return b.data;return 0}catch(a){return console.error("Error getting balance:",a),0}},[p?.id]);return(0,b.useMemo)(()=>({accounts:a,isLoading:w,createAccount:y,updateAccount:z,deleteAccount:A,deleteAccountWithTransactions:B,getAccountBalance:C,loadAccounts:s,refreshAccounts:x}),[a,w,y,z,A,B,C,s,x])}],291914)},866102,a=>{"use strict";var b=a.i(572131),c=a.i(433217),d=a.i(478793),e=a.i(169819),f=a.i(405050);let g=(0,f.createServerReference)("40290a4fc6b8571a026afeb877566edb807919e482",f.callServer,void 0,f.findSourceMapURL,"getBusinessSettingsAction");var h=a.i(682242);let i=()=>({businessName:"",businessAddress:"",businessPhone:"",businessEmail:"",currency:"UGX",paymentInfo:"",defaultPrintFormat:"standard"});a.s(["convertPaymentMethodsToString",0,a=>a.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()).map(a=>`${a.method}
${a.accountNumber}
${a.accountName}`).join("\n"),"parsePaymentInfo",0,a=>{if(!a||""===a.trim())return[];let b=a.split("\n").filter(a=>""!==a.trim()),c=[];for(let a=0;a<b.length;a+=3)a+2<b.length&&c.push({method:b[a].trim(),accountNumber:b[a+1].trim(),accountName:b[a+2].trim()});return c},"useBusinessSettings",0,()=>{let[a,f]=(0,b.useState)(i()),[j,k]=(0,b.useState)(!1),{toast:l}=(0,d.useToast)(),{currentBusiness:m}=(0,e.useBusiness)(),n=async()=>{if(!m)return i();try{let a=await g(m.id);if(!a)return i();{let b=a.metadata&&"object"==typeof a.metadata&&a.metadata.payment_info||"";return{id:a.id,businessName:a.business_name||"",businessAddress:a.business_address||"",businessPhone:a.business_phone||"",businessEmail:a.business_email||"",businessLogo:a.business_logo||void 0,currency:a.currency||"UGX",signature:a.signature||void 0,paymentInfo:b,defaultPrintFormat:a.metadata&&"object"==typeof a.metadata&&a.metadata.default_print_format||"standard",defaultPrinterName:a.metadata&&"object"==typeof a.metadata&&a.metadata.default_printer_name||"",defaultPrinterType:a.metadata&&"object"==typeof a.metadata&&a.metadata.default_printer_type||"USB",printerPaperSize:a.metadata&&"object"==typeof a.metadata&&a.metadata.printer_paper_size||"58mm"}}}catch(a){return console.error("Error loading business settings:",a),l({title:"Error",description:"Failed to load business settings. Please try again.",variant:"destructive"}),i()}},o=async b=>{if(!m)return console.error("No business selected for updating settings"),l({title:"Error",description:"No business selected",variant:"destructive"}),!1;try{let c={payment_info:b.hasOwnProperty("paymentInfo")?b.paymentInfo:a.paymentInfo||"",default_print_format:b.hasOwnProperty("defaultPrintFormat")?b.defaultPrintFormat:a.defaultPrintFormat||"standard",default_printer_name:b.hasOwnProperty("defaultPrinterName")?b.defaultPrinterName:a.defaultPrinterName||"",default_printer_type:b.hasOwnProperty("defaultPrinterType")?b.defaultPrinterType:a.defaultPrinterType||"USB",printer_paper_size:b.hasOwnProperty("printerPaperSize")?b.printerPaperSize:a.printerPaperSize||"58mm"},d={business_name:b.hasOwnProperty("businessName")?b.businessName:a.businessName,business_address:b.hasOwnProperty("businessAddress")?b.businessAddress:a.businessAddress,business_phone:b.hasOwnProperty("businessPhone")?b.businessPhone:a.businessPhone,business_email:b.hasOwnProperty("businessEmail")?b.businessEmail:a.businessEmail,business_logo:b.hasOwnProperty("businessLogo")?b.businessLogo:a.businessLogo,currency:b.hasOwnProperty("currency")?b.currency:a.currency,signature:b.hasOwnProperty("signature")?b.signature:a.signature,metadata:c},e=await (0,h.upsertBusinessSettingsAction)(m.id,"00000000-0000-0000-0000-000000000000",d);if(!e.success)throw console.error("Supabase error updating business settings:",e.error),Error(e.error);return l({title:"Success",description:"Business settings updated successfully"}),s(),!0}catch(a){return console.error("Error updating business settings:",a),l({title:"Error",description:"Failed to update business settings. Please try again.",variant:"destructive"}),!1}},{data:p,isLoading:q,isFetching:r,refetch:s}=(0,c.useQuery)({queryKey:["businessSettings",m?.id],queryFn:n,enabled:!!m?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return(0,b.useEffect)(()=>{p?f(p):m||f(i())},[p,m]),(0,b.useEffect)(()=>{k(q||r)},[q,r]),{settings:a,isLoading:j,updateSettings:o,loadSettings:n}}],866102)},774016,959296,42724,a=>{"use strict";let b=Symbol.for("constructDateFrom");function c(a,c){return"function"==typeof a?a(c):a&&"object"==typeof a&&b in a?a[b](c):a instanceof Date?new a.constructor(c):new Date(c)}function d(a,b){return c(b||a,a)}a.s(["constructFromSymbol",0,b,"millisecondsInDay",0,864e5,"millisecondsInHour",0,36e5,"millisecondsInMinute",0,6e4,"millisecondsInSecond",0,1e3,"millisecondsInWeek",0,6048e5,"minutesInDay",0,1440,"minutesInMonth",0,43200],959296),a.s(["constructFrom",()=>c],42724),a.s(["toDate",()=>d],774016)},400291,a=>{"use strict";var b=a.i(890914);a.s(["useFinancialVisibility",0,()=>{let{hasPermission:a}=(0,b.useProfiles)(),c=a("inventory","view_cost_price"),d=a("inventory","view_profit"),e=a("inventory","view_selling_price"),f=a("dashboard","view_total_sales"),g=a("dashboard","view_gross_profit"),h=a("dashboard","view_total_expenses"),i=a("dashboard","view_inventory_value"),j=a("dashboard","view_sales_types"),k=a("dashboard","view_avg_price"),l=a("dashboard","view_total_amount"),m=a("finance","manage_accounts"),n=a("finance","view"),o=a("expenses","view"),p=a("expenses","create"),q=a("expenses","edit");return{canViewCostPrice:c,canViewProfit:d,canViewSellingPrice:e,canViewTotalSales:f,canViewTotalGrossProfit:g,canViewTotalExpenses:h,canViewInventoryValue:i,canViewSalesTypes:j,canViewAvgPrice:k,canViewTotalAmount:l,canManageFinanceAccounts:m,canViewFinance:n,canViewExpenses:o,canCreateExpenses:p,canEditExpenses:q,canDeleteExpenses:a("expenses","delete"),formatFinancial:(a,b)=>"cost"===b&&c||"selling"===b&&e||"profit"===b&&d?a?.toLocaleString()||"0":"•••"}}])},206015,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(368114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},730769,a=>{"use strict";var b=a.i(667937);a.s(["CalendarIcon",()=>b.default])}];

//# sourceMappingURL=_ae09e572._.js.map