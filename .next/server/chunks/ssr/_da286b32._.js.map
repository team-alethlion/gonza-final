{"version":3,"sources":["../../../../src/components/inventory/StockStatusBadge.tsx","../../../../src/components/inventory/ProductActions.tsx","../../../../src/components/inventory/MobileProductCard.tsx","../../../../src/components/inventory/TableSortHeader.tsx","../../../../src/components/inventory/InlineEditableCell.tsx","../../../../src/components/inventory/DesktopProductTable.tsx","../../../../src/components/inventory/EmptyProductState.tsx","../../../../src/components/inventory/InventoryTable.tsx","../../../../src/components/inventory/InventoryFilters.tsx","../../../../src/utils/exportProductsForUpdate.ts","../../../../src/utils/exportProductsToCSV.ts","../../../../src/utils/exportProductsToPDF.ts","../../../../src/components/inventory/BulkDeleteDialog.tsx","../../../../src/utils/csvUpdateParser.ts","../../../../src/hooks/useProductCSVUpdate.ts","../../../../src/components/inventory/CSVUpdateDialog.tsx","../../../../node_modules/lucide-react/src/icons/settings-2.ts","../../../../src/components/inventory/BulkPrintDialog.tsx","../../../../src/components/inventory/BarcodeExportDialog.tsx","../../../../src/pages/Products.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Product } from '@/types';\r\n\r\ninterface StockStatusBadgeProps {\r\n  product: Product;\r\n}\r\n\r\nconst StockStatusBadge: React.FC<StockStatusBadgeProps> = ({ product }) => {\r\n  if (product.quantity === 0) {\r\n    return <Badge variant=\"destructive\">Out of stock</Badge>;\r\n  }\r\n  \r\n  if (product.quantity <= product.minimumStock) {\r\n    return <Badge variant=\"warning\">Low stock</Badge>;\r\n  }\r\n  \r\n  return <Badge variant=\"success\">In stock</Badge>;\r\n};\r\n\r\nexport default StockStatusBadge;\r\n","\r\nimport React from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { MoreHorizontal, Edit, Info } from 'lucide-react';\r\nimport { Product } from '@/types';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\n\r\ninterface ProductActionsProps {\r\n  product: Product;\r\n  onView: (id: string) => void;\r\n  onEdit: (id: string) => void;\r\n}\r\n\r\nconst ProductActions: React.FC<ProductActionsProps> = ({\r\n  product,\r\n  onView,\r\n  onEdit,\r\n}) => {\r\n  const { hasPermission } = useProfiles();\r\n  return (\r\n    <>\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button variant=\"ghost\" size=\"icon\">\r\n            <MoreHorizontal className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">Open menu</span>\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"end\">\r\n          <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n          <DropdownMenuItem onClick={() => onView(product.id)}>\r\n            <Info className=\"mr-2 h-4 w-4\" /> View details\r\n          </DropdownMenuItem>\r\n          {hasPermission('inventory', 'edit') && (\r\n            <DropdownMenuItem onClick={() => onEdit(product.id)}>\r\n              <Edit className=\"mr-2 h-4 w-4\" /> Edit\r\n            </DropdownMenuItem>\r\n          )}\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductActions;\r\n","\r\nimport React from 'react';\r\nimport { Product } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport ProductImage from './ProductImage';\r\nimport StockStatusBadge from './StockStatusBadge';\r\nimport ProductActions from './ProductActions';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface MobileProductCardProps {\r\n  product: Product;\r\n  onView: (id: string) => void;\r\n  onEdit: (id: string) => void;\r\n  showAllFields?: boolean;\r\n  enableBulkActions?: boolean;\r\n  isSelected?: boolean;\r\n  onToggleSelection?: (productId: string) => void;\r\n}\r\n\r\nconst MobileProductCard: React.FC<MobileProductCardProps> = ({\r\n  product,\r\n  onView,\r\n  onEdit,\r\n  showAllFields = true,\r\n  enableBulkActions = false,\r\n  isSelected = false,\r\n  onToggleSelection\r\n}) => {\r\n  const { settings } = useBusinessSettings();\r\n  const { formatFinancial, canViewCostPrice, canViewSellingPrice, canViewProfit } = useFinancialVisibility();\r\n\r\n  // Calculate total cost\r\n  const totalCost = product.quantity * product.costPrice;\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <div\r\n        className=\"py-4 px-4 hover:bg-gray-50 border-b last:border-b-0 rounded-md\"\r\n        onClick={() => onView(product.id)}\r\n      >\r\n        <div className=\"flex justify-between items-start mb-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {enableBulkActions && (\r\n              <div onClick={(e) => e.stopPropagation()}>\r\n                <Checkbox\r\n                  checked={isSelected}\r\n                  onCheckedChange={() => onToggleSelection?.(product.id)}\r\n                  aria-label={`Select ${product.name}`}\r\n                />\r\n              </div>\r\n            )}\r\n            <ProductImage imageUrl={product.imageUrl} alt={product.name} />\r\n            <div>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <h3 className=\"font-medium text-sales-dark cursor-help max-w-[150px] truncate\">{product.name}</h3>\r\n                </TooltipTrigger>\r\n                <TooltipContent side=\"top\" className=\"max-w-xs\">\r\n                  <div className=\"space-y-1\">\r\n                    <p className=\"font-bold break-words whitespace-normal\">{product.name}</p>\r\n                    {product.description && (\r\n                      <p className=\"text-xs text-muted-foreground whitespace-pre-wrap\">{product.description}</p>\r\n                    )}\r\n                  </div>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n              <p className=\"text-sm text-muted-foreground\">#{product.itemNumber}</p>\r\n            </div>\r\n          </div>\r\n          <div onClick={(e) => e.stopPropagation()}>\r\n            <ProductActions\r\n              product={product}\r\n              onView={onView}\r\n              onEdit={onEdit}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={`grid grid-cols-2 gap-y-2.5 text-sm ${enableBulkActions ? 'ml-20' : 'ml-14'}`}>\r\n          {product.category && (\r\n            <>\r\n              <div className=\"text-muted-foreground font-medium\">Category:</div>\r\n              <div className=\"font-normal\">{product.category}</div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"text-muted-foreground font-medium\">Quantity:</div>\r\n          <div className=\"font-medium\">{product.quantity % 1 === 0 ? product.quantity : product.quantity.toFixed(2)}</div>\r\n\r\n          <div className=\"text-muted-foreground font-medium\">Status:</div>\r\n          <div><StockStatusBadge product={product} /></div>\r\n\r\n          {product.costPrice !== undefined && product.costPrice !== null && (\r\n            <>\r\n              <div className=\"text-muted-foreground font-medium\">Cost Price:</div>\r\n              <div className=\"font-medium tabular-nums\">\r\n                {canViewCostPrice ? `${settings.currency} ${formatFinancial(product.costPrice, 'cost')}` : '•••'}\r\n              </div>\r\n\r\n              <div className=\"text-muted-foreground font-medium\">Total Cost:</div>\r\n              <div className=\"font-medium tabular-nums\">\r\n                {canViewCostPrice ? `${settings.currency} ${formatNumber(totalCost)}` : '•••'}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {showAllFields && product.sellingPrice !== undefined && product.sellingPrice !== null && (\r\n            <>\r\n              <div className=\"text-muted-foreground font-medium\">Selling Price:</div>\r\n              <div className=\"font-medium tabular-nums\">\r\n                {canViewSellingPrice ? `${settings.currency} ${formatFinancial(product.sellingPrice, 'selling')}` : '•••'}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default MobileProductCard;\r\n","\r\nimport React from 'react';\r\nimport { TableHead } from '@/components/ui/table';\r\nimport { ChevronUp, ChevronDown } from 'lucide-react';\r\nimport { SortField } from './InventoryTable'; // Import SortField from InventoryTable\r\n\r\ninterface TableSortHeaderProps {\r\n  field: SortField;\r\n  currentSortField: SortField;\r\n  sortOrder: 'asc' | 'desc';\r\n  onSort: (field: SortField) => void;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst TableSortHeader: React.FC<TableSortHeaderProps> = ({\r\n  field,\r\n  currentSortField,\r\n  sortOrder,\r\n  onSort,\r\n  children,\r\n  className\r\n}) => {\r\n  return (\r\n    <TableHead \r\n      className={`cursor-pointer hover:bg-muted/80 ${className || ''}`} \r\n      onClick={() => onSort(field)}\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        {children}\r\n        {currentSortField === field && (\r\n          <div className=\"ml-1\">\r\n            {sortOrder === 'asc' ? (\r\n              <ChevronUp className=\"h-4 w-4\" />\r\n            ) : (\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </TableHead>\r\n  );\r\n};\r\n\r\nexport default TableSortHeader;\r\n","import React, { useState } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Check, X, Edit } from 'lucide-react';\r\nimport { formatNumber } from '@/lib/utils';\r\n\r\ninterface InlineEditableCellProps {\r\n  value: string | number;\r\n  type: 'text' | 'number' | 'select';\r\n  options?: string[];\r\n  currency?: string;\r\n  onSave: (newValue: string | number) => Promise<boolean>;\r\n  className?: string;\r\n  displayFormatter?: (value: string | number) => string;\r\n}\r\n\r\nconst InlineEditableCell: React.FC<InlineEditableCellProps> = ({\r\n  value,\r\n  type,\r\n  options = [],\r\n  currency,\r\n  onSave,\r\n  className = '',\r\n  displayFormatter\r\n}) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(value.toString());\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  const handleEdit = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsEditing(true);\r\n    setEditValue(value.toString());\r\n  };\r\n\r\n  const handleCancel = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsEditing(false);\r\n    setEditValue(value.toString());\r\n  };\r\n\r\n  const handleSave = async (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsSaving(true);\r\n    \r\n    try {\r\n      const newValue = type === 'number' ? parseFloat(editValue) || 0 : editValue;\r\n      const success = await onSave(newValue);\r\n      \r\n      if (success) {\r\n        setIsEditing(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving:', error);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    e.stopPropagation();\r\n    if (e.key === 'Enter') {\r\n      handleSave(e as any);\r\n    } else if (e.key === 'Escape') {\r\n      handleCancel(e as any);\r\n    }\r\n  };\r\n\r\n  const getDisplayValue = () => {\r\n    if (displayFormatter) {\r\n      return displayFormatter(value);\r\n    }\r\n    \r\n    if (type === 'number' && currency) {\r\n      return `${currency} ${formatNumber(value as number)}`;\r\n    }\r\n    \r\n    return value.toString();\r\n  };\r\n\r\n  if (!isEditing) {\r\n    return (\r\n      <div \r\n        className={`group cursor-pointer flex items-center gap-2 ${className}`}\r\n        onClick={handleEdit}\r\n      >\r\n        <span className=\"flex-1\">{getDisplayValue()}</span>\r\n        <Edit className=\"h-3 w-3 opacity-0 group-hover:opacity-50 transition-opacity\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1\" onClick={(e) => e.stopPropagation()}>\r\n      {type === 'select' ? (\r\n        <Select value={editValue} onValueChange={setEditValue}>\r\n          <SelectTrigger className=\"h-8 text-xs\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {options.map((option) => (\r\n              <SelectItem key={option} value={option}>\r\n                {option}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      ) : (\r\n        <Input\r\n          type={type}\r\n          value={editValue}\r\n          onChange={(e) => setEditValue(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          className=\"h-8 text-xs\"\r\n          autoFocus\r\n          step={type === 'number' ? '0.01' : undefined}\r\n        />\r\n      )}\r\n      <Button\r\n        size=\"icon\"\r\n        variant=\"ghost\"\r\n        className=\"h-6 w-6\"\r\n        onClick={handleSave}\r\n        disabled={isSaving}\r\n      >\r\n        <Check className=\"h-3 w-3\" />\r\n      </Button>\r\n      <Button\r\n        size=\"icon\"\r\n        variant=\"ghost\"\r\n        className=\"h-6 w-6\"\r\n        onClick={handleCancel}\r\n        disabled={isSaving}\r\n      >\r\n        <X className=\"h-3 w-3\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InlineEditableCell;","\r\nimport React from 'react';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table';\r\nimport { Product } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport TableSortHeader from './TableSortHeader';\r\nimport StockStatusBadge from './StockStatusBadge';\r\nimport ProductActions from './ProductActions';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport ProductImage from './ProductImage';\r\nimport { SortField } from './InventoryTable';\r\nimport { format } from 'date-fns';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport InlineEditableCell from './InlineEditableCell';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ntype SortOrder = 'asc' | 'desc';\r\n\r\ninterface DesktopProductTableProps {\r\n  products: Product[];\r\n  sortField: SortField;\r\n  sortOrder: SortOrder;\r\n  handleSort: (field: SortField) => void;\r\n  onView: (id: string) => void;\r\n  onEdit: (id: string) => void;\r\n  showAllFields?: boolean;\r\n  enableBulkActions?: boolean;\r\n  selectedProductIds?: Set<string>;\r\n  onToggleProductSelection?: (productId: string) => void;\r\n  onToggleAllProducts?: (productIds: string[]) => void;\r\n  onUpdateProduct?: (id: string, updates: Partial<Product>) => Promise<boolean>;\r\n  categories?: string[];\r\n}\r\n\r\nconst DesktopProductTable: React.FC<DesktopProductTableProps> = ({\r\n  products,\r\n  sortField,\r\n  sortOrder,\r\n  handleSort,\r\n  onView,\r\n  onEdit,\r\n  showAllFields = true,\r\n  enableBulkActions = false,\r\n  selectedProductIds = new Set(),\r\n  onToggleProductSelection,\r\n  onToggleAllProducts,\r\n  onUpdateProduct,\r\n  categories = []\r\n}) => {\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n  const { canViewCostPrice, canViewSellingPrice, formatFinancial } = useFinancialVisibility();\r\n  const canEdit = hasPermission('inventory', 'edit');\r\n\r\n  // Calculate total cost for a product\r\n  const calculateTotalCost = (product: Product) => {\r\n    return product.quantity * product.costPrice;\r\n  };\r\n\r\n  const productIds = products.map(p => p.id);\r\n  const allSelected = productIds.length > 0 && productIds.every(id => selectedProductIds.has(id));\r\n\r\n  // Simplified version (less columns) - used for top selling products and Products page\r\n  if (!showAllFields) {\r\n    return (\r\n      <div className=\"overflow-hidden rounded-md border\">\r\n        <TooltipProvider>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow className=\"bg-muted/50\">\r\n                {enableBulkActions && (\r\n                  <TableHead className=\"w-[50px]\">\r\n                    <Checkbox\r\n                      checked={allSelected}\r\n                      onCheckedChange={() => onToggleAllProducts?.(productIds)}\r\n                      aria-label=\"Select all products\"\r\n                    />\r\n                  </TableHead>\r\n                )}\r\n                <TableHead className=\"w-[80px]\">Image</TableHead>\r\n                <TableSortHeader\r\n                  field=\"itemNumber\"\r\n                  currentSortField={sortField}\r\n                  sortOrder={sortOrder}\r\n                  onSort={handleSort}\r\n                  className=\"w-[100px]\"\r\n                >\r\n                  Item #\r\n                </TableSortHeader>\r\n                <TableSortHeader\r\n                  field=\"name\"\r\n                  currentSortField={sortField}\r\n                  sortOrder={sortOrder}\r\n                  onSort={handleSort}\r\n                  className=\"w-[160px]\"\r\n                >\r\n                  Product Name\r\n                </TableSortHeader>\r\n                <TableSortHeader\r\n                  field=\"category\"\r\n                  currentSortField={sortField}\r\n                  sortOrder={sortOrder}\r\n                  onSort={handleSort}\r\n                  className=\"w-[120px]\"\r\n                >\r\n                  Category\r\n                </TableSortHeader>\r\n                <TableSortHeader\r\n                  field=\"quantity\"\r\n                  currentSortField={sortField}\r\n                  sortOrder={sortOrder}\r\n                  onSort={handleSort}\r\n                  className=\"w-[80px] text-right\"\r\n                >\r\n                  Quantity\r\n                </TableSortHeader>\r\n                <TableHead className=\"w-[80px]\">Status</TableHead>\r\n                {canViewCostPrice && (\r\n                  <TableSortHeader\r\n                    field=\"costPrice\"\r\n                    currentSortField={sortField}\r\n                    sortOrder={sortOrder}\r\n                    onSort={handleSort}\r\n                    className=\"w-[100px] text-right\"\r\n                  >\r\n                    Cost Price\r\n                  </TableSortHeader>\r\n                )}\r\n                {canViewSellingPrice && (\r\n                  <TableSortHeader\r\n                    field=\"sellingPrice\"\r\n                    currentSortField={sortField}\r\n                    sortOrder={sortOrder}\r\n                    onSort={handleSort}\r\n                    className=\"w-[100px] text-right\"\r\n                  >\r\n                    Selling Price\r\n                  </TableSortHeader>\r\n                )}\r\n                <TableHead className=\"w-[100px] text-center\">Created Date</TableHead>\r\n                <TableHead className=\"w-[80px] text-right\">Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {products.map((product) => (\r\n                <TableRow\r\n                  key={product.id}\r\n                  className=\"hover:bg-gray-50 cursor-pointer\"\r\n                  onClick={() => onView(product.id)}\r\n                >\r\n                  {enableBulkActions && (\r\n                    <TableCell onClick={(e) => e.stopPropagation()}>\r\n                      <Checkbox\r\n                        checked={selectedProductIds.has(product.id)}\r\n                        onCheckedChange={() => onToggleProductSelection?.(product.id)}\r\n                        aria-label={`Select ${product.name}`}\r\n                      />\r\n                    </TableCell>\r\n                  )}\r\n                  <TableCell>\r\n                    <ProductImage imageUrl={product.imageUrl} alt={product.name} size=\"sm\" />\r\n                  </TableCell>\r\n                  <TableCell className=\"font-mono text-sm max-w-[100px] truncate\">\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <span className=\"cursor-help\">{product.itemNumber}</span>\r\n                      </TooltipTrigger>\r\n                      <TooltipContent>\r\n                        <p className=\"font-mono\">{product.itemNumber}</p>\r\n                      </TooltipContent>\r\n                    </Tooltip>\r\n                  </TableCell>\r\n                  <TableCell className=\"font-medium max-w-[160px] truncate\">\r\n                    <Tooltip>\r\n                      <TooltipTrigger asChild>\r\n                        <span className=\"cursor-help\">{product.name}</span>\r\n                      </TooltipTrigger>\r\n                      <TooltipContent className=\"max-w-xs\">\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"font-bold break-words whitespace-normal\">{product.name}</p>\r\n                          {product.description && (\r\n                            <p className=\"text-xs text-muted-foreground whitespace-pre-wrap\">{product.description}</p>\r\n                          )}\r\n                        </div>\r\n                      </TooltipContent>\r\n                    </Tooltip>\r\n                  </TableCell>\r\n                  <TableCell className=\"max-w-[120px]\" onClick={(e) => e.stopPropagation()}>\r\n                    {onUpdateProduct && canEdit ? (\r\n                      <InlineEditableCell\r\n                        value={product.category}\r\n                        type=\"select\"\r\n                        options={categories}\r\n                        onSave={(newValue) => onUpdateProduct(product.id, { category: newValue as string })}\r\n                      />\r\n                    ) : (\r\n                      <span className=\"truncate\">{product.category}</span>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right font-medium\">{product.quantity % 1 === 0 ? product.quantity : product.quantity.toFixed(2)}</TableCell>\r\n                  <TableCell><StockStatusBadge product={product} /></TableCell>\r\n                  <TableCell><StockStatusBadge product={product} /></TableCell>\r\n                  {canViewCostPrice && (\r\n                    <TableCell className=\"text-right font-medium tabular-nums\" onClick={(e) => e.stopPropagation()}>\r\n                      {onUpdateProduct && canEdit ? (\r\n                        <InlineEditableCell\r\n                          value={product.costPrice}\r\n                          type=\"number\"\r\n                          currency={settings.currency}\r\n                          onSave={(newValue) => onUpdateProduct(product.id, { costPrice: newValue as number })}\r\n                          className=\"text-right\"\r\n                        />\r\n                      ) : (\r\n                        <span>{settings.currency} {formatFinancial(product.costPrice, 'cost')}</span>\r\n                      )}\r\n                    </TableCell>\r\n                  )}\r\n                  {canViewSellingPrice && (\r\n                    <TableCell className=\"text-right font-medium tabular-nums\" onClick={(e) => e.stopPropagation()}>\r\n                      {onUpdateProduct && canEdit ? (\r\n                        <InlineEditableCell\r\n                          value={product.sellingPrice}\r\n                          type=\"number\"\r\n                          currency={settings.currency}\r\n                          onSave={(newValue) => onUpdateProduct(product.id, { sellingPrice: newValue as number })}\r\n                          className=\"text-right\"\r\n                        />\r\n                      ) : (\r\n                        <span>{settings.currency} {formatFinancial(product.sellingPrice, 'selling')}</span>\r\n\r\n                      )}\r\n                    </TableCell>\r\n                  )}\r\n                  <TableCell className=\"text-center text-sm text-muted-foreground\">\r\n                    {format(product.createdAt, 'MMM dd, yyyy')}\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\" onClick={(e) => e.stopPropagation()}>\r\n                    <ProductActions\r\n                      product={product}\r\n                      onView={onView}\r\n                      onEdit={onEdit}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TooltipProvider>\r\n      </div >\r\n    );\r\n  }\r\n\r\n  // Full view (more columns) - now includes Created Date and Item Number\r\n  return (\r\n    <div className=\"overflow-hidden rounded-md border\">\r\n      <TooltipProvider>\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow className=\"bg-muted/50\">\r\n              {enableBulkActions && (\r\n                <TableHead className=\"w-[50px]\">\r\n                  <Checkbox\r\n                    checked={allSelected}\r\n                    onCheckedChange={() => onToggleAllProducts?.(productIds)}\r\n                    aria-label=\"Select all products\"\r\n                  />\r\n                </TableHead>\r\n              )}\r\n              <TableHead className=\"w-[80px]\">Image</TableHead>\r\n              <TableSortHeader\r\n                field=\"itemNumber\"\r\n                currentSortField={sortField}\r\n                sortOrder={sortOrder}\r\n                onSort={handleSort}\r\n                className=\"w-[100px]\"\r\n              >\r\n                Item #\r\n              </TableSortHeader>\r\n              <TableSortHeader\r\n                field=\"name\"\r\n                currentSortField={sortField}\r\n                sortOrder={sortOrder}\r\n                onSort={handleSort}\r\n                className=\"w-[180px]\"\r\n              >\r\n                Product Name\r\n              </TableSortHeader>\r\n              <TableSortHeader\r\n                field=\"category\"\r\n                currentSortField={sortField}\r\n                sortOrder={sortOrder}\r\n                onSort={handleSort}\r\n                className=\"w-[120px]\"\r\n              >\r\n                Category\r\n              </TableSortHeader>\r\n              <TableSortHeader\r\n                field=\"quantity\"\r\n                currentSortField={sortField}\r\n                sortOrder={sortOrder}\r\n                onSort={handleSort}\r\n                className=\"w-[80px] text-right\"\r\n              >\r\n                Quantity\r\n              </TableSortHeader>\r\n              <TableHead className=\"w-[80px]\">Status</TableHead>\r\n              {canViewCostPrice && (\r\n                <>\r\n                  <TableSortHeader\r\n                    field=\"costPrice\"\r\n                    currentSortField={sortField}\r\n                    sortOrder={sortOrder}\r\n                    onSort={handleSort}\r\n                    className=\"w-[100px] text-right\"\r\n                  >\r\n                    Cost Price\r\n                  </TableSortHeader>\r\n                  <TableHead className=\"w-[100px] text-right\">Total Cost</TableHead>\r\n                </>\r\n              )}\r\n              {canViewSellingPrice && (\r\n                <TableSortHeader\r\n                  field=\"sellingPrice\"\r\n                  currentSortField={sortField}\r\n                  sortOrder={sortOrder}\r\n                  onSort={handleSort}\r\n                  className=\"w-[100px] text-right\"\r\n                >\r\n                  Selling Price\r\n                </TableSortHeader>\r\n              )}\r\n              <TableHead className=\"w-[100px] text-center\">Created Date</TableHead>\r\n              <TableHead className=\"w-[80px] text-right\">Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {products.map((product) => (\r\n              <TableRow\r\n                key={product.id}\r\n                className=\"hover:bg-gray-50 cursor-pointer\"\r\n                onClick={() => onView(product.id)}\r\n              >\r\n                {enableBulkActions && (\r\n                  <TableCell onClick={(e) => e.stopPropagation()}>\r\n                    <Checkbox\r\n                      checked={selectedProductIds.has(product.id)}\r\n                      onCheckedChange={() => onToggleProductSelection?.(product.id)}\r\n                      aria-label={`Select ${product.name}`}\r\n                    />\r\n                  </TableCell>\r\n                )}\r\n                <TableCell>\r\n                  <ProductImage imageUrl={product.imageUrl} alt={product.name} size=\"sm\" />\r\n                </TableCell>\r\n                <TableCell className=\"font-mono text-sm max-w-[100px] truncate\">\r\n                  <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                      <span className=\"cursor-help\">{product.itemNumber}</span>\r\n                    </TooltipTrigger>\r\n                    <TooltipContent>\r\n                      <p className=\"font-mono\">{product.itemNumber}</p>\r\n                    </TooltipContent>\r\n                  </Tooltip>\r\n                </TableCell>\r\n                <TableCell className=\"font-medium max-w-[180px] truncate\">\r\n                  <Tooltip>\r\n                    <TooltipTrigger asChild>\r\n                      <span className=\"cursor-help\">{product.name}</span>\r\n                    </TooltipTrigger>\r\n                    <TooltipContent className=\"max-w-xs\">\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"font-bold break-words whitespace-normal\">{product.name}</p>\r\n                        {product.description && (\r\n                          <p className=\"text-xs text-muted-foreground whitespace-pre-wrap\">{product.description}</p>\r\n                        )}\r\n                      </div>\r\n                    </TooltipContent>\r\n                  </Tooltip>\r\n                </TableCell>\r\n                <TableCell className=\"max-w-[120px]\" onClick={(e) => e.stopPropagation()}>\r\n                  {onUpdateProduct && canEdit ? (\r\n                    <InlineEditableCell\r\n                      value={product.category}\r\n                      type=\"select\"\r\n                      options={categories}\r\n                      onSave={(newValue) => onUpdateProduct(product.id, { category: newValue as string })}\r\n                    />\r\n                  ) : (\r\n                    <span className=\"truncate\">{product.category}</span>\r\n                  )}\r\n                </TableCell>\r\n                <TableCell className=\"text-right font-medium\">{product.quantity % 1 === 0 ? product.quantity : product.quantity.toFixed(2)}</TableCell>\r\n                <TableCell><StockStatusBadge product={product} /></TableCell>\r\n                {canViewCostPrice && (\r\n                  <>\r\n                    <TableCell className=\"text-right font-medium tabular-nums\" onClick={(e) => e.stopPropagation()}>\r\n                      {onUpdateProduct && canEdit ? (\r\n                        <InlineEditableCell\r\n                          value={product.costPrice}\r\n                          type=\"number\"\r\n                          currency={settings.currency}\r\n                          onSave={(newValue) => onUpdateProduct(product.id, { costPrice: newValue as number })}\r\n                          className=\"text-right\"\r\n                        />\r\n                      ) : (\r\n                        <span>{settings.currency} {formatFinancial(product.costPrice, 'cost')}</span>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right font-medium tabular-nums\">\r\n                      {settings.currency} {formatFinancial(calculateTotalCost(product), 'cost')}\r\n                    </TableCell>\r\n                  </>\r\n                )}\r\n                {canViewSellingPrice && (\r\n                  <TableCell className=\"text-right font-medium tabular-nums\" onClick={(e) => e.stopPropagation()}>\r\n                    {onUpdateProduct && canEdit ? (\r\n                      <InlineEditableCell\r\n                        value={product.sellingPrice}\r\n                        type=\"number\"\r\n                        currency={settings.currency}\r\n                        onSave={(newValue) => onUpdateProduct(product.id, { sellingPrice: newValue as number })}\r\n                        className=\"text-right\"\r\n                      />\r\n                    ) : (\r\n                      <span>{settings.currency} {formatFinancial(product.sellingPrice, 'price')}</span>\r\n                    )}\r\n                  </TableCell>\r\n                )}\r\n                <TableCell className=\"text-center text-sm text-muted-foreground\">\r\n                  {format(product.createdAt, 'MMM dd, yyyy')}\r\n                </TableCell>\r\n                <TableCell className=\"text-right\" onClick={(e) => e.stopPropagation()}>\r\n                  <ProductActions\r\n                    product={product}\r\n                    onView={onView}\r\n                    onEdit={onEdit}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TooltipProvider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DesktopProductTable;\r\n","\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Package, Plus } from 'lucide-react';\r\n\r\nconst EmptyProductState: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  \r\n  return (\r\n    <div className=\"text-center py-12 px-4 border-dashed border-2 rounded-lg bg-white\">\r\n      <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-4\">\r\n        <Package className=\"h-6 w-6 text-muted-foreground\" />\r\n      </div>\r\n      <h3 className=\"text-lg font-medium text-gray-900\">No products found</h3>\r\n      <p className=\"mt-1 text-sm text-muted-foreground\">\r\n        Start managing your inventory by adding your first product.\r\n      </p>\r\n      <div className=\"mt-6\">\r\n        <Button onClick={() => navigate('/inventory/new')} className=\"gap-2\">\r\n          <Plus size={16} /> Add New Product\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyProductState;\r\n","\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Product } from '@/types';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport MobileProductCard from './MobileProductCard';\r\nimport DesktopProductTable from './DesktopProductTable';\r\nimport EmptyProductState from './EmptyProductState';\r\n\r\ninterface InventoryTableProps {\r\n  products: Product[];\r\n  isLoading: boolean;\r\n  showAllFields?: boolean;\r\n  enableBulkActions?: boolean;\r\n  selectedProductIds?: Set<string>;\r\n  onToggleProductSelection?: (productId: string) => void;\r\n  onToggleAllProducts?: (productIds: string[]) => void;\r\n  sortField?: SortField;\r\n  sortOrder?: 'asc' | 'desc';\r\n  onSort?: (field: SortField) => void;\r\n  onUpdateProduct?: (id: string, updates: Partial<Product>) => Promise<boolean>;\r\n  categories?: string[];\r\n}\r\n\r\nexport type SortField = 'name' | 'category' | 'quantity' | 'sellingPrice' | 'costPrice' | 'itemNumber';\r\ntype SortOrder = 'asc' | 'desc';\r\n\r\nconst InventoryTable: React.FC<InventoryTableProps> = ({ \r\n  products, \r\n  isLoading, \r\n  showAllFields = true,\r\n  enableBulkActions = false,\r\n  selectedProductIds = new Set(),\r\n  onToggleProductSelection,\r\n  onToggleAllProducts,\r\n  sortField: externalSortField,\r\n  sortOrder: externalSortOrder,\r\n  onSort: externalOnSort,\r\n  onUpdateProduct,\r\n  categories = []\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const isMobile = useIsMobile();\r\n  \r\n  // Internal sorting state (fallback if no external sorting is provided)\r\n  const [internalSortField, setInternalSortField] = React.useState<SortField>('name');\r\n  const [internalSortOrder, setInternalSortOrder] = React.useState<SortOrder>('asc');\r\n\r\n  // Use external sorting if provided, otherwise use internal\r\n  const sortField = externalSortField || internalSortField;\r\n  const sortOrder = externalSortOrder || internalSortOrder;\r\n\r\n  const handleEdit = (id: string) => {\r\n    navigate(`/inventory/edit/${id}`);\r\n  };\r\n\r\n  const handleView = (id: string) => {\r\n    navigate(`/inventory/${id}`);\r\n  };\r\n\r\n  const handleSort = (field: SortField) => {\r\n    if (externalOnSort) {\r\n      // Use external sort handler if provided\r\n      externalOnSort(field);\r\n    } else {\r\n      // Use internal sorting logic\r\n      if (sortField === field) {\r\n        setInternalSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n      } else {\r\n        setInternalSortField(field);\r\n        setInternalSortOrder('asc');\r\n      }\r\n    }\r\n  };\r\n\r\n  const sortedProducts = React.useMemo(() => {\r\n    return [...products].sort((a, b) => {\r\n      let comparison = 0;\r\n      \r\n      switch (sortField) {\r\n        case 'name':\r\n          comparison = a.name.localeCompare(b.name);\r\n          break;\r\n        case 'category':\r\n          comparison = a.category.localeCompare(b.category);\r\n          break;\r\n        case 'quantity':\r\n          comparison = a.quantity - b.quantity;\r\n          break;\r\n        case 'sellingPrice':\r\n          comparison = a.sellingPrice - b.sellingPrice;\r\n          break;\r\n        case 'costPrice':\r\n          comparison = a.costPrice - b.costPrice;\r\n          break;\r\n        case 'itemNumber':\r\n          comparison = a.itemNumber.localeCompare(b.itemNumber);\r\n          break;\r\n      }\r\n      \r\n      return sortOrder === 'asc' ? comparison : -comparison;\r\n    });\r\n  }, [products, sortField, sortOrder]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-pulse\">Loading inventory data...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (products.length === 0) {\r\n    return <EmptyProductState />;\r\n  }\r\n\r\n  // Mobile product cards view\r\n  if (isMobile) {\r\n    const productIds = sortedProducts.map(p => p.id);\r\n    const allSelected = productIds.length > 0 && productIds.every(id => selectedProductIds.has(id));\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {/* Mobile Select All Header */}\r\n        {enableBulkActions && sortedProducts.length > 0 && (\r\n          <div className=\"flex items-center justify-between px-4 py-2 bg-muted/30 rounded-md\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={allSelected}\r\n                onChange={() => onToggleAllProducts?.(productIds)}\r\n                className=\"rounded border-gray-300\"\r\n                id=\"mobile-select-all\"\r\n              />\r\n              <label htmlFor=\"mobile-select-all\" className=\"text-sm font-medium\">\r\n                Select All ({productIds.length})\r\n              </label>\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              {selectedProductIds.size} selected\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Product Cards */}\r\n        <div className=\"divide-y\">\r\n          {sortedProducts.map((product) => (\r\n            <MobileProductCard \r\n              key={product.id}\r\n              product={product}\r\n              onView={handleView}\r\n              onEdit={handleEdit}\r\n              showAllFields={showAllFields}\r\n              enableBulkActions={enableBulkActions}\r\n              isSelected={selectedProductIds.has(product.id)}\r\n              onToggleSelection={onToggleProductSelection}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Desktop table view\r\n  return (\r\n    <DesktopProductTable\r\n      products={sortedProducts}\r\n      sortField={sortField}\r\n      sortOrder={sortOrder}\r\n      handleSort={handleSort}\r\n      onView={handleView}\r\n      onEdit={handleEdit}\r\n      showAllFields={showAllFields}\r\n      enableBulkActions={enableBulkActions}\r\n      selectedProductIds={selectedProductIds}\r\n      onToggleProductSelection={onToggleProductSelection}\r\n      onToggleAllProducts={onToggleAllProducts}\r\n      onUpdateProduct={onUpdateProduct}\r\n      categories={categories}\r\n    />\r\n  );\r\n};\r\n\r\nexport default InventoryTable;\r\n","\r\nimport React from 'react';\r\nimport { Search, Filter } from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n} from '@/components/ui/card';\r\nimport { ProductCategory, ProductFilters } from '@/types';\r\nimport { cn } from '@/lib/utils';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\n\r\ninterface InventoryFiltersProps {\r\n  filters: ProductFilters;\r\n  setFilters: (filters: ProductFilters) => void;\r\n  categories: ProductCategory[];\r\n  productsCount: number;\r\n}\r\n\r\nconst InventoryFilters: React.FC<InventoryFiltersProps> = ({\r\n  filters,\r\n  setFilters,\r\n  categories,\r\n  productsCount\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n\r\n  const [localSearch, setLocalSearch] = React.useState(filters.search);\r\n\r\n  // Sync local search with filters when externally changed\r\n  React.useEffect(() => {\r\n    if (filters.search !== localSearch) {\r\n      setLocalSearch(filters.search);\r\n    }\r\n  }, [filters.search]);\r\n\r\n  const updateFilter = (key: keyof ProductFilters, value: string) => {\r\n    setFilters({\r\n      ...filters,\r\n      [key]: value\r\n    });\r\n  };\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setLocalSearch(e.target.value);\r\n  };\r\n\r\n  const handleSearchKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      updateFilter('search', localSearch);\r\n    }\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    if (localSearch !== filters.search) {\r\n      updateFilter('search', localSearch);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"mb-6 shadow-sm\">\r\n      <CardContent className={cn(\"p-4\", isMobile && \"p-3\")}>\r\n        <div className=\"flex flex-col md:flex-row gap-3\">\r\n          {/* Search */}\r\n          <div className=\"flex items-center relative flex-grow\">\r\n            <Search className=\"h-4 w-4 absolute left-3 text-gray-400\" />\r\n            <Input\r\n              placeholder=\"Search products...\"\r\n              className=\"pl-9\"\r\n              value={localSearch}\r\n              onChange={handleSearchChange}\r\n              onKeyDown={handleSearchKeyDown}\r\n              onBlur={handleBlur}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            {/* Category filter */}\r\n            <div className=\"min-w-[180px]\">\r\n              <Select\r\n                value={filters.category || 'all'}\r\n                onValueChange={(value) => updateFilter('category', value === 'all' ? '' : value)}\r\n              >\r\n                <SelectTrigger className={cn(\r\n                  \"w-full\",\r\n                  filters.category !== '' && \"border-primary\"\r\n                )}>\r\n                  <span className=\"flex items-center gap-2\">\r\n                    <Filter className=\"h-4 w-4\" />\r\n                    <SelectValue placeholder=\"All Categories\" />\r\n                  </span>\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Categories</SelectItem>\r\n                  {categories.map((category) => (\r\n                    <SelectItem key={category.id} value={category.name}>\r\n                      {category.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Stock status */}\r\n            <div className=\"min-w-[150px]\">\r\n              <Select\r\n                value={filters.stockStatus}\r\n                onValueChange={(value) => updateFilter('stockStatus', value as any)}\r\n              >\r\n                <SelectTrigger className={cn(\r\n                  filters.stockStatus !== 'all' && \"border-primary\"\r\n                )}>\r\n                  <SelectValue placeholder=\"Stock Status\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Stock</SelectItem>\r\n                  <SelectItem value=\"inStock\">In Stock</SelectItem>\r\n                  <SelectItem value=\"lowStock\">Low Stock</SelectItem>\r\n                  <SelectItem value=\"outOfStock\">Out of Stock</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Results count */}\r\n            <div className=\"flex items-center\">\r\n              <Badge variant=\"secondary\" className=\"text-xs\">\r\n                {productsCount} {productsCount === 1 ? 'product' : 'products'} found\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default InventoryFilters;\r\n","\r\nimport { Product } from '@/types';\r\n\r\nexport const exportProductsForUpdate = (products: Product[]): void => {\r\n  // Define CSV header - simplified for updates, no currency symbols\r\n  const headers = [\r\n    'Item Number',\r\n    'Name',\r\n    'Category',\r\n    'Quantity',\r\n    'Cost Price',\r\n    'Selling Price',\r\n    'Supplier',\r\n    'Description'\r\n  ];\r\n  \r\n  // Create rows for each product - only editable fields\r\n  const rows = products.map(product => {\r\n    return [\r\n      product.itemNumber,\r\n      product.name,\r\n      product.category,\r\n      product.quantity.toString(),\r\n      product.costPrice.toString(),\r\n      product.sellingPrice.toString(),\r\n      product.supplier || '',\r\n      product.description || ''\r\n    ];\r\n  });\r\n  \r\n  // Combine header and rows\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))\r\n  ].join('\\n');\r\n\r\n  // Create a direct download using data URL\r\n  const dataUrl = `data:text/csv;charset=utf-8,${encodeURIComponent(csvContent)}`;\r\n  const filename = `products_for_update_${new Date().toISOString().slice(0, 10)}.csv`;\r\n  \r\n  // Create and trigger download\r\n  const link = document.createElement('a');\r\n  link.href = dataUrl;\r\n  link.download = filename;\r\n  link.style.display = 'none';\r\n  \r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n};\r\n","\r\nimport { Product, BusinessSettings } from '@/types';\r\n\r\nexport const exportProductsToCSV = (products: Product[]): void => {\r\n  // Get currency from business settings\r\n  const savedSettings = localStorage.getItem('businessSettings');\r\n  const settings: BusinessSettings = savedSettings \r\n    ? JSON.parse(savedSettings)\r\n    : { currency: 'USD' };\r\n\r\n  // Define CSV header - ADDED Item Number\r\n  const headers = [\r\n    'Item Number',\r\n    'Name',\r\n    'Category',\r\n    'Quantity',\r\n    'Minimum Stock',\r\n    `Cost Price (${settings.currency})`,\r\n    `Selling Price (${settings.currency})`,\r\n    'Supplier',\r\n    'Description',\r\n    'Created Date',\r\n    'Last Updated'\r\n  ];\r\n  \r\n  // Create rows for each product - ADDED Item Number\r\n  const rows = products.map(product => {\r\n    return [\r\n      product.itemNumber,\r\n      product.name,\r\n      product.category,\r\n      product.quantity.toString(),\r\n      product.minimumStock.toString(),\r\n      product.costPrice.toFixed(2),\r\n      product.sellingPrice.toFixed(2),\r\n      product.supplier || 'N/A',\r\n      product.description ? product.description.replace(/,/g, ';').replace(/\\n/g, ' ') : 'N/A',\r\n      new Date(product.createdAt).toLocaleDateString(),\r\n      new Date(product.updatedAt).toLocaleDateString()\r\n    ];\r\n  });\r\n  \r\n  // Combine header and rows\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...rows.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  // Create a direct download using data URL\r\n  const dataUrl = `data:text/csv;charset=utf-8,${encodeURIComponent(csvContent)}`;\r\n  const filename = `products_${new Date().toISOString().slice(0, 10)}.csv`;\r\n  \r\n  // Create and trigger download\r\n  const link = document.createElement('a');\r\n  link.href = dataUrl;\r\n  link.download = filename;\r\n  link.style.display = 'none';\r\n  \r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n};\r\n","\r\nimport { Product } from '@/types';\r\nimport jsPDF from 'jspdf';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { BusinessSettings } from '@/hooks/useBusinessSettings';\r\n\r\nexport const exportProductsToPDF = (products: Product[], businessSettings?: BusinessSettings): void => {\r\n  // Use provided business settings or fallback to defaults\r\n  const settings = businessSettings || {\r\n    businessName: 'Your Business',\r\n    businessAddress: 'Business Address',\r\n    businessPhone: '(123) 456-7890',\r\n    businessEmail: 'support@yourbusiness.com',\r\n    currency: 'USD'\r\n  };\r\n\r\n  // Create new PDF document in portrait orientation\r\n  const pdf = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margins = { top: 10, right: 10, bottom: 10, left: 10 };\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n\r\n  let currentY = margins.top;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setTextColor(150, 150, 150); // Light gray color\r\n    pdf.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  // Optimized table setup with better column widths for more content\r\n  const colWidths = [20, 55, 30, 25, 25, 25]; // Item #, Name, Category, Qty, Cost, Price\r\n  const rowHeight = 6;\r\n  const headerHeight = 8;\r\n\r\n  // Table headers\r\n  const headers = [\r\n    'Item #',\r\n    'Product Name',\r\n    'Category',\r\n    'Qty',\r\n    `Cost (${settings.currency})`,\r\n    `Price (${settings.currency})`\r\n  ];\r\n\r\n  // Function to draw table headers\r\n  const drawTableHeaders = () => {\r\n    // Draw header background\r\n    pdf.setFillColor(243, 244, 246);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, headerHeight, 'F');\r\n\r\n    // Draw header borders\r\n    pdf.setLineWidth(0.2);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, headerHeight);\r\n\r\n    // Header text\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'bold');\r\n    let currentX = margins.left;\r\n\r\n    headers.forEach((header, index) => {\r\n      const colWidth = colWidths[index];\r\n      const textWidth = pdf.getTextWidth(header);\r\n      const textX = currentX + (colWidth - textWidth) / 2;\r\n      pdf.text(header, textX, currentY + 5);\r\n\r\n      if (index < headers.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + headerHeight - 1);\r\n      }\r\n\r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += headerHeight;\r\n  };\r\n\r\n  // Helper function to check if we need a new page\r\n  const checkPageBreak = (neededHeight: number) => {\r\n    if (currentY + neededHeight > pageHeight - margins.bottom - 15) { // Reserve space for watermark\r\n      addWatermark(); // Add watermark to current page before creating new one\r\n      pdf.addPage();\r\n      currentY = margins.top;\r\n      drawTableHeaders();\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.setFontSize(7);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Business header - made smaller\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const businessName = settings.businessName || 'Your Business';\r\n  const businessNameWidth = pdf.getTextWidth(businessName);\r\n  pdf.text(businessName, (pageWidth - businessNameWidth) / 2, currentY);\r\n  currentY += 4;\r\n\r\n  // Business address - smaller\r\n  if (settings.businessAddress) {\r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const addressWidth = pdf.getTextWidth(settings.businessAddress);\r\n    pdf.text(settings.businessAddress, (pageWidth - addressWidth) / 2, currentY);\r\n    currentY += 3;\r\n  }\r\n\r\n  // Business contact info - smaller\r\n  if (settings.businessPhone || settings.businessEmail) {\r\n    pdf.setFontSize(8);\r\n    const contactInfo = [settings.businessPhone, settings.businessEmail].filter(Boolean).join(' | ');\r\n    const contactWidth = pdf.getTextWidth(contactInfo);\r\n    pdf.text(contactInfo, (pageWidth - contactWidth) / 2, currentY);\r\n    currentY += 3;\r\n  }\r\n\r\n  currentY += 3;\r\n\r\n  // Report title - smaller\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const title = `Products Inventory Report`;\r\n  const titleWidth = pdf.getTextWidth(title);\r\n  pdf.text(title, (pageWidth - titleWidth) / 2, currentY);\r\n  currentY += 4;\r\n\r\n  // Generation date - smaller\r\n  pdf.setFontSize(8);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const currentDate = new Date().toLocaleDateString();\r\n  const dateText = `Generated on ${currentDate}`;\r\n  const dateWidth = pdf.getTextWidth(dateText);\r\n  pdf.text(dateText, (pageWidth - dateWidth) / 2, currentY);\r\n  currentY += 6;\r\n\r\n  // Summary statistics - smaller and more compact\r\n  const totalProducts = products.length;\r\n  const lowStockProducts = products.filter(p => p.quantity > 0 && p.quantity <= p.minimumStock).length;\r\n  const outOfStockProducts = products.filter(p => p.quantity === 0).length;\r\n  const totalInventoryValue = products.reduce((sum, product) => sum + (product.costPrice * product.quantity), 0);\r\n\r\n  // Compact summary box\r\n  const summaryBoxHeight = 15;\r\n  pdf.setFillColor(248, 249, 250);\r\n  pdf.rect(margins.left, currentY - 2, contentWidth, summaryBoxHeight, 'F');\r\n  pdf.setLineWidth(0.2);\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.rect(margins.left, currentY - 2, contentWidth, summaryBoxHeight);\r\n\r\n  // Summary content - more compact\r\n  pdf.setFontSize(9);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Inventory Summary', margins.left + 5, currentY + 2);\r\n\r\n  pdf.setFontSize(7);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const summaryData = [\r\n    `Total: ${totalProducts}`,\r\n    `Low Stock: ${lowStockProducts}`,\r\n    `Out of Stock: ${outOfStockProducts}`,\r\n    `Total Value: ${settings.currency} ${formatNumber(totalInventoryValue)}`\r\n  ];\r\n\r\n  let summaryY = currentY + 6;\r\n  summaryData.forEach((item, index) => {\r\n    const xPos = margins.left + 5 + (index % 2) * (contentWidth / 2);\r\n    if (index === 2) summaryY += 3;\r\n    pdf.text(item, xPos, summaryY + Math.floor(index / 2) * 3);\r\n  });\r\n\r\n  currentY += summaryBoxHeight + 4;\r\n\r\n  // Draw initial table headers\r\n  checkPageBreak(headerHeight + 5);\r\n  drawTableHeaders();\r\n\r\n  // Table data with smaller font - use products as provided (already sorted)\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.setFontSize(7);\r\n\r\n  products.forEach((product, index) => {\r\n    checkPageBreak(rowHeight + 2);\r\n\r\n    const rowData = [\r\n      product.itemNumber || '',\r\n      product.name || '',\r\n      product.category || '',\r\n      product.quantity.toString(),\r\n      formatNumber(product.costPrice),\r\n      formatNumber(product.sellingPrice)\r\n    ];\r\n\r\n    // Draw row background (alternating)\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(249, 250, 251);\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    }\r\n\r\n    // Highlight low stock and out of stock items\r\n    if (product.quantity === 0) {\r\n      pdf.setFillColor(254, 226, 226); // red background\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    } else if (product.quantity <= product.minimumStock) {\r\n      pdf.setFillColor(254, 243, 199); // yellow background\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    }\r\n\r\n    // Draw row borders\r\n    pdf.setLineWidth(0.1);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight);\r\n\r\n    let currentX = margins.left;\r\n\r\n    rowData.forEach((data, colIndex) => {\r\n      const colWidth = colWidths[colIndex];\r\n      let text = data;\r\n\r\n      // Truncate text if too long - more aggressive truncation\r\n      if (colIndex === 1) { // Product name column\r\n        while (pdf.getTextWidth(text) > colWidth - 3 && text.length > 3) {\r\n          text = text.substring(0, text.length - 4) + '...';\r\n        }\r\n      } else if (colIndex === 2) { // Category column\r\n        while (pdf.getTextWidth(text) > colWidth - 3 && text.length > 3) {\r\n          text = text.substring(0, text.length - 4) + '...';\r\n        }\r\n      }\r\n\r\n      let textX = currentX + 1.5;\r\n\r\n      // Right align quantity and price columns\r\n      if (colIndex >= 3) {\r\n        const textWidth = pdf.getTextWidth(text);\r\n        textX = currentX + colWidth - textWidth - 1.5;\r\n      }\r\n\r\n      pdf.setTextColor(0, 0, 0);\r\n      pdf.text(text, textX, currentY + 3.5);\r\n\r\n      if (colIndex < rowData.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + rowHeight - 1);\r\n      }\r\n\r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Footer - smaller\r\n  currentY += 5;\r\n  checkPageBreak(10);\r\n\r\n  pdf.setFontSize(7);\r\n  pdf.setFont('helvetica', 'italic');\r\n  pdf.setTextColor(100, 100, 100);\r\n  const footerText = `This report contains ${products.length} products. Generated by ${settings.businessName || 'Inventory System'}`;\r\n  const footerWidth = pdf.getTextWidth(footerText);\r\n  pdf.text(footerText, (pageWidth - footerWidth) / 2, currentY);\r\n\r\n  // Add watermark to the final page\r\n  addWatermark();\r\n\r\n  // Save the PDF\r\n  const filename = `products-inventory-${new Date().toISOString().slice(0, 10)}.pdf`;\r\n  pdf.save(filename);\r\n};\r\n","\r\nimport React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Product } from '@/types';\r\nimport { BulkOperationProgress } from './BulkOperationProgress';\r\n\r\ninterface BulkDeleteDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  selectedProducts: Product[];\r\n  onConfirm: () => void;\r\n  isDeleting: boolean;\r\n  deletionProgress?: {\r\n    current: number;\r\n    total: number;\r\n  };\r\n}\r\n\r\nconst BulkDeleteDialog: React.FC<BulkDeleteDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  selectedProducts,\r\n  onConfirm,\r\n  isDeleting,\r\n  deletionProgress\r\n}) => {\r\n  const progressPercentage = deletionProgress\r\n    ? Math.round((deletionProgress.current / deletionProgress.total) * 100)\r\n    : 0;\r\n\r\n  // Prevent dialog from closing during deletion process\r\n  const handleOpenChange = (newOpen: boolean) => {\r\n    if (!isDeleting) {\r\n      onOpenChange(newOpen);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"pointer-events-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Delete Selected Products</DialogTitle>\r\n          <DialogDescription>\r\n            Are you sure you want to delete {selectedProducts.length} product{selectedProducts.length > 1 ? 's' : ''}?\r\n            This action cannot be undone.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"max-h-40 overflow-y-auto\">\r\n          <div className=\"space-y-1\">\r\n            {selectedProducts.map((product) => (\r\n              <div key={product.id} className=\"text-sm text-muted-foreground\">\r\n                • {product.name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        {isDeleting && deletionProgress && (\r\n          <BulkOperationProgress\r\n            title=\"Deleting Products...\"\r\n            currentCount={deletionProgress.current}\r\n            totalCount={deletionProgress.total}\r\n            status=\"processing\"\r\n          />\r\n        )}\r\n\r\n        <DialogFooter>\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => handleOpenChange(false)}\r\n            disabled={isDeleting}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            variant=\"destructive\"\r\n            onClick={onConfirm}\r\n            disabled={isDeleting}\r\n          >\r\n            {isDeleting ? `Deleting... (${progressPercentage}%)` : `Delete ${selectedProducts.length} Product${selectedProducts.length > 1 ? 's' : ''}`}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BulkDeleteDialog;\r\n","export interface CSVProductUpdateRow {\r\n  'Item Number': string;\r\n  'Name': string;\r\n  'Category': string;\r\n  'Quantity': string;\r\n  'Cost Price': string;\r\n  'Selling Price': string;\r\n  'Supplier': string;\r\n  'Description': string;\r\n  'Manufacturer Barcode'?: string;\r\n  'Barcode'?: string;\r\n}\r\n\r\nexport interface UpdateValidationError {\r\n  row: number;\r\n  field: string;\r\n  message: string;\r\n}\r\n\r\nexport interface ParsedCSVUpdateResult {\r\n  validRows: CSVProductUpdateRow[];\r\n  errors: UpdateValidationError[];\r\n  totalRows: number;\r\n}\r\n\r\n// Parse CSV line handling quoted fields\r\nconst parseCSVLine = (line: string): string[] => {\r\n  const result: string[] = [];\r\n  let current = '';\r\n  let inQuotes = false;\r\n  let i = 0;\r\n\r\n  while (i < line.length) {\r\n    const char = line[i];\r\n    const nextChar = line[i + 1];\r\n\r\n    if (char === '\"') {\r\n      if (inQuotes && nextChar === '\"') {\r\n        current += '\"';\r\n        i += 2;\r\n        continue;\r\n      } else {\r\n        inQuotes = !inQuotes;\r\n      }\r\n    } else if (char === ',' && !inQuotes) {\r\n      result.push(current.trim());\r\n      current = '';\r\n    } else {\r\n      current += char;\r\n    }\r\n\r\n    i++;\r\n  }\r\n\r\n  result.push(current.trim());\r\n  return result;\r\n};\r\n\r\nexport const parseCSVUpdate = (csvText: string): ParsedCSVUpdateResult => {\r\n  const lines = csvText.trim().split('\\n');\r\n  const headers = parseCSVLine(lines[0]).map(h => h.trim());\r\n\r\n  const validRows: CSVProductUpdateRow[] = [];\r\n  const errors: UpdateValidationError[] = [];\r\n\r\n  for (let i = 1; i < lines.length; i++) {\r\n    const values = parseCSVLine(lines[i]).map(v => v.trim());\r\n    const row: any = {};\r\n\r\n    // Map values to headers\r\n    headers.forEach((header, index) => {\r\n      row[header] = values[index] || '';\r\n    });\r\n\r\n    // Validate row\r\n    const rowErrors = validateCSVUpdateRow(row, i + 1);\r\n\r\n    if (rowErrors.length === 0) {\r\n      validRows.push(row as CSVProductUpdateRow);\r\n    } else {\r\n      errors.push(...rowErrors);\r\n    }\r\n  }\r\n\r\n  return {\r\n    validRows,\r\n    errors,\r\n    totalRows: lines.length - 1\r\n  };\r\n};\r\n\r\nconst validateCSVUpdateRow = (row: any, rowNumber: number): UpdateValidationError[] => {\r\n  const errors: UpdateValidationError[] = [];\r\n\r\n  // Item Number is required for updates\r\n  if (!row['Item Number']?.trim()) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Item Number',\r\n      message: 'Item Number is required for updates'\r\n    });\r\n  }\r\n\r\n  // Validate numeric fields if provided\r\n  if (row['Quantity'] && row['Quantity'].trim() !== '' && isNaN(Number(row['Quantity']))) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Quantity',\r\n      message: 'Quantity must be a number'\r\n    });\r\n  }\r\n\r\n  if (row['Cost Price'] && row['Cost Price'].trim() !== '' && isNaN(Number(row['Cost Price']))) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Cost Price',\r\n      message: 'Cost Price must be a number'\r\n    });\r\n  }\r\n\r\n  if (row['Selling Price'] && row['Selling Price'].trim() !== '' && isNaN(Number(row['Selling Price']))) {\r\n    errors.push({\r\n      row: rowNumber,\r\n      field: 'Selling Price',\r\n      message: 'Selling Price must be a number'\r\n    });\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const generateUpdateErrorLogCSV = (errors: UpdateValidationError[]) => {\r\n  const headers = ['Row', 'Field', 'Error Message'];\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...errors.map(error =>\r\n      [error.row, error.field, `\"${error.message}\"`].join(',')\r\n    )\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'product_update_errors.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const extractUpdateCategories = (validRows: CSVProductUpdateRow[]): string[] => {\r\n  const categories = validRows\r\n    .map(row => row['Category']?.trim())\r\n    .filter(category => category && category !== '');\r\n\r\n  return [...new Set(categories)];\r\n};","import { useState } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useProducts } from '@/hooks/useProducts';\r\nimport { useCategories } from '@/hooks/useCategories';\r\nimport { CSVProductUpdateRow } from '@/utils/csvUpdateParser';\r\nimport { Product } from '@/types';\r\n\r\nexport interface ProductUpdateData {\r\n  productId: string;\r\n  itemNumber: string;\r\n  updates: {\r\n    name?: string;\r\n    category?: string;\r\n    quantity?: number;\r\n    costPrice?: number;\r\n    sellingPrice?: number;\r\n    supplier?: string;\r\n    description?: string;\r\n    manufacturerBarcode?: string;\r\n    barcode?: string;\r\n  };\r\n  quantityChange?: {\r\n    oldQuantity: number;\r\n    newQuantity: number;\r\n  };\r\n}\r\n\r\nexport const useProductCSVUpdate = (userId: string | undefined) => {\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [updateProgress, setUpdateProgress] = useState<{ current: number; total: number } | null>(null);\r\n  const { toast } = useToast();\r\n  // Load all products by setting a very high page size\r\n  const { products, updateProduct } = useProducts(userId, 10000);\r\n  const { categories, createCategory } = useCategories(userId);\r\n\r\n  const validateUpdates = (\r\n    updateRows: CSVProductUpdateRow[]\r\n  ): { validUpdates: ProductUpdateData[]; errors: string[] } => {\r\n    const validUpdates: ProductUpdateData[] = [];\r\n    const errors: string[] = [];\r\n\r\n    updateRows.forEach((row, index) => {\r\n      const itemNumber = row['Item Number']?.trim();\r\n      // Handle leading zeros - Excel removes them but database has them\r\n      const paddedItemNumber = itemNumber?.padStart(4, '0');\r\n      const product = products.find(p =>\r\n        p.itemNumber === itemNumber || p.itemNumber === paddedItemNumber\r\n      );\r\n\r\n      if (!product) {\r\n        errors.push(`Row ${index + 1}: Product with Item Number \"${itemNumber}\" not found`);\r\n        return;\r\n      }\r\n\r\n      const updates: ProductUpdateData['updates'] = {};\r\n      let quantityChange: ProductUpdateData['quantityChange'] | undefined;\r\n\r\n      // Check each field for updates\r\n      if (row['Name']?.trim() && row['Name'].trim() !== product.name) {\r\n        updates.name = row['Name'].trim();\r\n      }\r\n\r\n      if (row['Category']?.trim() && row['Category'].trim() !== product.category) {\r\n        updates.category = row['Category'].trim();\r\n      }\r\n\r\n      if (row['Quantity']?.trim() !== '' && !isNaN(Number(row['Quantity']))) {\r\n        const newQuantity = Number(row['Quantity']);\r\n        if (newQuantity !== product.quantity) {\r\n          updates.quantity = newQuantity;\r\n          quantityChange = {\r\n            oldQuantity: product.quantity,\r\n            newQuantity: newQuantity\r\n          };\r\n        }\r\n      }\r\n\r\n      if (row['Cost Price']?.trim() !== '' && !isNaN(Number(row['Cost Price']))) {\r\n        const newCostPrice = Number(row['Cost Price']);\r\n        // Use precision-safe comparison for numbers\r\n        if (Math.abs(newCostPrice - product.costPrice) > 0.001) {\r\n          updates.costPrice = newCostPrice;\r\n        }\r\n      }\r\n\r\n      if (row['Selling Price']?.trim() !== '' && !isNaN(Number(row['Selling Price']))) {\r\n        const newSellingPrice = Number(row['Selling Price']);\r\n        // Use precision-safe comparison for numbers\r\n        if (Math.abs(newSellingPrice - product.sellingPrice) > 0.001) {\r\n          updates.sellingPrice = newSellingPrice;\r\n        }\r\n      }\r\n\r\n      if (row['Supplier']?.trim() && row['Supplier'].trim() !== (product.supplier || '')) {\r\n        updates.supplier = row['Supplier'].trim();\r\n      }\r\n\r\n      if (row['Description']?.trim() && row['Description'].trim() !== (product.description || '')) {\r\n        updates.description = row['Description'].trim();\r\n      }\r\n\r\n      if (row['Manufacturer Barcode']?.trim() !== undefined && row['Manufacturer Barcode'].trim() !== (product.manufacturerBarcode || '')) {\r\n        updates.manufacturerBarcode = row['Manufacturer Barcode'].trim();\r\n      }\r\n\r\n      if (row['Barcode']?.trim() !== undefined && row['Barcode'].trim() !== (product.barcode || '')) {\r\n        updates.barcode = row['Barcode'].trim();\r\n      }\r\n\r\n      // Only add if there are actual updates\r\n      if (Object.keys(updates).length > 0) {\r\n        validUpdates.push({\r\n          productId: product.id,\r\n          itemNumber: product.itemNumber,\r\n          updates,\r\n          quantityChange\r\n        });\r\n      }\r\n    });\r\n\r\n    return { validUpdates, errors };\r\n  };\r\n\r\n  const detectNewCategories = (updateRows: CSVProductUpdateRow[]): string[] => {\r\n    const existingCategories = categories.map(cat => cat.name);\r\n    const csvCategories = updateRows\r\n      .map(row => row['Category']?.trim())\r\n      .filter(category => category && category !== '');\r\n\r\n    return [...new Set(csvCategories)].filter(category => !existingCategories.includes(category));\r\n  };\r\n\r\n  const bulkUpdateProducts = async (\r\n    updateRows: CSVProductUpdateRow[],\r\n    onProgress?: (current: number, total: number) => void\r\n  ) => {\r\n    setIsUpdating(true);\r\n    setUpdateProgress({ current: 0, total: updateRows.length });\r\n\r\n    try {\r\n      // Validate updates\r\n      const { validUpdates, errors } = validateUpdates(updateRows);\r\n\r\n      if (errors.length > 0) {\r\n        throw new Error(`Validation errors: ${errors.join(', ')}`);\r\n      }\r\n\r\n      // Create new categories if needed\r\n      const newCategories = detectNewCategories(updateRows);\r\n      for (const categoryName of newCategories) {\r\n        await createCategory(categoryName);\r\n      }\r\n\r\n      // Update products\r\n      let successCount = 0;\r\n      let failureCount = 0;\r\n\r\n      for (let i = 0; i < validUpdates.length; i++) {\r\n        const updateData = validUpdates[i];\r\n\r\n        try {\r\n          console.log(`DEBUG: Calling updateProduct for ${updateData.itemNumber} with updates:`, updateData.updates);\r\n\r\n          // Update product - the updateProduct function will handle stock history for quantity changes\r\n          const success = await updateProduct(\r\n            updateData.productId,\r\n            updateData.updates,\r\n            undefined, // no image file\r\n            false, // not from sale\r\n            'CSV Edit' // custom change reason for stock history\r\n          );\r\n\r\n          console.log(`DEBUG: UpdateProduct result for ${updateData.itemNumber}: ${success}`);\r\n\r\n          if (success) {\r\n            successCount++;\r\n          } else {\r\n            failureCount++;\r\n          }\r\n        } catch (error) {\r\n          console.error(`Error updating product ${updateData.itemNumber}:`, error);\r\n          failureCount++;\r\n        }\r\n\r\n        const current = i + 1;\r\n        setUpdateProgress({ current, total: validUpdates.length });\r\n        onProgress?.(current, validUpdates.length);\r\n      }\r\n\r\n      if (successCount > 0) {\r\n        toast({\r\n          title: \"Products updated successfully\",\r\n          description: `${successCount} product${successCount > 1 ? 's' : ''} updated successfully`,\r\n        });\r\n      }\r\n\r\n      if (failureCount > 0) {\r\n        toast({\r\n          title: \"Some updates failed\",\r\n          description: `${failureCount} product${failureCount > 1 ? 's' : ''} could not be updated`,\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n\r\n      return { successCount, failureCount };\r\n\r\n    } catch (error) {\r\n      console.error('Bulk update failed:', error);\r\n      toast({\r\n        title: \"Update failed\",\r\n        description: error instanceof Error ? error.message : \"An error occurred during the update\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    } finally {\r\n      setIsUpdating(false);\r\n      setUpdateProgress(null);\r\n    }\r\n  };\r\n\r\n  return {\r\n    isUpdating,\r\n    updateProgress,\r\n    validateUpdates,\r\n    detectNewCategories,\r\n    bulkUpdateProducts\r\n  };\r\n};","import React, { useState, useRef } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Upload, FileText, AlertCircle, CheckCircle, Download, Edit, Info } from 'lucide-react';\r\nimport { parseCSVUpdate, generateUpdateErrorLogCSV, UpdateValidationError, CSVProductUpdateRow, extractUpdateCategories } from '@/utils/csvUpdateParser';\r\nimport { cn } from '@/lib/utils';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useProductCSVUpdate } from '@/hooks/useProductCSVUpdate';\r\nimport { BulkOperationProgress } from './BulkOperationProgress';\r\n\r\ninterface CSVUpdateDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  userId: string | undefined;\r\n}\r\n\r\ninterface UpdateState {\r\n  step: 'select' | 'preview' | 'updating' | 'complete';\r\n  file: File | null;\r\n  validRows: CSVProductUpdateRow[];\r\n  errors: UpdateValidationError[];\r\n  totalRows: number;\r\n  updateProgress: number;\r\n  successCount: number;\r\n  failureCount: number;\r\n  newCategories: string[];\r\n  currentProductIndex: number;\r\n}\r\n\r\nconst CSVUpdateDialog: React.FC<CSVUpdateDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  userId\r\n}) => {\r\n  const { bulkUpdateProducts, detectNewCategories, isUpdating } = useProductCSVUpdate(userId);\r\n  const [state, setState] = useState<UpdateState>({\r\n    step: 'select',\r\n    file: null,\r\n    validRows: [],\r\n    errors: [],\r\n    totalRows: 0,\r\n    updateProgress: 0,\r\n    successCount: 0,\r\n    failureCount: 0,\r\n    newCategories: [],\r\n    currentProductIndex: 0\r\n  });\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  const handleFileSelect = async (file: File) => {\r\n    if (!file.name.endsWith('.csv')) {\r\n      alert('Please select a CSV file');\r\n      return;\r\n    }\r\n\r\n    const text = await file.text();\r\n    const result = parseCSVUpdate(text);\r\n\r\n    // Detect new categories\r\n    const newCategories = detectNewCategories(result.validRows);\r\n\r\n    setState({\r\n      ...state,\r\n      step: 'preview',\r\n      file,\r\n      validRows: result.validRows,\r\n      errors: result.errors,\r\n      totalRows: result.totalRows,\r\n      newCategories\r\n    });\r\n  };\r\n\r\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      handleFileSelect(file);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n\r\n    const file = e.dataTransfer.files[0];\r\n    if (file) {\r\n      handleFileSelect(file);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleConfirmUpdate = async () => {\r\n    setState(prev => ({ ...prev, step: 'updating', updateProgress: 0, currentProductIndex: 0 }));\r\n\r\n    try {\r\n      const result = await bulkUpdateProducts(state.validRows, (current, total) => {\r\n        const progress = Math.round((current / total) * 100);\r\n        setState(prev => ({\r\n          ...prev,\r\n          updateProgress: progress,\r\n          currentProductIndex: current\r\n        }));\r\n      });\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        step: 'complete',\r\n        updateProgress: 100,\r\n        successCount: result.successCount,\r\n        failureCount: result.failureCount,\r\n        currentProductIndex: state.validRows.length\r\n      }));\r\n    } catch (error) {\r\n      console.error('Update failed:', error);\r\n      setState(prev => ({\r\n        ...prev,\r\n        step: 'complete',\r\n        updateProgress: 100,\r\n        successCount: 0,\r\n        failureCount: state.validRows.length,\r\n        currentProductIndex: state.validRows.length\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (isUpdating) return;\r\n\r\n    const wasSuccessfulUpdate = state.step === 'complete' && state.successCount > 0;\r\n\r\n    setState({\r\n      step: 'select',\r\n      file: null,\r\n      validRows: [],\r\n      errors: [],\r\n      totalRows: 0,\r\n      updateProgress: 0,\r\n      successCount: 0,\r\n      failureCount: 0,\r\n      newCategories: [],\r\n      currentProductIndex: 0\r\n    });\r\n\r\n    onOpenChange(false);\r\n\r\n    if (wasSuccessfulUpdate) {\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const handleOpenChange = (newOpen: boolean) => {\r\n    if (!isUpdating) {\r\n      onOpenChange(newOpen);\r\n    }\r\n  };\r\n\r\n  const renderFileSelection = () => (\r\n    <div className=\"space-y-4\">\r\n      <div\r\n        className={cn(\r\n          \"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\",\r\n          isDragging ? \"border-blue-500 bg-blue-50\" : \"border-gray-300 hover:border-gray-400\"\r\n        )}\r\n        onDrop={handleDrop}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onClick={() => fileInputRef.current?.click()}\r\n      >\r\n        <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\r\n        <p className=\"text-lg font-medium text-gray-900 mb-2\">\r\n          Upload CSV File for Product Updates\r\n        </p>\r\n        <p className=\"text-sm text-gray-500\">\r\n          Drag and drop your CSV file here, or click to browse\r\n        </p>\r\n        <p className=\"text-xs text-gray-400 mt-2\">\r\n          Make sure the CSV includes Item Number column for product identification\r\n        </p>\r\n      </div>\r\n\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\".csv\"\r\n        onChange={handleFileInputChange}\r\n        className=\"hidden\"\r\n      />\r\n    </div>\r\n  );\r\n\r\n  const renderPreview = () => (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-3 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"text-2xl font-bold text-blue-600\">{state.validRows.length}</div>\r\n            <p className=\"text-xs text-muted-foreground\">Products to update</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"text-2xl font-bold text-red-600\">{state.errors.length}</div>\r\n            <p className=\"text-xs text-muted-foreground\">Errors found</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"text-2xl font-bold text-green-600\">{state.totalRows}</div>\r\n            <p className=\"text-xs text-muted-foreground\">Total rows</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {state.newCategories.length > 0 && (\r\n        <Alert>\r\n          <Edit className=\"h-4 w-4\" />\r\n          <AlertDescription>\r\n            <div className=\"space-y-2\">\r\n              <p>The following {state.newCategories.length} new categories will be created:</p>\r\n              <div className=\"flex flex-wrap gap-1\">\r\n                {state.newCategories.map((category, index) => (\r\n                  <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                    {category}\r\n                  </Badge>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {state.errors.length > 0 && (\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertDescription>\r\n            {state.errors.length} rows have errors and will be skipped.\r\n            <Button\r\n              variant=\"link\"\r\n              className=\"p-0 h-auto ml-2\"\r\n              onClick={() => generateUpdateErrorLogCSV(state.errors)}\r\n            >\r\n              <Download className=\"h-3 w-3 mr-1\" />\r\n              Download error log\r\n            </Button>\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      <Alert>\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertDescription>\r\n          <div className=\"space-y-1\">\r\n            <p><strong>Update Rules:</strong></p>\r\n            <ul className=\"text-sm space-y-1 ml-2\">\r\n              <li>• Only fields with changes will be updated</li>\r\n              <li>• Empty fields will be ignored (no changes)</li>\r\n              <li>• Quantity changes will be tracked in stock history</li>\r\n              <li>• Products are identified by Item Number</li>\r\n            </ul>\r\n          </div>\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <div className=\"flex justify-end space-x-2\">\r\n        <Button variant=\"outline\" onClick={() => setState(prev => ({ ...prev, step: 'select' }))}>\r\n          Back\r\n        </Button>\r\n        <Button\r\n          onClick={handleConfirmUpdate}\r\n          disabled={state.validRows.length === 0}\r\n        >\r\n          Update {state.validRows.length} Products\r\n          {state.newCategories.length > 0 && ` & Create ${state.newCategories.length} Categories`}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderUpdating = () => (\r\n    <BulkOperationProgress\r\n      title=\"Updating Products...\"\r\n      currentCount={state.currentProductIndex}\r\n      totalCount={state.validRows.length}\r\n      status=\"processing\"\r\n    />\r\n  );\r\n\r\n  const renderComplete = () => (\r\n    <div className=\"space-y-4\">\r\n      <BulkOperationProgress\r\n        title=\"Update Complete!\"\r\n        currentCount={state.currentProductIndex}\r\n        totalCount={state.validRows.length}\r\n        status={state.failureCount > 0 ? 'failed' : 'completed'}\r\n        successCount={state.successCount}\r\n        failureCount={state.failureCount}\r\n      />\r\n      <div className=\"flex justify-center\">\r\n        <Button onClick={handleClose}>Close</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[500px] pointer-events-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            Update Products via CSV\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Update existing products using a CSV file with Item Numbers for identification\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        {state.step === 'select' && renderFileSelection()}\r\n        {state.step === 'preview' && renderPreview()}\r\n        {state.step === 'updating' && renderUpdating()}\r\n        {state.step === 'complete' && renderComplete()}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CSVUpdateDialog;","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Settings2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgN2gtOSIgLz4KICA8cGF0aCBkPSJNMTQgMTdINSIgLz4KICA8Y2lyY2xlIGN4PSIxNyIgY3k9IjE3IiByPSIzIiAvPgogIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/settings-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings2 = createLucideIcon('Settings2', [\n  ['path', { d: 'M20 7h-9', key: '3s1dr2' }],\n  ['path', { d: 'M14 17H5', key: 'gfn3mx' }],\n  ['circle', { cx: '17', cy: '17', r: '3', key: '18b49y' }],\n  ['circle', { cx: '7', cy: '7', r: '3', key: 'dfmy0x' }],\n]);\n\nexport default Settings2;\n","\r\nimport React, { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Product } from '@/types';\r\nimport { BulkOperationProgress } from './BulkOperationProgress';\r\nimport { Printer, Settings2 } from 'lucide-react';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface BulkPrintDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    selectedProducts: Product[];\r\n    onConfirm: (showPrice: boolean) => void;\r\n    isPrinting: boolean;\r\n    printProgress?: {\r\n        current: number;\r\n        total: number;\r\n    };\r\n}\r\n\r\nconst BulkPrintDialog: React.FC<BulkPrintDialogProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    selectedProducts,\r\n    onConfirm,\r\n    isPrinting,\r\n    printProgress\r\n}) => {\r\n    const [showPrice, setShowPrice] = useState(true);\r\n\r\n    // Prevent dialog from closing during printing process\r\n    const handleOpenChange = (newOpen: boolean) => {\r\n        if (!isPrinting) {\r\n            onOpenChange(newOpen);\r\n        }\r\n    };\r\n\r\n    const productCount = selectedProducts.length;\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={handleOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"flex items-center gap-2\">\r\n                        <Printer className=\"h-5 w-5\" />\r\n                        Print Barcode Labels\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        You are about to print barcodes for {productCount} product{productCount > 1 ? 's' : ''}.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4 py-4\">\r\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg bg-muted/30\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Settings2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <div className=\"space-y-0.5\">\r\n                                <Label htmlFor=\"bulk-print-price\" className=\"text-sm font-medium cursor-pointer\">\r\n                                    Show Price on Label\r\n                                </Label>\r\n                                <p className=\"text-xs text-muted-foreground\">Include selling price on each label</p>\r\n                            </div>\r\n                        </div>\r\n                        <Switch\r\n                            id=\"bulk-print-price\"\r\n                            checked={showPrice}\r\n                            onCheckedChange={setShowPrice}\r\n                            disabled={isPrinting}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"max-h-40 overflow-y-auto border rounded-md p-2 bg-muted/10\">\r\n                        <div className=\"space-y-1\">\r\n                            {selectedProducts.map((product) => (\r\n                                <div key={product.id} className=\"text-xs text-muted-foreground truncate px-2 py-1\">\r\n                                    • {product.name} ({product.itemNumber})\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Progress Bar */}\r\n                {isPrinting && printProgress && (\r\n                    <BulkOperationProgress\r\n                        title=\"Printing Labels...\"\r\n                        currentCount={printProgress.current}\r\n                        totalCount={printProgress.total}\r\n                        status=\"processing\"\r\n                    />\r\n                )}\r\n\r\n                <DialogFooter>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => handleOpenChange(false)}\r\n                        disabled={isPrinting}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => onConfirm(showPrice)}\r\n                        disabled={isPrinting || productCount === 0}\r\n                        className=\"gap-2\"\r\n                    >\r\n                        {isPrinting ? (\r\n                            `Printing... ${Math.round((printProgress?.current || 0) / (printProgress?.total || 1) * 100)}%`\r\n                        ) : (\r\n                            <>\r\n                                <Printer className=\"h-4 w-4\" />\r\n                                Print {productCount} Label{productCount > 1 ? 's' : ''}\r\n                            </>\r\n                        )}\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default BulkPrintDialog;\r\n","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { Download } from 'lucide-react';\r\n\r\nexport interface BarcodeExportConfig {\r\n    showPrice: boolean;\r\n}\r\n\r\ninterface BarcodeExportDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    productCount: number;\r\n    onConfirm: (config: BarcodeExportConfig) => void;\r\n    isExporting: boolean;\r\n}\r\n\r\nconst BarcodeExportDialog: React.FC<BarcodeExportDialogProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    productCount,\r\n    onConfirm,\r\n    isExporting,\r\n}) => {\r\n    const [showPrice, setShowPrice] = useState(true);\r\n\r\n    const handleConfirm = () => {\r\n        onConfirm({\r\n            showPrice,\r\n        });\r\n    };\r\n\r\n    // Standardized calculation for A4 (210x297mm) with 10mm margins\r\n    // 50x30mm labels with 2mm spacing\r\n    const calculateLayout = () => {\r\n        const labelWidth = 45;\r\n        const labelHeight = 30;\r\n        const spacing = 2;\r\n        const pageWidth = 210;\r\n        const pageHeight = 297;\r\n        const margin = 10;\r\n\r\n        const cols = Math.floor((pageWidth - (2 * margin) + spacing) / (labelWidth + spacing));\r\n        const rows = Math.floor((pageHeight - (2 * margin) + spacing) / (labelHeight + spacing));\r\n\r\n        return { cols, rows, itemsPerPage: cols * rows };\r\n    };\r\n\r\n    const calculatePages = () => {\r\n        const { itemsPerPage } = calculateLayout();\r\n        return Math.ceil(productCount / itemsPerPage);\r\n    };\r\n\r\n    const { cols, rows, itemsPerPage } = calculateLayout();\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Export Barcodes to PDF</DialogTitle>\r\n                    <DialogDescription>\r\n                        Barcodes are automatically arranged on A4 paper (45mm × 30mm labels).\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-6 py-4\">\r\n                    {/* Product Count Info */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n                        <p className=\"text-sm text-blue-900\">\r\n                            <strong>{productCount}</strong> product{productCount !== 1 ? 's' : ''} with barcodes will be exported\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Layout Info */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-base font-semibold\">Automatic Layout</Label>\r\n                        <div className=\"text-sm text-muted-foreground space-y-1\">\r\n                            <p>• {cols} columns × {rows} rows</p>\r\n                            <p>• {itemsPerPage} barcodes per page</p>\r\n                            <p>• Fixed size: 45mm × 30mm</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Show Price Toggle */}\r\n                    <div className=\"flex items-center justify-between py-2 border-t\">\r\n                        <div className=\"space-y-0.5\">\r\n                            <Label className=\"text-sm font-medium\">Include Price</Label>\r\n                            <p className=\"text-xs text-muted-foreground\">Show product price on each barcode</p>\r\n                        </div>\r\n                        <Switch\r\n                            checked={showPrice}\r\n                            onCheckedChange={setShowPrice}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Estimated Pages */}\r\n                    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-3\">\r\n                        <p className=\"text-sm text-gray-700\">\r\n                            <strong>Estimated pages:</strong> {calculatePages()}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex flex-col gap-2\">\r\n                    <Button\r\n                        onClick={handleConfirm}\r\n                        disabled={isExporting}\r\n                        className=\"w-full gap-2\"\r\n                    >\r\n                        <Download className=\"h-4 w-4\" />\r\n                        {isExporting ? 'Exporting...' : 'Export PDF'}\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onOpenChange(false)}\r\n                        disabled={isExporting}\r\n                        className=\"w-full\"\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default BarcodeExportDialog;\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Plus, RefreshCw, Download, Upload, Trash2, ArrowLeft, Printer } from 'lucide-react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport InventoryTable from '@/components/inventory/InventoryTable';\r\nimport InventoryFilters from '@/components/inventory/InventoryFilters';\r\nimport InventoryStats from '@/components/inventory/InventoryStats';\r\nimport { useProducts } from '@/hooks/useProducts';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { exportProductsForUpdate } from '@/utils/exportProductsForUpdate';\r\nimport { exportProductsToCSV } from '@/utils/exportProductsToCSV';\r\nimport { exportProductsToPDF } from '@/utils/exportProductsToPDF';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport BulkDeleteDialog from '@/components/inventory/BulkDeleteDialog';\r\nimport CSVUploadDialog from '@/components/inventory/CSVUploadDialog';\r\nimport CSVUpdateDialog from '@/components/inventory/CSVUpdateDialog';\r\nimport BulkPrintDialog from '@/components/inventory/BulkPrintDialog';\r\nimport BarcodeExportDialog, { BarcodeExportConfig } from '@/components/inventory/BarcodeExportDialog';\r\nimport { useBulkProducts } from '@/hooks/useBulkProducts';\r\nimport { generateProductCSVTemplate } from '@/utils/csvTemplate';\r\nimport { useCategories } from '@/hooks/useCategories';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { SortField } from '@/components/inventory/InventoryTable';\r\nimport { Product } from '@/types';\r\nimport { getProductStatsAction, getAllProductsAction } from '@/app/actions/products';\r\nimport { exportBulkBarcodesToPDF } from '@/utils/exportBarcodeToPDF';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuSeparator,\r\n} from '@/components/ui/dropdown-menu';\r\nimport { ChevronDown } from 'lucide-react';\r\n\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\n\r\ntype SortOrder = 'asc' | 'desc';\r\n\r\nconst Products = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { hasPermission } = useProfiles();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  const canCreate = hasPermission('inventory', 'create');\r\n  const canEdit = hasPermission('inventory', 'edit');\r\n  const canDelete = hasPermission('inventory', 'delete');\r\n  const canView = hasPermission('inventory', 'view');\r\n\r\n  const {\r\n    products,\r\n    filteredProducts,\r\n    isLoading,\r\n    loadProducts,\r\n    filters,\r\n    setFilters,\r\n    deleteProduct,\r\n    updateProduct,\r\n    page,\r\n    setPage,\r\n    pageSize,\r\n    setPageSize,\r\n    totalCount,\r\n    refetch,\r\n    isFetching\r\n  } = useProducts(user?.id, 50);\r\n\r\n  const { categories } = useCategories(user?.id);\r\n  const { bulkCreateProducts } = useBulkProducts();\r\n  const { settings } = useBusinessSettings();\r\n\r\n\r\n  // Bulk actions state\r\n  const [selectedProductIds, setSelectedProductIds] = useState<Set<string>>(new Set());\r\n  const [bulkDeleteOpen, setBulkDeleteOpen] = useState(false);\r\n  const [bulkPrintOpen, setBulkPrintOpen] = useState(false);\r\n  const [productsToPrint, setProductsToPrint] = useState<Product[]>([]);\r\n  const [csvUploadOpen, setCsvUploadOpen] = useState(false);\r\n  const [csvUpdateOpen, setCsvUpdateOpen] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [isPrinting, setIsPrinting] = useState(false);\r\n  const [isExportingBarcodes, setIsExportingBarcodes] = useState(false);\r\n  const [barcodeExportOpen, setBarcodeExportOpen] = useState(false);\r\n  const [productsToExport, setProductsToExport] = useState<Product[]>([]);\r\n  const [deletionProgress, setDeletionProgress] = useState<{ current: number; total: number } | undefined>(undefined);\r\n  const [printProgress, setPrintProgress] = useState<{ current: number; total: number } | undefined>(undefined);\r\n\r\n  // Add sorting state\r\n  const [sortField, setSortField] = useState<SortField>('name');\r\n  const [sortOrder, setSortOrder] = useState<SortOrder>('asc');\r\n\r\n  // Global totals (all products, not just current page)\r\n  const [totalCostValueAll, setTotalCostValueAll] = useState<number | undefined>(undefined);\r\n  const [lowStockAll, setLowStockAll] = useState<number | undefined>(undefined);\r\n  const [outOfStockAll, setOutOfStockAll] = useState<number | undefined>(undefined);\r\n  const [totalStockValueAll, setTotalStockValueAll] = useState<number | undefined>(undefined);\r\n\r\n  // Lightweight aggregate: fetch only needed columns and cache for 5 minutes to avoid slowing the UI\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const loadTotals = async () => {\r\n      if (!user?.id || !currentBusiness?.id) return;\r\n\r\n      const cacheKey = `allProductsStats_${currentBusiness.id}`;\r\n      const cachedRaw = localStorage.getItem(cacheKey);\r\n      try {\r\n        if (cachedRaw) {\r\n          const cached = JSON.parse(cachedRaw) as { costValue: number; lowStock: number; outOfStock: number; stockValue: number; ts: number };\r\n          if (Date.now() - cached.ts < 5 * 60 * 1000) {\r\n            setTotalCostValueAll(cached.costValue);\r\n            setLowStockAll(cached.lowStock);\r\n            setOutOfStockAll(cached.outOfStock);\r\n            setTotalStockValueAll(cached.stockValue);\r\n            return;\r\n          }\r\n        }\r\n      } catch { }\r\n\r\n      const stats = await getProductStatsAction(currentBusiness.id);\r\n\r\n      if (!cancelled) {\r\n        setTotalCostValueAll(stats.costValue);\r\n        setLowStockAll(stats.lowStock);\r\n        setOutOfStockAll(stats.outOfStock);\r\n        setTotalStockValueAll(stats.stockValue);\r\n\r\n        try {\r\n          localStorage.setItem(cacheKey, JSON.stringify({\r\n            ...stats,\r\n            ts: Date.now()\r\n          }));\r\n        } catch { }\r\n      }\r\n    };\r\n    // Run in the background; UI uses page values until ready\r\n    loadTotals();\r\n    return () => { cancelled = true; };\r\n  }, [user?.id, currentBusiness?.id]);\r\n\r\n  // Memoize sorted and filtered products\r\n  const sortedProducts = useMemo(() => {\r\n    return [...filteredProducts].sort((a, b) => {\r\n      let comparison = 0;\r\n\r\n      switch (sortField) {\r\n        case 'name':\r\n          comparison = a.name.localeCompare(b.name);\r\n          break;\r\n        case 'category':\r\n          comparison = a.category.localeCompare(b.category);\r\n          break;\r\n        case 'quantity':\r\n          comparison = a.quantity - b.quantity;\r\n          break;\r\n        case 'sellingPrice':\r\n          comparison = a.sellingPrice - b.sellingPrice;\r\n          break;\r\n        case 'costPrice':\r\n          comparison = a.costPrice - b.costPrice;\r\n          break;\r\n        case 'itemNumber':\r\n          comparison = a.itemNumber.localeCompare(b.itemNumber);\r\n          break;\r\n      }\r\n\r\n      return sortOrder === 'asc' ? comparison : -comparison;\r\n    });\r\n  }, [filteredProducts, sortField, sortOrder]);\r\n\r\n  const handleRefresh = async () => {\r\n    await refetch();\r\n    setSelectedProductIds(new Set());\r\n    toast({\r\n      title: \"Products refreshed\",\r\n      description: \"Your product list has been updated.\",\r\n    });\r\n  };\r\n\r\n  // Fetch all products for export (bypassing pagination)\r\n  const fetchAllProductsForExport = async (): Promise<Product[]> => {\r\n    if (!user?.id || !currentBusiness?.id) return [];\r\n\r\n    try {\r\n      let formattedProducts = await getAllProductsAction(user.id, currentBusiness.id);\r\n\r\n      // Apply the same filters as the current view\r\n      if (filters.search) {\r\n        const searchTerm = filters.search.toLowerCase();\r\n        formattedProducts = formattedProducts.filter(p =>\r\n          p.name.toLowerCase().includes(searchTerm) ||\r\n          p.description.toLowerCase().includes(searchTerm) ||\r\n          p.category.toLowerCase().includes(searchTerm) ||\r\n          (p.supplier && p.supplier.toLowerCase().includes(searchTerm)) ||\r\n          p.itemNumber.toLowerCase().includes(searchTerm)\r\n        );\r\n      }\r\n\r\n      if (filters.category) {\r\n        formattedProducts = formattedProducts.filter(p => p.category === filters.category);\r\n      }\r\n\r\n      if (filters.stockStatus === 'outOfStock') {\r\n        formattedProducts = formattedProducts.filter(p => p.quantity === 0);\r\n      } else if (filters.stockStatus === 'inStock') {\r\n        formattedProducts = formattedProducts.filter(p => p.quantity > 0);\r\n      } else if (filters.stockStatus === 'lowStock') {\r\n        formattedProducts = formattedProducts.filter(p => p.quantity > 0 && p.quantity <= p.minimumStock);\r\n      }\r\n\r\n      // Apply the same sorting as the UI\r\n      return formattedProducts.sort((a, b) => {\r\n        let comparison = 0;\r\n\r\n        switch (sortField) {\r\n          case 'name':\r\n            comparison = a.name.localeCompare(b.name);\r\n            break;\r\n          case 'category':\r\n            comparison = a.category.localeCompare(b.category);\r\n            break;\r\n          case 'quantity':\r\n            comparison = a.quantity - b.quantity;\r\n            break;\r\n          case 'sellingPrice':\r\n            comparison = a.sellingPrice - b.sellingPrice;\r\n            break;\r\n          case 'costPrice':\r\n            comparison = a.costPrice - b.costPrice;\r\n            break;\r\n          case 'itemNumber':\r\n            comparison = a.itemNumber.localeCompare(b.itemNumber);\r\n            break;\r\n        }\r\n\r\n        return sortOrder === 'asc' ? comparison : -comparison;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching all products for export:', error);\r\n      toast({\r\n        title: \"Export failed\",\r\n        description: \"Failed to fetch products for export. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleExportCSV = async () => {\r\n    toast({\r\n      title: \"Preparing export...\",\r\n      description: \"Fetching all products. Please wait.\",\r\n    });\r\n\r\n    const allProducts = await fetchAllProductsForExport();\r\n\r\n    if (allProducts.length > 0) {\r\n      exportProductsToCSV(allProducts);\r\n      toast({\r\n        title: \"Export successful\",\r\n        description: `${allProducts.length} products exported to CSV file.`,\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"No products to export\",\r\n        description: \"There are no products matching your current filters.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleExportForUpdate = async () => {\r\n    toast({\r\n      title: \"Preparing export...\",\r\n      description: \"Fetching all products. Please wait.\",\r\n    });\r\n\r\n    const allProducts = await fetchAllProductsForExport();\r\n\r\n    if (allProducts.length > 0) {\r\n      exportProductsForUpdate(allProducts);\r\n      toast({\r\n        title: \"Export successful\",\r\n        description: `${allProducts.length} products exported for editing. Use this file with 'Update via CSV'.`,\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"No products to export\",\r\n        description: \"There are no products matching your current filters.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    toast({\r\n      title: \"Preparing export...\",\r\n      description: \"Fetching all products. Please wait.\",\r\n    });\r\n\r\n    const allProducts = await fetchAllProductsForExport();\r\n\r\n    if (allProducts.length > 0) {\r\n      exportProductsToPDF(allProducts, settings);\r\n      toast({\r\n        title: \"Export successful\",\r\n        description: `${allProducts.length} products exported to PDF file.`,\r\n      });\r\n    } else {\r\n      toast({\r\n        title: \"No products to export\",\r\n        description: \"There are no products matching your current filters.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDownloadTemplate = () => {\r\n    generateProductCSVTemplate();\r\n    toast({\r\n      title: \"Template downloaded\",\r\n      description: \"CSV template has been downloaded to your device.\",\r\n    });\r\n  };\r\n\r\n  const handleCSVUpload = async (products: any[]) => {\r\n    try {\r\n      await bulkCreateProducts(products);\r\n      setCsvUploadOpen(false);\r\n      await loadProducts();\r\n    } catch (error) {\r\n      console.error('CSV upload failed:', error);\r\n      toast({\r\n        title: \"Upload failed\",\r\n        description: \"There was an error uploading your products. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleToggleProductSelection = (productId: string) => {\r\n    const newSelectedIds = new Set(selectedProductIds);\r\n    if (newSelectedIds.has(productId)) {\r\n      newSelectedIds.delete(productId);\r\n    } else {\r\n      newSelectedIds.add(productId);\r\n    }\r\n    setSelectedProductIds(newSelectedIds);\r\n  };\r\n\r\n  const handleToggleAllProducts = (productIds: string[]) => {\r\n    if (selectedProductIds.size === productIds.length) {\r\n      setSelectedProductIds(new Set());\r\n    } else {\r\n      setSelectedProductIds(new Set(productIds));\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedProductIds.size === 0) return;\r\n\r\n    setIsDeleting(true);\r\n    setDeletionProgress({ current: 0, total: selectedProductIds.size });\r\n\r\n    let successCount = 0;\r\n    let failureCount = 0;\r\n    let currentCount = 0;\r\n\r\n    try {\r\n      for (const productId of selectedProductIds) {\r\n        try {\r\n          const success = await deleteProduct(productId);\r\n          if (success) {\r\n            successCount++;\r\n          } else {\r\n            failureCount++;\r\n          }\r\n        } catch (error) {\r\n          failureCount++;\r\n          console.error(`Error deleting product ${productId}:`, error);\r\n        }\r\n\r\n        currentCount++;\r\n        setDeletionProgress({ current: currentCount, total: selectedProductIds.size });\r\n      }\r\n\r\n      setSelectedProductIds(new Set());\r\n\r\n      if (successCount > 0) {\r\n        toast({\r\n          title: \"Products deleted\",\r\n          description: `Successfully deleted ${successCount} product${successCount > 1 ? 's' : ''}`,\r\n        });\r\n      }\r\n\r\n      if (failureCount > 0) {\r\n        toast({\r\n          title: \"Some deletions failed\",\r\n          description: `${failureCount} product${failureCount > 1 ? 's' : ''} could not be deleted`,\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n\r\n      setBulkDeleteOpen(false);\r\n      // Only refresh once at the end, after dialog is closed\r\n      await loadProducts();\r\n\r\n    } finally {\r\n      setIsDeleting(false);\r\n      setDeletionProgress(undefined);\r\n    }\r\n  };\r\n\r\n  const handleOpenBulkPrint = async (all: boolean = false) => {\r\n    if (all) {\r\n      toast({\r\n        title: \"Preparing for bulk print...\",\r\n        description: \"Fetching all products matching current filters.\",\r\n      });\r\n      const allFiltered = await fetchAllProductsForExport();\r\n      if (allFiltered.length === 0) {\r\n        toast({\r\n          title: \"No products found\",\r\n          description: \"There are no products matching your current filters to print.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n      setProductsToPrint(allFiltered);\r\n    } else {\r\n      if (selectedProductIds.size === 0) {\r\n        toast({\r\n          title: \"No products selected\",\r\n          description: \"Please select products to print or use 'Print All'.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n      setProductsToPrint(selectedProducts);\r\n    }\r\n    setBulkPrintOpen(true);\r\n  };\r\n\r\n  const handleConfirmBulkPrint = async (showPrice: boolean) => {\r\n    if (productsToPrint.length === 0) return;\r\n\r\n    setIsPrinting(true);\r\n    setPrintProgress({ current: 0, total: productsToPrint.length });\r\n\r\n    let successCount = 0;\r\n    let failureCount = 0;\r\n\r\n    try {\r\n      for (const p of productsToPrint) {\r\n        if (!p.barcode) {\r\n          failureCount++;\r\n          setPrintProgress(prev => prev ? { ...prev, current: prev.current + 1 } : undefined);\r\n          continue;\r\n        }\r\n\r\n        try {\r\n          const priceText = showPrice\r\n            ? `TEXT 15,180,\"3\",0,1,1,\"${settings.currency} ${formatNumber(p.sellingPrice)}\"\\n`\r\n            : '';\r\n\r\n          const response = await fetch('http://localhost:5000/print/label', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            mode: 'cors',\r\n            body: JSON.stringify({\r\n              PrinterName: settings.defaultPrinterName || 'Label Printer',\r\n              Content: `SIZE 50 mm, 30 mm\\nGAP 3 mm, 0 mm\\nCLS\\nTEXT 15,20,\"3\",0,1,1,\"${p.name}\"\\nBARCODE 15,70,\"128\",60,1,0,2,2,\"${p.barcode}\"\\n${priceText}PRINT 1\\n`\r\n            })\r\n          });\r\n\r\n          if (response.ok) {\r\n            successCount++;\r\n          } else {\r\n            failureCount++;\r\n          }\r\n        } catch (err) {\r\n          console.error(`Failed to print label for ${p.name}:`, err);\r\n          failureCount++;\r\n        }\r\n\r\n        setPrintProgress(prev => prev ? { ...prev, current: prev.current + 1 } : undefined);\r\n\r\n        // Minor delay to prevent overwhelming the bridge/printer\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n\r\n      if (successCount > 0) {\r\n        toast({\r\n          title: \"Printing successful\",\r\n          description: `Sent ${successCount} labels to the printer.`,\r\n        });\r\n      }\r\n\r\n      if (failureCount > 0) {\r\n        toast({\r\n          title: \"Some labels failed\",\r\n          description: `${failureCount} labels could not be printed. Check your connection.`,\r\n          variant: \"destructive\"\r\n        });\r\n      }\r\n\r\n      setBulkPrintOpen(false);\r\n    } finally {\r\n      setIsPrinting(false);\r\n      setPrintProgress(undefined);\r\n    }\r\n  };\r\n\r\n  const handleBulkBarcodeExport = async (all: boolean = false) => {\r\n    setIsExportingBarcodes(true);\r\n    try {\r\n      let productsToExport: Product[] = [];\r\n\r\n      if (all) {\r\n        toast({\r\n          title: \"Preparing barcode export...\",\r\n          description: \"Fetching all products matching current filters.\",\r\n        });\r\n        productsToExport = await fetchAllProductsForExport();\r\n      } else {\r\n        if (selectedProductIds.size === 0) {\r\n          toast({\r\n            title: \"No products selected\",\r\n            description: \"Please select products to export barcodes.\",\r\n            variant: \"destructive\"\r\n          });\r\n          return;\r\n        }\r\n        productsToExport = selectedProducts;\r\n      }\r\n\r\n      const productsWithBarcodes = productsToExport.filter(p => p.barcode);\r\n\r\n      if (productsWithBarcodes.length === 0) {\r\n        toast({\r\n          title: \"No barcodes to export\",\r\n          description: \"None of the selected products have barcodes.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      toast({\r\n        title: \"Generating PDF...\",\r\n        description: `Exporting ${productsWithBarcodes.length} barcode${productsWithBarcodes.length > 1 ? 's' : ''}...`,\r\n      });\r\n\r\n      await exportBulkBarcodesToPDF(productsWithBarcodes, {\r\n        showPrice: true,\r\n        currency: settings.currency\r\n      });\r\n\r\n      toast({\r\n        title: \"Export successful\",\r\n        description: `${productsWithBarcodes.length} barcode${productsWithBarcodes.length > 1 ? 's' : ''} exported to PDF.`,\r\n      });\r\n\r\n      if (productsToExport.length > productsWithBarcodes.length) {\r\n        const skipped = productsToExport.length - productsWithBarcodes.length;\r\n        toast({\r\n          title: \"Some products skipped\",\r\n          description: `${skipped} product${skipped > 1 ? 's' : ''} without barcodes were not included.`,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Barcode export failed:', error);\r\n      toast({\r\n        title: \"Export failed\",\r\n        description: \"Failed to export barcodes. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsExportingBarcodes(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenBarcodeExport = async (all: boolean = false) => {\r\n    try {\r\n      let products: Product[] = [];\r\n\r\n      if (all) {\r\n        toast({\r\n          title: \"Preparing barcode export...\",\r\n          description: \"Fetching all products matching current filters.\",\r\n        });\r\n        products = await fetchAllProductsForExport();\r\n      } else {\r\n        if (selectedProductIds.size === 0) {\r\n          toast({\r\n            title: \"No products selected\",\r\n            description: \"Please select products to export barcodes.\",\r\n            variant: \"destructive\"\r\n          });\r\n          return;\r\n        }\r\n        products = selectedProducts;\r\n      }\r\n\r\n      const productsWithBarcodes = products.filter(p => p.barcode);\r\n\r\n      if (productsWithBarcodes.length === 0) {\r\n        toast({\r\n          title: \"No barcodes to export\",\r\n          description: \"None of the selected products have barcodes.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      setProductsToExport(productsWithBarcodes);\r\n      setBarcodeExportOpen(true);\r\n    } catch (error) {\r\n      console.error('Failed to prepare barcode export:', error);\r\n      toast({\r\n        title: \"Export preparation failed\",\r\n        description: \"Failed to prepare products for export.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleConfirmBarcodeExport = async (config: BarcodeExportConfig) => {\r\n    setIsExportingBarcodes(true);\r\n    try {\r\n      toast({\r\n        title: \"Generating PDF...\",\r\n        description: `Exporting ${productsToExport.length} barcode${productsToExport.length > 1 ? 's' : ''}...`,\r\n      });\r\n\r\n      await exportBulkBarcodesToPDF(productsToExport, {\r\n        showPrice: config.showPrice,\r\n        currency: settings.currency,\r\n      });\r\n\r\n      toast({\r\n        title: \"Export successful\",\r\n        description: `${productsToExport.length} barcode${productsToExport.length > 1 ? 's' : ''} exported to PDF.`,\r\n      });\r\n\r\n      setBarcodeExportOpen(false);\r\n    } catch (error) {\r\n      console.error('Barcode export failed:', error);\r\n      toast({\r\n        title: \"Export failed\",\r\n        description: \"Failed to export barcodes. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsExportingBarcodes(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProduct = async (id: string, updates: Partial<Product>) => {\r\n    try {\r\n      const success = await updateProduct(id, updates);\r\n      if (success) {\r\n        toast({\r\n          title: \"Product updated\",\r\n          description: \"Product details have been updated successfully.\",\r\n        });\r\n        return true;\r\n      } else {\r\n        toast({\r\n          title: \"Update failed\",\r\n          description: \"Failed to update product. Please try again.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating product:', error);\r\n      toast({\r\n        title: \"Update failed\",\r\n        description: \"An error occurred while updating the product.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const selectedProducts = useMemo(() => {\r\n    return sortedProducts.filter(product => selectedProductIds.has(product.id));\r\n  }, [sortedProducts, selectedProductIds]);\r\n\r\n  if (businessLoading || !currentBusiness || (isLoading && products.length === 0)) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] space-y-4\">\r\n        <LoadingSpinner />\r\n        <p className=\"text-muted-foreground\">Loading products...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-3 md:p-6 space-y-4 md:space-y-6\">\r\n      {/* Header Section - Improved Mobile Layout */}\r\n      <div className=\"space-y-3 md:space-y-4\">\r\n        <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={() => navigate('/inventory')}\r\n              className=\"shrink-0 h-8 w-8\"\r\n              title=\"Back to inventory\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div className=\"space-y-1\">\r\n              <h1 className=\"text-lg md:text-2xl lg:text-3xl font-bold text-sales-dark\">Products</h1>\r\n              <p className=\"text-xs md:text-base text-muted-foreground\">\r\n                Manage your product inventory and pricing\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mobile Action Buttons - Improved Layout */}\r\n          {isMobile ? (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex gap-2\">\r\n                {canCreate && (\r\n                  <Button onClick={() => navigate('/inventory/new')} className=\"flex-1 gap-2 h-9\">\r\n                    <Plus size={16} /> Add Product\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleRefresh}\r\n                  variant=\"outline\"\r\n                  size=\"icon\"\r\n                  disabled={isLoading || isFetching}\r\n                  className=\"shrink-0 h-9 w-9\"\r\n                >\r\n                  <RefreshCw className={`h-4 w-4 ${(isLoading || isFetching) ? 'animate-spin' : ''}`} />\r\n                </Button>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {canCreate && (\r\n                  <>\r\n                    <Button onClick={handleDownloadTemplate} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Download size={14} /> Template\r\n                    </Button>\r\n                    <Button onClick={() => setCsvUploadOpen(true)} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Upload size={14} /> Add CSV\r\n                    </Button>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {canEdit && (\r\n                  <>\r\n                    <Button onClick={handleExportForUpdate} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Download size={14} /> Export for Editing\r\n                    </Button>\r\n                    <Button onClick={() => setCsvUpdateOpen(true)} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Upload size={14} /> Update CSV\r\n                    </Button>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {canView && (\r\n                  <>\r\n                    <Button onClick={handleExportCSV} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Download size={14} /> Full Export\r\n                    </Button>\r\n                    <Button onClick={handleExportPDF} variant=\"outline\" className=\"gap-1 text-xs h-8\">\r\n                      <Download size={14} /> PDF\r\n                    </Button>\r\n                  </>\r\n                )}\r\n              </div>\r\n              {canDelete && selectedProductIds.size > 0 && (\r\n                <Button\r\n                  onClick={() => setBulkDeleteOpen(true)}\r\n                  variant=\"destructive\"\r\n                  className=\"w-full gap-2 text-xs h-8\"\r\n                  disabled={isDeleting}\r\n                >\r\n                  <Trash2 size={14} /> Delete Selected ({selectedProductIds.size})\r\n                </Button>\r\n              )}\r\n              {canEdit && (\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <Button\r\n                    onClick={() => handleOpenBulkPrint(false)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2 text-xs h-8\"\r\n                    disabled={selectedProductIds.size === 0 || isPrinting}\r\n                  >\r\n                    <Printer size={14} /> Print Selected\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => handleOpenBulkPrint(true)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2 text-xs h-8\"\r\n                    disabled={totalCount === 0 || isPrinting}\r\n                  >\r\n                    <Printer size={14} /> Print All ({totalCount})\r\n                  </Button>\r\n                </div>\r\n              )}\r\n              {canView && (\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <Button\r\n                    onClick={() => handleOpenBarcodeExport(false)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2 text-xs h-8\"\r\n                    disabled={selectedProductIds.size === 0 || isExportingBarcodes}\r\n                  >\r\n                    <Download size={14} /> Export Barcodes\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => handleOpenBarcodeExport(true)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2 text-xs h-8\"\r\n                    disabled={totalCount === 0 || isExportingBarcodes}\r\n                  >\r\n                    <Download size={14} /> All Barcodes\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            // Desktop Action Buttons\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <Button\r\n                onClick={handleRefresh}\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                disabled={isLoading || isFetching}\r\n                title=\"Refresh products\"\r\n              >\r\n                <RefreshCw className={`h-4 w-4 ${(isLoading || isFetching) ? 'animate-spin' : ''}`} />\r\n              </Button>\r\n\r\n              {canCreate && (\r\n                <>\r\n                  <Button onClick={handleDownloadTemplate} variant=\"outline\" className=\"gap-2\">\r\n                    <Download size={16} /> CSV Template\r\n                  </Button>\r\n                  <Button onClick={() => setCsvUploadOpen(true)} variant=\"outline\" className=\"gap-2\">\r\n                    <Upload size={16} /> Add via CSV\r\n                  </Button>\r\n                </>\r\n              )}\r\n\r\n              {canEdit && (\r\n                <>\r\n                  <Button onClick={handleExportForUpdate} variant=\"outline\" className=\"gap-2\">\r\n                    <Download size={16} /> Export for Editing\r\n                  </Button>\r\n                  <Button onClick={() => setCsvUpdateOpen(true)} variant=\"outline\" className=\"gap-2\">\r\n                    <Upload size={16} /> Update via CSV\r\n                  </Button>\r\n                </>\r\n              )}\r\n\r\n              {canView && (\r\n                <>\r\n                  <Button onClick={handleExportCSV} variant=\"outline\" className=\"gap-2\">\r\n                    <Download size={16} /> Full Export\r\n                  </Button>\r\n                  <Button onClick={handleExportPDF} variant=\"outline\" className=\"gap-2\">\r\n                    <Download size={16} /> Export PDF\r\n                  </Button>\r\n                </>\r\n              )}\r\n              {canDelete && selectedProductIds.size > 0 && (\r\n                <Button\r\n                  onClick={() => setBulkDeleteOpen(true)}\r\n                  variant=\"destructive\"\r\n                  className=\"gap-2\"\r\n                  disabled={isDeleting}\r\n                >\r\n                  <Trash2 size={16} /> Delete Selected ({selectedProductIds.size})\r\n                </Button>\r\n              )}\r\n              {canEdit && (\r\n                <>\r\n                  <Button\r\n                    onClick={() => handleOpenBulkPrint(false)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2\"\r\n                    disabled={selectedProductIds.size === 0 || isPrinting}\r\n                  >\r\n                    <Printer size={16} /> Print Selected\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => handleOpenBulkPrint(true)}\r\n                    variant=\"outline\"\r\n                    className=\"gap-2\"\r\n                    disabled={totalCount === 0 || isPrinting}\r\n                  >\r\n                    <Printer size={16} /> Print All ({totalCount})\r\n                  </Button>\r\n                </>\r\n              )}\r\n              {canView && (\r\n                <DropdownMenu>\r\n                  <DropdownMenuTrigger asChild>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      className=\"gap-2\"\r\n                      disabled={isExportingBarcodes}\r\n                    >\r\n                      <Download size={16} /> Export Barcodes <ChevronDown size={16} />\r\n                    </Button>\r\n                  </DropdownMenuTrigger>\r\n                  <DropdownMenuContent align=\"end\">\r\n                    <DropdownMenuItem\r\n                      onClick={() => handleOpenBarcodeExport(false)}\r\n                      disabled={selectedProductIds.size === 0}\r\n                    >\r\n                      <Download className=\"mr-2 h-4 w-4\" />\r\n                      Selected Products ({selectedProductIds.size})\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuSeparator />\r\n                    <DropdownMenuItem\r\n                      onClick={() => handleOpenBarcodeExport(true)}\r\n                      disabled={totalCount === 0}\r\n                    >\r\n                      <Download className=\"mr-2 h-4 w-4\" />\r\n                      All Products ({totalCount})\r\n                    </DropdownMenuItem>\r\n                  </DropdownMenuContent>\r\n                </DropdownMenu>\r\n              )}\r\n              {canCreate && (\r\n                <Button onClick={() => navigate('/inventory/new')} className=\"gap-2\">\r\n                  <Plus size={16} /> Add Product\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <InventoryStats\r\n        products={products}\r\n        hideStockValue={true}\r\n        totalCountOverride={totalCount}\r\n        totalCostValueOverride={totalCostValueAll}\r\n        lowStockOverride={lowStockAll}\r\n        outOfStockOverride={outOfStockAll}\r\n        totalStockValueOverride={totalStockValueAll}\r\n      />\r\n\r\n      {/* Filters Card - Better Mobile Layout */}\r\n      <Card className=\"shadow-sm\">\r\n        <CardHeader className=\"pb-2 md:pb-6\">\r\n          <CardTitle className=\"text-sm md:text-lg\">Filter Products</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-0\">\r\n          <InventoryFilters\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n            categories={categories}\r\n            productsCount={sortedProducts.length}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Products Table */}\r\n      <Card className=\"shadow-sm\">\r\n        <CardHeader className=\"pb-2 md:pb-6\">\r\n          <CardTitle className=\"text-sm md:text-lg flex items-center justify-between\">\r\n            <span>\r\n              Products ({totalCount})\r\n              {selectedProductIds.size > 0 && (\r\n                <span className=\"text-xs font-normal text-muted-foreground ml-2\">\r\n                  {selectedProductIds.size} selected\r\n                </span>\r\n              )}\r\n            </span>\r\n          </CardTitle>\r\n          <div className=\"text-xs text-muted-foreground mt-2 p-2 bg-blue-50 rounded border-l-4 border-blue-400\">\r\n            💡 <strong>Tip:</strong> Click on Category, Cost Price, or Selling Price to edit them directly in the table\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"p-0\">\r\n          <InventoryTable\r\n            products={sortedProducts}\r\n            isLoading={isLoading}\r\n            showAllFields={true}\r\n            enableBulkActions={true}\r\n            selectedProductIds={selectedProductIds}\r\n            onToggleProductSelection={handleToggleProductSelection}\r\n            onToggleAllProducts={handleToggleAllProducts}\r\n            sortField={sortField}\r\n            sortOrder={sortOrder}\r\n            onSort={(field) => {\r\n              if (sortField === field) {\r\n                setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n              } else {\r\n                setSortField(field);\r\n                setSortOrder('asc');\r\n              }\r\n            }}\r\n            onUpdateProduct={handleUpdateProduct}\r\n            categories={categories.map(cat => cat.name)}\r\n          />\r\n          {/* Pagination Controls */}\r\n          <div className=\"flex items-center justify-between p-3 md:p-4 border-t\">\r\n            <div className=\"text-xs md:text-sm text-muted-foreground\">\r\n              Showing {(page - 1) * pageSize + 1}–{Math.min(page * pageSize, totalCount)} of {totalCount}\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <select\r\n                className=\"border rounded px-2 py-1 text-xs md:text-sm\"\r\n                value={pageSize}\r\n                onChange={(e) => setPageSize(Number(e.target.value))}\r\n              >\r\n                {[20, 50, 100].map(size => (\r\n                  <option key={size} value={size}>{size} / page</option>\r\n                ))}\r\n              </select>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                disabled={page === 1 || isLoading}\r\n                onClick={() => setPage(Math.max(1, page - 1))}\r\n              >\r\n                Prev\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                disabled={page * pageSize >= totalCount || isLoading}\r\n                onClick={() => setPage(page + 1)}\r\n              >\r\n                Next\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Dialogs */}\r\n      <CSVUploadDialog\r\n        open={csvUploadOpen}\r\n        onOpenChange={setCsvUploadOpen}\r\n        onUpload={handleCSVUpload}\r\n        categories={categories.map(cat => cat.name)}\r\n      />\r\n\r\n      <CSVUpdateDialog\r\n        open={csvUpdateOpen}\r\n        onOpenChange={setCsvUpdateOpen}\r\n        userId={user?.id}\r\n      />\r\n\r\n      <BulkDeleteDialog\r\n        open={bulkDeleteOpen}\r\n        onOpenChange={setBulkDeleteOpen}\r\n        selectedProducts={selectedProducts}\r\n        onConfirm={handleBulkDelete}\r\n        isDeleting={isDeleting}\r\n        deletionProgress={deletionProgress}\r\n      />\r\n\r\n      <BulkPrintDialog\r\n        open={bulkPrintOpen}\r\n        onOpenChange={setBulkPrintOpen}\r\n        selectedProducts={productsToPrint}\r\n        onConfirm={handleConfirmBulkPrint}\r\n        isPrinting={isPrinting}\r\n        printProgress={printProgress}\r\n      />\r\n\r\n      <BarcodeExportDialog\r\n        open={barcodeExportOpen}\r\n        onOpenChange={setBarcodeExportOpen}\r\n        productCount={productsToExport.filter(p => p.barcode).length}\r\n        onConfirm={handleConfirmBarcodeExport}\r\n        isExporting={isExportingBarcodes}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[16,20]}