module.exports=[473814,a=>a.a(async(b,c)=>{try{var d=a.i(150848),e=a.i(348287),f=a.i(809694),g=a.i(340151),h=a.i(445475),i=b([d]);async function j(a,b){try{let c=await d.db.task.findMany({where:{createdById:a,branchId:b},orderBy:{dueDate:"asc"}});return{success:!0,data:c.map(a=>({...a,user_id:a.userId,location_id:a.locationId,due_date:a.dueDate.toISOString().split("T")[0],completed_at:a.completedAt?.toISOString()||null,created_at:a.createdAt.toISOString(),updated_at:a.updatedAt.toISOString(),reminder_enabled:a.reminderEnabled,reminder_time:a.reminderTime,is_recurring:a.isRecurring,recurrence_type:a.recurrenceType,recurrence_end_date:a.recurrenceEndDate?.toISOString().split("T")[0]||null,parent_task_id:a.parentTaskId,recurrence_count:a.recurrenceCount}))}}catch(a){return console.error("Error fetching tasks:",a),{success:!1,error:a.message}}}async function k(a){try{let b=await d.db.$transaction(async b=>{let c=await b.task.create({data:{createdById:a.userId,branchId:a.locationId,title:a.title,description:a.description||null,priority:a.priority,dueDate:a.dueDate,category:a.category||null,reminderEnabled:a.reminderEnabled||!1,reminderTime:a.reminderTime||null,isRecurring:a.isRecurring||!1,recurrenceType:a.recurrenceType||null,recurrenceEndDate:a.recurrenceEndDate||null}});if(c.isRecurring&&c.recurrenceType&&c.recurrenceEndDate){let a=[],d=c.dueDate,e=c.recurrenceEndDate,i=0;for(;i<365;){let b;switch(c.recurrenceType){case"daily":b=(0,f.addDays)(d,1);break;case"weekly":b=(0,g.addWeeks)(d,1);break;case"monthly":b=(0,h.addMonths)(d,1);break;default:b=d}if(b>e)break;a.push({createdById:c.createdById,branchId:c.branchId,title:c.title,description:c.description,priority:c.priority,dueDate:b,category:c.category,completed:!1,reminderEnabled:c.reminderEnabled,reminderTime:c.reminderTime,isRecurring:!1,parentTaskId:c.id,recurrenceCount:i+1}),d=b,i++}a.length>0&&await b.task.createMany({data:a})}return c});return(0,e.revalidatePath)("/tasks"),{success:!0,data:b}}catch(a){return console.error("Error creating task:",a),{success:!1,error:a.message}}}async function l(a,b,c){try{let i=await d.db.$transaction(async d=>{let e=await d.task.update({where:{id:a,createdById:b},data:{...c}});if(e.isRecurring&&(c.recurrenceType||c.recurrenceEndDate)&&(await d.task.deleteMany({where:{parentTaskId:a,completed:!1}}),e.recurrenceType&&e.recurrenceEndDate)){let a=[],b=e.dueDate,c=e.recurrenceEndDate,i=0;for(;i<365;){let d;switch(e.recurrenceType){case"daily":d=(0,f.addDays)(b,1);break;case"weekly":d=(0,g.addWeeks)(b,1);break;case"monthly":d=(0,h.addMonths)(b,1);break;default:d=b}if(d>c)break;a.push({createdById:e.createdById,branchId:e.branchId,title:e.title,description:e.description,priority:e.priority,dueDate:d,category:e.category,isRecurring:!1,parentTaskId:e.id,recurrenceCount:i+1}),b=d,i++}a.length>0&&await d.task.createMany({data:a})}return e});return(0,e.revalidatePath)("/tasks"),{success:!0,data:i}}catch(a){return console.error("Error updating task:",a),{success:!1,error:a.message}}}async function m(a,b){try{return await d.db.$transaction(async c=>{await c.task.deleteMany({where:{parentTaskId:a,completed:!1}}),await c.task.delete({where:{id:a,createdById:b}})}),(0,e.revalidatePath)("/tasks"),{success:!0}}catch(a){return console.error("Error deleting task:",a),{success:!1,error:a.message}}}async function n(a,b,c){try{return await d.db.task.updateMany({where:{id:{in:a},createdById:b},data:c}),(0,e.revalidatePath)("/tasks"),{success:!0}}catch(a){return console.error("Error bulk updating tasks:",a),{success:!1,error:a.message}}}async function o(a,b){try{let c=await d.db.taskCategory.findMany({where:{userId:a,branchId:b},orderBy:{name:"asc"}});return{success:!0,data:c.map(a=>({...a,user_id:a.userId,location_id:a.locationId,created_at:a.createdAt.toISOString(),updated_at:a.updatedAt.toISOString()}))}}catch(a){return console.error("Error fetching categories:",a),{success:!1,error:a.message}}}async function p(a,b,c){try{let e=await d.db.taskCategory.create({data:{userId:a,branchId:b,name:c}});return{success:!0,data:e}}catch(a){return console.error("Error creating category:",a),{success:!1,error:a.message}}}async function q(a,b,c){try{let e=await d.db.taskCategory.update({where:{id:a,userId:b},data:{name:c}});return{success:!0,data:e}}catch(a){return console.error("Error updating category:",a),{success:!1,error:a.message}}}async function r(a,b){try{return await d.db.taskCategory.delete({where:{id:a,userId:b}}),{success:!0}}catch(a){return console.error("Error deleting category:",a),{success:!1,error:a.message}}}async function s(a,b){try{let c=["General","Marketing","Operations","Finance","Follow-up"],e=await d.db.taskCategory.findMany({where:{userId:a,branchId:b,name:{in:c}},select:{name:!0}}),f=new Set(e.map(a=>a.name)),g=c.filter(a=>!f.has(a)).map(c=>({userId:a,branchId:b,name:c}));return g.length>0&&await d.db.taskCategory.createMany({data:g}),{success:!0}}catch(a){return console.error("Error creating default categories:",a),{success:!1,error:a.message}}}[d]=i.then?(await i)():i,a.s(["bulkUpdateTasksAction",()=>n,"createDefaultTaskCategoriesAction",()=>s,"createTaskAction",()=>k,"createTaskCategoryAction",()=>p,"deleteTaskAction",()=>m,"deleteTaskCategoryAction",()=>r,"getTaskCategoriesAction",()=>o,"getTasksAction",()=>j,"updateTaskAction",()=>l,"updateTaskCategoryAction",()=>q]),c()}catch(a){c(a)}},!1),178151,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(531811),f=a.i(964889),g=a.i(169320),h=a.i(500885),i=a.i(473814),j=b([e,f,g,h,i]);[e,f,g,h,i]=j.then?(await j)():j,a.s(["useTasks",0,()=>{let[a,b]=(0,d.useState)([]),{user:c}=(0,e.useAuth)(),{currentBusiness:j}=(0,f.useBusiness)(),k=(0,h.useQueryClient)(),l=(0,d.useCallback)(async()=>{if(!c?.id||!j?.id)return[];try{let a=await (0,i.getTasksAction)(c.id,j.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch tasks");return a.data}catch(a){return console.error("Error loading tasks:",a),g.toast.error("Failed to load tasks"),[]}},[c?.id,j?.id]),m=["tasks",c?.id,j?.id],{data:n,isLoading:o,isFetching:p}=(0,h.useQuery)({queryKey:m,queryFn:l,enabled:!!c?.id&&!!j?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});(0,d.useEffect)(()=>{n&&b(n)},[n]);let q=o&&!n,r=async a=>{if(!c?.id||!j?.id)return null;try{let d={userId:c.id,locationId:j.id,title:a.title,description:a.description,priority:a.priority,dueDate:new Date(a.due_date),category:a.category,reminderEnabled:a.reminder_enabled,reminderTime:a.reminder_time&&""!==a.reminder_time.trim()?a.reminder_time:null,isRecurring:a.is_recurring,recurrenceType:a.recurrence_type,recurrenceEndDate:a.recurrence_end_date?new Date(a.recurrence_end_date):null},e=await (0,i.createTaskAction)(d);if(!e.success||!e.data)throw Error(e.error);let f=e.data,h={...f,user_id:f.userId,location_id:f.locationId,due_date:f.dueDate.toISOString().split("T")[0],completed_at:f.completedAt?.toISOString()||null,created_at:f.createdAt.toISOString(),updated_at:f.updatedAt.toISOString(),reminder_enabled:f.reminderEnabled,reminder_time:f.reminderTime,is_recurring:f.isRecurring,recurrence_type:f.recurrenceType,recurrence_end_date:f.recurrenceEndDate?.toISOString().split("T")[0]||null,parent_task_id:f.parentTaskId,recurrence_count:f.recurrenceCount};return b(a=>[h,...a]),k.setQueryData(m,a=>a?[h,...a]:[h]),k.invalidateQueries({queryKey:m}),g.toast.success("Task created successfully"),h}catch(a){return console.error("Error creating task:",a),g.toast.error("Failed to create task"),null}},s=async(a,b)=>{if(!c?.id)return!1;try{let d={...b};b.due_date&&(d.dueDate=new Date(b.due_date)),b.completed_at&&(d.completedAt=new Date(b.completed_at)),b.recurrence_end_date&&(d.recurrenceEndDate=new Date(b.recurrence_end_date)),void 0!==b.is_recurring&&(d.isRecurring=b.is_recurring),b.recurrence_type&&(d.recurrenceType=b.recurrence_type),void 0!==b.reminder_time&&(d.reminderTime=b.reminder_time&&""!==b.reminder_time.trim()?b.reminder_time:null);let e=await (0,i.updateTaskAction)(a,c.id,d);if(!e.success||!e.data)throw Error(e.error);return k.invalidateQueries({queryKey:m}),!0}catch(a){return console.error("Error updating task:",a),g.toast.error("Failed to update task"),!1}},t=async b=>{let c=a.find(a=>a.id===b);if(!c)return!1;let d={completed:!c.completed,completed_at:c.completed?null:new Date().toISOString()},e=await s(b,d);return e&&(c.completed?g.toast.success("Task marked as pending"):g.toast.success("Well done! ðŸŽ‰ Task completed")),e},u=async a=>{if(!c?.id)return!1;try{let b=await (0,i.deleteTaskAction)(a,c.id);if(!b.success)throw Error(b.error);return k.invalidateQueries({queryKey:m}),g.toast.success("Task deleted successfully"),!0}catch(a){return console.error("Error deleting task:",a),g.toast.error("Failed to delete task"),!1}},v=async(a,b)=>{if(!c?.id||0===a.length)return!1;try{let d={...b};void 0!==b.completed&&(d.completed=b.completed),void 0!==b.completed_at&&(d.completedAt=b.completed_at?new Date(b.completed_at):null);let e=await (0,i.bulkUpdateTasksAction)(a,c.id,d);if(!e.success)throw Error(e.error);return k.invalidateQueries({queryKey:m}),g.toast.success(`Updated ${a.length} tasks`),!0}catch(a){return console.error("Error bulk updating tasks:",a),g.toast.error("Failed to update tasks"),!1}};return{tasks:a,isLoading:q,createTask:r,updateTask:s,deleteTask:u,toggleTaskCompletion:t,bulkUpdateTasks:v,refreshTasks:()=>{k.invalidateQueries({queryKey:m})}}}]),c()}catch(a){c(a)}},!1),509438,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(531811),f=a.i(964889),g=a.i(169320),h=a.i(473814),i=b([e,f,g,h]);[e,f,g,h]=i.then?(await i)():i,a.s(["useTaskCategories",0,()=>{let[a,b]=(0,d.useState)([]),[c,i]=(0,d.useState)(!0),{user:j}=(0,e.useAuth)(),{currentBusiness:k}=(0,f.useBusiness)(),l=async()=>{if(!j?.id||!k?.id){b([]),i(!1);return}try{let a=await (0,h.getTaskCategoriesAction)(j.id,k.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch categories");b(a.data)}catch(a){console.error("Error loading task categories:",a),g.toast.error("Failed to load task categories"),b([])}finally{i(!1)}},m=async a=>{if(!j?.id||!k?.id)return null;try{let c=await (0,h.createTaskCategoryAction)(j.id,k.id,a.trim());if(!c.success||!c.data)throw Error(c.error);let d=c.data,e={...d,user_id:d.userId,location_id:d.locationId,created_at:d.createdAt.toISOString(),updated_at:d.updatedAt.toISOString()};return b(a=>[...a,e]),g.toast.success("Category created successfully"),e}catch(a){return console.error("Error creating task category:",a),g.toast.error("Failed to create category"),null}},n=async(a,c)=>{if(!j?.id)return!1;try{let d=await (0,h.updateTaskCategoryAction)(a,j.id,c.trim());if(!d.success)throw Error(d.error);return b(b=>b.map(b=>b.id===a?{...b,name:c.trim()}:b)),g.toast.success("Category updated successfully"),!0}catch(a){return console.error("Error updating task category:",a),g.toast.error("Failed to update category"),!1}},o=async a=>{if(!j?.id)return!1;try{let c=await (0,h.deleteTaskCategoryAction)(a,j.id);if(!c.success)throw Error(c.error);return b(b=>b.filter(b=>b.id!==a)),g.toast.success("Category deleted successfully"),!0}catch(a){return console.error("Error deleting task category:",a),g.toast.error("Failed to delete category"),!1}},p=async()=>{if(j?.id&&k?.id)try{let a=await (0,h.createDefaultTaskCategoriesAction)(j.id,k.id);if(!a.success)throw Error(a.error);await l()}catch(a){console.error("Error creating default categories:",a)}};return(0,d.useEffect)(()=>{l()},[j?.id,k?.id]),{categories:a,isLoading:c,createCategory:m,updateCategory:n,deleteCategory:o,createDefaultCategories:p,refreshCategories:l}}]),c()}catch(a){c(a)}},!1),615100,a=>{"use strict";var b=a.i(490988),c=a.i(349780),d=a.i(837692);function e(a,e){return(0,d.isSameDay)((0,b.constructFrom)(e?.in||a,a),(0,c.constructNow)(e?.in||a))}a.s(["isToday",()=>e])},503772,a=>{"use strict";var b=a.i(127669),c=a.i(615100);a.s(["useTaskPageLogic",0,({tasks:a,createTask:d,updateTask:e,deleteTask:f,toggleTaskCompletion:g,bulkUpdateTasks:h})=>{let[i,j]=(0,b.useState)(!1),[k,l]=(0,b.useState)(null),[m,n]=(0,b.useState)(null),[o,p]=(0,b.useState)("list"),q=a.filter(a=>(0,c.isToday)(new Date(a.due_date))),r=q.filter(a=>!a.completed),s=(0,b.useCallback)(()=>{l(null),n(null),j(!0)},[]),t=(0,b.useCallback)(a=>{l(a),j(!0)},[]),u=(0,b.useCallback)(async a=>!!window.confirm("Are you sure you want to delete this task?")&&await f(a),[f]),v=(0,b.useCallback)(async a=>{try{k?await e(k.id,a):await d(a)}catch(a){console.error("Error in handleFormSubmit:",a)}},[k,e,d]);return{isTaskFormOpen:i,editingTask:k,selectedDate:m,activeTab:o,todayTasks:q,pendingTodayTasks:r,setActiveTab:p,handleCreateTask:s,handleEditTask:t,handleDeleteTask:u,handleFormSubmit:v,handleBulkComplete:(0,b.useCallback)(async a=>await h(a,{completed:!0,completed_at:new Date().toISOString()}),[h]),handleFormClose:(0,b.useCallback)(()=>{j(!1),l(null),n(null)},[]),toggleTaskCompletion:g}}])},466276,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(397625),f=a.i(688272),g=a.i(366736),h=a.i(393551),i=a.i(158799),j=a.i(396465),k=a.i(585459),l=a.i(792071),m=a.i(445475),n=a.i(799856),o=b([e,f,g,h,i,j,n]);[e,f,g,h,i,j,n]=o.then?(await o)():o,a.s(["default",0,({isRecurring:a,recurrenceType:b,recurrenceEndDate:c,dueDate:o,onRecurringChange:p,onRecurrenceTypeChange:q,onRecurrenceEndDateChange:r})=>{let s=(0,m.addMonths)(o,12);return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(g.Switch,{id:"recurring",checked:a,onCheckedChange:p}),(0,d.jsx)(e.Label,{htmlFor:"recurring",children:"Make this a recurring task"})]}),a&&(0,d.jsxs)("div",{className:"space-y-4 pl-6 border-l-2 border-gray-100",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(e.Label,{children:"Repeat frequency"}),(0,d.jsxs)(f.Select,{value:b,onValueChange:a=>q(a),children:[(0,d.jsx)(f.SelectTrigger,{children:(0,d.jsx)(f.SelectValue,{placeholder:"Select frequency"})}),(0,d.jsxs)(f.SelectContent,{children:[(0,d.jsx)(f.SelectItem,{value:"daily",children:"Daily"}),(0,d.jsx)(f.SelectItem,{value:"weekly",children:"Weekly"}),(0,d.jsx)(f.SelectItem,{value:"monthly",children:"Monthly"})]})]})]}),b&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(e.Label,{children:"End date (max 12 months)"}),(0,d.jsxs)(i.Popover,{children:[(0,d.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(j.Button,{variant:"outline",className:(0,n.cn)("w-full justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[(0,d.jsx)(k.CalendarIcon,{className:"mr-2 h-4 w-4"}),c?(0,l.format)(c,"MMM dd, yyyy"):"Select end date"]})}),(0,d.jsx)(i.PopoverContent,{className:"w-auto p-0",children:(0,d.jsx)(h.Calendar,{mode:"single",selected:c||void 0,onSelect:a=>r(a||null),fromDate:o,toDate:s,initialFocus:!0})})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Recurring tasks can repeat for up to 12 months from the due date"})]})]})]})}]),c()}catch(a){c(a)}},!1),568322,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(109254),g=a.i(396465),h=a.i(112779),i=a.i(397625),j=a.i(330281),k=a.i(688272),l=a.i(366736),m=a.i(393551),n=a.i(158799),o=a.i(585459),p=a.i(792071),q=a.i(509438),r=a.i(466276),s=a.i(799856),t=b([f,g,h,i,j,k,l,m,n,q,r,s]);[f,g,h,i,j,k,l,m,n,q,r,s]=t.then?(await t)():t,a.s(["default",0,({isOpen:a,onClose:b,onSubmit:c,task:t,initialDate:u})=>{console.log("TaskForm rendering with props:",{isOpen:a,task:t,initialDate:u});let[v,w]=(0,e.useState)({title:"",description:"",priority:"Medium",due_date:(0,p.format)(u||new Date,"yyyy-MM-dd"),category:"",reminder_enabled:!1,reminder_time:"",is_recurring:!1,recurrence_type:void 0,recurrence_end_date:void 0}),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(u||new Date),[B,C]=(0,e.useState)(null),D=[];try{D=(0,q.useTaskCategories)().categories||[]}catch(a){console.error("Error loading task categories:",a)}(0,e.useEffect)(()=>{console.log("TaskForm useEffect - task changed:",t),t?(w({title:t.title,description:t.description||"",priority:t.priority,due_date:t.due_date,category:t.category||"",reminder_enabled:t.reminder_enabled,reminder_time:t.reminder_time||"",is_recurring:t.is_recurring,recurrence_type:t.recurrence_type||void 0,recurrence_end_date:t.recurrence_end_date||void 0}),A(new Date(t.due_date)),C(t.recurrence_end_date?new Date(t.recurrence_end_date):null)):u&&(w(a=>({...a,due_date:(0,p.format)(u,"yyyy-MM-dd")})),A(u))},[t,u]);let E=async a=>{if(a.preventDefault(),console.log("TaskForm handleSubmit called with data:",v),!v.title.trim())return void console.log("TaskForm - title is empty, not submitting");y(!0);try{let a={...v,category:"no-category"===v.category?"":v.category,recurrence_end_date:B?(0,p.format)(B,"yyyy-MM-dd"):void 0};await c(a),t||(w({title:"",description:"",priority:"Medium",due_date:(0,p.format)(new Date,"yyyy-MM-dd"),category:"",reminder_enabled:!1,reminder_time:"",is_recurring:!1,recurrence_type:void 0,recurrence_end_date:void 0}),A(new Date),C(null)),b()}catch(a){console.error("Error submitting task:",a)}finally{y(!1)}};return console.log("TaskForm about to render dialog, isOpen:",a),(0,d.jsx)(f.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(f.DialogContent,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)(f.DialogHeader,{children:(0,d.jsx)(f.DialogTitle,{children:t?"Edit Task":"Create New Task"})}),(0,d.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"title",children:"Task Title *"}),(0,d.jsx)(h.Input,{id:"title",value:v.title,onChange:a=>w(b=>({...b,title:a.target.value})),placeholder:"What needs to be done?",required:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"description",children:"Description"}),(0,d.jsx)(j.Textarea,{id:"description",value:v.description,onChange:a=>w(b=>({...b,description:a.target.value})),placeholder:"Add more details...",rows:3})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{children:"Priority"}),(0,d.jsxs)(k.Select,{value:v.priority,onValueChange:a=>w(b=>({...b,priority:a})),children:[(0,d.jsx)(k.SelectTrigger,{children:(0,d.jsx)(k.SelectValue,{})}),(0,d.jsxs)(k.SelectContent,{children:[(0,d.jsx)(k.SelectItem,{value:"Low",className:"text-green-600",children:"Low Priority"}),(0,d.jsx)(k.SelectItem,{value:"Medium",className:"text-yellow-600",children:"Medium Priority"}),(0,d.jsx)(k.SelectItem,{value:"High",className:"text-red-600",children:"High Priority"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{children:"Due Date"}),(0,d.jsxs)(n.Popover,{children:[(0,d.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:(0,s.cn)("w-full justify-start text-left font-normal",!z&&"text-muted-foreground"),children:[(0,d.jsx)(o.CalendarIcon,{className:"mr-2 h-4 w-4"}),z?(0,p.format)(z,"MMM dd, yyyy"):"Pick a date"]})}),(0,d.jsx)(n.PopoverContent,{className:"w-auto p-0",children:(0,d.jsx)(m.Calendar,{mode:"single",selected:z,onSelect:a=>{console.log("TaskForm handleDateSelect called with:",a),a&&(A(a),w(b=>({...b,due_date:(0,p.format)(a,"yyyy-MM-dd")})))},initialFocus:!0})})]})]})]}),D.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{children:"Category"}),(0,d.jsxs)(k.Select,{value:v.category||"no-category",onValueChange:a=>w(b=>({...b,category:"no-category"===a?"":a})),children:[(0,d.jsx)(k.SelectTrigger,{children:(0,d.jsx)(k.SelectValue,{placeholder:"Select a category"})}),(0,d.jsxs)(k.SelectContent,{children:[(0,d.jsx)(k.SelectItem,{value:"no-category",children:"No Category"}),D.map(a=>(0,d.jsx)(k.SelectItem,{value:a.name,children:a.name},a.id))]})]})]}),(0,d.jsx)(r.default,{isRecurring:v.is_recurring||!1,recurrenceType:v.recurrence_type||"",recurrenceEndDate:B,dueDate:z,onRecurringChange:a=>w(b=>({...b,is_recurring:a,recurrence_type:a?b.recurrence_type:void 0})),onRecurrenceTypeChange:a=>w(b=>({...b,recurrence_type:a||void 0})),onRecurrenceEndDateChange:C}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(l.Switch,{id:"reminder",checked:v.reminder_enabled,onCheckedChange:a=>w(b=>({...b,reminder_enabled:a}))}),(0,d.jsx)(i.Label,{htmlFor:"reminder",children:"Enable reminder"})]}),v.reminder_enabled&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.Label,{htmlFor:"reminder-time",children:"Reminder Time"}),(0,d.jsx)(h.Input,{id:"reminder-time",type:"time",value:v.reminder_time,onChange:a=>w(b=>({...b,reminder_time:a.target.value}))})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,d.jsx)(g.Button,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),(0,d.jsx)(g.Button,{type:"submit",disabled:x||!v.title.trim(),children:x?"Saving...":t?"Update Task":"Create Task"})]})]})]})})}]),c()}catch(a){c(a)}},!1),661877,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(396465),f=a.i(493901),g=b([e]);[e]=g.then?(await g)():g,a.s(["default",0,({pendingTodayTasksCount:a,totalTasksCount:b,onCreateTask:c,canCreate:g=!0})=>(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tasks"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:a>0?`You have ${a} task${1===a?"":"s"} due today`:b>0?"All clear for today! ðŸŽ‰":"What's on your mind today?"})]}),g&&(0,d.jsxs)(e.Button,{onClick:c,className:"mt-4 sm:mt-0",children:[(0,d.jsx)(f.Plus,{className:"w-4 h-4 mr-2"}),"Create Task"]})]})]),c()}catch(a){c(a)}},!1),932200,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(148608),f=a.i(492705),g=a.i(914619),h=a.i(125534),i=b([e]);[e]=i.then?(await i)():i,a.s(["default",0,({activeTab:a})=>(0,d.jsxs)(e.TabsList,{className:"grid w-full grid-cols-3 lg:w-auto lg:grid-cols-4",children:[(0,d.jsxs)(e.TabsTrigger,{value:"list",className:"flex items-center gap-2",children:[(0,d.jsx)(f.List,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"List"})]}),(0,d.jsxs)(e.TabsTrigger,{value:"calendar",className:"flex items-center gap-2",children:[(0,d.jsx)(g.Calendar,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Calendar"})]}),(0,d.jsxs)(e.TabsTrigger,{value:"today",className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-xs text-white font-bold",children:"T"})}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Today"})]}),(0,d.jsxs)(e.TabsTrigger,{value:"stats",className:"flex items-center gap-2",children:[(0,d.jsx)(h.BarChart3,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Stats"})]})]})]),c()}catch(a){c(a)}},!1),651860,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(112779),f=a.i(688272),g=a.i(396465),h=a.i(957143),i=b([e,f,g]);[e,f,g]=i.then?(await i)():i,a.s(["default",0,({filters:a,onFiltersChange:b,taskCategories:c,selectedTasks:i,onBulkComplete:j,canEdit:k=!0})=>(0,d.jsxs)("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(h.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,d.jsx)(e.Input,{placeholder:"Search tasks...",value:a.search,onChange:c=>b({...a,search:c.target.value}),className:"pl-10"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,d.jsxs)(f.Select,{value:a.status,onValueChange:c=>b({...a,status:c}),children:[(0,d.jsx)(f.SelectTrigger,{children:(0,d.jsx)(f.SelectValue,{})}),(0,d.jsxs)(f.SelectContent,{children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Tasks"}),(0,d.jsx)(f.SelectItem,{value:"pending",children:"Pending"}),(0,d.jsx)(f.SelectItem,{value:"completed",children:"Completed"})]})]}),(0,d.jsxs)(f.Select,{value:a.priority,onValueChange:c=>b({...a,priority:c}),children:[(0,d.jsx)(f.SelectTrigger,{children:(0,d.jsx)(f.SelectValue,{})}),(0,d.jsxs)(f.SelectContent,{children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Priorities"}),(0,d.jsx)(f.SelectItem,{value:"High",children:"High Priority"}),(0,d.jsx)(f.SelectItem,{value:"Medium",children:"Medium Priority"}),(0,d.jsx)(f.SelectItem,{value:"Low",children:"Low Priority"})]})]}),(0,d.jsxs)(f.Select,{value:a.category,onValueChange:c=>b({...a,category:c}),children:[(0,d.jsx)(f.SelectTrigger,{children:(0,d.jsx)(f.SelectValue,{})}),(0,d.jsxs)(f.SelectContent,{children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Categories"}),(0,d.jsx)(f.SelectItem,{value:"no-category",children:"No Category"}),c.map(a=>(0,d.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]}),i.length>0&&(0,d.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-md",children:[(0,d.jsxs)("span",{className:"text-sm text-blue-700",children:[i.length," task",1===i.length?"":"s"," selected"]}),k&&(0,d.jsx)(g.Button,{onClick:j,size:"sm",children:"Mark as Complete"})]})]})]),c()}catch(a){c(a)}},!1),183064,a=>{"use strict";let b=(0,a.i(564375).default)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);a.s(["Repeat",()=>b],183064)},451782,a=>{"use strict";var b=a.i(809694),c=a.i(349780),d=a.i(837692);function e(a,e){return(0,d.isSameDay)(a,(0,b.addDays)((0,c.constructNow)(e?.in||a),1),e)}a.s(["isTomorrow",()=>e])},270195,a=>{"use strict";var b=a.i(873492);function c(a){return+(0,b.toDate)(a)<Date.now()}a.s(["isPast",()=>c])},808647,a=>{"use strict";var b=a.i(150769),c=a.i(311204);function d(a,d,f){let[g,h]=(0,b.normalizeDates)(f?.in,a,d),i=e(g,h),j=Math.abs((0,c.differenceInCalendarDays)(g,h));g.setDate(g.getDate()-i*j);let k=Number(e(g,h)===-i),l=i*(j-k);return 0===l?0:l}function e(a,b){let c=a.getFullYear()-b.getFullYear()||a.getMonth()-b.getMonth()||a.getDate()-b.getDate()||a.getHours()-b.getHours()||a.getMinutes()-b.getMinutes()||a.getSeconds()-b.getSeconds()||a.getMilliseconds()-b.getMilliseconds();return c<0?-1:c>0?1:c}a.s(["differenceInDays",()=>d])},257405,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(811705),g=a.i(459502),h=a.i(396465),i=a.i(899054),j=a.i(445916),k=a.i(946032),l=a.i(818703),m=a.i(183064),n=a.i(792071),o=a.i(615100),p=a.i(451782),q=a.i(270195),r=a.i(808647),s=a.i(799856),t=b([f,g,h,i,s]);[f,g,h,i,s]=t.then?(await t)():t,a.s(["default",0,({task:a,onToggleComplete:b,onEdit:c,onDelete:t,canEdit:u=!0,canDelete:v=!0})=>{var w;let x,[y,z]=(0,e.useState)(!1),A=async()=>{z(!0),await b(a.id),z(!1)};return(0,d.jsx)(f.Card,{className:(0,s.cn)("transition-all duration-200 hover:shadow-md",(b=>{if(a.completed)return"border-gray-200";switch(b){case"High":return"border-red-300 bg-red-50";case"Medium":return"border-yellow-300 bg-yellow-50";case"Low":return"border-green-300 bg-green-50";default:return"border-gray-200"}})(a.priority),a.completed&&"opacity-75"),children:(0,d.jsxs)(f.CardContent,{className:"p-4",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(g.Checkbox,{checked:a.completed,onCheckedChange:A,disabled:y||!u,className:"mt-1"}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("h3",{className:(0,s.cn)("font-medium text-sm",a.completed&&"line-through text-gray-500"),children:a.title}),a.is_recurring&&(0,d.jsx)(m.Repeat,{className:"w-3 h-3 text-blue-500"})]}),a.description&&(0,d.jsx)("p",{className:(0,s.cn)("text-xs text-gray-600 mt-1",a.completed&&"text-gray-400"),children:a.description}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,d.jsx)(i.Badge,{variant:"secondary",className:(a=>{switch(a){case"High":return"bg-red-100 text-red-700 hover:bg-red-200";case"Medium":return"bg-yellow-100 text-yellow-700 hover:bg-yellow-200";case"Low":return"bg-green-100 text-green-700 hover:bg-green-200";default:return"bg-gray-100 text-gray-700 hover:bg-gray-200"}})(a.priority),children:a.priority}),a.category&&(0,d.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:a.category}),a.is_recurring&&(0,d.jsx)(i.Badge,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:a.is_recurring&&a.recurrence_type?({daily:"Daily",weekly:"Weekly",monthly:"Monthly"})[a.recurrence_type]:null}),(0,d.jsxs)("div",{className:(0,s.cn)("flex items-center text-xs",(w=a.due_date,x=new Date(w),a.completed?"text-gray-500":(0,q.isPast)(x)&&!(0,o.isToday)(x)?"text-red-500":(0,o.isToday)(x)?"text-orange-500":(0,p.isTomorrow)(x)?"text-yellow-500":"text-gray-600")),children:[(0,d.jsx)(l.Clock,{className:"w-3 h-3 mr-1"}),(a=>{let b=new Date(a);if((0,o.isToday)(b))return"Today";if((0,p.isTomorrow)(b))return"Tomorrow";if((0,q.isPast)(b)&&!(0,o.isToday)(b)){let a=Math.abs((0,r.differenceInDays)(new Date,b));return`${a} day${1===a?"":"s"} ago`}let c=(0,r.differenceInDays)(b,new Date);return c<=7?`In ${c} day${1===c?"":"s"}`:(0,n.format)(b,"MMM dd, yyyy")})(a.due_date)]})]}),a.parent_task_id&&(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsxs)(i.Badge,{variant:"outline",className:"text-xs bg-gray-50",children:["Instance #",a.recurrence_count]})})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[u&&(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>c(a),className:"h-7 w-7 p-0 hover:bg-gray-100",children:(0,d.jsx)(j.Edit,{className:"h-3 w-3"})}),v&&(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>t(a.id),className:"h-7 w-7 p-0 hover:bg-red-100 hover:text-red-600",children:(0,d.jsx)(k.Trash2,{className:"h-3 w-3"})})]})]})})]}),a.reminder_enabled&&a.reminder_time&&(0,d.jsxs)("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[(0,d.jsx)(l.Clock,{className:"w-3 h-3 mr-1"}),"Reminder at ",a.reminder_time]})]})})}]),c()}catch(a){c(a)}},!1),507122,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(357026),f=a.i(257405),g=b([f]);[f]=g.then?(await g)():g,a.s(["default",0,({tasks:a,onToggleComplete:b,onEdit:c,onDelete:g,canEdit:h=!0,canDelete:i=!0})=>{let j=a.filter(a=>!a.completed),k=a.filter(a=>a.completed);return 0===a.length?(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsxs)("div",{className:"text-gray-400 mb-4",children:[(0,d.jsx)(e.CheckCircle2,{className:"w-16 h-16 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"What's on your mind today?"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add your first task to get started!"})]})}):(0,d.jsxs)("div",{className:"space-y-6",children:[j.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Pending (",j.length,")"]}),(0,d.jsx)("div",{className:"space-y-3",children:j.map(a=>(0,d.jsx)(f.default,{task:a,onToggleComplete:b,onEdit:c,onDelete:g,canEdit:h,canDelete:i},a.id))})]}),k.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Completed (",k.length,")"]}),(0,d.jsx)("div",{className:"space-y-3",children:k.map(a=>(0,d.jsx)(f.default,{task:a,onToggleComplete:b,onEdit:c,onDelete:g,canEdit:h,canDelete:i},a.id))})]})]})}]),c()}catch(a){c(a)}},!1),266154,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(509438),g=a.i(651860),h=a.i(507122),i=b([f,g,h]);[f,g,h]=i.then?(await i)():i,a.s(["default",0,({tasks:a,onToggleComplete:b,onEdit:c,onDelete:i,onBulkComplete:j,canEdit:k=!0,canDelete:l=!0})=>{let[m,n]=(0,e.useState)({status:"all",priority:"all",category:"all",search:""}),[o,p]=(0,e.useState)([]),{categories:q}=(0,f.useTaskCategories)(),r=(0,e.useMemo)(()=>a.filter(a=>{if("pending"===m.status&&a.completed||"completed"===m.status&&!a.completed||"all"!==m.priority&&a.priority!==m.priority||"all"!==m.category&&("no-category"===m.category&&a.category||"no-category"!==m.category&&a.category!==m.category))return!1;if(m.search){let b=m.search.toLowerCase();return a.title.toLowerCase().includes(b)||a.description&&a.description.toLowerCase().includes(b)}return!0}),[a,m]),s=[...new Set(a.map(a=>a.category).filter(Boolean))];return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(g.default,{filters:m,onFiltersChange:n,taskCategories:s,selectedTasks:o,onBulkComplete:()=>{j&&o.length>0&&(j(o),p([]))},canEdit:k}),(0,d.jsx)(h.default,{tasks:r,onToggleComplete:b,onEdit:c,onDelete:i,canEdit:k,canDelete:l}),0===r.length&&a.length>0&&(0,d.jsx)("div",{className:"text-center py-8",children:(0,d.jsx)("p",{className:"text-gray-500",children:"No tasks match your current filters."})})]})}]),c()}catch(a){c(a)}},!1),169416,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(393551),g=a.i(811705),h=a.i(899054),i=a.i(396465),j=a.i(566571),k=a.i(643228),l=a.i(792071),m=a.i(837692),n=a.i(445475),o=a.i(460716),p=a.i(257405),q=b([f,g,h,i,p]);[f,g,h,i,p]=q.then?(await q)():q,a.s(["default",0,({tasks:a,onToggleComplete:b,onEdit:c,onDelete:q,canEdit:r=!0,canDelete:s=!0})=>{let[t,u]=(0,e.useState)(new Date),[v,w]=(0,e.useState)(new Date),x=(0,e.useMemo)(()=>{let b={};return a.forEach(a=>{let c=(0,l.format)(new Date(a.due_date),"yyyy-MM-dd");b[c]||(b[c]=[]),b[c].push(a)}),b},[a]),y=(0,e.useMemo)(()=>x[(0,l.format)(t,"yyyy-MM-dd")]||[],[x,t]),z=a=>x[(0,l.format)(a,"yyyy-MM-dd")]||[],A=a=>{a&&u(a)};return(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)(g.Card,{className:"lg:col-span-2",children:[(0,d.jsx)(g.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(g.CardTitle,{className:"text-lg font-semibold",children:(0,l.format)(v,"MMMM yyyy")}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let a=new Date;w(a),u(a)},className:"text-xs",children:"Today"}),(0,d.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{w(a=>(0,o.subMonths)(a,1))},children:(0,d.jsx)(j.ChevronLeft,{className:"h-4 w-4"})}),(0,d.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{w(a=>(0,n.addMonths)(a,1))},children:(0,d.jsx)(k.ChevronRight,{className:"h-4 w-4"})})]})]})}),(0,d.jsxs)(g.CardContent,{children:[(0,d.jsx)(f.Calendar,{mode:"single",selected:t,onSelect:A,month:v,onMonthChange:w,className:"w-full",components:{Day:({date:a,...b})=>{z(a);let c=(0,m.isSameDay)(a,t);return(0,d.jsx)("div",{className:`relative p-2 hover:bg-gray-50 cursor-pointer rounded-md ${c?"bg-blue-100":""}`,onClick:()=>A(a),children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("span",{className:`text-sm ${c?"font-bold":""}`,children:(0,l.format)(a,"d")}),(a=>{let b=z(a);if(0===b.length)return null;let c=b.filter(a=>a.completed).length,e=b.length,f=b.filter(a=>"High"===a.priority&&!a.completed).length;return(0,d.jsxs)("div",{className:"flex items-center justify-center mt-1 space-x-1",children:[f>0&&(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),e-c>0&&(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),c>0&&(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]})})(a)]})})}}}),(0,d.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-4 text-xs text-gray-600",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,d.jsx)("span",{children:"High Priority"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,d.jsx)("span",{children:"Pending"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,d.jsx)("span",{children:"Completed"})]})]})]})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsxs)(g.CardHeader,{children:[(0,d.jsx)(g.CardTitle,{className:"text-lg font-semibold",children:(0,l.format)(t,"MMM dd, yyyy")}),y.length>0&&(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsxs)(h.Badge,{variant:"secondary",children:[y.filter(a=>!a.completed).length," pending"]}),(0,d.jsxs)(h.Badge,{variant:"secondary",children:[y.filter(a=>a.completed).length," completed"]})]})]}),(0,d.jsx)(g.CardContent,{children:0===y.length?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("p",{className:"text-gray-500 text-sm",children:"No tasks for this date."}),(0,d.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"All clear! Time for a coffee break â˜•"})]}):(0,d.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:y.map(a=>(0,d.jsx)(p.default,{task:a,onToggleComplete:b,onEdit:c,onDelete:q,canEdit:r,canDelete:s},a.id))})})]})]})}]),c()}catch(a){c(a)}},!1),140523,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(811705),g=a.i(482626),h=a.i(357026),i=a.i(818703),j=a.i(369773),k=a.i(515016),l=a.i(615100),m=a.i(270195),n=b([f,g]);[f,g]=n.then?(await n)():n,a.s(["default",0,({tasks:a})=>{let b=(0,e.useMemo)(()=>{let b=a.length,c=a.filter(a=>a.completed).length,d=a.filter(a=>(0,l.isToday)(new Date(a.due_date))),e=d.filter(a=>a.completed).length,f=a.filter(a=>(0,m.isPast)(new Date(a.due_date))&&!a.completed&&!(0,l.isToday)(new Date(a.due_date))).length,g=a.filter(a=>"High"===a.priority&&!a.completed).length,h=b>0?Math.round(c/b*100):0,i=d.length>0?Math.round(e/d.length*100):0;return{totalTasks:b,completedTasks:c,pendingTasks:b-c,todayTasks:d.length,todayCompleted:e,overdueTasks:f,highPriorityPending:g,completionRate:h,todayCompletionRate:i}},[a]),c=[{title:"Total Tasks",value:b.totalTasks,icon:i.Clock,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Completed",value:b.completedTasks,icon:h.CheckCircle2,color:"text-green-600",bgColor:"bg-green-50"},{title:"Overdue",value:b.overdueTasks,icon:j.AlertTriangle,color:"text-red-600",bgColor:"bg-red-50"},{title:"High Priority",value:b.highPriorityPending,icon:k.TrendingUp,color:"text-orange-600",bgColor:"bg-orange-50"}];return 0===b.totalTasks?(0,d.jsx)(f.Card,{children:(0,d.jsx)(f.CardContent,{className:"p-6 text-center",children:(0,d.jsx)("p",{className:"text-gray-500",children:"No tasks yet. Create your first task to see statistics!"})})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(a=>(0,d.jsx)(f.Card,{children:(0,d.jsx)(f.CardContent,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:`p-2 rounded-lg ${a.bgColor}`,children:(0,d.jsx)(a.icon,{className:`h-4 w-4 ${a.color}`})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.value}),(0,d.jsx)("p",{className:"text-xs text-gray-600",children:a.title})]})]})})},a.title))}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsx)(f.CardTitle,{className:"text-base",children:"Overall Progress"})}),(0,d.jsx)(f.CardContent,{children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{children:"Completion Rate"}),(0,d.jsxs)("span",{className:"font-semibold",children:[b.completionRate,"%"]})]}),(0,d.jsx)(g.Progress,{value:b.completionRate,className:"h-2"}),(0,d.jsxs)("p",{className:"text-xs text-gray-600",children:[b.completedTasks," of ",b.totalTasks," tasks completed"]})]})})]}),(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsx)(f.CardTitle,{className:"text-base",children:"Today's Progress"})}),(0,d.jsx)(f.CardContent,{children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{children:"Today's Completion"}),(0,d.jsxs)("span",{className:"font-semibold",children:[b.todayCompletionRate,"%"]})]}),(0,d.jsx)(g.Progress,{value:b.todayCompletionRate,className:"h-2"}),(0,d.jsxs)("p",{className:"text-xs text-gray-600",children:[b.todayCompleted," of ",b.todayTasks," today's tasks completed"]})]})})]})]}),b.completionRate>80&&(0,d.jsx)(f.Card,{className:"bg-green-50 border-green-200",children:(0,d.jsxs)(f.CardContent,{className:"p-4 text-center",children:[(0,d.jsx)("p",{className:"text-green-800 font-medium",children:"ðŸŽ‰ Excellent work!"}),(0,d.jsxs)("p",{className:"text-green-700 text-sm mt-1",children:["You're doing great with a ",b.completionRate,"% completion rate!"]})]})}),b.overdueTasks>0&&(0,d.jsx)(f.Card,{className:"bg-orange-50 border-orange-200",children:(0,d.jsxs)(f.CardContent,{className:"p-4 text-center",children:[(0,d.jsx)("p",{className:"text-orange-800 font-medium",children:"â° Heads up!"}),(0,d.jsxs)("p",{className:"text-orange-700 text-sm mt-1",children:["You have ",b.overdueTasks," overdue task",1===b.overdueTasks?"":"s",". Consider updating your schedule or completing them soon."]})]})})]})}]),c()}catch(a){c(a)}},!1),95501,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(148608),f=a.i(396465),g=a.i(493901),h=a.i(914619),i=a.i(266154),j=a.i(169416),k=a.i(140523),l=a.i(507122),m=b([e,f,i,j,k,l]);[e,f,i,j,k,l]=m.then?(await m)():m,a.s(["default",0,({tasks:a,todayTasks:b,onToggleComplete:c,onEdit:m,onDelete:n,onBulkComplete:o,onCreateTask:p,canCreate:q=!0,canEdit:r=!0,canDelete:s=!0})=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.TabsContent,{value:"list",className:"space-y-6",children:(0,d.jsx)(i.default,{tasks:a,onToggleComplete:c,onEdit:m,onDelete:n,onBulkComplete:o,canEdit:r,canDelete:s})}),(0,d.jsx)(e.TabsContent,{value:"calendar",className:"space-y-6",children:(0,d.jsx)(j.default,{tasks:a,onToggleComplete:c,onEdit:m,onDelete:n,canEdit:r,canDelete:s})}),(0,d.jsx)(e.TabsContent,{value:"today",className:"space-y-6",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Today's Tasks"}),q&&(0,d.jsxs)(f.Button,{onClick:p,variant:"outline",size:"sm",children:[(0,d.jsx)(g.Plus,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),0===b.length?(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsxs)("div",{className:"text-gray-400 mb-4",children:[(0,d.jsx)(h.Calendar,{className:"w-16 h-16 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"No tasks for today"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Time for a coffee break â˜•"})]})}):(0,d.jsx)(l.default,{tasks:b,onToggleComplete:c,onEdit:m,onDelete:n,canEdit:r,canDelete:s})]})}),(0,d.jsx)(e.TabsContent,{value:"stats",className:"space-y-6",children:(0,d.jsx)(k.default,{tasks:a})})]})]),c()}catch(a){c(a)}},!1),633548,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(148608),g=a.i(178151),h=a.i(509438),i=a.i(531811),j=a.i(503772),k=a.i(568322),l=a.i(661877),m=a.i(932200),n=a.i(95501),o=a.i(805297),p=a.i(289118),q=a.i(436028),r=a.i(2026),s=a.i(747899),t=a.i(396465),u=b([f,g,h,i,k,l,m,n,o,p,t]);[f,g,h,i,k,l,m,n,o,p,t]=u.then?(await u)():u,a.s(["default",0,()=>{let a,b,{user:c}=(0,i.useAuth)(),{hasPermission:u,isLoading:v}=(0,o.useProfiles)(),w=(0,s.useNavigate)(),x=u("tasks","view"),y=u("tasks","create"),z=u("tasks","edit"),A=u("tasks","delete");try{a=(0,g.useTasks)()}catch(b){console.error("Error in useTasks:",b),a={tasks:[],isLoading:!1,createTask:async()=>null,updateTask:async()=>!1,deleteTask:async()=>!1,toggleTaskCompletion:async()=>!1,bulkUpdateTasks:async()=>!1}}try{b=(0,h.useTaskCategories)()}catch(a){console.error("Error in useTaskCategories:",a),b={categories:[],createDefaultCategories:async()=>{}}}let{tasks:B,isLoading:C,createTask:D,updateTask:E,deleteTask:F,toggleTaskCompletion:G,bulkUpdateTasks:H}=a,{categories:I,createDefaultCategories:J}=b,K=(0,j.useTaskPageLogic)({tasks:B,createTask:D,updateTask:E,deleteTask:F,toggleTaskCompletion:G,bulkUpdateTasks:H});return(e.default.useEffect(()=>{0!==I.length||C||J()},[I.length,C,J]),c)?v||C?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x?(0,d.jsxs)("div",{className:"max-w-6xl mx-auto p-4 sm:p-6",children:[(0,d.jsx)(l.default,{pendingTodayTasksCount:K.pendingTodayTasks.length,totalTasksCount:B.length,onCreateTask:K.handleCreateTask,canCreate:y}),(0,d.jsxs)(f.Tabs,{value:K.activeTab,onValueChange:K.setActiveTab,className:"space-y-6",children:[(0,d.jsx)(m.default,{activeTab:K.activeTab}),(0,d.jsx)(n.default,{tasks:B,todayTasks:K.todayTasks,onToggleComplete:K.toggleTaskCompletion,onEdit:K.handleEditTask,onDelete:K.handleDeleteTask,onBulkComplete:K.handleBulkComplete,onCreateTask:K.handleCreateTask,canCreate:y,canEdit:z,canDelete:A})]}),(0,d.jsx)(k.default,{isOpen:K.isTaskFormOpen,onClose:K.handleFormClose,onSubmit:K.handleFormSubmit,task:K.editingTask,initialDate:K.selectedDate||void 0})]}):(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,d.jsxs)(p.Alert,{variant:"destructive",children:[(0,d.jsx)(q.AlertCircle,{className:"h-4 w-4"}),(0,d.jsx)(p.AlertTitle,{children:"Access Denied"}),(0,d.jsx)(p.AlertDescription,{children:"You do not have permission to view the tasks module. Please contact your administrator if you believe this is an error."})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)(t.Button,{onClick:()=>w("/"),variant:"outline",className:"gap-2",children:[(0,d.jsx)(r.ArrowLeft,{className:"h-4 w-4"}),"Back to Dashboard"]})})]}):(0,d.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,d.jsx)("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-md",children:(0,d.jsx)("p",{className:"text-amber-800",children:"You need to be signed in to manage your tasks. All tasks are saved to your account."})})})}]),c()}catch(a){c(a)}},!1),964259,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(539141),h=a.i(706555),i=a.i(633548),j=a.i(509193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Tasks",pathname:"/Tasks",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Tasks",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_9d341ac4._.js.map