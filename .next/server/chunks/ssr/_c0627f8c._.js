module.exports=[533018,a=>{"use strict";a.s([],141213),a.i(141213),a.i(320562),a.i(770288),a.i(905231),a.i(508048),a.i(874884),a.i(219773),a.i(186344),a.i(468638),a.i(905457),a.i(559589),a.i(156171),a.i(124565),a.i(913334),a.i(952765),a.i(315181);var b=a.i(538102);let c=async a=>{try{if(!a)return console.error("Location ID is required for receipt number generation"),"000001";let c=await (0,b.getNextReceiptNumberAction)(a);if(c.success&&c.data)return c.data;return console.error("Error generating receipt number:",c.error),"000001"}catch(a){return console.error("Error generating receipt number:",a),"000001"}};a.s(["generateReceiptNumber",0,c],533018)},662432,a=>{"use strict";var b=a.i(572131),c=a.i(169819),d=a.i(478793),e=a.i(391956),f=a.i(405050);let g=(0,f.createServerReference)("40696a4456c7690d29b12ef602356cbc9be3c34a97",f.callServer,void 0,f.findSourceMapURL,"getCustomerCategoriesAction"),h=(0,f.createServerReference)("70b04375c8b1e7a5a64b19d8153628c90f1150c267",f.callServer,void 0,f.findSourceMapURL,"createCustomerCategoryAction"),i=(0,f.createServerReference)("605890db4ca201299b68a3100db491232317cf530d",f.callServer,void 0,f.findSourceMapURL,"updateCustomerCategoryAction"),j=(0,f.createServerReference)("4032dd367fa6b4bfc08062e47a1ca2ffb5e5eb04b0",f.callServer,void 0,f.findSourceMapURL,"deleteCustomerCategoryAction");a.s(["useCustomerCategories",0,()=>{let[a,f]=(0,b.useState)([]),[k,l]=(0,b.useState)(!0),{currentBusiness:m}=(0,c.useBusiness)(),{user:n}=(0,e.useAuth)(),o=async()=>{if(!m){f([]),l(!1);return}try{let a=await g(m.id);if(a.success&&a.data)f(a.data);else throw Error(a.error)}catch(a){console.error("Error fetching customer categories:",a),(0,d.toast)({title:"Error",description:"Failed to fetch customer categories",variant:"destructive"})}finally{l(!1)}};return(0,b.useEffect)(()=>{o()},[m]),{categories:a,isLoading:k,createCategory:async a=>{if(!m||!n)return(0,d.toast)({title:"Error",description:"No business selected or user not authenticated",variant:"destructive"}),!1;try{let b=await h(m.id,n.id,a);if(b.success)return(0,d.toast)({title:"Success",description:"Customer category created successfully"}),o(),!0;throw Error(b.error)}catch(a){return console.error("Error creating customer category:",a),(0,d.toast)({title:"Error",description:"Failed to create customer category",variant:"destructive"}),!1}},updateCategory:async(a,b)=>{try{let c=await i(a,b);if(c.success)return(0,d.toast)({title:"Success",description:"Customer category updated successfully"}),o(),!0;throw Error(c.error)}catch(a){return console.error("Error updating customer category:",a),(0,d.toast)({title:"Error",description:"Failed to update customer category",variant:"destructive"}),!1}},deleteCategory:async a=>{try{let b=await j(a);if(b.success)return(0,d.toast)({title:"Success",description:"Customer category deleted successfully"}),o(),!0;throw Error(b.error)}catch(a){return console.error("Error deleting customer category:",a),(0,d.toast)({title:"Error",description:"Failed to delete customer category",variant:"destructive"}),!1}},refetch:o}}],662432)},468976,a=>{"use strict";let b=(0,a.i(170106).default)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);a.s(["Edit3",()=>b],468976)},179257,a=>{"use strict";let b=(0,a.i(170106).default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);a.s(["Link",()=>b],179257)},327054,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(866718),e=a.i(870430),f=a.i(429246),g=a.i(699570),h=a.i(941675),i=a.i(320146),j=a.i(599209),k=a.i(580701),l=a.i(256711),m=a.i(786304),n=a.i(633508),o=a.i(368114),p=a.i(695245),q=a.i(814574),r=a.i(662432);a.s(["default",0,({initialData:a,onSubmit:s,onCancel:t})=>{let[u,v]=c.default.useState(!1),{categories:w}=(0,r.useCustomerCategories)(),[x,y]=c.default.useState(()=>{if(a?.birthday)return console.log("Initial birthday from props:",a.birthday),a.birthday}),[z,A]=c.default.useState(a?.categoryId||"none");c.default.useEffect(()=>{a?.birthday&&(console.log("Initial birthday from props:",a.birthday),console.log("Is Date object:",a.birthday instanceof Date),console.log("Date string:",a.birthday.toString()))},[a?.birthday]);let[B,C]=c.default.useState({facebook:a?.socialMedia?.facebook||"",instagram:a?.socialMedia?.instagram||"",twitter:a?.socialMedia?.twitter||"",linkedin:a?.socialMedia?.linkedin||"",other:a?.socialMedia?.other||""}),[D,E]=c.default.useState(a?.tags||[]),[F,G]=c.default.useState(""),[H,I]=c.default.useState(a?.gender||""),{register:J,handleSubmit:K,formState:{errors:L}}=(0,p.useForm)({defaultValues:{fullName:a?.fullName||"",email:a?.email||"",phoneNumber:a?.phoneNumber||"",location:a?.location||"",gender:a?.gender||"",notes:a?.notes||""}}),M=()=>{""===F.trim()||D.includes(F.trim())||(E([...D,F.trim()]),G(""))},N=(a,b)=>{C({...B,[b]:a.target.value})},O=async a=>{v(!0);try{console.log("Selected date before submission:",x);let b={...a,gender:H,birthday:x,categoryId:"none"===z?null:z,socialMedia:Object.keys(B).length>0?B:null,tags:D.length>0?D:null};console.log("Submitting customer data:",b),await s(b)}finally{v(!1)}},P=new Date().getFullYear(),Q=Array.from({length:100},(a,b)=>P-b),R=[{value:0,label:"January"},{value:1,label:"February"},{value:2,label:"March"},{value:3,label:"April"},{value:4,label:"May"},{value:5,label:"June"},{value:6,label:"July"},{value:7,label:"August"},{value:8,label:"September"},{value:9,label:"October"},{value:10,label:"November"},{value:11,label:"December"}],S=a=>{if(console.log("Date selected from calendar:",a),a){let b=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),12,0,0));console.log("Corrected date with UTC noon:",b),y(b)}else y(void 0)},T=a=>{try{let b=parseInt(a),c=x?new Date(x):new Date,d=new Date(Date.UTC(b,c.getMonth(),c.getDate(),12,0,0));isNaN(d.getTime())?console.error("Invalid date after setting year:",a):(y(d),console.log("Year selected, new date:",d))}catch(a){console.error("Error setting year:",a)}},U=a=>{try{let b=parseInt(a),c=x?new Date(x):new Date,d=new Date(Date.UTC(c.getFullYear(),b,c.getDate(),12,0,0));isNaN(d.getTime())?console.error("Invalid date after setting month:",a):(y(d),console.log("Month selected, new date:",d))}catch(a){console.error("Error setting month:",a)}},V=w.filter(a=>a.id&&""!==a.id.trim());return(0,b.jsx)("form",{onSubmit:K(O),children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"fullName",children:"Full Name*"}),(0,b.jsx)(d.Input,{id:"fullName",...J("fullName",{required:"Name is required"}),className:(0,o.cn)(L.fullName&&"border-red-500")}),L.fullName&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:L.fullName.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)(k.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(k.SelectTrigger,{id:"category",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select category"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"No Category"}),V.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"email",children:"Email Address"}),(0,b.jsx)(d.Input,{id:"email",type:"email",...J("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:(0,o.cn)(L.email&&"border-red-500")}),L.email&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:L.email.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,b.jsx)(d.Input,{id:"phoneNumber",...J("phoneNumber")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"location",children:"Location"}),(0,b.jsx)(d.Input,{id:"location",...J("location")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"gender",children:"Gender"}),(0,b.jsxs)(k.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(k.SelectTrigger,{id:"gender",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select gender"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"male",children:"Male"}),(0,b.jsx)(k.SelectItem,{value:"female",children:"Female"}),(0,b.jsx)(k.SelectItem,{value:"non-binary",children:"Non-binary"}),(0,b.jsx)(k.SelectItem,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{children:"Birthday"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(j.Popover,{children:[(0,b.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-between",children:[x?x.getDate():"Day",(0,b.jsx)(h.Calendar,{className:"h-4 w-4 opacity-50"})]})}),(0,b.jsx)(j.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(i.Calendar,{mode:"single",selected:x,onSelect:S,initialFocus:!0,captionLayout:"buttons",className:"p-3 pointer-events-auto",classNames:{caption_label:"hidden",dropdown:"hidden"}})})]})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(k.Select,{value:x?String(x.getMonth()):void 0,onValueChange:U,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Month"})}),(0,b.jsx)(k.SelectContent,{children:R.map(a=>(0,b.jsx)(k.SelectItem,{value:String(a.value),children:a.label},a.value))})]})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(k.Select,{value:x?String(x.getFullYear()):void 0,onValueChange:T,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Year"})}),(0,b.jsx)(k.SelectContent,{children:Q.map(a=>(0,b.jsx)(k.SelectItem,{value:String(a),children:a},a))})]})})]}),x&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected: ",x?(0,l.format)(x,"PPP"):"No date selected"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:D.map(a=>(0,b.jsxs)(m.Badge,{variant:"secondary",children:[a,(0,b.jsxs)("button",{type:"button",className:"ml-1 rounded-full hover:bg-gray-200",onClick:()=>{E(D.filter(b=>b!==a))},children:[(0,b.jsx)(n.X,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"sr-only",children:"Remove tag"})]})]},a))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Input,{value:F,onChange:a=>G(a.target.value),placeholder:"Add tag",onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),M())}),(0,b.jsx)(g.Button,{type:"button",onClick:M,variant:"outline",children:"Add"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{children:"Social Media"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"facebook",className:"text-xs",children:"Facebook"}),(0,b.jsx)(d.Input,{id:"facebook",value:B.facebook,onChange:a=>N(a,"facebook"),placeholder:"Username or URL"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"instagram",className:"text-xs",children:"Instagram"}),(0,b.jsx)(d.Input,{id:"instagram",value:B.instagram,onChange:a=>N(a,"instagram"),placeholder:"Username without @"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"twitter",className:"text-xs",children:"Twitter/X"}),(0,b.jsx)(d.Input,{id:"twitter",value:B.twitter,onChange:a=>N(a,"twitter"),placeholder:"Username without @"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"linkedin",className:"text-xs",children:"LinkedIn"}),(0,b.jsx)(d.Input,{id:"linkedin",value:B.linkedin,onChange:a=>N(a,"linkedin"),placeholder:"Profile URL or username"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{children:"Birthday"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(j.Popover,{children:[(0,b.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-between",children:[x?x.getDate():"Day",(0,b.jsx)(h.Calendar,{className:"h-4 w-4 opacity-50"})]})}),(0,b.jsx)(j.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(i.Calendar,{mode:"single",selected:x,onSelect:S,initialFocus:!0,captionLayout:"buttons",className:"p-3 pointer-events-auto",classNames:{caption_label:"hidden",dropdown:"hidden"}})})]})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(k.Select,{value:x?String(x.getMonth()):void 0,onValueChange:U,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Month"})}),(0,b.jsx)(k.SelectContent,{children:R.map(a=>(0,b.jsx)(k.SelectItem,{value:String(a.value),children:a.label},a.value))})]})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)(k.Select,{value:x?String(x.getFullYear()):void 0,onValueChange:T,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Year"})}),(0,b.jsx)(k.SelectContent,{children:Q.map(a=>(0,b.jsx)(k.SelectItem,{value:String(a),children:a},a))})]})})]}),x&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected: ",x?(0,l.format)(x,"PPP"):"No date selected"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"notes",children:"Notes"}),(0,b.jsx)(f.Textarea,{id:"notes",...J("notes"),rows:4,placeholder:"Add any notes about this customer..."})]}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",disabled:u,children:u?"Saving...":"Save Changes"})]})]})})}])},197920,a=>{"use strict";var b=a.i(187924),c=a.i(814574),d=a.i(327054),e=a.i(269876);a.s(["default",0,({open:a,onClose:f,onAddCustomer:g,initialData:h})=>{let i=async a=>(g(a),!0),j=!!h;return(0,b.jsx)(c.Dialog,{open:a,onOpenChange:f,children:(0,b.jsxs)(c.DialogContent,{className:"max-w-2xl max-h-[90vh]",children:[(0,b.jsxs)(c.DialogHeader,{children:[(0,b.jsx)(c.DialogTitle,{children:j?"Edit Customer":"Add New Customer"}),(0,b.jsx)(c.DialogDescription,{children:"Fill in the customer details below. Only name is required."})]}),(0,b.jsx)(e.ScrollArea,{className:"h-[calc(80vh-8rem)]",children:(0,b.jsx)("div",{className:"px-1",children:(0,b.jsx)(d.default,{onSubmit:i,onCancel:f,initialData:h})})})]})})}])}];

//# sourceMappingURL=_c0627f8c._.js.map