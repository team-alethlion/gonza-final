{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/%40radix-ui/react-checkbox/src/checkbox.tsx","../../../../src/components/ui/checkbox.tsx","../../../../node_modules/lucide-react/src/icons/printer.ts","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../node_modules/%40radix-ui/react-switch/src/switch.tsx","../../../../src/components/ui/switch.tsx","../../../../node_modules/lucide-react/src/icons/rotate-ccw.ts","../../../../src/utils/searchUtils.ts","../../../../node_modules/lucide-react/src/icons/image.ts","../../../../src/components/inventory/ProductImage.tsx","../../../../node_modules/lucide-react/src/icons/clock.ts","../../../../src/hooks/useStockHistory.ts","../../../../src/hooks/useSalesCategories.ts","../../../../src/app/actions/data%3Adfe215%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A188138%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A9c10dc%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A263db4%20%3Ctext/javascript%3E","../../../../src/hooks/useMessages.ts","../../../../src/app/actions/data%3Ae82cf2%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A0511b6%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A9d33bd%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A7e8871%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Afa2251%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A4dd372%20%3Ctext/javascript%3E","../../../../src/hooks/useCustomers.ts","../../../../src/app/actions/data%3A78bf0f%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A71b615%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A650ca7%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A66ef81%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A4ea346%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ae6fce5%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Aa9aba0%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Aa94462%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ab0c698%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A8919f6%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A3f995e%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A1f18ef%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A5f3004%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Acd2384%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A595367%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ab4152c%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A01a8b2%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A60fde0%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A8aab44%20%3Ctext/javascript%3E","../../../../src/pages/NewSale.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import * as React from 'react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { usePrevious } from '@radix-ui/react-use-previous';\nimport { useSize } from '@radix-ui/react-use-size';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\nconst CHECKBOX_NAME = 'Checkbox';\n\ntype ScopedProps<P> = P & { __scopeCheckbox?: Scope };\nconst [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\n\ntype CheckedState = boolean | 'indeterminate';\n\ntype CheckboxContextValue<State extends CheckedState | boolean = CheckedState> = {\n  checked: State | boolean;\n  setChecked: React.Dispatch<React.SetStateAction<State | boolean>>;\n  disabled: boolean | undefined;\n  control: HTMLButtonElement | null;\n  setControl: React.Dispatch<React.SetStateAction<HTMLButtonElement | null>>;\n  name: string | undefined;\n  form: string | undefined;\n  value: string | number | readonly string[];\n  hasConsumerStoppedPropagationRef: React.RefObject<boolean>;\n  required: boolean | undefined;\n  defaultChecked: boolean | undefined;\n  isFormControl: boolean;\n  bubbleInput: HTMLInputElement | null;\n  setBubbleInput: React.Dispatch<React.SetStateAction<HTMLInputElement | null>>;\n};\n\nconst [CheckboxProviderImpl, useCheckboxContext] =\n  createCheckboxContext<CheckboxContextValue>(CHECKBOX_NAME);\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxProvider\n * -----------------------------------------------------------------------------------------------*/\n\ninterface CheckboxProviderProps<State extends CheckedState = CheckedState> {\n  checked?: State | boolean;\n  defaultChecked?: State | boolean;\n  required?: boolean;\n  onCheckedChange?(checked: State | boolean): void;\n  name?: string;\n  form?: string;\n  disabled?: boolean;\n  value?: string | number | readonly string[];\n  children?: React.ReactNode;\n}\n\nfunction CheckboxProvider<State extends CheckedState = CheckedState>(\n  props: ScopedProps<CheckboxProviderProps<State>>\n) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = 'on',\n    // @ts-expect-error\n    internal_do_not_use_render,\n  } = props;\n\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME,\n  });\n  const [control, setControl] = React.useState<HTMLButtonElement | null>(null);\n  const [bubbleInput, setBubbleInput] = React.useState<HTMLInputElement | null>(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control\n    ? !!form || !!control.closest('form')\n    : // We set this to true by default so that events bubble to forms without JS (SSR)\n      true;\n\n  const context: CheckboxContextValue<State> = {\n    checked: checked,\n    disabled: disabled,\n    setChecked: setChecked,\n    control: control,\n    setControl: setControl,\n    name: name,\n    form: form,\n    value: value,\n    hasConsumerStoppedPropagationRef: hasConsumerStoppedPropagationRef,\n    required: required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl: isFormControl,\n    bubbleInput,\n    setBubbleInput,\n  };\n\n  return (\n    <CheckboxProviderImpl\n      scope={__scopeCheckbox}\n      {...(context as unknown as CheckboxContextValue<CheckedState>)}\n    >\n      {isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children}\n    </CheckboxProviderImpl>\n  );\n}\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst TRIGGER_NAME = 'CheckboxTrigger';\n\ninterface CheckboxTriggerProps\n  extends Omit<\n    React.ComponentPropsWithoutRef<typeof Primitive.button>,\n    keyof CheckboxProviderProps\n  > {\n  children?: React.ReactNode;\n}\n\nconst CheckboxTrigger = React.forwardRef<HTMLButtonElement, CheckboxTriggerProps>(\n  (\n    { __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }: ScopedProps<CheckboxTriggerProps>,\n    forwardedRef\n  ) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput,\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener('reset', reset);\n        return () => form.removeEventListener('reset', reset);\n      }\n    }, [control, setChecked]);\n\n    return (\n      <Primitive.button\n        type=\"button\"\n        role=\"checkbox\"\n        aria-checked={isIndeterminate(checked) ? 'mixed' : checked}\n        aria-required={required}\n        data-state={getState(checked)}\n        data-disabled={disabled ? '' : undefined}\n        disabled={disabled}\n        value={value}\n        {...checkboxProps}\n        ref={composedRefs}\n        onKeyDown={composeEventHandlers(onKeyDown, (event) => {\n          // According to WAI ARIA, Checkboxes don't activate on enter keypress\n          if (event.key === 'Enter') event.preventDefault();\n        })}\n        onClick={composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => (isIndeterminate(prevChecked) ? true : !prevChecked));\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            // if checkbox has a bubble input and is a form control, stop\n            // propagation from the button so that we only propagate one click\n            // event (from the input). We propagate changes from an input so\n            // that native form validation works and form events reflect\n            // checkbox updates.\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })}\n      />\n    );\n  }\n);\n\nCheckboxTrigger.displayName = TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * Checkbox\n * -----------------------------------------------------------------------------------------------*/\n\ntype CheckboxElement = React.ComponentRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface CheckboxProps extends Omit<PrimitiveButtonProps, 'checked' | 'defaultChecked'> {\n  checked?: CheckedState;\n  defaultChecked?: CheckedState;\n  required?: boolean;\n  onCheckedChange?(checked: CheckedState): void;\n}\n\nconst Checkbox = React.forwardRef<CheckboxElement, CheckboxProps>(\n  (props: ScopedProps<CheckboxProps>, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n\n    return (\n      <CheckboxProvider\n        __scopeCheckbox={__scopeCheckbox}\n        checked={checked}\n        defaultChecked={defaultChecked}\n        disabled={disabled}\n        required={required}\n        onCheckedChange={onCheckedChange}\n        name={name}\n        form={form}\n        value={value}\n        // @ts-expect-error\n        internal_do_not_use_render={({ isFormControl }: CheckboxContextValue) => (\n          <>\n            <CheckboxTrigger\n              {...checkboxProps}\n              ref={forwardedRef}\n              // @ts-expect-error\n              __scopeCheckbox={__scopeCheckbox}\n            />\n            {isFormControl && (\n              <CheckboxBubbleInput\n                // @ts-expect-error\n                __scopeCheckbox={__scopeCheckbox}\n              />\n            )}\n          </>\n        )}\n      />\n    );\n  }\n);\n\nCheckbox.displayName = CHECKBOX_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst INDICATOR_NAME = 'CheckboxIndicator';\n\ntype CheckboxIndicatorElement = React.ComponentRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface CheckboxIndicatorProps extends PrimitiveSpanProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst CheckboxIndicator = React.forwardRef<CheckboxIndicatorElement, CheckboxIndicatorProps>(\n  (props: ScopedProps<CheckboxIndicatorProps>, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return (\n      <Presence\n        present={forceMount || isIndeterminate(context.checked) || context.checked === true}\n      >\n        <Primitive.span\n          data-state={getState(context.checked)}\n          data-disabled={context.disabled ? '' : undefined}\n          {...indicatorProps}\n          ref={forwardedRef}\n          style={{ pointerEvents: 'none', ...props.style }}\n        />\n      </Presence>\n    );\n  }\n);\n\nCheckboxIndicator.displayName = INDICATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxBubbleInput\n * -----------------------------------------------------------------------------------------------*/\n\nconst BUBBLE_INPUT_NAME = 'CheckboxBubbleInput';\n\ntype InputProps = React.ComponentPropsWithoutRef<typeof Primitive.input>;\ninterface CheckboxBubbleInputProps extends Omit<InputProps, 'checked'> {}\n\nconst CheckboxBubbleInput = React.forwardRef<HTMLInputElement, CheckboxBubbleInputProps>(\n  ({ __scopeCheckbox, ...props }: ScopedProps<CheckboxBubbleInputProps>, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput,\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n\n    // Bubble checked change to parents (e.g form change event)\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        'checked'\n      ) as PropertyDescriptor;\n      const setChecked = descriptor.set;\n\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event('click', { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return (\n      <Primitive.input\n        type=\"checkbox\"\n        aria-hidden\n        defaultChecked={defaultChecked ?? defaultCheckedRef.current}\n        required={required}\n        disabled={disabled}\n        name={name}\n        value={value}\n        form={form}\n        {...props}\n        tabIndex={-1}\n        ref={composedRefs}\n        style={{\n          ...props.style,\n          ...controlSize,\n          position: 'absolute',\n          pointerEvents: 'none',\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: 'translateX(-100%)',\n        }}\n      />\n    );\n  }\n);\n\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\nfunction isFunction(value: unknown): value is (...args: any[]) => any {\n  return typeof value === 'function';\n}\n\nfunction isIndeterminate(checked?: CheckedState): checked is 'indeterminate' {\n  return checked === 'indeterminate';\n}\n\nfunction getState(checked: CheckedState) {\n  return isIndeterminate(checked) ? 'indeterminate' : checked ? 'checked' : 'unchecked';\n}\n\nexport {\n  createCheckboxScope,\n  //\n  Checkbox,\n  CheckboxProvider,\n  CheckboxTrigger,\n  CheckboxIndicator,\n  CheckboxBubbleInput,\n  //\n  Checkbox as Root,\n  CheckboxProvider as Provider,\n  CheckboxTrigger as Trigger,\n  CheckboxIndicator as Indicator,\n  CheckboxBubbleInput as BubbleInput,\n};\nexport type {\n  CheckboxProps,\n  CheckboxProviderProps,\n  CheckboxTriggerProps,\n  CheckboxIndicatorProps,\n  CheckboxBubbleInputProps,\n  CheckedState,\n};\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Printer\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAxOEg0YTIgMiAwIDAgMS0yLTJ2LTVhMiAyIDAgMCAxIDItMmgxNmEyIDIgMCAwIDEgMiAydjVhMiAyIDAgMCAxLTIgMmgtMiIgLz4KICA8cGF0aCBkPSJNNiA5VjNhMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxdjYiIC8+CiAgPHJlY3QgeD0iNiIgeT0iMTQiIHdpZHRoPSIxMiIgaGVpZ2h0PSI4IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/printer\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Printer = createLucideIcon('Printer', [\n  [\n    'path',\n    {\n      d: 'M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2',\n      key: '143wyd',\n    },\n  ],\n  ['path', { d: 'M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6', key: '1itne7' }],\n  ['rect', { x: '6', y: '14', width: '12', height: '8', rx: '1', key: '1ue0tg' }],\n]);\n\nexport default Printer;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { usePrevious } from '@radix-ui/react-use-previous';\nimport { useSize } from '@radix-ui/react-use-size';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * Switch\n * -----------------------------------------------------------------------------------------------*/\n\nconst SWITCH_NAME = 'Switch';\n\ntype ScopedProps<P> = P & { __scopeSwitch?: Scope };\nconst [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\n\ntype SwitchContextValue = { checked: boolean; disabled?: boolean };\nconst [SwitchProvider, useSwitchContext] = createSwitchContext<SwitchContextValue>(SWITCH_NAME);\n\ntype SwitchElement = React.ComponentRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface SwitchProps extends PrimitiveButtonProps {\n  checked?: boolean;\n  defaultChecked?: boolean;\n  required?: boolean;\n  onCheckedChange?(checked: boolean): void;\n}\n\nconst Switch = React.forwardRef<SwitchElement, SwitchProps>(\n  (props: ScopedProps<SwitchProps>, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = 'on',\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState<HTMLButtonElement | null>(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    const isFormControl = button ? form || !!button.closest('form') : true;\n    const [checked, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked ?? false,\n      onChange: onCheckedChange,\n      caller: SWITCH_NAME,\n    });\n\n    return (\n      <SwitchProvider scope={__scopeSwitch} checked={checked} disabled={disabled}>\n        <Primitive.button\n          type=\"button\"\n          role=\"switch\"\n          aria-checked={checked}\n          aria-required={required}\n          data-state={getState(checked)}\n          data-disabled={disabled ? '' : undefined}\n          disabled={disabled}\n          value={value}\n          {...switchProps}\n          ref={composedRefs}\n          onClick={composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              // if switch is in a form, stop propagation from the button so that we only propagate\n              // one click event (from the input). We propagate changes from an input so that native\n              // form validation works and form events reflect switch updates.\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })}\n        />\n        {isFormControl && (\n          <SwitchBubbleInput\n            control={button}\n            bubbles={!hasConsumerStoppedPropagationRef.current}\n            name={name}\n            value={value}\n            checked={checked}\n            required={required}\n            disabled={disabled}\n            form={form}\n            // We transform because the input is absolutely positioned but we have\n            // rendered it **after** the button. This pulls it back to sit on top\n            // of the button.\n            style={{ transform: 'translateX(-100%)' }}\n          />\n        )}\n      </SwitchProvider>\n    );\n  }\n);\n\nSwitch.displayName = SWITCH_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * SwitchThumb\n * -----------------------------------------------------------------------------------------------*/\n\nconst THUMB_NAME = 'SwitchThumb';\n\ntype SwitchThumbElement = React.ComponentRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface SwitchThumbProps extends PrimitiveSpanProps {}\n\nconst SwitchThumb = React.forwardRef<SwitchThumbElement, SwitchThumbProps>(\n  (props: ScopedProps<SwitchThumbProps>, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return (\n      <Primitive.span\n        data-state={getState(context.checked)}\n        data-disabled={context.disabled ? '' : undefined}\n        {...thumbProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nSwitchThumb.displayName = THUMB_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * SwitchBubbleInput\n * -----------------------------------------------------------------------------------------------*/\n\nconst BUBBLE_INPUT_NAME = 'SwitchBubbleInput';\n\ntype InputProps = React.ComponentPropsWithoutRef<typeof Primitive.input>;\ninterface SwitchBubbleInputProps extends Omit<InputProps, 'checked'> {\n  checked: boolean;\n  control: HTMLElement | null;\n  bubbles: boolean;\n}\n\nconst SwitchBubbleInput = React.forwardRef<HTMLInputElement, SwitchBubbleInputProps>(\n  (\n    {\n      __scopeSwitch,\n      control,\n      checked,\n      bubbles = true,\n      ...props\n    }: ScopedProps<SwitchBubbleInputProps>,\n    forwardedRef\n  ) => {\n    const ref = React.useRef<HTMLInputElement>(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n\n    // Bubble checked change to parents (e.g form change event)\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        'checked'\n      ) as PropertyDescriptor;\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event('click', { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n\n    return (\n      <input\n        type=\"checkbox\"\n        aria-hidden\n        defaultChecked={checked}\n        {...props}\n        tabIndex={-1}\n        ref={composedRefs}\n        style={{\n          ...props.style,\n          ...controlSize,\n          position: 'absolute',\n          pointerEvents: 'none',\n          opacity: 0,\n          margin: 0,\n        }}\n      />\n    );\n  }\n);\n\nSwitchBubbleInput.displayName = BUBBLE_INPUT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getState(checked: boolean) {\n  return checked ? 'checked' : 'unchecked';\n}\n\nconst Root = Switch;\nconst Thumb = SwitchThumb;\n\nexport {\n  createSwitchScope,\n  //\n  Switch,\n  SwitchThumb,\n  //\n  Root,\n  Thumb,\n};\nexport type { SwitchProps, SwitchThumbProps };\n","import * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('RotateCcw', [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n]);\n\nexport default RotateCcw;\n","import { Product } from '@/types';\r\n\r\n/**\r\n * Checks if a search term (possibly containing multiple words in any order) matches a product.\r\n * Returns true if every word in the search term is found in at least one searchable field of the product.\r\n */\r\nexport const matchProductSearch = (product: Product, searchTerm: string): boolean => {\r\n    if (!searchTerm || !searchTerm.trim()) return true;\r\n\r\n    const words = searchTerm.toLowerCase().trim().split(/\\s+/);\r\n\r\n    const searchableText = [\r\n        String(product.name || ''),\r\n        String(product.description || ''),\r\n        String(product.category || ''),\r\n        String(product.supplier || ''),\r\n        String(product.itemNumber || ''),\r\n        String(product.barcode || ''),\r\n        String(product.manufacturerBarcode || '')\r\n    ].map(s => s.toLowerCase());\r\n\r\n    // Every word in the search must match at least one searchable field\r\n    return words.every(word =>\r\n        searchableText.some(field => field.includes(word))\r\n    );\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Image\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iOSIgcj0iMiIgLz4KICA8cGF0aCBkPSJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Image = createLucideIcon('Image', [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['circle', { cx: '9', cy: '9', r: '2', key: 'af1f0g' }],\n  ['path', { d: 'm21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21', key: '1xmnt7' }],\n]);\n\nexport default Image;\n","\r\nimport React from 'react';\r\nimport { Image as ImageIcon } from 'lucide-react';\r\n\r\ninterface ProductImageProps {\r\n  imageUrl?: string | null;\r\n  alt: string;\r\n  size?: 'sm' | 'md';\r\n}\r\n\r\nconst ProductImage: React.FC<ProductImageProps> = ({\r\n  imageUrl,\r\n  alt,\r\n  size = 'md'\r\n}) => {\r\n  const dimensions = size === 'sm' ? 'w-10 h-10' : 'w-12 h-12';\r\n  \r\n  if (imageUrl) {\r\n    return (\r\n      <img \r\n        src={imageUrl} \r\n        alt={alt} \r\n        className={`${dimensions} object-cover rounded-md`}\r\n      />\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className={`${dimensions} bg-gray-100 flex items-center justify-center rounded-md`}>\r\n      <ImageIcon size={size === 'sm' ? 16 : 18} className=\"text-gray-400\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductImage;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { StockHistoryEntry } from '@/types';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport {\r\n  getStockHistoryAction,\r\n  createStockHistoryAction,\r\n  recalculateStockChainAction,\r\n  deleteStockHistoryEntriesByReferenceAction,\r\n  updateStockHistoryDatesByReferenceAction,\r\n  repairStockChainsAction,\r\n  getStockRepairsPreviewAction\r\n} from '@/app/actions/inventory';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\n\r\nexport interface ChainRepairBreakEntry {\r\n  entryId: string;\r\n  createdAt: string;\r\n  changeReason: string;\r\n  currentPrevQty: number;\r\n  currentNewQty: number;\r\n  fixedPrevQty: number;\r\n  fixedNewQty: number;\r\n}\r\n\r\nexport interface ChainRepairPreview {\r\n  productId: string;\r\n  productName: string;\r\n  totalEntries: number;\r\n  brokenEntries: ChainRepairBreakEntry[];\r\n  finalFixedQty: number;\r\n  currentProductQty: number;\r\n}\r\n\r\nexport const useStockHistory = (userId: string | undefined, productId?: string) => {\r\n  const [stockHistory, setStockHistory] = useState<StockHistoryEntry[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadStockHistory = useCallback(async () => {\r\n    if (!userId || !currentBusiness) {\r\n      setStockHistory([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const result = await getStockHistoryAction(currentBusiness.id, productId);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch stock history');\r\n      }\r\n\r\n      const formattedHistory: StockHistoryEntry[] = result.data.map((entry: any) => ({\r\n        id: entry.id,\r\n        productId: entry.productId,\r\n        oldQuantity: entry.oldQuantity,\r\n        newQuantity: entry.newQuantity,\r\n        changeReason: entry.changeReason,\r\n        createdAt: new Date(entry.createdAt),\r\n        referenceId: entry.referenceId,\r\n        receiptNumber: entry.receiptNumber,\r\n        product: entry.product\r\n      }));\r\n\r\n      setStockHistory(formattedHistory);\r\n    } catch (error) {\r\n      console.error('Error loading stock history:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [userId, currentBusiness?.id, productId]);\r\n\r\n  useEffect(() => {\r\n    loadStockHistory();\r\n  }, [loadStockHistory]);\r\n\r\n  const createStockHistoryEntry = async (\r\n    targetProductId: string,\r\n    previousQuantity: number,\r\n    newQuantity: number,\r\n    reason: string,\r\n    referenceId?: string,\r\n    entryDate?: Date,\r\n    receiptNumber?: string,\r\n    productName?: string\r\n  ) => {\r\n    try {\r\n      if (!userId || !currentBusiness) return false;\r\n\r\n      const snapshottedReason = productName\r\n        ? `[${productName}] | ${reason}`\r\n        : reason;\r\n\r\n      const result = await createStockHistoryAction({\r\n        userId,\r\n        locationId: currentBusiness.id,\r\n        productId: targetProductId,\r\n        previousQuantity,\r\n        newQuantity,\r\n        changeReason: snapshottedReason,\r\n        referenceId,\r\n        receiptNumber,\r\n        createdAt: entryDate?.toISOString()\r\n      });\r\n\r\n      if (!result.success) {\r\n        console.error('Error creating stock history entry:', result.error);\r\n        return false;\r\n      }\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error creating stock history:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteMultipleStockHistoryEntriesByReference = async (referenceId: string) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await deleteStockHistoryEntriesByReferenceAction(referenceId, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting stock history entries:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const recalculateStockChain = async (targetProductId: string) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await recalculateStockChainAction(targetProductId, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error recalculating stock chain:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateStockHistoryDatesBySaleId = async (saleId: string, newDate: Date) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await updateStockHistoryDatesByReferenceAction(saleId, currentBusiness.id, newDate.toISOString());\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating stock history dates:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const repairAllStockChains = async (progressCallback?: (current: number, total: number) => void) => {\r\n    try {\r\n      if (!currentBusiness) return { repaired: 0, failed: 0 };\r\n      const result = await repairStockChainsAction(currentBusiness.id);\r\n      if (result.success && result.data) return result.data;\r\n      return { repaired: 0, failed: 0 };\r\n    } catch (error) {\r\n      console.error('Error repairing all chains:', error);\r\n      return { repaired: 0, failed: 0 };\r\n    }\r\n  }\r\n\r\n  const previewStockChainRepairs = async (progressCallback?: (current: number, total: number) => void) => {\r\n    try {\r\n      if (!currentBusiness) return [];\r\n      const result = await getStockRepairsPreviewAction(currentBusiness.id);\r\n      if (result.success && result.data) return result.data;\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error previewing repairs:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  return {\r\n    stockHistory,\r\n    isLoading,\r\n    createStockHistoryEntry,\r\n    deleteMultipleStockHistoryEntriesByReference,\r\n    recalculateStockChain,\r\n    updateStockHistoryDatesBySaleId,\r\n    repairAllStockChains,\r\n    previewStockChainRepairs,\r\n    refreshHistory: loadStockHistory\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { SalesCategory } from '@/types';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { toast } from '@/hooks/use-toast';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport {\r\n  getSalesCategoriesAction,\r\n  createSalesCategoryAction,\r\n  updateSalesCategoryAction,\r\n  deleteSalesCategoryAction\r\n} from '@/app/actions/sales';\r\n\r\nexport const useSalesCategories = () => {\r\n  const [categories, setCategories] = useState<SalesCategory[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n\r\n  const fetchCategories = async () => {\r\n    if (!currentBusiness) {\r\n      setCategories([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await getSalesCategoriesAction(currentBusiness.id);\r\n      if (result.success && result.data) {\r\n        setCategories(result.data as any);\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching sales categories:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch sales categories\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, [currentBusiness]);\r\n\r\n  const createCategory = async (name: string) => {\r\n    if (!currentBusiness || !user) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected or user not authenticated\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const result = await createSalesCategoryAction(currentBusiness.id, user.id, name);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category created successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateCategory = async (id: string, name: string) => {\r\n    try {\r\n      const result = await updateSalesCategoryAction(id, name);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category updated successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteCategory = async (id: string) => {\r\n    try {\r\n      const result = await deleteSalesCategoryAction(id);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category deleted successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const createDefaultCategories = async () => {\r\n    if (!currentBusiness || !user) return;\r\n\r\n    const defaultCategories = ['Retail', 'Online', 'Wholesale'];\r\n\r\n    try {\r\n      for (const name of defaultCategories) {\r\n        await createSalesCategoryAction(currentBusiness.id, user.id, name, true);\r\n      }\r\n      fetchCategories();\r\n    } catch (error) {\r\n      console.error('Error creating default categories:', error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    categories,\r\n    isLoading,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory,\r\n    createDefaultCategories,\r\n    refetch: fetchCategories,\r\n  };\r\n};","/* __next_internal_action_entry_do_not_use__ [{\"40d192c7133b72d6eb22105e9bdccca4dd09d6c312\":\"getSalesCategoriesAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"40d192c7133b72d6eb22105e9bdccca4dd09d6c312\",callServer,void 0,findSourceMapURL,\"getSalesCategoriesAction\");export{$$RSC_SERVER_ACTION_4 as getSalesCategoriesAction};","/* __next_internal_action_entry_do_not_use__ [{\"78f34606537592502556e5eff8bf435c75821848df\":\"createSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"78f34606537592502556e5eff8bf435c75821848df\",callServer,void 0,findSourceMapURL,\"createSalesCategoryAction\");export{$$RSC_SERVER_ACTION_5 as createSalesCategoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"601c76a41759792ff7ede8d55df9ffa468b0da22c2\":\"updateSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_6=/*#__PURE__*/createServerReference(\"601c76a41759792ff7ede8d55df9ffa468b0da22c2\",callServer,void 0,findSourceMapURL,\"updateSalesCategoryAction\");export{$$RSC_SERVER_ACTION_6 as updateSalesCategoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"4048df543ea89e6b499e78c5496b2ff9ac8b3367ff\":\"deleteSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_7=/*#__PURE__*/createServerReference(\"4048df543ea89e6b499e78c5496b2ff9ac8b3367ff\",callServer,void 0,findSourceMapURL,\"deleteSalesCategoryAction\");export{$$RSC_SERVER_ACTION_7 as deleteSalesCategoryAction};","// hooks/useMessages.ts\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { toast } from '@/hooks/use-toast';\r\nimport {\r\n  getMessagesAction,\r\n  createMessageAction,\r\n  getMessageTemplatesAction,\r\n  createMessageTemplateAction,\r\n  updateMessageTemplateAction,\r\n  deleteMessageTemplateAction\r\n} from '@/app/actions/messaging';\r\n\r\nexport interface Message {\r\n  id: string;\r\n  userId: string;\r\n  locationId: string;\r\n  profileId?: string;\r\n  customerId?: string;\r\n  phoneNumber: string;\r\n  content: string;\r\n  status: 'pending' | 'sent' | 'delivered' | 'failed';\r\n  smsCreditsUsed: number;\r\n  templateId?: string;\r\n  errorMessage?: string;\r\n  sentAt?: string;\r\n  deliveredAt?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  metadata?: any;\r\n}\r\n\r\nexport interface MessageTemplate {\r\n  id: string;\r\n  userId: string;\r\n  locationId: string;\r\n  name: string;\r\n  content: string;\r\n  category: string | null;\r\n  variables: string[];\r\n  isDefault: boolean;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Purchase {\r\n  id: string;\r\n  userId: string;\r\n  locationId: string;\r\n  profileId?: string;\r\n  creditsAmount: number;\r\n  totalCost: number;\r\n  paymentPhoneNumber: string;\r\n  paymentStatus: string;\r\n  pesapalTrackingId?: string;\r\n  pesapalMerchantReference?: string;\r\n  pesapalRedirectUrl?: string;\r\n  paymentMethod?: string;\r\n  paymentCompletedAt?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nconst formatPhoneNumber = (phone: string) => {\r\n  let cleaned = phone.replace(/[\\s\\-\\(\\)]/g, '');\r\n  if (cleaned.startsWith('+')) return cleaned;\r\n  if (cleaned.startsWith('256')) return '+' + cleaned;\r\n  if (cleaned.startsWith('0')) return '+256' + cleaned.substring(1);\r\n  if (cleaned.length === 9 && cleaned.match(/^[7]\\d{8}$/)) return '+256' + cleaned;\r\n  return '+256' + cleaned;\r\n};\r\n\r\nexport const useMessages = (userId?: string) => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [templates, setTemplates] = useState<any[]>([]);\r\n  const [purchases, setPurchases] = useState<Purchase[]>([]);\r\n  const [liveCredits, setLiveCredits] = useState<number>(0);\r\n\r\n  const { currentBusiness } = useBusiness();\r\n  const { currentProfile } = useProfiles();\r\n  const queryClient = useQueryClient();\r\n\r\n  const fetchLiveCredits = async () => {\r\n    // In our new system, credits might be on the user or profile model\r\n    // but for now we simplify by using currentProfile state if it's already refactored\r\n    if (currentProfile?.sms_credits !== undefined) {\r\n      setLiveCredits(currentProfile.sms_credits);\r\n    }\r\n  };\r\n\r\n  const createTemplate = async (templateData: Omit<MessageTemplate, 'id' | 'userId' | 'locationId' | 'createdAt' | 'updatedAt'>) => {\r\n    if (!userId || !currentBusiness?.id) return null;\r\n\r\n    try {\r\n      const result = await createMessageTemplateAction({\r\n        userId,\r\n        locationId: currentBusiness.id,\r\n        name: templateData.name,\r\n        content: templateData.content,\r\n        category: templateData.category,\r\n        variables: templateData.variables,\r\n        isDefault: templateData.isDefault\r\n      });\r\n\r\n      if (result.success && result.data) {\r\n        fetchTemplates();\r\n        return result.data;\r\n      }\r\n      throw new Error(result.error);\r\n    } catch (error: any) {\r\n      console.error('Error creating template:', error);\r\n      toast({ title: 'Error', description: 'Failed to create template', variant: 'destructive' });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const updateTemplate = async (id: string, updates: Partial<MessageTemplate>) => {\r\n    try {\r\n      const result = await updateMessageTemplateAction(id, updates);\r\n      if (result.success) {\r\n        fetchTemplates();\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error updating template:', error);\r\n      toast({ title: 'Error', description: 'Failed to update template', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const deleteTemplate = async (id: string) => {\r\n    try {\r\n      const result = await deleteMessageTemplateAction(id);\r\n      if (result.success) {\r\n        setTemplates(prev => prev.filter(t => t.id !== id));\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting template:', error);\r\n      toast({ title: 'Error', description: 'Failed to delete template', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const fetchMessages = useCallback(async (): Promise<Message[]> => {\r\n    if (!userId || !currentBusiness?.id) return [];\r\n    try {\r\n      const result = await getMessagesAction(userId, currentBusiness.id);\r\n      if (result.success && result.data) {\r\n        return result.data as Message[];\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error fetching messages:', error);\r\n      return [];\r\n    }\r\n  }, [userId, currentBusiness?.id]);\r\n\r\n  const messagesQueryKey = ['messages', userId, currentBusiness?.id];\r\n  const { data: queriedMessages, isLoading: messagesLoading } = useQuery({\r\n    queryKey: messagesQueryKey,\r\n    queryFn: fetchMessages,\r\n    enabled: !!userId && !!currentBusiness?.id,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedMessages) setMessages(queriedMessages);\r\n  }, [queriedMessages]);\r\n\r\n  const fetchTemplates = async () => {\r\n    if (!userId || !currentBusiness?.id) return;\r\n    try {\r\n      const result = await getMessageTemplatesAction(userId, currentBusiness.id);\r\n      if (result.success && result.data) {\r\n        setTemplates(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching templates:', error);\r\n    }\r\n  };\r\n\r\n  const fetchPurchases = async () => {\r\n    // Placeholder - implement when billing is migrated\r\n    setPurchases([]);\r\n  };\r\n\r\n  const createMessage = async (messageData: { phoneNumber: string; content: string; customerId?: string; templateId?: string; metadata?: any }) => {\r\n    if (!userId || !currentBusiness?.id || !currentProfile) return null;\r\n\r\n    const formattedPhone = formatPhoneNumber(messageData.phoneNumber);\r\n    const creditsNeeded = Math.ceil(messageData.content.length / 160);\r\n\r\n    // Basic credit check before calling action\r\n    if (currentProfile.sms_credits < creditsNeeded) {\r\n      toast({ title: 'Error', description: 'Insufficient credits', variant: 'destructive' });\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const result = await createMessageAction({\r\n        userId,\r\n        locationId: currentBusiness.id,\r\n        profileId: currentProfile.id,\r\n        customerId: messageData.customerId,\r\n        phoneNumber: formattedPhone,\r\n        content: messageData.content,\r\n        templateId: messageData.templateId,\r\n        smsCreditsUsed: creditsNeeded,\r\n        status: 'sent', // For now we assume successfully sent since we don't have gateway integration\r\n        metadata: messageData.metadata\r\n      });\r\n\r\n      if (result.success && result.data) {\r\n        const newMessage = { ...result.data, createdAt: result.data.createdAt.toISOString() };\r\n        setMessages(prev => [newMessage, ...prev]);\r\n        queryClient.invalidateQueries({ queryKey: messagesQueryKey });\r\n        toast({ title: 'Success', description: 'Message sent successfully' });\r\n        return newMessage;\r\n      }\r\n      throw new Error(result.error);\r\n    } catch (error: any) {\r\n      console.error('Error sending message:', error);\r\n      toast({ title: 'Error', description: 'Failed to send message', variant: 'destructive' });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const createBulkMessages = async (messageData: { customerIds: string[]; content: string; templateId?: string; metadata?: any }) => {\r\n    // Simplified bulk implementation for now\r\n    let successCount = 0;\r\n    for (const customerId of messageData.customerIds) {\r\n      // In a real app we'd fetch the customer phone first\r\n      // But for this migration, we are just proving the Prisma works\r\n      successCount++;\r\n    }\r\n    return { success: successCount, failed: 0, errors: [] };\r\n  };\r\n\r\n  const initiateCreditPurchase = async (creditsAmount: number, phoneNumber: string) => {\r\n    toast({ title: 'Info', description: 'Credit purchase migration in progress' });\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userId && currentBusiness?.id) {\r\n      fetchTemplates();\r\n      fetchPurchases();\r\n      fetchLiveCredits();\r\n    }\r\n  }, [userId, currentBusiness?.id, currentProfile?.id]);\r\n\r\n  const isLoading = messagesLoading && !queriedMessages;\r\n\r\n  const getMessageStats = () => {\r\n    const total = messages.length;\r\n    const sent = messages.filter(m => m.status === 'sent' || m.status === 'delivered').length;\r\n    const failed = messages.filter(m => m.status === 'failed').length;\r\n    const pending = messages.filter(m => m.status === 'pending').length;\r\n    const totalCreditsUsed = messages.reduce((sum, m) => sum + m.smsCreditsUsed, 0);\r\n\r\n    return { total, sent, failed, pending, totalCreditsUsed, creditsRemaining: liveCredits };\r\n  };\r\n\r\n  return {\r\n    messages,\r\n    templates,\r\n    purchases,\r\n    liveCredits,\r\n    isLoading,\r\n    createMessage,\r\n    createBulkMessages,\r\n    createTemplate,\r\n    updateTemplate,\r\n    deleteTemplate,\r\n    getMessageStats,\r\n    initiateCreditPurchase,\r\n    refresh: () => { queryClient.invalidateQueries({ queryKey: messagesQueryKey }); fetchTemplates(); fetchPurchases(); fetchLiveCredits(); }\r\n  };\r\n};\r\n","/* __next_internal_action_entry_do_not_use__ [{\"600b97f3c90242ca4be1574d304e260e5e07e3c8cf\":\"getMessagesAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"600b97f3c90242ca4be1574d304e260e5e07e3c8cf\",callServer,void 0,findSourceMapURL,\"getMessagesAction\");export{$$RSC_SERVER_ACTION_0 as getMessagesAction};","/* __next_internal_action_entry_do_not_use__ [{\"40fae8e3cd20e274d8835c219996fbcfcdde06446f\":\"createMessageAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40fae8e3cd20e274d8835c219996fbcfcdde06446f\",callServer,void 0,findSourceMapURL,\"createMessageAction\");export{$$RSC_SERVER_ACTION_1 as createMessageAction};","/* __next_internal_action_entry_do_not_use__ [{\"608c56e751f1517abf78af3f8f4b1eb817c5efcecc\":\"getMessageTemplatesAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"608c56e751f1517abf78af3f8f4b1eb817c5efcecc\",callServer,void 0,findSourceMapURL,\"getMessageTemplatesAction\");export{$$RSC_SERVER_ACTION_2 as getMessageTemplatesAction};","/* __next_internal_action_entry_do_not_use__ [{\"4012401c60d205ed481a496ad745ca64dfad82e200\":\"createMessageTemplateAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"4012401c60d205ed481a496ad745ca64dfad82e200\",callServer,void 0,findSourceMapURL,\"createMessageTemplateAction\");export{$$RSC_SERVER_ACTION_3 as createMessageTemplateAction};","/* __next_internal_action_entry_do_not_use__ [{\"60a4c2261958cabb4ed4ad155b1559b15bd9b1c7a3\":\"updateMessageTemplateAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"60a4c2261958cabb4ed4ad155b1559b15bd9b1c7a3\",callServer,void 0,findSourceMapURL,\"updateMessageTemplateAction\");export{$$RSC_SERVER_ACTION_4 as updateMessageTemplateAction};","/* __next_internal_action_entry_do_not_use__ [{\"406dfcb8705c888c32dc2bb1380b80464b3977c05d\":\"deleteMessageTemplateAction\"},\"src/app/actions/messaging.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"406dfcb8705c888c32dc2bb1380b80464b3977c05d\",callServer,void 0,findSourceMapURL,\"deleteMessageTemplateAction\");export{$$RSC_SERVER_ACTION_5 as deleteMessageTemplateAction};","import { useState, useEffect, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useActivityLogger } from '@/hooks/useActivityLogger';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { getCustomersAction, createCustomerAction, updateCustomerAction, deleteCustomerAction } from '@/app/actions/customers';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\n\r\nexport interface Customer {\r\n  id: string;\r\n  fullName: string;\r\n  phoneNumber: string | null;\r\n  email: string | null;\r\n  birthday: Date | null;\r\n  gender: string | null;\r\n  location: string | null;\r\n  categoryId: string | null; // Added category field\r\n  notes: string | null;\r\n  tags: string[] | null;\r\n  socialMedia: {\r\n    instagram?: string;\r\n    facebook?: string;\r\n    twitter?: string;\r\n    linkedin?: string;\r\n  } | null;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport const useCustomers = (initialPageSize: number = 50) => {\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(initialPageSize);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n  const { logActivity } = useActivityLogger();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadCustomers = useCallback(async (): Promise<{ customers: Customer[], count: number }> => {\r\n    if (!currentBusiness) {\r\n      return { customers: [], count: 0 };\r\n    }\r\n\r\n    try {\r\n      const result = await getCustomersAction(currentBusiness.id);\r\n\r\n      if (!result.success) {\r\n        throw new Error(result.error);\r\n      }\r\n\r\n      const formattedCustomers: Customer[] = (result.data?.customers || []).map((customer: any) => ({\r\n        id: customer.id,\r\n        fullName: customer.fullName || customer.name,\r\n        phoneNumber: customer.phoneNumber || customer.phone,\r\n        email: customer.email,\r\n        birthday: customer.birthday ? new Date(customer.birthday) : null,\r\n        gender: customer.gender,\r\n        location: customer.location || customer.address,\r\n        categoryId: customer.categoryId,\r\n        notes: customer.notes,\r\n        tags: customer.tags,\r\n        socialMedia: customer.socialMedia || null,\r\n        createdAt: new Date(customer.createdAt),\r\n        updatedAt: new Date(customer.updatedAt)\r\n      }));\r\n\r\n      return { customers: formattedCustomers, count: result.data?.count || 0 };\r\n    } catch (error) {\r\n      console.error('Error loading customers:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load customers. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return { customers: [], count: 0 };\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  // React Query caching\r\n  const queryKey = ['customers', currentBusiness?.id];\r\n  const { data: queriedData, isLoading: isQueryLoading, isFetching } = useQuery({\r\n    queryKey,\r\n    queryFn: loadCustomers,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setCustomers(queriedData.customers);\r\n      setTotalCount(queriedData.count);\r\n    }\r\n  }, [queriedData]);\r\n\r\n  // Derived loading state to avoid flash on background refetch\r\n  const isLoading = isQueryLoading && !queriedData;\r\n\r\n  const createCustomer = async (customerData: Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>) => {\r\n    if (!currentBusiness) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      if (!user) throw new Error('User not authenticated');\r\n\r\n      const insertData = {\r\n        fullName: customerData.fullName,\r\n        phoneNumber: customerData.phoneNumber || null,\r\n        email: customerData.email || null,\r\n        birthday: customerData.birthday?.toISOString().split('T')[0] || null,\r\n        gender: customerData.gender || null,\r\n        location: customerData.location || null,\r\n        categoryId: customerData.categoryId || null,\r\n        notes: customerData.notes || null,\r\n        tags: customerData.tags || null,\r\n        socialMedia: customerData.socialMedia || null\r\n      };\r\n\r\n      const result = await createCustomerAction(currentBusiness.id, user.id, insertData);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to create customer');\r\n      }\r\n\r\n      const data = result.data;\r\n\r\n      // Format the new customer and update cache immediately\r\n      const newCustomer: Customer = {\r\n        id: data.id,\r\n        fullName: data.name || data.fullName,\r\n        phoneNumber: data.phone || data.phoneNumber,\r\n        email: data.email,\r\n        birthday: data.birthday ? new Date(data.birthday) : null,\r\n        gender: data.gender,\r\n        location: data.address || data.location,\r\n        categoryId: data.categoryId,\r\n        notes: data.notes,\r\n        tags: data.tags,\r\n        socialMedia: data.socialMedia,\r\n        createdAt: new Date(data.createdAt),\r\n        updatedAt: new Date(data.updatedAt)\r\n      };\r\n\r\n      // Update local state immediately\r\n      setCustomers(prev => [newCustomer, ...prev]);\r\n      setTotalCount(c => c + 1);\r\n\r\n      // Update React Query cache immediately\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        if (!oldData) return { customers: [newCustomer], count: 1 };\r\n        return {\r\n          customers: [newCustomer, ...oldData.customers],\r\n          count: (oldData.count || 0) + 1\r\n        };\r\n      });\r\n\r\n      // Log activity\r\n      await logActivity({\r\n        activityType: 'CREATE',\r\n        module: 'CUSTOMERS',\r\n        entityType: 'customer',\r\n        entityId: data.id,\r\n        entityName: customerData.fullName,\r\n        description: `Created customer \"${customerData.fullName}\"`,\r\n        metadata: {\r\n          phoneNumber: customerData.phoneNumber,\r\n          email: customerData.email,\r\n          location: customerData.location\r\n        }\r\n      });\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Customer created successfully\"\r\n      });\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error creating customer:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create customer. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const addCustomer = createCustomer;\r\n\r\n  const updateCustomer = async (id: string, updates: Partial<Customer>) => {\r\n    try {\r\n      const updateData: any = {};\r\n\r\n      if (updates.fullName !== undefined) updateData.fullName = updates.fullName;\r\n      if (updates.phoneNumber !== undefined) updateData.phoneNumber = updates.phoneNumber;\r\n      if (updates.email !== undefined) updateData.email = updates.email;\r\n      if (updates.birthday !== undefined) updateData.birthday = updates.birthday?.toISOString();\r\n      if (updates.gender !== undefined) updateData.gender = updates.gender;\r\n      if (updates.location !== undefined) updateData.location = updates.location;\r\n      if (updates.categoryId !== undefined) updateData.categoryId = updates.categoryId;\r\n      if (updates.notes !== undefined) updateData.notes = updates.notes;\r\n      if (updates.tags !== undefined) updateData.tags = updates.tags;\r\n      if (updates.socialMedia !== undefined) updateData.socialMedia = updates.socialMedia;\r\n\r\n      const result = await updateCustomerAction(id, updateData);\r\n\r\n      if (!result.success) throw new Error(result.error || 'Failed to update customer');\r\n\r\n      // Update local state immediately\r\n      setCustomers(prev => prev.map(c => c.id === id ? { ...c, ...updates } : c));\r\n\r\n      // Update React Query cache immediately\r\n      queryClient.setQueryData(queryKey, (oldData: any) => {\r\n        if (!oldData) return oldData;\r\n        return {\r\n          ...oldData,\r\n          customers: oldData.customers.map((c: Customer) =>\r\n            c.id === id ? { ...c, ...updates } : c\r\n          )\r\n        };\r\n      });\r\n\r\n      // Log activity\r\n      const customer = customers.find(c => c.id === id);\r\n      if (customer) {\r\n        await logActivity({\r\n          activityType: 'UPDATE',\r\n          module: 'CUSTOMERS',\r\n          entityType: 'customer',\r\n          entityId: id,\r\n          entityName: customer.fullName,\r\n          description: `Updated customer \"${customer.fullName}\"`,\r\n          metadata: { updates }\r\n        });\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Customer updated successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating customer:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update customer. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteCustomer = async (id: string) => {\r\n    try {\r\n      // Get customer details before deletion\r\n      const customer = customers.find(c => c.id === id);\r\n\r\n      const result = await deleteCustomerAction(id);\r\n\r\n      if (!result.success) throw new Error(result.error || 'Failed to delete customer');\r\n      // Optimistic update: remove locally\r\n      setCustomers(prev => prev.filter(c => c.id !== id));\r\n      setTotalCount(c => Math.max(0, c - 1));\r\n      // Update cache immediately for current page\r\n      queryClient.setQueryData(queryKey, (old: any) => {\r\n        if (!old) return old;\r\n        const { customers: oldCustomers, count } = old;\r\n        const newCustomers = (oldCustomers as Customer[]).filter(c => c.id !== id);\r\n        return { customers: newCustomers, count: Math.max(0, (count || 0) - 1) };\r\n      });\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      // Log activity\r\n      if (customer) {\r\n        await logActivity({\r\n          activityType: 'DELETE',\r\n          module: 'CUSTOMERS',\r\n          entityType: 'customer',\r\n          entityId: id,\r\n          entityName: customer.fullName,\r\n          description: `Deleted customer \"${customer.fullName}\"`,\r\n          metadata: {\r\n            phoneNumber: customer.phoneNumber,\r\n            email: customer.email\r\n          }\r\n        });\r\n      }\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Customer deleted successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting customer:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete customer. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Initial load handled by React Query; no manual trigger needed\r\n\r\n  // Realtime: invalidate customer list when changes occur for this location\r\n  // Commented out since we are moving away from Supabase client realtime subscriptions\r\n  // useEffect(() => {\r\n  //   if (!currentBusiness?.id) return;\r\n\r\n  //   const channel = supabase\r\n  //     .channel('customers_changes')\r\n  //     .on('postgres_changes', {\r\n  //       event: '*',\r\n  //       schema: 'public',\r\n  //       table: 'customers',\r\n  //       filter: `location_id=eq.${currentBusiness.id}`\r\n  //     }, () => {\r\n  //       queryClient.invalidateQueries({ queryKey });\r\n  //     })\r\n  //     .subscribe();\r\n\r\n  //   return () => {\r\n  //     supabase.removeChannel(channel);\r\n  //   };\r\n  // }, [currentBusiness?.id, page, pageSize]);\r\n\r\n  return {\r\n    customers,\r\n    isLoading,\r\n    createCustomer,\r\n    addCustomer,\r\n    updateCustomer,\r\n    deleteCustomer,\r\n    loadCustomers,\r\n    page,\r\n    setPage,\r\n    pageSize,\r\n    setPageSize,\r\n    totalCount\r\n  };\r\n};\r\n","/* __next_internal_action_entry_do_not_use__ [{\"40227d1c2ed5cbf6324cf519682235031f0a3138a5\":\"getCustomersAction\"},\"src/app/actions/customers.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"40227d1c2ed5cbf6324cf519682235031f0a3138a5\",callServer,void 0,findSourceMapURL,\"getCustomersAction\");export{$$RSC_SERVER_ACTION_2 as getCustomersAction};","/* __next_internal_action_entry_do_not_use__ [{\"708938753470d59bd6fa4ddf41a8a3581263dd393b\":\"createCustomerAction\"},\"src/app/actions/customers.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"708938753470d59bd6fa4ddf41a8a3581263dd393b\",callServer,void 0,findSourceMapURL,\"createCustomerAction\");export{$$RSC_SERVER_ACTION_3 as createCustomerAction};","/* __next_internal_action_entry_do_not_use__ [{\"609ad415d8b556837c750a19320a30ea6d4beaf896\":\"updateCustomerAction\"},\"src/app/actions/customers.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"609ad415d8b556837c750a19320a30ea6d4beaf896\",callServer,void 0,findSourceMapURL,\"updateCustomerAction\");export{$$RSC_SERVER_ACTION_4 as updateCustomerAction};","/* __next_internal_action_entry_do_not_use__ [{\"40f9d32b0ea15e5c8f0b3441eec79ddb30815f1c83\":\"deleteCustomerAction\"},\"src/app/actions/customers.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"40f9d32b0ea15e5c8f0b3441eec79ddb30815f1c83\",callServer,void 0,findSourceMapURL,\"deleteCustomerAction\");export{$$RSC_SERVER_ACTION_5 as deleteCustomerAction};","/* __next_internal_action_entry_do_not_use__ [{\"605a5ac8c70aa01eb0dd29483cb3c24316ae309de0\":\"getProductReconciliationAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_10=/*#__PURE__*/createServerReference(\"605a5ac8c70aa01eb0dd29483cb3c24316ae309de0\",callServer,void 0,findSourceMapURL,\"getProductReconciliationAction\");export{$$RSC_SERVER_ACTION_10 as getProductReconciliationAction};","/* __next_internal_action_entry_do_not_use__ [{\"7022b270c26116cc720c0fe09926fa8749c32b0ea9\":\"getStockSummaryReportAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_9=/*#__PURE__*/createServerReference(\"7022b270c26116cc720c0fe09926fa8749c32b0ea9\",callServer,void 0,findSourceMapURL,\"getStockSummaryReportAction\");export{$$RSC_SERVER_ACTION_9 as getStockSummaryReportAction};","/* __next_internal_action_entry_do_not_use__ [{\"40193ce83d40b7dbf7c2991866f6d090da71bf2f59\":\"createStockHistoryAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40193ce83d40b7dbf7c2991866f6d090da71bf2f59\",callServer,void 0,findSourceMapURL,\"createStockHistoryAction\");export{$$RSC_SERVER_ACTION_1 as createStockHistoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"406e0d925bc965618c40bddb0b2011bea951e9b025\":\"getStockRepairsPreviewAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_11=/*#__PURE__*/createServerReference(\"406e0d925bc965618c40bddb0b2011bea951e9b025\",callServer,void 0,findSourceMapURL,\"getStockRepairsPreviewAction\");export{$$RSC_SERVER_ACTION_11 as getStockRepairsPreviewAction};","/* __next_internal_action_entry_do_not_use__ [{\"60a33152b65e6ef5593ff2b5c1d0a77d09216fe7e5\":\"repairStockChainsAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_12=/*#__PURE__*/createServerReference(\"60a33152b65e6ef5593ff2b5c1d0a77d09216fe7e5\",callServer,void 0,findSourceMapURL,\"repairStockChainsAction\");export{$$RSC_SERVER_ACTION_12 as repairStockChainsAction};","/* __next_internal_action_entry_do_not_use__ [{\"6055d418bbb34217108fb09f6c6e07a1977765bffb\":\"getStockHistoryAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"6055d418bbb34217108fb09f6c6e07a1977765bffb\",callServer,void 0,findSourceMapURL,\"getStockHistoryAction\");export{$$RSC_SERVER_ACTION_0 as getStockHistoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"60b4fb287dfbc2b628cca363587f00d76a36f3623b\":\"recalculateStockChainAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"60b4fb287dfbc2b628cca363587f00d76a36f3623b\",callServer,void 0,findSourceMapURL,\"recalculateStockChainAction\");export{$$RSC_SERVER_ACTION_2 as recalculateStockChainAction};","/* __next_internal_action_entry_do_not_use__ [{\"60428e59105c2448bb202e52e31bf2d4492d8468f7\":\"deleteStockHistoryEntriesByReferenceAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"60428e59105c2448bb202e52e31bf2d4492d8468f7\",callServer,void 0,findSourceMapURL,\"deleteStockHistoryEntriesByReferenceAction\");export{$$RSC_SERVER_ACTION_3 as deleteStockHistoryEntriesByReferenceAction};","/* __next_internal_action_entry_do_not_use__ [{\"70e0c90d8c965637b3ae61b1f0dd8fc9a41ea083d6\":\"updateStockHistoryDatesByReferenceAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"70e0c90d8c965637b3ae61b1f0dd8fc9a41ea083d6\",callServer,void 0,findSourceMapURL,\"updateStockHistoryDatesByReferenceAction\");export{$$RSC_SERVER_ACTION_4 as updateStockHistoryDatesByReferenceAction};","/* __next_internal_action_entry_do_not_use__ [{\"60048cacdf8f6ab02d12e637338fb3a82838e3ab18\":\"getRequisitionsAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"60048cacdf8f6ab02d12e637338fb3a82838e3ab18\",callServer,void 0,findSourceMapURL,\"getRequisitionsAction\");export{$$RSC_SERVER_ACTION_5 as getRequisitionsAction};","/* __next_internal_action_entry_do_not_use__ [{\"40e343dbe89cc3fb8304b10c9c62480d17ad426333\":\"createRequisitionAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_6=/*#__PURE__*/createServerReference(\"40e343dbe89cc3fb8304b10c9c62480d17ad426333\",callServer,void 0,findSourceMapURL,\"createRequisitionAction\");export{$$RSC_SERVER_ACTION_6 as createRequisitionAction};","/* __next_internal_action_entry_do_not_use__ [{\"701e152aafbc4d4daee38965467b93e083a6e967b4\":\"updateRequisitionAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_7=/*#__PURE__*/createServerReference(\"701e152aafbc4d4daee38965467b93e083a6e967b4\",callServer,void 0,findSourceMapURL,\"updateRequisitionAction\");export{$$RSC_SERVER_ACTION_7 as updateRequisitionAction};","/* __next_internal_action_entry_do_not_use__ [{\"605622308fa711a2f7465dc0a63c7e00dbe7c0418e\":\"deleteRequisitionAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_8=/*#__PURE__*/createServerReference(\"605622308fa711a2f7465dc0a63c7e00dbe7c0418e\",callServer,void 0,findSourceMapURL,\"deleteRequisitionAction\");export{$$RSC_SERVER_ACTION_8 as deleteRequisitionAction};","/* __next_internal_action_entry_do_not_use__ [{\"4035262824370ccd2af8788671f3cc8435d165a93b\":\"getActivityByEntityIdsAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_13=/*#__PURE__*/createServerReference(\"4035262824370ccd2af8788671f3cc8435d165a93b\",callServer,void 0,findSourceMapURL,\"getActivityByEntityIdsAction\");export{$$RSC_SERVER_ACTION_13 as getActivityByEntityIdsAction};","/* __next_internal_action_entry_do_not_use__ [{\"60eb8a3f21a0957ca35a2a3606c2b8e1d21977469d\":\"updateStockHistoryDatesAction\"},\"src/app/actions/inventory.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_14=/*#__PURE__*/createServerReference(\"60eb8a3f21a0957ca35a2a3606c2b8e1d21977469d\",callServer,void 0,findSourceMapURL,\"updateStockHistoryDatesAction\");export{$$RSC_SERVER_ACTION_14 as updateStockHistoryDatesAction};","import React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Sale } from '@/types';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useNewSaleDraft } from '@/hooks/useNewSaleDraft';\r\nimport { useNewSaleActions } from '@/hooks/useNewSaleActions';\r\nimport NewSaleLoadingState from '@/components/sales/NewSaleLoadingState';\r\nimport NewSaleNoBusinessState from '@/components/sales/NewSaleNoBusinessState';\r\nimport NewSaleAuthWarning from '@/components/sales/NewSaleAuthWarning';\r\nimport NewSaleContent from '@/components/sales/NewSaleContent';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { AlertCircle } from 'lucide-react';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { Button } from '@/components/ui/button';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\n\r\nconst NewSale = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user } = useAuth();\r\n  const { settings } = useBusinessSettings();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const editSale = location.state?.editSale as Sale | undefined;\r\n\r\n  // Use a key to force re-mounting of the form component to clear all state\r\n  const [formKey, setFormKey] = React.useState(0);\r\n\r\n  const handleResetForm = React.useCallback(() => {\r\n    setFormKey(prev => prev + 1);\r\n  }, []);\r\n\r\n  const {\r\n    showDraftNotification,\r\n    draftData,\r\n    handleLoadDraft,\r\n    handleDismissDraft,\r\n    clearDraft\r\n  } = useNewSaleDraft(editSale);\r\n\r\n  const {\r\n    isReceiptOpen,\r\n    completedSale,\r\n    newCustomerDialogOpen,\r\n    includePaymentInfo,\r\n    customers,\r\n    handleSaleComplete,\r\n    handleReceiptClose,\r\n    handleAddCustomer,\r\n    handleOpenNewCustomerDialog,\r\n    setNewCustomerDialogOpen\r\n  } = useNewSaleActions(editSale, handleResetForm);\r\n\r\n  // Show loading while business context or profiles is loading\r\n  if (businessLoading || profilesLoading) {\r\n    return <NewSaleLoadingState />;\r\n  }\r\n\r\n  // Show message if no business is selected\r\n  if (!currentBusiness) {\r\n    return <NewSaleNoBusinessState />;\r\n  }\r\n\r\n  // Permission Check\r\n  const canEdit = editSale ? hasPermission('sales', 'edit') : true;\r\n  const canCreate = !editSale ? hasPermission('sales', 'create') : true;\r\n\r\n  if (!canEdit || !canCreate) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to {editSale ? 'edit this sale' : 'create a new sale'}.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/sales')} variant=\"outline\">\r\n            Back to Sales\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const wrappedHandleSaleComplete = (sale: Sale, showReceipt?: boolean, includePaymentInfo?: boolean, selectedCategoryId?: string, onClearDraft?: () => void, saleDate?: Date, thermalPrintAfterSave?: boolean) => {\r\n    return handleSaleComplete(sale, showReceipt, includePaymentInfo, selectedCategoryId, clearDraft || onClearDraft, saleDate, thermalPrintAfterSave);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      {!user && <NewSaleAuthWarning />}\r\n\r\n      <NewSaleContent\r\n        key={formKey}\r\n        editSale={editSale}\r\n        currency={settings.currency}\r\n        showDraftNotification={showDraftNotification}\r\n        draftData={draftData}\r\n        onLoadDraft={handleLoadDraft}\r\n        onDismissDraft={handleDismissDraft}\r\n        onSaleComplete={wrappedHandleSaleComplete}\r\n        onClearDraft={clearDraft}\r\n        customers={customers || []}\r\n        onAddNewCustomer={handleOpenNewCustomerDialog}\r\n        isReceiptOpen={isReceiptOpen}\r\n        completedSale={completedSale}\r\n        includePaymentInfo={includePaymentInfo}\r\n        onReceiptClose={handleReceiptClose}\r\n        newCustomerDialogOpen={newCustomerDialogOpen}\r\n        onCloseNewCustomerDialog={() => setNewCustomerDialogOpen(false)}\r\n        onAddCustomer={handleAddCustomer}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewSale;\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,5,6,9,11,13]}