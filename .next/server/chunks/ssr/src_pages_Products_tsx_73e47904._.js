module.exports=[211946,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(665967),e=a.i(699570),f=a.i(915618),g=a.i(669520),h=a.i(284505),i=a.i(773320),j=a.i(781560),k=a.i(400210),l=a.i(771931),m=a.i(391956),n=a.i(169819),o=a.i(770094),p=a.i(368114),q=a.i(866102),r=a.i(243920),s=a.i(786304);let t=({product:a})=>0===a.quantity?(0,b.jsx)(s.Badge,{variant:"destructive",children:"Out of stock"}):a.quantity<=a.minimumStock?(0,b.jsx)(s.Badge,{variant:"warning",children:"Low stock"}):(0,b.jsx)(s.Badge,{variant:"success",children:"In stock"});var u=a.i(417755),v=a.i(824569),w=a.i(797063),x=a.i(890914),y=a.i(335732);let z=({product:a,onView:c,onEdit:d})=>{let{hasPermission:f}=(0,x.useProfiles)();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(y.DropdownMenu,{children:[(0,b.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"icon",children:[(0,b.jsx)(u.MoreHorizontal,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,b.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(y.DropdownMenuLabel,{children:"Actions"}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>c(a.id),children:[(0,b.jsx)(w.Info,{className:"mr-2 h-4 w-4"})," View details"]}),f("inventory","edit")&&(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>d(a.id),children:[(0,b.jsx)(v.Edit,{className:"mr-2 h-4 w-4"})," Edit"]})]})]})})};var A=a.i(315055),B=a.i(785259),C=a.i(400291);let D=({product:a,onView:c,onEdit:d,showAllFields:e=!0,enableBulkActions:f=!1,isSelected:g=!1,onToggleSelection:h})=>{let{settings:i}=(0,q.useBusinessSettings)(),{formatFinancial:j,canViewCostPrice:k,canViewSellingPrice:l,canViewProfit:m}=(0,C.useFinancialVisibility)(),n=a.quantity*a.costPrice;return(0,b.jsx)(B.TooltipProvider,{children:(0,b.jsxs)("div",{className:"py-4 px-4 hover:bg-gray-50 border-b last:border-b-0 rounded-md",onClick:()=>c(a.id),children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,b.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(A.Checkbox,{checked:g,onCheckedChange:()=>h?.(a.id),"aria-label":`Select ${a.name}`})}),(0,b.jsx)(r.default,{imageUrl:a.imageUrl,alt:a.name}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(B.Tooltip,{children:[(0,b.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("h3",{className:"font-medium text-sales-dark cursor-help max-w-[150px] truncate",children:a.name})}),(0,b.jsx)(B.TooltipContent,{side:"top",className:"max-w-xs",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",a.itemNumber]})]})]}),(0,b.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(z,{product:a,onView:c,onEdit:d})})]}),(0,b.jsxs)("div",{className:`grid grid-cols-2 gap-y-2.5 text-sm ${f?"ml-20":"ml-14"}`,children:[a.category&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Category:"}),(0,b.jsx)("div",{className:"font-normal",children:a.category})]}),(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Quantity:"}),(0,b.jsx)("div",{className:"font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Status:"}),(0,b.jsx)("div",{children:(0,b.jsx)(t,{product:a})}),void 0!==a.costPrice&&null!==a.costPrice&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Cost Price:"}),(0,b.jsx)("div",{className:"font-medium tabular-nums",children:k?`${i.currency} ${j(a.costPrice,"cost")}`:"•••"}),(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Total Cost:"}),(0,b.jsx)("div",{className:"font-medium tabular-nums",children:k?`${i.currency} ${(0,p.formatNumber)(n)}`:"•••"})]}),e&&void 0!==a.sellingPrice&&null!==a.sellingPrice&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-muted-foreground font-medium",children:"Selling Price:"}),(0,b.jsx)("div",{className:"font-medium tabular-nums",children:l?`${i.currency} ${j(a.sellingPrice,"selling")}`:"•••"})]})]})]})})};var E=a.i(206015),F=a.i(767552),G=a.i(405784);let H=({field:a,currentSortField:c,sortOrder:d,onSort:e,children:f,className:g})=>(0,b.jsx)(E.TableHead,{className:`cursor-pointer hover:bg-muted/80 ${g||""}`,onClick:()=>e(a),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[f,c===a&&(0,b.jsx)("div",{className:"ml-1",children:"asc"===d?(0,b.jsx)(F.ChevronUp,{className:"h-4 w-4"}):(0,b.jsx)(G.ChevronDown,{className:"h-4 w-4"})})]})});var I=a.i(256711),J=a.i(866718),K=a.i(580701),L=a.i(533441),M=a.i(633508);let N=({value:a,type:d,options:f=[],currency:g,onSave:h,className:i="",displayFormatter:j})=>{let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(a.toString()),[o,q]=(0,c.useState)(!1),r=b=>{b.stopPropagation(),l(!1),n(a.toString())},s=async a=>{a.stopPropagation(),q(!0);try{let a="number"===d?parseFloat(m)||0:m;await h(a)&&l(!1)}catch(a){console.error("Error saving:",a)}finally{q(!1)}};return k?(0,b.jsxs)("div",{className:"flex items-center gap-1",onClick:a=>a.stopPropagation(),children:["select"===d?(0,b.jsxs)(K.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(K.SelectTrigger,{className:"h-8 text-xs",children:(0,b.jsx)(K.SelectValue,{})}),(0,b.jsx)(K.SelectContent,{children:f.map(a=>(0,b.jsx)(K.SelectItem,{value:a,children:a},a))})]}):(0,b.jsx)(J.Input,{type:d,value:m,onChange:a=>n(a.target.value),onKeyDown:a=>{a.stopPropagation(),"Enter"===a.key?s(a):"Escape"===a.key&&r(a)},className:"h-8 text-xs",autoFocus:!0,step:"number"===d?"0.01":void 0}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:s,disabled:o,children:(0,b.jsx)(L.Check,{className:"h-3 w-3"})}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:r,disabled:o,children:(0,b.jsx)(M.X,{className:"h-3 w-3"})})]}):(0,b.jsxs)("div",{className:`group cursor-pointer flex items-center gap-2 ${i}`,onClick:b=>{b.stopPropagation(),l(!0),n(a.toString())},children:[(0,b.jsx)("span",{className:"flex-1",children:j?j(a):"number"===d&&g?`${g} ${(0,p.formatNumber)(a)}`:a.toString()}),(0,b.jsx)(v.Edit,{className:"h-3 w-3 opacity-0 group-hover:opacity-50 transition-opacity"})]})},O=({products:a,sortField:c,sortOrder:d,handleSort:e,onView:f,onEdit:g,showAllFields:h=!0,enableBulkActions:i=!1,selectedProductIds:j=new Set,onToggleProductSelection:k,onToggleAllProducts:l,onUpdateProduct:m,categories:n=[]})=>{let{settings:o}=(0,q.useBusinessSettings)(),{hasPermission:p}=(0,x.useProfiles)(),{canViewCostPrice:s,canViewSellingPrice:u,formatFinancial:v}=(0,C.useFinancialVisibility)(),w=p("inventory","edit"),y=a.map(a=>a.id),D=y.length>0&&y.every(a=>j.has(a));return h?(0,b.jsx)("div",{className:"overflow-hidden rounded-md border",children:(0,b.jsx)(B.TooltipProvider,{children:(0,b.jsxs)(E.Table,{children:[(0,b.jsx)(E.TableHeader,{children:(0,b.jsxs)(E.TableRow,{className:"bg-muted/50",children:[i&&(0,b.jsx)(E.TableHead,{className:"w-[50px]",children:(0,b.jsx)(A.Checkbox,{checked:D,onCheckedChange:()=>l?.(y),"aria-label":"Select all products"})}),(0,b.jsx)(E.TableHead,{className:"w-[80px]",children:"Image"}),(0,b.jsx)(H,{field:"itemNumber",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px]",children:"Item #"}),(0,b.jsx)(H,{field:"name",currentSortField:c,sortOrder:d,onSort:e,className:"w-[180px]",children:"Product Name"}),(0,b.jsx)(H,{field:"category",currentSortField:c,sortOrder:d,onSort:e,className:"w-[120px]",children:"Category"}),(0,b.jsx)(H,{field:"quantity",currentSortField:c,sortOrder:d,onSort:e,className:"w-[80px] text-right",children:"Quantity"}),(0,b.jsx)(E.TableHead,{className:"w-[80px]",children:"Status"}),s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H,{field:"costPrice",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px] text-right",children:"Cost Price"}),(0,b.jsx)(E.TableHead,{className:"w-[100px] text-right",children:"Total Cost"})]}),u&&(0,b.jsx)(H,{field:"sellingPrice",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px] text-right",children:"Selling Price"}),(0,b.jsx)(E.TableHead,{className:"w-[100px] text-center",children:"Created Date"}),(0,b.jsx)(E.TableHead,{className:"w-[80px] text-right",children:"Actions"})]})}),(0,b.jsx)(E.TableBody,{children:a.map(a=>(0,b.jsxs)(E.TableRow,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>f(a.id),children:[i&&(0,b.jsx)(E.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(A.Checkbox,{checked:j.has(a.id),onCheckedChange:()=>k?.(a.id),"aria-label":`Select ${a.name}`})}),(0,b.jsx)(E.TableCell,{children:(0,b.jsx)(r.default,{imageUrl:a.imageUrl,alt:a.name,size:"sm"})}),(0,b.jsx)(E.TableCell,{className:"font-mono text-sm max-w-[100px] truncate",children:(0,b.jsxs)(B.Tooltip,{children:[(0,b.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"cursor-help",children:a.itemNumber})}),(0,b.jsx)(B.TooltipContent,{children:(0,b.jsx)("p",{className:"font-mono",children:a.itemNumber})})]})}),(0,b.jsx)(E.TableCell,{className:"font-medium max-w-[180px] truncate",children:(0,b.jsxs)(B.Tooltip,{children:[(0,b.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"cursor-help",children:a.name})}),(0,b.jsx)(B.TooltipContent,{className:"max-w-xs",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]})}),(0,b.jsx)(E.TableCell,{className:"max-w-[120px]",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.category,type:"select",options:n,onSave:b=>m(a.id,{category:b})}):(0,b.jsx)("span",{className:"truncate",children:a.category})}),(0,b.jsx)(E.TableCell,{className:"text-right font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,b.jsx)(E.TableCell,{children:(0,b.jsx)(t,{product:a})}),s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.costPrice,type:"number",currency:o.currency,onSave:b=>m(a.id,{costPrice:b}),className:"text-right"}):(0,b.jsxs)("span",{children:[o.currency," ",v(a.costPrice,"cost")]})}),(0,b.jsxs)(E.TableCell,{className:"text-right font-medium tabular-nums",children:[o.currency," ",v(a.quantity*a.costPrice,"cost")]})]}),u&&(0,b.jsx)(E.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.sellingPrice,type:"number",currency:o.currency,onSave:b=>m(a.id,{sellingPrice:b}),className:"text-right"}):(0,b.jsxs)("span",{children:[o.currency," ",v(a.sellingPrice,"price")]})}),(0,b.jsx)(E.TableCell,{className:"text-center text-sm text-muted-foreground",children:(0,I.format)(a.createdAt,"MMM dd, yyyy")}),(0,b.jsx)(E.TableCell,{className:"text-right",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(z,{product:a,onView:f,onEdit:g})})]},a.id))})]})})}):(0,b.jsx)("div",{className:"overflow-hidden rounded-md border",children:(0,b.jsx)(B.TooltipProvider,{children:(0,b.jsxs)(E.Table,{children:[(0,b.jsx)(E.TableHeader,{children:(0,b.jsxs)(E.TableRow,{className:"bg-muted/50",children:[i&&(0,b.jsx)(E.TableHead,{className:"w-[50px]",children:(0,b.jsx)(A.Checkbox,{checked:D,onCheckedChange:()=>l?.(y),"aria-label":"Select all products"})}),(0,b.jsx)(E.TableHead,{className:"w-[80px]",children:"Image"}),(0,b.jsx)(H,{field:"itemNumber",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px]",children:"Item #"}),(0,b.jsx)(H,{field:"name",currentSortField:c,sortOrder:d,onSort:e,className:"w-[160px]",children:"Product Name"}),(0,b.jsx)(H,{field:"category",currentSortField:c,sortOrder:d,onSort:e,className:"w-[120px]",children:"Category"}),(0,b.jsx)(H,{field:"quantity",currentSortField:c,sortOrder:d,onSort:e,className:"w-[80px] text-right",children:"Quantity"}),(0,b.jsx)(E.TableHead,{className:"w-[80px]",children:"Status"}),s&&(0,b.jsx)(H,{field:"costPrice",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px] text-right",children:"Cost Price"}),u&&(0,b.jsx)(H,{field:"sellingPrice",currentSortField:c,sortOrder:d,onSort:e,className:"w-[100px] text-right",children:"Selling Price"}),(0,b.jsx)(E.TableHead,{className:"w-[100px] text-center",children:"Created Date"}),(0,b.jsx)(E.TableHead,{className:"w-[80px] text-right",children:"Actions"})]})}),(0,b.jsx)(E.TableBody,{children:a.map(a=>(0,b.jsxs)(E.TableRow,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>f(a.id),children:[i&&(0,b.jsx)(E.TableCell,{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(A.Checkbox,{checked:j.has(a.id),onCheckedChange:()=>k?.(a.id),"aria-label":`Select ${a.name}`})}),(0,b.jsx)(E.TableCell,{children:(0,b.jsx)(r.default,{imageUrl:a.imageUrl,alt:a.name,size:"sm"})}),(0,b.jsx)(E.TableCell,{className:"font-mono text-sm max-w-[100px] truncate",children:(0,b.jsxs)(B.Tooltip,{children:[(0,b.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"cursor-help",children:a.itemNumber})}),(0,b.jsx)(B.TooltipContent,{children:(0,b.jsx)("p",{className:"font-mono",children:a.itemNumber})})]})}),(0,b.jsx)(E.TableCell,{className:"font-medium max-w-[160px] truncate",children:(0,b.jsxs)(B.Tooltip,{children:[(0,b.jsx)(B.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:"cursor-help",children:a.name})}),(0,b.jsx)(B.TooltipContent,{className:"max-w-xs",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]})}),(0,b.jsx)(E.TableCell,{className:"max-w-[120px]",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.category,type:"select",options:n,onSave:b=>m(a.id,{category:b})}):(0,b.jsx)("span",{className:"truncate",children:a.category})}),(0,b.jsx)(E.TableCell,{className:"text-right font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,b.jsx)(E.TableCell,{children:(0,b.jsx)(t,{product:a})}),(0,b.jsx)(E.TableCell,{children:(0,b.jsx)(t,{product:a})}),s&&(0,b.jsx)(E.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.costPrice,type:"number",currency:o.currency,onSave:b=>m(a.id,{costPrice:b}),className:"text-right"}):(0,b.jsxs)("span",{children:[o.currency," ",v(a.costPrice,"cost")]})}),u&&(0,b.jsx)(E.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:m&&w?(0,b.jsx)(N,{value:a.sellingPrice,type:"number",currency:o.currency,onSave:b=>m(a.id,{sellingPrice:b}),className:"text-right"}):(0,b.jsxs)("span",{children:[o.currency," ",v(a.sellingPrice,"selling")]})}),(0,b.jsx)(E.TableCell,{className:"text-center text-sm text-muted-foreground",children:(0,I.format)(a.createdAt,"MMM dd, yyyy")}),(0,b.jsx)(E.TableCell,{className:"text-right",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(z,{product:a,onView:f,onEdit:g})})]},a.id))})]})})})};var P=a.i(883497);let Q=()=>{let a=(0,d.useNavigate)();return(0,b.jsxs)("div",{className:"text-center py-12 px-4 border-dashed border-2 rounded-lg bg-white",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-4",children:(0,b.jsx)(P.Package,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No products found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Start managing your inventory by adding your first product."}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)(e.Button,{onClick:()=>a("/inventory/new"),className:"gap-2",children:[(0,b.jsx)(f.Plus,{size:16})," Add New Product"]})})]})},R=({products:a,isLoading:e,showAllFields:f=!0,enableBulkActions:g=!1,selectedProductIds:h=new Set,onToggleProductSelection:i,onToggleAllProducts:j,sortField:k,sortOrder:l,onSort:m,onUpdateProduct:n,categories:p=[]})=>{let q=(0,d.useNavigate)(),r=(0,o.useIsMobile)(),[s,t]=c.default.useState("name"),[u,v]=c.default.useState("asc"),w=k||s,x=l||u,y=a=>{q(`/inventory/edit/${a}`)},z=a=>{q(`/inventory/${a}`)},A=c.default.useMemo(()=>[...a].sort((a,b)=>{let c=0;switch(w){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===x?c:-c}),[a,w,x]);if(e)return(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-pulse",children:"Loading inventory data..."})});if(0===a.length)return(0,b.jsx)(Q,{});if(r){let a=A.map(a=>a.id),c=a.length>0&&a.every(a=>h.has(a));return(0,b.jsxs)("div",{className:"space-y-4",children:[g&&A.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/30 rounded-md",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>j?.(a),className:"rounded border-gray-300",id:"mobile-select-all"}),(0,b.jsxs)("label",{htmlFor:"mobile-select-all",className:"text-sm font-medium",children:["Select All (",a.length,")"]})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[h.size," selected"]})]}),(0,b.jsx)("div",{className:"divide-y",children:A.map(a=>(0,b.jsx)(D,{product:a,onView:z,onEdit:y,showAllFields:f,enableBulkActions:g,isSelected:h.has(a.id),onToggleSelection:i},a.id))})]})}return(0,b.jsx)(O,{products:A,sortField:w,sortOrder:x,handleSort:a=>{m?m(a):w===a?v("asc"===x?"desc":"asc"):(t(a),v("asc"))},onView:z,onEdit:y,showAllFields:f,enableBulkActions:g,selectedProductIds:h,onToggleProductSelection:i,onToggleAllProducts:j,onUpdateProduct:n,categories:p})};var S=a.i(587532),T=a.i(581464),U=a.i(591119);let V=({filters:a,setFilters:d,categories:e,productsCount:f})=>{let g=(0,o.useIsMobile)(),[h,i]=c.default.useState(a.search);c.default.useEffect(()=>{a.search!==h&&i(a.search)},[a.search]);let j=(b,c)=>{d({...a,[b]:c})};return(0,b.jsx)(U.Card,{className:"mb-6 shadow-sm",children:(0,b.jsx)(U.CardContent,{className:(0,p.cn)("p-4",g&&"p-3"),children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center relative flex-grow",children:[(0,b.jsx)(S.Search,{className:"h-4 w-4 absolute left-3 text-gray-400"}),(0,b.jsx)(J.Input,{placeholder:"Search products...",className:"pl-9",value:h,onChange:a=>{i(a.target.value)},onKeyDown:a=>{"Enter"===a.key&&j("search",h)},onBlur:()=>{h!==a.search&&j("search",h)}})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsx)("div",{className:"min-w-[180px]",children:(0,b.jsxs)(K.Select,{value:a.category||"all",onValueChange:a=>j("category","all"===a?"":a),children:[(0,b.jsx)(K.SelectTrigger,{className:(0,p.cn)("w-full",""!==a.category&&"border-primary"),children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(T.Filter,{className:"h-4 w-4"}),(0,b.jsx)(K.SelectValue,{placeholder:"All Categories"})]})}),(0,b.jsxs)(K.SelectContent,{children:[(0,b.jsx)(K.SelectItem,{value:"all",children:"All Categories"}),e.map(a=>(0,b.jsx)(K.SelectItem,{value:a.name,children:a.name},a.id))]})]})}),(0,b.jsx)("div",{className:"min-w-[150px]",children:(0,b.jsxs)(K.Select,{value:a.stockStatus,onValueChange:a=>j("stockStatus",a),children:[(0,b.jsx)(K.SelectTrigger,{className:(0,p.cn)("all"!==a.stockStatus&&"border-primary"),children:(0,b.jsx)(K.SelectValue,{placeholder:"Stock Status"})}),(0,b.jsxs)(K.SelectContent,{children:[(0,b.jsx)(K.SelectItem,{value:"all",children:"All Stock"}),(0,b.jsx)(K.SelectItem,{value:"inStock",children:"In Stock"}),(0,b.jsx)(K.SelectItem,{value:"lowStock",children:"Low Stock"}),(0,b.jsx)(K.SelectItem,{value:"outOfStock",children:"Out of Stock"})]})]})}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)(s.Badge,{variant:"secondary",className:"text-xs",children:[f," ",1===f?"product":"products"," found"]})})]})]})})})};var W=a.i(895121),X=a.i(347778),Y=a.i(478793),Z=a.i(932596),$=a.i(371844),_=a.i(814574),aa=a.i(201699);let ab=({open:a,onOpenChange:c,selectedProducts:d,onConfirm:f,isDeleting:g,deletionProgress:h})=>{let i=h?Math.round(h.current/h.total*100):0,j=a=>{g||c(a)};return(0,b.jsx)(_.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(_.DialogContent,{className:"pointer-events-auto",children:[(0,b.jsxs)(_.DialogHeader,{children:[(0,b.jsx)(_.DialogTitle,{children:"Delete Selected Products"}),(0,b.jsxs)(_.DialogDescription,{children:["Are you sure you want to delete ",d.length," product",d.length>1?"s":"","? This action cannot be undone."]})]}),(0,b.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,b.jsx)("div",{className:"space-y-1",children:d.map(a=>(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["• ",a.name]},a.id))})}),g&&h&&(0,b.jsx)(aa.BulkOperationProgress,{title:"Deleting Products...",currentCount:h.current,totalCount:h.total,status:"processing"}),(0,b.jsxs)(_.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>j(!1),disabled:g,children:"Cancel"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:f,disabled:g,children:g?`Deleting... (${i}%)`:`Delete ${d.length} Product${d.length>1?"s":""}`})]})]})})};var ac=a.i(520606),ad=a.i(124348),ae=a.i(104720),af=a.i(292e3);let ag=a=>{let b=[],c="",d=!1,e=0;for(;e<a.length;){let f=a[e],g=a[e+1];if('"'===f)if(d&&'"'===g){c+='"',e+=2;continue}else d=!d;else","!==f||d?c+=f:(b.push(c.trim()),c="");e++}return b.push(c.trim()),b},ah=(a,b)=>{let c=[];return a["Item Number"]?.trim()||c.push({row:b,field:"Item Number",message:"Item Number is required for updates"}),a.Quantity&&""!==a.Quantity.trim()&&isNaN(Number(a.Quantity))&&c.push({row:b,field:"Quantity",message:"Quantity must be a number"}),a["Cost Price"]&&""!==a["Cost Price"].trim()&&isNaN(Number(a["Cost Price"]))&&c.push({row:b,field:"Cost Price",message:"Cost Price must be a number"}),a["Selling Price"]&&""!==a["Selling Price"].trim()&&isNaN(Number(a["Selling Price"]))&&c.push({row:b,field:"Selling Price",message:"Selling Price must be a number"}),c};var ai=a.i(973308);let aj=({open:a,onOpenChange:d,userId:f})=>{let{bulkUpdateProducts:g,detectNewCategories:j,isUpdating:k}=(a=>{let[b,d]=(0,c.useState)(!1),[e,f]=(0,c.useState)(null),{toast:g}=(0,Y.useToast)(),{products:h,updateProduct:i}=(0,X.useProducts)(a,1e4),{categories:j,createCategory:k}=(0,ai.useCategories)(a),l=a=>{let b=[],c=[];return a.forEach((a,d)=>{let e,f=a["Item Number"]?.trim(),g=f?.padStart(4,"0"),i=h.find(a=>a.itemNumber===f||a.itemNumber===g);if(!i)return void c.push(`Row ${d+1}: Product with Item Number "${f}" not found`);let j={};if(a.Name?.trim()&&a.Name.trim()!==i.name&&(j.name=a.Name.trim()),a.Category?.trim()&&a.Category.trim()!==i.category&&(j.category=a.Category.trim()),a.Quantity?.trim()!==""&&!isNaN(Number(a.Quantity))){let b=Number(a.Quantity);b!==i.quantity&&(j.quantity=b,e={oldQuantity:i.quantity,newQuantity:b})}if(a["Cost Price"]?.trim()!==""&&!isNaN(Number(a["Cost Price"]))){let b=Number(a["Cost Price"]);Math.abs(b-i.costPrice)>.001&&(j.costPrice=b)}if(a["Selling Price"]?.trim()!==""&&!isNaN(Number(a["Selling Price"]))){let b=Number(a["Selling Price"]);Math.abs(b-i.sellingPrice)>.001&&(j.sellingPrice=b)}a.Supplier?.trim()&&a.Supplier.trim()!==(i.supplier||"")&&(j.supplier=a.Supplier.trim()),a.Description?.trim()&&a.Description.trim()!==(i.description||"")&&(j.description=a.Description.trim()),a["Manufacturer Barcode"]?.trim()!==void 0&&a["Manufacturer Barcode"].trim()!==(i.manufacturerBarcode||"")&&(j.manufacturerBarcode=a["Manufacturer Barcode"].trim()),a.Barcode?.trim()!==void 0&&a.Barcode.trim()!==(i.barcode||"")&&(j.barcode=a.Barcode.trim()),Object.keys(j).length>0&&b.push({productId:i.id,itemNumber:i.itemNumber,updates:j,quantityChange:e})}),{validUpdates:b,errors:c}},m=a=>{let b=j.map(a=>a.name);return[...new Set(a.map(a=>a.Category?.trim()).filter(a=>a&&""!==a))].filter(a=>!b.includes(a))},n=async(a,b)=>{d(!0),f({current:0,total:a.length});try{let{validUpdates:c,errors:d}=l(a);if(d.length>0)throw Error(`Validation errors: ${d.join(", ")}`);for(let b of m(a))await k(b);let e=0,h=0;for(let a=0;a<c.length;a++){let d=c[a];try{console.log(`DEBUG: Calling updateProduct for ${d.itemNumber} with updates:`,d.updates);let a=await i(d.productId,d.updates,void 0,!1,"CSV Edit");console.log(`DEBUG: UpdateProduct result for ${d.itemNumber}: ${a}`),a?e++:h++}catch(a){console.error(`Error updating product ${d.itemNumber}:`,a),h++}let g=a+1;f({current:g,total:c.length}),b?.(g,c.length)}return e>0&&g({title:"Products updated successfully",description:`${e} product${e>1?"s":""} updated successfully`}),h>0&&g({title:"Some updates failed",description:`${h} product${h>1?"s":""} could not be updated`,variant:"destructive"}),{successCount:e,failureCount:h}}catch(a){throw console.error("Bulk update failed:",a),g({title:"Update failed",description:a instanceof Error?a.message:"An error occurred during the update",variant:"destructive"}),a}finally{d(!1),f(null)}};return{isUpdating:b,updateProgress:e,validateUpdates:l,detectNewCategories:m,bulkUpdateProducts:n}})(f),[l,m]=(0,c.useState)({step:"select",file:null,validRows:[],errors:[],totalRows:0,updateProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),n=(0,c.useRef)(null),[o,q]=(0,c.useState)(!1),r=async a=>{if(!a.name.endsWith(".csv"))return void alert("Please select a CSV file");let b=(a=>{let b=a.trim().split("\n"),c=ag(b[0]).map(a=>a.trim()),d=[],e=[];for(let a=1;a<b.length;a++){let f=ag(b[a]).map(a=>a.trim()),g={};c.forEach((a,b)=>{g[a]=f[b]||""});let h=ah(g,a+1);0===h.length?d.push(g):e.push(...h)}return{validRows:d,errors:e,totalRows:b.length-1}})(await a.text()),c=j(b.validRows);m({...l,step:"preview",file:a,validRows:b.validRows,errors:b.errors,totalRows:b.totalRows,newCategories:c})},t=async()=>{m(a=>({...a,step:"updating",updateProgress:0,currentProductIndex:0}));try{let a=await g(l.validRows,(a,b)=>{let c=Math.round(a/b*100);m(b=>({...b,updateProgress:c,currentProductIndex:a}))});m(b=>({...b,step:"complete",updateProgress:100,successCount:a.successCount,failureCount:a.failureCount,currentProductIndex:l.validRows.length}))}catch(a){console.error("Update failed:",a),m(a=>({...a,step:"complete",updateProgress:100,successCount:0,failureCount:l.validRows.length,currentProductIndex:l.validRows.length}))}};return(0,b.jsx)(_.Dialog,{open:a,onOpenChange:a=>{k||d(a)},children:(0,b.jsxs)(_.DialogContent,{className:"sm:max-w-[500px] pointer-events-auto",children:[(0,b.jsxs)(_.DialogHeader,{children:[(0,b.jsxs)(_.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(ae.FileText,{className:"h-5 w-5"}),"Update Products via CSV"]}),(0,b.jsx)(_.DialogDescription,{children:"Update existing products using a CSV file with Item Numbers for identification"})]}),"select"===l.step&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:(0,p.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors",o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDrop:a=>{a.preventDefault(),q(!1);let b=a.dataTransfer.files[0];b&&r(b)},onDragOver:a=>{a.preventDefault(),q(!0)},onDragLeave:()=>{q(!1)},onClick:()=>n.current?.click(),children:[(0,b.jsx)(i.Upload,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload CSV File for Product Updates"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Drag and drop your CSV file here, or click to browse"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Make sure the CSV includes Item Number column for product identification"})]}),(0,b.jsx)("input",{ref:n,type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];b&&r(b)},className:"hidden"})]}),"preview"===l.step&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)(U.Card,{children:(0,b.jsxs)(U.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.validRows.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Products to update"})]})}),(0,b.jsx)(U.Card,{children:(0,b.jsxs)(U.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:l.errors.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Errors found"})]})}),(0,b.jsx)(U.Card,{children:(0,b.jsxs)(U.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:l.totalRows}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total rows"})]})})]}),l.newCategories.length>0&&(0,b.jsxs)(ad.Alert,{children:[(0,b.jsx)(v.Edit,{className:"h-4 w-4"}),(0,b.jsx)(ad.AlertDescription,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{children:["The following ",l.newCategories.length," new categories will be created:"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:l.newCategories.map((a,c)=>(0,b.jsx)(s.Badge,{variant:"outline",className:"text-xs",children:a},c))})]})})]}),l.errors.length>0&&(0,b.jsxs)(ad.Alert,{variant:"destructive",children:[(0,b.jsx)(af.AlertCircle,{className:"h-4 w-4"}),(0,b.jsxs)(ad.AlertDescription,{children:[l.errors.length," rows have errors and will be skipped.",(0,b.jsxs)(e.Button,{variant:"link",className:"p-0 h-auto ml-2",onClick:()=>{let a,b,c;return a=new Blob([["Row,Field,Error Message",...l.errors.map(a=>[a.row,a.field,`"${a.message}"`].join(","))].join("\n")],{type:"text/csv"}),b=window.URL.createObjectURL(a),void((c=document.createElement("a")).href=b,c.download="product_update_errors.csv",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(b))},children:[(0,b.jsx)(h.Download,{className:"h-3 w-3 mr-1"}),"Download error log"]})]})]}),(0,b.jsxs)(ad.Alert,{children:[(0,b.jsx)(w.Info,{className:"h-4 w-4"}),(0,b.jsx)(ad.AlertDescription,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{children:(0,b.jsx)("strong",{children:"Update Rules:"})}),(0,b.jsxs)("ul",{className:"text-sm space-y-1 ml-2",children:[(0,b.jsx)("li",{children:"• Only fields with changes will be updated"}),(0,b.jsx)("li",{children:"• Empty fields will be ignored (no changes)"}),(0,b.jsx)("li",{children:"• Quantity changes will be tracked in stock history"}),(0,b.jsx)("li",{children:"• Products are identified by Item Number"})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>m(a=>({...a,step:"select"})),children:"Back"}),(0,b.jsxs)(e.Button,{onClick:t,disabled:0===l.validRows.length,children:["Update ",l.validRows.length," Products",l.newCategories.length>0&&` & Create ${l.newCategories.length} Categories`]})]})]}),"updating"===l.step&&(0,b.jsx)(aa.BulkOperationProgress,{title:"Updating Products...",currentCount:l.currentProductIndex,totalCount:l.validRows.length,status:"processing"}),"complete"===l.step&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(aa.BulkOperationProgress,{title:"Update Complete!",currentCount:l.currentProductIndex,totalCount:l.validRows.length,status:l.failureCount>0?"failed":"completed",successCount:l.successCount,failureCount:l.failureCount}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(e.Button,{onClick:()=>{if(k)return;let a="complete"===l.step&&l.successCount>0;m({step:"select",file:null,validRows:[],errors:[],totalRows:0,updateProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),d(!1),a&&setTimeout(()=>{window.location.reload()},100)},children:"Close"})})]})]})})};var ak=a.i(165385),al=a.i(563658),am=a.i(870430);let an=({open:a,onOpenChange:d,selectedProducts:f,onConfirm:g,isPrinting:h,printProgress:i})=>{let[j,k]=(0,c.useState)(!0),m=a=>{h||d(a)},n=f.length;return(0,b.jsx)(_.Dialog,{open:a,onOpenChange:m,children:(0,b.jsxs)(_.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(_.DialogHeader,{children:[(0,b.jsxs)(_.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Printer,{className:"h-5 w-5"}),"Print Barcode Labels"]}),(0,b.jsxs)(_.DialogDescription,{children:["You are about to print barcodes for ",n," product",n>1?"s":"","."]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ak.Settings2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(am.Label,{htmlFor:"bulk-print-price",className:"text-sm font-medium cursor-pointer",children:"Show Price on Label"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include selling price on each label"})]})]}),(0,b.jsx)(al.Switch,{id:"bulk-print-price",checked:j,onCheckedChange:k,disabled:h})]}),(0,b.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 bg-muted/10",children:(0,b.jsx)("div",{className:"space-y-1",children:f.map(a=>(0,b.jsxs)("div",{className:"text-xs text-muted-foreground truncate px-2 py-1",children:["• ",a.name," (",a.itemNumber,")"]},a.id))})})]}),h&&i&&(0,b.jsx)(aa.BulkOperationProgress,{title:"Printing Labels...",currentCount:i.current,totalCount:i.total,status:"processing"}),(0,b.jsxs)(_.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>m(!1),disabled:h,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:()=>g(j),disabled:h||0===n,className:"gap-2",children:h?`Printing... ${Math.round((i?.current||0)/(i?.total||1)*100)}%`:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Printer,{className:"h-4 w-4"}),"Print ",n," Label",n>1?"s":""]})})]})]})})},ao=({open:a,onOpenChange:d,productCount:f,onConfirm:g,isExporting:i})=>{let[j,k]=(0,c.useState)(!0),l=()=>{let a=Math.floor(4.085106382978723),b=Math.floor(8.71875);return{cols:a,rows:b,itemsPerPage:a*b}},{cols:m,rows:n,itemsPerPage:o}=l();return(0,b.jsx)(_.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(_.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(_.DialogHeader,{children:[(0,b.jsx)(_.DialogTitle,{children:"Export Barcodes to PDF"}),(0,b.jsx)(_.DialogDescription,{children:"Barcodes are automatically arranged on A4 paper (45mm × 30mm labels)."})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,b.jsx)("strong",{children:f})," product",1!==f?"s":""," with barcodes will be exported"]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(am.Label,{className:"text-base font-semibold",children:"Automatic Layout"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,b.jsxs)("p",{children:["• ",m," columns × ",n," rows"]}),(0,b.jsxs)("p",{children:["• ",o," barcodes per page"]}),(0,b.jsx)("p",{children:"• Fixed size: 45mm × 30mm"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(am.Label,{className:"text-sm font-medium",children:"Include Price"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show product price on each barcode"})]}),(0,b.jsx)(al.Switch,{checked:j,onCheckedChange:k})]}),(0,b.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,b.jsx)("strong",{children:"Estimated pages:"})," ",(()=>{let{itemsPerPage:a}=l();return Math.ceil(f/a)})()]})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>{g({showPrice:j})},disabled:i,className:"w-full gap-2",children:[(0,b.jsx)(h.Download,{className:"h-4 w-4"}),i?"Exporting...":"Export PDF"]}),(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>d(!1),disabled:i,className:"w-full",children:"Cancel"})]})]})})};var ap=a.i(972270),aq=a.i(150897),ar=a.i(3048),as=a.i(652647);a.s(["default",0,()=>{let a=(0,d.useNavigate)(),{user:r}=(0,m.useAuth)(),{currentBusiness:s,isLoading:t}=(0,n.useBusiness)(),{hasPermission:u}=(0,x.useProfiles)(),{toast:v}=(0,Y.useToast)(),w=(0,o.useIsMobile)(),z=u("inventory","create"),A=u("inventory","edit"),B=u("inventory","delete"),C=u("inventory","view"),{products:D,filteredProducts:E,isLoading:F,loadProducts:H,filters:I,setFilters:J,deleteProduct:K,updateProduct:L,page:M,setPage:N,pageSize:O,setPageSize:P,totalCount:Q,refetch:S,isFetching:T}=(0,X.useProducts)(r?.id,50),{categories:_}=(0,ai.useCategories)(r?.id),{bulkCreateProducts:aa}=(0,ap.useBulkProducts)(),{settings:ad}=(0,q.useBusinessSettings)(),[ae,af]=(0,c.useState)(new Set),[ag,ah]=(0,c.useState)(!1),[ak,al]=(0,c.useState)(!1),[am,at]=(0,c.useState)([]),[au,av]=(0,c.useState)(!1),[aw,ax]=(0,c.useState)(!1),[ay,az]=(0,c.useState)(!1),[aA,aB]=(0,c.useState)(!1),[aC,aD]=(0,c.useState)(!1),[aE,aF]=(0,c.useState)(!1),[aG,aH]=(0,c.useState)([]),[aI,aJ]=(0,c.useState)(void 0),[aK,aL]=(0,c.useState)(void 0),[aM,aN]=(0,c.useState)("name"),[aO,aP]=(0,c.useState)("asc"),[aQ,aR]=(0,c.useState)(void 0),[aS,aT]=(0,c.useState)(void 0),[aU,aV]=(0,c.useState)(void 0),[aW,aX]=(0,c.useState)(void 0);(0,c.useEffect)(()=>{let a=!1;return(async()=>{if(!r?.id||!s?.id)return;let b=`allProductsStats_${s.id}`,c=localStorage.getItem(b);try{if(c){let a=JSON.parse(c);if(Date.now()-a.ts<3e5){aR(a.costValue),aT(a.lowStock),aV(a.outOfStock),aX(a.stockValue);return}}}catch{}let d=await (0,ar.getProductStatsAction)(s.id);if(!a){aR(d.costValue),aT(d.lowStock),aV(d.outOfStock),aX(d.stockValue);try{localStorage.setItem(b,JSON.stringify({...d,ts:Date.now()}))}catch{}}})(),()=>{a=!0}},[r?.id,s?.id]);let aY=(0,c.useMemo)(()=>[...E].sort((a,b)=>{let c=0;switch(aM){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===aO?c:-c}),[E,aM,aO]),aZ=async()=>{await S(),af(new Set),v({title:"Products refreshed",description:"Your product list has been updated."})},a$=async()=>{if(!r?.id||!s?.id)return[];try{let a=await (0,ar.getAllProductsAction)(r.id,s.id);if(I.search){let b=I.search.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.description.toLowerCase().includes(b)||a.category.toLowerCase().includes(b)||a.supplier&&a.supplier.toLowerCase().includes(b)||a.itemNumber.toLowerCase().includes(b))}return I.category&&(a=a.filter(a=>a.category===I.category)),"outOfStock"===I.stockStatus?a=a.filter(a=>0===a.quantity):"inStock"===I.stockStatus?a=a.filter(a=>a.quantity>0):"lowStock"===I.stockStatus&&(a=a.filter(a=>a.quantity>0&&a.quantity<=a.minimumStock)),a.sort((a,b)=>{let c=0;switch(aM){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===aO?c:-c})}catch(a){return console.error("Error fetching all products for export:",a),v({title:"Export failed",description:"Failed to fetch products for export. Please try again.",variant:"destructive"}),[]}},a_=async()=>{v({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a$();if(a.length>0){let b,c,d,e,f,g,h,i;c=(b=localStorage.getItem("businessSettings"))?JSON.parse(b):{currency:"USD"},d=["Item Number","Name","Category","Quantity","Minimum Stock",`Cost Price (${c.currency})`,`Selling Price (${c.currency})`,"Supplier","Description","Created Date","Last Updated"],e=a.map(a=>[a.itemNumber,a.name,a.category,a.quantity.toString(),a.minimumStock.toString(),a.costPrice.toFixed(2),a.sellingPrice.toFixed(2),a.supplier||"N/A",a.description?a.description.replace(/,/g,";").replace(/\n/g," "):"N/A",new Date(a.createdAt).toLocaleDateString(),new Date(a.updatedAt).toLocaleDateString()]),f=[d.join(","),...e.map(a=>a.join(","))].join("\n"),g=`data:text/csv;charset=utf-8,${encodeURIComponent(f)}`,h=`products_${new Date().toISOString().slice(0,10)}.csv`,(i=document.createElement("a")).href=g,i.download=h,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),v({title:"Export successful",description:`${a.length} products exported to CSV file.`})}else v({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a0=async()=>{v({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a$();if(a.length>0){let b,c,d,e;b=["Item Number,Name,Category,Quantity,Cost Price,Selling Price,Supplier,Description",...a.map(a=>[a.itemNumber,a.name,a.category,a.quantity.toString(),a.costPrice.toString(),a.sellingPrice.toString(),a.supplier||"",a.description||""]).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n"),c=`data:text/csv;charset=utf-8,${encodeURIComponent(b)}`,d=`products_for_update_${new Date().toISOString().slice(0,10)}.csv`,(e=document.createElement("a")).href=c,e.download=d,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),v({title:"Export successful",description:`${a.length} products exported for editing. Use this file with 'Update via CSV'.`})}else v({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a1=async()=>{v({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a$();a.length>0?(((a,b)=>{let c=b||{businessName:"Your Business",businessAddress:"Business Address",businessPhone:"(123) 456-7890",businessEmail:"support@yourbusiness.com",currency:"USD"},d=new Z.default({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),e=d.internal.pageSize.getWidth(),f=d.internal.pageSize.getHeight(),g=e-10-10,h=10,i=()=>{d.setFontSize(8),d.setFont("helvetica","normal"),d.setTextColor(150,150,150),d.text("Created By Gonza Systems",e/2,f-10,{align:"center"}),d.setTextColor(0,0,0)},j=[20,55,30,25,25,25],k=["Item #","Product Name","Category","Qty",`Cost (${c.currency})`,`Price (${c.currency})`],l=()=>{d.setFillColor(243,244,246),d.rect(10,h-1,g,8,"F"),d.setLineWidth(.2),d.rect(10,h-1,g,8),d.setFontSize(8),d.setFont("helvetica","bold");let a=10;k.forEach((b,c)=>{let e=j[c],f=d.getTextWidth(b),g=a+(e-f)/2;d.text(b,g,h+5),c<k.length-1&&d.line(a+e,h-1,a+e,h+8-1),a+=e}),h+=8},m=a=>h+a>f-10-15&&(i(),d.addPage(),h=10,l(),d.setFont("helvetica","normal"),d.setFontSize(7),!0);d.setFontSize(14),d.setFont("helvetica","bold");let n=c.businessName||"Your Business",o=d.getTextWidth(n);if(d.text(n,(e-o)/2,h),h+=4,c.businessAddress){d.setFontSize(9),d.setFont("helvetica","normal");let a=d.getTextWidth(c.businessAddress);d.text(c.businessAddress,(e-a)/2,h),h+=3}if(c.businessPhone||c.businessEmail){d.setFontSize(8);let a=[c.businessPhone,c.businessEmail].filter(Boolean).join(" | "),b=d.getTextWidth(a);d.text(a,(e-b)/2,h),h+=3}h+=3,d.setFontSize(12),d.setFont("helvetica","bold");let q="Products Inventory Report",r=d.getTextWidth(q);d.text(q,(e-r)/2,h),h+=4,d.setFontSize(8),d.setFont("helvetica","normal");let s=new Date().toLocaleDateString(),t=`Generated on ${s}`,u=d.getTextWidth(t);d.text(t,(e-u)/2,h),h+=6;let v=a.length,w=a.filter(a=>a.quantity>0&&a.quantity<=a.minimumStock).length,x=a.filter(a=>0===a.quantity).length,y=a.reduce((a,b)=>a+b.costPrice*b.quantity,0);d.setFillColor(248,249,250),d.rect(10,h-2,g,15,"F"),d.setLineWidth(.2),d.setDrawColor(200,200,200),d.rect(10,h-2,g,15),d.setFontSize(9),d.setFont("helvetica","bold"),d.text("Inventory Summary",15,h+2),d.setFontSize(7),d.setFont("helvetica","normal");let z=[`Total: ${v}`,`Low Stock: ${w}`,`Out of Stock: ${x}`,`Total Value: ${c.currency} ${(0,p.formatNumber)(y)}`],A=h+6;z.forEach((a,b)=>{let c=15+b%2*(g/2);2===b&&(A+=3),d.text(a,c,A+3*Math.floor(b/2))}),h+=19,m(13),l(),d.setFont("helvetica","normal"),d.setFontSize(7),a.forEach((a,b)=>{m(8);let c=[a.itemNumber||"",a.name||"",a.category||"",a.quantity.toString(),(0,p.formatNumber)(a.costPrice),(0,p.formatNumber)(a.sellingPrice)];b%2==0&&(d.setFillColor(249,250,251),d.rect(10,h-1,g,6,"F")),0===a.quantity?(d.setFillColor(254,226,226),d.rect(10,h-1,g,6,"F")):a.quantity<=a.minimumStock&&(d.setFillColor(254,243,199),d.rect(10,h-1,g,6,"F")),d.setLineWidth(.1),d.rect(10,h-1,g,6);let e=10;c.forEach((a,b)=>{let f=j[b],g=a;if(1===b)for(;d.getTextWidth(g)>f-3&&g.length>3;)g=g.substring(0,g.length-4)+"...";else if(2===b)for(;d.getTextWidth(g)>f-3&&g.length>3;)g=g.substring(0,g.length-4)+"...";let i=e+1.5;if(b>=3){let a=d.getTextWidth(g);i=e+f-a-1.5}d.setTextColor(0,0,0),d.text(g,i,h+3.5),b<c.length-1&&d.line(e+f,h-1,e+f,h+6-1),e+=f}),h+=6}),h+=5,m(10),d.setFontSize(7),d.setFont("helvetica","italic"),d.setTextColor(100,100,100);let B=`This report contains ${a.length} products. Generated by ${c.businessName||"Inventory System"}`,C=d.getTextWidth(B);d.text(B,(e-C)/2,h),i();let D=`products-inventory-${new Date().toISOString().slice(0,10)}.pdf`;d.save(D)})(a,ad),v({title:"Export successful",description:`${a.length} products exported to PDF file.`})):v({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a2=()=>{(0,aq.generateProductCSVTemplate)(),v({title:"Template downloaded",description:"CSV template has been downloaded to your device."})},a3=async a=>{try{await aa(a),av(!1),await H()}catch(a){console.error("CSV upload failed:",a),v({title:"Upload failed",description:"There was an error uploading your products. Please try again.",variant:"destructive"})}},a4=async()=>{if(0===ae.size)return;az(!0),aJ({current:0,total:ae.size});let a=0,b=0,c=0;try{for(let d of ae){try{await K(d)?a++:b++}catch(a){b++,console.error(`Error deleting product ${d}:`,a)}c++,aJ({current:c,total:ae.size})}af(new Set),a>0&&v({title:"Products deleted",description:`Successfully deleted ${a} product${a>1?"s":""}`}),b>0&&v({title:"Some deletions failed",description:`${b} product${b>1?"s":""} could not be deleted`,variant:"destructive"}),ah(!1),await H()}finally{az(!1),aJ(void 0)}},a5=async(a=!1)=>{if(a){v({title:"Preparing for bulk print...",description:"Fetching all products matching current filters."});let a=await a$();if(0===a.length)return void v({title:"No products found",description:"There are no products matching your current filters to print.",variant:"destructive"});at(a)}else{if(0===ae.size)return void v({title:"No products selected",description:"Please select products to print or use 'Print All'.",variant:"destructive"});at(ba)}al(!0)},a6=async a=>{if(0===am.length)return;aB(!0),aL({current:0,total:am.length});let b=0,c=0;try{for(let d of am){if(!d.barcode){c++,aL(a=>a?{...a,current:a.current+1}:void 0);continue}try{let e=a?`TEXT 15,180,"3",0,1,1,"${ad.currency} ${(0,p.formatNumber)(d.sellingPrice)}"
`:"";(await fetch("http://localhost:5000/print/label",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({PrinterName:ad.defaultPrinterName||"Label Printer",Content:`SIZE 50 mm, 30 mm
GAP 3 mm, 0 mm
CLS
TEXT 15,20,"3",0,1,1,"${d.name}"
BARCODE 15,70,"128",60,1,0,2,2,"${d.barcode}"
${e}PRINT 1
`})})).ok?b++:c++}catch(a){console.error(`Failed to print label for ${d.name}:`,a),c++}aL(a=>a?{...a,current:a.current+1}:void 0),await new Promise(a=>setTimeout(a,100))}b>0&&v({title:"Printing successful",description:`Sent ${b} labels to the printer.`}),c>0&&v({title:"Some labels failed",description:`${c} labels could not be printed. Check your connection.`,variant:"destructive"}),al(!1)}finally{aB(!1),aL(void 0)}},a7=async(a=!1)=>{try{let b=[];if(a)v({title:"Preparing barcode export...",description:"Fetching all products matching current filters."}),b=await a$();else{if(0===ae.size)return void v({title:"No products selected",description:"Please select products to export barcodes.",variant:"destructive"});b=ba}let c=b.filter(a=>a.barcode);if(0===c.length)return void v({title:"No barcodes to export",description:"None of the selected products have barcodes.",variant:"destructive"});aH(c),aF(!0)}catch(a){console.error("Failed to prepare barcode export:",a),v({title:"Export preparation failed",description:"Failed to prepare products for export.",variant:"destructive"})}},a8=async a=>{aD(!0);try{v({title:"Generating PDF...",description:`Exporting ${aG.length} barcode${aG.length>1?"s":""}...`}),await (0,as.exportBulkBarcodesToPDF)(aG,{showPrice:a.showPrice,currency:ad.currency}),v({title:"Export successful",description:`${aG.length} barcode${aG.length>1?"s":""} exported to PDF.`}),aF(!1)}catch(a){console.error("Barcode export failed:",a),v({title:"Export failed",description:"Failed to export barcodes. Please try again.",variant:"destructive"})}finally{aD(!1)}},a9=async(a,b)=>{try{if(await L(a,b))return v({title:"Product updated",description:"Product details have been updated successfully."}),!0;return v({title:"Update failed",description:"Failed to update product. Please try again.",variant:"destructive"}),!1}catch(a){return console.error("Error updating product:",a),v({title:"Update failed",description:"An error occurred while updating the product.",variant:"destructive"}),!1}},ba=(0,c.useMemo)(()=>aY.filter(a=>ae.has(a.id)),[aY,ae]);return t||!s||F&&0===D.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,b.jsx)($.default,{}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading products..."})]}):(0,b.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[(0,b.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>a("/inventory"),className:"shrink-0 h-8 w-8",title:"Back to inventory",children:(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-lg md:text-2xl lg:text-3xl font-bold text-sales-dark",children:"Products"}),(0,b.jsx)("p",{className:"text-xs md:text-base text-muted-foreground",children:"Manage your product inventory and pricing"})]})]}),w?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[z&&(0,b.jsxs)(e.Button,{onClick:()=>a("/inventory/new"),className:"flex-1 gap-2 h-9",children:[(0,b.jsx)(f.Plus,{size:16})," Add Product"]}),(0,b.jsx)(e.Button,{onClick:aZ,variant:"outline",size:"icon",disabled:F||T,className:"shrink-0 h-9 w-9",children:(0,b.jsx)(g.RefreshCw,{className:`h-4 w-4 ${F||T?"animate-spin":""}`})})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a2,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(h.Download,{size:14})," Template"]}),(0,b.jsxs)(e.Button,{onClick:()=>av(!0),variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(i.Upload,{size:14})," Add CSV"]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a0,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(h.Download,{size:14})," Export for Editing"]}),(0,b.jsxs)(e.Button,{onClick:()=>ax(!0),variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(i.Upload,{size:14})," Update CSV"]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a_,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(h.Download,{size:14})," Full Export"]}),(0,b.jsxs)(e.Button,{onClick:a1,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,b.jsx)(h.Download,{size:14})," PDF"]})]})}),B&&ae.size>0&&(0,b.jsxs)(e.Button,{onClick:()=>ah(!0),variant:"destructive",className:"w-full gap-2 text-xs h-8",disabled:ay,children:[(0,b.jsx)(j.Trash2,{size:14})," Delete Selected (",ae.size,")"]}),A&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>a5(!1),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ae.size||aA,children:[(0,b.jsx)(l.Printer,{size:14})," Print Selected"]}),(0,b.jsxs)(e.Button,{onClick:()=>a5(!0),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===Q||aA,children:[(0,b.jsx)(l.Printer,{size:14})," Print All (",Q,")"]})]}),C&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>a7(!1),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ae.size||aC,children:[(0,b.jsx)(h.Download,{size:14})," Export Barcodes"]}),(0,b.jsxs)(e.Button,{onClick:()=>a7(!0),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===Q||aC,children:[(0,b.jsx)(h.Download,{size:14})," All Barcodes"]})]})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(e.Button,{onClick:aZ,variant:"outline",size:"icon",disabled:F||T,title:"Refresh products",children:(0,b.jsx)(g.RefreshCw,{className:`h-4 w-4 ${F||T?"animate-spin":""}`})}),z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a2,variant:"outline",className:"gap-2",children:[(0,b.jsx)(h.Download,{size:16})," CSV Template"]}),(0,b.jsxs)(e.Button,{onClick:()=>av(!0),variant:"outline",className:"gap-2",children:[(0,b.jsx)(i.Upload,{size:16})," Add via CSV"]})]}),A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a0,variant:"outline",className:"gap-2",children:[(0,b.jsx)(h.Download,{size:16})," Export for Editing"]}),(0,b.jsxs)(e.Button,{onClick:()=>ax(!0),variant:"outline",className:"gap-2",children:[(0,b.jsx)(i.Upload,{size:16})," Update via CSV"]})]}),C&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:a_,variant:"outline",className:"gap-2",children:[(0,b.jsx)(h.Download,{size:16})," Full Export"]}),(0,b.jsxs)(e.Button,{onClick:a1,variant:"outline",className:"gap-2",children:[(0,b.jsx)(h.Download,{size:16})," Export PDF"]})]}),B&&ae.size>0&&(0,b.jsxs)(e.Button,{onClick:()=>ah(!0),variant:"destructive",className:"gap-2",disabled:ay,children:[(0,b.jsx)(j.Trash2,{size:16})," Delete Selected (",ae.size,")"]}),A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{onClick:()=>a5(!1),variant:"outline",className:"gap-2",disabled:0===ae.size||aA,children:[(0,b.jsx)(l.Printer,{size:16})," Print Selected"]}),(0,b.jsxs)(e.Button,{onClick:()=>a5(!0),variant:"outline",className:"gap-2",disabled:0===Q||aA,children:[(0,b.jsx)(l.Printer,{size:16})," Print All (",Q,")"]})]}),C&&(0,b.jsxs)(y.DropdownMenu,{children:[(0,b.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",disabled:aC,children:[(0,b.jsx)(h.Download,{size:16})," Export Barcodes ",(0,b.jsx)(G.ChevronDown,{size:16})]})}),(0,b.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>a7(!1),disabled:0===ae.size,children:[(0,b.jsx)(h.Download,{className:"mr-2 h-4 w-4"}),"Selected Products (",ae.size,")"]}),(0,b.jsx)(y.DropdownMenuSeparator,{}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>a7(!0),disabled:0===Q,children:[(0,b.jsx)(h.Download,{className:"mr-2 h-4 w-4"}),"All Products (",Q,")"]})]})]}),z&&(0,b.jsxs)(e.Button,{onClick:()=>a("/inventory/new"),className:"gap-2",children:[(0,b.jsx)(f.Plus,{size:16})," Add Product"]})]})]})}),(0,b.jsx)(W.default,{products:D,hideStockValue:!0,totalCountOverride:Q,totalCostValueOverride:aQ,lowStockOverride:aS,outOfStockOverride:aU,totalStockValueOverride:aW}),(0,b.jsxs)(U.Card,{className:"shadow-sm",children:[(0,b.jsx)(U.CardHeader,{className:"pb-2 md:pb-6",children:(0,b.jsx)(U.CardTitle,{className:"text-sm md:text-lg",children:"Filter Products"})}),(0,b.jsx)(U.CardContent,{className:"pt-0",children:(0,b.jsx)(V,{filters:I,setFilters:J,categories:_,productsCount:aY.length})})]}),(0,b.jsxs)(U.Card,{className:"shadow-sm",children:[(0,b.jsxs)(U.CardHeader,{className:"pb-2 md:pb-6",children:[(0,b.jsx)(U.CardTitle,{className:"text-sm md:text-lg flex items-center justify-between",children:(0,b.jsxs)("span",{children:["Products (",Q,")",ae.size>0&&(0,b.jsxs)("span",{className:"text-xs font-normal text-muted-foreground ml-2",children:[ae.size," selected"]})]})}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-2 p-2 bg-blue-50 rounded border-l-4 border-blue-400",children:["💡 ",(0,b.jsx)("strong",{children:"Tip:"})," Click on Category, Cost Price, or Selling Price to edit them directly in the table"]})]}),(0,b.jsxs)(U.CardContent,{className:"p-0",children:[(0,b.jsx)(R,{products:aY,isLoading:F,showAllFields:!0,enableBulkActions:!0,selectedProductIds:ae,onToggleProductSelection:a=>{let b=new Set(ae);b.has(a)?b.delete(a):b.add(a),af(b)},onToggleAllProducts:a=>{ae.size===a.length?af(new Set):af(new Set(a))},sortField:aM,sortOrder:aO,onSort:a=>{aM===a?aP("asc"===aO?"desc":"asc"):(aN(a),aP("asc"))},onUpdateProduct:a9,categories:_.map(a=>a.name)}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 md:p-4 border-t",children:[(0,b.jsxs)("div",{className:"text-xs md:text-sm text-muted-foreground",children:["Showing ",(M-1)*O+1,"–",Math.min(M*O,Q)," of ",Q]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("select",{className:"border rounded px-2 py-1 text-xs md:text-sm",value:O,onChange:a=>P(Number(a.target.value)),children:[20,50,100].map(a=>(0,b.jsxs)("option",{value:a,children:[a," / page"]},a))}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",disabled:1===M||F,onClick:()=>N(Math.max(1,M-1)),children:"Prev"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",disabled:M*O>=Q||F,onClick:()=>N(M+1),children:"Next"})]})]})]})]}),(0,b.jsx)(ac.default,{open:au,onOpenChange:av,onUpload:a3,categories:_.map(a=>a.name)}),(0,b.jsx)(aj,{open:aw,onOpenChange:ax,userId:r?.id}),(0,b.jsx)(ab,{open:ag,onOpenChange:ah,selectedProducts:ba,onConfirm:a4,isDeleting:ay,deletionProgress:aI}),(0,b.jsx)(an,{open:ak,onOpenChange:al,selectedProducts:am,onConfirm:a6,isPrinting:aA,printProgress:aK}),(0,b.jsx)(ao,{open:aE,onOpenChange:aF,productCount:aG.filter(a=>a.barcode).length,onConfirm:a8,isExporting:aC})]})}],211946)}];

//# sourceMappingURL=src_pages_Products_tsx_73e47904._.js.map