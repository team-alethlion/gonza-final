{"version":3,"sources":["../../../../src/components/sales/EmptySalesState.tsx","../../../../src/components/sales/SalesTableSkeleton.tsx","../../../../src/components/sales/NoBusinessState.tsx","../../../../src/utils/exportToCSV.ts","../../../../src/utils/generateSalesReportVectorPDF.ts","../../../../src/components/sales/TableActions.tsx","../../../../src/components/sales/SalesTableFilters.tsx","../../../../node_modules/lucide-react/src/icons/heart.ts","../../../../src/utils/smsUtils.ts","../../../../src/components/sales/SalesTableRow.tsx","../../../../src/components/sales/DeleteSaleDialog.tsx","../../../../node_modules/lucide-react/src/icons/wand-sparkles.ts","../../../../src/utils/generateNoticePDF.ts","../../../../src/utils/formalizeText.ts","../../../../src/utils/noticeTemplates.ts","../../../../node_modules/lucide-react/src/icons/message-circle.ts","../../../../src/components/customers/NoticeTemplateSelector.tsx","../../../../src/components/customers/BusinessNoticeGenerator.tsx","../../../../src/utils/generatePaymentReminderPDF.ts","../../../../src/components/customers/PaymentReminderPreviewDialog.tsx","../../../../src/components/sales/SalesCategoryManager.tsx","../../../../src/components/sales/SalesSummaryCards.tsx","../../../../src/hooks/useSalesFilters.ts","../../../../src/components/SalesTable.tsx","../../../../src/components/sales/SalesDataTable.tsx","../../../../src/components/sales/SalesReceiptDialog.tsx","../../../../node_modules/lucide-react/src/icons/trophy.ts","../../../../node_modules/lucide-react/src/icons/target.ts","../../../../node_modules/lucide-react/src/icons/pen.ts","../../../../src/components/sales/SalesCategoryAnalysis.tsx","../../../../node_modules/lucide-react/src/icons/user.ts","../../../../src/components/sales/DeletedSalesTable.tsx","../../../../src/hooks/useDeletedSales.ts","../../../../src/hooks/useSalesActions.ts","../../../../src/components/sales/SalesContent.tsx","../../../../src/pages/Sales.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["\r\nimport React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileText } from 'lucide-react';\r\n\r\nconst EmptySalesState: React.FC = () => {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"text-center py-12 bg-white rounded-lg shadow-md p-8\">\r\n      <div className=\"flex flex-col items-center gap-4\">\r\n        <div className=\"bg-slate-100 rounded-full p-4 w-16 h-16 flex items-center justify-center\">\r\n          <FileText className=\"h-8 w-8 text-slate-400\" />\r\n        </div>\r\n        <h3 className=\"text-xl font-semibold\">No sales records found</h3>\r\n        <p className=\"text-gray-500 mb-4\">\r\n          Create your first sale to start tracking your business performance\r\n        </p>\r\n        <Button onClick={() => router.push('/new-sale')} className=\"mt-2\">\r\n          Create Your First Sale\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptySalesState;\r\n","import React from 'react';\r\n\r\nconst SalesTableSkeleton = () => (\r\n  <div className=\"bg-white rounded-lg shadow-sm border border-border/50\">\r\n    <div className=\"p-4 sm:p-6 border-b border-border/50\">\r\n      <div className=\"flex flex-col gap-4\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          <div>\r\n            <div className=\"h-8 bg-gray-200 rounded w-48 animate-pulse\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-32 mt-2 animate-pulse\"></div>\r\n          </div>\r\n          <div className=\"h-10 bg-gray-200 rounded w-32 animate-pulse\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"p-4 sm:p-6\">\r\n      <div className=\"space-y-4\">\r\n        {[...Array(3)].map((_, i) => (\r\n          <div key={i} className=\"h-16 bg-gray-100 rounded animate-pulse\"></div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default SalesTableSkeleton;","import React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nconst NoBusinessState: React.FC = () => {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"p-6 text-center\">\r\n      <div className=\"bg-amber-50 border border-amber-200 p-4 rounded-md\">\r\n        <p className=\"text-amber-800 mb-4\">\r\n          No business location found. Please create a business location to manage sales.\r\n        </p>\r\n        <button\r\n          onClick={() => router.push('/business-management')}\r\n          className=\"bg-amber-600 text-white px-4 py-2 rounded hover:bg-amber-700\"\r\n        >\r\n          Manage Business Locations\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoBusinessState;","import { Sale } from '@/types';\r\nimport { format } from 'date-fns';\r\n\r\nexport const exportToCSV = (sales: Sale[]) => {\r\n    // Define headers for the CSV file\r\n    const headers = [\r\n        'Receipt #',\r\n        'Date',\r\n        'Customer',\r\n        'Items',\r\n        'Items Count',\r\n        'Total Amount',\r\n        'Amount Paid',\r\n        'Amount Due',\r\n        'Status'\r\n    ];\r\n\r\n    // Map sales data to rows\r\n    const rows = sales.map(sale => {\r\n        const totalAmount = sale.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n        const itemNames = sale.items.map(item => item.description).join('; ');\r\n\r\n        return [\r\n            sale.receiptNumber,\r\n            format(new Date(sale.date), 'yyyy-MM-dd HH:mm'),\r\n            sale.customerName,\r\n            itemNames,\r\n            sale.items.length.toString(),\r\n            totalAmount.toFixed(2),\r\n            (sale.amountPaid || 0).toFixed(2),\r\n            (sale.amountDue || 0).toFixed(2),\r\n            sale.paymentStatus\r\n        ];\r\n    });\r\n\r\n    // Construct CSV content\r\n    const csvContent = [\r\n        headers.join(','),\r\n        ...rows.map(row => row.map(cell => `\"${cell.toString().replace(/\"/g, '\"\"')}\"`).join(','))\r\n    ].join('\\n');\r\n\r\n    // Create a blob and download the file\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    if (link.download !== undefined) {\r\n        const url = URL.createObjectURL(blob);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `sales_export_${format(new Date(), 'yyyy-MM-dd_HHmm')}.csv`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    }\r\n};\r\n","import jsPDF from 'jspdf';\r\nimport { format } from 'date-fns';\r\n\r\ninterface SaleData {\r\n  receipt_number: string;\r\n  customer_name: string | null;\r\n  total_amount: number;\r\n  payment_status: string;\r\n  created_at: string;\r\n  sale_date: string;\r\n  items: Array<{\r\n    product_name: string;\r\n    quantity: number;\r\n    price: number;\r\n    total: number;\r\n    discount_amount?: number;\r\n    discount_percentage?: number;\r\n    discount_type?: 'percentage' | 'amount';\r\n  }>;\r\n}\r\n\r\nexport const generateSalesReportVectorPDF = (\r\n  salesData: SaleData[],\r\n  period: string,\r\n  currency: string = 'USD',\r\n  dateRange?: { from: Date | undefined; to: Date | undefined },\r\n  businessSettings?: {\r\n    businessName: string;\r\n    businessAddress: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n  }\r\n) => {\r\n  const pdf = new jsPDF({\r\n    orientation: 'landscape',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margins = { top: 15, right: 15, bottom: 15, left: 15 };\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  \r\n  let currentY = margins.top;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setTextColor(150, 150, 150);\r\n    pdf.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0);\r\n  };\r\n\r\n  // Adjusted table setup with optimized column widths to accommodate larger Total values\r\n  const colWidths = [18, 20, 28, 45, 16, 20, 22, 18, 20, 18, 28]; // Receipt, Date, Customer, Items, Qty, Unit Price, Subtotal, Discount, Net, Tax, Total\r\n  const rowHeight = 8;\r\n  const headerHeight = 12;\r\n\r\n  // Enhanced table headers with discount\r\n  const headers = ['Receipt #', 'Date', 'Customer', 'Items', 'Qty', 'Unit Price', 'Subtotal', 'Discount', 'Net', 'Tax', 'Total'];\r\n\r\n  // Function to draw table headers\r\n  const drawTableHeaders = () => {\r\n    pdf.setFillColor(243, 244, 246);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight, 'F');\r\n    pdf.setLineWidth(0.3);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight);\r\n\r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'bold');\r\n    let currentX = margins.left;\r\n    \r\n    headers.forEach((header, index) => {\r\n      const colWidth = colWidths[index];\r\n      const textWidth = pdf.getTextWidth(header);\r\n      const textX = currentX + (colWidth - textWidth) / 2;\r\n      pdf.text(header, textX, currentY + 7);\r\n      \r\n      if (index < headers.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 2, currentX + colWidth, currentY + headerHeight - 2);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += headerHeight;\r\n  };\r\n\r\n  // Helper function to check if we need a new page\r\n  const checkPageBreak = (neededHeight: number) => {\r\n    if (currentY + neededHeight > pageHeight - margins.bottom - 15) {\r\n      addWatermark();\r\n      pdf.addPage();\r\n      currentY = margins.top;\r\n      drawTableHeaders();\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.setFontSize(8);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Header section with business details on left and title on right\r\n  const headerStartY = currentY;\r\n  \r\n  // Business details on the left\r\n  if (businessSettings) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(businessSettings.businessName, margins.left, currentY);\r\n    currentY += 6;\r\n    \r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(businessSettings.businessAddress, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessPhone, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessEmail, margins.left, currentY);\r\n  }\r\n  \r\n  // Reset currentY to header start for right-aligned content\r\n  currentY = headerStartY;\r\n  \r\n  // Title on the right\r\n  pdf.setFontSize(20);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const title = `Comprehensive Sales Report (${currency})`;\r\n  const titleWidth = pdf.getTextWidth(title);\r\n  pdf.text(title, pageWidth - margins.right - titleWidth, currentY);\r\n  currentY += 12;\r\n\r\n  // Date range display - right aligned under title\r\n  if (dateRange?.from && dateRange?.to) {\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const fromDate = format(dateRange.from, 'dd/MM/yyyy');\r\n    const toDate = format(dateRange.to, 'dd/MM/yyyy');\r\n    \r\n    const dateText = fromDate === toDate ? fromDate : `${fromDate} - ${toDate}`;\r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 15;\r\n  } else {\r\n    // Fallback to current date if no range provided\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const dateText = format(new Date(), 'dd/MM/yyyy');\r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 15;\r\n  }\r\n  \r\n  // Ensure we have enough space for both sections\r\n  currentY = Math.max(currentY, headerStartY + 25);\r\n\r\n  if (salesData.length === 0) {\r\n    pdf.setFontSize(16);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const noDataText = 'No sales data available for the selected period.';\r\n    const noDataWidth = pdf.getTextWidth(noDataText);\r\n    pdf.text(noDataText, (pageWidth - noDataWidth) / 2, currentY + 30);\r\n  } else {\r\n    // Draw initial table headers\r\n    checkPageBreak(headerHeight + 10);\r\n    drawTableHeaders();\r\n\r\n    // Table data\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setFontSize(8);\r\n\r\n    const numberFormatter = new Intl.NumberFormat('en-US', {\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0,\r\n      useGrouping: true // Add thousand separators for better readability\r\n    });\r\n\r\n    let globalRowIndex = 0;\r\n\r\n    salesData.forEach((sale) => {\r\n      // Calculate sale-level totals for tax rate calculation (tax applies to net amount after discount)\r\n      const saleSubtotal = sale.items.reduce((sum, item) => sum + item.total, 0);\r\n      const saleDiscounts = sale.items.reduce((sum, item) => sum + (item.discount_amount || 0), 0);  \r\n      const saleNetAmount = saleSubtotal - saleDiscounts;\r\n      const saleTaxAmount = sale.total_amount - saleNetAmount;\r\n      const taxRate = saleNetAmount > 0 ? saleTaxAmount / saleNetAmount : 0;\r\n      \r\n      // Display each item as a separate row with individual calculations\r\n      sale.items.forEach((item, itemIndex) => {\r\n        checkPageBreak(rowHeight + 5);\r\n\r\n        // Calculate discount amount\r\n        const discountAmount = item.discount_amount || 0;\r\n        const netAmount = item.total - discountAmount;\r\n\r\n        // Calculate item-level tax and total (tax applies after discount)\r\n        const itemTax = netAmount * taxRate;\r\n        const itemTotal = netAmount + itemTax;\r\n\r\n        const rowData = [\r\n          itemIndex === 0 ? sale.receipt_number : '', // Only show receipt number on first item\r\n          itemIndex === 0 ? format(new Date(sale.sale_date), 'dd/MM/yyyy') : '', // Only show date on first item\r\n          itemIndex === 0 ? (sale.customer_name || 'Walk-in') : '', // Only show customer on first item\r\n          item.product_name, // Show individual product name\r\n          item.quantity.toString(), // Show individual item quantity\r\n          numberFormatter.format(item.price), // Show individual item price\r\n          numberFormatter.format(item.total), // Show individual item subtotal\r\n          discountAmount > 0 ? numberFormatter.format(discountAmount) : '-', // Show discount amount\r\n          numberFormatter.format(netAmount), // Show net amount after discount\r\n          numberFormatter.format(itemTax), // Show individual item tax\r\n          numberFormatter.format(itemTotal) // Show individual item total including tax\r\n        ];\r\n\r\n        // Draw row background (alternating by sale, not by item)\r\n        if (globalRowIndex % 2 === 0) {\r\n          pdf.setFillColor(249, 250, 251);\r\n          pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n        }\r\n\r\n        pdf.setLineWidth(0.1);\r\n        pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight);\r\n\r\n        let currentX = margins.left;\r\n        \r\n        rowData.forEach((data, colIndex) => {\r\n          const colWidth = colWidths[colIndex];\r\n          let text = data;\r\n          \r\n          // Truncate text if too long for specific columns\r\n          if (colIndex === 2) { // Customer name\r\n            while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 3) {\r\n              text = text.substring(0, text.length - 4) + '...';\r\n            }\r\n          } else if (colIndex === 3) { // Items - allow more space due to adjusted width\r\n            while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 5) {\r\n              text = text.substring(0, text.length - 4) + '...';\r\n            }\r\n          } else if (colIndex >= 4) { // Numeric columns - ensure they fit\r\n            while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 3) {\r\n              // For numeric values, try shortening by removing thousand separators first\r\n              if (text.includes(',')) {\r\n                text = text.replace(/,/g, '');\r\n              } else {\r\n                text = text.substring(0, text.length - 1);\r\n              }\r\n            }\r\n          }\r\n          \r\n          let textX = currentX + 2;\r\n          \r\n          // Right align numeric columns (Qty, Unit Price, Subtotal, Discount, Net, Tax, Total)\r\n          if (colIndex >= 4) {\r\n            const textWidth = pdf.getTextWidth(text);\r\n            textX = currentX + colWidth - textWidth - 2;\r\n          }\r\n          \r\n          pdf.text(text, textX, currentY + 5);\r\n          \r\n          if (colIndex < rowData.length - 1) {\r\n            pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + rowHeight - 1);\r\n          }\r\n          \r\n          currentX += colWidth;\r\n        });\r\n\r\n        currentY += rowHeight;\r\n      });\r\n\r\n      globalRowIndex++;\r\n    });\r\n\r\n    // Enhanced Summary section\r\n    currentY += 15;\r\n    checkPageBreak(60);\r\n\r\n    pdf.setFontSize(18);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Comprehensive Sales Summary', margins.left, currentY);\r\n    currentY += 10;\r\n\r\n    // Calculate enhanced totals and analytics including discounts\r\n    const totalSales = salesData.length;\r\n    const totalAmount = salesData.reduce((sum, sale) => sum + sale.total_amount, 0);\r\n    const totalSubtotal = salesData.reduce((sum, sale) => \r\n      sum + sale.items.reduce((itemSum, item) => itemSum + item.total, 0), 0);\r\n    const totalDiscounts = salesData.reduce((sum, sale) => \r\n      sum + sale.items.reduce((itemSum, item) => itemSum + (item.discount_amount || 0), 0), 0);\r\n    const totalNetAmount = totalSubtotal - totalDiscounts;\r\n    const totalTax = totalAmount - totalNetAmount; // Tax calculated on net amount\r\n    const totalItems = salesData.reduce((sum, sale) => \r\n      sum + sale.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0);\r\n    \r\n    const paidSales = salesData.filter(sale => sale.payment_status.toLowerCase() === 'paid').length;\r\n    const pendingSales = salesData.filter(sale => sale.payment_status.toLowerCase() === 'not paid').length;\r\n    const quoteSales = salesData.filter(sale => sale.payment_status.toLowerCase() === 'quote').length;\r\n    const installmentSales = salesData.filter(sale => sale.payment_status.toLowerCase() === 'installment sale').length;\r\n    \r\n    const avgSaleValue = totalSales > 0 ? totalAmount / totalSales : 0;\r\n    const avgItemsPerSale = totalSales > 0 ? totalItems / totalSales : 0;\r\n    const taxRate = totalNetAmount > 0 ? (totalTax / totalNetAmount) * 100 : 0;\r\n    const avgDiscountPerSale = totalSales > 0 ? totalDiscounts / totalSales : 0;\r\n    const discountRate = totalSubtotal > 0 ? (totalDiscounts / totalSubtotal) * 100 : 0;\r\n\r\n    // Draw enhanced summary box (increased height for discount info)\r\n    const summaryBoxHeight = 60;\r\n    const summaryBoxWidth = contentWidth;\r\n    \r\n    pdf.setFillColor(248, 249, 250);\r\n    pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight, 'F');\r\n    pdf.setLineWidth(0.3);\r\n    pdf.setDrawColor(200, 200, 200);\r\n    pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight);\r\n\r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    \r\n    // Left column\r\n    const leftColumn = [\r\n      ['Total Sales:', totalSales.toString()],\r\n      ['Total Items Sold:', totalItems.toString()],\r\n      ['Average Items/Sale:', avgItemsPerSale.toFixed(1)],\r\n      ['Paid Sales:', paidSales.toString()],\r\n      ['Pending Sales:', pendingSales.toString()],\r\n      ['Avg Discount/Sale:', numberFormatter.format(avgDiscountPerSale)]\r\n    ];\r\n\r\n    // Right column\r\n    const rightColumn = [\r\n      ['Total Amount:', numberFormatter.format(totalAmount)],\r\n      ['Subtotal (before discount):', numberFormatter.format(totalSubtotal)],\r\n      ['Total Discounts:', numberFormatter.format(totalDiscounts)],\r\n      ['Net Amount (after discount):', numberFormatter.format(totalNetAmount)],\r\n      ['Total Tax:', numberFormatter.format(totalTax)],\r\n      ['Discount Rate:', `${discountRate.toFixed(1)}%`]\r\n    ];\r\n\r\n    let summaryY = currentY + 6;\r\n    const leftX = margins.left + 15;\r\n    const rightX = margins.left + (contentWidth / 2) + 15;\r\n\r\n    // Draw left column\r\n    leftColumn.forEach(([label, value]) => {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text(label, leftX, summaryY);\r\n      pdf.setFont('helvetica', 'normal');\r\n      const labelWidth = pdf.getTextWidth(label);\r\n      pdf.text(value, leftX + labelWidth + 5, summaryY);\r\n      summaryY += 7;\r\n    });\r\n\r\n    // Reset Y for right column\r\n    summaryY = currentY + 6;\r\n\r\n    // Draw right column\r\n    rightColumn.forEach(([label, value]) => {\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text(label, rightX, summaryY);\r\n      pdf.setFont('helvetica', 'normal');\r\n      const labelWidth = pdf.getTextWidth(label);\r\n      pdf.text(value, rightX + labelWidth + 5, summaryY);\r\n      summaryY += 7;\r\n    });\r\n\r\n    // Payment Status Breakdown\r\n    if (quoteSales > 0 || installmentSales > 0) {\r\n      currentY += summaryBoxHeight + 10;\r\n      checkPageBreak(25);\r\n      \r\n      pdf.setFontSize(14);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('Payment Status Breakdown', margins.left, currentY);\r\n      currentY += 8;\r\n      \r\n      pdf.setFontSize(10);\r\n      pdf.setFont('helvetica', 'normal');\r\n      \r\n      const statusBreakdown = [\r\n        [`Quotes: ${quoteSales}`, `Installment Sales: ${installmentSales}`]\r\n      ];\r\n      \r\n      statusBreakdown.forEach(([left, right]) => {\r\n        pdf.text(left, leftX, currentY);\r\n        pdf.text(right, rightX, currentY);\r\n        currentY += 6;\r\n      });\r\n    }\r\n  }\r\n\r\n  addWatermark();\r\n\r\n  // Generate filename based on report date range\r\n  let filename: string;\r\n  if (dateRange?.from && dateRange?.to) {\r\n    const fromDate = format(dateRange.from, 'yyyy-MM-dd');\r\n    const toDate = format(dateRange.to, 'yyyy-MM-dd');\r\n    \r\n    if (fromDate === toDate) {\r\n      filename = `sales_report_${fromDate}.pdf`;\r\n    } else {\r\n      filename = `sales_report_${fromDate}_to_${toDate}.pdf`;\r\n    }\r\n  } else {\r\n    // Fallback to current date if no range provided\r\n    filename = `sales_report_${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n  }\r\n\r\n  pdf.save(filename);\r\n};\r\n","import React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { FileDown, FileText, Plus } from 'lucide-react';\r\nimport { exportToCSV } from '@/utils/exportToCSV';\r\nimport { generateSalesReportVectorPDF } from '@/utils/generateSalesReportVectorPDF';\r\nimport { Sale } from '@/types';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { format } from 'date-fns';\r\nimport { getDateRangeFromFilter } from '@/utils/dateFilters';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\n\r\ninterface TableActionsProps {\r\n  filteredSales: Sale[];\r\n  allSales: Sale[];\r\n  currency: string;\r\n  dateFilter?: string;\r\n  dateRange?: { from: Date | undefined; to: Date | undefined };\r\n  specificDate?: Date;\r\n}\r\n\r\nconst TableActions: React.FC<TableActionsProps> = ({\r\n  filteredSales,\r\n  allSales,\r\n  currency,\r\n  dateFilter = 'all',\r\n  dateRange,\r\n  specificDate\r\n}) => {\r\n  const router = useRouter();\r\n  const { toast } = useToast();\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n\r\n  const handleExportCSV = () => {\r\n    exportToCSV(filteredSales.length > 0 ? filteredSales : allSales);\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    try {\r\n      const salesToExport = filteredSales.length > 0 ? filteredSales : allSales;\r\n\r\n      // Transform Sale objects to SaleData format expected by the PDF generator\r\n      const salesData = salesToExport.map(sale => {\r\n        // Calculate total amount with discounts and tax\r\n        const subtotal = sale.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n        const totalDiscounts = sale.items.reduce((sum, item) => sum + (item.discountAmount || 0), 0);\r\n        const netAmount = subtotal - totalDiscounts;\r\n        const totalAmount = netAmount * (1 + (sale.taxRate || 0) / 100);\r\n\r\n        return {\r\n          receipt_number: sale.receiptNumber,\r\n          customer_name: sale.customerName,\r\n          total_amount: totalAmount,\r\n          payment_status: sale.paymentStatus.toLowerCase(),\r\n          created_at: sale.date.toISOString(),\r\n          sale_date: sale.date.toISOString().split('T')[0],\r\n          items: sale.items.map(item => ({\r\n            product_name: item.description,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            total: item.price * item.quantity,\r\n            discount_amount: item.discountAmount || 0,\r\n            discount_percentage: item.discountPercentage || 0,\r\n            discount_type: item.discountType || undefined\r\n          }))\r\n        };\r\n      });\r\n\r\n      // Calculate actual date range for PDF - ensure we have valid dates\r\n      let actualDateRange: { from: Date | undefined; to: Date | undefined };\r\n\r\n      if (specificDate) {\r\n        // For specific date, use that date for both from and to\r\n        actualDateRange = { from: specificDate, to: specificDate };\r\n      } else if (dateRange?.from && dateRange?.to) {\r\n        // For custom range, use the provided range\r\n        actualDateRange = dateRange;\r\n      } else if (dateFilter && dateFilter !== 'all') {\r\n        // For predefined filters, get the actual date range\r\n        const range = getDateRangeFromFilter(dateFilter);\r\n        actualDateRange = range;\r\n      } else {\r\n        // For \"all\" filter, determine date range from actual sales data\r\n        if (salesToExport.length > 0) {\r\n          const dates = salesToExport.map(sale => sale.date);\r\n          const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n          const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n          actualDateRange = { from: earliestDate, to: latestDate };\r\n        } else {\r\n          // Fallback to current date if no sales\r\n          const today = new Date();\r\n          actualDateRange = { from: today, to: today };\r\n        }\r\n      }\r\n\r\n      generateSalesReportVectorPDF(\r\n        salesData,\r\n        'Current Period',\r\n        currency,\r\n        actualDateRange,\r\n        {\r\n          businessName: settings.businessName,\r\n          businessAddress: settings.businessAddress,\r\n          businessPhone: settings.businessPhone,\r\n          businessEmail: settings.businessEmail\r\n        }\r\n      );\r\n\r\n      toast({\r\n        title: \"Report Generated\",\r\n        description: \"PDF sales report has been created successfully.\",\r\n      });\r\n    } catch (error) {\r\n      console.error('Error generating PDF report:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to generate PDF report. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3 w-full\">\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <Button\r\n          onClick={handleExportCSV}\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          className=\"gap-2 h-12 text-sm border-border/50 font-medium\"\r\n        >\r\n          <FileDown className=\"h-4 w-4 shrink-0\" />\r\n          CSV\r\n        </Button>\r\n        <Button\r\n          onClick={handleExportPDF}\r\n          variant=\"outline\"\r\n          size=\"lg\"\r\n          className=\"gap-2 h-12 text-sm border-border/50 font-medium\"\r\n        >\r\n          <FileText className=\"h-4 w-4 shrink-0\" />\r\n          PDF\r\n        </Button>\r\n      </div>\r\n      {hasPermission('sales', 'create') && (\r\n        <Button\r\n          onClick={() => router.push('/new-sale')}\r\n          size=\"lg\"\r\n          className=\"w-full gap-2 h-12 text-sm font-medium\"\r\n        >\r\n          <Plus className=\"h-4 w-4 shrink-0\" />\r\n          New Sale\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableActions;\r\n","\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar as CalendarIcon } from \"lucide-react\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { format } from \"date-fns\";\r\nimport { Search, Filter, Tag } from 'lucide-react';\r\nimport DateRangeFilter from './DateRangeFilter';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\n\r\ninterface SalesTableFiltersProps {\r\n  searchQuery: string;\r\n  setSearchQuery: (query: string) => void;\r\n  paymentFilter: string;\r\n  setPaymentFilter: (filter: string) => void;\r\n  cashTransactionFilter: string;\r\n  setCashTransactionFilter: (filter: string) => void;\r\n  categoryFilter: string;\r\n  setCategoryFilter: (filter: string) => void;\r\n  dateFilter: string;\r\n  setDateFilter: (filter: string) => void;\r\n  dateRange: { from: Date | undefined; to: Date | undefined; };\r\n  setDateRange: (range: { from: Date | undefined; to: Date | undefined; }) => void;\r\n  specificDate: Date | undefined;\r\n  setSpecificDate: (date: Date | undefined) => void;\r\n  isCustomRange: boolean;\r\n  isSpecificDate: boolean;\r\n  sortOrder?: string;\r\n  setSortOrder?: (order: string) => void;\r\n}\r\n\r\nconst SalesTableFilters: React.FC<SalesTableFiltersProps> = ({\r\n  searchQuery,\r\n  setSearchQuery,\r\n  paymentFilter,\r\n  setPaymentFilter,\r\n  cashTransactionFilter,\r\n  setCashTransactionFilter,\r\n  categoryFilter,\r\n  setCategoryFilter,\r\n  dateFilter,\r\n  setDateFilter,\r\n  dateRange,\r\n  setDateRange,\r\n  specificDate,\r\n  setSpecificDate,\r\n  isCustomRange,\r\n  isSpecificDate,\r\n  sortOrder = 'desc',\r\n  setSortOrder\r\n}) => {\r\n  const { categories } = useSalesCategories();\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handleDateFilterChange = (value: string) => {\r\n    setDateFilter(value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-6 space-y-4\">\r\n      <div className=\"grid grid-cols-1 gap-4\">\r\n        {/* Search Input - Full Width */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search by customer, item, or receipt number...\"\r\n            className=\"pl-10 bg-white border-border/50 focus:border-primary h-10\"\r\n            value={searchQuery}\r\n            onChange={handleSearchChange}\r\n          />\r\n        </div>\r\n\r\n        {/* Filter Row */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-4 gap-3\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={paymentFilter} onValueChange={setPaymentFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Payment Status\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Payment Statuses</SelectItem>\r\n                <SelectItem value=\"Paid\">Paid</SelectItem>\r\n                <SelectItem value=\"NOT PAID\">NOT PAID</SelectItem>\r\n                <SelectItem value=\"Quote\">Quote</SelectItem>\r\n                <SelectItem value=\"Installment Sale\">Installment Sale</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={cashTransactionFilter} onValueChange={setCashTransactionFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Cash Transaction\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Sales</SelectItem>\r\n                <SelectItem value=\"linked\">Linked to Cash</SelectItem>\r\n                <SelectItem value=\"unlinked\">Not Linked to Cash</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <Tag className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Category\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"all\">All Categories</SelectItem>\r\n                <SelectItem value=\"none\">No Source</SelectItem>\r\n                {categories.map((category) => (\r\n                  <SelectItem key={category.id} value={category.id}>\r\n                    {category.name}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none\">\r\n              <CalendarIcon className=\"h-4 w-4 text-muted-foreground\" />\r\n            </div>\r\n            <Select value={dateFilter} onValueChange={handleDateFilterChange}>\r\n              <SelectTrigger className=\"bg-white border-border/50 pl-10 h-10\">\r\n                <SelectValue placeholder=\"Date Range\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white shadow-lg border border-border/50\">\r\n                <SelectItem value=\"today\">Today</SelectItem>\r\n                <SelectItem value=\"yesterday\">Yesterday</SelectItem>\r\n                <SelectItem value=\"this-week\">This Week</SelectItem>\r\n                <SelectItem value=\"last-week\">Last Week</SelectItem>\r\n                <SelectItem value=\"this-month\">This Month</SelectItem>\r\n                <SelectItem value=\"last-month\">Last Month</SelectItem>\r\n                <SelectItem value=\"this-year\">This Year</SelectItem>\r\n                <SelectItem value=\"specific\">Specific Date</SelectItem>\r\n                <SelectItem value=\"custom\">Custom Range</SelectItem>\r\n                <SelectItem value=\"all\">All Time</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isSpecificDate && (\r\n        <div className=\"pt-2 pb-1 border-t border-border/20\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal\"\r\n                >\r\n                  <CalendarIcon className=\"h-4 w-4\" />\r\n                  <span>{specificDate ? format(specificDate, \"MMM d, yyyy\") : \"Select Date\"}</span>\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0 z-[100] bg-white shadow-lg\" align=\"start\">\r\n                <Calendar\r\n                  initialFocus\r\n                  mode=\"single\"\r\n                  defaultMonth={specificDate}\r\n                  selected={specificDate}\r\n                  onSelect={setSpecificDate}\r\n                  className=\"p-3 pointer-events-auto\"\r\n                  showOutsideDays={true}\r\n                />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {isCustomRange && (\r\n        <div className=\"pt-2 pb-1 border-t border-border/20\">\r\n          <DateRangeFilter \r\n            dateRange={dateRange}\r\n            onDateRangeChange={setDateRange}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesTableFilters;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Heart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMTRjMS40OS0xLjQ2IDMtMy4yMSAzLTUuNUE1LjUgNS41IDAgMCAwIDE2LjUgM2MtMS43NiAwLTMgLjUtNC41IDItMS41LTEuNS0yLjc0LTItNC41LTJBNS41IDUuNSAwIDAgMCAyIDguNWMwIDIuMyAxLjUgNC4wNSAzIDUuNWw3IDdaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/heart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Heart = createLucideIcon('Heart', [\n  [\n    'path',\n    {\n      d: 'M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z',\n      key: 'c3ymky',\n    },\n  ],\n]);\n\nexport default Heart;\n","\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { isIOS } from './deviceDetection';\r\n\r\nexport interface SMSOptions {\r\n  phoneNumber: string;\r\n  message: string;\r\n}\r\n\r\nexport const formatPhoneForSMS = (phoneNumber: string): string => {\r\n  // Remove all non-digit characters except + at the beginning\r\n  const cleaned = phoneNumber.replace(/[^\\d+]/g, '');\r\n\r\n  // If it starts with +, keep it, otherwise just return the digits\r\n  if (cleaned.startsWith('+')) {\r\n    return cleaned;\r\n  }\r\n\r\n  return cleaned;\r\n};\r\n\r\nexport const formatMessageForSMS = (content: string, businessName?: string): string => {\r\n  // Replace non-breaking spaces and other special whitespace with standard spaces\r\n  // \\u00A0 is non-breaking space, \\u200B is zero-width space, etc.\r\n  let sanitized = content.replace(/[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g, ' ');\r\n\r\n  // Remove excessive whitespace and format for SMS\r\n  let formatted = sanitized\r\n    .replace(/\\n\\s*\\n/g, '\\n\\n') // Clean up multiple line breaks\r\n    .replace(/^\\s+|\\s+$/g, '') // Trim whitespace\r\n    .substring(0, 800); // Limit to reasonable SMS length\r\n\r\n  // Add business signature if provided\r\n  if (businessName) {\r\n    formatted += `\\n\\n- ${businessName}`;\r\n  }\r\n\r\n  return formatted;\r\n};\r\n\r\nexport const getBirthdayMessage = (customerName: string): string => {\r\n  return `ðŸŽ‰ Happy Birthday ${customerName}! ðŸŽ‰\r\n\r\nWishing you a day filled with joy, love, and great memories. Thank you for being a valued part of our family. We're grateful for your support and wish you nothing but happiness in the year ahead!\r\n\r\nMay this new year of your life bring you wonderful opportunities and amazing experiences.`;\r\n};\r\n\r\nexport const getWeMissYouMessage = (customerName: string): string => {\r\n  return `Dear ${customerName},\r\n\r\nWe Miss You!\r\n\r\nIt's been a while since we last heard from you, and we just wanted to reach out. We truly value you as a customer and would love to see you again.\r\n\r\nIf there's anything we can do to assist you or if you need any help, we're always here for you!\r\n\r\nWe hope to serve you again soon.\r\n\r\nYours faithfully,`;\r\n};\r\n\r\nexport const getThankYouMessage = (sale: Sale, settings: BusinessSettings): string => {\r\n  const saleTotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Add tax if applicable\r\n  const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n  const totalWithTax = saleTotal + taxAmount;\r\n\r\n  // Create items list\r\n  const itemsList = sale.items.map(item =>\r\n    `â€¢ ${item.description} (Qty: ${item.quantity})`\r\n  ).join('\\n');\r\n\r\n  return `Dear ${sale.customerName},\r\n\r\nWe wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.\r\n\r\nReceipt Number: ${sale.receiptNumber}\r\n\r\nItems Purchased:\r\n${itemsList}\r\n\r\nTotal Amount: ${settings.currency} ${totalWithTax.toLocaleString()}\r\n\r\nIn case of any inquiries please call ${settings.businessPhone && settings.businessPhone !== '(123) 456-7890' ? settings.businessPhone : 'our office'}.\r\n\r\nWe appreciate your business and look forward to serving you again.\r\n\r\nYours faithfully,\r\n${settings.businessName || 'Management'}`;\r\n};\r\n\r\nexport const openSMSApp = (options: SMSOptions): void => {\r\n  const { phoneNumber, message } = options;\r\n  const formattedPhone = formatPhoneForSMS(phoneNumber);\r\n  const encodedMessage = encodeURIComponent(message);\r\n\r\n  let smsUrl: string;\r\n\r\n  if (isIOS()) {\r\n    // iOS uses sms: scheme\r\n    smsUrl = `sms:${formattedPhone}&body=${encodedMessage}`;\r\n  } else {\r\n    // Android uses sms: scheme with different parameter format\r\n    smsUrl = `sms:${formattedPhone}?body=${encodedMessage}`;\r\n  }\r\n\r\n  try {\r\n    window.open(smsUrl, '_self');\r\n  } catch (error) {\r\n    console.error('Failed to open SMS app:', error);\r\n    // Fallback: copy message to clipboard\r\n    navigator.clipboard?.writeText(message).then(() => {\r\n      alert('SMS app not available. Message copied to clipboard.');\r\n    }).catch(() => {\r\n      alert('SMS app not available and clipboard access denied.');\r\n    });\r\n  }\r\n};\r\n\r\nexport const openWhatsApp = (options: SMSOptions): void => {\r\n  const { phoneNumber, message } = options;\r\n  const formattedPhone = formatPhoneForSMS(phoneNumber);\r\n  const encodedMessage = encodeURIComponent(message);\r\n\r\n  const whatsappUrl = `https://wa.me/${formattedPhone}?text=${encodedMessage}`;\r\n\r\n  try {\r\n    window.open(whatsappUrl, '_blank');\r\n  } catch (error) {\r\n    console.error('Failed to open WhatsApp:', error);\r\n    // Fallback: copy message to clipboard\r\n    navigator.clipboard?.writeText(message).then(() => {\r\n      alert('WhatsApp not available. Message copied to clipboard.');\r\n    }).catch(() => {\r\n      alert('WhatsApp not available and clipboard access denied.');\r\n    });\r\n  }\r\n};\r\n\r\nexport const canSendSMS = (customer: { phoneNumber?: string | null }): boolean => {\r\n  return !!(customer.phoneNumber && customer.phoneNumber.trim());\r\n};\r\n","import React from 'react';\r\nimport { format } from 'date-fns';\r\nimport { TableRow, TableCell } from '@/components/ui/table';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Printer, Edit, Trash2, FileText, Heart, MessageSquare } from 'lucide-react';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { Sale } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { canSendSMS } from '@/utils/smsUtils';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface SalesTableRowProps {\r\n  sale: Sale;\r\n  currency: string;\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  onSendPaymentReminder?: (sale: Sale) => void;\r\n  onSendThankYouNotice?: (sale: Sale) => void;\r\n  onSendPaymentReminderSMS?: (sale: Sale) => void;\r\n  onSendThankYouSMS?: (sale: Sale) => void;\r\n}\r\n\r\nconst SalesTableRow: React.FC<SalesTableRowProps> = ({\r\n  sale,\r\n  currency,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  onSendPaymentReminder,\r\n  onSendThankYouNotice,\r\n  onSendPaymentReminderSMS,\r\n  onSendThankYouSMS\r\n}) => {\r\n  const { accounts } = useCashAccounts();\r\n  const { transactions } = useCashTransactions();\r\n  const isMobile = useIsMobile();\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n  const { hasPermission } = useProfiles();\r\n  const { formatFinancial, canViewCostPrice, canViewProfit } = useFinancialVisibility();\r\n\r\n  const totalQuantity = sale.items.reduce((total, item) => total + item.quantity, 0);\r\n  const totalItemsPrice = sale.items.reduce((total, item) => total + item.price, 0);\r\n  const averagePrice = totalQuantity > 0 ? totalItemsPrice / sale.items.length : 0;\r\n\r\n  // Calculate subtotal from items with discount considerations\r\n  const subtotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Calculate total discount amount\r\n  const totalDiscount = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n\r\n  // Calculate tax amount based on subtotal and tax rate\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotal * (taxRate / 100);\r\n\r\n  // Total including tax\r\n  const saleTotal = subtotal + taxAmount;\r\n\r\n  // Calculate total cost\r\n  const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n  // Improved cash account name resolution with better logging\r\n  const getCashAccountName = () => {\r\n    if (!sale.cashTransactionId) {\r\n      console.log('No cash transaction ID for sale:', sale.id);\r\n      return null;\r\n    }\r\n\r\n    console.log('Looking for transaction with ID:', sale.cashTransactionId);\r\n    console.log('Available transactions count:', transactions.length);\r\n\r\n    // Find the transaction linked to this sale\r\n    const linkedTransaction = transactions.find(transaction => transaction.id === sale.cashTransactionId);\r\n    if (!linkedTransaction) {\r\n      console.log('No linked transaction found for sale:', sale.id, 'transaction ID:', sale.cashTransactionId);\r\n      console.log('All transaction IDs:', transactions.map(t => t.id));\r\n      return null;\r\n    }\r\n\r\n    console.log('Found linked transaction:', linkedTransaction);\r\n\r\n    if (!linkedTransaction.accountId) {\r\n      console.log('Linked transaction has no accountId:', linkedTransaction);\r\n      return null;\r\n    }\r\n\r\n    // Find the account linked to the transaction\r\n    const linkedAccount = accounts.find(account => account.id === linkedTransaction.accountId);\r\n    if (!linkedAccount) {\r\n      console.log('No linked account found for accountId:', linkedTransaction.accountId);\r\n      console.log('Available accounts:', accounts.map(a => ({ id: a.id, name: a.name })));\r\n      return null;\r\n    }\r\n\r\n    console.log('Successfully resolved cash account:', linkedAccount.name);\r\n    return linkedAccount.name;\r\n  };\r\n\r\n  let itemsDescription = \"No items\";\r\n  if (sale.items && Array.isArray(sale.items) && sale.items.length > 0) {\r\n    itemsDescription = sale.items[0].description;\r\n    if (sale.items.length > 1) {\r\n      itemsDescription += ` (+${sale.items.length - 1} more)`;\r\n    }\r\n  }\r\n\r\n  const cashAccountName = getCashAccountName();\r\n\r\n  // Determine display status\r\n  const getDisplayStatus = () => {\r\n    if (sale.paymentStatus === 'Installment Sale') {\r\n      return 'Installment';\r\n    }\r\n    return sale.paymentStatus;\r\n  };\r\n\r\n  // Get status styling\r\n  const getStatusStyling = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'Quote':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'Installment Sale':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'bg-yellow-100 text-yellow-800';\r\n    }\r\n  };\r\n\r\n  // Calculate actual amounts for installment sales based on payment history\r\n  const actualAmountPaid = sale.paymentStatus === 'Installment Sale'\r\n    ? payments.reduce((sum, payment) => sum + payment.amount, 0)\r\n    : sale.amountPaid || 0;\r\n\r\n  const actualAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, saleTotal - actualAmountPaid)\r\n    : sale.amountDue || 0;\r\n\r\n  // Check if this is a credit sale that needs payment reminder (exclude installment sales)\r\n  const isCreditSale = sale.paymentStatus === 'NOT PAID';\r\n\r\n  // Check if this is an installment sale with outstanding balance\r\n  const isInstallmentWithDue = sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0;\r\n\r\n  // Create a customer-like object for SMS checking\r\n  const customerForSMS = {\r\n    phoneNumber: sale.customerContact || null\r\n  };\r\n\r\n  const canSendSMSToCustomer = canSendSMS(customerForSMS);\r\n  const showSMSOptions = isMobile && canSendSMSToCustomer;\r\n\r\n  return (\r\n    <TableRow\r\n      className=\"cursor-pointer hover:bg-gray-50\"\r\n      onClick={() => onViewReceipt(sale)}\r\n    >\r\n      <TableCell className=\"font-medium\">\r\n        {format(new Date(sale.date), 'dd/MM/yyyy')}\r\n      </TableCell>\r\n      <TableCell>{sale.receiptNumber}</TableCell>\r\n      <TableCell>\r\n        <div className=\"space-y-1\">\r\n          <div>{sale.customerName}</div>\r\n          {cashAccountName && (\r\n            <Badge variant=\"outline\" className=\"text-xs bg-green-50 text-green-700 border-green-200\">\r\n              {cashAccountName}\r\n            </Badge>\r\n          )}\r\n          {sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0 && (\r\n            <Badge variant=\"outline\" className=\"text-xs bg-red-50 text-red-700 border-red-200\">\r\n              Due: {currency} {formatNumber(actualAmountDue)}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <span className=\"line-clamp-1 cursor-help\">\r\n              {itemsDescription}\r\n            </span>\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"top\" className=\"max-w-xs\">\r\n            <div className=\"space-y-1\">\r\n              <p className=\"font-bold break-words whitespace-normal\">{itemsDescription}</p>\r\n            </div>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">{totalQuantity}</TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {currency} {formatNumber(averagePrice)}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {totalDiscount > 0 ? (\r\n          <span className=\"text-orange-600\">\r\n            -{currency} {formatNumber(totalDiscount)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"text-gray-400\">-</span>\r\n        )}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {canViewCostPrice ? `${currency} ${formatFinancial(totalCost, 'cost')}` : 'â€¢â€¢â€¢'}\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        <span className=\"text-green-600 font-medium\">\r\n          {canViewProfit ? `${currency} ${formatNumber(saleTotal - totalCost)}` : 'â€¢â€¢â€¢'}\r\n        </span>\r\n      </TableCell>\r\n      <TableCell className=\"text-right\">\r\n        {currency} {formatNumber(saleTotal)}\r\n        {sale.paymentStatus === 'Installment Sale' && actualAmountPaid > 0 && (\r\n          <div className=\"text-xs text-green-600\">\r\n            Paid: {currency} {formatNumber(actualAmountPaid)}\r\n          </div>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <span\r\n          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusStyling()}`}\r\n        >\r\n          {getDisplayStatus()}\r\n        </span>\r\n      </TableCell>\r\n      <TableCell onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"flex justify-end gap-1\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onViewReceipt(sale);\r\n            }}\r\n          >\r\n            <Printer className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">View Receipt</span>\r\n          </Button>\r\n\r\n          {isCreditSale && onSendPaymentReminder && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminder(sale);\r\n              }}\r\n              className=\"text-orange-600 hover:text-orange-700 hover:bg-orange-50\"\r\n              title=\"Send Payment Reminder\"\r\n            >\r\n              <FileText className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Payment Reminder</span>\r\n            </Button>\r\n          )}\r\n\r\n          {isInstallmentWithDue && onSendPaymentReminder && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminder(sale);\r\n              }}\r\n              className=\"text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\r\n              title=\"Send Due Payment Reminder\"\r\n            >\r\n              <FileText className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Due Payment Reminder</span>\r\n            </Button>\r\n          )}\r\n\r\n          {isCreditSale && showSMSOptions && onSendPaymentReminderSMS && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendPaymentReminderSMS(sale);\r\n              }}\r\n              className=\"text-orange-600 hover:text-orange-700 hover:bg-orange-50\"\r\n              title=\"Send Payment Reminder SMS\"\r\n            >\r\n              <MessageSquare className=\"h-3 w-3\" />\r\n              <span className=\"sr-only\">Send Payment Reminder SMS</span>\r\n            </Button>\r\n          )}\r\n\r\n          {onSendThankYouNotice && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendThankYouNotice(sale);\r\n              }}\r\n              className=\"text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n              title=\"Send Thank You Notice\"\r\n            >\r\n              <Heart className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Send Thank You Notice</span>\r\n            </Button>\r\n          )}\r\n\r\n          {showSMSOptions && onSendThankYouSMS && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSendThankYouSMS(sale);\r\n              }}\r\n              className=\"text-purple-600 hover:text-purple-700 hover:bg-purple-50\"\r\n              title=\"Send Thank You SMS\"\r\n            >\r\n              <MessageSquare className=\"h-3 w-3\" />\r\n              <span className=\"sr-only\">Send Thank You SMS</span>\r\n            </Button>\r\n          )}\r\n\r\n          {hasPermission('sales', 'edit') && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onEditSale(sale);\r\n              }}\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Edit Sale</span>\r\n            </Button>\r\n          )}\r\n          {hasPermission('sales', 'delete') && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onDeleteSale(sale);\r\n              }}\r\n            >\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              <span className=\"sr-only\">Delete Sale</span>\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nexport default SalesTableRow;\r\n","\r\nimport React from 'react';\r\nimport { \r\n  AlertDialog, \r\n  AlertDialogContent, \r\n  AlertDialogHeader, \r\n  AlertDialogTitle, \r\n  AlertDialogDescription, \r\n  AlertDialogFooter, \r\n  AlertDialogCancel, \r\n  AlertDialogAction \r\n} from '@/components/ui/alert-dialog';\r\n\r\ninterface DeleteSaleDialogProps {\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: () => Promise<void>;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nconst DeleteSaleDialog: React.FC<DeleteSaleDialogProps> = ({ \r\n  isOpen, \r\n  onOpenChange, \r\n  onConfirm,\r\n  isDeleting = false\r\n}) => {\r\n  return (\r\n    <AlertDialog open={isOpen} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Are you sure?</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            This action cannot be undone. This will permanently delete this sale record.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction \r\n            onClick={onConfirm} \r\n            disabled={isDeleting}\r\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90 disabled:opacity-50\"\r\n          >\r\n            {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n\r\nexport default DeleteSaleDialog;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name WandSparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNjQgMy42NC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzIiIC8+CiAgPHBhdGggZD0ibTE0IDcgMyAzIiAvPgogIDxwYXRoIGQ9Ik01IDZ2NCIgLz4KICA8cGF0aCBkPSJNMTkgMTR2NCIgLz4KICA8cGF0aCBkPSJNMTAgMnYyIiAvPgogIDxwYXRoIGQ9Ik03IDhIMyIgLz4KICA8cGF0aCBkPSJNMjEgMTZoLTQiIC8+CiAgPHBhdGggZD0iTTExIDNIOSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/wand-sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst WandSparkles = createLucideIcon('WandSparkles', [\n  [\n    'path',\n    {\n      d: 'm21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72',\n      key: 'ul74o6',\n    },\n  ],\n  ['path', { d: 'm14 7 3 3', key: '1r5n42' }],\n  ['path', { d: 'M5 6v4', key: 'ilb8ba' }],\n  ['path', { d: 'M19 14v4', key: 'blhpug' }],\n  ['path', { d: 'M10 2v2', key: '7u0qdc' }],\n  ['path', { d: 'M7 8H3', key: 'zfb6yr' }],\n  ['path', { d: 'M21 16h-4', key: '1cnmox' }],\n  ['path', { d: 'M11 3H9', key: '1obp7u' }],\n]);\n\nexport default WandSparkles;\n","\r\nimport jsPDF from 'jspdf';\r\nimport { format } from 'date-fns';\r\nimport { BusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { Customer } from '@/types';\r\n\r\ninterface NoticeData {\r\n  customer: Customer;\r\n  subject: string;\r\n  content: string;\r\n  senderName?: string;\r\n}\r\n\r\nexport const generateNoticePDF = async (\r\n  noticeData: NoticeData,\r\n  businessSettings: BusinessSettings\r\n): Promise<void> => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 20;\r\n  let yPosition = margin;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    doc.setFontSize(8);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(150, 150, 150); // Light gray color\r\n    doc.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    doc.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  try {\r\n    // Set default font\r\n    doc.setFont('helvetica', 'normal');\r\n\r\n    // Helper function to check if we need a new page\r\n    const checkPageBreak = (requiredSpace: number): void => {\r\n      if (yPosition + requiredSpace > pageHeight - margin - 15) { // Reserve space for watermark\r\n        addWatermark(); // Add watermark to current page before creating new one\r\n        doc.addPage();\r\n        yPosition = margin;\r\n      }\r\n    };\r\n\r\n    // Helper function to add text with proper word wrapping and page breaks\r\n    const addWrappedText = (text: string, x: number, y: number, maxWidth: number, fontSize: number = 11): number => {\r\n      doc.setFontSize(fontSize);\r\n      const splitText = doc.splitTextToSize(text, maxWidth);\r\n\r\n      let currentY = y;\r\n\r\n      splitText.forEach((line: string) => {\r\n        // Check if we need a new page before adding the line\r\n        checkPageBreak(6); // 6 units space needed for a line\r\n\r\n        doc.text(line, x, yPosition);\r\n        yPosition += 5; // Line spacing\r\n      });\r\n\r\n      return yPosition;\r\n    };\r\n\r\n    // Business Header with Logo on left and details on right\r\n    const headerHeight = 25;\r\n\r\n    // Business Logo on the left (if available)\r\n    if (businessSettings.businessLogo) {\r\n      try {\r\n        // Create a temporary image to get actual dimensions\r\n        const img = new Image();\r\n        img.src = businessSettings.businessLogo;\r\n\r\n        // Wait for image to load to get dimensions\r\n        await new Promise((resolve, reject) => {\r\n          img.onload = resolve;\r\n          img.onerror = reject;\r\n          // If already loaded (cached), resolve immediately\r\n          if (img.complete) resolve(img);\r\n        });\r\n\r\n        // Calculate proper dimensions maintaining aspect ratio\r\n        const maxLogoWidth = 40;\r\n        const maxLogoHeight = 20;\r\n        const aspectRatio = img.width / img.height;\r\n\r\n        let logoWidth = maxLogoWidth;\r\n        let logoHeight = logoWidth / aspectRatio;\r\n\r\n        // If height exceeds max, scale down based on height\r\n        if (logoHeight > maxLogoHeight) {\r\n          logoHeight = maxLogoHeight;\r\n          logoWidth = logoHeight * aspectRatio;\r\n        }\r\n\r\n        // Add logo on the left\r\n        doc.addImage(businessSettings.businessLogo, 'JPEG', margin, yPosition, logoWidth, logoHeight);\r\n      } catch (error) {\r\n        console.error('Error adding business logo:', error);\r\n      }\r\n    }\r\n\r\n    // Business Details on the right with right alignment\r\n    const rightMargin = pageWidth - margin;\r\n    doc.setFontSize(16);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(businessSettings.businessName || 'Business Name', rightMargin, yPosition + 5, { align: 'right' });\r\n\r\n    // Add spacing between business name and details\r\n    yPosition += 12;\r\n\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n\r\n    if (businessSettings.businessAddress) {\r\n      const addressLines = doc.splitTextToSize(businessSettings.businessAddress, 80);\r\n      addressLines.forEach((line: string, index: number) => {\r\n        doc.text(line, rightMargin, yPosition + (index * 4), { align: 'right' });\r\n      });\r\n      yPosition += (addressLines.length * 4) - 4;\r\n    }\r\n\r\n    if (businessSettings.businessPhone) {\r\n      yPosition += 4;\r\n      doc.text(`Phone: ${businessSettings.businessPhone}`, rightMargin, yPosition, { align: 'right' });\r\n    }\r\n\r\n    if (businessSettings.businessEmail) {\r\n      yPosition += 4;\r\n      doc.text(`Email: ${businessSettings.businessEmail}`, rightMargin, yPosition, { align: 'right' });\r\n    }\r\n\r\n    yPosition += 8;\r\n\r\n    // Horizontal line under the header\r\n    doc.setLineWidth(0.5);\r\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\r\n    yPosition += 15;\r\n\r\n    // Date\r\n    checkPageBreak(15);\r\n    doc.setFontSize(11);\r\n    const currentDate = format(new Date(), 'MMMM d, yyyy');\r\n    doc.text(`Date: ${currentDate}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Customer Address Block\r\n    checkPageBreak(25);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(noticeData.customer.fullName || 'Valued Customer', margin, yPosition);\r\n    yPosition += 5;\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    if (noticeData.customer.location) {\r\n      yPosition = addWrappedText(noticeData.customer.location, margin, yPosition, pageWidth - 2 * margin, 11);\r\n      yPosition += 2;\r\n    }\r\n\r\n    if (noticeData.customer.email) {\r\n      checkPageBreak(8);\r\n      doc.text(noticeData.customer.email, margin, yPosition);\r\n      yPosition += 5;\r\n    }\r\n\r\n    yPosition += 8;\r\n\r\n    // Subject Line\r\n    if (noticeData.subject) {\r\n      checkPageBreak(15);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setFontSize(12);\r\n      yPosition = addWrappedText(`Re: ${noticeData.subject}`, margin, yPosition, pageWidth - 2 * margin, 12);\r\n      yPosition += 6;\r\n    }\r\n\r\n    // Salutation\r\n    checkPageBreak(15);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(11);\r\n    doc.text(`Dear ${noticeData.customer.fullName || 'Valued Customer'},`, margin, yPosition);\r\n    yPosition += 8;\r\n\r\n    // Main Content - Split by paragraphs and handle page breaks\r\n    if (noticeData.content) {\r\n      const paragraphs = noticeData.content.split('\\n\\n').filter(p => p.trim() !== '');\r\n\r\n      paragraphs.forEach((paragraph, index) => {\r\n        // Estimate space needed for this paragraph\r\n        const estimatedLines = Math.ceil(paragraph.length / 80); // Rough estimate\r\n        const estimatedSpace = estimatedLines * 5 + 10; // Line height + some padding\r\n\r\n        checkPageBreak(estimatedSpace);\r\n\r\n        yPosition = addWrappedText(paragraph.trim(), margin, yPosition, pageWidth - 2 * margin, 11);\r\n\r\n        // Add smaller gap between paragraphs (only if not the last paragraph)\r\n        if (index < paragraphs.length - 1) {\r\n          yPosition += 6;\r\n        }\r\n      });\r\n\r\n      yPosition += 10;\r\n    }\r\n\r\n    // Closing and signature section\r\n    checkPageBreak(60); // Reserve space for closing, signature, and sender info\r\n\r\n    doc.text('Yours faithfully,', margin, yPosition);\r\n    yPosition += 20; // Space for signature\r\n\r\n    // Signature (if available from business settings)\r\n    if (businessSettings.signature) {\r\n      try {\r\n        // Create a temporary image to get actual dimensions for signature\r\n        const sigImg = new Image();\r\n        sigImg.src = businessSettings.signature;\r\n\r\n        // Wait for signature image to load to get dimensions\r\n        await new Promise((resolve, reject) => {\r\n          sigImg.onload = resolve;\r\n          sigImg.onerror = reject;\r\n          // If already loaded (cached), resolve immediately\r\n          if (sigImg.complete) resolve(sigImg);\r\n        });\r\n\r\n        // Calculate proper dimensions maintaining aspect ratio for signature\r\n        const maxSigWidth = 50;\r\n        const maxSigHeight = 25;\r\n        const sigAspectRatio = sigImg.width / sigImg.height;\r\n\r\n        let signatureWidth = maxSigWidth;\r\n        let signatureHeight = signatureWidth / sigAspectRatio;\r\n\r\n        // If height exceeds max, scale down based on height\r\n        if (signatureHeight > maxSigHeight) {\r\n          signatureHeight = maxSigHeight;\r\n          signatureWidth = signatureHeight * sigAspectRatio;\r\n        }\r\n\r\n        // Add signature\r\n        doc.addImage(businessSettings.signature, 'JPEG', margin, yPosition, signatureWidth, signatureHeight);\r\n        yPosition += signatureHeight + 5;\r\n      } catch (error) {\r\n        console.error('Error adding signature:', error);\r\n        yPosition += 15; // Add space even if signature fails\r\n      }\r\n    } else {\r\n      yPosition += 15; // Add space for manual signature\r\n    }\r\n\r\n    // Sender name and business\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(11);\r\n    const senderName = noticeData.senderName || businessSettings.businessName || 'Management';\r\n    doc.text(senderName, margin, yPosition);\r\n    yPosition += 5;\r\n\r\n    if (businessSettings.businessName && noticeData.senderName) {\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(businessSettings.businessName, margin, yPosition);\r\n    }\r\n\r\n    // Add watermark to the final page\r\n    addWatermark();\r\n\r\n    // Generate filename\r\n    const customerName = noticeData.customer.fullName?.replace(/[^a-zA-Z0-9]/g, '_') || 'Customer';\r\n    const dateStr = format(new Date(), 'yyyy-MM-dd');\r\n    const filename = `Notice_${customerName}_${dateStr}.pdf`;\r\n\r\n    // Save the PDF\r\n    doc.save(filename);\r\n\r\n  } catch (error) {\r\n    console.error('Error generating notice PDF:', error);\r\n    throw new Error('Failed to generate notice PDF. Please try again.');\r\n  }\r\n};\r\n","\r\n/**\r\n * Transforms casual text into formal business language\r\n */\r\nexport const formalizeText = (text: string): string => {\r\n  if (!text || text.trim() === '') return text;\r\n\r\n  // Common casual to formal replacements\r\n  const replacements: Record<string, string> = {\r\n    // Contractions\r\n    \"can't\": \"cannot\",\r\n    \"won't\": \"will not\",\r\n    \"don't\": \"do not\",\r\n    \"didn't\": \"did not\",\r\n    \"haven't\": \"have not\",\r\n    \"hasn't\": \"has not\",\r\n    \"isn't\": \"is not\",\r\n    \"aren't\": \"are not\",\r\n    \"wasn't\": \"was not\",\r\n    \"weren't\": \"were not\",\r\n    \"I'm\": \"I am\",\r\n    \"you're\": \"you are\",\r\n    \"we're\": \"we are\",\r\n    \"they're\": \"they are\",\r\n    \"it's\": \"it is\",\r\n    \"that's\": \"that is\",\r\n    \"here's\": \"here is\",\r\n    \"there's\": \"there is\",\r\n    \"we've\": \"we have\",\r\n    \"they've\": \"they have\",\r\n    \"I've\": \"I have\",\r\n    \"you've\": \"you have\",\r\n    \r\n    // Casual words to formal\r\n    \"ok\": \"acceptable\",\r\n    \"okay\": \"acceptable\",\r\n    \"thanks\": \"thank you\",\r\n    \"hi\": \"greetings\",\r\n    \"bye\": \"goodbye\",\r\n    \"asap\": \"as soon as possible\",\r\n    \"fyi\": \"for your information\",\r\n    \"btw\": \"incidentally\",\r\n    \"etc\": \"and so forth\",\r\n    \"gonna\": \"going to\",\r\n    \"wanna\": \"want to\",\r\n    \"gotta\": \"have to\",\r\n    \"kinda\": \"somewhat\",\r\n    \"sorta\": \"somewhat\",\r\n    \r\n    // Business improvements\r\n    \"get\": \"receive\",\r\n    \"got\": \"received\",\r\n    \"give\": \"provide\",\r\n    \"gave\": \"provided\",\r\n    \"ask\": \"request\",\r\n    \"asked\": \"requested\",\r\n    \"tell\": \"inform\",\r\n    \"told\": \"informed\",\r\n    \"show\": \"demonstrate\",\r\n    \"showed\": \"demonstrated\",\r\n    \"help\": \"assist\",\r\n    \"helped\": \"assisted\",\r\n    \"fix\": \"resolve\",\r\n    \"fixed\": \"resolved\",\r\n    \"buy\": \"purchase\",\r\n    \"bought\": \"purchased\",\r\n    \"sell\": \"offer\",\r\n    \"sold\": \"provided\"\r\n  };\r\n\r\n  let formalizedText = text;\r\n\r\n  // Apply replacements (case-insensitive for whole words only)\r\n  Object.entries(replacements).forEach(([casual, formal]) => {\r\n    const regex = new RegExp(`\\\\b${casual}\\\\b`, 'gi');\r\n    formalizedText = formalizedText.replace(regex, formal);\r\n  });\r\n\r\n  // Capitalize first letter of sentences\r\n  formalizedText = formalizedText.replace(/(^|\\. )([a-z])/g, (match, prefix, letter) => {\r\n    return prefix + letter.toUpperCase();\r\n  });\r\n\r\n  // Ensure proper sentence ending\r\n  formalizedText = formalizedText.trim();\r\n  if (!formalizedText.endsWith('.') && !formalizedText.endsWith('!') && !formalizedText.endsWith('?')) {\r\n    formalizedText += '.';\r\n  }\r\n\r\n  return formalizedText;\r\n};\r\n\r\n/**\r\n * Enhances text with more professional language and structure\r\n */\r\nexport const enhanceForBusiness = (text: string): string => {\r\n  if (!text || text.trim() === '') return text;\r\n\r\n  let enhanced = formalizeText(text);\r\n\r\n  // Add professional opening phrases if the text seems too direct\r\n  if (!enhanced.toLowerCase().includes('we are') && !enhanced.toLowerCase().includes('we would like') && !enhanced.toLowerCase().includes('please')) {\r\n    if (enhanced.toLowerCase().startsWith('our') || enhanced.toLowerCase().startsWith('the')) {\r\n      enhanced = `We would like to inform you that ${enhanced.charAt(0).toLowerCase() + enhanced.slice(1)}`;\r\n    }\r\n  }\r\n\r\n  // Ensure polite language\r\n  if (enhanced.toLowerCase().includes('you must') || enhanced.toLowerCase().includes('you have to')) {\r\n    enhanced = enhanced.replace(/you must/gi, 'we kindly request that you');\r\n    enhanced = enhanced.replace(/you have to/gi, 'we would appreciate if you could');\r\n  }\r\n\r\n  return enhanced;\r\n};\r\n","\r\nexport interface NoticeTemplate {\r\n  id: string;\r\n  name: string;\r\n  subject: string;\r\n  content: string;\r\n  category: 'payment' | 'policy' | 'general' | 'announcement' | 'gratitude';\r\n}\r\n\r\nexport const noticeTemplates: NoticeTemplate[] = [\r\n  {\r\n    id: 'payment_reminder',\r\n    name: 'Payment Reminder',\r\n    subject: 'Payment Reminder - Account Status',\r\n    content: `We hope this letter finds you well. We are writing to kindly remind you about your outstanding payment.\r\n\r\nWe appreciate your prompt attention to this matter and thank you for your continued business.`,\r\n    category: 'payment'\r\n  },\r\n  {\r\n    id: 'policy_update',\r\n    name: 'Policy Update',\r\n    subject: 'Important Update to Our Business Policies',\r\n    content: `We are writing to inform you of important updates to our business policies that may affect your account.\r\n\r\nThese changes will take effect shortly. We appreciate your understanding and continued partnership.`,\r\n    category: 'policy'\r\n  },\r\n  {\r\n    id: 'thank_you',\r\n    name: 'Thank You Letter',\r\n    subject: 'Thank You for Your Business',\r\n    content: `We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.\r\n\r\nWe look forward to serving you for many years to come.`,\r\n    category: 'gratitude'\r\n  },\r\n  {\r\n    id: 'service_announcement',\r\n    name: 'Service Announcement',\r\n    subject: 'Important Service Update',\r\n    content: `We are excited to share some important updates about our services that will enhance your experience with us.\r\n\r\nWe believe these improvements will provide you with even better service and value.`,\r\n    category: 'announcement'\r\n  },\r\n  {\r\n    id: 'account_update',\r\n    name: 'Account Status Update',\r\n    subject: 'Account Status Update',\r\n    content: `We are writing to provide you with an important update regarding your account with us.\r\n\r\nIf you have any questions or concerns, please don't hesitate to contact us.`,\r\n    category: 'general'\r\n  },\r\n  {\r\n    id: 'general_notice',\r\n    name: 'General Business Communication',\r\n    subject: 'Business Communication',\r\n    content: `We hope this message finds you well. We wanted to reach out to you regarding an important matter.\r\n\r\nThank you for your attention to this matter.`,\r\n    category: 'general'\r\n  }\r\n];\r\n\r\nexport const getTemplateById = (id: string): NoticeTemplate | undefined => {\r\n  return noticeTemplates.find(template => template.id === id);\r\n};\r\n\r\nexport const getTemplatesByCategory = (category: string): NoticeTemplate[] => {\r\n  if (category === 'all') return noticeTemplates;\r\n  return noticeTemplates.filter(template => template.category === category);\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNy45IDIwQTkgOSAwIDEgMCA0IDE2LjFMMiAyMloiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/message-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageCircle = createLucideIcon('MessageCircle', [\n  ['path', { d: 'M7.9 20A9 9 0 1 0 4 16.1L2 22Z', key: 'vv11sd' }],\n]);\n\nexport default MessageCircle;\n","\r\nimport React from 'react';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { NoticeTemplate, noticeTemplates } from '@/utils/noticeTemplates';\r\n\r\ninterface NoticeTemplateSelectorProps {\r\n  selectedTemplate: string;\r\n  onTemplateChange: (templateId: string) => void;\r\n  onTemplateSelect: (template: NoticeTemplate) => void;\r\n}\r\n\r\nconst NoticeTemplateSelector: React.FC<NoticeTemplateSelectorProps> = ({\r\n  selectedTemplate,\r\n  onTemplateChange,\r\n  onTemplateSelect\r\n}) => {\r\n  const handleTemplateChange = (templateId: string) => {\r\n    onTemplateChange(templateId);\r\n    if (templateId === 'none') {\r\n      // Clear template selection\r\n      return;\r\n    }\r\n    const template = noticeTemplates.find(t => t.id === templateId);\r\n    if (template) {\r\n      onTemplateSelect(template);\r\n    }\r\n  };\r\n\r\n  const getCategoryColor = (category: string) => {\r\n    const colors = {\r\n      payment: 'bg-red-50 text-red-700 border-red-200',\r\n      policy: 'bg-blue-50 text-blue-700 border-blue-200',\r\n      general: 'bg-gray-50 text-gray-700 border-gray-200',\r\n      announcement: 'bg-green-50 text-green-700 border-green-200',\r\n      gratitude: 'bg-purple-50 text-purple-700 border-purple-200'\r\n    };\r\n    return colors[category as keyof typeof colors] || colors.general;\r\n  };\r\n\r\n  // Type guard to ensure we have a valid array\r\n  const templates = Array.isArray(noticeTemplates) ? noticeTemplates : [];\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"text-sm font-medium text-gray-700\">\r\n        Choose a Template (Optional)\r\n      </label>\r\n      <Select value={selectedTemplate} onValueChange={handleTemplateChange}>\r\n        <SelectTrigger className=\"w-full\">\r\n          <SelectValue placeholder=\"Select a notice template or start from scratch\" />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"max-h-80\">\r\n          <SelectItem value=\"none\">Start from scratch</SelectItem>\r\n          {templates.length > 0 && templates.map((template) => (\r\n            <SelectItem key={template.id} value={template.id}>\r\n              <div className=\"flex items-center justify-between w-full\">\r\n                <span className=\"font-medium\">{template.name}</span>\r\n                <Badge \r\n                  variant=\"outline\" \r\n                  className={`ml-2 text-xs ${getCategoryColor(template.category)}`}\r\n                >\r\n                  {template.category}\r\n                </Badge>\r\n              </div>\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n      \r\n      {selectedTemplate && selectedTemplate !== 'none' && (\r\n        <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            <strong>Template selected:</strong> {templates.find(t => t.id === selectedTemplate)?.name}\r\n          </p>\r\n          <p className=\"text-xs text-blue-600 mt-1\">\r\n            The template content has been added to your message. You can edit it as needed.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoticeTemplateSelector;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { FileText, Wand2, Download, AlertCircle, MessageSquare } from 'lucide-react';\r\nimport { Customer, Sale } from '@/types';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { generateNoticePDF } from '@/utils/generateNoticePDF';\r\nimport { formalizeText, enhanceForBusiness } from '@/utils/formalizeText';\r\nimport { NoticeTemplate, getTemplateById } from '@/utils/noticeTemplates';\r\nimport { openSMSApp, formatMessageForSMS, canSendSMS, openWhatsApp } from '@/utils/smsUtils';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { MessageCircle } from 'lucide-react';\r\nimport NoticeTemplateSelector from './NoticeTemplateSelector';\r\n\r\ninterface BusinessNoticeGeneratorProps {\r\n  customer: Customer;\r\n  open: boolean;\r\n  onClose: () => void;\r\n  defaultTemplate?: string;\r\n  sale?: Sale;\r\n}\r\n\r\nconst BusinessNoticeGenerator: React.FC<BusinessNoticeGeneratorProps> = ({\r\n  customer,\r\n  open,\r\n  onClose,\r\n  defaultTemplate,\r\n  sale\r\n}) => {\r\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('none');\r\n  const [subject, setSubject] = useState<string>('');\r\n  const [message, setMessage] = useState<string>('');\r\n  const [senderName, setSenderName] = useState<string>('');\r\n  const [isGenerating, setIsGenerating] = useState<boolean>(false);\r\n  const [showPreview, setShowPreview] = useState<boolean>(false);\r\n\r\n  const { settings } = useBusinessSettings();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  // Load default template when dialog opens\r\n  useEffect(() => {\r\n    if (open && defaultTemplate) {\r\n      const template = getTemplateById(defaultTemplate);\r\n      if (template) {\r\n        setSelectedTemplate(defaultTemplate);\r\n        setSubject(template.subject);\r\n\r\n        // If it's a thank you template and we have sale data, enhance the content\r\n        if (defaultTemplate === 'thank_you' && sale) {\r\n          const saleTotal = sale.items.reduce((total, item) => {\r\n            const itemSubtotal = item.price * item.quantity;\r\n            const discountAmount = item.discountType === 'amount'\r\n              ? (item.discountAmount || 0)\r\n              : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n            return total + (itemSubtotal - discountAmount);\r\n          }, 0);\r\n\r\n          // Add tax if applicable\r\n          const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n          const totalWithTax = saleTotal + taxAmount;\r\n\r\n          // Create items list\r\n          const itemsList = sale.items.map(item =>\r\n            `â€¢ ${item.description} (Qty: ${item.quantity})`\r\n          ).join('\\n');\r\n\r\n          const enhancedContent = `${template.content}\r\n\r\nReceipt Number: ${sale.receiptNumber}\r\n\r\nItems Purchased:\r\n${itemsList}\r\n\r\nTotal Amount: ${settings.currency} ${totalWithTax.toFixed(2)}\r\n\r\nIn case of any inquiries please call ${settings.businessPhone && settings.businessPhone !== '(123) 456-7890' ? settings.businessPhone : 'our office'}.\r\n\r\nWe appreciate your business and look forward to serving you again.`;\r\n\r\n          setMessage(enhancedContent);\r\n        } else {\r\n          setMessage(template.content);\r\n        }\r\n      }\r\n    }\r\n  }, [open, defaultTemplate, sale, settings.currency, settings.businessPhone]);\r\n\r\n  const handleTemplateSelect = (template: NoticeTemplate) => {\r\n    setSubject(template.subject);\r\n    setMessage(template.content);\r\n  };\r\n\r\n  const handleMakeFormal = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"No message to enhance\",\r\n        description: \"Please enter your message first.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const enhanced = enhanceForBusiness(message);\r\n      setMessage(enhanced);\r\n\r\n      toast({\r\n        title: \"Message enhanced!\",\r\n        description: \"Your message has been made more formal and professional.\",\r\n      });\r\n    } catch (error) {\r\n      console.error('Error enhancing message:', error);\r\n      toast({\r\n        title: \"Enhancement failed\",\r\n        description: \"Could not enhance the message. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleGeneratePDF = async () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before generating the notice.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n\r\n    try {\r\n      await generateNoticePDF(\r\n        {\r\n          customer,\r\n          subject: subject || 'Business Notice',\r\n          content: message,\r\n          senderName: senderName || undefined\r\n        },\r\n        settings\r\n      );\r\n\r\n      toast({\r\n        title: \"Notice generated successfully!\",\r\n        description: \"Your professional business notice has been downloaded as a PDF.\",\r\n      });\r\n\r\n      // Reset form after successful generation\r\n      setMessage('');\r\n      setSubject('');\r\n      setSelectedTemplate('none');\r\n      setSenderName('');\r\n      onClose();\r\n\r\n    } catch (error) {\r\n      console.error('Error generating notice:', error);\r\n      toast({\r\n        title: \"Generation failed\",\r\n        description: \"Failed to generate the notice. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMessage('');\r\n    setSubject('');\r\n    setSelectedTemplate('none');\r\n    setSenderName('');\r\n    setShowPreview(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleSendSMS = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before sending SMS.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!canSendSMS(customer)) {\r\n      toast({\r\n        title: \"Phone number required\",\r\n        description: \"Customer phone number is not available.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Format the message for SMS\r\n      const fullMessage = `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`;\r\n\r\n      const formattedMessage = formatMessageForSMS(fullMessage, settings.businessName);\r\n\r\n      openSMSApp({\r\n        phoneNumber: customer.phoneNumber!,\r\n        message: formattedMessage\r\n      });\r\n\r\n      toast({\r\n        title: \"SMS app opened\",\r\n        description: \"Your message has been prepared in the SMS app.\",\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error sending SMS:', error);\r\n      toast({\r\n        title: \"SMS failed\",\r\n        description: \"Failed to open SMS app. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const showSMSOption = isMobile && canSendSMS(customer);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-base sm:text-lg\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            Send Notice to {customer.fullName}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2\">\r\n          {/* Compose Section */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h3 className=\"text-base sm:text-lg font-semibold mb-3\">Compose Your Notice</h3>\r\n\r\n              {/* Template Selector */}\r\n              <NoticeTemplateSelector\r\n                selectedTemplate={selectedTemplate}\r\n                onTemplateChange={setSelectedTemplate}\r\n                onTemplateSelect={handleTemplateSelect}\r\n              />\r\n            </div>\r\n\r\n            {/* Subject */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"subject\" className=\"text-sm\">Subject Line</Label>\r\n              <Input\r\n                id=\"subject\"\r\n                value={subject}\r\n                onChange={(e) => setSubject(e.target.value)}\r\n                placeholder=\"Enter the subject of your notice\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label htmlFor=\"message\" className=\"text-sm\">Your Message</Label>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleMakeFormal}\r\n                  className=\"text-[10px] h-7 px-2\"\r\n                  disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                >\r\n                  <Wand2 className=\"h-3 w-3 mr-1\" />\r\n                  Make Formal\r\n                </Button>\r\n              </div>\r\n              <Textarea\r\n                id=\"message\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"What do you want to inform the customer about?\"\r\n                rows={isMobile ? 6 : 8}\r\n                className=\"resize-none text-sm\"\r\n              />\r\n              <p className=\"text-[10px] text-gray-500 leading-tight\">\r\n                {selectedTemplate !== 'none' ? 'Template content loaded. Edit as needed.' : 'Write in your own words - we\\'ll format it professionally.'}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Sender Name */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"sender\" className=\"text-sm\">Sender Name (Optional)</Label>\r\n              <Input\r\n                id=\"sender\"\r\n                value={senderName}\r\n                onChange={(e) => setSenderName(e.target.value)}\r\n                placeholder=\"Your name (defaults to business name)\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Business Settings Alert */}\r\n            {(!settings.businessLogo || !settings.signature) && (\r\n              <Card className=\"border-amber-200 bg-amber-50\">\r\n                <CardContent className=\"p-3\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <AlertCircle className=\"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                    <div className=\"text-[11px] sm:text-xs\">\r\n                      <p className=\"text-amber-800 font-medium\">Enhance your notices</p>\r\n                      <p className=\"text-amber-700\">\r\n                        {!settings.businessLogo && 'Add logo '}\r\n                        {(!settings.businessLogo && !settings.signature) && 'and '}\r\n                        {!settings.signature && 'upload signature '}\r\n                        in settings for better notices.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n\r\n          {/* Preview Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold\">Preview</h3>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setShowPreview(!showPreview)}\r\n                className=\"h-8 text-xs\"\r\n              >\r\n                {showPreview ? 'Hide' : 'Show'} Preview\r\n              </Button>\r\n            </div>\r\n\r\n            {showPreview && (\r\n              <Card className=\"border-gray-200 shadow-sm\">\r\n                <CardContent className=\"p-4 overflow-x-hidden\">\r\n                  <div className=\"space-y-3 text-[11px] sm:text-sm\">\r\n                    {/* Header */}\r\n                    <div className=\"border-b pb-2\">\r\n                      <div className=\"font-bold text-sm sm:text-base\">{settings.businessName || 'Your Business'}</div>\r\n                      <div className=\"text-gray-600 space-y-0.5\">\r\n                        {settings.businessAddress && <div className=\"truncate\">{settings.businessAddress}</div>}\r\n                        {settings.businessPhone && <div>Phone: {settings.businessPhone}</div>}\r\n                        {settings.businessEmail && <div className=\"truncate\">Email: {settings.businessEmail}</div>}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Date and Customer */}\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                      <div>Date: {new Date().toLocaleDateString()}</div>\r\n                      <div className=\"font-medium truncate\">{customer.fullName}</div>\r\n                    </div>\r\n\r\n                    {/* Subject */}\r\n                    {subject && (\r\n                      <div className=\"bg-gray-50 p-2 rounded\">\r\n                        <strong>Re: {subject}</strong>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Content */}\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"italic\">Dear {customer.fullName},</div>\r\n                      <div className=\"whitespace-pre-wrap leading-relaxed text-gray-800\">\r\n                        {message || 'Your message will appear here...'}\r\n                      </div>\r\n                      <div>Yours faithfully,</div>\r\n                      <div className=\"mt-4 font-bold\">\r\n                        {senderName || settings.businessName || 'Management'}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions - Responsive Footer */}\r\n        <div className=\"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t mt-2\">\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            <Button variant=\"outline\" onClick={handleClose} className=\"flex-1 sm:flex-none h-10 text-sm\">\r\n              Cancel\r\n            </Button>\r\n            {canSendSMS(customer) && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  openWhatsApp({\r\n                    phoneNumber: customer.phoneNumber!,\r\n                    message: `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`\r\n                  });\r\n                  toast({\r\n                    title: \"WhatsApp opened\",\r\n                    description: \"Your message has been prepared in WhatsApp.\",\r\n                  });\r\n                }}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-green-600 hover:text-green-700 hover:bg-green-50 h-10 text-sm\"\r\n              >\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n                WhatsApp\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            {showSMSOption && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSendSMS}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-10 text-sm\"\r\n              >\r\n                <MessageSquare className=\"h-4 w-4\" />\r\n                SMS\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={handleGeneratePDF}\r\n              disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...' || isGenerating}\r\n              className=\"flex-1 sm:flex-none gap-2 h-10 text-sm\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n              {isGenerating ? 'PDF...' : 'PDF'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BusinessNoticeGenerator;\r\n","\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport { Customer } from '@/types';\r\nimport { Sale } from '@/types';\r\nimport { BusinessSettings } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { formatNumber } from '@/lib/utils';\r\n// Note: installment_payments table logic is being deprecated/removed in this migration step\r\n// or handled via general finance/sale actions if implemented.\r\n\r\nexport const generatePaymentReminderPDF = async (\r\n  customer: Customer,\r\n  unpaidSales: Sale[],\r\n  totalAmountDue: number,\r\n  settings: BusinessSettings,\r\n  customMessage?: string,\r\n  outputType: 'save' | 'blob' | 'dataurl' = 'save'\r\n): Promise<string | Blob | void> => {\r\n  try {\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    const margin = 20;\r\n\r\n    // Function to add watermark to current page\r\n    const addWatermark = () => {\r\n      doc.setFontSize(8);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setTextColor(150, 150, 150); // Light gray color\r\n      doc.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n      doc.setTextColor(0, 0, 0); // Reset to black\r\n    };\r\n\r\n    // Header\r\n    doc.setFontSize(20);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('PAYMENT REMINDER NOTICE', pageWidth / 2, 30, { align: 'center' });\r\n\r\n    // Business details\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'normal');\r\n    let yPos = 50;\r\n\r\n    doc.text(settings.businessName, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(settings.businessAddress, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(`Phone: ${settings.businessPhone}`, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(`Email: ${settings.businessEmail}`, margin, yPos);\r\n    yPos += 15;\r\n\r\n    // Date and customer info\r\n    doc.text(`Date: ${format(new Date(), 'MMMM d, yyyy')}`, pageWidth - margin - 60, 50, { align: 'left' });\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('TO:', margin, yPos);\r\n    yPos += 8;\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(customer.fullName, margin, yPos);\r\n    yPos += 6;\r\n\r\n    if (customer.phoneNumber) {\r\n      doc.text(`Phone: ${customer.phoneNumber}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    if (customer.email) {\r\n      doc.text(`Email: ${customer.email}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    if (customer.location) {\r\n      doc.text(`Address: ${customer.location}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    yPos += 15;\r\n\r\n    // Reminder message\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Dear ${customer.fullName},`, margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Use custom message if provided, otherwise use default\r\n    const reminderText = customMessage || 'Our records show that you have pending payments for the following items purchased on credit. We kindly request you to complete payment at your earliest convenience.\\n\\nPlease reach out to us if you need any assistance or clarification.';\r\n\r\n    const splitText = doc.splitTextToSize(reminderText, pageWidth - 2 * margin);\r\n    doc.text(splitText, margin, yPos);\r\n    yPos += splitText.length * 6 + 10;\r\n\r\n    const tableHeaders = ['Invoice #', 'Product Name', 'Qty', 'Price', 'Total', 'Sale Date', 'Sale Total'];\r\n\r\n    // Prepare table data\r\n    const allItems = unpaidSales.flatMap(sale => {\r\n      const saleTotal = sale.items.reduce((itemSum, item) => itemSum + (item.price * item.quantity), 0);\r\n      const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n      const totalWithTax = saleTotal + taxAmount;\r\n\r\n      return sale.items.map(item => [\r\n        sale.receiptNumber,\r\n        item.description,\r\n        item.quantity.toString(),\r\n        `${settings.currency} ${formatNumber(item.price)}`,\r\n        `${settings.currency} ${formatNumber(item.price * item.quantity)}`,\r\n        format(sale.date, 'MMM d, yyyy'),\r\n        `${settings.currency} ${formatNumber(totalWithTax)}`\r\n      ]);\r\n    });\r\n\r\n    // Add total row\r\n    allItems.push([\r\n      '', '', '', '', 'TOTAL OUTSTANDING:', `${settings.currency} ${formatNumber(totalAmountDue)}`, ''\r\n    ]);\r\n\r\n    // Create table using autoTable\r\n    autoTable(doc, {\r\n      startY: yPos,\r\n      head: [tableHeaders],\r\n      body: allItems,\r\n      theme: 'grid',\r\n      headStyles: {\r\n        fillColor: [255, 145, 77], // Orange color\r\n        textColor: 255,\r\n        fontStyle: 'bold'\r\n      },\r\n      bodyStyles: {\r\n        fontSize: 10\r\n      },\r\n      didParseCell: function (data: any) {\r\n        if (data.row.index === allItems.length - 1) {\r\n          data.cell.styles.fillColor = [255, 200, 150];\r\n          data.cell.styles.fontStyle = 'bold';\r\n        }\r\n      },\r\n      margin: { left: margin, right: margin }\r\n    });\r\n\r\n    // Footer message\r\n    const finalY = (doc as any).lastAutoTable.finalY + 20;\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Thank you for your continued support.', margin, finalY);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(10);\r\n    doc.text(`${settings.businessName} - Payment Reminder`, margin, finalY + 15);\r\n\r\n    // Add watermark\r\n    addWatermark();\r\n\r\n    const fileName = `Payment_Reminder_${customer.fullName.replace(/\\s+/g, '_')}_${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n\r\n    if (outputType === 'blob') {\r\n      return doc.output('blob');\r\n    } else if (outputType === 'dataurl') {\r\n      return doc.output('datauristring');\r\n    } else {\r\n      doc.save(fileName);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error generating payment reminder PDF:', error);\r\n    throw new Error('Failed to generate payment reminder PDF');\r\n  }\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { Drawer, DrawerContent, DrawerHeader, DrawerTitle, DrawerFooter, DrawerClose } from '@/components/ui/drawer';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Download, Printer, Share2, X, Loader2, MessageCircle } from 'lucide-react';\r\nimport { Sale, Customer, BusinessSettings } from '@/types';\r\nimport { generatePaymentReminderPDF } from '@/utils/generatePaymentReminderPDF';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { openWhatsApp } from '@/utils/smsUtils';\r\n\r\ninterface PaymentReminderPreviewDialogProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    sale: Sale | null;\r\n    customer?: Customer | null;\r\n    unpaidSales?: Sale[];\r\n}\r\n\r\nconst PaymentReminderPreviewDialog: React.FC<PaymentReminderPreviewDialogProps> = ({\r\n    isOpen,\r\n    onOpenChange,\r\n    sale,\r\n    customer,\r\n    unpaidSales\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { settings, isLoading: settingsLoading } = useBusinessSettings();\r\n    const { toast } = useToast();\r\n    const [pdfUrl, setPdfUrl] = useState<string | null>(null);\r\n    const [pdfBlob, setPdfBlob] = useState<Blob | null>(null);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    // Prepare customer and sales data\r\n    const targetCustomer: Customer | null = customer || (sale ? {\r\n        id: 'placeholder',\r\n        fullName: sale.customerName,\r\n        phoneNumber: sale.customerContact,\r\n        email: null,\r\n        location: sale.customerAddress,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        loyaltyPoints: 0,\r\n        totalSpent: 0,\r\n        lastVisit: null,\r\n        categoryId: null,\r\n        birthday: null,\r\n        socialMedia: null,\r\n        gender: null,\r\n        tags: null,\r\n        notes: null\r\n    } as Customer : null);\r\n\r\n    const targetSales = unpaidSales || (sale ? [sale] : []);\r\n\r\n    // Calculate total amount due\r\n    const totalAmountDue = targetSales.reduce((sum, s) => {\r\n        const subtotal = s.items.reduce((itemSum, item) => itemSum + (item.price * item.quantity), 0);\r\n        const taxAmount = subtotal * ((s.taxRate || 0) / 100);\r\n        return sum + subtotal + taxAmount;\r\n    }, 0);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && targetCustomer && targetSales.length > 0 && settings) {\r\n            generatePreview();\r\n        } else if (!isOpen) {\r\n            if (pdfUrl) {\r\n                URL.revokeObjectURL(pdfUrl);\r\n                setPdfUrl(null);\r\n            }\r\n        }\r\n    }, [isOpen, settings]);\r\n\r\n    const generatePreview = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n\r\n        setIsGenerating(true);\r\n        try {\r\n            const blob = await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'blob'\r\n            ) as Blob;\r\n\r\n            const url = URL.createObjectURL(blob);\r\n            setPdfUrl(url);\r\n            setPdfBlob(blob);\r\n        } catch (error) {\r\n            console.error('Error generating preview:', error);\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to generate PDF preview.\",\r\n                variant: \"destructive\"\r\n            });\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n        try {\r\n            await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'save'\r\n            );\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to download PDF.\",\r\n                variant: \"destructive\"\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        if (pdfUrl) {\r\n            const printWindow = window.open(pdfUrl);\r\n            if (printWindow) {\r\n                printWindow.addEventListener('load', () => {\r\n                    printWindow.print();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        const fileName = `Payment_Reminder_${targetCustomer?.fullName.replace(/\\s+/g, '_') || 'Customer'}.pdf`;\r\n        const message = `Hello ${targetCustomer?.fullName || 'Customer'}, this is a payment reminder from ${settings?.businessName || 'our business'} regarding your outstanding balance of ${settings?.currency || ''} ${totalAmountDue.toLocaleString()}.`;\r\n\r\n        if (navigator.share && pdfBlob) {\r\n            try {\r\n                const file = new File([pdfBlob], fileName, { type: 'application/pdf' });\r\n\r\n                // Check if sharing files is supported\r\n                if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n                    await navigator.share({\r\n                        files: [file],\r\n                        title: 'Payment Reminder',\r\n                        text: message,\r\n                    });\r\n                    return; // Success\r\n                }\r\n\r\n                // If can't share files, try sharing just text\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else if (navigator.share) {\r\n            // No blob yet, just share text\r\n            try {\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else {\r\n            // Fallback: copy to clipboard\r\n            try {\r\n                await navigator.clipboard.writeText(message);\r\n                toast({\r\n                    title: \"Copied to clipboard\",\r\n                    description: \"Payment reminder summary copied to clipboard.\",\r\n                });\r\n            } catch (err) {\r\n                toast({\r\n                    title: \"Share failed\",\r\n                    description: \"Could not share or copy the message.\",\r\n                    variant: \"destructive\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const Content = () => (\r\n        <div className=\"flex flex-col h-full space-y-4\">\r\n            <div className=\"flex flex-wrap gap-2 justify-center py-2 order-first\">\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleShare}\r\n                    className=\"flex-1 min-w-[120px] bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100\"\r\n                >\r\n                    <Share2 className=\"h-4 w-4 mr-2 text-blue-600\" />\r\n                    Share\r\n                </Button>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handlePrint}\r\n                    className=\"flex-1 min-w-[120px]\"\r\n                    disabled={!pdfUrl}\r\n                >\r\n                    <Printer className=\"h-4 w-4 mr-2\" />\r\n                    Print\r\n                </Button>\r\n                <Button\r\n                    onClick={handleDownload}\r\n                    className=\"flex-1 min-w-[120px] bg-orange-500 hover:bg-orange-600\"\r\n                >\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Download\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 bg-gray-100 rounded-lg overflow-hidden min-h-[600px] relative\">\r\n                {isGenerating ? (\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center space-y-4 bg-white/50 backdrop-blur-sm\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-orange-500\" />\r\n                        <p className=\"text-sm font-medium text-gray-600\">Generating preview...</p>\r\n                    </div>\r\n                ) : pdfUrl ? (\r\n                    <iframe\r\n                        src={pdfUrl}\r\n                        className=\"w-full h-full min-h-[600px] border-none\"\r\n                        title=\"Payment Reminder Preview\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <p className=\"text-sm text-gray-500\">Preview not available.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (isMobile) {\r\n        return (\r\n            <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n                <DrawerContent className=\"max-h-[95vh]\">\r\n                    <DrawerHeader className=\"border-b pb-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <DrawerTitle>Payment Reminder Preview</DrawerTitle>\r\n                            <DrawerClose asChild>\r\n                                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\r\n                                    <X className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </DrawerClose>\r\n                        </div>\r\n                    </DrawerHeader>\r\n                    <div className=\"px-4 py-4 overflow-y-auto\">\r\n                        <Content />\r\n                    </div>\r\n                    <DrawerFooter className=\"pt-2 border-t\">\r\n                        <Button variant=\"outline\" onClick={() => onOpenChange(false)}>Close</Button>\r\n                    </DrawerFooter>\r\n                </DrawerContent>\r\n            </Drawer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl max-h-[90vh] flex flex-col p-0 overflow-hidden\">\r\n                <DialogHeader className=\"px-6 py-4 border-b\">\r\n                    <DialogTitle>Payment Reminder Preview</DialogTitle>\r\n                </DialogHeader>\r\n                <div className=\"flex-1 overflow-y-auto p-6 bg-gray-50/50\">\r\n                    <Content />\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default PaymentReminderPreviewDialog;\r\n","import React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Plus, Edit, Trash2, Settings } from 'lucide-react';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\nimport { SalesCategory } from '@/types';\r\nconst SalesCategoryManager = () => {\r\n  const {\r\n    categories,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory,\r\n    createDefaultCategories\r\n  } = useSalesCategories();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [editingCategory, setEditingCategory] = useState<SalesCategory | null>(null);\r\n  const [editName, setEditName] = useState('');\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [categoryToDelete, setCategoryToDelete] = useState<SalesCategory | null>(null);\r\n  const handleCreate = async () => {\r\n    if (!newCategoryName.trim()) return;\r\n    const success = await createCategory(newCategoryName.trim());\r\n    if (success) {\r\n      setNewCategoryName('');\r\n    }\r\n  };\r\n  const handleEdit = async () => {\r\n    if (!editingCategory || !editName.trim()) return;\r\n    const success = await updateCategory(editingCategory.id, editName.trim());\r\n    if (success) {\r\n      setEditingCategory(null);\r\n      setEditName('');\r\n    }\r\n  };\r\n  const handleDelete = async () => {\r\n    if (!categoryToDelete) return;\r\n    const success = await deleteCategory(categoryToDelete.id);\r\n    if (success) {\r\n      setDeleteDialogOpen(false);\r\n      setCategoryToDelete(null);\r\n    }\r\n  };\r\n  const startEdit = (category: SalesCategory) => {\r\n    setEditingCategory(category);\r\n    setEditName(category.name);\r\n  };\r\n  const startDelete = (category: SalesCategory) => {\r\n    setCategoryToDelete(category);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n  const handleCreateDefaults = async () => {\r\n    await createDefaultCategories();\r\n  };\r\n  return <>\r\n      <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n        <DialogTrigger asChild>\r\n          \r\n        </DialogTrigger>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>Manage Sales Categories</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Create new category */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"new-category\">Add New Category</Label>\r\n              <div className=\"flex gap-2\">\r\n                <Input id=\"new-category\" placeholder=\"Category name\" value={newCategoryName} onChange={e => setNewCategoryName(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleCreate()} />\r\n                <Button onClick={handleCreate} disabled={!newCategoryName.trim()}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Categories list */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <Label>Existing Categories</Label>\r\n                {categories.length === 0 && <Button variant=\"outline\" size=\"sm\" onClick={handleCreateDefaults}>\r\n                    Create Default Categories\r\n                  </Button>}\r\n              </div>\r\n              \r\n              {categories.length > 0 ? <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n                  {categories.map(category => <div key={category.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                      {editingCategory?.id === category.id ? <div className=\"flex gap-2 flex-1\">\r\n                          <Input value={editName} onChange={e => setEditName(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleEdit()} className=\"flex-1\" />\r\n                          <Button size=\"sm\" onClick={handleEdit}>Save</Button>\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => setEditingCategory(null)}>\r\n                            Cancel\r\n                          </Button>\r\n                        </div> : <>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"font-medium\">{category.name}</span>\r\n                            {category.is_default && <span className=\"text-xs bg-muted px-2 py-1 rounded\">Default</span>}\r\n                          </div>\r\n                          <div className=\"flex gap-2\">\r\n                            <Button size=\"sm\" variant=\"outline\" onClick={() => startEdit(category)}>\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"sm\" variant=\"outline\" onClick={() => startDelete(category)}>\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </>}\r\n                    </div>)}\r\n                </div> : <p className=\"text-muted-foreground text-sm\">No categories found. Create your first category above.</p>}\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Category</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete \"{categoryToDelete?.name}\"? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete}>Delete</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>;\r\n};\r\nexport default SalesCategoryManager;","import React, { useMemo } from 'react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Sale } from '@/types';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { TrendingUp, DollarSign, Wallet } from 'lucide-react';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface SalesSummaryCardsProps {\r\n  sales: Sale[];\r\n  currency: string;\r\n}\r\n\r\nexport const SalesSummaryCards: React.FC<SalesSummaryCardsProps> = ({ sales, currency }) => {\r\n  const { formatFinancial, canViewCostPrice, canViewProfit, canViewTotalAmount, canViewSellingPrice } = useFinancialVisibility();\r\n\r\n  const summary = useMemo(() => {\r\n    return sales.reduce(\r\n      (acc, sale) => {\r\n        // Calculate subtotal from items with discount considerations\r\n        // Logic must match SalesTableRow to ensure consistency\r\n        const subtotal = sale.items.reduce((total, item) => {\r\n          const itemSubtotal = item.price * item.quantity;\r\n          const discountAmount = item.discountType === 'amount'\r\n            ? (item.discountAmount || 0)\r\n            : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n          return total + (itemSubtotal - discountAmount);\r\n        }, 0);\r\n\r\n        // Calculate tax amount\r\n        const taxRate = sale.taxRate || 0;\r\n        const taxAmount = subtotal * (taxRate / 100);\r\n\r\n        // Total including tax\r\n        const saleTotal = subtotal + taxAmount;\r\n\r\n        // Calculate total cost\r\n        const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n        return {\r\n          totalSales: acc.totalSales + saleTotal,\r\n          totalCost: acc.totalCost + totalCost,\r\n          totalProfit: acc.totalProfit + (saleTotal - totalCost)\r\n        };\r\n      },\r\n      { totalSales: 0, totalCost: 0, totalProfit: 0 }\r\n    );\r\n  }, [sales]);\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <Card className=\"bg-blue-50 border-blue-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-blue-600 mb-1\">Total Sales</p>\r\n            <h3 className=\"text-2xl font-bold text-blue-900\">\r\n              {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(summary.totalSales)}` : 'â€¢â€¢â€¢'}\r\n            </h3>\r\n            <p className=\"text-xs text-blue-500 mt-1\">\r\n              Based on {sales.length} records\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center\">\r\n            <TrendingUp className=\"h-6 w-6 text-blue-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card className=\"bg-orange-50 border-orange-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-orange-600 mb-1\">Total Cost</p>\r\n            <h3 className=\"text-2xl font-bold text-orange-900\">\r\n              {canViewCostPrice ? `${currency} ${formatNumber(summary.totalCost)}` : 'â€¢â€¢â€¢'}\r\n            </h3>\r\n            <p className=\"text-xs text-orange-500 mt-1\">\r\n              Cost of goods sold\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center\">\r\n            <Wallet className=\"h-6 w-6 text-orange-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card className=\"bg-green-50 border-green-100\">\r\n        <CardContent className=\"p-6 flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-green-600 mb-1\">Total Profit</p>\r\n            <h3 className=\"text-2xl font-bold text-green-900\">\r\n              {canViewProfit ? `${currency} ${formatNumber(summary.totalProfit)}` : 'â€¢â€¢â€¢'}\r\n            </h3>\r\n            <p className=\"text-xs text-green-500 mt-1\">\r\n              Net earnings\r\n            </p>\r\n          </div>\r\n          <div className=\"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center\">\r\n            <DollarSign className=\"h-6 w-6 text-green-600\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { Sale } from '@/types';\r\nimport { getDateRangeFromFilter } from '@/utils/dateFilters';\r\nimport { isSameDay } from 'date-fns';\r\n\r\n\r\nexport const useSalesFilters = (sales: Sale[]) => {\r\n  // Load persisted state from localStorage\r\n  const getPersistedState = () => {\r\n    try {\r\n      const saved = localStorage.getItem('salesFilters');\r\n      if (saved) {\r\n        const parsed = JSON.parse(saved);\r\n        return {\r\n          searchQuery: parsed.searchQuery || '',\r\n          dateFilter: parsed.dateFilter || 'this-month',\r\n          paymentFilter: parsed.paymentFilter || 'all',\r\n          cashTransactionFilter: parsed.cashTransactionFilter || 'all',\r\n          categoryFilter: parsed.categoryFilter || 'all',\r\n          dateRange: parsed.dateRange ? {\r\n            from: parsed.dateRange.from ? new Date(parsed.dateRange.from) : undefined,\r\n            to: parsed.dateRange.to ? new Date(parsed.dateRange.to) : undefined\r\n          } : { from: undefined, to: undefined },\r\n          specificDate: parsed.specificDate ? new Date(parsed.specificDate) : undefined\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading persisted sales filters:', error);\r\n    }\r\n    return {\r\n      searchQuery: '',\r\n      dateFilter: 'this-month',\r\n      paymentFilter: 'all',\r\n      cashTransactionFilter: 'all',\r\n      categoryFilter: 'all',\r\n      dateRange: { from: undefined, to: undefined },\r\n      specificDate: undefined\r\n    };\r\n  };\r\n\r\n  const persistedState = getPersistedState();\r\n  const [searchQuery, setSearchQuery] = useState(persistedState.searchQuery);\r\n  const [paymentFilter, setPaymentFilter] = useState(persistedState.paymentFilter);\r\n  const [cashTransactionFilter, setCashTransactionFilter] = useState(persistedState.cashTransactionFilter);\r\n  const [categoryFilter, setCategoryFilter] = useState(persistedState.categoryFilter);\r\n  const [dateFilter, setDateFilter] = useState<string>(persistedState.dateFilter);\r\n  const [dateRange, setDateRange] = useState<{ from: Date | undefined; to: Date | undefined; }>(persistedState.dateRange);\r\n  const [specificDate, setSpecificDate] = useState<Date | undefined>(persistedState.specificDate);\r\n\r\n  // Persist state to localStorage whenever filters change\r\n  useEffect(() => {\r\n    const stateToSave = {\r\n      searchQuery,\r\n      dateFilter,\r\n      paymentFilter,\r\n      cashTransactionFilter,\r\n      categoryFilter,\r\n      dateRange: {\r\n        from: dateRange.from?.toISOString(),\r\n        to: dateRange.to?.toISOString()\r\n      },\r\n      specificDate: specificDate?.toISOString()\r\n    };\r\n    localStorage.setItem('salesFilters', JSON.stringify(stateToSave));\r\n  }, [searchQuery, dateFilter, paymentFilter, cashTransactionFilter, categoryFilter, dateRange, specificDate]);\r\n\r\n  const isCustomRange = dateFilter === 'custom';\r\n  const isSpecificDate = dateFilter === 'specific';\r\n\r\n  const filteredSales = useMemo(() => {\r\n    let filtered = [...sales];\r\n\r\n    // Filter by search query\r\n    if (searchQuery.trim()) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(sale => \r\n        sale.customerName.toLowerCase().includes(query) ||\r\n        sale.receiptNumber.toLowerCase().includes(query) ||\r\n        sale.items.some(item => item.description.toLowerCase().includes(query))\r\n      );\r\n    }\r\n\r\n    // Filter by payment status\r\n    if (paymentFilter !== 'all') {\r\n      filtered = filtered.filter(sale => sale.paymentStatus === paymentFilter);\r\n    }\r\n\r\n    // Filter by cash transaction (linked/unlinked)\r\n    if (cashTransactionFilter !== 'all') {\r\n      if (cashTransactionFilter === 'linked') {\r\n        filtered = filtered.filter(sale => sale.cashTransactionId);\r\n      } else if (cashTransactionFilter === 'unlinked') {\r\n        filtered = filtered.filter(sale => !sale.cashTransactionId);\r\n      }\r\n    }\r\n\r\n    // Filter by category\r\n    if (categoryFilter !== 'all') {\r\n      if (categoryFilter === 'none') {\r\n        filtered = filtered.filter(sale => !sale.categoryId);\r\n      } else {\r\n        filtered = filtered.filter(sale => sale.categoryId === categoryFilter);\r\n      }\r\n    }\r\n\r\n    // Filter by date\r\n    if (dateFilter !== 'all') {\r\n      if (isSpecificDate && specificDate) {\r\n        filtered = filtered.filter(sale => {\r\n          const saleDate = new Date(sale.date);\r\n          return isSameDay(saleDate, specificDate);\r\n        });\r\n      } else if (isCustomRange && dateRange.from && dateRange.to) {\r\n        const from = dateRange.from;\r\n        const to = dateRange.to;\r\n        filtered = filtered.filter(sale => {\r\n          const saleDate = new Date(sale.date);\r\n          return saleDate >= from && saleDate <= to;\r\n        });\r\n      } else {\r\n        const range = getDateRangeFromFilter(dateFilter);\r\n        const from = range.from;\r\n        const to = range.to;\r\n        filtered = filtered.filter(sale => {\r\n          const saleDate = new Date(sale.date);\r\n          return saleDate >= from && saleDate <= to;\r\n        });\r\n      }\r\n    }\r\n\r\n    // Note: Sorting is now handled at the database level in useSalesData\r\n    // No need to sort here as the data comes pre-sorted from the database\r\n    return filtered;\r\n  }, [sales, searchQuery, paymentFilter, cashTransactionFilter, categoryFilter, dateFilter, dateRange, specificDate, isCustomRange, isSpecificDate]);\r\n\r\n  return {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    paymentFilter,\r\n    setPaymentFilter,\r\n    cashTransactionFilter,\r\n    setCashTransactionFilter,\r\n    categoryFilter,\r\n    setCategoryFilter,\r\n    dateFilter,\r\n    setDateFilter,\r\n    dateRange,\r\n    setDateRange,\r\n    specificDate,\r\n    setSpecificDate,\r\n    isCustomRange,\r\n    isSpecificDate,\r\n    filteredSales\r\n  };\r\n};\r\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { Table, TableBody, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport TableActions from '@/components/sales/TableActions';\r\nimport SalesTableFilters from '@/components/sales/SalesTableFilters';\r\nimport SalesTableRow from '@/components/sales/SalesTableRow';\r\nimport SalesTablePagination from '@/components/sales/SalesTablePagination';\r\nimport EmptySalesState from '@/components/sales/EmptySalesState';\r\nimport DeleteSaleDialog from '@/components/sales/DeleteSaleDialog';\r\nimport BusinessNoticeGenerator from '@/components/customers/BusinessNoticeGenerator';\r\nimport PaymentReminderPreviewDialog from '@/components/customers/PaymentReminderPreviewDialog';\r\nimport SalesCategoryManager from '@/components/sales/SalesCategoryManager';\r\nimport { SalesSummaryCards } from '@/components/sales/SalesSummaryCards';\r\nimport { useSalesFilters } from '@/hooks/useSalesFilters';\r\nimport { usePagination } from '@/hooks/usePagination';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useInstallmentPayments } from '@/hooks/useInstallmentPayments';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Edit, Trash2, Receipt, FileText, Quote, Heart, MessageCircle } from 'lucide-react';\r\nimport { formatNumber } from '@/lib/utils';\r\nimport { generatePaymentReminderPDF } from '@/utils/generatePaymentReminderPDF';\r\nimport { openWhatsApp, getThankYouMessage, canSendSMS } from '@/utils/smsUtils';\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\n\r\ninterface SalesTableProps {\r\n  sales: Sale[];\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  currency?: string;\r\n  onDateFilterChange?: (value: string) => void;\r\n  onDateRangeChange?: (range: { from: Date | undefined; to: Date | undefined; }) => void;\r\n  isLoading?: boolean;\r\n  mobileOptimized?: boolean;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: BusinessSettings = {\r\n  businessName: 'Your Business Name',\r\n  businessAddress: 'Your Business Address',\r\n  businessPhone: '(123) 456-7890',\r\n  businessEmail: 'support@yourbusiness.com',\r\n  businessLogo: '',\r\n  currency: 'UGX',\r\n};\r\n\r\n// Memoized mobile card component for better performance\r\nconst MobileCard = React.memo(({\r\n  sale,\r\n  settings,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  onSendPaymentReminder,\r\n  onSendThankYouNotice,\r\n  cashAccountName\r\n}: {\r\n  sale: Sale;\r\n  settings: BusinessSettings;\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  onSendPaymentReminder: (sale: Sale) => void;\r\n  onSendThankYouNotice: (sale: Sale) => void;\r\n  cashAccountName?: string | null;\r\n}) => {\r\n  const { payments } = useInstallmentPayments(sale.id);\r\n  const { hasPermission } = useProfiles();\r\n  const { canViewCostPrice, canViewProfit, canViewSellingPrice, canViewTotalAmount } = useFinancialVisibility();\r\n  // Calculate subtotal from items with discount considerations\r\n  const subtotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Calculate total discount amount\r\n  const totalDiscount = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + discountAmount;\r\n  }, 0);\r\n\r\n  // Calculate tax amount based on subtotal and tax rate\r\n  const taxRate = sale.taxRate || 0;\r\n  const taxAmount = subtotal * (taxRate / 100);\r\n\r\n  // Calculate total including tax\r\n  const totalWithTax = subtotal + taxAmount;\r\n\r\n  // Calculate total cost\r\n  const totalCost = sale.items.reduce((total, item) => total + (item.cost * item.quantity), 0);\r\n\r\n  // Calculate actual amounts for installment sales based on payment history\r\n  const actualAmountPaid = sale.paymentStatus === 'Installment Sale'\r\n    ? payments.reduce((sum, payment) => sum + payment.amount, 0)\r\n    : sale.amountPaid || 0;\r\n\r\n  const actualAmountDue = sale.paymentStatus === 'Installment Sale'\r\n    ? Math.max(0, totalWithTax - actualAmountPaid)\r\n    : sale.amountDue || 0;\r\n\r\n  // Get primary item description (or combination)\r\n  let itemDescription = \"No items\";\r\n  if (sale.items && Array.isArray(sale.items) && sale.items.length > 0) {\r\n    itemDescription = sale.items[0].description;\r\n    if (sale.items.length > 1) {\r\n      itemDescription += ` (+${sale.items.length - 1} more)`;\r\n    }\r\n  }\r\n\r\n  // Determine status display and styling\r\n  const getStatusDisplay = () => {\r\n    if (sale.paymentStatus === 'Installment Sale') {\r\n      return 'Installment';\r\n    }\r\n    return sale.paymentStatus === 'NOT PAID' ? 'Credit' : sale.paymentStatus;\r\n  };\r\n\r\n  const getStatusStyling = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'bg-green-100 text-green-700';\r\n      case 'Quote':\r\n        return 'bg-purple-100 text-purple-700';\r\n      case 'Installment Sale':\r\n        return 'bg-blue-100 text-blue-700';\r\n      case 'NOT PAID':\r\n      default:\r\n        return 'bg-yellow-100 text-yellow-700';\r\n    }\r\n  };\r\n\r\n  const getReceiptButtonLabel = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return 'Receipt';\r\n      case 'NOT PAID':\r\n        return 'Invoice';\r\n      case 'Quote':\r\n        return 'Quotation';\r\n      default:\r\n        return 'Receipt';\r\n    }\r\n  };\r\n\r\n  const getReceiptButtonIcon = () => {\r\n    switch (sale.paymentStatus) {\r\n      case 'Paid':\r\n        return Receipt;\r\n      case 'NOT PAID':\r\n        return FileText;\r\n      case 'Quote':\r\n        return Quote;\r\n      default:\r\n        return Receipt;\r\n    }\r\n  };\r\n\r\n  // Check if this is a credit sale that needs payment reminder (exclude installment sales)\r\n  const isCreditSale = sale.paymentStatus === 'NOT PAID';\r\n\r\n  // Check if this is an installment sale with outstanding balance\r\n  const isInstallmentWithDue = sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0;\r\n  const ButtonIcon = getReceiptButtonIcon();\r\n  const buttonLabel = getReceiptButtonLabel();\r\n\r\n  return (\r\n    <Card className={`mb-3 bg-white border shadow-sm ${cashAccountName ? 'border-l-4 border-l-green-500 border-green-200' : 'border-gray-200'}`}>\r\n      <CardContent className=\"p-4\">\r\n        {cashAccountName && (\r\n          <div className=\"flex items-center gap-2 mb-2 p-2 bg-green-50 rounded-md border border-green-200\">\r\n            <div className=\"w-2 h-2 bg-green-500 rounded-full flex-shrink-0\"></div>\r\n            <span className=\"text-xs font-medium text-green-700 truncate\">\r\n              Linked to: {cashAccountName}\r\n            </span>\r\n          </div>\r\n        )}\r\n        <div className=\"flex justify-between items-start mb-3\">\r\n          <div className=\"flex-1 min-w-0 pr-2\">\r\n            <p className=\"font-semibold text-gray-900 text-sm truncate\">{sale.customerName}</p>\r\n            <p className=\"text-xs text-gray-500 mt-0.5\">{new Date(sale.date).toLocaleDateString('en-GB')}</p>\r\n            {sale.paymentStatus === 'Installment Sale' && actualAmountDue > 0 && (\r\n              <Badge variant=\"outline\" className=\"text-xs bg-red-50 text-red-700 border-red-200 mt-1\">\r\n                Due: {canViewSellingPrice || canViewTotalAmount ? `${settings.currency} ${formatNumber(actualAmountDue)}` : 'â€¢â€¢â€¢'}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <span\r\n            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${getStatusStyling()}`}\r\n          >\r\n            {getStatusDisplay()}\r\n          </span>\r\n        </div>\r\n\r\n        <Tooltip>\r\n          <TooltipTrigger asChild>\r\n            <p className=\"text-xs text-gray-600 mb-3 line-clamp-1 cursor-help\">\r\n              {itemDescription}\r\n            </p>\r\n          </TooltipTrigger>\r\n          <TooltipContent side=\"top\" className=\"max-w-xs\">\r\n            <div className=\"space-y-1\">\r\n              <p className=\"font-bold break-words whitespace-normal\">{itemDescription}</p>\r\n            </div>\r\n          </TooltipContent>\r\n        </Tooltip>\r\n\r\n        <div className=\"space-y-3 mb-3\">\r\n          {/* First row: Cost and Discount */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <p className=\"text-xs text-gray-500\">Cost</p>\r\n              <p className=\"font-semibold text-gray-900\">\r\n                {canViewCostPrice ? `${settings.currency} ${formatNumber(totalCost)}` : 'â€¢â€¢â€¢'}\r\n              </p>\r\n            </div>\r\n            {totalDiscount > 0 ? (\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-gray-500\">Discount</p>\r\n                <p className=\"font-semibold text-orange-600\">\r\n                  {canViewSellingPrice ? `-${settings.currency} ${formatNumber(totalDiscount)}` : 'â€¢â€¢â€¢'}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-gray-500\">Discount</p>\r\n                <p className=\"font-semibold text-gray-400\">-</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Second row: Total Amount and Profit */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"text-left\">\r\n              <p className=\"text-xs text-gray-500\">Total Amount</p>\r\n              <p className=\"font-semibold text-gray-900\">\r\n                {canViewTotalAmount || canViewSellingPrice ? `${settings.currency} ${formatNumber(totalWithTax)}` : 'â€¢â€¢â€¢'}\r\n              </p>\r\n              {taxRate > 0 && (\r\n                <p className=\"text-xs text-gray-500\">Tax incl.</p>\r\n              )}\r\n              {sale.paymentStatus === 'Installment Sale' && actualAmountPaid > 0 && (\r\n                <p className=\"text-xs text-green-600 mt-1\">\r\n                  Paid: {canViewTotalAmount || canViewSellingPrice ? `${settings.currency} ${formatNumber(actualAmountPaid)}` : 'â€¢â€¢â€¢'}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs text-gray-500\">Profit</p>\r\n              <p className=\"font-semibold text-green-600\">\r\n                {canViewProfit ? `${settings.currency} ${formatNumber(totalWithTax - totalCost)}` : 'â€¢â€¢â€¢'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-3 border-t border-gray-100 space-y-2\">\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => onViewReceipt(sale)}\r\n              className=\"flex items-center gap-1.5 text-xs h-8 border-gray-200 flex-1 min-w-0\"\r\n            >\r\n              <ButtonIcon className=\"h-3 w-3 flex-shrink-0\" />\r\n              <span className=\"truncate\">{buttonLabel}</span>\r\n            </Button>\r\n\r\n            {isCreditSale && (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onSendPaymentReminder(sale)}\r\n                className=\"flex items-center gap-1.5 text-xs h-8 border-orange-200 text-orange-600 hover:bg-orange-50 flex-1 min-w-0\"\r\n              >\r\n                <FileText className=\"h-3 w-3 flex-shrink-0\" />\r\n                <span className=\"truncate\">Reminder</span>\r\n              </Button>\r\n            )}\r\n\r\n            {isInstallmentWithDue && (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onSendPaymentReminder(sale)}\r\n                className=\"flex items-center gap-1.5 text-xs h-8 border-blue-200 text-blue-600 hover:bg-blue-50 flex-1 min-w-0\"\r\n              >\r\n                <FileText className=\"h-3 w-3 flex-shrink-0\" />\r\n                <span className=\"truncate\">Due Reminder</span>\r\n              </Button>\r\n            )}\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => onSendThankYouNotice(sale)}\r\n              className=\"flex items-center gap-1.5 text-xs h-8 border-purple-200 text-purple-600 hover:bg-purple-50 flex-1 min-w-0\"\r\n            >\r\n              <Heart className=\"h-3 w-3 flex-shrink-0\" />\r\n              <span className=\"truncate\">Thanks</span>\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center gap-2\">\r\n            {hasPermission('sales', 'edit') && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onEditSale(sale)}\r\n                className=\"h-8 px-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-1\"\r\n              >\r\n                <Edit className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Edit</span>\r\n              </Button>\r\n            )}\r\n            {hasPermission('sales', 'delete') && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onDeleteSale(sale)}\r\n                className=\"h-8 px-3 hover:bg-red-50 hover:text-red-600 flex items-center gap-1\"\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Delete</span>\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n});\r\n\r\nMobileCard.displayName = 'MobileCard';\r\n\r\nconst SalesTable: React.FC<SalesTableProps> = ({\r\n  sales,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  currency = 'USD',\r\n  onDateFilterChange,\r\n  onDateRangeChange,\r\n  isLoading = false,\r\n  mobileOptimized = false\r\n}) => {\r\n  const [settings, setSettings] = useState<BusinessSettings>({ ...DEFAULT_SETTINGS, currency });\r\n  const [saleToDelete, setSaleToDelete] = useState<Sale | null>(null);\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [isDeletingSale, setIsDeletingSale] = useState(false);\r\n  const [selectedSaleForNotice, setSelectedSaleForNotice] = useState<Sale | null>(null);\r\n  const [isNoticeDialogOpen, setIsNoticeDialogOpen] = useState(false);\r\n  const [selectedPreviewSale, setSelectedPreviewSale] = useState<Sale | null>(null);\r\n  const [isPreviewDialogOpen, setIsPreviewDialogOpen] = useState(false);\r\n  const { accounts } = useCashAccounts();\r\n  const { transactions } = useCashTransactions();\r\n  const { settings: businessSettings } = useBusinessSettings();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  const {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    paymentFilter,\r\n    setPaymentFilter,\r\n    cashTransactionFilter,\r\n    setCashTransactionFilter,\r\n    categoryFilter,\r\n    setCategoryFilter,\r\n    dateFilter,\r\n    setDateFilter,\r\n    dateRange,\r\n    setDateRange,\r\n    specificDate,\r\n    setSpecificDate,\r\n    isCustomRange,\r\n    isSpecificDate,\r\n    filteredSales\r\n  } = useSalesFilters(sales);\r\n\r\n  // Memoize expensive operations\r\n  const memoizedFilteredSales = useMemo(() => filteredSales, [filteredSales]);\r\n\r\n  // Use smaller page sizes for mobile optimization\r\n  const pageSize = mobileOptimized ? 5 : 10;\r\n\r\n  const {\r\n    currentPage,\r\n    setCurrentPage,\r\n    paginatedItems: paginatedSales,\r\n    totalPages\r\n  } = usePagination<Sale>({\r\n    items: memoizedFilteredSales,\r\n    itemsPerPage: pageSize\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (onDateFilterChange) {\r\n      onDateFilterChange(dateFilter);\r\n    }\r\n  }, [dateFilter, onDateFilterChange]);\r\n\r\n  useEffect(() => {\r\n    if (onDateRangeChange && isCustomRange) {\r\n      onDateRangeChange(dateRange);\r\n    }\r\n  }, [dateRange, isCustomRange, onDateRangeChange]);\r\n\r\n  useEffect(() => {\r\n    setSettings(prevSettings => ({ ...prevSettings, currency }));\r\n\r\n    const savedSettings = localStorage.getItem('businessSettings');\r\n    if (savedSettings) {\r\n      const parsed = JSON.parse(savedSettings);\r\n      setSettings({ ...parsed, currency: currency || parsed.currency });\r\n    }\r\n  }, [currency]);\r\n\r\n  // Memoize cash account lookup\r\n  const getCashAccountName = useCallback((sale: Sale) => {\r\n    if (!sale.cashTransactionId) return null;\r\n\r\n    const linkedTransaction = transactions.find(transaction => transaction.id === sale.cashTransactionId);\r\n    if (!linkedTransaction || !linkedTransaction.accountId) return null;\r\n\r\n    const linkedAccount = accounts.find(account => account.id === linkedTransaction.accountId);\r\n    return linkedAccount ? linkedAccount.name : null;\r\n  }, [transactions, accounts]);\r\n\r\n  const getReceiptButtonLabel = useCallback((paymentStatus: string) => {\r\n    switch (paymentStatus) {\r\n      case 'Paid':\r\n        return 'Receipt';\r\n      case 'NOT PAID':\r\n        return 'Invoice';\r\n      case 'Quote':\r\n        return 'Quotation';\r\n      default:\r\n        return 'Receipt';\r\n    }\r\n  }, []);\r\n\r\n  const getReceiptButtonIcon = useCallback((paymentStatus: string) => {\r\n    switch (paymentStatus) {\r\n      case 'Paid':\r\n        return Receipt;\r\n      case 'NOT PAID':\r\n        return FileText;\r\n      case 'Quote':\r\n        return Quote;\r\n      default:\r\n        return Receipt;\r\n    }\r\n  }, []);\r\n\r\n  // Handle delete confirmation\r\n  const handleDeleteSale = useCallback((sale: Sale) => {\r\n    setSaleToDelete(sale);\r\n    setIsDeleteDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleConfirmDelete = useCallback(async () => {\r\n    if (saleToDelete && !isDeletingSale) {\r\n      setIsDeletingSale(true);\r\n      try {\r\n        await onDeleteSale(saleToDelete);\r\n        setIsDeleteDialogOpen(false);\r\n        setSaleToDelete(null);\r\n      } finally {\r\n        setIsDeletingSale(false);\r\n      }\r\n    }\r\n  }, [saleToDelete, onDeleteSale, isDeletingSale]);\r\n\r\n  const handleCancelDelete = useCallback((open: boolean) => {\r\n    if (!isDeletingSale && !open) {\r\n      setIsDeleteDialogOpen(false);\r\n      setSaleToDelete(null);\r\n    }\r\n  }, [isDeletingSale]);\r\n\r\n  // Handle thank you notice generation\r\n  const handleSendThankYouNotice = useCallback((sale: Sale) => {\r\n    setSelectedSaleForNotice(sale);\r\n    setIsNoticeDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleCloseNoticeDialog = useCallback(() => {\r\n    setIsNoticeDialogOpen(false);\r\n    setSelectedSaleForNotice(null);\r\n  }, []);\r\n\r\n  // Handle payment reminder generation\r\n  const handleSendPaymentReminder = useCallback(async (sale: Sale) => {\r\n    try {\r\n      // Create a customer object from the sale data\r\n      const customer = {\r\n        id: sale.customerId || '',\r\n        fullName: sale.customerName,\r\n        phoneNumber: sale.customerContact || '',\r\n        email: '',\r\n        location: sale.customerAddress || '',\r\n        categoryId: null,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        birthday: null,\r\n        socialMedia: null,\r\n        gender: null,\r\n        tags: null,\r\n        notes: null\r\n      };\r\n\r\n      // Calculate total amount due\r\n      const subtotal = sale.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n      const taxAmount = subtotal * ((sale.taxRate || 0) / 100);\r\n      const totalAmountDue = subtotal + taxAmount;\r\n\r\n      // Open the preview dialog instead of generating PDF directly\r\n      setSelectedPreviewSale(sale);\r\n      setIsPreviewDialogOpen(true);\r\n    } catch (error) {\r\n      console.error('Error generating payment reminder:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to generate payment reminder. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  }, [businessSettings, settings, toast]);\r\n\r\n  // Handle WhatsApp thank you message\r\n  const handleSendThankYouWhatsApp = useCallback((sale: Sale) => {\r\n    if (!canSendSMS({ phoneNumber: sale.customerContact })) {\r\n      toast({\r\n        title: \"Phone number required\",\r\n        description: \"Customer phone number is not available for WhatsApp.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const message = getThankYouMessage(sale, businessSettings || settings);\r\n    openWhatsApp({\r\n      phoneNumber: sale.customerContact!,\r\n      message\r\n    });\r\n\r\n    toast({\r\n      title: \"WhatsApp Opened\",\r\n      description: `Opening WhatsApp chat for ${sale.customerName}`\r\n    });\r\n  }, [businessSettings, settings, toast]);\r\n\r\n  // Show optimized loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[40vh] space-y-4\">\r\n        <img\r\n          src=\"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png\"\r\n          alt=\"Loading\"\r\n          className=\"w-12 h-12 animate-spin\"\r\n        />\r\n        <p className=\"text-muted-foreground text-sm\">Loading sales...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <TooltipProvider>\r\n      <>\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-border/50\">\r\n          <div className=\"p-4 sm:p-6 border-b border-border/50\">\r\n            <div className=\"flex flex-col gap-4\">\r\n              <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                  <h2 className=\"text-xl sm:text-2xl font-bold text-foreground\">Sales Records</h2>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    {memoizedFilteredSales.length} {memoizedFilteredSales.length === 1 ? 'record' : 'records'} found\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <SalesCategoryManager />\r\n                  <div className=\"w-full sm:w-auto\">\r\n                    <TableActions\r\n                      filteredSales={memoizedFilteredSales}\r\n                      allSales={sales}\r\n                      currency={settings.currency}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"p-4 sm:p-6\">\r\n            <SalesSummaryCards sales={memoizedFilteredSales} currency={settings.currency} />\r\n\r\n            <SalesTableFilters\r\n              searchQuery={searchQuery}\r\n              setSearchQuery={setSearchQuery}\r\n              paymentFilter={paymentFilter}\r\n              setPaymentFilter={setPaymentFilter}\r\n              cashTransactionFilter={cashTransactionFilter}\r\n              setCashTransactionFilter={setCashTransactionFilter}\r\n              categoryFilter={categoryFilter}\r\n              setCategoryFilter={setCategoryFilter}\r\n              dateFilter={dateFilter}\r\n              setDateFilter={setDateFilter}\r\n              dateRange={dateRange}\r\n              setDateRange={setDateRange}\r\n              specificDate={specificDate}\r\n              setSpecificDate={setSpecificDate}\r\n              isCustomRange={isCustomRange}\r\n              isSpecificDate={isSpecificDate}\r\n            />\r\n\r\n            {memoizedFilteredSales.length > 0 ? (\r\n              <>\r\n                {isMobile ? (\r\n                  <div className=\"space-y-3\">\r\n                    {paginatedSales.map((sale) => (\r\n                      <MobileCard\r\n                        key={sale.id}\r\n                        sale={sale}\r\n                        settings={settings}\r\n                        onViewReceipt={onViewReceipt}\r\n                        onEditSale={onEditSale}\r\n                        onDeleteSale={handleDeleteSale}\r\n                        onSendPaymentReminder={handleSendPaymentReminder}\r\n                        onSendThankYouNotice={handleSendThankYouNotice}\r\n                        cashAccountName={getCashAccountName(sale)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"overflow-x-auto border rounded-lg\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Receipt #</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead>Item</TableHead>\r\n                          <TableHead className=\"text-right\">Total Qty</TableHead>\r\n                          <TableHead className=\"text-right\">Avg Price</TableHead>\r\n                          <TableHead className=\"text-right\">Discount</TableHead>\r\n                          <TableHead className=\"text-right\">Cost</TableHead>\r\n                          <TableHead className=\"text-right\">Profit</TableHead>\r\n                          <TableHead className=\"text-right\">Total (incl. Tax)</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                          <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {paginatedSales.map((sale) => (\r\n                          <SalesTableRow\r\n                            key={sale.id}\r\n                            sale={sale}\r\n                            currency={settings.currency}\r\n                            onViewReceipt={onViewReceipt}\r\n                            onEditSale={onEditSale}\r\n                            onDeleteSale={handleDeleteSale}\r\n                            onSendPaymentReminder={handleSendPaymentReminder}\r\n                            onSendThankYouNotice={handleSendThankYouNotice}\r\n                          />\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                )}\r\n                <div className=\"mt-6\">\r\n                  <SalesTablePagination\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={setCurrentPage}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <EmptySalesState />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <DeleteSaleDialog\r\n          isOpen={isDeleteDialogOpen}\r\n          onOpenChange={handleCancelDelete}\r\n          onConfirm={handleConfirmDelete}\r\n          isDeleting={isDeletingSale}\r\n        />\r\n\r\n        {selectedSaleForNotice && (\r\n          <BusinessNoticeGenerator\r\n            customer={{\r\n              id: selectedSaleForNotice.customerId || '',\r\n              fullName: selectedSaleForNotice.customerName,\r\n              phoneNumber: selectedSaleForNotice.customerContact || '',\r\n              email: '',\r\n              location: selectedSaleForNotice.customerAddress || '',\r\n              categoryId: null,\r\n              createdAt: new Date(),\r\n              updatedAt: new Date(),\r\n              birthday: null,\r\n              socialMedia: null,\r\n              gender: null,\r\n              tags: null,\r\n              notes: null\r\n            }}\r\n            open={isNoticeDialogOpen}\r\n            onClose={handleCloseNoticeDialog}\r\n            defaultTemplate=\"thank_you\"\r\n            sale={selectedSaleForNotice}\r\n          />\r\n        )}\r\n\r\n        <PaymentReminderPreviewDialog\r\n          isOpen={isPreviewDialogOpen}\r\n          onOpenChange={setIsPreviewDialogOpen}\r\n          sale={selectedPreviewSale}\r\n        />\r\n      </>\r\n    </TooltipProvider>\r\n  );\r\n};\r\n\r\nexport default SalesTable;\r\n","import React, { Suspense } from 'react';\r\nimport { Sale } from '@/types';\r\nimport SalesTable from '@/components/SalesTable';\r\nimport SalesTableSkeleton from './SalesTableSkeleton';\r\n\r\ninterface SalesDataTableProps {\r\n  sales: Sale[];\r\n  onViewReceipt: (sale: Sale) => void;\r\n  onEditSale: (sale: Sale) => void;\r\n  onDeleteSale: (sale: Sale) => void;\r\n  currency: string;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst SalesDataTable: React.FC<SalesDataTableProps> = ({\r\n  sales,\r\n  onViewReceipt,\r\n  onEditSale,\r\n  onDeleteSale,\r\n  currency,\r\n  isLoading\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Suspense fallback={<SalesTableSkeleton />}>\r\n        <SalesTable\r\n          sales={sales}\r\n          onViewReceipt={onViewReceipt}\r\n          onEditSale={onEditSale}\r\n          onDeleteSale={onDeleteSale}\r\n          currency={currency}\r\n          isLoading={isLoading}\r\n          mobileOptimized={false} // Disable mobile optimization to show all records\r\n        />\r\n      </Suspense>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesDataTable;","import React from 'react';\r\nimport { Sale } from '@/types';\r\nimport ReceiptDialog from './ReceiptDialog';\r\n\r\ninterface SalesReceiptDialogProps {\r\n  selectedSale: Sale | null;\r\n  isOpen: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  currency: string;\r\n}\r\n\r\nconst SalesReceiptDialog: React.FC<SalesReceiptDialogProps> = ({\r\n  selectedSale,\r\n  isOpen,\r\n  onOpenChange,\r\n  currency\r\n}) => {\r\n  if (!selectedSale) return null;\r\n\r\n  return (\r\n    <ReceiptDialog\r\n      sale={selectedSale}\r\n      isOpen={isOpen}\r\n      onOpenChange={onOpenChange}\r\n      currency={currency}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SalesReceiptDialog;","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trophy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiA5SDQuNWEyLjUgMi41IDAgMCAxIDAtNUg2IiAvPgogIDxwYXRoIGQ9Ik0xOCA5aDEuNWEyLjUgMi41IDAgMCAwIDAtNUgxOCIgLz4KICA8cGF0aCBkPSJNNCAyMmgxNiIgLz4KICA8cGF0aCBkPSJNMTAgMTQuNjZWMTdjMCAuNTUtLjQ3Ljk4LS45NyAxLjIxQzcuODUgMTguNzUgNyAyMC4yNCA3IDIyIiAvPgogIDxwYXRoIGQ9Ik0xNCAxNC42NlYxN2MwIC41NS40Ny45OC45NyAxLjIxQzE2LjE1IDE4Ljc1IDE3IDIwLjI0IDE3IDIyIiAvPgogIDxwYXRoIGQ9Ik0xOCAySDZ2N2E2IDYgMCAwIDAgMTIgMFYyWiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/trophy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trophy = createLucideIcon('Trophy', [\n  ['path', { d: 'M6 9H4.5a2.5 2.5 0 0 1 0-5H6', key: '17hqa7' }],\n  ['path', { d: 'M18 9h1.5a2.5 2.5 0 0 0 0-5H18', key: 'lmptdp' }],\n  ['path', { d: 'M4 22h16', key: '57wxv0' }],\n  ['path', { d: 'M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22', key: '1nw9bq' }],\n  ['path', { d: 'M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22', key: '1np0yb' }],\n  ['path', { d: 'M18 2H6v7a6 6 0 0 0 12 0V2Z', key: 'u46fv3' }],\n]);\n\nexport default Trophy;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Target\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/target\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Target = createLucideIcon('Target', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['circle', { cx: '12', cy: '12', r: '6', key: '1vlfrh' }],\n  ['circle', { cx: '12', cy: '12', r: '2', key: '1c9p78' }],\n]);\n\nexport default Target;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Pen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pen = createLucideIcon('Pen', [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n]);\n\nexport default Pen;\n","import React, { useMemo, useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { PieChart, Pie, Cell, Legend, ResponsiveContainer, Tooltip } from 'recharts';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { Sale } from '@/types';\r\nimport { useSalesCategories } from '@/hooks/useSalesCategories';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { TrendingUp, DollarSign, ShoppingCart, Trophy, Target, Edit2, Trash2, Plus, Check, X, Settings, CalendarIcon } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { format, isAfter, isBefore, isEqual, startOfDay, endOfDay, startOfWeek, endOfWeek, startOfMonth, endOfMonth, startOfYear, endOfYear, subDays, subWeeks, subMonths, subYears } from 'date-fns';\r\nimport { cn } from '@/lib/utils';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\ninterface SalesCategoryAnalysisProps {\r\n  sales: Sale[];\r\n  formatCurrency: (amount: number) => string;\r\n}\r\nconst SalesCategoryAnalysis: React.FC<SalesCategoryAnalysisProps> = ({\r\n  sales,\r\n  formatCurrency\r\n}) => {\r\n  const { canViewProfit } = useFinancialVisibility();\r\n  const {\r\n    categories,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory\r\n  } = useSalesCategories();\r\n  const isMobile = useIsMobile();\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editingName, setEditingName] = useState('');\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [categoryToDelete, setCategoryToDelete] = useState<{\r\n    id: string;\r\n    name: string;\r\n  } | null>(null);\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [dateFilter, setDateFilter] = useState<string>('all-time');\r\n  const [customDateFrom, setCustomDateFrom] = useState<Date | undefined>();\r\n  const [customDateTo, setCustomDateTo] = useState<Date | undefined>();\r\n  const [specificDate, setSpecificDate] = useState<Date | undefined>();\r\n  const getDateRange = (filter: string) => {\r\n    const now = new Date();\r\n    switch (filter) {\r\n      case 'today':\r\n        return {\r\n          start: startOfDay(now),\r\n          end: endOfDay(now)\r\n        };\r\n      case 'yesterday':\r\n        const yesterday = subDays(now, 1);\r\n        return {\r\n          start: startOfDay(yesterday),\r\n          end: endOfDay(yesterday)\r\n        };\r\n      case 'this-week':\r\n        return {\r\n          start: startOfWeek(now),\r\n          end: endOfWeek(now)\r\n        };\r\n      case 'last-week':\r\n        const lastWeekStart = startOfWeek(subWeeks(now, 1));\r\n        const lastWeekEnd = endOfWeek(subWeeks(now, 1));\r\n        return {\r\n          start: lastWeekStart,\r\n          end: lastWeekEnd\r\n        };\r\n      case 'this-month':\r\n        return {\r\n          start: startOfMonth(now),\r\n          end: endOfMonth(now)\r\n        };\r\n      case 'last-month':\r\n        const lastMonthStart = startOfMonth(subMonths(now, 1));\r\n        const lastMonthEnd = endOfMonth(subMonths(now, 1));\r\n        return {\r\n          start: lastMonthStart,\r\n          end: lastMonthEnd\r\n        };\r\n      case 'this-year':\r\n        return {\r\n          start: startOfYear(now),\r\n          end: endOfYear(now)\r\n        };\r\n      case 'specific-date':\r\n        if (specificDate) {\r\n          return {\r\n            start: startOfDay(specificDate),\r\n            end: endOfDay(specificDate)\r\n          };\r\n        }\r\n        return null;\r\n      case 'custom-range':\r\n        if (customDateFrom && customDateTo) {\r\n          return {\r\n            start: startOfDay(customDateFrom),\r\n            end: endOfDay(customDateTo)\r\n          };\r\n        } else if (customDateFrom) {\r\n          return {\r\n            start: startOfDay(customDateFrom),\r\n            end: endOfDay(now)\r\n          };\r\n        } else if (customDateTo) {\r\n          return {\r\n            start: startOfDay(new Date(0)),\r\n            end: endOfDay(customDateTo)\r\n          };\r\n        }\r\n        return null;\r\n      case 'all-time':\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n  const categoryPerformance = useMemo(() => {\r\n    // Filter sales by selected date range\r\n    let filteredSales = sales;\r\n    const dateRange = getDateRange(dateFilter);\r\n    if (dateRange) {\r\n      filteredSales = sales.filter(sale => {\r\n        const saleDate = new Date(sale.date);\r\n        return saleDate >= dateRange.start && saleDate <= dateRange.end;\r\n      });\r\n    }\r\n    const categoryData = categories.map(category => {\r\n      const categorySales = filteredSales.filter(sale => sale.categoryId === category.id);\r\n      const totalRevenue = categorySales.reduce((sum, sale) => {\r\n        const saleTotal = sale.items.reduce((itemSum, item) => itemSum + item.quantity * item.price, 0);\r\n        return sum + saleTotal;\r\n      }, 0);\r\n      const totalProfit = categorySales.reduce((sum, sale) => sum + (sale.profit || 0), 0);\r\n      const totalTransactions = categorySales.length;\r\n      const averageTransactionValue = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\r\n      return {\r\n        name: category.name,\r\n        revenue: totalRevenue,\r\n        profit: totalProfit,\r\n        transactions: totalTransactions,\r\n        averageValue: averageTransactionValue\r\n      };\r\n    });\r\n\r\n    // Add uncategorized sales\r\n    const uncategorizedSales = filteredSales.filter(sale => !sale.categoryId);\r\n    if (uncategorizedSales.length > 0) {\r\n      const totalRevenue = uncategorizedSales.reduce((sum, sale) => {\r\n        const saleTotal = sale.items.reduce((itemSum, item) => itemSum + item.quantity * item.price, 0);\r\n        return sum + saleTotal;\r\n      }, 0);\r\n      const totalProfit = uncategorizedSales.reduce((sum, sale) => sum + (sale.profit || 0), 0);\r\n      const totalTransactions = uncategorizedSales.length;\r\n      const averageTransactionValue = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\r\n      categoryData.push({\r\n        name: 'Uncategorized',\r\n        revenue: totalRevenue,\r\n        profit: totalProfit,\r\n        transactions: totalTransactions,\r\n        averageValue: averageTransactionValue\r\n      });\r\n    }\r\n    return categoryData.sort((a, b) => b.revenue - a.revenue);\r\n  }, [sales, categories, dateFilter, customDateFrom, customDateTo, specificDate]);\r\n  const pieChartData = useMemo(() => {\r\n    return categoryPerformance.filter(cat => cat.revenue > 0).map((category, index) => ({\r\n      ...category,\r\n      fill: `hsl(var(--chart-${index % 5 + 1}))`\r\n    }));\r\n  }, [categoryPerformance]);\r\n  const COLORS = ['hsl(var(--chart-1))', 'hsl(var(--chart-2))', 'hsl(var(--chart-3))', 'hsl(var(--chart-4))', 'hsl(var(--chart-5))'];\r\n  const PieTooltip = ({\r\n    active,\r\n    payload\r\n  }: any) => {\r\n    if (active && payload && payload.length) {\r\n      const data = payload[0].payload;\r\n      const percentage = (data.revenue / categoryPerformance.reduce((sum, cat) => sum + cat.revenue, 0) * 100).toFixed(1);\r\n      return <div className=\"bg-background border rounded-lg p-3 shadow-lg\">\r\n        <p className=\"font-medium\">{data.name}</p>\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Revenue: {formatCurrency(data.revenue)}\r\n        </p>\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Share: {percentage}%\r\n        </p>\r\n      </div>;\r\n    }\r\n    return null;\r\n  };\r\n  const getIcon = (index: number) => {\r\n    const icons = [DollarSign, TrendingUp, ShoppingCart, Target];\r\n    const Icon = icons[index % icons.length];\r\n    return <Icon className=\"w-4 h-4 text-muted-foreground\" />;\r\n  };\r\n  const handleEditStart = (category: any) => {\r\n    setEditingId(category.id);\r\n    setEditingName(category.name);\r\n  };\r\n  const handleEditSave = async () => {\r\n    if (!editingId || !editingName.trim()) return;\r\n    try {\r\n      await updateCategory(editingId, editingName.trim());\r\n      setEditingId(null);\r\n      setEditingName('');\r\n      toast.success('Category updated successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to update category');\r\n    }\r\n  };\r\n  const handleEditCancel = () => {\r\n    setEditingId(null);\r\n    setEditingName('');\r\n  };\r\n  const handleDelete = async () => {\r\n    if (!categoryToDelete) return;\r\n    setIsDeleting(true);\r\n    try {\r\n      await deleteCategory(categoryToDelete.id);\r\n      toast.success('Category deleted successfully');\r\n      setDeleteDialogOpen(false);\r\n      setCategoryToDelete(null);\r\n    } catch (error) {\r\n      toast.error('Failed to delete category');\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n  const handleDeleteClick = (category: {\r\n    id: string;\r\n    name: string;\r\n  }) => {\r\n    setCategoryToDelete(category);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName.trim()) return;\r\n    setIsAdding(true);\r\n    try {\r\n      await createCategory(newCategoryName.trim());\r\n      setNewCategoryName('');\r\n      toast.success('Category created successfully');\r\n    } catch (error) {\r\n      toast.error('Failed to create category');\r\n    } finally {\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n  return <div className=\"space-y-6\">\r\n    {/* Category Management Section */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Settings className=\"w-5 h-5 text-primary\" />\r\n          Manage Sales Sources\r\n        </CardTitle>\r\n        <CardDescription>Create, edit, or delete sales sources</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"space-y-4\">\r\n          {/* Create new source */}\r\n          <div className=\"flex gap-2 p-3 bg-muted/30 rounded-lg\">\r\n            <Input placeholder=\"Enter New Sales Source\" value={newCategoryName} onChange={e => setNewCategoryName(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleCreateCategory()} className=\"flex-1\" />\r\n            <Button onClick={handleCreateCategory} disabled={!newCategoryName.trim() || isAdding} size=\"sm\" className=\"shrink-0\">\r\n              {isAdding ? <>\r\n                <div className=\"w-4 h-4 mr-1 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n                Adding...\r\n              </> : <>\r\n                <Plus className=\"w-4 h-4 mr-1\" />\r\n                Add\r\n              </>}\r\n            </Button>\r\n          </div>\r\n\r\n          {/* List existing sources */}\r\n          <div className=\"space-y-2\">\r\n            {categories.map(category => <div key={category.id} className=\"flex items-center gap-2 p-3 border rounded-lg bg-background hover:bg-muted/20 transition-colors\">\r\n              {editingId === category.id ? <>\r\n                <Input value={editingName} onChange={e => setEditingName(e.target.value)} onKeyDown={e => {\r\n                  if (e.key === 'Enter') handleEditSave();\r\n                  if (e.key === 'Escape') handleEditCancel();\r\n                }} className=\"flex-1\" autoFocus />\r\n                <Button size=\"sm\" variant=\"outline\" onClick={handleEditSave}>\r\n                  <Check className=\"w-4 h-4\" />\r\n                </Button>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={handleEditCancel}>\r\n                  <X className=\"w-4 h-4\" />\r\n                </Button>\r\n              </> : <>\r\n                <span className=\"flex-1 font-medium\">{category.name}</span>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleEditStart(category)}>\r\n                  <Edit2 className=\"w-4 h-4\" />\r\n                </Button>\r\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleDeleteClick(category)} className=\"text-destructive hover:bg-destructive hover:text-destructive-foreground\">\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </Button>\r\n              </>}\r\n            </div>)}\r\n\r\n            {categories.length === 0 && <div className=\"text-center py-8 text-muted-foreground\">\r\n              No sources found. Create your first source above.\r\n            </div>}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Date Filter */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <CalendarIcon className=\"w-5 h-5 text-primary\" />\r\n          Date Filter\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Filter source performance by time period\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"flex flex-col sm:flex-row gap-4 items-end\">\r\n          <div className=\"flex-1\">\r\n            <label className=\"text-sm font-medium mb-2 block\">Time Period</label>\r\n            <Select value={dateFilter} onValueChange={setDateFilter}>\r\n              <SelectTrigger className=\"w-full\">\r\n                <SelectValue placeholder=\"Select time period\" />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-background border shadow-lg z-50\">\r\n                <SelectItem value=\"today\">Today</SelectItem>\r\n                <SelectItem value=\"yesterday\">Yesterday</SelectItem>\r\n                <SelectItem value=\"this-week\">This Week</SelectItem>\r\n                <SelectItem value=\"last-week\">Last Week</SelectItem>\r\n                <SelectItem value=\"this-month\">This Month</SelectItem>\r\n                <SelectItem value=\"last-month\">Last Month</SelectItem>\r\n                <SelectItem value=\"this-year\">This Year</SelectItem>\r\n                <SelectItem value=\"all-time\">All Time</SelectItem>\r\n                <SelectItem value=\"specific-date\">Specific Date</SelectItem>\r\n                <SelectItem value=\"custom-range\">Custom Range</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Custom Date Range Fields */}\r\n        {dateFilter === 'custom-range' && <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">From Date</label>\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className={cn(\"w-full justify-start text-left font-normal\", !customDateFrom && \"text-muted-foreground\")}>\r\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                  {customDateFrom ? format(customDateFrom, \"PPP\") : <span>Pick start date</span>}\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                <Calendar mode=\"single\" selected={customDateFrom} onSelect={setCustomDateFrom} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">To Date</label>\r\n            <Popover>\r\n              <PopoverTrigger asChild>\r\n                <Button variant=\"outline\" className={cn(\"w-full justify-start text-left font-normal\", !customDateTo && \"text-muted-foreground\")}>\r\n                  <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                  {customDateTo ? format(customDateTo, \"PPP\") : <span>Pick end date</span>}\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                <Calendar mode=\"single\" selected={customDateTo} onSelect={setCustomDateTo} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n              </PopoverContent>\r\n            </Popover>\r\n          </div>\r\n        </div>}\r\n\r\n        {/* Specific Date Field */}\r\n        {dateFilter === 'specific-date' && <div className=\"mt-4\">\r\n          <label className=\"text-sm font-medium mb-2 block\">Select Date</label>\r\n          <Popover>\r\n            <PopoverTrigger asChild>\r\n              <Button variant=\"outline\" className={cn(\"w-full sm:w-64 justify-start text-left font-normal\", !specificDate && \"text-muted-foreground\")}>\r\n                <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                {specificDate ? format(specificDate, \"PPP\") : <span>Pick a date</span>}\r\n              </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n              <Calendar mode=\"single\" selected={specificDate} onSelect={setSpecificDate} initialFocus className={cn(\"p-3 pointer-events-auto\")} />\r\n            </PopoverContent>\r\n          </Popover>\r\n        </div>}\r\n\r\n        {dateFilter !== 'all-time' && <div className=\"mt-4 p-3 bg-muted/30 rounded-lg\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Showing results for: <span className=\"font-medium\">{dateFilter === 'today' ? 'Today' : dateFilter === 'yesterday' ? 'Yesterday' : dateFilter === 'this-week' ? 'This Week' : dateFilter === 'last-week' ? 'Last Week' : dateFilter === 'this-month' ? 'This Month' : dateFilter === 'last-month' ? 'Last Month' : dateFilter === 'this-year' ? 'This Year' : dateFilter === 'specific-date' && specificDate ? format(specificDate, \"PPP\") : dateFilter === 'custom-range' && customDateFrom && customDateTo ? `${format(customDateFrom, \"PPP\")} to ${format(customDateTo, \"PPP\")}` : dateFilter === 'custom-range' && customDateFrom ? `From ${format(customDateFrom, \"PPP\")}` : dateFilter === 'custom-range' && customDateTo ? `Until ${format(customDateTo, \"PPP\")}` : 'Custom Period'}</span>\r\n          </p>\r\n        </div>}\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Category Rankings Table */}\r\n    <Card className=\"shadow-sm\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Trophy className=\"w-5 h-5 text-primary\" />\r\n          Source Rankings\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Best performing sources ranked by revenue\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {categoryPerformance.length > 0 ? isMobile ? <div className=\"space-y-3\">\r\n          {categoryPerformance.map((category, index) => <Card key={category.name} className=\"border border-border bg-card\">\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold\">\r\n                    {index + 1}\r\n                  </div>\r\n                  <h3 className=\"font-semibold text-lg\">{category.name}</h3>\r\n                </div>\r\n                <Trophy className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 gap-3\">\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <DollarSign className=\"w-4 h-4 text-green-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Total Revenue</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{formatCurrency(category.revenue)}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <TrendingUp className=\"w-4 h-4 text-blue-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Total Profit</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{canViewProfit ? formatCurrency(category.profit) : 'â€¢â€¢â€¢'}</span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-3 bg-muted/30 rounded-lg\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <ShoppingCart className=\"w-4 h-4 text-purple-600\" />\r\n                    <span className=\"text-sm font-medium text-muted-foreground\">Number of Sales</span>\r\n                  </div>\r\n                  <span className=\"font-semibold\">{category.transactions}</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>)}\r\n        </div> : <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead className=\"w-12\">#</TableHead>\r\n              <TableHead>Source Name</TableHead>\r\n              <TableHead className=\"text-right\">Total Revenue</TableHead>\r\n              <TableHead className=\"text-right\">Total Profit</TableHead>\r\n              <TableHead className=\"text-right\">Number of Sales</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {categoryPerformance.map((category, index) => <TableRow key={category.name}>\r\n              <TableCell className=\"font-medium\">\r\n                <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold\">\r\n                  {index + 1}\r\n                </div>\r\n              </TableCell>\r\n              <TableCell className=\"font-medium\">{category.name}</TableCell>\r\n              <TableCell className=\"text-right font-mono\">{formatCurrency(category.revenue)}</TableCell>\r\n              <TableCell className=\"text-right font-mono\">{canViewProfit ? formatCurrency(category.profit) : 'â€¢â€¢â€¢'}</TableCell>\r\n              <TableCell className=\"text-right\">{category.transactions}</TableCell>\r\n            </TableRow>)}\r\n          </TableBody>\r\n        </Table> : <div className=\"flex items-center justify-center h-64 text-muted-foreground\">\r\n          No performance data available\r\n        </div>}\r\n      </CardContent>\r\n    </Card>\r\n\r\n    {/* Delete Confirmation Dialog */}\r\n    <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Delete Source</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            Are you sure you want to delete the source \"{categoryToDelete?.name}\"?\r\n            This action cannot be undone. All sales in this source will be moved to \"Uncategorized\".\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel onClick={() => setCategoryToDelete(null)}>Cancel</AlertDialogCancel>\r\n          <AlertDialogAction onClick={handleDelete} disabled={isDeleting} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n            {isDeleting ? <>\r\n              <div className=\"w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n              Deleting...\r\n            </> : 'Delete Source'}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  </div>;\r\n};\r\nexport default SalesCategoryAnalysis;","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('User', [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n]);\n\nexport default User;\n","\r\nimport React from 'react';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { format } from 'date-fns';\r\nimport { DeletedSale } from '@/hooks/useDeletedSales';\r\nimport { Trash2, User, Clock, Package } from 'lucide-react';\r\n\r\ninterface DeletedSalesTableProps {\r\n    sales: DeletedSale[];\r\n    isLoading: boolean;\r\n    currency?: string;\r\n}\r\n\r\nexport const DeletedSalesTable: React.FC<DeletedSalesTableProps> = ({ sales, isLoading, currency = 'UGX' }) => {\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center py-12 space-y-4\">\r\n                <div className=\"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n                <p className=\"text-muted-foreground text-sm\">Loading deleted sales history...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (sales.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-12 border rounded-lg bg-muted/20\">\r\n                <Trash2 className=\"mx-auto h-12 w-12 text-muted-foreground opacity-20 mb-4\" />\r\n                <h3 className=\"text-lg font-medium\">Deleted Sales history is empty</h3>\r\n                <p className=\"text-muted-foreground\">Deleted sales logs will appear here.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"border rounded-lg overflow-hidden bg-white\">\r\n            <Table>\r\n                <TableHeader className=\"bg-muted/50\">\r\n                    <TableRow>\r\n                        <TableHead>Receipt #</TableHead>\r\n                        <TableHead>Customer</TableHead>\r\n                        <TableHead>Items</TableHead>\r\n                        <TableHead className=\"text-right\">Total Qty</TableHead>\r\n                        <TableHead className=\"text-right\">Total Amount</TableHead>\r\n                        <TableHead>Deleted At</TableHead>\r\n                        <TableHead>Deleted By</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {sales.map((sale) => (\r\n                        <TableRow key={sale.id} className=\"hover:bg-muted/30\">\r\n                            <TableCell className=\"font-mono font-medium\">{sale.receiptNumber}</TableCell>\r\n                            <TableCell>{sale.customerName}</TableCell>\r\n                            <TableCell>\r\n                                <div className=\"max-w-[250px]\">\r\n                                    <div className=\"flex flex-wrap gap-1\">\r\n                                        {sale.items.map((item, idx) => {\r\n                                            const qty = item.quantity ?? item.qty ?? 0;\r\n                                            return (\r\n                                                <Badge key={idx} variant=\"outline\" className=\"text-[10px] py-0 h-4 bg-muted/30\">\r\n                                                    {qty}x {item.description}\r\n                                                </Badge>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right font-medium\">\r\n                                {sale.totalQuantity}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right font-semibold\">\r\n                                {currency} {sale.amount.toLocaleString()}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\r\n                                    <Clock className=\"h-3 w-3\" />\r\n                                    {format(new Date(sale.deletedAt), 'MMM d, h:mm a')}\r\n                                </div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <div className=\"flex items-center gap-1.5 text-xs\">\r\n                                    <User className=\"h-3 w-3 text-muted-foreground\" />\r\n                                    {sale.deletedBy}\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\n","\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCurrentUser } from './useCurrentUser';\r\nimport { getActivityHistoryAction } from '@/app/actions/activity';\r\n\r\nexport interface DeletedSale {\r\n    id: string;\r\n    receiptNumber: string;\r\n    customerName: string;\r\n    amount: number;\r\n    totalQuantity: number;\r\n    deletedAt: string;\r\n    deletedBy: string;\r\n    items: any[];\r\n    fullMetadata: any;\r\n}\r\n\r\nexport const useDeletedSales = () => {\r\n    const [deletedSales, setDeletedSales] = useState<DeletedSale[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const { currentBusiness } = useBusiness();\r\n    const { userId } = useCurrentUser();\r\n\r\n    const fetchDeletedSales = useCallback(async () => {\r\n        if (!currentBusiness?.id || !userId) return;\r\n\r\n        setIsLoading(true);\r\n        try {\r\n            const result = await getActivityHistoryAction(currentBusiness.id, 'SALES', 'DELETE');\r\n\r\n            if (!result.success) throw new Error(result.error);\r\n\r\n            const formatted: DeletedSale[] = (result.data || []).map((log: any) => {\r\n                const metadata = log.metadata || {};\r\n                const items = Array.isArray(metadata.items) ? metadata.items : [];\r\n\r\n                let amount = Number(metadata.totalAmount || 0);\r\n                if (amount === 0 && items.length > 0) {\r\n                    amount = items.reduce((sum: number, item: any) => {\r\n                        const itemTotal = Number(item.total) || (Number(item.price || 0) * Number(item.quantity || 0));\r\n                        return sum + itemTotal;\r\n                    }, 0);\r\n                }\r\n\r\n                const totalQuantity = items.reduce((sum: number, item: any) => sum + (Number(item.quantity ?? item.qty ?? 0)), 0);\r\n\r\n                return {\r\n                    id: log.id,\r\n                    receiptNumber: metadata.receiptNumber || 'N/A',\r\n                    customerName: metadata.customerName || 'Unknown',\r\n                    amount,\r\n                    totalQuantity,\r\n                    deletedAt: log.createdAt,\r\n                    deletedBy: log.profileName || 'Admin',\r\n                    items,\r\n                    fullMetadata: metadata\r\n                };\r\n            });\r\n\r\n            setDeletedSales(formatted);\r\n        } catch (error) {\r\n            console.error('Error fetching deleted sales:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [currentBusiness?.id, userId]);\r\n\r\n    useEffect(() => {\r\n        fetchDeletedSales();\r\n    }, [fetchDeletedSales]);\r\n\r\n    return {\r\n        deletedSales,\r\n        isLoading,\r\n        refetch: fetchDeletedSales\r\n    };\r\n};\r\n","import { useState, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Sale } from '@/types';\r\n\r\nexport const useSalesActions = () => {\r\n  const router = useRouter();\r\n  const [selectedSale, setSelectedSale] = useState<Sale | null>(null);\r\n  const [isReceiptDialogOpen, setIsReceiptDialogOpen] = useState(false);\r\n  const [isDeletingSale, setIsDeletingSale] = useState(false);\r\n\r\n  const handleEditSale = useCallback((sale: Sale) => {\r\n    // Next.js params will be handled differently perhaps, but router.push does not take state object easily.\r\n    // Assuming edit goes to new-sale page, but new-sale usually uses id param instead of passing the whole object\r\n    // For now we push to /new-sale?editId=${sale.id} or similar.\r\n    router.push(`/new-sale?editId=${sale.id}`);\r\n  }, [router]);\r\n\r\n  const handleViewReceipt = useCallback((sale: Sale) => {\r\n    setSelectedSale(sale);\r\n    setIsReceiptDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteSale = useCallback((deleteSale: (id: string) => Promise<boolean>) => {\r\n    return async (sale: Sale) => {\r\n      setIsDeletingSale(true);\r\n      try {\r\n        await deleteSale(sale.id);\r\n      } finally {\r\n        setIsDeletingSale(false);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleCloseReceiptDialog = useCallback((open: boolean) => {\r\n    setIsReceiptDialogOpen(open);\r\n    if (!open) setSelectedSale(null);\r\n  }, []);\r\n\r\n  return {\r\n    selectedSale,\r\n    isReceiptDialogOpen,\r\n    isDeletingSale,\r\n    handleEditSale,\r\n    handleViewReceipt,\r\n    handleDeleteSale,\r\n    handleCloseReceiptDialog\r\n  };\r\n};","\r\nimport React, { useState } from 'react';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport EmptySalesState from './EmptySalesState';\r\nimport SalesTableSkeleton from './SalesTableSkeleton';\r\nimport NoBusinessState from './NoBusinessState';\r\nimport SalesDataTable from './SalesDataTable';\r\nimport SalesReceiptDialog from './SalesReceiptDialog';\r\nimport SalesCategoryAnalysis from './SalesCategoryAnalysis';\r\nimport { DeletedSalesTable } from './DeletedSalesTable';\r\nimport { useSalesData } from '@/hooks/useSalesData';\r\nimport { useDeletedSales } from '@/hooks/useDeletedSales';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCurrentUser } from '@/hooks/useCurrentUser';\r\nimport { useSalesActions } from '@/hooks/useSalesActions';\r\nimport { RefreshCw, History, Trash2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nexport const SalesContent: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { settings } = useBusinessSettings();\r\n  const { userId } = useCurrentUser();\r\n\r\n  // Fetch ALL sales data without any page size limit\r\n  const {\r\n    sales,\r\n    isLoading: salesLoading,\r\n    deleteSale,\r\n    refetch,\r\n    isFetching\r\n  } = useSalesData(userId, 'desc');\r\n\r\n  const {\r\n    deletedSales,\r\n    isLoading: deletedLoading,\r\n    refetch: refetchDeleted\r\n  } = useDeletedSales();\r\n\r\n  const {\r\n    selectedSale,\r\n    isReceiptDialogOpen,\r\n    handleEditSale,\r\n    handleViewReceipt,\r\n    handleDeleteSale,\r\n    handleCloseReceiptDialog\r\n  } = useSalesActions();\r\n\r\n  // Show loading while business context OR user ID is loading\r\n  if (businessLoading || !userId) {\r\n    return (\r\n      <div className=\"p-6 space-y-6\">\r\n        <SalesTableSkeleton />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentBusiness) {\r\n    return <NoBusinessState />;\r\n  }\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: settings.currency || 'UGX',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  };\r\n\r\n  const handleRefresh = async () => {\r\n    if (activeTab === 'deleted-sales') {\r\n      await refetchDeleted();\r\n    } else {\r\n      await refetch();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-6\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-2xl font-bold tracking-tight\">Sales Management</h2>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleRefresh}\r\n            className=\"flex items-center gap-2\"\r\n            disabled={isFetching || deletedLoading}\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${(isFetching || deletedLoading) ? 'animate-spin' : ''}`} />\r\n            {(isFetching || deletedLoading) ? 'Refreshing...' : 'Refresh'}\r\n          </Button>\r\n        </div>\r\n\r\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"overview\">Sales Overview</TabsTrigger>\r\n            <TabsTrigger value=\"analysis\">Sales Source</TabsTrigger>\r\n            <TabsTrigger value=\"deleted-sales\" className=\"flex items-center gap-2 text-destructive data-[state=active]:text-destructive\">\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              Deleted Sales\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"overview\" className=\"mt-0\">\r\n            {salesLoading && !sales.length ? (\r\n              <SalesTableSkeleton />\r\n            ) : sales.length === 0 ? (\r\n              <EmptySalesState />\r\n            ) : (\r\n              <SalesDataTable\r\n                sales={sales}\r\n                onViewReceipt={handleViewReceipt}\r\n                onEditSale={handleEditSale}\r\n                onDeleteSale={handleDeleteSale(deleteSale)}\r\n                currency={settings.currency}\r\n                isLoading={salesLoading}\r\n              />\r\n            )}\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"analysis\" className=\"mt-6\">\r\n            <SalesCategoryAnalysis\r\n              sales={sales}\r\n              formatCurrency={formatCurrency}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"deleted-sales\" className=\"mt-6\">\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex flex-col gap-1\">\r\n                <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                  <Trash2 className=\"h-5 w-5 text-muted-foreground\" />\r\n                  Deleted Sales History\r\n                </h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  View and manage recently deleted sales records.\r\n                </p>\r\n              </div>\r\n              <DeletedSalesTable\r\n                sales={deletedSales}\r\n                isLoading={deletedLoading}\r\n                currency={settings.currency}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <SalesReceiptDialog\r\n        selectedSale={selectedSale}\r\n        isOpen={isReceiptDialogOpen}\r\n        onOpenChange={handleCloseReceiptDialog}\r\n        currency={settings.currency}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","\r\nimport React from 'react';\r\nimport { SalesContent } from '@/components/sales/SalesContent';\r\n\r\nconst Sales = () => {\r\n  return <SalesContent />;\r\n};\r\n\r\nexport default Sales;\r\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[7,11,15,26,27,28,30,36]}