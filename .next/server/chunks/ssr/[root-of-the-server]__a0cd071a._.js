module.exports=[747899,(a,b,c)=>{b.exports=a.x("react-router-dom-2c8e5fc0cdea126d",()=>require("react-router-dom-2c8e5fc0cdea126d"))},193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},684046,(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={},i={RequestCookies:()=>p,ResponseCookies:()=>q,parseCookie:()=>l,parseSetCookie:()=>m,stringifyCookie:()=>k};for(var j in i)d(h,j,{get:i[j],enumerable:!0});function k(a){var b;let c=["path"in a&&a.path&&`Path=${a.path}`,"expires"in a&&(a.expires||0===a.expires)&&`Expires=${("number"==typeof a.expires?new Date(a.expires):a.expires).toUTCString()}`,"maxAge"in a&&"number"==typeof a.maxAge&&`Max-Age=${a.maxAge}`,"domain"in a&&a.domain&&`Domain=${a.domain}`,"secure"in a&&a.secure&&"Secure","httpOnly"in a&&a.httpOnly&&"HttpOnly","sameSite"in a&&a.sameSite&&`SameSite=${a.sameSite}`,"partitioned"in a&&a.partitioned&&"Partitioned","priority"in a&&a.priority&&`Priority=${a.priority}`].filter(Boolean),d=`${a.name}=${encodeURIComponent(null!=(b=a.value)?b:"")}`;return 0===c.length?d:`${d}; ${c.join("; ")}`}function l(a){let b=new Map;for(let c of a.split(/; */)){if(!c)continue;let a=c.indexOf("=");if(-1===a){b.set(c,"true");continue}let[d,e]=[c.slice(0,a),c.slice(a+1)];try{b.set(d,decodeURIComponent(null!=e?e:"true"))}catch{}}return b}function m(a){if(!a)return;let[[b,c],...d]=l(a),{domain:e,expires:f,httponly:g,maxage:h,path:i,samesite:j,secure:k,partitioned:m,priority:p}=Object.fromEntries(d.map(([a,b])=>[a.toLowerCase().replace(/-/g,""),b]));{var q,r,s={name:b,value:decodeURIComponent(c),domain:e,...f&&{expires:new Date(f)},...g&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:i,...j&&{sameSite:n.includes(q=(q=j).toLowerCase())?q:void 0},...k&&{secure:!0},...p&&{priority:o.includes(r=(r=p).toLowerCase())?r:void 0},...m&&{partitioned:!0}};let a={};for(let b in s)s[b]&&(a[b]=s[b]);return a}}b.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var n=["strict","lax","none"],o=["low","medium","high"],p=class{constructor(a){this._parsed=new Map,this._headers=a;const b=a.get("cookie");if(b)for(const[a,c]of l(b))this._parsed.set(a,{name:a,value:c})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed);if(!a.length)return c.map(([a,b])=>b);let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(([a])=>a===d).map(([a,b])=>b)}has(a){return this._parsed.has(a)}set(...a){let[b,c]=1===a.length?[a[0].name,a[0].value]:a,d=this._parsed;return d.set(b,{name:b,value:c}),this._headers.set("cookie",Array.from(d).map(([a,b])=>k(b)).join("; ")),this}delete(a){let b=this._parsed,c=Array.isArray(a)?a.map(a=>b.delete(a)):b.delete(a);return this._headers.set("cookie",Array.from(b).map(([a,b])=>k(b)).join("; ")),c}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a=>`${a.name}=${encodeURIComponent(a.value)}`).join("; ")}},q=class{constructor(a){var b,c,d;this._parsed=new Map,this._headers=a;const e=null!=(d=null!=(c=null==(b=a.getSetCookie)?void 0:b.call(a))?c:a.get("set-cookie"))?d:[];for(const a of Array.isArray(e)?e:function(a){if(!a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}(e)){const b=m(a);b&&this._parsed.set(b.name,b)}}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed.values());if(!a.length)return c;let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(a=>a.name===d)}has(a){return this._parsed.has(a)}set(...a){let[b,c,d]=1===a.length?[a[0].name,a[0].value,a[0]]:a,e=this._parsed;return e.set(b,function(a={name:"",value:""}){return"number"==typeof a.expires&&(a.expires=new Date(a.expires)),a.maxAge&&(a.expires=new Date(Date.now()+1e3*a.maxAge)),(null===a.path||void 0===a.path)&&(a.path="/"),a}({name:b,value:c,...d})),function(a,b){for(let[,c]of(b.delete("set-cookie"),a)){let a=k(c);b.append("set-cookie",a)}}(e,this._headers),this}delete(...a){let[b,c]="string"==typeof a[0]?[a[0]]:[a[0].name,a[0]];return this.set({...c,name:b,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(k).join("; ")}}},564375,a=>{"use strict";var b=a.i(127669);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],564375)},436028,a=>{"use strict";let b=(0,a.i(564375).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],436028)},73679,a=>{"use strict";let b=(0,a.i(564375).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],73679)},55594,a=>{"use strict";let b=(0,a.i(564375).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],55594)},248586,a=>{"use strict";let b=(0,a.i(564375).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],248586)},675097,a=>{"use strict";var b=a.i(579168),c=a.i(627068),d=a.i(332759),e=a.i(539141),f=a.i(706555),g=a.i(508171),h=a.i(127669),i=a.i(747899),j=a.i(73679),k=a.i(248586),l=a.i(564375);let m=(0,l.default)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var n=a.i(436028);let o=(0,l.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var p=a.i(55594);a.s(["default",0,()=>{let[a]=(0,i.useSearchParams)(),b=(0,i.useNavigate)(),[c,d]=(0,h.useState)("loading"),[e,f]=(0,h.useState)("Verifying your payment with PesaPal..."),[l,q]=(0,h.useState)(null),r=a.get("OrderTrackingId"),s=a.get("purchase_id");return(0,h.useEffect)(()=>{(async()=>{if(!r){console.error("[PaymentCallback] No OrderTrackingId found in URL parameters."),d("failed"),f("Missing payment reference. We couldn't track this transaction.");return}try{console.log("--- [PaymentCallback] Initiating Verification ---"),console.log("Tracking ID:",r),console.log("Purchase ID:",s),d("loading");let a=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderTrackingId:r,purchaseId:s})}),c=await a.json();if(!a.ok)throw console.error("[PaymentCallback] HTTP error:",a.status),Error(`HTTP ${a.status}`);console.log("[PaymentCallback] Backend Response:",c);let e=c.is_subscription;if(console.log("[PaymentCallback] Function Result:",c),!1===c.success){console.error("[PaymentCallback] Business Error:",c.error),d("failed"),f(c.error||"Verification failed on the server.");return}let g="completed"===c.payment_status;q(c),console.log("Result Analysis:",{isCompleted:g,isSubscription:e,value:c.value_added}),g?(d("success"),f(`Access Restored! Your subscription has been extended by ${c.value_added} days.`),setTimeout(()=>{console.log("[PaymentCallback] Auto-redirecting to dashboard"),b("/")},4e3)):"failed"===c.payment_status?(d("failed"),f("The transaction was declined by PesaPal. Please try again.")):"cancelled"===c.payment_status?(d("cancelled"),f("The payment process was cancelled.")):(d("loading"),f("Your payment is still being processed by the network. Please wait..."),setTimeout(()=>{console.log("[PaymentCallback] Refreshing to check status again..."),window.location.reload()},6e3))}catch(a){console.error("[PaymentCallback] Unexpected Error:",a),d("failed"),f(a.message||"An unexpected error occurred while verifying your payment.")}})()},[r,s,b]),(0,g.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#fafafa] p-6",children:(0,g.jsxs)("div",{className:"w-full max-w-md animate-in fade-in slide-in-from-bottom-4 duration-1000",children:[(0,g.jsxs)("div",{className:"bg-white border border-border/40 shadow-[0_32px_64px_-12px_rgba(0,0,0,0.06)] rounded-3xl p-10 text-center relative overflow-hidden",children:[(0,g.jsx)("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600"}),(0,g.jsxs)("div",{className:"mb-10 relative",children:["loading"===c&&(0,g.jsxs)("div",{className:"w-24 h-24 bg-blue-50/50 text-blue-600 rounded-3xl flex items-center justify-center mx-auto border border-blue-100/50 relative overflow-hidden",children:[(0,g.jsx)(m,{className:"w-10 h-10 animate-spin relative z-10"}),(0,g.jsx)("div",{className:"absolute inset-0 bg-blue-100/20 animate-pulse"})]}),"success"===c&&(0,g.jsx)("div",{className:"w-24 h-24 bg-green-50/50 text-green-600 rounded-3xl flex items-center justify-center mx-auto border border-green-100/50 rotate-3 scale-110 duration-500",children:(0,g.jsx)(j.CheckCircle,{className:"w-12 h-12 -rotate-3"})}),"failed"===c&&(0,g.jsx)("div",{className:"w-24 h-24 bg-red-50/50 text-red-600 rounded-3xl flex items-center justify-center mx-auto border border-red-100/50 rotate-3 animate-in shake-in",children:(0,g.jsx)(k.XCircle,{className:"w-12 h-12 -rotate-3"})}),"cancelled"===c&&(0,g.jsx)("div",{className:"w-24 h-24 bg-amber-50/50 text-amber-600 rounded-3xl flex items-center justify-center mx-auto border border-amber-100/50 rotate-3",children:(0,g.jsx)(n.AlertCircle,{className:"w-12 h-12 -rotate-3"})})]}),(0,g.jsxs)("h1",{className:"text-2xl font-bold text-foreground mb-4 font-inter tracking-tight",children:["loading"===c&&"Verifying Payment","success"===c&&"Payment Successful","failed"===c&&"Transaction Failed","cancelled"===c&&"Payment Cancelled"]}),(0,g.jsx)("p",{className:"text-[15px] text-muted-foreground leading-relaxed mb-10 px-4",children:e}),"success"===c&&l&&(0,g.jsxs)("div",{className:"bg-[#f8faff] rounded-2xl p-6 border border-blue-50/50 mb-10 text-left animate-in slide-in-from-bottom-2 duration-700",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-blue-600/60",children:"Subscription Details"}),(0,g.jsx)(o,{className:"w-3 h-3 text-blue-500"})]}),(0,g.jsxs)("div",{className:"flex items-end justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:"text-foreground font-bold text-lg",children:[l.value_added," Days Access"]}),(0,g.jsx)("p",{className:"text-[10px] uppercase tracking-wider font-medium text-muted-foreground/80",children:"Value Added to Account"})]}),(0,g.jsx)("div",{className:"text-right",children:(0,g.jsx)("p",{className:"text-foreground/40 font-mono text-[10px] truncate max-w-[100px]",children:l.tracking_id})})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:["loading"!==c&&(0,g.jsxs)("button",{onClick:()=>b("/"),className:"group relative w-full h-14 bg-foreground text-background font-bold text-[12px] uppercase tracking-widest rounded-2xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 overflow-hidden shadow-lg shadow-black/5",children:[(0,g.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:["Continue to Dashboard",(0,g.jsx)(p.ArrowRight,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),(0,g.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity"})]}),"loading"===c&&(0,g.jsx)("div",{className:"py-4",children:(0,g.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-[0.2em] font-medium opacity-60 animate-pulse",children:"Secured by PesaPal Integrated"})})]})]}),(0,g.jsxs)("p",{className:"mt-8 text-center text-[11px] text-muted-foreground/40 font-medium",children:["Â© ",new Date().getFullYear()," Gonza Systems. All rights reserved."]})]})})}],669966);var q=a.i(669966),r=a.i(509193);let s=(0,d.hoist)(q,"default"),t=(0,d.hoist)(q,"getStaticProps"),u=(0,d.hoist)(q,"getStaticPaths"),v=(0,d.hoist)(q,"getServerSideProps"),w=(0,d.hoist)(q,"config"),x=(0,d.hoist)(q,"reportWebVitals"),y=(0,d.hoist)(q,"unstable_getStaticProps"),z=(0,d.hoist)(q,"unstable_getStaticPaths"),A=(0,d.hoist)(q,"unstable_getStaticParams"),B=(0,d.hoist)(q,"unstable_getServerProps"),C=(0,d.hoist)(q,"unstable_getServerSideProps"),D=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/PaymentCallback",pathname:"/PaymentCallback",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:q}),E=(0,r.getHandler)({srcPage:"/PaymentCallback",config:w,userland:q,routeModule:D,getStaticPaths:u,getStaticProps:t,getServerSideProps:v});a.s(["config",0,w,"default",0,s,"getServerSideProps",0,v,"getStaticPaths",0,u,"getStaticProps",0,t,"handler",0,E,"reportWebVitals",0,x,"routeModule",0,D,"unstable_getServerProps",0,B,"unstable_getServerSideProps",0,C,"unstable_getStaticParams",0,A,"unstable_getStaticPaths",0,z,"unstable_getStaticProps",0,y],675097)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a0cd071a._.js.map