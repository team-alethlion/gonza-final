module.exports=[12387,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(493901),f=a.i(396465),g=a.i(558277),h=b([f]);[f]=h.then?(await h)():h,a.s(["default",0,({onCreateAccount:a,canCreate:b=!0})=>((0,g.useIsMobile)(),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Cash Accounts"}),b&&(0,d.jsxs)(f.Button,{onClick:a,className:"gap-2",size:"default",children:[(0,d.jsx)(e.Plus,{className:"h-4 w-4"}),"New Cash Account"]})]}))]),c()}catch(a){c(a)}},!1),378518,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(893759),f=b([e]);[e]=f.then?(await f)():f,a.s(["default",0,({open:a,onOpenChange:b,account:c,transactionCount:f=0,details:g,onConfirm:h})=>{if(!c)return null;let i=f>0;return(0,d.jsx)(e.AlertDialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(e.AlertDialogContent,{children:[(0,d.jsxs)(e.AlertDialogHeader,{children:[(0,d.jsx)(e.AlertDialogTitle,{children:"Delete Cash Account"}),(0,d.jsxs)(e.AlertDialogDescription,{className:"space-y-2",children:[(0,d.jsxs)("span",{className:"block",children:['Are you sure you want to delete the cash account "',c.name,'"?']}),i&&(0,d.jsxs)("span",{className:"block text-amber-600 font-medium",children:["This account has ",g||`${f} linked records`,"."]})]})]}),(0,d.jsxs)(e.AlertDialogFooter,{className:i?"flex-col gap-2 sm:flex-col":"",children:[(0,d.jsx)(e.AlertDialogCancel,{children:"Cancel"}),i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.AlertDialogAction,{onClick:()=>h(!1),className:"bg-blue-600 hover:bg-blue-700",children:"Delete Account Only (Unlink Records)"}),(0,d.jsx)(e.AlertDialogAction,{onClick:()=>h(!0),className:"bg-red-600 hover:bg-red-700",children:"Delete Account & All Records"})]}):(0,d.jsx)(e.AlertDialogAction,{onClick:()=>h(!1),className:"bg-red-600 hover:bg-red-700",children:"Delete Account"})]})]})})}]),c()}catch(a){c(a)}},!1),848479,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(747899),g=a.i(811705),h=a.i(396465),i=a.i(899054),j=a.i(718192),k=a.i(924049),l=a.i(96144),m=a.i(778856),n=a.i(311988),o=a.i(589984),p=a.i(466890),q=a.i(413890),r=a.i(224993),s=a.i(558277),t=a.i(378518),u=a.i(799856),v=a.i(805297),w=a.i(625250),x=b([g,h,i,o,p,q,r,t,u,v,w]);[g,h,i,o,p,q,r,t,u,v,w]=x.then?(await x)():x,a.s(["default",0,({account:a,onAccountDeleted:b})=>{let c=(0,f.useNavigate)(),x=(0,s.useIsMobile)(),{deleteAccount:y,deleteAccountWithTransactions:z}=(0,p.useCashAccounts)(),{getDailySummary:A}=(0,q.useCashTransactions)(a.id),{settings:B}=(0,r.useBusinessSettings)(),{hasPermission:C}=(0,v.useProfiles)(),{canManageFinanceAccounts:D}=(0,w.useFinancialVisibility)(),E=C("finance","delete"),[F,G]=(0,e.useState)(!0),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(0),[L,M]=(0,e.useState)(""),[N,O]=(0,e.useState)({date:new Date,openingBalance:0,cashIn:0,cashOut:0,transfersIn:0,transfersOut:0,closingBalance:0}),P=(0,e.useMemo)(()=>a=>(0,u.formatCashAmount)(a,B.currency||"USD"),[B.currency]),Q=(0,e.useCallback)(async()=>{G(!0);try{let b=await A(new Date,a.id);O(b)}catch(a){console.error("Error loading today's summary:",a)}finally{G(!1)}},[A,a.id]);(0,e.useEffect)(()=>{Q()},[Q]);let R=(0,e.useCallback)(async()=>{console.log("Delete button clicked for account:",a.id);try{let c=await y(a.id,b);console.log("Delete result:",c),c&&"object"==typeof c&&"hasTransactions"in c&&(c.hasTransactions?(console.log("Account has transactions, showing dialog"),K(c.transactionCount||0),M(c.details||""),I(!0)):c.success?console.log("Account deleted successfully without dialog"):console.log("Account deletion failed"))}catch(a){console.error("Unexpected error during deletion:",a)}},[y,a.id,b]),S=(0,e.useCallback)(async c=>{console.log("Confirm delete called with deleteTransactions:",c);try{let d=await z(a.id,c,b);console.log("Delete with transactions result:",d),d?(I(!1),console.log("Deletion successful, dialog closed")):console.log("Deletion failed")}catch(a){console.error("Error in handleConfirmDelete:",a)}},[z,a.id,b]),T=(0,e.useCallback)(()=>{c(`/cash/${a.id}`)},[c,a.id]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Card,{className:`hover:shadow-lg transition-all duration-200 cursor-pointer ${x?"shadow-sm border-gray-200":"hover:shadow-md"}`,children:[(0,d.jsxs)(g.CardHeader,{className:`flex flex-row items-center justify-between space-y-0 ${x?"pb-3":"pb-2"}`,children:[(0,d.jsxs)(g.CardTitle,{className:`${x?"text-base":"text-sm"} font-semibold flex items-center gap-2 text-gray-900`,children:[(0,d.jsx)(m.Wallet,{className:`${x?"h-5 w-5":"h-4 w-4"} text-primary`}),(0,d.jsx)("span",{className:"truncate",children:a.name}),a.isDefault&&(0,d.jsx)(i.Badge,{variant:"secondary",className:`${x?"text-xs px-2 py-0.5":"text-xs"} bg-primary/10 text-primary border-primary/20`,children:"Default"})]}),(0,d.jsxs)(o.DropdownMenu,{children:[(0,d.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,d.jsx)(h.Button,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100",children:(0,d.jsx)(j.MoreHorizontal,{className:"h-4 w-4 text-gray-500"})})}),(0,d.jsxs)(o.DropdownMenuContent,{align:"end",className:"bg-white border border-gray-200 shadow-lg",children:[(0,d.jsx)(o.DropdownMenuItem,{onClick:T,className:"hover:bg-gray-50",children:"View Details"}),E&&(0,d.jsx)(o.DropdownMenuItem,{onClick:R,className:"text-red-600 hover:bg-red-50",children:"Delete Account"})]})]})]}),(0,d.jsx)(g.CardContent,{onClick:T,className:x?"px-4 pb-4":"",children:(0,d.jsxs)("div",{className:`space-y-${x?"4":"3"}`,children:[(0,d.jsxs)("div",{className:x?"space-y-1":"",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-gray-900 flex items-center",children:F?(0,d.jsx)(n.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"}):D?P(N.closingBalance):"•••"}),(0,d.jsx)("p",{className:`${x?"text-sm":"text-xs"} text-gray-500 font-medium`,children:"Current Balance"})]}),a.description&&(0,d.jsx)("p",{className:`${x?"text-sm leading-relaxed":"text-sm"} text-gray-600 line-clamp-2`,children:a.description}),(0,d.jsxs)("div",{className:`grid grid-cols-1 ${x?"gap-3":"gap-2"} text-sm`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-md",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,d.jsx)(k.ArrowUpRight,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"font-medium",children:"Opening"})]}),(0,d.jsx)("span",{className:"font-semibold text-green-800 flex items-center",children:F?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin text-green-600"}):D?P(N.openingBalance):"•••"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-md",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-blue-700",children:[(0,d.jsx)(l.ArrowDownRight,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"font-medium",children:"Today's Close"})]}),(0,d.jsx)("span",{className:"font-semibold text-blue-800 flex items-center",children:F?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin text-blue-600"}):D?P(N.closingBalance):"•••"})]})]}),(0,d.jsx)("div",{className:"pt-2",children:(0,d.jsx)(h.Button,{variant:"outline",size:x?"default":"sm",className:`w-full font-medium hover:bg-primary hover:text-white transition-colors ${x?"h-10":""}`,onClick:a=>{a.stopPropagation(),T()},children:"Manage Account"})})]})})]}),(0,d.jsx)(t.default,{open:H,onOpenChange:I,account:a,transactionCount:J,details:L,onConfirm:S})]})}]),c()}catch(a){c(a)}},!1),490839,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(493901),f=a.i(396465),g=a.i(558277),h=a.i(848479),i=b([f,h]);[f,h]=i.then?(await i)():i,a.s(["default",0,({accounts:a,isLoading:b,onCreateAccount:c,onAccountDeleted:i,canCreate:j=!0})=>((0,g.useIsMobile)(),b)?(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[1,2,3].map(a=>(0,d.jsx)("div",{className:"h-64 bg-gray-100 animate-pulse rounded-lg"},a))}):0===a.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cash accounts"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first cash account."}),j&&(0,d.jsxs)(f.Button,{onClick:c,className:"gap-2",children:[(0,d.jsx)(e.Plus,{className:"h-4 w-4"}),"Create Cash Account"]})]}):(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:a.map(a=>(0,d.jsx)(h.default,{account:a,onAccountDeleted:i},a.id))})]),c()}catch(a){c(a)}},!1),381243,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(531811),f=a.i(964889),g=a.i(385375),h=a.i(529845),i=a.i(834122),j=a.i(751184),k=a.i(257257),l=a.i(837692),m=b([e,f,g,h,i,j]);[e,f,g,h,i,j]=m.then?(await m)():m,a.s(["useProfitLossData",0,(a,b,c,m=0)=>{let{user:n}=(0,e.useAuth)(),{currentBusiness:o}=(0,f.useBusiness)(),[p,q]=(0,d.useState)(!1),{sales:r,isLoading:s}=(0,g.useSalesData)(n?.id),{expenses:t,isLoading:u}=(0,h.useExpenses)(),{stockSummaryData:v,isLoading:w}=(0,i.useStockSummaryData)(b),{carriageInwards:x,isLoading:y}=(0,j.useCarriageInwards)(),z=(0,d.useMemo)(()=>{let d,e;if("specific"===a&&c)(d=new Date(c)).setHours(0,0,0,0),(e=new Date(c)).setHours(23,59,59,999);else if("custom"===a&&b.from&&b.to)d=b.from,e=b.to;else{let b=(0,k.getDateRangeFromFilter)(a);d=b.from,e=b.to}let f=r.filter(b=>{let f=new Date(b.date);return"specific"===a&&c?(0,l.isSameDay)(f,c)&&"Quote"!==b.paymentStatus:f>=d&&f<=e&&"Quote"!==b.paymentStatus}),g=t.filter(b=>{let f=new Date(b.date);return"specific"===a&&c?(0,l.isSameDay)(f,c):f>=d&&f<=e}),h=x.filter(b=>{let f=new Date(b.date);return"specific"===a&&c?(0,l.isSameDay)(f,c):f>=d&&f<=e}),i=f.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.price*b.quantity,0),0),j=v.reduce((a,b)=>a+b.returnIn*b.sellingPrice,0),n=i-j,o=v.reduce((a,b)=>a+b.openingStock*b.costPrice,0),p=v.reduce((a,b)=>a+b.stockIn*b.costPrice,0),q=h.reduce((a,b)=>a+b.amount,0),s=v.reduce((a,b)=>a+b.closingStock*b.costPrice,0),u=f.reduce((a,b)=>a+b.items.reduce((a,b)=>a+(b.cost||0)*b.quantity,0),0),w=u+q,y=n-w,z={};g.forEach(a=>{let b=a.category||"Uncategorized";z[b]=(z[b]||0)+a.amount});let A=Object.values(z).reduce((a,b)=>a+b,0),B=y-A,C=B>0?B*m/100:0;return{sales:i,salesReturns:j,netSales:n,openingStock:o,purchases:p,carriageInwards:q,closingStock:s,totalCostSales:u,totalCOGS:w,grossProfit:y,expensesByCategory:z,totalExpenses:A,netProfitLoss:B,taxPercentage:m,taxAmount:C,finalProfitAfterTax:B-C}},[r,t,v,x,a,b,c,m]),A=(0,d.useMemo)(()=>s||u||w||y,[s,u,w,y]);return{profitLossData:z,isLoading:A}}]),c()}catch(a){c(a)}},!1),821719,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(112779),f=a.i(397625),g=b([e,f]);[e,f]=g.then?(await g)():g,a.s(["default",0,({taxPercentage:a,onTaxChange:b,netProfitLoss:c,formatCurrency:g})=>(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(f.Label,{htmlFor:"tax-percentage",className:"text-sm font-medium",children:"Tax %:"}),(0,d.jsx)(e.Input,{id:"tax-percentage",type:"number",min:"0",max:"100",step:"0.1",value:a,onChange:a=>{let c=parseFloat(a.target.value)||0;b(Math.max(0,Math.min(100,c)))},className:"w-20 h-8 text-center"})]}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"Tax Amount: "}),(0,d.jsx)("span",{className:"font-medium",children:g(c>0?c*a/100:0)})]})]})]),c()}catch(a){c(a)}},!1),699829,a=>{"use strict";let b=(0,a.i(564375).default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);a.s(["File",()=>b],699829)},835471,a=>{"use strict";var b=a.i(792071);a.s(["exportProfitLossToCSV",0,a=>{let{data:c,dateRange:d,currency:e,businessName:f,dateFilter:g}=a,h=(a,b=!1)=>b&&a<0?`-${Math.abs(a).toFixed(0)}`:a.toFixed(0),i=[];i.push("PROFIT & LOSS ACCOUNT"),i.push(""),f&&i.push(`Business,${f}`),i.push(`Period,${((a,c)=>{if(c.from&&c.to){let d=c.from.getMonth()===c.to.getMonth()&&c.from.getFullYear()===c.to.getFullYear();if(c.from.toDateString()===c.to.toDateString())return(0,b.format)(c.from,"MMM dd, yyyy");if(d&&"this-month"===a)return(0,b.format)(c.from,"MMMM yyyy");if("this-year"===a)return(0,b.format)(c.from,"yyyy");else if("last-month"===a)return(0,b.format)(c.from,"MMMM yyyy");else if("this-week"===a||"last-week"===a)return`Week of ${(0,b.format)(c.from,"MMM dd")} - ${(0,b.format)(c.to,"MMM dd, yyyy")}`;else return`Custom Period: ${(0,b.format)(c.from,"MM/dd/yyyy")} - ${(0,b.format)(c.to,"MM/dd/yyyy")}`}return c.from?(0,b.format)(c.from,"MMM dd, yyyy"):"All Periods"})(g,d)}`),i.push(`Generated,${(0,b.format)(new Date,"MMM dd yyyy HH:mm")}`),i.push(`Currency,${e}`),i.push(""),i.push("DETAILS,AMOUNT"),i.push(""),i.push("SALES/REVENUE,"),i.push(`Sales/Revenue,${h(c.sales)}`),i.push(`Sales Returns,(${h(c.salesReturns)})`),i.push(`NET SALES,${h(c.netSales)}`),i.push(""),i.push("COST OF GOODS SOLD (COGS),"),i.push(`Total Cost Sales,${h(c.totalCostSales)}`),i.push(`Carriage Inwards,${h(c.carriageInwards)}`),i.push(`TOTAL COST OF GOODS SOLD (COGS),${h(c.totalCOGS)}`),i.push(""),i.push(`GROSS PROFIT,${h(c.grossProfit,!0)}`),i.push(""),i.push("EXPENSES,"),Object.entries(c.expensesByCategory).forEach(([a,b])=>{let c=a.charAt(0).toUpperCase()+a.slice(1).toLowerCase();i.push(`${c},${h(b)}`)}),i.push(`TOTAL EXPENSES,${h(c.totalExpenses)}`),i.push(""),i.push(`NET PROFIT / LOSS,${h(c.netProfitLoss,!0)}`),i.push(`Tax (${c.taxPercentage}%),${h(c.taxAmount)}`),i.push(`FINAL PROFIT AFTER TAX,${h(c.finalProfitAfterTax,!0)}`);let j=new Blob([i.join("\n")],{type:"text/csv;charset=utf-8;"}),k=document.createElement("a");if(void 0!==k.download){let a=URL.createObjectURL(j);k.setAttribute("href",a);let c=`profit_loss_${d.from?(0,b.format)(d.from,"yyyy-MM-dd"):"current"}_to_${d.to?(0,b.format)(d.to,"yyyy-MM-dd"):"current"}.csv`;k.setAttribute("download",c),k.style.visibility="hidden",document.body.appendChild(k),k.click(),document.body.removeChild(k)}}])},701812,a=>{"use strict";var b=a.i(959866),c=a.i(792071);let d=async a=>{let{data:d,dateRange:e,currency:f,businessName:g,dateFilter:h}=a,i=new b.default({orientation:"portrait",unit:"mm",format:"a4"}),j=i.internal.pageSize.getWidth(),k=i.internal.pageSize.getHeight(),l=20,m=()=>{i.setFontSize(8),i.setFont("helvetica","normal"),i.setTextColor(150,150,150),i.text("Created By Gonza Systems",j/2,k-10,{align:"center"}),i.setTextColor(0,0,0)},n=a=>`${f} ${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;if(g){i.setFontSize(18),i.setFont("helvetica","bold");let a=i.getTextWidth(g);i.text(g,(j-a)/2,l),l+=10}i.setFontSize(16),i.setFont("helvetica","bold");let o="Profit & Loss Account",p=i.getTextWidth(o);i.text(o,(j-p)/2,l),l+=8,i.setFontSize(11),i.setFont("helvetica","normal");let q=((a,b)=>{if(b.from&&b.to){let d=b.from.getMonth()===b.to.getMonth()&&b.from.getFullYear()===b.to.getFullYear();if(b.from.toDateString()===b.to.toDateString())return(0,c.format)(b.from,"MMM dd, yyyy");if(d&&"this-month"===a)return(0,c.format)(b.from,"MMMM yyyy");if("this-year"===a)return(0,c.format)(b.from,"yyyy");else if("last-month"===a)return(0,c.format)(b.from,"MMMM yyyy");else if("this-week"===a||"last-week"===a)return`Week of ${(0,c.format)(b.from,"MMM dd")} - ${(0,c.format)(b.to,"MMM dd, yyyy")}`;else return`Custom Period: ${(0,c.format)(b.from,"MM/dd/yyyy")} - ${(0,c.format)(b.to,"MM/dd/yyyy")}`}return b.from?(0,c.format)(b.from,"MMM dd, yyyy"):"All Periods"})(h,e),r=i.getTextWidth(q);i.text(q,(j-r)/2,l),l+=15;let s=a=>{l>k-40&&(m(),i.addPage(),l=20),i.setFontSize(12),i.setFont("helvetica","bold"),i.text(a,20,l),l+=6},t=(a,b,c={})=>{let{isBold:d=!1,isSubtraction:e=!1,isTotal:f=!1,indent:g=!1,showNegativeSign:h=!1}=c;if(l>k-25&&(m(),i.addPage(),l=20),i.setFontSize(10),i.setFont("helvetica",d?"bold":"normal"),i.text(a,g?30:20,l),null!==b){let a;a=h&&b<0?`-${n(Math.abs(b))}`:e?`(${n(Math.abs(b))})`:n(Math.abs(b));let c=i.getTextWidth(a);i.text(a,j-20-c,l)}f&&(i.setLineWidth(.3),i.line(20,l+2,j-20,l+2),l+=2),l+=5},u=(a=3)=>{l+=a};s("SALES/REVENUE"),t("Sales/Revenue",d.sales,{indent:!0}),t("Sales Returns",d.salesReturns,{isSubtraction:!0,indent:!0}),t("NET SALES",d.netSales,{isBold:!0,isTotal:!0}),u(5),s("COST OF GOODS SOLD (COGS)"),t("Total Cost Sales",d.totalCostSales,{indent:!0}),t("Carriage Inwards",d.carriageInwards,{indent:!0}),t("TOTAL COST OF GOODS SOLD (COGS)",d.totalCOGS,{isBold:!0,isTotal:!0}),u(5),t("GROSS PROFIT",d.grossProfit,{isBold:!0,isTotal:!0,showNegativeSign:!0}),u(3),s("EXPENSES"),Object.entries(d.expensesByCategory).forEach(([a,b])=>{t(a.charAt(0).toUpperCase()+a.slice(1).toLowerCase(),b,{indent:!0})}),t("TOTAL EXPENSES",d.totalExpenses,{isBold:!0,isTotal:!0}),u(5),t("NET PROFIT / LOSS",d.netProfitLoss,{isBold:!0,isTotal:!0,showNegativeSign:!0}),t(`Tax (${d.taxPercentage}%)`,d.taxAmount,{indent:!0}),t("FINAL PROFIT AFTER TAX",d.finalProfitAfterTax,{isBold:!0,isTotal:!0,showNegativeSign:!0}),m();let v=`profit_loss_${e.from?(0,c.format)(e.from,"yyyy-MM-dd"):"current"}_to_${e.to?(0,c.format)(e.to,"yyyy-MM-dd"):"current"}.pdf`;i.save(v)};a.s(["exportProfitLossToPDF",0,d])},82686,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(396465),g=a.i(589984),h=a.i(532572),i=a.i(199987),j=a.i(699829),k=a.i(835471),l=a.i(701812),m=a.i(108191),n=b([f,g]);[f,g]=n.then?(await n)():n,a.s(["default",0,({data:a,dateRange:b,currency:c,businessName:n,businessLogo:o,dateFilter:p})=>{let[q,r]=(0,e.useState)(!1),{toast:s}=(0,m.useToast)(),t=async()=>{try{r(!0),(0,k.exportProfitLossToCSV)({data:a,dateRange:b,currency:c,businessName:n,dateFilter:p}),s({title:"Export Successful",description:"Profit & Loss Account exported to CSV successfully."})}catch(a){console.error("Error exporting CSV:",a),s({title:"Export Failed",description:"Failed to export Profit & Loss Account to CSV.",variant:"destructive"})}finally{r(!1)}},u=async()=>{try{r(!0),await (0,l.exportProfitLossToPDF)({data:a,dateRange:b,currency:c,businessName:n,businessLogo:o,dateFilter:p}),s({title:"Export Successful",description:"Profit & Loss Account exported to PDF successfully."})}catch(a){console.error("Error exporting PDF:",a),s({title:"Export Failed",description:"Failed to export Profit & Loss Account to PDF.",variant:"destructive"})}finally{r(!1)}};return(0,d.jsxs)(g.DropdownMenu,{children:[(0,d.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,d.jsxs)(f.Button,{variant:"outline",size:"sm",disabled:q,children:[(0,d.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,d.jsxs)(g.DropdownMenuContent,{children:[(0,d.jsxs)(g.DropdownMenuItem,{onClick:t,disabled:q,children:[(0,d.jsx)(j.File,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,d.jsxs)(g.DropdownMenuItem,{onClick:u,disabled:q,children:[(0,d.jsx)(i.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})}]),c()}catch(a){c(a)}},!1),367668,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(811705),f=a.i(540629),g=a.i(340001),h=a.i(821719),i=a.i(82686),j=b([e,f,g,h,i]);[e,f,g,h,i]=j.then?(await j)():j,a.s(["default",0,({data:a,isLoading:b,formatCurrency:c,onTaxChange:j,dateRange:k,businessName:l,businessLogo:m,currency:n,dateFilter:o})=>{if(b)return(0,d.jsxs)(e.Card,{children:[(0,d.jsx)(e.CardHeader,{children:(0,d.jsx)(e.CardTitle,{children:"Profit & Loss Account"})}),(0,d.jsx)(e.CardContent,{children:(0,d.jsx)("div",{className:"space-y-3",children:[...Array(15)].map((a,b)=>(0,d.jsx)(g.Skeleton,{className:"h-8 w-full"},b))})})]});let p=[{detail:"SALES/REVENUE",amount:a.sales,isBold:!0},{detail:"SALES RETURNS",amount:a.salesReturns,isSubtraction:!0},{detail:"NET SALES",amount:a.netSales,isBold:!0,isTotal:!0},{detail:"",amount:null,isSpacer:!0},{detail:"COST OF GOODS SOLD (COGS)",amount:null,isHeader:!0},{detail:"TOTAL COST SALES",amount:a.totalCostSales},{detail:"CARRIAGE INWARDS",amount:a.carriageInwards},{detail:"TOTAL COST OF GOODS SOLD (COGS)",amount:a.totalCOGS,isBold:!0,isTotal:!0},{detail:"",amount:null,isSpacer:!0},{detail:"GROSS PROFIT",amount:a.grossProfit,isBold:!0,isTotal:!0},{detail:"",amount:null,isSpacer:!0},{detail:"EXPENSES",amount:null,isHeader:!0}];Object.entries(a.expensesByCategory).forEach(([a,b])=>{p.push({detail:a.toUpperCase(),amount:b})}),p.push({detail:"TOTAL EXPENSES",amount:a.totalExpenses,isBold:!0,isTotal:!0},{detail:"",amount:null,isSpacer:!0},{detail:"NET PROFIT / LOSS",amount:a.netProfitLoss,isBold:!0,isTotal:!0},{detail:"TAX",amount:a.taxAmount},{detail:"FINAL PROFIT AFTER TAX",amount:a.finalProfitAfterTax,isBold:!0,isTotal:!0});let q=a=>a.amount<0?"text-red-600":a.detail?.includes("PROFIT")&&a.amount>0?"text-green-600":a.detail?.includes("EXPENSE")||a.detail?.includes("TAX")?"text-red-600":"text-gray-900";return(0,d.jsxs)(e.Card,{children:[(0,d.jsx)(e.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)(e.CardTitle,{children:"Profit & Loss Account"}),(0,d.jsx)(i.default,{data:a,dateRange:k,currency:n,businessName:l,businessLogo:m,dateFilter:o})]})}),(0,d.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,d.jsx)(h.default,{taxPercentage:a.taxPercentage,onTaxChange:j,netProfitLoss:a.netProfitLoss,formatCurrency:c}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)(f.Table,{children:[(0,d.jsx)(f.TableHeader,{children:(0,d.jsxs)(f.TableRow,{children:[(0,d.jsx)(f.TableHead,{className:"font-bold text-left",children:"DETAILS"}),(0,d.jsx)(f.TableHead,{className:"font-bold text-right",children:"AMOUNT"})]})}),(0,d.jsx)(f.TableBody,{children:p.map((a,b)=>a.isSpacer?(0,d.jsx)(f.TableRow,{children:(0,d.jsx)(f.TableCell,{colSpan:2,className:"h-4 border-0"})},b):a.isHeader?(0,d.jsx)(f.TableRow,{children:(0,d.jsx)(f.TableCell,{colSpan:2,className:"font-bold text-gray-800 bg-gray-50 border-0",children:a.detail})},b):(0,d.jsxs)(f.TableRow,{className:a.isTotal?"border-t-2 border-gray-300":"",children:[(0,d.jsx)(f.TableCell,{className:`${a.isBold?"font-bold":""} ${q(a)}`,children:a.detail}),(0,d.jsx)(f.TableCell,{className:`text-right ${a.isBold?"font-bold":""} ${q(a)}`,children:null!==a.amount?(0,d.jsxs)("span",{children:[a.isSubtraction&&"(",c(Math.abs(a.amount)),a.isSubtraction&&")"]}):null})]},b))})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,d.jsx)(e.Card,{className:"border-blue-200 bg-blue-50",children:(0,d.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,d.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Gross Profit"}),(0,d.jsx)("p",{className:"text-lg font-bold text-blue-800",children:c(a.grossProfit)})]})}),(0,d.jsx)(e.Card,{className:`border-${a.netProfitLoss>=0?"green":"red"}-200 bg-${a.netProfitLoss>=0?"green":"red"}-50`,children:(0,d.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,d.jsxs)("p",{className:`text-sm text-${a.netProfitLoss>=0?"green":"red"}-600 font-medium`,children:["Net ",a.netProfitLoss>=0?"Profit":"Loss"]}),(0,d.jsx)("p",{className:`text-lg font-bold text-${a.netProfitLoss>=0?"green":"red"}-800`,children:c(Math.abs(a.netProfitLoss))})]})}),(0,d.jsx)(e.Card,{className:`border-${a.finalProfitAfterTax>=0?"green":"red"}-200 bg-${a.finalProfitAfterTax>=0?"green":"red"}-50`,children:(0,d.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,d.jsxs)("p",{className:`text-sm text-${a.finalProfitAfterTax>=0?"green":"red"}-600 font-medium`,children:["Final ",a.finalProfitAfterTax>=0?"Profit":"Loss"," After Tax"]}),(0,d.jsx)("p",{className:`text-lg font-bold text-${a.finalProfitAfterTax>=0?"green":"red"}-800`,children:c(Math.abs(a.finalProfitAfterTax))})]})})]})]})]})}]),c()}catch(a){c(a)}},!1),587603,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(381243),g=a.i(224993),h=a.i(964889),i=a.i(180852),j=a.i(367668),k=a.i(257257),l=b([f,g,h,i,j]);[f,g,h,i,j]=l.then?(await l)():l,a.s(["default",0,()=>{let{currentBusiness:a}=(0,h.useBusiness)(),{settings:b}=(0,g.useBusinessSettings)(),[c,l]=(0,e.useState)("this-month"),[m,n]=(0,e.useState)({from:void 0,to:void 0}),[o,p]=(0,e.useState)(void 0),[q,r]=(0,e.useState)(0),s="custom"===c,t="specific"===c;(0,e.useEffect)(()=>{"custom"===c?p(void 0):"specific"===c?n({from:void 0,to:void 0}):(n({from:void 0,to:void 0}),p(void 0))},[c]);let u=b?.currency||"USD",{profitLossData:v,isLoading:w}=(0,f.useProfitLossData)(c,m,o,q),x=(0,e.useMemo)(()=>"custom"===c&&m.from&&m.to?m:"specific"===c&&o?{from:o,to:o}:"custom"!==c&&"specific"!==c?(0,k.getDateRangeFromFilter)(c):{from:void 0,to:void 0},[c,m,o]);return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Profit & Loss Account"}),(0,d.jsx)(i.default,{dateFilter:c,dateRange:m,specificDate:o,isCustomRange:s,isSpecificDate:t,onDateFilterChange:l,onDateRangeChange:n,onSpecificDateChange:p})]}),(0,d.jsx)(j.default,{data:v,isLoading:w,formatCurrency:a=>new Intl.NumberFormat("en-US",{style:"currency",currency:u,minimumFractionDigits:2}).format(a),onTaxChange:r,dateRange:x,businessName:a?.name,businessLogo:b?.businessLogo,currency:u,dateFilter:c})]})}]),c()}catch(a){c(a)}},!1),90501,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(148608),g=a.i(12387),h=a.i(490839),i=a.i(297082),j=a.i(587603),k=b([f,g,h,i,j]);[f,g,h,i,j]=k.then?(await k)():k,a.s(["default",0,({accounts:a,isLoading:b,isDialogOpen:c,onDialogOpenChange:k,onCreateAccount:l,onAccountDeleted:m,canCreate:n=!0})=>{let[o,p]=e.default.useState(!1),q=()=>k(!0),r=async a=>{p(!0);try{await l(a)}finally{p(!1)}};return(0,d.jsxs)(f.Tabs,{defaultValue:"cash-accounts",className:"w-full",children:[(0,d.jsxs)(f.TabsList,{className:"grid w-full grid-cols-2",children:[(0,d.jsx)(f.TabsTrigger,{value:"cash-accounts",children:"Cash Accounts"}),(0,d.jsx)(f.TabsTrigger,{value:"profit-loss",children:"Profit & Loss"})]}),(0,d.jsxs)(f.TabsContent,{value:"cash-accounts",className:"space-y-6",children:[(0,d.jsx)(g.default,{onCreateAccount:q,canCreate:n}),(0,d.jsx)(h.default,{accounts:a,isLoading:b,onCreateAccount:q,onAccountDeleted:m,canCreate:n}),(0,d.jsx)(i.default,{open:c,onOpenChange:k,onSubmit:r,title:"Create New Cash Account",isSubmitting:o})]}),(0,d.jsx)(f.TabsContent,{value:"profit-loss",children:(0,d.jsx)(j.default,{})})]})}]),c()}catch(a){c(a)}},!1),418312,a=>{"use strict";var b=a.i(127669),c=a.i(747899);a.s(["useCashAccountRedirect",0,a=>{let d=(0,c.useNavigate)(),[e,f]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{if(!e&&a.length>0){let b=localStorage.getItem("lastVisitedCashAccount"),c=localStorage.getItem("lastVisitedCashAccountUrl");if(b&&c){if(a.some(a=>a.id===b))return void d(c.replace(window.location.origin,""));localStorage.removeItem("lastVisitedCashAccount"),localStorage.removeItem("lastVisitedCashAccountUrl")}f(!0)}},[a,e,d]),{hasCheckedRedirect:e}}])},989221,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(964889),g=a.i(466890),h=a.i(90501),i=a.i(418312),j=a.i(805297),k=a.i(289118),l=a.i(396465),m=a.i(747899),n=a.i(436028),o=b([f,g,h,j,k,l]);[f,g,h,j,k,l]=o.then?(await o)():o,a.s(["default",0,()=>{let{currentBusiness:a,isLoading:b}=(0,f.useBusiness)(),c=(0,m.useNavigate)(),{accounts:o,isLoading:p,createAccount:q,refreshAccounts:r}=(0,g.useCashAccounts)(),{hasPermission:s,isLoading:t}=(0,j.useProfiles)(),[u,v]=(0,e.useState)(!1);(0,i.useCashAccountRedirect)(o);let w=async a=>{try{await q(a),v(!1)}catch(a){console.error("Error creating account:",a)}},x=async()=>{await r()};if(b||p||t)return(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(!s("finance","view"))return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,d.jsxs)(k.Alert,{variant:"destructive",children:[(0,d.jsx)(n.AlertCircle,{className:"h-4 w-4"}),(0,d.jsx)(k.AlertTitle,{children:"Access Denied"}),(0,d.jsx)(k.AlertDescription,{children:"You do not have permission to view finance/cash accounts. Please contact your administrator if you believe this is an error."})]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(l.Button,{onClick:()=>c("/"),variant:"outline",children:"Back to Dashboard"})})]});let y=s("finance","create");return(0,d.jsxs)("div",{className:"space-y-6 p-4 md:p-0",children:[(0,d.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Finance"}),(0,d.jsx)(h.default,{accounts:o,isLoading:b||!a||p,isDialogOpen:u,onDialogOpenChange:v,onCreateAccount:w,onAccountDeleted:x,canCreate:y})]})}]),c()}catch(a){c(a)}},!1),918637,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(539141),h=a.i(706555),i=a.i(989221),j=a.i(509193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Cash",pathname:"/Cash",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Cash",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_64f7f809._.js.map