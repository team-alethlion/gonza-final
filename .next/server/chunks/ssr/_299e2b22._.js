module.exports=[2026,a=>{"use strict";let b=(0,a.i(564375).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],2026)},132660,a=>{"use strict";let b=(0,a.i(564375).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],132660)},506766,a=>{"use strict";let b=(0,a.i(564375).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],506766)},585459,a=>{"use strict";var b=a.i(746671);a.s(["CalendarIcon",()=>b.default])},745695,a=>{"use strict";var b=a.i(508171);a.s(["default",0,({message:a="Loading...",size:c="md",className:d=""})=>(0,b.jsxs)("div",{className:`flex flex-col items-center justify-center space-y-4 ${d}`,children:[(0,b.jsx)("img",{src:"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png",alt:"Loading",className:`${{sm:"w-8 h-8",md:"w-16 h-16",lg:"w-24 h-24"}[c]} animate-spin`}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:a})]})])},466890,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(108191),f=a.i(964889),g=a.i(531811),h=a.i(500885),i=a.i(120343),j=b([f,g,h,i]);[f,g,h,i]=j.then?(await j)():j,a.s(["useCashAccounts",0,()=>{let[a,b]=(0,d.useState)([]),{toast:c}=(0,e.useToast)(),{currentBusiness:j}=(0,f.useBusiness)(),{user:k}=(0,g.useAuth)(),l=(0,h.useQueryClient)(),m=(0,d.useCallback)(async()=>{if(!j?.id)return[];try{let a=await (0,i.getCashAccountsAction)(j.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch accounts");return a.data.map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}))}catch(a){return console.error("Error loading cash accounts:",a),c({title:"Error",description:"Failed to load cash accounts",variant:"destructive"}),[]}},[j?.id,c]),n=["cash_accounts",j?.id],{data:o,isLoading:p}=(0,h.useQuery)({queryKey:n,queryFn:m,enabled:!!j?.id,staleTime:3e4});(0,d.useEffect)(()=>{o&&b(o)},[o]);let q=p&&!o,r=(0,d.useCallback)(()=>{l.invalidateQueries({queryKey:n})},[l,n]),s=(0,d.useCallback)(async a=>{if(!j?.id||!k?.id)return null;try{let b=await (0,i.createCashAccountAction)({...a,userId:k.id,locationId:j.id});if(!b.success||!b.data)throw Error(b.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account created successfully"}),b.data}catch(a){return console.error("Error creating cash account:",a),c({title:"Error",description:"Failed to create cash account",variant:"destructive"}),null}},[j?.id,k?.id,l,n,c]),t=async(a,b)=>{if(!j?.id)return!1;try{let d=await (0,i.updateCashAccountAction)(a,{...b,locationId:j.id});if(!d.success)throw Error(d.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account updated successfully"}),!0}catch(a){return console.error("Error updating cash account:",a),c({title:"Error",description:"Failed to update cash account",variant:"destructive"}),!1}},u=async(a,b)=>{if(!j?.id)return{success:!1,hasTransactions:!1};try{let d=await (0,i.deleteCashAccountAction)(a,j.id);return d.success&&(l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account deleted successfully"}),b&&b()),d}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),{success:!1,hasTransactions:!1}}},v=async(a,b=!1,d)=>{if(!j?.id)return!1;try{let e=await (0,i.deleteCashAccountWithTransactionsAction)(a,j.id,b);if(!e.success)throw Error(e.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:b?"Account and transactions deleted":"Account deleted (records unlinked)"}),d&&d(),!0}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),!1}},w=(0,d.useCallback)(async a=>{if(!j?.id)return 0;try{let b=await (0,i.getCashAccountBalanceAction)(a,j.id);if(b.success)return b.data;return 0}catch(a){return console.error("Error getting balance:",a),0}},[j?.id]);return(0,d.useMemo)(()=>({accounts:a,isLoading:q,createAccount:s,updateAccount:t,deleteAccount:u,deleteAccountWithTransactions:v,getAccountBalance:w,loadAccounts:m,refreshAccounts:r}),[a,q,s,t,u,v,w,m,r])}]),c()}catch(a){c(a)}},!1),38735,a=>a.a(async(b,c)=>{try{var d=a.i(150848),e=b([d]);async function f(a){try{let b=await d.db.carriageInward.findMany({where:{branchId:a},orderBy:[{date:"desc"},{createdAt:"desc"}]});return{success:!0,data:b.map(a=>({id:a.id,userId:a.userId,locationId:a.branchId,supplierName:a.supplierName,details:a.details,amount:Number(a.amount),date:a.date.toISOString(),cashAccountId:a.cashAccountId,cashTransactionId:a.cashTransactionId,createdAt:a.createdAt.toISOString(),updatedAt:a.updatedAt.toISOString()}))}}catch(a){return{success:!1,error:a.message}}}async function g(a,b,c){try{let e=await d.db.carriageInward.create({data:{userId:a,branchId:b,supplierName:c.supplierName,details:c.details,amount:c.amount,date:c.date,cashAccountId:c.cashAccountId||null}});return{success:!0,data:e}}catch(a){return{success:!1,error:a.message}}}async function h(a,b,c){try{let e={};return void 0!==c.supplierName&&(e.supplierName=c.supplierName),void 0!==c.details&&(e.details=c.details),void 0!==c.amount&&(e.amount=c.amount),void 0!==c.date&&(e.date=c.date),await d.db.carriageInward.update({where:{id:a,branchId:b},data:e}),{success:!0}}catch(a){return{success:!1,error:a.message}}}async function i(a,b){try{return await d.db.carriageInward.delete({where:{id:a,branchId:b}}),{success:!0}}catch(a){return{success:!1,error:a.message}}}[d]=e.then?(await e)():e,a.s(["createCarriageInwardAction",()=>g,"deleteCarriageInwardAction",()=>i,"getCarriageInwardsAction",()=>f,"updateCarriageInwardAction",()=>h]),c()}catch(a){c(a)}},!1),751184,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(531811),f=a.i(964889),g=a.i(108191),h=a.i(38735),i=b([e,f,h]);[e,f,h]=i.then?(await i)():i,a.s(["useCarriageInwards",0,()=>{let[a,b]=(0,d.useState)([]),[c,i]=(0,d.useState)(!1),{user:j}=(0,e.useAuth)(),{currentBusiness:k}=(0,f.useBusiness)(),{toast:l}=(0,g.useToast)(),m=(0,d.useCallback)(async()=>{if(!j||!k){b([]),i(!1);return}i(!0);try{let a=await (0,h.getCarriageInwardsAction)(k.id);if(!a.success)throw Error(a.error);b((a.data||[]).map(a=>({...a,date:new Date(a.date),createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)})))}catch(a){console.error("Error loading carriage inwards:",a),l({title:"Error",description:"Failed to load carriage inwards records.",variant:"destructive"})}finally{i(!1)}},[j,k?.id,l]),n=async a=>{if(!j||!k)throw Error("User not authenticated or no business selected");let b=await (0,h.createCarriageInwardAction)(j.id,k.id,a);if(!b.success)throw Error(b.error);return await m(),l({title:"Success",description:"Carriage inwards record created successfully"}),b.data},o=async(a,b)=>{if(!k)throw Error("No business selected");let c=await (0,h.updateCarriageInwardAction)(a,k.id,b);if(!c.success)throw Error(c.error);return await m(),l({title:"Success",description:"Carriage inwards record updated successfully"}),!0},p=async a=>{if(!k)throw Error("No business selected");let b=await (0,h.deleteCarriageInwardAction)(a,k.id);if(!b.success)throw Error(b.error);return await m(),l({title:"Success",description:"Carriage inwards record deleted successfully"}),!0};return(0,d.useEffect)(()=>{m()},[m]),{carriageInwards:a,isLoading:c,createCarriageInward:n,updateCarriageInward:o,deleteCarriageInward:p,refreshCarriageInwards:m}}]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_299e2b22._.js.map