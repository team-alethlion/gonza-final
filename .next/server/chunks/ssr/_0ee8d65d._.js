module.exports=[769395,(a,b,c)=>{b.exports=new class{grayscale(a){for(let b=0;b<a.data.length;b+=4){let c=.299*a.data[b]+.587*a.data[b+1]+.114*a.data[b+2];a.data.fill(c,b,b+3)}return a}threshold(a,b){for(let c=0;c<a.data.length;c+=4){let d=.299*a.data[c]+.587*a.data[c+1]+.114*a.data[c+2]<b?0:255;a.data.fill(d,c,c+3)}return a}bayer(a,b){let c=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let d=0;d<a.data.length;d+=4){let e=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2],f=d/4%a.width,g=Math.floor(d/4/a.width),h=Math.floor((e+c[f%4][g%4])/2)<b?0:255;a.data.fill(h,d,d+3)}return a}floydsteinberg(a){let b=a.width,c=new Uint8ClampedArray(a.width*a.height);for(let b=0,d=0;d<a.data.length;b++,d+=4)c[b]=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2];for(let d=0,e=0;e<a.data.length;d++,e+=4){let f=c[d]<129?0:255,g=Math.floor((c[d]-f)/16);a.data.fill(f,e,e+3),c[d+1]+=7*g,c[d+b-1]+=3*g,c[d+b]+=5*g,c[d+b+1]+=+g}return a}atkinson(a){let b=a.width,c=new Uint8ClampedArray(a.width*a.height);for(let b=0,d=0;d<a.data.length;b++,d+=4)c[b]=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2];for(let d=0,e=0;e<a.data.length;d++,e+=4){let f=c[d]<129?0:255,g=Math.floor((c[d]-f)/8);a.data.fill(f,e,e+3),c[d+1]+=g,c[d+2]+=g,c[d+b-1]+=g,c[d+b]+=g,c[d+b+1]+=g,c[d+2*b]+=g}return a}}},332600,(a,b,c)=>{b.exports=new class{flatten(a,b){for(let c=0;c<a.data.length;c+=4){let d=a.data[c+3],e=255-d;a.data[c]=(d*a.data[c]+e*b[0])/255,a.data[c+1]=(d*a.data[c+1]+e*b[1])/255,a.data[c+2]=(d*a.data[c+2]+e*b[2])/255,a.data[c+3]=255}return a}}},844136,(a,b,c)=>{let d=new WeakMap,e=new WeakMap;class f{constructor(a,b,...c){if(arguments.length<2)throw TypeError(`Failed to construct 'ImageData': 2 arguments required, but only ${arguments.length} present.`);if("object"==typeof a){if(!(a instanceof Uint8ClampedArray))throw TypeError("Failed to construct 'ImageData': parameter 1 is not of type 'Uint8ClampedArray'.");if("number"!=typeof b||0===b)throw Error("Failed to construct 'ImageData': The source width is zero or not a number.");if(4*(b>>>=0)>a.length)throw Error("Failed to construct 'ImageData': The requested image size exceeds the supported range.");if(a.length%4!=0)throw Error("Failed to construct 'ImageData': The input data length is not a multiple of 4.");if(a.length%(4*b)!=0)throw Error("Failed to construct 'ImageData': The input data length is not a multiple of (4 * width).");if(void 0!==c[0]){if("number"!=typeof c[0]||0===c[0])throw Error("Failed to construct 'ImageData': The source height is zero or not a number.");if(c[0]=c[0]>>>0,a.length%(4*b*c[0])!=0)throw Error("Failed to construct 'ImageData': The input data length is not equal to (4 * width * height).")}d.set(this,b),e.set(this,void 0!==c[0]?c[0]:a.byteLength/b/4),Object.defineProperty(this,"data",{configurable:!0,enumerable:!0,value:a,writable:!1})}else{if("number"!=typeof a||0===a)throw Error("Failed to construct 'ImageData': The source width is zero or not a number.");if(a>>>=0,"number"!=typeof b||0===b)throw Error("Failed to construct 'ImageData': The source height is zero or not a number.");if(a*(b>>>=0)>=0x40000000)throw Error("Failed to construct 'ImageData': The requested image size exceeds the supported range.");d.set(this,a),e.set(this,b),Object.defineProperty(this,"data",{configurable:!0,enumerable:!0,value:new Uint8ClampedArray(a*b*4),writable:!1})}}}Object.defineProperty(f.prototype,"width",{enumerable:!0,configurable:!0,get(){return d.get(this)}}),Object.defineProperty(f.prototype,"height",{enumerable:!0,configurable:!0,get(){return e.get(this)}}),b.exports=f},268032,(a,b,c)=>{"use strict";let d=a.r(844136);function e(a,b){let c=0;for(let d=0;d<b.height;d++)for(let e=0;e<b.width;e++){let f=Math.floor(e*a.width/b.width),g=(Math.floor(d*a.height/b.height)*a.width+f)*4;b.data[c++]=a.data[g++],b.data[c++]=a.data[g++],b.data[c++]=a.data[g++],b.data[c++]=a.data[g++]}}function f(a,b){function c(a,b,c,d,e){return Math.round((a-b)*e+(c-a)*d)}function d(b,d,e,f,g){let h=a.data[(e*a.width+f)*4+b];if(f===g)return h;let i=a.data[(e*a.width+g)*4+b];return c(d,f,g,h,i)}function e(a,b,e,f,g,h,i){let j=d(a,b,h,e,f);if(h===i)return j;let k=d(a,b,i,e,f);return c(g,h,i,j,k)}let f=0;for(let c=0;c<b.height;c++)for(let d=0;d<b.width;d++){let g=d*a.width/b.width,h=c*a.height/b.height,i=Math.floor(g),j=Math.floor(h),k=Math.min(Math.ceil(g),a.width-1),l=Math.min(Math.ceil(h),a.height-1);b.data[f++]=e(0,g,i,k,h,j,l),b.data[f++]=e(1,g,i,k,h,j,l),b.data[f++]=e(2,g,i,k,h,j,l),b.data[f++]=e(3,g,i,k,h,j,l)}}b.exports=function(a,b,c,g){let h;switch(g=g||"bilinear-interpolation"){case"nearest-neighbor":h=e;break;case"bilinear-interpolation":case"biliniear-interpolation":h=f;break;default:throw Error(`Unknown algorithm: ${g}`)}let i=new d(b,c);return h(a,i),i}},790341,a=>{"use strict";var b=a.i(769395),c=a.i(332600);let d={ascii:{name:"ASCII",languages:["en"],value:Array(256).fill(1,0,128).map((a,b)=>b)},cp437:{name:"USA, Standard Europe",languages:["en"],extends:"ascii",value:[[,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788],[9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660],,,,,,[,,,,,,,,,,,,,,,8962],[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197],[201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402],[225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],[9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488],[9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575],[9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]]},cp720:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[65533,65533,,,65533,,65533,,,,,,,65533,65533,65533],[65533,1617,1618,,164,1600,,,1569,1570,1571,1572,,1573,1574,1575],[1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,,,],,,,[1590,1591,1592,1593,1594,1601,,1602,1603,1604,1605,1606,1607,1608,1609,1610],[,1611,1612,1613,1614,1615,1616,,,,,,,,,,]]},cp737:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928],[929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952],[953,954,955,956,957,958,959,960,961,963,962,964,965,966,967,968],,,,[969,940,941,942,970,943,972,973,971,974,902,904,905,906,908,910],[911,,,,938,939,,,,,,,,,,,]]},cp771:{name:"Lithuanian KBL",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,,,[,,,,,,,,,,,,260,261,268,269],,[280,281,278,279,302,303,352,353,370,371,362,363,381,382,,,]]},cp772:{name:"Lithuanian LST 1284",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],,[,,8805,8804,8222,8220,247,8776,,,,,8319,178,,,]]},cp774:{name:"Lithuanian LST 1283",languages:["lt"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[,946,,,,,,,,,,,,,,8898],[,,,,8222,8220,,,,,729,,,,,,]]},cp775:{name:"Baltic Rim",languages:["et","lt"],extends:"cp437",value:[,,,,,,,,[262,,,257,,291,,263,322,275,342,343,299,377,,,],[,,,333,,290,162,346,347,,,248,,216,215,164],[256,298,,379,380,378,8221,166,169,174,,,,321,,,],[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[211,,332,323,245,213,,324,310,311,315,316,326,274,325,8217],[173,,8220,190,182,167,,8222,,,,185,179,,,,]]},cp850:{name:"Multilingual",languages:["en"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,215,,],[,,,,,,,,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[240,208,202,203,200,305,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,254,222,218,219,217,253,221,175,180],[173,,8215,190,182,167,,184,,168,,185,179,,,,]]},cp851:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[,,,,,,902,,,,,,,904,,905],[906,65533,908,,,910,,,911,,,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,180],[173,,965,966,967,167,968,184,,168,969,971,944,974,,,]]},cp852:{name:"Latin 2",languages:["hu","pl","cz"],extends:"cp850",value:[,,,,,,,,[,,,,,367,263,,322,,336,337,,377,,262],[,313,314,,,317,318,346,347,,,356,357,321,,269],[,,,,260,261,381,382,280,281,,378,268,351,,,],[,,,,,,,282,350,,,,,379,380,,],[,,,,,,258,259,,,,,,,,,],[273,272,270,,271,327,,,283,,,,,354,366,,],[,,,323,324,328,352,353,340,,341,368,,,355,,],[,733,731,711,728,,,,,,729,369,344,345,,,]]},cp853:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,265,,,,,,,,,264],[,267,266,,,,,,304,,,285,,284,215,309],[,,,,,,286,287,292,293,65533,,308,351,,,],[,,,,,193,194,192,350,,,,,379,380,,],[,,,,,,348,349,,,,,,,,164],[65533,65533,202,203,200,305,205,206,207,,,,,65533,204,,],[211,,212,210,288,289,,294,295,218,219,217,364,365,65533,180],[173,65533,8467,329,728,167,,184,,168,729,65533,179,,,,]]},cp855:{name:"Cyrillic",languages:["bg"],extends:"cp437",value:[,,,,,,,,[1106,1026,1107,1027,1105,1025,1108,1028,1109,1029,1110,1030,1111,1031,1112,1032],[1113,1033,1114,1034,1115,1035,1116,1036,1118,1038,1119,1039,1102,1070,1098,1066],[1072,1040,1073,1041,1094,1062,1076,1044,1077,1045,1092,1060,1075,1043,,,],[,,,,,1093,1061,1080,1048,,,,,1081,1049,,],[,,,,,,1082,1050,,,,,,,,164],[1083,1051,1084,1052,1085,1053,1086,1054,1087,,,,,1055,1103,,],[1071,1088,1056,1089,1057,1090,1058,1091,1059,1078,1046,1074,1042,1100,1068,8470],[173,1099,1067,1079,1047,1096,1064,1101,1069,1097,1065,1095,1063,167,,,]]},cp857:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,248,,216,350,351],[,,,,,,286,287,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[186,170,202,203,200,8364,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,65533,215,218,219,217,236,255,175,180],[173,,65533,190,182,167,,184,,168,,185,179,,,,]]},cp858:{name:"Euro",languages:["en"],extends:"cp850",value:[,,,,,,,,,,,,,[,,,,,8364,,,,,,,,,,,],,,]},cp860:{name:"Portuguese",languages:["pt"],extends:"cp437",value:[,,,,,,,,[,,,,227,,193,,,202,,205,212,,195,194],[,192,200,,245,,218,,204,213,,,,217,,211],[,,,,,,,,,210,,,,,,,],,,,,,]},cp861:{name:"Icelandic",languages:["is"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,208,240,222,,,],[,,,,,254,,221,253,,,248,,216,,,],[,,,,193,205,211,218,,,,,,,,,],,,,,,]},cp862:{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},cp863:{name:"Canadian French",languages:["fr"],extends:"cp437",value:[,,,,,,,,[,,,,194,,182,,,,,,,8215,192,167],[,200,202,,203,207,,,164,212,,,,217,219,,],[166,180,,,168,184,179,175,206,,,,,190,,,],,,,,,]},cp864:{name:"Arabic",languages:["ar"],extends:"cp437",offset:128,value:[176,183,8729,8730,9618,9472,9474,9532,9508,9516,9500,9524,9488,9484,9492,9496,946,8734,966,177,189,188,8776,171,187,65271,65272,65533,65533,65275,65276,65533,160,173,65154,163,164,65156,65533,65533,65166,65167,65173,65177,1548,65181,65185,65189,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65233,1563,65201,65205,65209,1567,162,65152,65153,65155,65157,65226,65163,65165,65169,65171,65175,65179,65183,65187,65191,65193,65195,65197,65199,65203,65207,65211,65215,65217,65221,65227,65231,166,172,247,215,65225,1600,65235,65239,65243,65247,65251,65255,65259,65261,65263,65267,65213,65228,65230,65229,65249,65149,1617,65253,65257,65260,65264,65266,65232,65237,65269,65270,65245,65241,65265,9632,65533]},cp865:{name:"Nordic",languages:["sv","dk"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,,,],[,,,,,,,,,,,,,,,164],,,,,,]},cp866:{name:"Cyrillic 2",languages:["ru"],extends:"cp437",value:[,,,,,,,,[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[1025,1105,1028,1108,1031,1111,1038,1118,,,,,8470,164,,,]]},cp869:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,902,65533,183,172,166,8216,8217,904,8213,905],[906,938,908,65533,65533,910,939,169,911,178,179,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,900],[173,,965,966,967,167,968,901,,168,969,971,944,974,,,]]},cp874:{name:"Thai",languages:["th"],extends:"ascii",offset:128,value:[8364,65533,65533,65533,65533,8230,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,8216,8217,8220,8221,8226,8211,8212,65533,65533,65533,65533,65533,65533,65533,65533,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,65533,65533,65533,65533,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,65533,65533,65533,65533]},cp1001:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[1569,1570,1571,1572,1573,65163,1575,1576,65169,1577,1578,65175,1579,65179,1583,1584],[1585,1586,1587,65203,65204,1588,65207,65208,1589,65211,65212,1590,65215,65216,1591,1592],[1593,65227,1594,65231,1601,65235,1602,65239,1603,1705,1604,65271,65273,65275,9496,1605],[65251,1606,65255,1607,65259,1608,1609,1657,65267,9474,1548,1563,1567,65154,65156,65162],[,1580,65183,1581,65187,1582,65191,65226,65228,65230,65231,65272,65274,65276,65259,65260],[1632,65264,9472,65533,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65533,65533],[65533,65533,65275,65533,65533,65533,65533,9524,,,,,,,,,],,]},cp1098:{name:"Farsi",languages:["fa"],extends:"cp437",value:[,,[,,,,,65533,,,,,65533,,,,,,],,,,,,[65533,65533,1548,1563,1567,1611,1570,65154,63738,1575,65166,63739,1569,1571,65156,63737],[1572,65163,1576,65169,64342,64344,1578,65175,1579,65179,1580,65183,64378,64380,215,1581],[65187,1582,65191,1583,1584,1585,1586,64394,1587,65203,1588,65207,1589,65211,,,],[,,,,,1590,65215,65217,65219,,,,,164,65221,,],[,,,,,,65223,1593,,,,,,,,65533],[65226,65227,65228,1594,65230,65231,65232,1601,65235,,,,,1602,65239,,],[64398,65243,64402,64404,1604,65247,1605,65251,1606,65255,1608,1607,65259,65260,64420,64508],[173,64509,64510,1600,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,,,]]},cp1125:{name:"Ukrainian",languages:["uk"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,1168,1169,1028,1108,1030,1110,1031,1111,247,177,,,,,]]},cp3001:{name:"Estonian 1 or 1116",languages:["et"],extends:"cp850",value:[,,,,,,,,,,,,,[353,352,,,,,,,,,,,,,,,],[,,,,,,,382,381,,,,,,,,],,]},cp3002:{name:"Estonian 2",languages:["et"],extends:"iso8859-1",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[32,,,,,,,,,,,,,,,8254],,,[352,,,,,,,,,,,,,,381,,],,[353,,,,,,,,,,,,,,382,,]]},cp3011:{name:"Latvian 1",languages:["lv"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,,,,325,353,,,]]},cp3012:{name:"Latvian 2 (modified 866)",languages:["lv"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,332,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,333,,,325,353,,,]]},cp3021:{name:"Bulgarian (MIK)",languages:["bg"],extends:"cp866",value:[,,,,,,,,,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[,,,,,,9571,9553,,,,,,,,9488],[9617,9618,9619,9474,9508,8470,167,9559,9565,,,,,,,,],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3041:{name:"Maltese ISO 646",languages:["mt"],extends:"ascii",value:[,,,,,[,,,,,,,,,,,289,380,295,,,],[267,,,,,,,,,,,,,,,,],[,,,,,,,,,,,288,379,294,266,,],,,,,,,,,]},cp3840:{name:"Russian (modified 866)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3841:{name:"Ghost",languages:["ru"],extends:"cp437",offset:128,value:[1171,1241,1105,1110,1111,1112,1181,1257,1118,1199,1277,1224,1209,1207,1108,163,1170,1240,1025,1030,1031,1032,1180,1256,1038,1198,1276,1223,1208,1206,1028,1066,32,33,34,35,164,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,8709]},cp3843:{name:"Polish (Mazovia)",languages:["pl"],extends:"cp437",value:[,,,,,,,,[,,,,,,261,,,,,,,263,,260],[280,281,322,,,262,,,346,,,,321,,347,,],[377,379,,211,324,323,378,380,,,,,,,,,],,,,,,]},cp3844:{name:"Czech (Kamenický)",languages:["cz"],extends:"cp437",value:[,,,,,,,,[268,,,271,,270,356,269,283,282,313,205,318,314,,193],[,382,381,,,211,367,218,253,,,352,317,221,344,357],[,,,,328,327,366,212,353,345,341,340,,167,,,],,,,,,]},cp3845:{name:"Hungarian (CWI-2)",languages:["hu"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,205,,193],[,,,337,,211,369,218,368,,,,,,,,],[,,,,,,,336,,,,,,,,,],,,,,,]},cp3846:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,,,,350,351],[,,,,,,286,287,,,,,,,,,],,,,,,]},cp3847:{name:"Brazil ABNT",languages:["pt"],extends:"iso8859-1",value:[,,,,,,,,,,,,,[,,,,,,,65533,,,,,,,,,],,[,,,,,,,65533,,,,,,,,,]]},cp3848:{name:"Brazil ABICOMP",languages:["pt"],extends:"ascii",value:[,,,,,,,,,,[160,192,193,194,195,196,199,200,201,202,203,204,205,206,205,209],[210,211,212,213,214,198,217,218,219,220,376,168,163,166,167,176],[161,224,225,226,227,228,231,232,233,234,235,236,237,238,239,241],[242,243,244,245,246,230,249,250,251,252,255,223,170,186,191,177],,,]},"iso8859-1":{name:"Latin 1",languages:["en"],extends:"ascii",offset:128,value:[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},"iso8859-2":{name:"Latin 2",languages:["hu","pl","cz"],extends:"iso8859-1",value:[,,,,,,,,,,[,260,728,321,,317,346,,,352,350,356,377,,381,379],[,261,731,322,,318,347,711,,353,351,357,378,733,382,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},"iso8859-7":{name:"Greek",languages:["el"],extends:"iso8859-1",value:[,,,,,,,,,,[,8216,8217,,8364,8367,,,,,890,,,,,8213],[,,,,900,901,902,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,,]]},"iso8859-15":{name:"Latin 9",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,,,[,,,,8364,,352,,353,,,,,,,,],[,,,,381,,,,382,,,,338,339,376,,],,,,,]},windows1250:{name:"Latin 2",languages:["hu","pl","cz"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,,,346,356,,377],[,,,,,,,,65533,,,,347,357,,378],[,711,728,321,,260,,,,,350,,,,,379],[,,731,322,,,,,,261,351,,317,733,318,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},windows1251:{name:"Cyrillic",languages:["ru"],extends:"windows1252",value:[,,,,,,,,[1026,1027,,1107,,,,,8364,,1033,,1034,1036,1035,1039],[1106,,,,,,,,65533,,1113,,1114,1116,1115,1119],[,1038,1118,1032,,1168,,,1025,,1028,,,,,1031],[,,1030,1110,1169,,,,1105,8470,1108,,1112,1029,1109,1111],[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103]]},windows1252:{name:"Latin",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,[8364,65533,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,65533,381,65533],[65533,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,65533,382,376],,,,,,,]},windows1253:{name:"Greek",languages:["el"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,65533,,65533,,65533,,65533,,],[,,,,,,,,65533,,65533,,65533,,65533,65533],[,901,902,,,,,,,,65533,,,,,8213],[,,,,900,,,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},windows1254:{name:"Turkish",languages:["tr"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,,,,,65533,,],[,,,,,,,,,,,,,,65533,,],,,,[286,,,,,,,,,,,,,304,350,,],,[287,,,,,,,,,,,,,305,351,,]]},windows1255:{name:"Hebrew",languages:["he"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,65533,,65533,,],[,,,,,,,,,,65533,,65533,,65533,65533],[,,,,8362,,,,,,215,,,,,,],[,,,,,,,,,,247,,,,,,],[1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,65533,1467,1468,1469,1470,1471],[1472,1473,1474,1475,1520,1521,1522,1523,1524,65533,65533,65533,65533,65533,65533,65533],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,65533,65533,8206,8207,65533]]},windows1256:{name:"Arabic",languages:["ar"],extends:"windows1252",value:[,,,,,,,,[,1662,,,,,,,,,1657,,,1670,1688,1672],[1711,,,,,,,,1705,,1681,,,8204,8205,1722],[,1548,,,,,,,,,1726,,,,,,],[,,,,,,,,,,1563,,,,,1567],[1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583],[1584,1585,1586,1587,1588,1589,1590,,1591,1592,1593,1594,1600,1601,1602,1603],[,1604,,1605,1606,1607,1608,,,,,,1609,1610,,,],[1611,1612,1613,1614,,1615,1616,,1617,,1618,,,8206,8207,1746]]},windows1257:{name:"Baltic Rim",languages:["et","lt"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,65533,,65533,168,711,184],[,,,,,,,,65533,,65533,,65533,175,731,65533],[,65533,,,,65533,,,216,,342,,,,,198],[,,,,,,,,248,,343,,,,,230],[260,302,256,262,,,280,274,268,,377,278,290,310,298,315],[352,323,325,,332,,,,370,321,346,362,,379,381,,],[261,303,257,263,,,281,275,269,,378,279,291,311,299,316],[353,324,326,,333,,,,371,322,347,363,,380,382,729]]},windows1258:{name:"Vietnamese",languages:["vi"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,,,65533,,],[,,,,,,,,,,65533,,,,65533,,],,,[,,,258,,,,,,,,,768,,,,],[272,,777,,,416,,,,,,,,431,771,,],[,,,259,,,,,,,,,769,,,,],[273,,803,,,417,,,,,,,,432,8363,,]]},rk1048:{name:"Kazakh",languages:["kk"],extends:"windows1251",value:[,,,,,,,,[,,,,,,,,,,,,,1178,1210,,],[,,,,,,,,,,,,,1179,1211,,],[,1200,1201,1240,,1256,,,,,1170,,,,,1198],[,,,,1257,,,,,,1171,,1241,1186,1187,1199],,,,,]},thai11:{name:"Thai (Charcter Code 11)",languages:["th"],extends:"thai13",value:[,,,,,,,,,[,,,,,,,,,9484,9488,9492,9496,9474,9500,9508],,,,[,,,,,,,,,,,9472,9524,9516,9532,,],,[,,,,,,,,,,,3658,3650,3651,3652,65533]]},thai13:{name:"Thai (Charcter Code 13)",languages:["th"],extends:"cp874",value:[,,,,,,,,[65533,,,,,65533,,,,,,,,,,,],[,65533,65533,65533,65533,65533,65533,65533,,,,,,,,,],,,,[,,,,,,,,,,,3619,,,3648,,],,[,,,,,,,,,,,,8592,8593,8594,8595]]},thai14:{name:"Thai (Charcter Code 14)",languages:["th"],extends:"cp874",value:[,,,,,,,,[9484,9488,9492,9496,9474,9472,9500,9508,9524,9516,9532,9608,,,,,],[3619,3634,65533,3632,65533,65533,65533,65533,,,,,,,,3648],,,,,,[,,,,,,,,,,3675,65533,,,,3652]]},thai16:{name:"Thai (Charcter Code 16)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3650,3651,,,,,,,,,,,,,,,],,,,,,,]},thai18:{name:"Thai (Charcter Code 18)",languages:["th"],extends:"thai14",value:[,,,,,,,,[,,,,,,,,,,,,8592,8593,8594,8595],,,,,,[,,,,,,,,,,,,,,3652,,],[,,,,,,,,,,,,,,,65533]]},thai42:{name:"Thai (Charcter Code 42)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3587,3589,3619,3634,3652,,],[,,,3588,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601],[3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617],[3618,3619,3620,3621,3623,3624,3625,3626,3627,3628,3629,3630,3632,3622,3634,3635],[3648,3649,3650,3651,3652,3654,3631,3640,3641,3636,3637,3638,3639,3658,3661,3655],[3656,3657,3658,3659,3660,65533,65533,65533,65533,65533,65533,3632,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,,,,,160]]},tcvn3:{name:"Vietnamese (VSCII3 / TCVN3)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,,,,,,,,259,226,234,244,417,432,273,,],[,,,,,224,7843,227,225,7841,,7857,7859,7861,7855,,],[,,,,,,7863,7847,7849,7851,7845,7853,232,,7867,7869],[233,7865,7873,7875,7877,7871,7879,236,7881,,,,297,237,7883,242],[,7887,245,243,7885,7891,7893,7895,7889,7897,7901,7903,7905,7899,7907,249],[,7911,361,250,7909,7915,7917,7919,7913,7921,7923,7927,7929,253,7925,,]]},tcvn3capitals:{name:"Vietnamese (VSCII3 / TCVN3 Capitals)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,258,194,,,,,208,,,202,212,416,431,,,],[,,,,,192,7842,195,193,7840,,7856,7858,7860,7854,,],[,,,,,,7862,7846,7848,7850,7844,7852,200,,7866,7868],[201,7864,7872,7874,7876,7870,7878,204,7880,,,,296,205,7882,210],[,7886,213,211,7884,7890,7892,7894,7888,7896,7900,7902,7904,7898,7906,217],[,7910,360,218,7908,7914,7916,7918,7912,7920,7922,7926,7928,221,7924,,]]},viscii:{name:"Vietnamese (VISCII)",languages:["vi"],extends:"ascii",value:[[,,7858,,,7860,7850,,,,,,,,,,],[,,,,7926,,,,,7928,,,,,7924,,],,,,,,,[7840,7854,7856,7862,7844,7846,7848,7852,7868,7864,7870,7872,7874,7876,7878,7888],[7890,7892,7894,7896,7906,7898,7900,7902,7882,7886,7884,7880,7910,360,7908,7922],[213,7855,7857,7863,7845,7847,7849,7853,7869,7865,7871,7873,7875,7877,7879,7889],[7891,7893,7895,7904,416,7897,7901,7903,7883,7920,7912,7914,7916,417,7899,431],[192,193,194,195,7842,258,7859,7861,200,201,202,7866,204,205,296,7923],[272,7913,210,211,212,7841,7927,7915,7917,217,218,7929,7925,221,7905,432],[224,225,226,227,7843,259,7919,7851,232,233,234,7867,236,237,297,7881],[273,7921,242,243,244,245,7887,7885,7909,249,250,361,7911,253,7907,7918]]},khmer:{name:"Khmer",languages:["km"],extends:"ascii",value:[,,,,,,,,[6016,6017,6016,6019,6020,6021,6022,6023,6024,6025,6026,6027,6028,6029,6030,6031],[6032,6033,6032,6035,6036,6037,6038,6039,6040,6041,6042,6043,6044,6045,6046,6047],[6048,6049,6048,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063],[6064,6065,6064,6067,6068,6069,6070,6071,6072,6073,6074,6075,6076,6077,6078,6079],[6080,6081,6080,6083,6084,6085,6086,6087,6088,6089,6090,6091,6092,6093,6094,6095],[6096,6097,6096,6099,6100,6101,6102,6103,6104,6105,6106,6107,6108,6109,,,],[6112,6113,6112,6115,6116,6117,6118,6119,6120,6121,,,,,,,],[6128,6129,6128,6131,6132,6133,6134,,,,,,,,,,]]},latvian:{name:"Latvian (based on cp3012)",languages:["lv"],extends:"cp3012",value:[,,,,,,,,,,,,,[,,,,298,299,,,,,,,,,,,],,,]},"epson/katakana":{name:"Katakana",languages:["ja"],extends:"cp437",offset:128,value:[9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391,65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407,65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423,65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439,9552,9566,9578,9569,9698,9699,9701,9700,9824,9829,9830,9827,9679,9675,9585,9586,9587,20870,24180,26376,26085,26178,20998,31186,12306,24066,21306,30010,26449,20154,9618,160]},"epson/iso8859-2":{name:"Latin 2 modified with box drawing characters",languages:["hu","pl","cz"],extends:"iso8859-2",value:[,,,,,,,,[9617,9618,9619,9474,9508,9496,9484,9608,169,9571,9553,9559,9565,162,165,9488],[9492,9524,9516,9500,9472,9532,9604,9600,9562,9556,9577,9574,9568,9552,9580,174],,,,,,,]},"star/standard":{name:"Standard",languages:["en"],extends:"cp437",offset:128,value:[160,129904,129910,129905,129911,129906,129912,129907,129913,129908,129914,129909,9500,129915,129916,129918,129919,129917,9624,9623,9622,9629,9585,9586,9701,9700,9484,9524,9516,9508,9830,9587,196,214,220,223,167,170,186,65533,162,189,65533,65533,165,188,256,235,233,232,275,234,239,237,236,299,238,246,243,242,333,244,252,250,249,363,251,231,191,65533,65533,274,8580,161,197,248,216,228,225,224,257,226,176,8451,8457,937,181,931,963,65533,65533,967,8734,177,247,960,9612,9604,9600,9616,9532,9496,9492,9488,9608,9618,9162,8592,8593,8594,8595,9581,9161,129923,65533,9601,9613,65533,129928,9626,9630,9698,9699,129840,9208,9584,9583,9582]},"star/katakana":{name:"Katakana",languages:["ja"],extends:"star/standard",value:[,,,,,,,,,,[32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391],[65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407],[65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423],[65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439],,,]},"star/cp874":{name:"Thai",languages:["th"],extends:"cp874",value:[,,,,,,,,,[,,,,,9474,9472,9532,9484,9488,9492,9496,9500,9516,9508,9524],,,,[,,,,,,,,,,,3657,3658,3659,3660,,],,[,,,,,,,,,,,,162,172,166,,]]},"star/cp928":{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,,,[160,8216,8217,163,65533,65533,166,167,168,169,65533,171,172,173,65533,8213],[176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},"bixolon/cp866":{name:"Cyrillic 2 (modified with euro sign)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,,,9093,1055,8801,9824,8364,,,,,,,,]]},"bixolon/hebrew":{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,,,[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],[64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79],[80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,123,124,125,126,,]]},"xprinter/hebrew":{name:"Hebrew (based on CP862 minus CP437)",languages:["he"],extends:"ascii",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},"pos8360/hebrew":{name:"Hebrew (based on cp862 with repeated characters)",languages:["he"],extends:"cp862",value:[,,,,,,,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,]]}},e={cp2001:"cp771",cp1119:"cp772",cp1118:"cp774",cp1162:"cp874",iso88591:"iso8859-1",iso88592:"iso8859-2",iso88597:"iso8859-7",iso885915:"iso8859-15",shiftjis:"epson/katakana",katakana:"epson/katakana",cp928:"star/cp928"},f={en:"The quick brown fox jumps over the lazy dog.",jp:"イロハニホヘト チリヌルヲ ワカヨタレソ ツネナラム",pt:"O próximo vôo à noite sobre o Atlântico, põe freqüentemente o único médico.",fr:"Les naïfs ægithales hâtifs pondant à Noël où il gèle sont sûrs d'être déçus en voyant leurs drôles d'œufs abîmés.",sv:"Flygande bäckasiner söka strax hwila på mjuka tuvor.",dk:"Quizdeltagerne spiste jordbær med fløde",el:"ξεσκεπάζω την ψυχοφθόρα βδελυγμία",tr:"Pijamalı hasta, yağız şoföre çabucak güvendi.",ru:"Съешь же ещё этих мягких французских булок да выпей чаю",hu:"Árvíztűrő tükörfúrógép",pl:"Pchnąć w tę łódź jeża lub ośm skrzyń fig",cz:"Mohu jíst sklo, neublíží mi.",ar:"أنا قادر على أكل الزجاج و هذا لا يؤلمني.",et:"Ma võin klaasi süüa, see ei tee mulle midagi.",lt:"Aš galiu valgyti stiklą ir jis manęs nežeidžia.",bg:"Мога да ям стъкло, то не ми вреди.",is:"Ég get etið gler án þess að meiða mig.",he:"אני יכול לאכול זכוכית וזה לא מזיק לי.",fa:".من می توانم بدونِ احساس درد شيشه بخورم",uk:"Я можу їсти скло, і воно мені не зашкодить.",vi:"Tôi có thể ăn thủy tinh mà không hại gì.",kk:"қазақша",lv:"Es varu ēst stiklu, tas man nekaitē.",mt:"Nista' niekol il-ħġieġ u ma jagħmilli xejn.",th:"ฉันกินกระจกได้ แต่มันไม่ทำให้ฉันเจ็บ"};class g{static getEncodings(){return Object.keys(d)}static getEncoding(a){return void 0!==e[a]&&(a=e[a]),void 0===d[a]&&(a="ascii"),void 0===d[a].codepoints&&(d[a].codepoints=this.getCodepoints(a,!0)),structuredClone(d[a])}static getTestStrings(a){return(void 0!==e[a]&&(a=e[a]),void 0!==d[a]&&void 0!==d[a].languages)?d[a].languages.map(a=>({language:a,string:f[a]})):[]}static supports(a){return void 0!==e[a]&&(a=e[a]),void 0!==d[a]}static encode(a,b){let c=new Uint8Array(a.length),d=this.getEncoding(b);for(let b=0;b<a.length;b++){let e=a.codePointAt(b),f=d.codepoints.findIndex(a=>a===e);-1!==f?c[b]=f:c[b]=63}return c}static autoEncode(a,b){let c,d=[],e=-1;for(let f=0;f<a.length;f++){let g,h=a.codePointAt(f),i=0;if(!g&&c){let a=this.getEncoding(c).codepoints.findIndex(a=>a===h);-1!==a&&(g=c,i=a)}if(!g)for(let a=0;a<b.length;a++){let c=this.getEncoding(b[a]).codepoints.findIndex(a=>a===h);if(-1!==c){g=b[a],i=c;break}}g||(g=c||b[0],i=63),c!=g&&(c&&(d[e].bytes=new Uint8Array(d[e].bytes)),d[++e]={codepage:g,bytes:[]},c=g),d[e].bytes.push(i)}return c&&(d[e].bytes=new Uint8Array(d[e].bytes)),d}static getCodepoints(a,b){let c=Array(256);if(b&&(c=void 0===d[a].extends?c.fill(65533):this.getEncoding(d[a].extends).codepoints),16===d[a].value.length){for(let b=0;b<16;b++)if("object"==typeof d[a].value[b])for(let e=0;e<16;e++)"number"==typeof d[a].value[b][e]&&(c[16*b+e]=d[a].value[b][e])}else{let b=d[a].offset||0;for(let e=0;e<d[a].value.length;e++)"number"==typeof d[a].value[e]&&(c[b+e]=d[a].value[e])}return c}}var h=a.i(844136),i=a.i(268032);class j{initialize(){return[{type:"initialize",payload:[27,64]},{type:"character-mode",value:"single byte",payload:[28,46]},{type:"font",value:"A",payload:[27,77,0]}]}font(a){let b=a.charCodeAt(0)-65;return[{type:"font",value:a,payload:[27,77,b]}]}align(a){let b=0;return"center"===a?b=1:"right"===a&&(b=2),[{type:"align",value:a,payload:[27,97,b]}]}barcode(a,b,c){let d=[],e={upca:0,upce:1,ean13:2,ean8:3,code39:4,coda39:4,itf:5,"interleaved-2-of-5":5,"nw-7":6,codabar:6,code93:72,code128:73,"gs1-128":72,"gs1-databar-omni":75,"gs1-databar-truncated":76,"gs1-databar-limited":77,"gs1-databar-expanded":78,"code128-auto":79};if("string"==typeof b&&void 0===e[b])throw Error(`Symbology '${b}' not supported by language`);if(c.width<1||c.width>3)throw Error("Width must be between 1 and 3");let f=c.width+1;"itf"===b&&(f=2*c.width),("gs1-128"===b||"gs1-databar-omni"===b||"gs1-databar-truncated"===b||"gs1-databar-limited"===b||"gs1-databar-expanded"===b)&&(f=c.width),d.push({type:"barcode",property:"height",value:c.height,payload:[29,104,c.height]},{type:"barcode",property:"width",value:c.width,payload:[29,119,f]},{type:"barcode",property:"text",value:c.text,payload:[29,72,2*!!c.text]}),"code128"!=b||a.startsWith("{")||(a="{B"+a),"gs1-128"==b&&(a=a.replace(/[()*]/g,""));let h=g.encode(a,"ascii"),i="string"==typeof b?e[b]:b;return i>64?d.push({type:"barcode",value:{symbology:b,data:a},payload:[29,107,i,h.length,...h]}):d.push({type:"barcode",value:{symbology:b,data:a},payload:[29,107,i,...h,0]}),d}qrcode(a,b){let c=[];if("number"==typeof b.model){let a={1:49,2:50};if(b.model in a)c.push({type:"qrcode",property:"model",value:b.model,payload:[29,40,107,4,0,49,65,a[b.model],0]});else throw Error("Model must be 1 or 2")}if("number"!=typeof b.size)throw Error("Size must be a number");if(b.size<1||b.size>8)throw Error("Size must be between 1 and 8");c.push({type:"qrcode",property:"size",value:b.size,payload:[29,40,107,3,0,49,67,b.size]});let d={l:48,m:49,q:50,h:51};if(b.errorlevel in d)c.push({type:"qrcode",property:"errorlevel",value:b.errorlevel,payload:[29,40,107,3,0,49,69,d[b.errorlevel]]});else throw Error("Error level must be l, m, q or h");let e=g.encode(a,"iso8859-1"),f=e.length+3;return c.push({type:"qrcode",property:"data",value:a,payload:[29,40,107,255&f,f>>8&255,49,80,48,...e]}),c.push({type:"qrcode",command:"print",payload:[29,40,107,3,0,49,81,48]}),c}pdf417(a,b){let c=[];if("number"!=typeof b.columns)throw Error("Columns must be a number");if(0!==b.columns&&(b.columns<1||b.columns>30))throw Error("Columns must be 0, or between 1 and 30");if(c.push({type:"pdf417",property:"columns",value:b.columns,payload:[29,40,107,3,0,48,65,b.columns]}),"number"!=typeof b.rows)throw Error("Rows must be a number");if(0!==b.rows&&(b.rows<3||b.rows>90))throw Error("Rows must be 0, or between 3 and 90");if(c.push({type:"pdf417",property:"rows",value:b.rows,payload:[29,40,107,3,0,48,66,b.rows]}),"number"!=typeof b.width)throw Error("Width must be a number");if(b.width<2||b.width>8)throw Error("Width must be between 2 and 8");if(c.push({type:"pdf417",property:"width",value:b.width,payload:[29,40,107,3,0,48,67,b.width]}),"number"!=typeof b.height)throw Error("Height must be a number");if(b.height<2||b.height>8)throw Error("Height must be between 2 and 8");if(c.push({type:"pdf417",property:"height",value:b.height,payload:[29,40,107,3,0,48,68,b.height]}),"number"!=typeof b.errorlevel)throw Error("Errorlevel must be a number");if(b.errorlevel<0||b.errorlevel>8)throw Error("Errorlevel must be between 0 and 8");c.push({type:"pdf417",property:"errorlevel",value:b.errorlevel,payload:[29,40,107,4,0,48,69,48,b.errorlevel+48]}),c.push({type:"pdf417",property:"truncated",value:!!b.truncated,payload:[29,40,107,3,0,48,70,+!!b.truncated]});let d=g.encode(a,"ascii"),e=d.length+3;return c.push({type:"pdf417",property:"data",value:a,payload:[29,40,107,255&e,e>>8&255,48,80,48,...d]}),c.push({type:"pdf417",command:"print",payload:[29,40,107,3,0,48,81,48]}),c}image(a,b,c,d){let e=[],f=(d,e)=>d<b&&e<c?a.data[(b*e+d)*4]>0?0:1:0;return"column"==d&&(e.push({type:"line-spacing",value:"24 dots",payload:[27,51,36]}),((a,b)=>{let c=[];for(let d=0;d<Math.ceil(b/24);d++){let b=new Uint8Array(3*a);for(let c=0;c<a;c++)for(let a=0;a<3;a++)for(let e=0;e<8;e++)b[3*c+a]|=f(c,24*d+e+8*a)<<7-e;c.push(b)}return c})(b,c).forEach(a=>{e.push({type:"image",property:"data",value:"column",width:b,height:24,payload:[27,42,33,255&b,b>>8&255,...a,10]})}),e.push({type:"line-spacing",value:"default",payload:[27,50]})),"raster"==d&&e.push({type:"image",command:"data",value:"raster",width:b,height:c,payload:[29,118,48,0,b>>3&255,b>>3>>8&255,255&c,c>>8&255,...((a,b)=>{let c=new Uint8Array(a*b>>3);for(let d=0;d<b;d++)for(let b=0;b<a;b+=8)for(let e=0;e<8;e++)c[d*(a>>3)+(b>>3)]|=f(b+e,d)<<7-e;return c})(b,c)]}),e}cut(a){let b=0;return"partial"==a&&(b=1),[{type:"cut",payload:[29,86,b]}]}pulse(a,b,c){return void 0===a&&(a=0),void 0===b&&(b=100),void 0===c&&(c=500),[{type:"pulse",payload:[27,112,+!!a,255&(b=Math.min(500,Math.round(b/2))),255&(c=Math.min(500,Math.round(c/2)))]}]}bold(a){let b=0;return a&&(b=1),[27,69,b]}underline(a){let b=0;return a&&(b=1),[27,45,b]}italic(a){let b=0;return a&&(b=1),[27,52,b]}invert(a){let b=0;return a&&(b=1),[29,66,b]}size(a,b){return[29,33,b-1|a-1<<4]}codepage(a){return[27,116,a]}flush(){return[]}}class k{initialize(){return[{type:"initialize",payload:[27,64,24]}]}font(a){let b=0;return"B"===a&&(b=1),"C"===a&&(b=2),[{type:"font",value:a,payload:[27,30,70,b]}]}align(a){let b=0;return"center"===a?b=1:"right"===a&&(b=2),[{type:"align",value:a,payload:[27,29,97,b]}]}barcode(a,b,c){let d=[],e={upce:0,upca:1,ean8:2,ean13:3,code39:4,itf:5,"interleaved-2-of-5":5,code128:6,code93:7,"nw-7":8,codabar:8,"gs1-128":9,"gs1-databar-omni":10,"gs1-databar-truncated":11,"gs1-databar-limited":12,"gs1-databar-expanded":13};if("string"==typeof b&&void 0===e[b])throw Error(`Symbology '${b}' not supported by language`);if(c.width<1||c.width>3)throw Error("Width must be between 1 and 3");"code128"===b&&a.startsWith("{")&&(a=a.slice(2));let f=g.encode(a,"ascii"),h="string"==typeof b?e[b]:b;return d.push({type:"barcode",value:{symbology:b,data:a,width:c.width,height:c.height,text:c.text},payload:[27,98,h,c.text?2:1,c.width,c.height,...f,30]}),d}qrcode(a,b){let c=[],d={1:1,2:2};if(b.model in d)c.push({type:"qrcode",property:"model",value:b.model,payload:[27,29,121,83,48,d[b.model]]});else throw Error("Model must be 1 or 2");if("number"!=typeof b.size)throw Error("Size must be a number");if(b.size<1||b.size>8)throw Error("Size must be between 1 and 8");c.push({type:"qrcode",property:"size",value:b.size,payload:[27,29,121,83,50,b.size]});let e={l:0,m:1,q:2,h:3};if(b.errorlevel in e)c.push({type:"qrcode",property:"errorlevel",value:b.errorlevel,payload:[27,29,121,83,49,e[b.errorlevel]]});else throw Error("Error level must be l, m, q or h");let f=g.encode(a,"iso8859-1"),h=f.length;return c.push({type:"qrcode",property:"data",value:a,payload:[27,29,121,68,49,0,255&h,h>>8&255,...f]}),c.push({type:"qrcode",command:"print",payload:[27,29,121,80]}),c}pdf417(a,b){let c=[];if("number"!=typeof b.columns)throw Error("Columns must be a number");if(0!==b.columns&&(b.columns<1||b.columns>30))throw Error("Columns must be 0, or between 1 and 30");if("number"!=typeof b.rows)throw Error("Rows must be a number");if(0!==b.rows&&(b.rows<3||b.rows>90))throw Error("Rows must be 0, or between 3 and 90");if(c.push({type:"pdf417",value:`rows: ${b.rows}, columns: ${b.columns}`,payload:[27,29,120,83,48,1,b.rows,b.columns]}),"number"!=typeof b.width)throw Error("Width must be a number");if(b.width<2||b.width>8)throw Error("Width must be between 2 and 8");if(c.push({type:"pdf417",property:"width",value:b.width,payload:[27,29,120,83,50,b.width]}),"number"!=typeof b.height)throw Error("Height must be a number");if(b.height<2||b.height>8)throw Error("Height must be between 2 and 8");if(c.push({type:"pdf417",property:"height",value:b.height,payload:[27,29,120,83,51,b.height]}),"number"!=typeof b.errorlevel)throw Error("Errorlevel must be a number");if(b.errorlevel<0||b.errorlevel>8)throw Error("Errorlevel must be between 0 and 8");c.push({type:"pdf417",property:"errorlevel",value:b.errorlevel,payload:[27,29,120,83,49,b.errorlevel]});let d=g.encode(a,"ascii"),e=d.length;return c.push({type:"pdf417",property:"data",value:a,payload:[27,29,120,68,255&e,e>>8&255,...d]}),c.push({type:"pdf417",command:"print",payload:[27,29,120,80]}),c}image(a,b,c,d){let e=[],f=(c,d)=>void 0===a.data[(b*d+c)*4]||a.data[(b*d+c)*4]>0?0:1;e.push({type:"line-spacing",value:"24 dots",payload:[27,48]});for(let a=0;a<c/24;a++){let c=24*a,d=new Uint8Array(3*b);for(let a=0;a<b;a++){let b=3*a;d[b]=f(a,c+0)<<7|f(a,c+1)<<6|f(a,c+2)<<5|f(a,c+3)<<4|f(a,c+4)<<3|f(a,c+5)<<2|f(a,c+6)<<1|f(a,c+7),d[b+1]=f(a,c+8)<<7|f(a,c+9)<<6|f(a,c+10)<<5|f(a,c+11)<<4|f(a,c+12)<<3|f(a,c+13)<<2|f(a,c+14)<<1|f(a,c+15),d[b+2]=f(a,c+16)<<7|f(a,c+17)<<6|f(a,c+18)<<5|f(a,c+19)<<4|f(a,c+20)<<3|f(a,c+21)<<2|f(a,c+22)<<1|f(a,c+23)}e.push({type:"image",property:"data",value:"column",width:b,height:24,payload:[27,88,255&b,b>>8&255,...d,10,13]})}return e.push({type:"line-spacing",value:"default",payload:[27,122,1]}),e}cut(a){let b=0;return"partial"==a&&(b=1),[{type:"cut",payload:[27,100,b]}]}pulse(a,b,c){return void 0===a&&(a=0),void 0===b&&(b=200),void 0===c&&(c=200),[{type:"pulse",payload:[27,7,255&(b=Math.min(127,Math.round(b/10))),255&(c=Math.min(127,Math.round(c/10))),a?26:7]}]}bold(a){let b=70;return a&&(b=69),[27,b]}underline(a){let b=0;return a&&(b=1),[27,45,b]}italic(a){return[]}invert(a){let b=53;return a&&(b=52),[27,b]}size(a,b){return[27,105,b-1,a-1]}codepage(a){return[27,29,116,a]}flush(){return[{type:"print-mode",value:"page",payload:[27,29,80,48]},{type:"print-mode",value:"line",payload:[27,29,80,49]}]}}class l{#a={bold:!1,italic:!1,underline:!1,invert:!1,width:1,height:1};#b;#c;constructor(a){this.#b=structuredClone(this.#a),this.#c=a.callback||(()=>{})}store(){let a=[],b=new Map;for(let a in this.#b)this.#b[a]!==this.#a[a]&&("width"===a||"height"===a?b.set("size",{width:this.#a.width,height:this.#a.height}):b.set(a,this.#a[a]));for(let c of b)a.push({type:"style",property:c[0],value:c[1]});return a}restore(){let a=[],b=new Map;for(let a in this.#b)this.#b[a]!==this.#a[a]&&("width"===a||"height"===a?b.set("size",{width:this.#b.width,height:this.#b.height}):b.set(a,this.#b[a]));for(let c of b)a.push({type:"style",property:c[0],value:c[1]});return a}set bold(a){a!==this.#b.bold&&(this.#b.bold=a,this.#c({type:"style",property:"bold",value:a}))}get bold(){return this.#b.bold}set italic(a){a!==this.#b.italic&&(this.#b.italic=a,this.#c({type:"style",property:"italic",value:a}))}get italic(){return this.#b.italic}set underline(a){a!==this.#b.underline&&(this.#b.underline=a,this.#c({type:"style",property:"underline",value:a}))}get underline(){return this.#b.underline}set invert(a){a!==this.#b.invert&&(this.#b.invert=a,this.#c({type:"style",property:"invert",value:a}))}get invert(){return this.#b.invert}set width(a){a!==this.#b.width&&(this.#b.width=a,this.#c({type:"style",property:"size",value:{width:this.#b.width,height:this.#b.height}}))}get width(){return this.#b.width}set height(a){a!==this.#b.height&&(this.#b.height=a,this.#c({type:"style",property:"size",value:{width:this.#b.width,height:this.#b.height}}))}get height(){return this.#b.height}}class m{static wrap(a,b){let c=[],d=[],e=b.indent||0,f=b.width||1,g=b.columns||42;for(let b of String(a).split(/\r\n|\n/g)){for(let a of b.match(/[^\s-]+?-\b|\S+|\s+|\r\n?|\n/g)||["~~empty~~"]){if("~~empty~~"===a){c.push(d),d=[],e=0;continue}if(e+a.length*f>g){if(a.length*f>g){let b,h=g-e,i=a.split(""),j=[];for(h>8*f&&(b=i.splice(0,Math.floor(h/f)).join(""),d.push(b),c.push(d),d=[],e=0);(b=i.splice(0,Math.floor(g/f))).length;)j.push(b.join(""));for(let a of j)e+a.length*f>g&&(c.push(d),d=[],e=0),d.push(a),e+=a.length*f;continue}c.push(d),d=[],e=0}a.match(/\s+/)&&0==e||(d.push(a),e+=a.length*f)}d.length>0&&(c.push(d),d=[],e=0)}for(let a=0;a<c.length;a++)c[a]=c[a].join(""),a<c.length-1&&(c[a]=c[a].trimEnd());return c}}class n{#d;#e;#f;#c;#g=0;#h;#i=[];constructor(a){this.#d=a.embedded||!1,this.#e=a.columns||42,this.#f=a.align||"left",this.#c=a.callback||(()=>{}),this.style=new l({callback:a=>{this.add(a,0)}}),this.#h=this.style.store()}text(a,b){let c=m.wrap(a,{columns:this.#e,width:this.style.width,indent:this.#g});for(let a=0;a<c.length;a++)c[a].length?(this.add({type:"text",value:c[a],codepage:b},c[a].length*this.style.width),a<c.length-1&&this.flush()):this.flush({forceNewline:!0})}space(a){this.add({type:"space",size:a},a)}raw(a,b){this.add({type:"raw",payload:a},b||0)}add(a,b){if(a instanceof Array){for(let b of a)this.add(b);this.#g+=b||0;return}(b=b||0)+this.#g>this.#e&&this.flush(),this.#g+=b,this.#i=this.#i.concat(a)}end(){this.#g=this.#e}fetch(a){if(0===this.#g&&!a.forceNewline&&!a.forceFlush)return[];let b={current:this.#f,next:null};for(let a=0;a<this.#i.length-1;a++)"align"!==this.#i[a].type||this.#i[a].payload||(b.current=this.#i[a].value);if(this.#i.length){let a=this.#i[this.#i.length-1];"align"!==a.type||a.payload||(b.next=a.value)}this.#f=b.current;let c=this.#i.filter(a=>"align"!==a.type||a.payload),d=[],e=this.style.restore(),f=this.style.store();if(0===this.#g&&(a.ignoreAlignment||!this.#d))d=this.#j([...this.#h,...c,...f]);else{if("right"===this.#f){let a;for(let b=c.length-1;b>=0;b--)if("text"===c[b].type||"space"===c[b].type){a=b;break}"number"==typeof a&&("space"===c[a].type&&c[a].size>this.style.width&&(c[a].size-=this.style.width,this.#g-=this.style.width),"text"===c[a].type&&c[a].value.endsWith(" ")&&(c[a].value=c[a].value.slice(0,-1),this.#g-=this.style.width)),d=this.#j([{type:"space",size:this.#e-this.#g},...this.#h,...c,...f])}if("center"===this.#f){let a=this.#e-this.#g>>1;d=this.#j([{type:"space",size:a},...this.#h,...c,...f,{type:"space",size:this.#d?this.#e-this.#g-a:0}])}"left"===this.#f&&(d=this.#j([...this.#h,...c,...f,{type:"space",size:this.#d?this.#e-this.#g:0}]))}return this.#h=e,this.#i=[],this.#g=0,0===d.length&&a.forceNewline&&d.push({type:"empty"}),b.next&&(this.#f=b.next),d}flush(a){a=Object.assign({forceNewline:!1,forceFlush:!1,ignoreAlignment:!1},a||{});let b=this.fetch(a);b.length&&this.#c(b)}#j(a){let b=[],c=-1;for(let d of a){if("space"===d.type){if(0===d.size)continue;d={type:"text",value:" ".repeat(d.size),codepage:null}}if("text"===d.type){if(c>=0&&"text"===b[c].type&&(b[c].codepage===d.codepage||null===b[c].codepage||null===d.codepage)){b[c].value+=d.value,b[c].codepage=b[c].codepage||d.codepage;continue}b.push(d),c++}else if("style"===d.type&&"size"===d.property){if(c>=0&&"style"===b[c].type&&"size"===b[c].property){b[c].value=d.value;continue}b.push(d),c++}else b.push(d),c++}return b}get cursor(){return this.#g}set align(a){this.add({type:"align",value:a},0)}get align(){let a=this.#f;for(let b=0;b<this.#i.length;b++)"align"===this.#i[b].type&&(a=this.#i[b].value);return a}set columns(a){this.#e=a}get columns(){return this.#e}}let o={"esc-pos":{"bixolon/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],bixolon:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858",,"cp862","cp864","thai42","windows1253","windows1254","windows1257",,"windows1251","cp737","cp775","thai14","bixolon/hebrew","windows1255","thai11","thai18","cp885","cp857","iso8859-7","thai16","windows1256","windows1258","khmer",,,,"bixolon/cp866","windows1250",,"tcvn3","tcvn3capitals","viscii"],citizen:["cp437","epson/katakana","cp858","cp860","cp863","cp865","cp852","cp866","cp857",,,,,,,,"windows1252",,,,,"thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","windows1258",,,,,,,,"cp864"],"epson/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858"],epson:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,"cp851","cp853","cp857","cp737","iso8859-7","windows1252","cp866","cp852","cp858","thai42","thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","cp720","cp775","cp855","cp861","cp862","cp864","cp869","epson/iso8859-2","iso8859-15","cp1098","cp774","cp772","cp1125","windows1250","windows1251","windows1253","windows1254","windows1255","windows1256","windows1257","windows1258","rk1048"],fujitsu:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,"cp857",,,,,,,,"windows1252","cp866","cp852","cp858",,,,,,,"thai13",,,,,,,,,,,,,,"cp864"],hp:["cp437","cp850","cp852","cp860","cp863","cp865","cp858","cp866","windows1252","cp862","cp737","cp874","cp857","windows1251","windows1255","rk1048"],metapace:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],mpt:["cp437",,"cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012"],"pos-5890":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1",,"cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,,,"windows1251","cp737","windows1257",,"windows1258","cp864",,,,"windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,"cp3041","windows1253","windows1254","windows1256","cp720",,"cp775"],"pos-8360":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,"latvian",,"windows1251","cp737","windows1257",,"windows1258","cp864",,,"pos8360/hebrew","windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,,,"windows1254","windows1256","cp720",,"cp775"],star:["cp437","star/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858","thai42","thai11","thai13","thai14","thai16",,"thai18"],xprinter:["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","xprinter/hebrew","cp3012",,"windows1255",,,,,"windows1252","cp866","cp852","cp858",,"latvian","cp864","windows1251","cp737","windows1257",,,,,,,,"windows1256"],youku:["cp437","epson/katakana","cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012",,,,,,"cp862","windows1252",,"cp852","cp858",,,"cp864","iso8859-1","cp737","windows1257",,,"cp855","cp857","windows1250","cp775","windows1254","windows1255","windows1256","windows1258",,,"iso8859-1",,,,,,"iso8859-15",,,"cp874"]},"star-prnt":{star:["star/standard","cp437","star/katakana",,"cp858","cp852","cp860","cp861","cp863","cp865","cp866","cp855","cp857","cp862","cp864","cp737","cp851","cp869","star/cp928","cp772","cp774","star/cp874",,,,,,,,,,,"windows1252","windows1250","windows1251",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"cp3840","cp3841","cp3843","cp3844","cp3845","cp3846","cp3847","cp3848","cp1001","cp771","cp3001","cp3002","cp3011","cp3012","cp3021","cp3041"]}};o["star-line"]=o["star-prnt"],o["esc-pos"].zijang=o["esc-pos"]["pos-5890"];let p={"bixolon-srp350":{vendor:"Bixolon",model:"SRP-350",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"bixolon-srp350iii":{vendor:"Bixolon",model:"SRP-350III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56},C:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"citizen-ct-s310ii":{vendor:"Citizen",model:"CT-S310II",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"citizen",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64},C:{size:"8x16",columns:72}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"epson-tm-m30ii":{vendor:"Epson",model:"TM-m30II",interfaces:{usb:{productName:"TM-m30II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-m30iii":{vendor:"Epson",model:"TM-m30III",interfaces:{usb:{productName:"TM-m30III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-p20ii":{vendor:"Epson",model:"TM-P20II",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42},D:{size:"10x24",columns:38},E:{size:"8x16",columns:48}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:3}}},"epson-tm-t20ii":{vendor:"Epson",model:"TM-T20II",interfaces:{usb:{productName:"TM-T20II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iii":{vendor:"Epson",model:"TM-T20III",interfaces:{usb:{productName:"TM-T20III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iv":{vendor:"Epson",model:"TM-T20IV",interfaces:{usb:{productName:"TM-T20IV"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t70":{vendor:"Epson",model:"TM-T70",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t70ii":{vendor:"Epson",model:"TM-T70II",interface:{usb:{productName:"TM-T70II"}},media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t88ii":{vendor:"Epson",model:"TM-T88II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iii":{vendor:"Epson",model:"TM-T88III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iv":{vendor:"Epson",model:"TM-T88IV",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88v":{vendor:"Epson",model:"TM-T88V",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vi":{vendor:"Epson",model:"TM-T88VI",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vii":{vendor:"Epson",model:"TM-T88VII",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"fujitsu-fp1000":{vendor:"Fujitsu",model:"FP-1000",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"fujitsu",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:56},C:{size:"8x16",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1},cutter:{feed:4}}},"hp-a779":{vendor:"HP",model:"A779",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"hp",newline:"\n",fonts:{A:{size:"12x24",columns:44}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1,fallback:{type:"barcode",symbology:75}},cutter:{feed:4}}},"metapace-t1":{vendor:"Metapace",model:"T-1",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"metapace",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"mpt-ii":{vendor:"",model:"MPT-II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"mpt",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64},C:{size:"0x0",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:[]},pdf417:{supported:!1}}},"pos-5890":{vendor:"",model:"POS-5890",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"pos-5890",fonts:{A:{size:"12x24",columns:32},B:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:1}}},"pos-8360":{vendor:"",model:"POS-8360",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"pos-8360",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"star-mc-print2":{vendor:"Star",model:"mC-Print2",interfaces:{usb:{productName:"mC-Print2"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-mpop":{vendor:"Star",model:"mPOP",interfaces:{usb:{productName:"mPOP"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-sm-l200":{vendor:"Star",model:"SM-L200",media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0}}},"star-tsp100iii":{vendor:"Star",model:"TSP100III",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp100iv":{vendor:"Star",model:"TSP100IV",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp650":{vendor:"Star",model:"TSP650",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:3}}},"star-tsp650ii":{vendor:"Star",model:"TSP650II",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"xprinter-xp-n160ii":{vendor:"Xprinter",model:"XP-N160II",interfaces:{usb:{productName:"Printer-80\0"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"xprinter-xp-t80q":{vendor:"Xprinter",model:"XP-T80Q",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"youku-58t":{vendor:"Youku",model:"58T",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"youku",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!1}}}};class q{#k={};#l=[];#m;#n;#o={fonts:{A:{size:"12x24",columns:42},B:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0}};#p={};#q=[];#r="cp437";#s={codepage:0,font:"A"};constructor(a){const b={columns:42,language:"esc-pos",imageMode:"column",feedBeforeCut:0,newline:"\n\r",codepageMapping:"epson",codepageCandidates:null,errors:"relaxed"};if("string"==typeof(a=a||{}).language&&(b.columns="esc-pos"===a.language?42:48,b.codepageMapping="esc-pos"===a.language?"epson":"star"),"string"==typeof a.printerModel){if(void 0===p[a.printerModel])throw Error("Unknown printer model");this.#o=p[a.printerModel].capabilities,b.columns=this.#o.fonts.A.columns,b.language=this.#o.language,b.codepageMapping=this.#o.codepages,b.newline=this.#o?.newline||b.newline,b.feedBeforeCut=this.#o?.cutter?.feed||b.feedBeforeCut,b.imageMode=this.#o?.images?.mode||b.imageMode}if(a&&(this.#k=Object.assign(b,{debug:!1,embedded:!1,createCanvas:null},a)),this.#k.width&&(this.#k.columns=this.#k.width),"esc-pos"===this.#k.language)this.#m=new j;else if("star-prnt"===this.#k.language||"star-line"===this.#k.language)this.#m=new k;else throw Error("The specified language is not supported");if(void 0===this.#k.autoFlush&&(this.#k.autoFlush=!this.#k.embedded&&"star-prnt"==this.#k.language),![32,35,42,44,48].includes(this.#k.columns)&&!this.#k.embedded)throw Error("The width of the paper must me either 32, 35, 42, 44 or 48 columns");if("string"==typeof this.#k.codepageMapping){if(void 0===o[this.#k.language][this.#k.codepageMapping])throw Error("Unknown codepage mapping");this.#p=Object.fromEntries(o[this.#k.language][this.#k.codepageMapping].map((a,b)=>[a,b]).filter(a=>a))}else this.#p=this.#k.codepageMapping;this.#k.codepageCandidates?this.#q=this.#k.codepageCandidates:this.#q=Object.keys(this.#p),this.#n=new n({embedded:this.#k.embedded,columns:this.#k.columns,align:"left",size:1,callback:a=>this.#l.push(a)}),this.#t()}#t(){this.#l=[],this.#r="esc-pos"==this.#k.language?"cp437":"star/standard",this.#s.codepage=-1,this.#s.font="A"}initialize(){if(this.#k.embedded)throw Error("Initialize is not supported in table cells or boxes");return this.#n.add(this.#m.initialize()),this}codepage(a){if("auto"===a)return this.#r=a,this;if(!g.supports(a))throw Error("Unknown codepage");if(void 0!==this.#p[a])this.#r=a;else throw Error("Codepage not supported by printer");return this}text(a){return this.#n.text(a,this.#r),this}newline(a){a=parseInt(a,10)||1;for(let b=0;b<a;b++)this.#n.flush({forceNewline:!0});return this}line(a){return this.text(a),this.newline(),this}underline(a){return void 0===a?this.#n.style.underline=!this.#n.style.underline:this.#n.style.underline=a,this}italic(a){return void 0===a?this.#n.style.italic=!this.#n.style.italic:this.#n.style.italic=a,this}bold(a){return void 0===a?this.#n.style.bold=!this.#n.style.bold:this.#n.style.bold=a,this}invert(a){return void 0===a?this.#n.style.invert=!this.#n.style.invert:this.#n.style.invert=a,this}width(a){if(void 0===a&&(a=1),"number"!=typeof a)throw Error("Width must be a number");if(a<1||a>8)throw Error("Width must be between 1 and 8");return this.#n.style.width=a,this}height(a){if(void 0===a&&(a=1),"number"!=typeof a)throw Error("Height must be a number");if(a<1||a>8)throw Error("Height must be between 1 and 8");return this.#n.style.height=a,this}size(a,b){return"string"==typeof a?this.font("small"===a?"B":"A"):(void 0===b&&(b=a),this.width(a),this.height(b),this)}font(a){if(this.#k.embedded)throw Error("Changing fonts is not supported in table cells or boxes");if(this.#n.cursor>0)throw Error("Changing fonts is not supported in the middle of a line");let b=a.match(/^[0-9]+x[0-9]+$/);return(b&&(a=Object.entries(this.#o.fonts).find(a=>a[1].size==b[0])[0]),a=a.toUpperCase(),void 0===this.#o.fonts[a])?this.#u("This font is not supported by this printer","relaxed"):(this.#n.add(this.#m.font(a)),this.#s.font=a,"A"===a?this.#n.columns=this.#k.columns:this.#n.columns=this.#k.columns/this.#o.fonts.A.columns*this.#o.fonts[a].columns,this)}align(a){if(!["left","center","right"].includes(a))throw Error("Unknown alignment");return this.#n.align=a,this}table(a,b){this.#n.flush();for(let c=0;c<b.length;c++){let d=[],e=0;for(let f=0;f<a.length;f++){let g=new q(Object.assign({},this.#k,{width:a[f].width,embedded:!0}));g.codepage(this.#r),g.align(a[f].align),"string"==typeof b[c][f]&&g.text(b[c][f]),"function"==typeof b[c][f]&&b[c][f](g);let h=g.commands();e=Math.max(e,h.length),d[f]=h}for(let b=0;b<a.length;b++)if(!(d[b].length>=e))for(let c=d[b].length;c<e;c++){let c="top";void 0!==a[b].verticalAlign&&(c=a[b].verticalAlign);let e={commands:[{type:"space",size:a[b].width}],height:1};"bottom"==c?d[b].unshift(e):d[b].push(e)}for(let b=0;b<e;b++){for(let c=0;c<a.length;c++)void 0!==a[c].marginLeft&&this.#n.space(a[c].marginLeft),this.#n.add(d[c][b].commands,a[c].width),void 0!==a[c].marginRight&&this.#n.space(a[c].marginRight);this.#n.flush()}}return this}rule(a){return a=Object.assign({style:"single",width:this.#k.columns||10},a||{}),this.#n.flush(),this.#n.text(("double"===a.style?"═":"─").repeat(a.width),"cp437"),this.#n.flush({forceNewline:!0}),this}box(a,b){let c;if((a=Object.assign({style:"single",width:this.#k.columns,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},a||{})).width+a.marginLeft+a.marginRight>this.#k.columns)throw Error("Box is too wide");"single"==a.style?c=["┌","┐","└","┘","─","│"]:"double"==a.style&&(c=["╔","╗","╚","╝","═","║"]);let d=new q(Object.assign({},this.#k,{width:a.width-2*("none"!=a.style)-a.paddingLeft-a.paddingRight,embedded:!0}));d.codepage(this.#r),d.align(a.align),"function"==typeof b&&b(d),"string"==typeof b&&d.text(b);let e=d.commands();this.#n.flush(),"none"!=a.style&&(this.#n.space(a.marginLeft),this.#n.text(c[0],"cp437"),this.#n.text(c[4].repeat(a.width-2),"cp437"),this.#n.text(c[1],"cp437"),this.#n.space(a.marginRight),this.#n.flush());for(let b=0;b<e.length;b++)this.#n.space(a.marginLeft),"none"!=a.style&&(this.#n.style.height=e[b].height,this.#n.text(c[5],"cp437"),this.#n.style.height=1),this.#n.space(a.paddingLeft),this.#n.add(e[b].commands,a.width-2*("none"!=a.style)-a.paddingLeft-a.paddingRight),this.#n.space(a.paddingRight),"none"!=a.style&&(this.#n.style.height=e[b].height,this.#n.text(c[5],"cp437"),this.#n.style.height=1),this.#n.space(a.marginRight),this.#n.flush();return"none"!=a.style&&(this.#n.space(a.marginLeft),this.#n.text(c[2],"cp437"),this.#n.text(c[4].repeat(a.width-2),"cp437"),this.#n.text(c[3],"cp437"),this.#n.space(a.marginRight),this.#n.flush()),this}barcode(a,b,c){let d={height:60,width:2,text:!1};if("object"==typeof c&&(d=Object.assign(d,c)),"number"==typeof c&&(d.height=c),this.#k.embedded)throw Error("Barcodes are not supported in table cells or boxes");return!1===this.#o.barcodes.supported?this.#u("Barcodes are not supported by this printer","relaxed"):"string"!=typeof b||this.#o.barcodes.symbologies.includes(b)?(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.barcode(a,b,d)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this):this.#u(`Symbology '${b}' not supported by this printer`,"relaxed")}qrcode(a,b,c,d){let e={model:2,size:6,errorlevel:"m"};if("object"==typeof b&&(e=Object.assign(e,b)),"number"==typeof b&&(e.model=b),"number"==typeof c&&(e.size=c),"string"==typeof d&&(e.errorlevel=d),this.#k.embedded)throw Error("QR codes are not supported in table cells or boxes");return!1===this.#o.qrcode.supported?this.#u("QR codes are not supported by this printer","relaxed"):e.model&&!this.#o.qrcode.models.includes(String(e.model))?this.#u("QR code model is not supported by this printer","relaxed"):(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.qrcode(a,e)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this)}pdf417(a,b){if(b=Object.assign({width:3,height:3,columns:0,rows:0,errorlevel:1,truncated:!1},b||{}),this.#k.embedded)throw Error("PDF417 codes are not supported in table cells or boxes");return!1===this.#o.pdf417.supported?"object"==typeof this.#o.pdf417.fallback?this.barcode(a,this.#o.pdf417.fallback.symbology):this.#u("PDF417 codes are not supported by this printer","relaxed"):(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.pdf417(a,b)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this)}image(a,d,e,f,g){let j,k;if(this.#k.embedded)throw Error("Images are not supported in table cells or boxes");if(d%8!=0)throw Error("Width must be a multiple of 8");if(e%8!=0)throw Error("Height must be a multiple of 8");void 0===f&&(f="threshold"),void 0===g&&(g=128);let l=a.constructor.name;if(l.endsWith("Element")&&(j="element"),"ImageData"==l&&(j="imagedata"),"Canvas"==l&&void 0!==a.getContext&&(j="node-canvas"),"Image"==l&&(j="node-canvas-image"),"Image"==l&&void 0!==a.frames&&(j="node-read-image"),"Object"==l&&a.data&&a.info&&(j="node-sharp"),"View3duint8"==l&&a.data&&a.shape&&(j="ndarray"),"Object"==l&&a.data&&a.width&&a.height&&(j="object"),!j)throw Error("Could not determine the type of image input");if("element"==j){let b=document.createElement("canvas");b.width=d,b.height=e;let c=b.getContext("2d");c.drawImage(a,0,0,d,e),k=c.getImageData(0,0,d,e)}if("node-canvas"==j&&(k=a.getContext("2d").getImageData(0,0,a.width,a.height)),"node-canvas-image"==j){if("function"!=typeof this.#k.createCanvas)throw Error("Canvas is not supported in this environment, specify a createCanvas function in the options");let b=this.#k.createCanvas(d,e).getContext("2d");b.drawImage(a,0,0,d,e),k=b.getImageData(0,0,d,e)}if("node-read-image"==j&&(k=new h.default(a.width,a.height)).data.set(a.frames[0].data),"node-sharp"==j&&(k=new h.default(a.info.width,a.info.height)).data.set(a.data),"ndarray"==j&&(k=new h.default(a.shape[0],a.shape[1])).data.set(a.data),"object"==j&&(k=new h.default(a.width,a.height)).data.set(a.data),"imagedata"==j&&(k=a),!k)throw Error("Image could not be loaded");if((d!==k.width||e!==k.height)&&(k=(0,i.default)(k,d,e,"bilinear-interpolation")),d!==k.width||e!==k.height)throw Error("Image could not be resized");switch(k=c.default.flatten(k,[255,255,255]),f){case"threshold":k=b.default.threshold(k,g);break;case"bayer":k=b.default.bayer(k,g);break;case"floydsteinberg":k=b.default.floydsteinberg(k);break;case"atkinson":k=b.default.atkinson(k)}return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.image(k,d,e,this.#k.imageMode)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}cut(a){if(this.#k.embedded)throw Error("Cut is not supported in table cells or boxes");for(let a=0;a<this.#k.feedBeforeCut;a++)this.#n.flush({forceNewline:!0});return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this.#n.add(this.#m.cut(a)),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}pulse(a,b,c){if(this.#k.embedded)throw Error("Pulse is not supported in table cells or boxes");return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this.#n.add(this.#m.pulse(a,b,c)),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}raw(a){return this.#n.raw(a),this}#v(a,b){return"bold"===a?this.#m.bold(b):"underline"===a?this.#m.underline(b):"italic"===a?this.#m.italic(b):"invert"===a?this.#m.invert(b):"size"===a?this.#m.size(b.width,b.height):void 0}#w(a,b){if(null===b)return[{type:"text",payload:[...g.encode(a,"ascii")]}];if("auto"!==b){let c=g.encode(a,b);return this.#s.codepage!=this.#p[b]?(this.#s.codepage=this.#p[b],[{type:"codepage",payload:this.#m.codepage(this.#p[b])},{type:"text",payload:[...c]}]):[{type:"text",payload:[...c]}]}let c=g.autoEncode(a,this.#q),d=[];for(let a of c)this.#s.codepage=this.#p[a.codepage],d.push({type:"codepage",payload:this.#m.codepage(this.#p[a.codepage])},{type:"text",payload:[...a.bytes]});return d}commands(){let a=!0,b=this.#l[this.#l.length-1];if(b){let c=b[b.length-1];c&&["pulse","cut"].includes(c.type)&&(a=!1)}a&&this.#k.autoFlush&&!this.#k.embedded&&this.#n.add(this.#m.flush());let c=[],d=this.#n.fetch({forceFlush:!0,ignoreAlignment:!0});for(d.length&&this.#l.push(d);this.#l.length;){let a=this.#l.shift(),b=a.filter(a=>"style"===a.type&&"size"===a.property).map(a=>a.value.height).reduce((a,b)=>Math.max(a,b),1);this.#k.debug&&console.log("|"+a.filter(a=>"text"===a.type).map(a=>a.value).join("")+"|",b),c.push({commands:a,height:b})}return this.#k.debug&&console.log("commands",c),this.#t(),c}encode(a){let b=this.commands();if("commands"===a)return b;let c=[];for(let a of b){let b=[];for(let c of a.commands)"text"===c.type?b.push(...this.#w(c.value,c.codepage)):"style"===c.type?b.push(Object.assign(c,{payload:this.#v(c.property,c.value)})):(c.value||c.payload)&&b.push(c);c.push(b)}if("lines"===a)return c;let d=[],e=null;for(let a of c){for(let b of a)d.push(...b.payload),e=b;"\n\r"===this.#k.newline&&d.push(10,13),"\n"===this.#k.newline&&d.push(10)}return e&&"pulse"===e.type&&(d=d.slice(0,0-this.#k.newline.length)),Uint8Array.from(d)}#u(a,b){if("strict"===b||"strict"===this.#k.errors)throw Error(a);return console.warn(a),this}static get printerModels(){return Object.entries(p).map(a=>({id:a[0],name:a[1].vendor+" "+a[1].model}))}get columns(){return this.#n.columns}get language(){return this.#k.language}get printerCapabilities(){return this.#o}}class r extends q{constructor(a){(a=a||{}).language="esc-pos",super(a)}}var s=a.i(256711),t=a.i(368114),u=a.i(206222),v=a.i(866102);async function w(a,b,c){let d=c||b.currency||"",e=new r;e.initialize();let f="80mm"===b.printerPaperSize;f?e.raw([29,87,64,2]):(e.raw([29,76,0,0]),e.raw([29,87,128,1])),e.align("left"),e.align("left"),e.line(f?"=".repeat(42):"=".repeat(32)),b.businessName&&e.size("double").bold(!0).line(b.businessName.toUpperCase()).bold(!1).size("normal"),e.line(f?"=".repeat(42):"=".repeat(32)),b.businessAddress&&e.line(b.businessAddress),b.businessPhone&&e.line(`Tel: ${b.businessPhone}`),b.businessEmail&&e.line(b.businessEmail),e.line(f?"-".repeat(42):"-".repeat(32));let g={Quote:"QUOTATION",Paid:"SALES RECEIPT","Installment Sale":"INSTALLMENT SALE","NOT PAID":"INVOICE"}[a.paymentStatus]||"INVOICE";e.bold(!0).line(g).bold(!1),e.line(f?"-".repeat(42):"-".repeat(32)),e.raw([29,76,0,0]),e.align("left"),e.table([{width:12,align:"left"},{width:16,align:"right"}],[["Receipt #:",a.receiptNumber||""],["Date:",(0,s.format)(new Date(a.date||Date.now()),"MMM dd, yyyy")],["Status:",a.paymentStatus||""]]),e.line(f?"-".repeat(42):"-".repeat(32)),a.customerName&&(e.line(`Customer: ${a.customerName}`),a.customerAddress&&e.line(`Address: ${a.customerAddress}`),a.customerContact&&e.line(`Contact: ${a.customerContact}`),e.line(f?"-".repeat(42):"-".repeat(32)));let h=f?[{width:21,align:"left"},{width:1,align:"center"},{width:6,align:"right"},{width:14,align:"right"}]:[{width:12,align:"left"},{width:1,align:"center"},{width:5,align:"right"},{width:14,align:"right"}];e.table(h,[["Item","","Qty","Total"]]),e.line(f?"-".repeat(42):"-".repeat(32));let i=0,j=0;Array.isArray(a.items)&&a.items.forEach(a=>{let b=a.quantity||0,c=b*(a.price||0),d=a.discountAmount??c*(a.discountPercentage||0)/100;if(i+=c,j+=d,e.table(h,[[a.description||"","",String(b),(0,t.formatNumber)(c-d)]]),d>0){let b="amount"===a.discountType?"":`(${a.discountPercentage||0}%)`;e.italic(!0).table([{width:22,align:"left"},{width:10,align:"right"}],[[`  Discount ${b}`,`-${(0,t.formatNumber)(d)}`]]).italic(!1)}e.line(f?"-".repeat(42):"-".repeat(32))});let k=i-j,l=a.taxRate||0,m=l/100*k,n=k+m,o=Array.isArray(a.payments)?a.payments.reduce((a,b)=>a+(Number(b.amount)||0),0):0,p="Installment Sale"===a.paymentStatus&&o>0?o:Number(a.amountPaid)||0,q="Installment Sale"===a.paymentStatus?Math.max(0,n-o):Math.max(0,n-p);e.newline();let w=[{width:14,align:"left"},{width:f?28:18,align:"right"}];e.table(w,[["Subtotal:",`${d} ${(0,t.formatNumber)(i)}`]]),j>0&&e.table(w,[["Total Discount:",`-${d} ${(0,t.formatNumber)(j)}`]]),l>0&&e.table(w,[[`Tax (${l}%):`,`${d} ${(0,t.formatNumber)(m)}`]]),e.bold(!0).table(w,[["TOTAL:",`${d} ${(0,t.formatNumber)(n)}`]]).bold(!1),"Installment Sale"===a.paymentStatus&&e.table(w,[["Amount Paid:",`${d} ${(0,t.formatNumber)(p)}`],["Amount Due:",`${d} ${(0,t.formatNumber)(q)}`]]),e.line(f?"-".repeat(42):"-".repeat(32)),e.text(`Amount in words:
${(0,u.numberToWords)(n)} only
`),e.line(f?"-".repeat(42):"-".repeat(32)),e.raw([29,76,0,0]),e.align("left");let x=b.paymentInfo?(0,v.parsePaymentInfo)(b.paymentInfo):[];return Array.isArray(x)&&x.length>0&&x.forEach(a=>{(a.method||a.accountNumber||a.accountName)&&(e.bold(!0).line(a.method||"").bold(!1),a.accountNumber&&e.line(`Acc: ${a.accountNumber}`),a.accountName&&e.line(`Name: ${a.accountName}`),e.line(f?"-".repeat(42):"-".repeat(32)))}),e.line("Thank you for your business!"),e.size("small").line("Created by Gonza Systems").size("normal"),e.line(f?"=".repeat(42):"=".repeat(32)),e.newline().newline().newline().cut(),e.encode()}a.s(["generateThermalReceipt",()=>w],790341)},965643,a=>{"use strict";var b=a.i(653774);async function c(){for(let a of["http://localhost:5000","http://127.0.0.1:5000"])try{if((await fetch(`${a}/printers`,{signal:AbortSignal.timeout(2e3),mode:"cors"})).ok)return!0}catch(a){}return!1}async function d(c,d){if("web"===b.Capacitor.getPlatform()){try{let a=c instanceof Uint8Array,b=d;if(!b)try{b=JSON.parse(localStorage.getItem("business-settings")||"{}").defaultPrinterName}catch(a){}b||(b="Receipt Printer");let e={PrinterName:b,Content:a?String.fromCharCode(...c):c};if((await fetch("http://localhost:5000/print/receipt",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)})).ok)return{success:!0,message:"Print command sent to bridge."}}catch(a){console.warn("Printer Bridge not available, falling back to Web Serial",a)}if("string"!=typeof c)return{success:!1,message:"Printer Bridge required for binary ESC/POS printing."};{let{printWeb:b}=await a.A(924016);return await b(c)}}{let{printBluetooth:b}=await a.A(170562),d="string"==typeof c?c:new TextDecoder().decode(c);return await b(d)}}a.s(["checkBridgeStatus",()=>c,"print",()=>d])},209079,a=>{"use strict";var b=a.i(572131),c=a.i(478793),d=a.i(391956),e=a.i(405050);let f=(0,e.createServerReference)("40786257b46b845f51e5b90ff2502c389af049cc70",e.callServer,void 0,e.findSourceMapURL,"getInstallmentPaymentsAction"),g=(0,e.createServerReference)("40112c882b84370baebfbdd88b55390cbebe0d524d",e.callServer,void 0,e.findSourceMapURL,"createInstallmentPaymentAction"),h=(0,e.createServerReference)("6021a6dd25147899fbda211078cd44cca985d89362",e.callServer,void 0,e.findSourceMapURL,"updateInstallmentPaymentAction"),i=(0,e.createServerReference)("409394b83f001d081510671555a3855b10e38d2c72",e.callServer,void 0,e.findSourceMapURL,"deleteInstallmentPaymentAction"),j=(0,e.createServerReference)("78ab6573748e58002b49a105ac9332c6ce6438d0d6",e.callServer,void 0,e.findSourceMapURL,"linkInstallmentToCashAction"),k=(0,e.createServerReference)("4001af3a742114ad88aa5fa65b77c9b0daf7714c0e",e.callServer,void 0,e.findSourceMapURL,"unlinkInstallmentFromCashAction");a.s(["useInstallmentPayments",0,a=>{let[e,l]=(0,b.useState)([]),[m,n]=(0,b.useState)(!1),{toast:o}=(0,c.useToast)(),{user:p}=(0,d.useAuth)(),q=(0,b.useCallback)(async a=>{try{n(!0);let b=await f(a);if(!b.success||!b.data)throw Error(b.error);let c=b.data.map(a=>({...a,paymentDate:new Date(a.paymentDate),createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}));l(c)}catch(a){console.error("Error fetching installment payments:",a),o({title:"Error",description:"Failed to load payment history",variant:"destructive"})}finally{n(!1)}},[o]),r=async a=>{if(!p)return null;try{let b=await g({...a,userId:p.id,paymentDate:a.paymentDate?.toISOString()});if(!b.success||!b.data)throw Error(b.error);let c={...b.data,paymentDate:new Date(b.data.paymentDate),createdAt:new Date(b.data.createdAt),updatedAt:new Date(b.data.updatedAt)};return l(a=>[c,...a]),c}catch(a){return console.error("Error creating payment:",a),o({title:"Error",description:"Failed to record payment",variant:"destructive"}),null}},s=async(a,b)=>{try{let c=await h(a,{...b,paymentDate:b.paymentDate?.toISOString()});if(!c.success||!c.data)throw Error(c.error);let d={...c.data,paymentDate:new Date(c.data.paymentDate),createdAt:new Date(c.data.createdAt),updatedAt:new Date(c.data.updatedAt)};return l(b=>b.map(b=>b.id===a?d:b)),o({title:"Success",description:"Payment updated successfully"}),d}catch(a){return console.error("Error updating payment:",a),o({title:"Error",description:a.message||"Failed to update payment",variant:"destructive"}),null}},t=async a=>{try{let b=await i(a);if(!b.success)throw Error(b.error);return l(b=>b.filter(b=>b.id!==a)),o({title:"Success",description:"Payment deleted successfully"}),!0}catch(a){return console.error("Error deleting payment:",a),o({title:"Error",description:"Failed to delete payment",variant:"destructive"}),!1}},u=async(a,b,c)=>{if(p)try{let d=await j(a,b,c,p.id);if(!d.success||!d.data)throw Error(d.error);l(b=>b.map(b=>b.id===a?{...b,cashTransactionId:d.data.id}:b)),o({title:"Success",description:"Payment linked to cash account successfully"})}catch(a){console.error("Error linking payment:",a),o({title:"Error",description:a.message||"Failed to link payment",variant:"destructive"})}},v=async a=>{try{let b=await k(a);if(!b.success)throw Error(b.error);l(b=>b.map(b=>b.id===a?{...b,cashTransactionId:void 0}:b)),o({title:"Success",description:"Payment unlinked from cash account successfully"})}catch(a){console.error("Error unlinking payment:",a),o({title:"Error",description:a.message||"Failed to unlink payment",variant:"destructive"})}};return(0,b.useEffect)(()=>{a&&q(a)},[a,q]),{payments:e,isLoading:m,fetchPayments:q,createPayment:r,updatePayment:s,deletePayment:t,linkPaymentToCashAccount:u,unlinkPaymentFromCashAccount:v}}],209079)},53569,a=>{"use strict";let b=(0,a.i(170106).default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>b],53569)},835848,a=>{"use strict";a.s(["isAndroid",0,()=>{let a=navigator.userAgent||"";return/android/i.test(a)},"isIOS",0,()=>{let a=navigator.userAgent||"";return!/android/i.test(a)&&(/iPad|iPhone|iPod/.test(a)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)}])},640767,925488,a=>{"use strict";a.i(918646);var b=a.i(835848);let c=async(b,c,d={})=>{let{generateVectorPDF:e}=await a.A(151788);await e(b,{filename:c,orientation:"landscape",format:"a4",margins:{top:10,right:10,bottom:10,left:10}})},d=async(a,d,e={})=>{let{autoPrint:f=!1,isReceipt:g=!1}=e;try{(0,b.isIOS)()?await c(a,d,e):(await c(a,d,e),f&&setTimeout(()=>{window.print()},500))}catch(a){throw console.error("Error generating PDF:",a),a}};a.s(["generatePDF",0,d],640767),a.s(["directPrint",0,(a,b,c)=>{let d=window.open("","_blank");if(!d)return void window.print();let e=Array.from(document.styleSheets),f="";e.forEach(a=>{try{a.href?f+=`<link rel="stylesheet" href="${a.href}">`:a.cssRules&&(f+="<style>",Array.from(a.cssRules).forEach(a=>{f+=a.cssText}),f+="</style>")}catch(a){console.warn("Could not access stylesheet:",a)}});let g=c?`
    @page { 
      size: 80mm auto; 
      margin: 0; 
    }
    .thermal-receipt { 
      font-size: 14px !important; 
      font-weight: 800 !important;
      padding: 8px !important;
      page-break-after: avoid !important;
    }
    .thermal-receipt .font-extrabold { 
      font-weight: 900 !important; 
    }
    .thermal-receipt .font-bold { 
      font-weight: 800 !important; 
    }
  `:"";d.document.write(`
    <!DOCTYPE html>
    <html>
      <head>
        <title>${b||"Print"}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        ${f}
        <style>
          @media print {
            body { margin: 0; }
            .print\\:hidden { display: none !important; }
            ${g}
          }
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: ${c?"0":"20px"};
          }
        </style>
      </head>
      <body>
        ${a.outerHTML}
      </body>
    </html>
  `),d.document.close();let h=!1,i=()=>{if(!h){h=!0;try{d.closed||d.close()}catch(a){console.warn("Could not close print window:",a)}}};d.onload=()=>{d.focus(),d.print(),d.onafterprint=()=>{i()},d.onbeforeunload=()=>{h||setTimeout(i,100)},setTimeout(()=>{i()},1500)},d.onerror=()=>{console.warn("Print window failed to load"),i()}}],925488)},418353,a=>{"use strict";var b=a.i(187924),c=a.i(256711),d=a.i(368114),e=a.i(866102),f=a.i(206222),g=a.i(209079);a.s(["default",0,({sale:a,currency:h,includePaymentInfo:i=!0})=>{let{settings:j,isLoading:k}=(0,e.useBusinessSettings)(),{payments:l}=(0,g.useInstallmentPayments)(a.id);if(k)return(0,b.jsx)("div",{className:"flex items-center justify-center p-12 bg-gray-50 rounded-lg",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 font-mono",children:"Preparing receipt..."})]})});let m=a.items.reduce((a,b)=>a+b.price*b.quantity,0),n=a.items.reduce((a,b)=>{let c=b.price*b.quantity;return a+("amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100)},0),o=m-n,p=a.taxRate||0,q=p/100*o,r=o+q,s=(l||[]).reduce((a,b)=>a+(b.amount||0),0),t="Installment Sale"===a.paymentStatus||"Paid"===a.paymentStatus&&s>0?s:a.amountPaid||r,u="Installment Sale"===a.paymentStatus?Math.max(0,r-s):a.amountDue||0,v=j.paymentInfo?(0,e.parsePaymentInfo)(j.paymentInfo):[],w=i&&v.length>0&&v.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()),x=h||j.currency,y=new Date(a.date),z=new Date;return(0,b.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 sm:p-8 overflow-hidden",children:(0,b.jsxs)("div",{className:"relative bg-white shadow-2xl font-mono text-[11px] leading-tight text-black flex flex-col mx-auto",style:{width:"58mm",minHeight:"140mm",padding:"6mm 4mm",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",borderTop:"1px dashed #e5e7eb",borderBottom:"1px dashed #e5e7eb"},children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 overflow-hidden flex",style:{opacity:.2},children:Array.from({length:20}).map((a,c)=>(0,b.jsx)("div",{className:"w-4 h-4 bg-gray-300 transform rotate-45 -translate-y-2 translate-x-1"},c))}),(0,b.jsxs)("div",{className:"flex flex-col items-center mb-4 text-center",children:[j.businessLogo&&(0,b.jsx)("div",{className:"mb-2 w-full flex justify-center",children:(0,b.jsx)("img",{src:j.businessLogo,alt:"Logo",className:"h-12 w-auto object-contain max-w-[40mm]"})}),(0,b.jsx)("div",{className:"text-[14px] font-black uppercase tracking-tight mb-0.5",children:j.businessName}),(0,b.jsx)("div",{className:"text-[9px] font-bold opacity-80",children:j.businessAddress}),(0,b.jsxs)("div",{className:"text-[9px] font-bold opacity-80",children:["TEL: ",j.businessPhone]}),j.businessEmail&&(0,b.jsx)("div",{className:"text-[9px] font-bold opacity-80 lowercase",children:j.businessEmail})]}),(0,b.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,b.jsxs)("div",{className:"text-center mb-3",children:[(0,b.jsx)("div",{className:"text-[12px] font-black underline mb-1",children:(()=>{switch(a.paymentStatus){case"Quote":return"QUOTATION";case"Paid":return"SALES RECEIPT";case"Installment Sale":return"INSTALLMENT SALE";default:return"INVOICE"}})()}),(0,b.jsxs)("div",{className:"flex justify-between text-[9px] font-bold",children:[(0,b.jsx)("span",{children:(()=>{switch(a.paymentStatus){case"Quote":return"Quote #:";case"Paid":return"Receipt #:";case"Installment Sale":return"Installment #:";default:return"Invoice #:"}})()}),(0,b.jsx)("span",{children:a.receiptNumber})]}),(0,b.jsxs)("div",{className:"flex justify-between text-[9px]",children:[(0,b.jsx)("span",{children:"DATE:"}),(0,b.jsx)("span",{children:(0,c.format)(y,"dd/MM/yyyy")})]}),(0,b.jsxs)("div",{className:"flex justify-between text-[9px]",children:[(0,b.jsx)("span",{children:"TIME:"}),(0,b.jsx)("span",{children:(0,c.format)(z,"HH:mm")})]}),(0,b.jsxs)("div",{className:"flex justify-between text-[9px] font-black",children:[(0,b.jsx)("span",{children:"STATUS:"}),(0,b.jsx)("span",{children:a.paymentStatus.toUpperCase()})]})]}),a.customerName&&(0,b.jsxs)("div",{className:"mb-3 bg-gray-50 p-1.5 border border-gray-100 italic",children:[(0,b.jsx)("div",{className:"font-black text-[9px] not-italic uppercase mb-0.5",children:"Customer:"}),(0,b.jsx)("div",{className:"font-bold",children:a.customerName}),a.customerAddress&&(0,b.jsx)("div",{className:"text-[9px] opacity-70",children:a.customerAddress}),a.customerContact&&(0,b.jsx)("div",{className:"text-[9px] opacity-70",children:a.customerContact})]}),(0,b.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between font-black text-[9px] pb-1 border-b border-black mb-1.5 uppercase",children:[(0,b.jsx)("span",{className:"w-[60%]",children:"Description"}),(0,b.jsx)("span",{className:"w-[15%] text-right",children:"Qty"}),(0,b.jsx)("span",{className:"w-[25%] text-right",children:"Amt"})]}),a.items.map((a,c)=>{let e=a.quantity*a.price,f="amount"===a.discountType?a.discountAmount||0:e*(a.discountPercentage||0)/100;return(0,b.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,b.jsx)("div",{className:"font-bold text-[10px] break-words uppercase",children:a.description}),(0,b.jsxs)("div",{className:"flex justify-between text-[9px] items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-bold truncate",children:(0,d.formatNumber)(a.price)}),(0,b.jsx)("div",{className:"flex-1 border-b border-dotted border-gray-300 mx-2"}),(0,b.jsxs)("span",{className:"font-bold",children:[(0,d.formatNumber)(a.quantity).padStart(2,"0"),"x ",(0,d.formatNumber)(e-f)]})]}),f>0&&(0,b.jsxs)("div",{className:"flex justify-between text-[8px] italic text-gray-500 font-bold",children:[(0,b.jsxs)("span",{children:["- DISCOUNT ","percentage"===a.discountType?`(${a.discountPercentage}%)`:""]}),(0,b.jsxs)("span",{children:["-",(0,d.formatNumber)(f)]})]})]},c)})]}),(0,b.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,b.jsxs)("div",{className:"mb-4 space-y-0.5",children:[(0,b.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,b.jsx)("span",{children:"SUBTOTAL:"}),(0,b.jsxs)("span",{children:[x," ",(0,d.formatNumber)(m)]})]}),n>0&&(0,b.jsxs)("div",{className:"flex justify-between font-bold italic opacity-70",children:[(0,b.jsx)("span",{children:"DISCOUNT:"}),(0,b.jsxs)("span",{children:["-",x," ",(0,d.formatNumber)(n)]})]}),p>0&&(0,b.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,b.jsxs)("span",{children:["TAX (",p,"%):"]}),(0,b.jsxs)("span",{children:[x," ",(0,d.formatNumber)(q)]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-black text-[13px] border-t border-black pt-1.5 mt-1",children:[(0,b.jsx)("span",{children:"TOTAL:"}),(0,b.jsxs)("span",{children:[x," ",(0,d.formatNumber)(r)]})]}),"Installment Sale"===a.paymentStatus&&(0,b.jsxs)("div",{className:"mt-2 pt-1 border-t border-gray-200 border-dotted",children:[(0,b.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,b.jsx)("span",{children:"PAID:"}),(0,b.jsxs)("span",{children:[x," ",(0,d.formatNumber)(t)]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-black text-red-600",children:[(0,b.jsx)("span",{children:"DUE:"}),(0,b.jsxs)("span",{children:[x," ",(0,d.formatNumber)(u)]})]})]})]}),(0,b.jsxs)("div",{className:"mb-4 text-[9px] italic opacity-80 border-t border-b border-gray-100 py-1",children:[(0,b.jsx)("span",{className:"font-black not-italic uppercase",children:"Words:"})," ",x," ",(0,f.numberToWords)(r)," only."]}),w&&(0,b.jsxs)("div",{className:"mb-4 text-[9px]",children:[(0,b.jsx)("div",{className:"font-black underline mb-1 uppercase",children:"Payment Channels:"}),v.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()).map((a,c)=>(0,b.jsxs)("div",{className:"mb-1 last:mb-0 font-bold",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("span",{className:"uppercase",children:[a.method,":"]}),(0,b.jsx)("span",{children:a.accountNumber})]}),(0,b.jsx)("div",{className:"text-[8px] opacity-70 italic text-right",children:a.accountName})]},c))]}),a.notes&&(0,b.jsxs)("div",{className:"mb-4 text-[9px] border border-gray-100 p-1 bg-gray-50",children:[(0,b.jsx)("div",{className:"font-black uppercase mb-0.5",children:"Notes:"}),(0,b.jsx)("div",{className:"font-bold opacity-70 whitespace-pre-wrap italic",children:a.notes})]}),(0,b.jsx)("div",{className:"mt-auto pt-6 flex flex-col items-center",children:j.signature?(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("img",{src:j.signature,alt:"Signature",className:"h-10 w-auto object-contain mb-1 mix-blend-multiply opacity-90"}),(0,b.jsx)("div",{className:"w-[80%] border-t border-black border-dashed"}),(0,b.jsx)("div",{className:"text-[8px] font-black uppercase mt-1",children:"Authorized Signature"})]}):(0,b.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-[80%] border-t border-black border-dashed pt-1"}),(0,b.jsx)("div",{className:"text-[8px] font-black uppercase mt-1",children:"Authorized Signature"})]})}),(0,b.jsxs)("div",{className:"text-center mt-6",children:[(0,b.jsx)("div",{className:"text-[10px] font-black mb-1 italic",children:"THANK YOU!"}),(0,b.jsxs)("div",{className:"text-[8px] font-bold opacity-60",children:["GONZA SYSTEMS SUPPORT",(0,b.jsx)("br",{}),"PRINTED AT ",(0,c.format)(new Date,"HH:mm dd/MM/yy")]})]}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-1 overflow-hidden flex",style:{opacity:.2},children:Array.from({length:20}).map((a,c)=>(0,b.jsx)("div",{className:"w-4 h-4 bg-gray-300 transform rotate-45 translate-y-2 translate-x-1"},c))})]})})}])},626109,a=>{"use strict";var b=a.i(187924),c=a.i(814574),d=a.i(625361),e=a.i(572131),f=a.i(699570),g=a.i(53569),h=a.i(580701),i=a.i(640767),j=a.i(925488),k=a.i(256711),l=a.i(771931),m=a.i(284505),n=a.i(596221),o=a.i(368114),p=a.i(505084),q=a.i(866102),r=a.i(206222),s=a.i(770094),t=a.i(835848),u=a.i(418353),v=a.i(823292),w=a.i(209079),x=a.i(965643),y=a.i(790341);let z=({sale:c,currency:d,isMobile:z,includePaymentInfo:A=!0})=>{let B,C,D=(0,e.useRef)(null),E=(0,e.useRef)(null),{settings:F,isLoading:G}=(0,q.useBusinessSettings)(),{payments:H}=(0,w.useInstallmentPayments)(c.id),[I,J]=(0,e.useState)("standard"),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(!1),S=(0,s.useIsMobile)();(0,e.useEffect)(()=>{F.defaultPrintFormat&&J(F.defaultPrintFormat),(async()=>{R(await (0,x.checkBridgeStatus)())})()},[F.defaultPrintFormat]);let T=()=>{switch(c.paymentStatus){case"Quote":return"QUOTATION";case"Paid":return"SALES RECEIPT";default:return"INVOICE"}},U=()=>{switch(c.paymentStatus){case"Quote":return"Quote #:";case"Paid":return"Receipt #:";case"Installment Sale":return"Installment #:";default:return"Invoice #:"}},V=T(),W=U(),X=c.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),Y=c.taxRate||0,Z=Y/100*X,$=X+Z,_=H.reduce((a,b)=>a+b.amount,0),aa="Installment Sale"===c.paymentStatus||"Paid"===c.paymentStatus&&_>0?_:c.amountPaid||$,ab="Installment Sale"===c.paymentStatus?Math.max(0,$-_):c.amountDue||0,ac=(0,r.numberToWords)($),ad=Y>0,ae="Installment Sale"===c.paymentStatus,af=F.paymentInfo?(0,q.parsePaymentInfo)(F.paymentInfo):[],ag=A&&af.length>0&&af.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()),ah=d||F.currency;(0,t.isIOS)(),(0,t.isAndroid)();let ai=new Date(c.date),aj=()=>{let a=new Date(c.date),b=new Date,d=F.paymentInfo?(0,q.parsePaymentInfo)(F.paymentInfo):[],e=A&&d.length>0&&d.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim());return{documentTitle:T(),documentNumberLabel:U(),receiptNumber:c.receiptNumber,date:(0,k.format)(a,"MMM dd, yyyy"),time:(0,k.format)(b,"hh:mm a"),status:c.paymentStatus,businessName:F.businessName,businessAddress:F.businessAddress,businessPhone:F.businessPhone,businessEmail:F.businessEmail,businessLogo:F.businessLogo,signature:F.signature,customerName:c.customerName,customerAddress:c.customerAddress,customerContact:c.customerContact,items:c.items.map(a=>{let b=a.quantity*a.price,c="amount"===a.discountType?a.discountAmount||0:b*(a.discountPercentage||0)/100;return{description:a.description,quantity:a.quantity,unitPrice:a.price,discountPercentage:a.discountPercentage||0,discountAmount:c,discountType:a.discountType||"percentage",amount:b-c}}),subtotal:X,taxRate:Y,taxAmount:Z,totalAmount:$,amountPaid:aa,amountDue:ab,isInstallmentSale:ae,totalAmountInWords:ac,paymentMethods:e?d.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()):void 0,currency:ah,showTaxRow:ad,hasPaymentInfo:e,notes:c.notes}},ak=async()=>{if(D.current){N(!0);try{v.toast.success("Preparing download...");let b="Quote"===c.paymentStatus?"Quote":"Paid"===c.paymentStatus?"Receipt":"Invoice",d="thermal"===I?`${b}_Thermal-${c.receiptNumber}.pdf`:`${b}-${c.receiptNumber}.pdf`;if("standard"===I){let{generateReceiptVectorPDF:b}=await a.A(887913),c=aj();await b(c,{filename:d,orientation:"portrait",format:"a4",margins:{top:20,right:20,bottom:20,left:20}})}else await (0,i.generatePDF)(D.current,d,{isReceipt:!0});v.toast.success("Receipt downloaded successfully!")}catch(a){console.error("Error downloading receipt:",a),v.toast.error("Failed to download receipt. Please try again.")}finally{N(!1)}}},al=async()=>{P(!0);try{let{generateReceiptVectorPDF:b}=await a.A(887913),d=aj(),e=await b(d,{returnBlob:!0});if(!e)return;let f="Quote"===c.paymentStatus?"Quotation":"Paid"===c.paymentStatus?"Receipt":"Invoice",g=`${f}-${c.receiptNumber}.pdf`,h=new File([e],g,{type:"application/pdf"});navigator.canShare&&navigator.canShare({files:[h]})?(await navigator.share({files:[h],title:`${f} - ${c.receiptNumber}`,text:`${f} #${c.receiptNumber}`}),v.toast.success(`${f} shared successfully!`)):v.toast.error("Sharing not supported on this device.")}catch(a){console.error("Error sharing document:",a),v.toast.error("Failed to share document.")}finally{P(!1)}},am=async()=>{let b="thermal"===I?E.current:D.current;if(b){L(!0);try{if("thermal"===I){let a={...c,payments:H||[]},b=await (0,y.generateThermalReceipt)(a,F,ah),{success:d,message:e}=await (0,x.print)(b,F.defaultPrinterName)||{success:!1,message:"Unknown print error"};d?v.toast.success(e):v.toast.error(e);return}if(v.toast.success("Preparing receipt for printing..."),S){let a="Quote"===c.paymentStatus?"Quotation":"Paid"===c.paymentStatus?"Receipt":"Invoice";(0,j.directPrint)(b,a),v.toast.success("Print dialog opened!")}else{let{generateReceiptVectorPDF:b}=await a.A(887913),c=aj(),d=await b(c,{returnBlob:!0});if(d){let a=URL.createObjectURL(d),b=window.open(a,"_blank");b&&b.addEventListener("load",()=>{setTimeout(()=>{b.focus(),b.print(),b.addEventListener("afterprint",()=>b.close())},500)}),setTimeout(()=>URL.revokeObjectURL(a),3e4)}v.toast.success("Print dialog opened!")}}catch(a){console.error("Error printing receipt:",a),v.toast.error(a?.message||"Failed to print receipt. Please try again.")}finally{L(!1)}}};return G?(0,b.jsxs)("div",{className:`bg-white ${z?"p-2":"p-6"} rounded-lg shadow-md`,children:[(0,b.jsx)("div",{className:"mb-4 flex justify-between items-center flex-wrap",children:(0,b.jsx)("h2",{className:`${z?"text-xl":"text-2xl"} font-bold text-sales-primary`,children:V})}),(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading business settings..."})]})})]}):(0,b.jsxs)("div",{className:`bg-white ${z?"p-2":"p-6"} rounded-lg shadow-md`,children:[(0,b.jsxs)("div",{className:"mb-4 flex justify-between items-center flex-wrap",children:[(0,b.jsx)("h2",{className:`${z?"text-xl":"text-2xl"} font-bold text-sales-primary`,children:V}),(0,b.jsxs)("div",{className:"print:hidden flex space-x-2 mt-2 sm:mt-0",children:[!z&&(0,b.jsx)(f.Button,{variant:"default",size:"default",onClick:am,disabled:K||M||O,className:"flex items-center",title:"Print",children:K?(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(l.Printer,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:ak,disabled:K||M||O,className:"flex items-center",title:"Download PDF",children:M?(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(m.Download,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:al,disabled:K||M||O,className:"flex items-center",title:"Share",children:O?(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(g.Share2,{className:"h-4 w-4"})}),z&&(0,b.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:async()=>{let a=navigator.userAgent||"",b=/android/i.test(a),d=!b&&(/iPad|iPhone|iPod/.test(a)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);console.warn("--- MOBILE PRINT START ---"),console.warn("User Agent:",a),console.warn("isAndroid (Direct Check):",b),console.warn("isIOS (Direct Check):",d);let e=`https://ujgxxcgemmfmfsbngnqo.supabase.co/functions/v1/print-receipt?id=${c.id}&${b?"platform=android":d?"platform=ios":"default"}&apikey=`;L(!0);try{console.log("Fetching from:",e);let a=await fetch(e);if(!a.ok){let b=await a.text();throw console.error("Print Function Error:",a.status,b),Error(`Server ${a.status}: ${b||"Bad Request"}`)}let c=await a.json();if(console.log("Data fetched successfully"),b)console.log("Redirecting to Android App using RAW URL..."),window.location.href=`my.bluetoothprint.scheme://${e}`;else if(d){console.log("Redirecting to iOS App (Direct Push)...");let a=encodeURIComponent(JSON.stringify(c));window.location.href=`thermer://print?data=${a}`}else v.toast.error("Mobile printing is optimized for iOS and Android")}catch(a){console.error("Unified Print Error:",a),v.toast.error(a.message||"Failed to prepare receipt")}finally{L(!1),console.warn("--- MOBILE PRINT END ---")}},className:"flex items-center text-blue-600 border-blue-200 hover:bg-blue-50",title:"Print",children:K?(0,b.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(l.Printer,{className:"h-4 w-4"})})]})]})]}),(0,b.jsx)("div",{className:"mb-4 print:hidden",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("label",{htmlFor:"receipt-type",className:"text-sm font-medium",children:"Receipt Format:"}),(0,b.jsxs)(h.Select,{value:I,onValueChange:a=>J(a),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-48",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select receipt type"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"standard",children:"Standard Receipt"}),(0,b.jsx)(h.SelectItem,{value:"thermal",children:"Thermal Receipt"})]})]})]})}),(0,b.jsx)("div",{ref:D,children:"thermal"===I?(0,b.jsx)("div",{ref:E,children:(0,b.jsx)(u.default,{sale:c,currency:ah,includePaymentInfo:A})}):(0,b.jsxs)("div",{className:`border-[1.5px] border-black ${z?"p-3":"p-6"} rounded-md`,children:[(0,b.jsx)("div",{className:"flex flex-col items-center mb-4 gap-2 text-center w-full",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("div",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-1",children:F.businessName?.toUpperCase()}),(0,b.jsx)("div",{className:`${z?"text-xs":"text-sm"} text-gray-600 font-medium`,children:F.businessAddress}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600",children:["Phone: ",F.businessPhone," | Email: ",F.businessEmail]})]})}),(0,b.jsx)(p.Separator,{className:"my-3 sm:my-4 border-black border-t-[1.5px]"}),(0,b.jsx)("div",{className:"text-center mb-4",children:(0,b.jsx)("h1",{className:`font-bold ${z?"text-xl":"text-2xl"} uppercase tracking-wider text-gray-900`,children:"Quote"===c.paymentStatus?"QUOTATION":"Paid"===c.paymentStatus?"SALES RECEIPT":"INVOICE"})}),(0,b.jsxs)("div",{className:"flex justify-between mb-4 sm:mb-6 text-sm flex-wrap gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-semibold",children:[W," ",c.receiptNumber]}),(0,b.jsxs)("div",{children:["Date: ",(0,k.format)(ai,"MMM dd, yyyy")]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("div",{className:"font-semibold",children:c.paymentStatus})})]}),(0,b.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2 text-sm",children:"Customer Information:"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{children:c.customerName}),(0,b.jsx)("div",{children:c.customerAddress}),(0,b.jsx)("div",{children:c.customerContact})]})]}),(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsx)("div",{className:"hidden sm:block",children:(0,b.jsxs)("table",{className:"w-full mb-4 sm:mb-6 text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-black border-b-[1.5px]",children:[(0,b.jsx)("th",{className:"py-2 text-left bg-gray-200 px-2",children:"Description"}),(0,b.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Qty"}),(0,b.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Unit Price"}),(0,b.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Discount"}),(0,b.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Amount"})]})}),(0,b.jsx)("tbody",{children:c.items.map((a,c)=>{let d=a.quantity*a.price,e="amount"===a.discountType?a.discountAmount||0:d*(a.discountPercentage||0)/100;return(0,b.jsxs)("tr",{className:"border-b border-black",children:[(0,b.jsx)("td",{className:"py-2 sm:py-3 break-all whitespace-normal",children:a.description}),(0,b.jsx)("td",{className:"py-2 sm:py-3 text-right",children:(0,o.formatNumber)(a.quantity)}),(0,b.jsxs)("td",{className:"py-2 sm:py-3 text-right",children:[ah," ",(0,o.formatNumber)(a.price)]}),(0,b.jsx)("td",{className:"py-2 sm:py-3 text-right",children:"amount"===a.discountType?a.discountAmount&&a.discountAmount>0?`${ah} ${(0,o.formatNumber)(a.discountAmount)}`:"-":(a.discountPercentage||0)>0?`${a.discountPercentage}%`:"-"}),(0,b.jsxs)("td",{className:"py-2 sm:py-3 text-right",children:[ah," ",(0,o.formatNumber)(d-e)]})]},c)})}),(0,b.jsxs)("tfoot",{children:[(B=c.items.reduce((a,b)=>{let c=b.quantity*b.price;return a+("amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100)},0),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{className:"border-t border-black border-t-[1.5px]",children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:"Subtotal (before discount):"}),(0,b.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(X+B)]})]}),B>0&&(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-orange-100 px-2",children:"Total Discount:"}),(0,b.jsxs)("td",{className:"py-2 text-right bg-orange-100 px-2",children:["-",ah," ",(0,o.formatNumber)(B)]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:"Subtotal:"}),(0,b.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(X)]})]})]})),ad&&(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:["Tax (",Y,"%):"]}),(0,b.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(Z)]})]}),(0,b.jsxs)("tr",{className:"border-t border-black border-t-[1.5px] font-bold",children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 sm:py-3 text-right bg-gray-300 px-2",children:"Total:"}),(0,b.jsxs)("td",{className:"py-2 sm:py-3 text-right bg-gray-300 px-2",children:[ah," ",(0,o.formatNumber)($)]})]}),ae&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-blue-100 px-2",children:"Amount Paid:"}),(0,b.jsxs)("td",{className:"py-2 text-right bg-blue-100 px-2",children:[ah," ",(0,o.formatNumber)(aa)]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-red-100 px-2",children:"Amount Due:"}),(0,b.jsxs)("td",{className:"py-2 text-right bg-red-100 px-2",children:[ah," ",(0,o.formatNumber)(ab)]})]})]}),(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:5,className:"py-2 sm:py-3 text-left border-t border-black px-2 italic",children:[(0,b.jsx)("span",{className:"font-medium",children:"Amount in words:"})," ",ah," ",ac," only"]})})]})]})}),(0,b.jsxs)("div",{className:"block sm:hidden",children:[(0,b.jsx)("div",{className:"border-b-2 border-black mb-2 pb-1 font-bold",children:"Items"}),c.items.map((a,c)=>{let d=a.quantity*a.price,e="amount"===a.discountType?a.discountAmount||0:d*(a.discountPercentage||0)/100;return(0,b.jsxs)("div",{className:"mb-3 border-b border-gray-200 pb-2 last:border-0",children:[(0,b.jsx)("div",{className:"font-bold text-sm mb-1 break-all whitespace-normal",children:a.description}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("div",{className:"text-gray-600",children:[(0,o.formatNumber)(a.quantity)," x ",ah," ",(0,o.formatNumber)(a.price)]}),(0,b.jsxs)("div",{className:"font-bold",children:[ah," ",(0,o.formatNumber)(d-e)]})]}),e>0&&(0,b.jsxs)("div",{className:"flex justify-between text-xs text-orange-600 italic mt-0.5",children:[(0,b.jsxs)("span",{children:["Discount ","percentage"===a.discountType?`(${a.discountPercentage}%)`:""]}),(0,b.jsxs)("span",{children:["-",ah," ",(0,o.formatNumber)(e)]})]})]},c)}),(0,b.jsxs)("div",{className:"mt-4 border-t-2 border-black pt-2 space-y-1",children:[(C=c.items.reduce((a,b)=>{let c=b.quantity*b.price;return a+("amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100)},0),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Subtotal (before disc):"}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(X+C)]})]}),C>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-orange-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Total Discount:"}),(0,b.jsxs)("span",{children:["-",ah," ",(0,o.formatNumber)(C)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Subtotal:"}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(X)]})]})]})),ad&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"font-medium",children:["Tax (",Y,"%):"]}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(Z)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-base font-bold border-t border-black pt-1 mt-1",children:[(0,b.jsx)("span",{children:"Total:"}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)($)]})]}),ae&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-blue-600 pt-1",children:[(0,b.jsx)("span",{className:"font-medium",children:"Amount Paid:"}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(aa)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Amount Due:"}),(0,b.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(ab)]})]})]}),(0,b.jsxs)("div",{className:"pt-2 text-xs italic border-t border-gray-200 mt-2",children:[(0,b.jsx)("span",{className:"font-medium",children:"Words:"})," ",ah," ",ac," only"]})]})]})]}),ag&&(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-black",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm mb-2",children:"Payment Information:"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-200",children:[(0,b.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Payment Method"}),(0,b.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Account Number"}),(0,b.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Account Name"})]})}),(0,b.jsx)("tbody",{children:af.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()).map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-1 px-2 font-medium",children:a.method}),(0,b.jsx)("td",{className:"py-1 px-2",children:a.accountNumber}),(0,b.jsx)("td",{className:"py-1 px-2",children:a.accountName})]},c))})]})})]}),c.notes&&(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-black",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm mb-2",children:"Notes:"}),(0,b.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:c.notes})]}),(0,b.jsxs)("div",{className:"text-center text-xs sm:text-sm mt-4 sm:mt-8",children:[(0,b.jsx)("p",{className:"font-medium",children:"Thank you for your business!"}),(0,b.jsx)("p",{className:"text-gray-600 text-xs mt-3",children:"Created by Gonza Systems"})]})]})})]})};var A=a.i(633508),B=a.i(269876);a.s(["default",0,({isOpen:a,sale:e,currency:f,onOpenChange:g,includePaymentInfo:h=!0})=>(0,s.useIsMobile)()?(0,b.jsx)(d.Drawer,{open:a,onOpenChange:g,children:(0,b.jsx)(d.DrawerContent,{className:"max-h-[85vh]",children:(0,b.jsxs)("div",{className:"relative px-4 py-6 pb-8",children:[(0,b.jsxs)(d.DrawerClose,{className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,b.jsx)(A.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,b.jsx)(B.ScrollArea,{className:"h-[75vh] pr-4 pb-4",children:e&&(0,b.jsx)(z,{sale:e,currency:f,isMobile:!0,includePaymentInfo:h})})]})})}):(0,b.jsx)(c.Dialog,{open:a,onOpenChange:g,children:(0,b.jsx)(c.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:(0,b.jsx)(B.ScrollArea,{className:"h-[80vh] pr-4",children:e&&(0,b.jsx)(z,{sale:e,currency:f,includePaymentInfo:h})})})})],626109)}];

//# sourceMappingURL=_0ee8d65d._.js.map