{"version":3,"sources":["../../../../src/pages/CashAccount.tsx","../../../../src/components/cash/CashTransactionDialog.tsx","../../../../src/components/cash/ViewCashTransactionDialog.tsx","../../../../src/components/cash/CashTransactionsList.tsx","../../../../src/components/cash/DailyCashSummary.tsx","../../../../src/utils/exportCashTransactionsToPDF.ts","../../../../src/components/cash/CashCSVUploadDialog.tsx","../../../../src/utils/exportCashTransactionsToCSV.ts","../../../../src/components/cash/CashTransactionsFilters.tsx","../../../../src/components/cash/BulkTransactionAddTab.tsx","../../../../node_modules/lucide-react/src/icons/move-right.ts","../../../../node_modules/lucide-react/src/icons/calendar-days.ts","../../../../node_modules/lucide-react/src/icons/arrow-right-left.ts","../../../../src/components/cash/EditCashTransactionDialog.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  Filter,\r\n  RotateCw,\r\n  ChevronLeft,\r\n  Eye,\r\n  Pencil,\r\n  Trash2,\r\n  Wallet,\r\n  ArrowUpRight,\r\n  ArrowDownLeft,\r\n  ArrowLeftRight,\r\n  MoreVertical,\r\n  Edit,\r\n  RefreshCw,\r\n  Upload,\r\n  Download,\r\n  ArrowLeft,\r\n  RefreshCcw,\r\n  ArrowDownRight,\r\n  ArrowRightLeft,\r\n  LayoutGrid,\r\n  Zap,\r\n  Loader2\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport CashTransactionDialog from '@/components/cash/CashTransactionDialog';\r\nimport EditCashTransactionDialog from '@/components/cash/EditCashTransactionDialog';\r\nimport ViewCashTransactionDialog from '@/components/cash/ViewCashTransactionDialog';\r\nimport CashAccountDialog from '@/components/cash/CashAccountDialog';\r\nimport CashTransactionsList from '@/components/cash/CashTransactionsList';\r\nimport DailyCashSummary from '@/components/cash/DailyCashSummary';\r\nimport BulkTransactionAddTab from '@/components/cash/BulkTransactionAddTab';\r\nimport CashCSVUploadDialog from '@/components/cash/CashCSVUploadDialog';\r\nimport { generateTransactionCSVTemplate } from '@/utils/csvTemplate';\r\nimport { CashTransactionFormData, CashAccountFormData, CashTransaction } from '@/types/cash';\r\nimport { formatCashAmount, cn } from '@/lib/utils';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle as AlertCircleIcon } from 'lucide-react';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst CashAccount = () => {\r\n  const { accountId } = useParams<{ accountId: string }>();\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const isMobile = useIsMobile();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { accounts, isLoading, updateAccount, refreshAccounts } = useCashAccounts();\r\n  const { transactions, createTransaction, updateTransaction, refreshTransactions, deleteTransaction, getDailySummary } = useCashTransactions(accountId);\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [isTransactionDialogOpen, setIsTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [isBulkTransactionDialogOpen, setIsBulkTransactionDialogOpen] = useState(false);\r\n  const [isCSVUploadDialogOpen, setIsCSVUploadDialogOpen] = useState(false);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditAccountDialogOpen, setIsEditAccountDialogOpen] = useState(false);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [todaysClosingBalance, setTodaysClosingBalance] = useState(0);\r\n  const [isLoadingBalance, setIsLoadingBalance] = useState(true);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n  const [presetTransactionType, setPresetTransactionType] = useState<'cash_in' | 'cash_out' | 'transfer'>('cash_in');\r\n\r\n  const [isSubmittingAccount, setIsSubmittingAccount] = useState(false);\r\n\r\n  const account = accounts.find(acc => acc.id === accountId);\r\n\r\n  // Store the current account ID and URL state in localStorage for navigation persistence\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const currentUrl = window.location.pathname + window.location.search;\r\n      localStorage.setItem('lastVisitedCashAccount', accountId);\r\n      localStorage.setItem('lastVisitedCashAccountUrl', currentUrl);\r\n    }\r\n  }, [accountId, searchParams]);\r\n\r\n  useEffect(() => {\r\n    if (accountId) {\r\n      const loadTodaysBalance = async () => {\r\n        setIsLoadingBalance(true);\r\n        try {\r\n          const summary = await getDailySummary(new Date(), accountId);\r\n          setTodaysClosingBalance(summary.closingBalance);\r\n        } finally {\r\n          setIsLoadingBalance(false);\r\n        }\r\n      };\r\n      loadTodaysBalance();\r\n    }\r\n  }, [accountId, getDailySummary, transactions]);\r\n\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    try {\r\n      await Promise.all([\r\n        refreshAccounts(),\r\n        refreshTransactions()\r\n      ]);\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error refreshing data:', error);\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const handleTransactionDeleted = async () => {\r\n    // Auto-refresh data after deletion\r\n    await Promise.all([\r\n      refreshTransactions(),\r\n      refreshAccounts()\r\n    ]);\r\n\r\n    // Refresh balance\r\n    if (accountId) {\r\n      setIsLoadingBalance(true);\r\n      const summary = await getDailySummary(new Date(), accountId);\r\n      setTodaysClosingBalance(summary.closingBalance);\r\n      setIsLoadingBalance(false);\r\n    }\r\n\r\n    // Force refresh of the DailyCashSummary component\r\n    setRefreshKey(prev => prev + 1);\r\n  };\r\n\r\n  const handleCreateTransaction = async (data: CashTransactionFormData) => {\r\n    try {\r\n      await createTransaction(data);\r\n      setIsTransactionDialogOpen(false);\r\n\r\n      // Auto-refresh data after creating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error creating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditTransaction = (transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleViewTransaction = (transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  };\r\n\r\n  const handleUpdateTransaction = async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Refresh balance\r\n      if (accountId) {\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n\r\n      // Force refresh of the DailyCashSummary component\r\n      setRefreshKey(prev => prev + 1);\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditAccount = async (data: CashAccountFormData) => {\r\n    setIsSubmittingAccount(true);\r\n    try {\r\n      if (accountId) {\r\n        await updateAccount(accountId, data);\r\n        setIsEditAccountDialogOpen(false);\r\n        // Refresh balance in case opening balance was changed\r\n        setIsLoadingBalance(true);\r\n        const summary = await getDailySummary(new Date(), accountId);\r\n        setTodaysClosingBalance(summary.closingBalance);\r\n        setIsLoadingBalance(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating account:', error);\r\n    } finally {\r\n      setIsSubmittingAccount(false);\r\n    }\r\n  };\r\n\r\n  const handleQuickTransaction = (type: 'cash_in' | 'cash_out' | 'transfer') => {\r\n    setPresetTransactionType(type);\r\n    setIsTransactionDialogOpen(true);\r\n  };\r\n\r\n  if (businessLoading || !currentBusiness || isLoading || profilesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <LoadingSpinner message=\"Loading cash account details...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!hasPermission('finance', 'view')) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircleIcon className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to view cash accounts.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/')} variant=\"outline\">\r\n            Back to Dashboard\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const canCreate = hasPermission('finance', 'create');\r\n  const canEdit = hasPermission('finance', 'edit');\r\n\r\n  if (!account) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Account not found</h2>\r\n          <Button onClick={() => navigate('/cash')}>\r\n            Back to Cash Accounts\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4 md:p-0\">\r\n      <CashTransactionDialog\r\n        open={isTransactionDialogOpen}\r\n        onOpenChange={setIsTransactionDialogOpen}\r\n        onSubmit={handleCreateTransaction}\r\n        accounts={accounts}\r\n        defaultAccountId={accountId}\r\n        presetTransactionType={presetTransactionType}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <CashAccountDialog\r\n        open={isEditAccountDialogOpen}\r\n        onOpenChange={setIsEditAccountDialogOpen}\r\n        onSubmit={handleEditAccount}\r\n        title=\"Edit Cash Account\"\r\n        initialData={{\r\n          name: account.name,\r\n          description: account.description || '',\r\n          openingBalance: account.openingBalance,\r\n          isDefault: account.isDefault\r\n        }}\r\n        isSubmitting={isSubmittingAccount}\r\n      />\r\n\r\n      <CashCSVUploadDialog\r\n        open={isCSVUploadDialogOpen}\r\n        onOpenChange={setIsCSVUploadDialogOpen}\r\n        accountId={accountId || ''}\r\n        onUploadComplete={() => {\r\n          setIsCSVUploadDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      <BulkTransactionAddTab\r\n        open={isBulkTransactionDialogOpen}\r\n        onOpenChange={setIsBulkTransactionDialogOpen}\r\n        accountId={accountId || ''}\r\n        onSuccess={() => {\r\n          setIsBulkTransactionDialogOpen(false);\r\n          handleRefresh();\r\n        }}\r\n      />\r\n\r\n      {/* Header Section */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size={isMobile ? \"sm\" : \"sm\"}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              // Clear the stored account when explicitly navigating back\r\n              localStorage.removeItem('lastVisitedCashAccount');\r\n              localStorage.removeItem('lastVisitedCashAccountUrl');\r\n              navigate('/cash');\r\n            }}\r\n            className=\"gap-2 px-2 md:px-3\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            <span className=\"hidden sm:inline\">Back to Cash</span>\r\n            <span className=\"sm:hidden\">Back</span>\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <h1 className=\"text-2xl md:text-3xl font-bold break-words\">{account.name}</h1>\r\n          {account.description && (\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">{account.description}</p>\r\n          )}\r\n          <div className=\"text-lg md:text-xl font-semibold\">\r\n            {isLoadingBalance ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span>Current Balance:</span>\r\n                <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\r\n              </div>\r\n            ) : (\r\n              <span>Current Balance: {canManageFinanceAccounts ? formatCashAmount(todaysClosingBalance, settings.currency || 'USD') : '•••'}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex flex-wrap gap-2 sm:gap-3\">\r\n          {canEdit && (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => setIsEditAccountDialogOpen(true)}\r\n              className=\"gap-2 text-sm\"\r\n              size={isMobile ? \"sm\" : \"default\"}\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              Edit Account\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transaction Center */}\r\n      <Card className=\"border-none shadow-md overflow-hidden bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-950\">\r\n        <div className=\"p-4 sm:p-6 space-y-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <div className=\"space-y-1\">\r\n              <h3 className=\"text-lg font-bold tracking-tight\">Transaction Center</h3>\r\n              <p className=\"text-xs text-muted-foreground\">Manage your account entries efficiently</p>\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <Button\r\n                type=\"button\"\r\n                onClick={handleRefresh}\r\n                disabled={isRefreshing}\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Refresh Data\"\r\n              >\r\n                <RefreshCcw className={cn(\"h-4 w-4\", isRefreshing && \"animate-spin\")} />\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={generateTransactionCSVTemplate}\r\n                className=\"h-9 w-9 rounded-full hover:bg-white dark:hover:bg-slate-800 shadow-sm border\"\r\n                title=\"Download CSV Template\"\r\n              >\r\n                <Download className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n            {/* Primary Action */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsTransactionDialogOpen(true)}\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 text-white shadow-lg border-none active:scale-[0.98] transition-all\",\r\n                canCreate ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-slate-400 cursor-not-allowed opacity-60\"\r\n              )}\r\n            >\r\n              <div className=\"bg-white/20 p-2 rounded-lg\">\r\n                <Plus className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">New Entry</span>\r\n                <span className=\"block text-[10px] opacity-80 font-medium\">Single Transaction</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* Bulk Entry */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsBulkTransactionDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/10 hover:border-indigo-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600 dark:text-indigo-400\">\r\n                <LayoutGrid className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Bulk Entry</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Manual Batch</span>\r\n              </div>\r\n            </Button>\r\n\r\n            {/* CSV Import */}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => setIsCSVUploadDialogOpen(true)}\r\n              variant=\"outline\"\r\n              disabled={!canCreate}\r\n              className={cn(\r\n                \"h-auto py-4 flex flex-col items-center justify-center gap-2 border-slate-200 dark:border-slate-800 shadow-sm col-span-1 sm:col-span-2 lg:col-span-1 active:scale-[0.98] transition-all\",\r\n                canCreate ? \"hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10 hover:border-emerald-200\" : \"opacity-60 cursor-not-allowed\"\r\n              )}\r\n            >\r\n              <div className=\"bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-lg text-emerald-600 dark:text-emerald-400\">\r\n                <Upload className=\"h-5 w-5\" />\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <span className=\"block font-bold\">Import CSV</span>\r\n                <span className=\"block text-[10px] text-muted-foreground font-medium\">Process Legacy Logs</span>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Quick Access Shortcuts */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex items-center gap-2 px-1\">\r\n          <Zap className=\"h-4 w-4 text-amber-500 fill-amber-500\" />\r\n          <h4 className=\"text-sm font-bold uppercase tracking-wider text-slate-500\">Quick Shortcuts</h4>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_in')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-green-100 dark:border-green-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-green-50 dark:hover:bg-green-900/10 hover:border-green-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-green-100 dark:bg-green-900/30 p-1.5 rounded-md text-green-600\">\r\n                <ArrowUpRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-green-700 dark:text-green-400\">Cash In</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-green-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('cash_out')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-red-100 dark:border-red-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-red-50 dark:hover:bg-red-900/10 hover:border-red-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-md text-red-600\">\r\n                <ArrowDownRight className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-red-700 dark:text-red-400\">Cash Out</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-red-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleQuickTransaction('transfer')}\r\n            disabled={!canCreate}\r\n            className={cn(\r\n              \"group justify-between h-12 border-blue-100 dark:border-blue-900/30 transition-all font-semibold\",\r\n              canCreate ? \"hover:bg-blue-50 dark:hover:bg-blue-900/10 hover:border-blue-300\" : \"opacity-60 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-md text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4\" />\r\n              </div>\r\n              <span className=\"text-blue-700 dark:text-blue-400\">Transfer</span>\r\n            </div>\r\n            {canCreate && <Plus className=\"h-3 w-3 text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity\" />}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Daily Summary */}\r\n      <DailyCashSummary key={refreshKey} accountId={accountId} />\r\n\r\n      {/* Transactions List */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">Recent Transactions</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={transactions}\r\n            accountId={accountId}\r\n            showAccountColumn={false}\r\n            onEditTransaction={handleEditTransaction}\r\n            onViewTransaction={handleViewTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashAccount;\r\n","import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface CashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (data: CashTransactionFormData) => void;\r\n  accounts: CashAccount[];\r\n  defaultAccountId?: string;\r\n  presetTransactionType?: 'cash_in' | 'cash_out' | 'transfer';\r\n}\r\n\r\nconst CashTransactionDialog: React.FC<CashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  accounts,\r\n  defaultAccountId,\r\n  presetTransactionType\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>({\r\n    defaultValues: {\r\n      accountId: defaultAccountId || '',\r\n      transactionType: presetTransactionType || 'cash_in',\r\n      category: '',\r\n      description: '',\r\n      personInCharge: '',\r\n      tags: [],\r\n      date: new Date(),\r\n      paymentMethod: '',\r\n      receiptImage: ''\r\n    }\r\n  });\r\n\r\n  const transactionType = watch('transactionType');\r\n  const receiptImage = watch('receiptImage');\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const today = new Date();\r\n      const todayString = today.toISOString().split('T')[0];\r\n\r\n      reset({\r\n        accountId: defaultAccountId || '',\r\n        amount: undefined as any,\r\n        transactionType: presetTransactionType || 'cash_in',\r\n        category: '',\r\n        description: '',\r\n        personInCharge: '',\r\n        tags: [],\r\n        date: today,\r\n        paymentMethod: '',\r\n        receiptImage: ''\r\n      });\r\n\r\n      // Set the preset transaction type if provided\r\n      if (presetTransactionType) {\r\n        setValue('transactionType', presetTransactionType);\r\n      }\r\n\r\n      // Set today's date in the date input with proper string format\r\n      setValue('date', todayString as any);\r\n    }\r\n  }, [open, defaultAccountId, presetTransactionType, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n\r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    console.log('Raw form data:', data);\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Ensure we have a proper date\r\n      let formDate: Date;\r\n      if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else if (typeof data.date === 'string') {\r\n        formDate = new Date(data.date);\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: CashTransactionFormData = {\r\n        accountId: data.accountId,\r\n        amount: Number(data.amount),\r\n        transactionType: data.transactionType,\r\n        toAccountId: data.toAccountId,\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n\r\n      console.log('Processed form data being submitted:', formData);\r\n      await onSubmit(formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>New Transaction</DialogTitle>\r\n          </DialogHeader>\r\n\r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"accountId\">Account</Label>\r\n                <Select\r\n                  value={watch('accountId')}\r\n                  onValueChange={(value) => {\r\n                    setValue('accountId', value);\r\n                    // Focus transaction type after selection\r\n                    setTimeout(() => {\r\n                      const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                      transactionTypeSelect?.focus();\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          const transactionTypeSelect = document.querySelectorAll('[role=\"combobox\"]')[1] as HTMLElement;\r\n                          transactionTypeSelect?.focus();\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue placeholder=\"Select account\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {accounts.map((account) => (\r\n                      <SelectItem key={account.id} value={account.id}>\r\n                        {account.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n                {errors.accountId && (\r\n                  <p className=\"text-sm text-red-600\">{errors.accountId.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Select\r\n                  value={transactionType}\r\n                  onValueChange={(value) => {\r\n                    setValue('transactionType', value as 'cash_in' | 'cash_out' | 'transfer');\r\n                    // Focus next field after selection\r\n                    setTimeout(() => {\r\n                      if (value === 'transfer') {\r\n                        const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                        toAccountSelect?.focus();\r\n                      } else {\r\n                        document.getElementById('amount')?.focus();\r\n                      }\r\n                    }, 100);\r\n                  }}\r\n                >\r\n                  <SelectTrigger\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        e.preventDefault();\r\n                        setTimeout(() => {\r\n                          if (transactionType === 'transfer') {\r\n                            const toAccountSelect = document.querySelectorAll('[role=\"combobox\"]')[2] as HTMLElement;\r\n                            toAccountSelect?.focus();\r\n                          } else {\r\n                            document.getElementById('amount')?.focus();\r\n                          }\r\n                        }, 100);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {transactionType === 'transfer' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"toAccountId\">To Account</Label>\r\n                  <Select\r\n                    value={watch('toAccountId') || ''}\r\n                    onValueChange={(value) => {\r\n                      setValue('toAccountId', value);\r\n                      // Focus amount after selection\r\n                      setTimeout(() => {\r\n                        document.getElementById('amount')?.focus();\r\n                      }, 100);\r\n                    }}\r\n                  >\r\n                    <SelectTrigger\r\n                      onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          e.preventDefault();\r\n                          setTimeout(() => {\r\n                            document.getElementById('amount')?.focus();\r\n                          }, 100);\r\n                        }\r\n                      }}\r\n                    >\r\n                      <SelectValue placeholder=\"Select destination account\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {accounts\r\n                        .filter(account => account.id !== watch('accountId'))\r\n                        .map((account) => (\r\n                          <SelectItem key={account.id} value={account.id}>\r\n                            {account.name}\r\n                          </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  {...register('amount', {\r\n                    required: 'Amount is required',\r\n                    min: { value: 0.01, message: 'Amount must be greater than 0' }\r\n                  })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('category')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"0.00\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('description')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      document.getElementById('personInCharge')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('paymentMethod')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      document.getElementById('date')?.focus();\r\n                    }\r\n                  }}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {receiptImage && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(receiptImage) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img\r\n                          src={receiptImage}\r\n                          alt=\"Receipt preview\"\r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"date\">Date</Label>\r\n                <Input\r\n                  id=\"date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      e.preventDefault();\r\n                      const submitButton = document.querySelector('button[type=\"submit\"]') as HTMLElement;\r\n                      submitButton?.focus();\r\n                    }\r\n                  }}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Creating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Create Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {receiptImage && !isReceiptPDF(receiptImage) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={receiptImage}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CashTransactionDialog;\r\n","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { \r\n  Drawer, \r\n  DrawerContent,\r\n  DrawerClose,\r\n  DrawerHeader,\r\n  DrawerTitle\r\n} from '@/components/ui/drawer';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { X, Eye } from 'lucide-react';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\n\r\ninterface ViewCashTransactionDialogProps {\r\n  transaction: CashTransaction | null;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst ViewCashTransactionDialog: React.FC<ViewCashTransactionDialogProps> = ({\r\n  transaction,\r\n  open,\r\n  onOpenChange\r\n}) => {\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const { settings } = useBusinessSettings();\r\n\r\n  if (!transaction) return null;\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    const currency = settings?.currency || 'USD';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency,\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in': return 'Cash In';\r\n      case 'cash_out': return 'Cash Out';\r\n      case 'transfer_in': return 'Transfer In';\r\n      case 'transfer_out': return 'Transfer Out';\r\n      default: return type;\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const content = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Date</label>\r\n          <p className=\"text-sm\">{transaction.date.toLocaleDateString()}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Amount</label>\r\n          <p className={`text-lg font-semibold ${\r\n            transaction.transactionType === 'cash_in' || transaction.transactionType === 'transfer_in' \r\n              ? 'text-green-600' \r\n              : 'text-red-600'\r\n          }`}>\r\n            {formatCurrency(transaction.amount)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Transaction Type</label>\r\n        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n          {getTransactionTypeLabel(transaction.transactionType)}\r\n        </Badge>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Description</label>\r\n        <p className=\"text-sm\">{transaction.description}</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Category</label>\r\n          <p className=\"text-sm\">{transaction.category || 'Not specified'}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Payment Method</label>\r\n          <p className=\"text-sm\">{transaction.paymentMethod || 'Not specified'}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium text-muted-foreground\">Person in Charge</label>\r\n        <p className=\"text-sm\">{transaction.personInCharge || 'Not specified'}</p>\r\n      </div>\r\n\r\n      {transaction.tags && transaction.tags.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Tags</label>\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {transaction.tags.map((tag, index) => (\r\n              <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                {tag}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {transaction.receiptImage && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-muted-foreground\">Receipt</label>\r\n          <div className=\"relative\">\r\n            <img \r\n              src={transaction.receiptImage} \r\n              alt=\"Receipt\" \r\n              className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n              onClick={() => setImageViewerOpen(true)}\r\n            >\r\n              <Eye className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <>\r\n        <Drawer open={open} onOpenChange={onOpenChange}>\r\n          <DrawerContent className=\"max-h-[85vh]\">\r\n            <div className=\"relative px-4 py-6 pb-8\">\r\n              <DrawerClose className=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring\">\r\n                <X className=\"h-4 w-4\" />\r\n                <span className=\"sr-only\">Close</span>\r\n              </DrawerClose>\r\n              <DrawerHeader className=\"px-0 pb-4\">\r\n                <DrawerTitle className=\"text-lg\">Transaction Details</DrawerTitle>\r\n              </DrawerHeader>\r\n              <ScrollArea className=\"h-[calc(85vh-120px)] pr-4\">\r\n                {content}\r\n              </ScrollArea>\r\n            </div>\r\n          </DrawerContent>\r\n        </Drawer>\r\n\r\n        {transaction.receiptImage && (\r\n          <ImageViewer\r\n            isOpen={imageViewerOpen}\r\n            onOpenChange={setImageViewerOpen}\r\n            imageUrl={transaction.receiptImage}\r\n            imageAlt=\"Receipt image\"\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className=\"sm:max-w-[600px] max-h-[90vh]\">\r\n          <DialogHeader>\r\n            <DialogTitle>Transaction Details</DialogTitle>\r\n          </DialogHeader>\r\n          <ScrollArea className=\"max-h-[70vh] pr-4\">\r\n            {content}\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {transaction.receiptImage && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={transaction.receiptImage}\r\n          imageAlt=\"Receipt image\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ViewCashTransactionDialog;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format } from 'date-fns';\r\nimport { Edit, Eye, Trash2, FileText, FileSpreadsheet } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { exportCashTransactionsToPDF } from '@/utils/exportCashTransactionsToPDF';\r\nimport { exportCashTransactionsToCSV } from '@/utils/exportCashTransactionsToCSV';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport CashTransactionsFilters from './CashTransactionsFilters';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface CashTransactionsListProps {\r\n  transactions: CashTransaction[];\r\n  accountId?: string | null;\r\n  showAccountColumn?: boolean;\r\n  onEditTransaction?: (transaction: CashTransaction) => void;\r\n  onViewTransaction?: (transaction: CashTransaction) => void;\r\n  onTransactionDeleted?: () => void;\r\n}\r\n\r\nconst CashTransactionsList: React.FC<CashTransactionsListProps> = ({\r\n  transactions,\r\n  accountId,\r\n  showAccountColumn = true,\r\n  onEditTransaction,\r\n  onViewTransaction,\r\n  onTransactionDeleted\r\n}) => {\r\n  const { deleteTransaction, transactions: allTransactions } = useCashTransactions(accountId || undefined);\r\n  const { accounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const { hasPermission } = useProfiles();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n  const isMobile = useIsMobile();\r\n\r\n  const canEdit = hasPermission('finance', 'edit');\r\n  const canDelete = hasPermission('finance', 'delete');\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params\r\n  const [searchTerm, setSearchTerm] = useState(() => searchParams.get('search') || '');\r\n  const [transactionTypeFilter, setTransactionTypeFilter] = useState(() => searchParams.get('type') || 'all');\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const search = searchParams.get('search') || '';\r\n    const type = searchParams.get('type') || 'all';\r\n\r\n    setSearchTerm(search);\r\n    setTransactionTypeFilter(type);\r\n  }, [searchParams]);\r\n\r\n  // Functions to update both state and URL\r\n  const updateSearchTerm = (value: string) => {\r\n    setSearchTerm(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value) {\r\n      newParams.set('search', value);\r\n    } else {\r\n      newParams.delete('search');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateTransactionTypeFilter = (value: string) => {\r\n    setTransactionTypeFilter(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value && value !== 'all') {\r\n      newParams.set('type', value);\r\n    } else {\r\n      newParams.delete('type');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  };\r\n\r\n  const getAccountName = (accountId: string | null) => {\r\n    if (!accountId) return 'Unknown Account';\r\n    const account = accounts.find(acc => acc.id === accountId);\r\n    return account?.name || 'Unknown Account';\r\n  };\r\n\r\n  // Filter transactions based on search term and transaction type\r\n  const filteredTransactions = transactions.filter(transaction => {\r\n    const matchesSearch =\r\n      transaction.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (transaction.category && transaction.category.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      (transaction.personInCharge && transaction.personInCharge.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n      getAccountName(transaction.accountId).toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesType = transactionTypeFilter === 'all' || transaction.transactionType === transactionTypeFilter;\r\n\r\n    return matchesSearch && matchesType;\r\n  });\r\n\r\n  // Pagination logic - show 50 transactions per page\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const transactionsPerPage = 50;\r\n  const totalPages = Math.ceil(filteredTransactions.length / transactionsPerPage);\r\n\r\n  const startIndex = (currentPage - 1) * transactionsPerPage;\r\n  const endIndex = startIndex + transactionsPerPage;\r\n  const paginatedTransactions = filteredTransactions.slice(startIndex, endIndex);\r\n\r\n  // Reset to page 1 when filters change\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, transactionTypeFilter]);\r\n\r\n\r\n  // Calculate opening balance for PDF export using the same logic as DailyCashSummary\r\n  const calculateOpeningBalanceForExport = (exportTransactions: CashTransaction[], targetAccountId?: string) => {\r\n    if (exportTransactions.length === 0) return 0;\r\n\r\n    // Get the earliest transaction date in the export set\r\n    const earliestDate = exportTransactions.reduce((earliest, transaction) => {\r\n      return transaction.date < earliest ? transaction.date : earliest;\r\n    }, exportTransactions[0].date);\r\n\r\n    // Calculate the day before the earliest transaction\r\n    const dayBeforeEarliest = new Date(earliestDate);\r\n    dayBeforeEarliest.setDate(dayBeforeEarliest.getDate() - 1);\r\n    const dayBeforeEarliestStr = dayBeforeEarliest.toISOString().split('T')[0];\r\n\r\n    // Get all transactions up to the day before the earliest transaction\r\n    let transactionsBeforeRange = allTransactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeEarliestStr\r\n    );\r\n\r\n    // Filter by account if specified\r\n    if (targetAccountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === targetAccountId);\r\n    }\r\n\r\n    // Calculate cash flow up to the day before\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    // Get account's initial opening balance\r\n    let accountOpeningBalance = 0;\r\n    if (targetAccountId) {\r\n      const account = accounts.find(acc => acc.id === targetAccountId);\r\n      accountOpeningBalance = account?.openingBalance || 0;\r\n    }\r\n\r\n    // Calculate opening balance: initial balance + net cash flow up to day before\r\n    return accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n  };\r\n\r\n  // Calculate the date range from filtered transactions\r\n  const getDateRangeFromTransactions = (transactions: CashTransaction[]) => {\r\n    if (transactions.length === 0) return undefined;\r\n\r\n    const dates = transactions.map(t => t.date);\r\n    const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n    const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n\r\n    return { from: earliestDate, to: latestDate };\r\n  };\r\n\r\n  // ... keep existing code (getTransactionTypeColor, getTransactionTypeLabel, getAmountColor functions)\r\n\r\n  const getTransactionTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'bg-green-100 text-green-800 border-green-200';\r\n      case 'cash_out':\r\n        return 'bg-red-100 text-red-800 border-red-200';\r\n      case 'transfer_in':\r\n        return 'bg-blue-100 text-blue-800 border-blue-200';\r\n      case 'transfer_out':\r\n        return 'bg-orange-100 text-orange-800 border-orange-200';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getTransactionTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  const getAmountColor = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n      case 'transfer_in':\r\n        return 'text-green-600 font-semibold';\r\n      case 'cash_out':\r\n      case 'transfer_out':\r\n        return 'text-red-600 font-semibold';\r\n      default:\r\n        return 'font-semibold';\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    setDeletingId(id);\r\n    try {\r\n      const success = await deleteTransaction(id);\r\n      if (success && onTransactionDeleted) {\r\n        onTransactionDeleted();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting transaction:', error);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let accountName = '';\r\n\r\n      if (accountId) {\r\n        const account = accounts.find(acc => acc.id === accountId);\r\n        accountName = account?.name || '';\r\n      }\r\n\r\n      // Calculate the correct opening balance using the same logic as DailyCashSummary\r\n      const calculatedOpeningBalance = calculateOpeningBalanceForExport(filteredTransactions, accountId || undefined);\r\n\r\n      // Get the date range from filtered transactions\r\n      const dateRange = getDateRangeFromTransactions(filteredTransactions);\r\n\r\n      exportCashTransactionsToPDF(\r\n        filteredTransactions,\r\n        getAccountName,\r\n        formatCurrency,\r\n        accountName,\r\n        calculatedOpeningBalance, // Use calculated opening balance instead of account's initial balance\r\n        settings.currency || 'USD',\r\n        dateRange, // Pass the actual date range from transactions\r\n        {\r\n          businessName: settings.businessName || 'Your Business Name',\r\n          businessAddress: settings.businessAddress || 'Your Business Address',\r\n          businessPhone: settings.businessPhone || '(123) 456-7890',\r\n          businessEmail: settings.businessEmail || 'support@yourbusiness.com'\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.error('Error exporting PDF:', error);\r\n      alert('Failed to export PDF. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    if (filteredTransactions.length === 0) {\r\n      alert('No transactions to export');\r\n      return;\r\n    }\r\n\r\n    exportCashTransactionsToCSV(filteredTransactions, getAccountName, formatCurrency);\r\n  };\r\n\r\n  if (transactions.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        <p>No transactions found.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Filters */}\r\n      <CashTransactionsFilters\r\n        searchTerm={searchTerm}\r\n        onSearchChange={updateSearchTerm}\r\n        transactionTypeFilter={transactionTypeFilter}\r\n        onTransactionTypeFilterChange={updateTransactionTypeFilter}\r\n        onExportCSV={handleExportCSV}\r\n        onExportPDF={handleExportPDF}\r\n        totalTransactions={filteredTransactions.length}\r\n      />\r\n\r\n      {filteredTransactions.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <p>No transactions found matching your filters.</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Results Summary */}\r\n          <div className=\"flex justify-between items-center text-sm text-muted-foreground\">\r\n            <span>\r\n              Showing {startIndex + 1}-{Math.min(endIndex, filteredTransactions.length)} of {filteredTransactions.length} transactions\r\n            </span>\r\n            {totalPages > 1 && (\r\n              <span>\r\n                Page {currentPage} of {totalPages}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {isMobile ? (\r\n            /* Mobile Transaction Cards */\r\n            <div className=\"space-y-4\">\r\n              {paginatedTransactions.map((transaction) => (\r\n                <div key={transaction.id} className=\"bg-white rounded-lg border p-4 space-y-3\">\r\n                  {/* Header */}\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"font-medium text-sm\">{transaction.description}</div>\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                        {transaction.personInCharge && ` • ${transaction.personInCharge}`}\r\n                      </div>\r\n                    </div>\r\n                    <Badge className={`text-xs ${getTransactionTypeColor(transaction.transactionType)}`}>\r\n                      {getTransactionTypeLabel(transaction.transactionType)}\r\n                    </Badge>\r\n                  </div>\r\n\r\n                  {/* Amount */}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className={`text-lg ${getAmountColor(transaction.transactionType)}`}>\r\n                      {canManageFinanceAccounts ? formatCurrency(transaction.amount) : '•••'}\r\n                    </span>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-1\">\r\n                      {onViewTransaction && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onViewTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {onEditTransaction && canEdit && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => onEditTransaction(transaction)}\r\n                          className=\"h-8 w-8 p-0\"\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      )}\r\n                      {canDelete && (\r\n                        <AlertDialog>\r\n                          <AlertDialogTrigger asChild>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                              disabled={deletingId === transaction.id}\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </AlertDialogTrigger>\r\n                          <AlertDialogContent>\r\n                            <AlertDialogHeader>\r\n                              <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                              <AlertDialogDescription>\r\n                                Are you sure you want to delete this transaction? This action cannot be undone.\r\n                              </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                              <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                              <AlertDialogAction\r\n                                onClick={() => handleDelete(transaction.id)}\r\n                                className=\"bg-red-600 hover:bg-red-700\"\r\n                              >\r\n                                Delete\r\n                              </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                          </AlertDialogContent>\r\n                        </AlertDialog>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Additional Info */}\r\n                  <div className=\"space-y-1 text-sm text-gray-600\">\r\n                    {showAccountColumn && (\r\n                      <div>Account: {getAccountName(transaction.accountId)}</div>\r\n                    )}\r\n                    {transaction.category && (\r\n                      <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200\">\r\n                        <span className=\"text-blue-800 font-medium\">Category: {transaction.category}</span>\r\n                      </div>\r\n                    )}\r\n                    {transaction.paymentMethod && (\r\n                      <div>Payment: {transaction.paymentMethod}</div>\r\n                    )}\r\n                    {transaction.tags && transaction.tags.length > 0 && (\r\n                      <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                        {transaction.tags.map((tag, index) => (\r\n                          <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                            {tag}\r\n                          </Badge>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            /* Desktop Table */\r\n            <div className=\"rounded-md border\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Date</TableHead>\r\n                    <TableHead>Description</TableHead>\r\n                    <TableHead>Type</TableHead>\r\n                    <TableHead className=\"text-right\">Amount</TableHead>\r\n                    <TableHead>Category</TableHead>\r\n                    {showAccountColumn && <TableHead>Account</TableHead>}\r\n                    <TableHead>Person in Charge</TableHead>\r\n                    <TableHead>Payment Method</TableHead>\r\n                    <TableHead>Tags</TableHead>\r\n                    <TableHead className=\"text-right\">Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {paginatedTransactions.map((transaction) => (\r\n                    <TableRow key={transaction.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        {format(transaction.date, 'MMM d, yyyy')}\r\n                      </TableCell>\r\n                      <TableCell>{transaction.description}</TableCell>\r\n                      <TableCell>\r\n                        <Badge className={getTransactionTypeColor(transaction.transactionType)}>\r\n                          {getTransactionTypeLabel(transaction.transactionType)}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className={`text-right ${getAmountColor(transaction.transactionType)}`}>\r\n                        {canManageFinanceAccounts ? formatCurrency(transaction.amount) : '•••'}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {transaction.category ? (\r\n                          <div className=\"bg-blue-50 px-2 py-1 rounded-md border border-blue-200 inline-block\">\r\n                            <span className=\"text-blue-800 font-medium\">{transaction.category}</span>\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      {showAccountColumn && (\r\n                        <TableCell>{getAccountName(transaction.accountId)}</TableCell>\r\n                      )}\r\n                      <TableCell>{transaction.personInCharge || '-'}</TableCell>\r\n                      <TableCell>{transaction.paymentMethod || '-'}</TableCell>\r\n                      <TableCell>\r\n                        {transaction.tags && transaction.tags.length > 0 ? (\r\n                          <div className=\"flex flex-wrap gap-1\">\r\n                            {transaction.tags.map((tag, index) => (\r\n                              <Badge key={index} variant=\"secondary\" className=\"text-xs\">\r\n                                {tag}\r\n                              </Badge>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          '-'\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex gap-1 justify-end\">\r\n                          {onViewTransaction && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onViewTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {onEditTransaction && hasPermission('finance', 'edit') && (\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => onEditTransaction(transaction)}\r\n                              className=\"h-8 w-8 p-0\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('finance', 'delete') && (\r\n                            <AlertDialog>\r\n                              <AlertDialogTrigger asChild>\r\n                                <Button\r\n                                  variant=\"ghost\"\r\n                                  size=\"sm\"\r\n                                  className=\"h-8 w-8 p-0 text-red-600 hover:text-red-700\"\r\n                                  disabled={deletingId === transaction.id}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </AlertDialogTrigger>\r\n                              <AlertDialogContent>\r\n                                <AlertDialogHeader>\r\n                                  <AlertDialogTitle>Delete Transaction</AlertDialogTitle>\r\n                                  <AlertDialogDescription>\r\n                                    Are you sure you want to delete this transaction? This action cannot be undone.\r\n                                  </AlertDialogDescription>\r\n                                </AlertDialogHeader>\r\n                                <AlertDialogFooter>\r\n                                  <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                  <AlertDialogAction\r\n                                    onClick={() => handleDelete(transaction.id)}\r\n                                    className=\"bg-red-600 hover:bg-red-700\"\r\n                                  >\r\n                                    Delete\r\n                                  </AlertDialogAction>\r\n                                </AlertDialogFooter>\r\n                              </AlertDialogContent>\r\n                            </AlertDialog>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pagination Controls */}\r\n          {totalPages > 1 && (\r\n            <div className=\"flex justify-center items-center space-x-2 mt-6\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Previous\r\n              </Button>\r\n\r\n              <div className=\"flex space-x-1\">\r\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                  let pageNum;\r\n                  if (totalPages <= 5) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage <= 3) {\r\n                    pageNum = i + 1;\r\n                  } else if (currentPage >= totalPages - 2) {\r\n                    pageNum = totalPages - 4 + i;\r\n                  } else {\r\n                    pageNum = currentPage - 2 + i;\r\n                  }\r\n\r\n                  return (\r\n                    <Button\r\n                      key={pageNum}\r\n                      variant={currentPage === pageNum ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(pageNum)}\r\n                      className=\"w-8 h-8 p-0\"\r\n                    >\r\n                      {pageNum}\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Next\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsList;\r\n","\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { format, startOfWeek, endOfWeek, startOfMonth, endOfMonth, subDays, addDays } from 'date-fns';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { CalendarDays, TrendingUp, TrendingDown, ArrowRightLeft } from 'lucide-react';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { DailyCashSummary as DailyCashSummaryType, CashTransaction, CashTransactionFormData } from '@/types/cash';\r\nimport CashTransactionsList from './CashTransactionsList';\r\nimport ViewCashTransactionDialog from './ViewCashTransactionDialog';\r\nimport EditCashTransactionDialog from './EditCashTransactionDialog';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { formatCashAmount } from '@/lib/utils';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\n\r\ninterface DailyCashSummaryProps {\r\n  accountId?: string;\r\n}\r\n\r\ntype PeriodType = 'daily' | 'weekly' | 'monthly' | 'custom';\r\n\r\nconst DailyCashSummary: React.FC<DailyCashSummaryProps> = ({ accountId }) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  // Initialize filters from URL params with fallbacks\r\n  const [periodType, setPeriodType] = useState<PeriodType>(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    return paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod) ? paramPeriod : 'daily';\r\n  });\r\n\r\n  const [selectedDate, setSelectedDate] = useState(() => {\r\n    const paramDate = searchParams.get('summaryDate');\r\n    return paramDate ? new Date(paramDate) : new Date();\r\n  });\r\n\r\n  const [customStartDate, setCustomStartDate] = useState(() => {\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    return paramStartDate ? new Date(paramStartDate) : new Date();\r\n  });\r\n\r\n  const [customEndDate, setCustomEndDate] = useState(() => {\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n    return paramEndDate ? new Date(paramEndDate) : new Date();\r\n  });\r\n\r\n  // Update filters when URL changes (navigation back/forward)\r\n  useEffect(() => {\r\n    const paramPeriod = searchParams.get('summaryPeriod') as PeriodType;\r\n    const paramDate = searchParams.get('summaryDate');\r\n    const paramStartDate = searchParams.get('summaryStartDate');\r\n    const paramEndDate = searchParams.get('summaryEndDate');\r\n\r\n    if (paramPeriod && ['daily', 'weekly', 'monthly', 'custom'].includes(paramPeriod)) {\r\n      setPeriodType(paramPeriod);\r\n    } else {\r\n      setPeriodType('daily');\r\n    }\r\n\r\n    if (paramDate) {\r\n      setSelectedDate(new Date(paramDate));\r\n    }\r\n\r\n    if (paramStartDate) {\r\n      setCustomStartDate(new Date(paramStartDate));\r\n    }\r\n\r\n    if (paramEndDate) {\r\n      setCustomEndDate(new Date(paramEndDate));\r\n    }\r\n  }, [searchParams]);\r\n  const [isViewTransactionDialogOpen, setIsViewTransactionDialogOpen] = useState(false);\r\n  const [isEditTransactionDialogOpen, setIsEditTransactionDialogOpen] = useState(false);\r\n  const [viewingTransaction, setViewingTransaction] = useState<CashTransaction | null>(null);\r\n  const [editingTransaction, setEditingTransaction] = useState<CashTransaction | null>(null);\r\n  const [summary, setSummary] = useState<DailyCashSummaryType>({\r\n    date: new Date(),\r\n    openingBalance: 0,\r\n    cashIn: 0,\r\n    cashOut: 0,\r\n    transfersIn: 0,\r\n    transfersOut: 0,\r\n    closingBalance: 0\r\n  });\r\n\r\n  // Use optimized hooks with better caching\r\n  const { getDailySummary, getDateRangeSummary, transactions, updateTransaction, refreshTransactions } = useCashTransactions(accountId);\r\n  const { accounts, refreshAccounts } = useCashAccounts();\r\n  const { settings } = useBusinessSettings();\r\n  const isMobile = useIsMobile();\r\n  const { canManageFinanceAccounts } = useFinancialVisibility();\r\n\r\n  // Memoize currency formatter\r\n  const formatCurrency = useCallback((amount: number) => {\r\n    return formatCashAmount(amount, settings.currency || 'USD');\r\n  }, [settings.currency]);\r\n\r\n\r\n  // Functions to update both state and URL\r\n  const updatePeriodType = (value: PeriodType) => {\r\n    setPeriodType(value);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    if (value !== 'daily') {\r\n      newParams.set('summaryPeriod', value);\r\n    } else {\r\n      newParams.delete('summaryPeriod');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateSelectedDate = (date: Date) => {\r\n    setSelectedDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    const dateStr = format(date, 'yyyy-MM-dd');\r\n    const todayStr = format(new Date(), 'yyyy-MM-dd');\r\n    if (dateStr !== todayStr) {\r\n      newParams.set('summaryDate', dateStr);\r\n    } else {\r\n      newParams.delete('summaryDate');\r\n    }\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomStartDate = (date: Date) => {\r\n    setCustomStartDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryStartDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  const updateCustomEndDate = (date: Date) => {\r\n    setCustomEndDate(date);\r\n    const newParams = new URLSearchParams(searchParams);\r\n    newParams.set('summaryPeriod', 'custom');\r\n    newParams.set('summaryEndDate', format(date, 'yyyy-MM-dd'));\r\n    setSearchParams(newParams);\r\n  };\r\n\r\n  // Memoized handlers for better performance\r\n  const handleDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateSelectedDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomStartDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomStartDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const handleCustomEndDateChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateCustomEndDate(new Date(e.target.value));\r\n  }, []);\r\n\r\n  const goToToday = useCallback(() => {\r\n    const today = new Date();\r\n    updateSelectedDate(today);\r\n    updateCustomStartDate(today);\r\n    updateCustomEndDate(today);\r\n  }, []);\r\n\r\n  // Memoize date range calculation\r\n  const getDateRange = useMemo(() => {\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return {\r\n          start: startOfWeek(selectedDate, { weekStartsOn: 1 }),\r\n          end: endOfWeek(selectedDate, { weekStartsOn: 1 })\r\n        };\r\n      case 'monthly':\r\n        return {\r\n          start: startOfMonth(selectedDate),\r\n          end: endOfMonth(selectedDate)\r\n        };\r\n      case 'custom':\r\n        return {\r\n          start: customStartDate,\r\n          end: customEndDate\r\n        };\r\n      default:\r\n        return {\r\n          start: selectedDate,\r\n          end: selectedDate\r\n        };\r\n    }\r\n  }, [periodType, selectedDate, customStartDate, customEndDate]);\r\n\r\n  // Function to reload summary data\r\n  const reloadSummary = useCallback(async () => {\r\n    try {\r\n      let summaryData: DailyCashSummaryType;\r\n\r\n      if (periodType === 'daily') {\r\n        summaryData = await getDailySummary(selectedDate, accountId);\r\n      } else {\r\n        const { start, end } = getDateRange;\r\n        summaryData = await getDateRangeSummary(start, end, accountId);\r\n      }\r\n\r\n      setSummary(summaryData);\r\n    } catch (error) {\r\n      console.error('Error loading summary:', error);\r\n    }\r\n  }, [periodType, selectedDate, getDateRange, accountId, getDailySummary, getDateRangeSummary]);\r\n\r\n  // Optimized summary loading with debouncing to prevent excessive calls\r\n  useEffect(() => {\r\n    let timeoutId: NodeJS.Timeout;\r\n\r\n    const loadSummary = async () => {\r\n      await reloadSummary();\r\n    };\r\n\r\n    // Debounce the summary loading to prevent excessive calls\r\n    timeoutId = setTimeout(loadSummary, 100);\r\n\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [reloadSummary, transactions]);\r\n\r\n  // Memoize filtered transactions for better performance\r\n  const getFilteredTransactions = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    const startDateStr = start.toISOString().split('T')[0];\r\n    const endDateStr = end.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    return filteredTransactions;\r\n  }, [transactions, getDateRange, accountId]);\r\n\r\n  const handleViewTransaction = useCallback((transaction: CashTransaction) => {\r\n    setViewingTransaction(transaction);\r\n    setIsViewTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleEditTransaction = useCallback((transaction: CashTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setIsEditTransactionDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleUpdateTransaction = useCallback(async (id: string, data: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      await updateTransaction(id, data);\r\n      setIsEditTransactionDialogOpen(false);\r\n      setEditingTransaction(null);\r\n\r\n      // Auto-refresh data after updating transaction\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes\r\n      await reloadSummary();\r\n    } catch (error) {\r\n      console.error('Error updating transaction:', error);\r\n    }\r\n  }, [updateTransaction, refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  // Enhanced transaction deleted handler with automatic refresh\r\n  const handleTransactionDeleted = useCallback(async () => {\r\n    try {\r\n      // Refresh both transactions and accounts data\r\n      await Promise.all([\r\n        refreshTransactions(),\r\n        refreshAccounts()\r\n      ]);\r\n\r\n      // Reload summary to reflect changes instantly\r\n      await reloadSummary();\r\n\r\n      console.log('Successfully refreshed data after transaction deletion');\r\n    } catch (error) {\r\n      console.error('Error refreshing data after transaction deletion:', error);\r\n    }\r\n  }, [refreshTransactions, refreshAccounts, reloadSummary]);\r\n\r\n  const periodTransactions = getFilteredTransactions;\r\n\r\n  // Memoize period label\r\n  const getPeriodLabel = useMemo(() => {\r\n    const { start, end } = getDateRange;\r\n    switch (periodType) {\r\n      case 'weekly':\r\n        return `Week of ${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      case 'monthly':\r\n        return format(selectedDate, 'MMMM yyyy');\r\n      case 'custom':\r\n        return `${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`;\r\n      default:\r\n        return format(selectedDate, 'MMMM d, yyyy');\r\n    }\r\n  }, [getDateRange, periodType, selectedDate]);\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6\">\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <div className=\"space-y-4\">\r\n            <CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\r\n              <CalendarDays className=\"h-5 w-5\" />\r\n              <span className=\"break-words\">Cash Summary</span>\r\n            </CardTitle>\r\n\r\n            {/* Mobile-optimized period label */}\r\n            <div className=\"text-sm md:text-base font-medium text-muted-foreground\">\r\n              {getPeriodLabel}\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"space-y-3\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\r\n                <div className=\"space-y-1\">\r\n                  <Label htmlFor=\"period\" className=\"text-xs font-medium\">Period</Label>\r\n                  <Select value={periodType} onValueChange={updatePeriodType}>\r\n                    <SelectTrigger className=\"h-9 text-sm\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"daily\">Daily</SelectItem>\r\n                      <SelectItem value=\"weekly\">Weekly</SelectItem>\r\n                      <SelectItem value=\"monthly\">Monthly</SelectItem>\r\n                      <SelectItem value=\"custom\">Custom Range</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n\r\n                {periodType === 'custom' ? (\r\n                  <>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"startDate\" className=\"text-xs font-medium\">Start Date</Label>\r\n                      <Input\r\n                        id=\"startDate\"\r\n                        type=\"date\"\r\n                        value={format(customStartDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomStartDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"endDate\" className=\"text-xs font-medium\">End Date</Label>\r\n                      <Input\r\n                        id=\"endDate\"\r\n                        type=\"date\"\r\n                        value={format(customEndDate, 'yyyy-MM-dd')}\r\n                        onChange={handleCustomEndDateChange}\r\n                        className=\"h-9 text-sm\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"space-y-1\">\r\n                    <Label htmlFor=\"date\" className=\"text-xs font-medium\">Date</Label>\r\n                    <Input\r\n                      id=\"date\"\r\n                      type=\"date\"\r\n                      value={format(selectedDate, 'yyyy-MM-dd')}\r\n                      onChange={handleDateChange}\r\n                      className=\"h-9 text-sm\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-end\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={goToToday}\r\n                    className=\"h-9 text-sm\"\r\n                  >\r\n                    Today\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Summary Grid - Changed to single column on mobile */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 md:gap-4\">\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-muted/50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Opening</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.openingBalance) : '•••'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-green-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-green-600\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-green-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashIn) : '•••'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-red-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-red-600\">\r\n                <TrendingDown className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Cash Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-red-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.cashOut) : '•••'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-blue-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-blue-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer In</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-blue-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersIn) : '•••'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-orange-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-orange-600\">\r\n                <ArrowRightLeft className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Transfer Out</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold text-orange-600 break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.transfersOut) : '•••'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 p-5 md:p-6 bg-slate-50 rounded-lg\">\r\n              <div className=\"flex items-center gap-2 text-xs md:text-sm text-muted-foreground\">\r\n                <TrendingUp className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                <span className=\"font-medium\">Closing</span>\r\n              </div>\r\n              <div className=\"text-lg md:text-xl font-semibold break-all leading-tight\">\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance) : '•••'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Net Change */}\r\n          <div className=\"pt-3 md:pt-4 border-t\">\r\n            <div className=\"text-sm md:text-base text-muted-foreground\">\r\n              Net Change:\r\n              <span className={`ml-1 font-semibold break-all ${summary.closingBalance - summary.openingBalance >= 0\r\n                ? 'text-green-600'\r\n                : 'text-red-600'\r\n                }`}>\r\n                {canManageFinanceAccounts ? formatCurrency(summary.closingBalance - summary.openingBalance) : '•••'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Transactions Table for Selected Period with Pagination */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3 md:pb-6\">\r\n          <CardTitle className=\"text-lg md:text-xl\">\r\n            <span className=\"break-words\">Transactions</span>\r\n            <span className=\"text-sm font-normal text-muted-foreground ml-2\">\r\n              ({periodTransactions.length} transaction{periodTransactions.length !== 1 ? 's' : ''})\r\n            </span>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"px-3 md:px-6\">\r\n          <CashTransactionsList\r\n            transactions={periodTransactions}\r\n            accountId={accountId}\r\n            showAccountColumn={!accountId}\r\n            onViewTransaction={handleViewTransaction}\r\n            onEditTransaction={handleEditTransaction}\r\n            onTransactionDeleted={handleTransactionDeleted}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ViewCashTransactionDialog\r\n        open={isViewTransactionDialogOpen}\r\n        onOpenChange={setIsViewTransactionDialogOpen}\r\n        transaction={viewingTransaction}\r\n      />\r\n\r\n      <EditCashTransactionDialog\r\n        open={isEditTransactionDialogOpen}\r\n        onOpenChange={setIsEditTransactionDialogOpen}\r\n        onSubmit={handleUpdateTransaction}\r\n        transaction={editingTransaction}\r\n        accounts={accounts}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyCashSummary;\r\n","\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport const exportCashTransactionsToPDF = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  accountName?: string,\r\n  openingBalance: number = 0,\r\n  currency: string = 'USD',\r\n  dateRange?: { from: Date | undefined; to: Date | undefined },\r\n  businessSettings?: {\r\n    businessName: string;\r\n    businessAddress: string;\r\n    businessPhone: string;\r\n    businessEmail: string;\r\n  }\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  // Sort transactions chronologically (latest first) for display\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = b.date.getTime() - a.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time (latest first)\r\n    return b.createdAt.getTime() - a.createdAt.getTime();\r\n  });\r\n\r\n  // For balance calculation, we need to sort chronologically (oldest first)\r\n  const chronologicalTransactions = [...transactions].sort((a, b) => {\r\n    const dateComparison = a.date.getTime() - b.date.getTime();\r\n    if (dateComparison !== 0) return dateComparison;\r\n    // If dates are the same, sort by creation time\r\n    return a.createdAt.getTime() - b.createdAt.getTime();\r\n  });\r\n\r\n  // Calculate totals\r\n  const totalCashIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalCashOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'cash_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  const totalTransferIn = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_in')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n  \r\n  const totalTransferOut = chronologicalTransactions\r\n    .filter(t => t.transactionType === 'transfer_out')\r\n    .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n  // Calculate running balance for each transaction based on chronological order\r\n  let runningBalance = openingBalance;\r\n  const balanceMap = new Map<string, number>();\r\n  \r\n  chronologicalTransactions.forEach(transaction => {\r\n    if (transaction.transactionType === 'cash_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'cash_out') {\r\n      runningBalance -= transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_in') {\r\n      runningBalance += transaction.amount;\r\n    } else if (transaction.transactionType === 'transfer_out') {\r\n      runningBalance -= transaction.amount;\r\n    }\r\n    balanceMap.set(transaction.id, runningBalance);\r\n  });\r\n\r\n  // Helper function to format transaction type for display\r\n  const formatTransactionType = (type: string) => {\r\n    switch (type) {\r\n      case 'cash_in':\r\n        return 'Cash In';\r\n      case 'cash_out':\r\n        return 'Cash Out';\r\n      case 'transfer_in':\r\n        return 'Transfer In';\r\n      case 'transfer_out':\r\n        return 'Transfer Out';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n\r\n  // Prepare display data with correct balances for sorted (latest first) transactions\r\n  const transactionsWithBalance = sortedTransactions.map(transaction => {\r\n    return { \r\n      ...transaction, \r\n      balance: balanceMap.get(transaction.id) || 0,\r\n      formattedType: formatTransactionType(transaction.transactionType)\r\n    };\r\n  });\r\n\r\n  const accountBalance = runningBalance;\r\n\r\n  // Create new PDF document in portrait orientation\r\n  const pdf = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n    compress: true\r\n  });\r\n\r\n  const pageWidth = pdf.internal.pageSize.getWidth();\r\n  const pageHeight = pdf.internal.pageSize.getHeight();\r\n  const margins = { top: 15, right: 15, bottom: 15, left: 15 };\r\n  const contentWidth = pageWidth - margins.left - margins.right;\r\n  \r\n  let currentY = margins.top;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.setTextColor(150, 150, 150); // Light gray color\r\n    pdf.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    pdf.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  // Table setup with new column widths for portrait format including Amount\r\n  const colWidths = [30, 55, 35, 30, 30]; // Date, Description, Transaction Type, Amount, Balance\r\n  const rowHeight = 8;\r\n  const headerHeight = 10;\r\n\r\n  // Table headers\r\n  const headers = [\r\n    'Date',\r\n    'Description',\r\n    'Transaction Type',\r\n    'Amount',\r\n    'Balance'\r\n  ];\r\n\r\n  // Function to draw table headers\r\n  const drawTableHeaders = () => {\r\n    // Draw header background\r\n    pdf.setFillColor(243, 244, 246);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight, 'F');\r\n\r\n    // Draw header borders\r\n    pdf.setLineWidth(0.3);\r\n    pdf.rect(margins.left, currentY - 2, contentWidth, headerHeight);\r\n\r\n    // Header text\r\n    pdf.setFontSize(11);\r\n    pdf.setFont('helvetica', 'bold');\r\n    let currentX = margins.left;\r\n    \r\n    headers.forEach((header, index) => {\r\n      const colWidth = colWidths[index];\r\n      const textWidth = pdf.getTextWidth(header);\r\n      const textX = currentX + (colWidth - textWidth) / 2;\r\n      pdf.text(header, textX, currentY + 6);\r\n      \r\n      if (index < headers.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 2, currentX + colWidth, currentY + headerHeight - 2);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += headerHeight;\r\n  };\r\n\r\n  // Helper function to check if we need a new page\r\n  const checkPageBreak = (neededHeight: number) => {\r\n    if (currentY + neededHeight > pageHeight - margins.bottom - 15) { // Reserve space for watermark\r\n      addWatermark(); // Add watermark to current page before creating new one\r\n      pdf.addPage();\r\n      currentY = margins.top;\r\n      drawTableHeaders(); // Add headers to new page\r\n      // Reset font to normal after drawing headers on new page\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.setFontSize(9);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Header section with business details on left and title on right\r\n  const headerStartY = currentY;\r\n  \r\n  // Business details on the left\r\n  if (businessSettings) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(businessSettings.businessName, margins.left, currentY);\r\n    currentY += 6;\r\n    \r\n    pdf.setFontSize(9);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(businessSettings.businessAddress, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessPhone, margins.left, currentY);\r\n    currentY += 5;\r\n    pdf.text(businessSettings.businessEmail, margins.left, currentY);\r\n  }\r\n  \r\n  // Reset currentY to header start for right-aligned content\r\n  currentY = headerStartY;\r\n  \r\n  // Title on the right\r\n  pdf.setFontSize(18);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const title = `Cash Transactions Report (${currency})`;\r\n  const titleWidth = pdf.getTextWidth(title);\r\n  pdf.text(title, pageWidth - margins.right - titleWidth, currentY);\r\n  currentY += 8;\r\n\r\n  // Account name if provided - right aligned under title\r\n  if (accountName) {\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const accountText = accountName;\r\n    const accountTextWidth = pdf.getTextWidth(accountText);\r\n    pdf.text(accountText, pageWidth - margins.right - accountTextWidth, currentY);\r\n    currentY += 6;\r\n  }\r\n\r\n  // Date range display - right aligned under title/account\r\n  if (dateRange?.from && dateRange?.to) {\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const fromDate = format(dateRange.from, 'dd/MM/yyyy');\r\n    const toDate = format(dateRange.to, 'dd/MM/yyyy');\r\n    \r\n    const dateText = fromDate === toDate ? fromDate : `${fromDate} - ${toDate}`;\r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  } else {\r\n    // If no date range is provided, determine from transaction dates or use today's date\r\n    pdf.setFontSize(12);\r\n    pdf.setFont('helvetica', 'normal');\r\n    \r\n    let dateText: string;\r\n    if (transactions.length > 0) {\r\n      // Find the earliest and latest transaction dates\r\n      const dates = transactions.map(t => t.date);\r\n      const earliestDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n      const latestDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n      \r\n      const fromDateStr = format(earliestDate, 'dd/MM/yyyy');\r\n      const toDateStr = format(latestDate, 'dd/MM/yyyy');\r\n      \r\n      dateText = fromDateStr === toDateStr ? fromDateStr : `${fromDateStr} - ${toDateStr}`;\r\n    } else {\r\n      // Fallback to current date if no transactions\r\n      dateText = format(new Date(), 'dd/MM/yyyy');\r\n    }\r\n    \r\n    const dateWidth = pdf.getTextWidth(dateText);\r\n    pdf.text(dateText, pageWidth - margins.right - dateWidth, currentY);\r\n    currentY += 12;\r\n  }\r\n  \r\n  // Ensure we have enough space for both sections\r\n  currentY = Math.max(currentY, headerStartY + 25);\r\n\r\n  // Draw initial table headers\r\n  checkPageBreak(headerHeight + 10);\r\n  drawTableHeaders();\r\n\r\n  // Table data\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.setFontSize(9);\r\n\r\n  // Number formatter without currency symbol\r\n  const numberFormatter = new Intl.NumberFormat('en-US', {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  });\r\n\r\n  transactionsWithBalance.forEach((transaction, index) => {\r\n    checkPageBreak(rowHeight + 5);\r\n\r\n    // Format amount with negative sign for cash out and transfer out (no currency symbol)\r\n    const isNegativeTransaction = transaction.transactionType === 'cash_out' || transaction.transactionType === 'transfer_out';\r\n    const displayAmount = isNegativeTransaction ? -transaction.amount : transaction.amount;\r\n\r\n    const rowData = [\r\n      format(transaction.date, 'dd/MM/yyyy'),\r\n      transaction.description,\r\n      transaction.formattedType,\r\n      numberFormatter.format(displayAmount),\r\n      numberFormatter.format(transaction.balance)\r\n    ];\r\n\r\n    // Draw row background (alternating)\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(249, 250, 251);\r\n      pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight, 'F');\r\n    }\r\n\r\n    // Draw row borders\r\n    pdf.setLineWidth(0.1);\r\n    pdf.rect(margins.left, currentY - 1, contentWidth, rowHeight);\r\n\r\n    let currentX = margins.left;\r\n    \r\n    rowData.forEach((data, colIndex) => {\r\n      const colWidth = colWidths[colIndex];\r\n      let text = data;\r\n      \r\n      // For description column, allow truncation but for other columns, ensure full display\r\n      if (colIndex === 1) { // Description column\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && text.length > 3) {\r\n          text = text.substring(0, text.length - 4) + '...';\r\n        }\r\n      } else if (colIndex === 3 || colIndex === 4) { // Amount and Balance columns\r\n        // Use smaller font if needed to fit full amount\r\n        let fontSize = 9;\r\n        pdf.setFontSize(fontSize);\r\n        while (pdf.getTextWidth(text) > colWidth - 4 && fontSize > 6) {\r\n          fontSize -= 0.5;\r\n          pdf.setFontSize(fontSize);\r\n        }\r\n      }\r\n      \r\n      let textX = currentX + 2;\r\n      \r\n      // Right align amount and balance columns\r\n      if (colIndex === 3 || colIndex === 4) {\r\n        const textWidth = pdf.getTextWidth(text);\r\n        textX = currentX + colWidth - textWidth - 2;\r\n      }\r\n      \r\n      // Set all text to black color\r\n      pdf.setTextColor(0, 0, 0);\r\n      \r\n      pdf.text(text, textX, currentY + 5);\r\n      \r\n      // Reset font size\r\n      pdf.setFontSize(9);\r\n      \r\n      if (colIndex < rowData.length - 1) {\r\n        pdf.line(currentX + colWidth, currentY - 1, currentX + colWidth, currentY + rowHeight - 1);\r\n      }\r\n      \r\n      currentX += colWidth;\r\n    });\r\n\r\n    currentY += rowHeight;\r\n  });\r\n\r\n  // Summary section\r\n  currentY += 10;\r\n  checkPageBreak(35);\r\n\r\n  // Summary title\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Summary', margins.left, currentY);\r\n  currentY += 8;\r\n\r\n  // Draw summary box\r\n  const summaryBoxHeight = 30;\r\n  const summaryBoxWidth = contentWidth * 0.9;\r\n  \r\n  pdf.setFillColor(248, 249, 250);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight, 'F');\r\n  pdf.setLineWidth(0.3);\r\n  pdf.setDrawColor(200, 200, 200);\r\n  pdf.rect(margins.left, currentY - 3, summaryBoxWidth, summaryBoxHeight);\r\n\r\n  // Summary data in columns without currency symbols\r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  const leftColumn = [\r\n    ['Opening Balance:', numberFormatter.format(openingBalance)],\r\n    ['Total Cash In:', numberFormatter.format(totalCashIn)],\r\n    ['Total Cash Out:', numberFormatter.format(totalCashOut)],\r\n    ['Final Balance:', numberFormatter.format(accountBalance)]\r\n  ];\r\n\r\n  const rightColumn = [\r\n    ['Total Transfer In:', numberFormatter.format(totalTransferIn)],\r\n    ['Total Transfer Out:', numberFormatter.format(totalTransferOut)]\r\n  ];\r\n\r\n  let summaryY = currentY + 3;\r\n  const leftColumnX = margins.left + 10;\r\n  const rightColumnX = margins.left + summaryBoxWidth / 2 + 10;\r\n\r\n  // Draw left column\r\n  leftColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, leftColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, leftColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Reset Y for right column\r\n  summaryY = currentY + 3;\r\n\r\n  // Draw right column\r\n  rightColumn.forEach(([label, value]) => {\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(label, rightColumnX, summaryY);\r\n    pdf.setFont('helvetica', 'normal');\r\n    const labelWidth = pdf.getTextWidth(label);\r\n    pdf.text(value, rightColumnX + labelWidth + 5, summaryY);\r\n    summaryY += 6;\r\n  });\r\n\r\n  // Add watermark to the final page\r\n  addWatermark();\r\n\r\n  // Generate filename based on report date range\r\n  let filename: string;\r\n  const accountPrefix = accountName ? accountName.replace(/[^a-z0-9]/gi, '-').toLowerCase() + '-' : '';\r\n  \r\n  if (dateRange?.from && dateRange?.to) {\r\n    const fromDate = format(dateRange.from, 'yyyy-MM-dd');\r\n    const toDate = format(dateRange.to, 'yyyy-MM-dd');\r\n    \r\n    if (fromDate === toDate) {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}.pdf`;\r\n    } else {\r\n      filename = `cash-transactions-${accountPrefix}${fromDate}_to_${toDate}.pdf`;\r\n    }\r\n  } else {\r\n    // Fallback to current date if no range provided\r\n    filename = `cash-transactions-${accountPrefix}${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n  }\r\n\r\n  pdf.save(filename);\r\n};\r\n","import React, { useState, useRef, useMemo } from 'react';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Upload, FileText, AlertCircle, CheckCircle, Download, Info, MoveRight } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { parseTransactionCSV, generateErrorLogCSV, ValidationError, CSVTransactionRow, validateTransactionCSVRow } from '@/utils/csvParser';\r\nimport { CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\n\r\ninterface CashCSVUploadDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onUploadComplete: () => void;\r\n}\r\n\r\ninterface UploadState {\r\n    step: 'select' | 'preview' | 'uploading' | 'complete';\r\n    file: File | null;\r\n    validRows: CSVTransactionRow[];\r\n    errors: ValidationError[];\r\n    totalRows: number;\r\n    uploadProgress: number;\r\n    successCount: number;\r\n    failureCount: number;\r\n    currentTransactionIndex: number;\r\n}\r\n\r\nconst CashCSVUploadDialog: React.FC<CashCSVUploadDialogProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onUploadComplete\r\n}) => {\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const { accounts } = useCashAccounts();\r\n    const [state, setState] = useState<UploadState>({\r\n        step: 'select',\r\n        file: null,\r\n        validRows: [],\r\n        errors: [],\r\n        totalRows: 0,\r\n        uploadProgress: 0,\r\n        successCount: 0,\r\n        failureCount: 0,\r\n        currentTransactionIndex: 0\r\n    });\r\n\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const convertCSVRowToTransaction = (row: CSVTransactionRow): CashTransactionFormData => {\r\n        let transactionDate = new Date();\r\n\r\n        const rawDate = row['Date'] as any;\r\n        const dateValue = rawDate?.toString();\r\n        if (dateValue) {\r\n            // Support raw Date objects from SheetJS {cellDates: true}\r\n            if (rawDate instanceof Date) {\r\n                transactionDate = rawDate;\r\n            } else {\r\n                // Support DD/MM/YYYY, D/M/YYYY, DD-MM-YYYY\r\n                const ddmmyyyyMatch = dateValue.match(/^(\\d{1,2})[/-](\\d{1,2})[/-](\\d{4})$/);\r\n                if (ddmmyyyyMatch) {\r\n                    const [, day, month, year] = ddmmyyyyMatch;\r\n                    transactionDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\r\n                } else {\r\n                    const parsedDate = new Date(dateValue);\r\n                    if (!isNaN(parsedDate.getTime())) {\r\n                        transactionDate = parsedDate;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // If something went wrong with the date, use today but ensure it's a valid object\r\n        if (isNaN(transactionDate.getTime())) {\r\n            transactionDate = new Date();\r\n        }\r\n\r\n        let toAccountId = '';\r\n        if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n            const targetAccount = accounts?.find(a =>\r\n                a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n            );\r\n            if (targetAccount) {\r\n                toAccountId = targetAccount.id;\r\n            }\r\n        }\r\n\r\n        return {\r\n            accountId: accountId || '',\r\n            amount: parseFloat(row['Amount']?.toString().replace(/[^0-9.-]/g, '') || '0'),\r\n            transactionType: (row['Type']?.toLowerCase() || 'cash_in') as 'cash_in' | 'cash_out' | 'transfer',\r\n            toAccountId,\r\n            category: row['Category'] || 'Other',\r\n            description: row['Description'] || '',\r\n            paymentMethod: row['Payment Method'] || 'Cash',\r\n            personInCharge: row['Person In Charge'] || '',\r\n            tags: [],\r\n            date: transactionDate,\r\n            receiptImage: ''\r\n        };\r\n    };\r\n\r\n    const handleFileSelect = async (file: File) => {\r\n        const isExcel = file.name.endsWith('.xlsx') || file.name.endsWith('.xls');\r\n        const isCSV = file.name.endsWith('.csv');\r\n\r\n        if (!isExcel && !isCSV) {\r\n            alert('Please select a CSV or Excel file');\r\n            return;\r\n        }\r\n\r\n        let result: { validRows: CSVTransactionRow[], errors: ValidationError[], totalRows: number };\r\n\r\n        if (isExcel) {\r\n            const buffer = await file.arrayBuffer();\r\n            const workbook = XLSX.read(buffer, { cellDates: true });\r\n            const firstSheetName = workbook.SheetNames[0];\r\n            const worksheet = workbook.Sheets[firstSheetName];\r\n\r\n            // Use SheetJS to get clean objects directly\r\n            const rawRows = XLSX.utils.sheet_to_json(worksheet) as any[];\r\n\r\n            // Map keys back to expected format if they differ slightly\r\n            const csvRows: CSVTransactionRow[] = rawRows.map(row => ({\r\n                'Date': row['Date'] || '',\r\n                'Type': row['Type'] || '',\r\n                'Amount': row['Amount'] || '',\r\n                'Description': row['Description'] || '',\r\n                'Category': row['Category'] || '',\r\n                'Payment Method': row['Payment Method'] || '',\r\n                'Person In Charge': row['Person In Charge'] || '',\r\n                'To Account': row['To Account'] || ''\r\n            }));\r\n\r\n            // Crucially: run the SAME validation as CSV\r\n            const validRows: CSVTransactionRow[] = [];\r\n            const errors: ValidationError[] = [];\r\n\r\n            csvRows.forEach((row, index) => {\r\n                const rowErrors = validateTransactionCSVRow(row, index + 2);\r\n\r\n                // Add specific validation for account matching if it's a transfer\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        rowErrors.push({\r\n                            row: index + 2,\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found or is the current account.`\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (rowErrors.length === 0) {\r\n                    validRows.push(row);\r\n                } else {\r\n                    errors.push(...rowErrors);\r\n                }\r\n            });\r\n\r\n            result = {\r\n                validRows,\r\n                errors,\r\n                totalRows: csvRows.length\r\n            };\r\n        } else {\r\n            const text = await file.text();\r\n            result = parseTransactionCSV(text);\r\n\r\n            // Post-process CSV results for account matching\r\n            const accountErrors: ValidationError[] = [];\r\n            const filteredValidRows: CSVTransactionRow[] = [];\r\n\r\n            result.validRows.forEach((row, index) => {\r\n                if (row['Type']?.toLowerCase() === 'transfer' && row['To Account']) {\r\n                    const match = accounts?.find(a =>\r\n                        a.name.toLowerCase() === row['To Account']?.toString().toLowerCase() && a.id !== accountId\r\n                    );\r\n                    if (!match) {\r\n                        accountErrors.push({\r\n                            row: index + 2, // This might be slightly off for CSV if index is non-sequential, but usually okay\r\n                            field: 'To Account',\r\n                            message: `Account \"${row['To Account']}\" not found.`\r\n                        });\r\n                    } else {\r\n                        filteredValidRows.push(row);\r\n                    }\r\n                } else {\r\n                    filteredValidRows.push(row);\r\n                }\r\n            });\r\n\r\n            result.errors.push(...accountErrors);\r\n            result.validRows = filteredValidRows;\r\n        }\r\n\r\n        setState({\r\n            ...state,\r\n            step: 'preview',\r\n            file,\r\n            validRows: result.validRows,\r\n            errors: result.errors,\r\n            totalRows: result.totalRows\r\n        });\r\n    };\r\n\r\n    const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n\r\n        const file = e.dataTransfer.files[0];\r\n        if (file) {\r\n            handleFileSelect(file);\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n\r\n    const handleConfirmUpload = async () => {\r\n        setState(prev => ({ ...prev, step: 'uploading', uploadProgress: 0, currentTransactionIndex: 0 }));\r\n        setIsUploading(true);\r\n\r\n        const transactions = state.validRows.map(convertCSVRowToTransaction);\r\n\r\n        try {\r\n            await createBulkTransactions(transactions);\r\n\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: transactions.length,\r\n                failureCount: 0,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } catch (error) {\r\n            console.error('Bulk upload failed:', error);\r\n            setState(prev => ({\r\n                ...prev,\r\n                step: 'complete',\r\n                uploadProgress: 100,\r\n                successCount: 0,\r\n                failureCount: transactions.length,\r\n                currentTransactionIndex: transactions.length\r\n            }));\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        if (isUploading) return;\r\n\r\n        const wasSuccessfulUpload = state.step === 'complete' && state.successCount > 0;\r\n\r\n        setState({\r\n            step: 'select',\r\n            file: null,\r\n            validRows: [],\r\n            errors: [],\r\n            totalRows: 0,\r\n            uploadProgress: 0,\r\n            successCount: 0,\r\n            failureCount: 0,\r\n            currentTransactionIndex: 0\r\n        });\r\n\r\n        onOpenChange(false);\r\n\r\n        if (wasSuccessfulUpload) {\r\n            onUploadComplete();\r\n        }\r\n    };\r\n\r\n    const renderFileSelection = () => (\r\n        <div className=\"space-y-6\">\r\n            <div\r\n                className={cn(\r\n                    \"border-4 border-dashed rounded-2xl p-10 text-center cursor-pointer transition-all duration-300\",\r\n                    isDragging\r\n                        ? \"border-blue-500 bg-blue-50/50 scale-[1.01] shadow-lg\"\r\n                        : \"border-slate-200 dark:border-slate-800 hover:border-blue-400 hover:bg-slate-50/50 dark:hover:bg-slate-900/50\"\r\n                )}\r\n                onDrop={handleDrop}\r\n                onDragOver={handleDragOver}\r\n                onDragLeave={handleDragLeave}\r\n                onClick={() => fileInputRef.current?.click()}\r\n            >\r\n                <div className=\"bg-blue-100 dark:bg-blue-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-slow\">\r\n                    <Upload className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\r\n                </div>\r\n                <p className=\"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2\">\r\n                    Click or Drag File to Upload\r\n                </p>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 max-w-xs mx-auto mb-6\">\r\n                    Select your transaction data file. **CSV** and **Excel (.xlsx, .xls)** files are supported for bulk processing.\r\n                </p>\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">Multi-Format Support</span>\r\n                    <div className=\"h-1 w-8 bg-slate-200 dark:bg-slate-800 rounded-full\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"border rounded-xl overflow-hidden bg-white dark:bg-slate-900 shadow-sm\">\r\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 px-4 py-2 border-b flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Info className=\"h-4 w-4 text-blue-500\" />\r\n                        <span className=\"text-xs font-bold text-slate-700 dark:text-slate-300\">DATA FORMAT GUIDE</span>\r\n                    </div>\r\n                    <span className=\"text-[10px] text-slate-400 font-medium\">Headers are required</span>\r\n                </div>\r\n                <div className=\"overflow-x-auto p-0\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"bg-slate-100/30 dark:bg-slate-900/30\">\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Date</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Type</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Amount</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Description</TableHead>\r\n                                <TableHead className=\"text-[10px] uppercase h-8 py-0\">Category</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            <TableRow className=\"h-8 py-0\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">22/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-green-600 font-semibold italic\">cash_in</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">1500.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Product Sale #44</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Sales</TableCell>\r\n                            </TableRow>\r\n                            <TableRow className=\"h-8 py-0 border-none\">\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-600 font-mono\">21/12/2025</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-red-600 font-semibold italic\">cash_out</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 text-slate-800 font-bold\">450.00</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1 truncate max-w-[80px]\">Office Supplies</TableCell>\r\n                                <TableCell className=\"text-[11px] py-1\">Expenses</TableCell>\r\n                            </TableRow>\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n                <div className=\"p-3 bg-blue-50/30 dark:bg-blue-900/10 text-[10px] text-blue-600 dark:text-blue-400 leading-relaxed border-t italic\">\r\n                    <strong>Note:</strong> Allowed types are: <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_in</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">cash_out</code>, <code className=\"bg-blue-100 dark:bg-blue-900/30 px-1 rounded mx-0.5\">transfer</code>\r\n                </div>\r\n            </div>\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n                onChange={handleFileInputChange}\r\n                className=\"hidden\"\r\n            />\r\n        </div>\r\n    );\r\n\r\n    const renderPreview = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                    <FileText className=\"h-5 w-5 text-blue-600\" />\r\n                    <div>\r\n                        <span className=\"text-sm font-bold text-slate-900 dark:text-slate-100\">{state.file?.name}</span>\r\n                        <p className=\"text-[10px] text-slate-500\">File attached and analyzed</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                    <Card className=\"shadow-none bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-emerald-600 dark:text-emerald-400\">{state.validRows.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-emerald-700 dark:text-emerald-500 uppercase\">Valid Rows</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-rose-50/50 dark:bg-rose-900/10 border-rose-100 dark:border-rose-900/30 overflow-hidden\">\r\n                        <CardContent className=\"p-4\">\r\n                            <div className=\"text-2xl font-black text-rose-600 dark:text-rose-400\">{state.errors.length}</div>\r\n                            <p className=\"text-[10px] font-bold text-rose-700 dark:text-rose-500 uppercase\">Invalid</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card className=\"shadow-none bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30 overflow-hidden text-center\">\r\n                        <CardContent className=\"p-4 flex flex-col items-center justify-center\">\r\n                            <div className=\"text-sm font-black text-blue-600 dark:text-blue-400 flex items-center gap-1\">\r\n                                {Math.round((state.validRows.length / state.totalRows) * 100) || 0}%\r\n                                <MoveRight className=\"h-3 w-3\" />\r\n                            </div>\r\n                            <p className=\"text-[10px] font-bold text-blue-700 dark:text-blue-500 uppercase\">Integrity</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n\r\n            {state.errors.length > 0 && (\r\n                <Alert variant=\"destructive\" className=\"bg-rose-50/50 dark:bg-rose-900/10 border-rose-200 dark:border-rose-900\">\r\n                    <AlertCircle className=\"h-4 w-4 text-rose-600\" />\r\n                    <AlertDescription className=\"text-xs text-rose-700 dark:text-rose-400 leading-relaxed font-medium\">\r\n                        Found {state.errors.length} rows with errors that will be skipped during the process.\r\n                        <Button\r\n                            variant=\"link\"\r\n                            className=\"p-0 h-auto ml-2 text-rose-700 dark:text-rose-400 underline font-bold\"\r\n                            onClick={() => generateErrorLogCSV(state.errors, 'transaction_upload_errors.csv')}\r\n                        >\r\n                            <Download className=\"h-3 w-3 mr-1 inline\" />\r\n                            View Error Details\r\n                        </Button>\r\n                    </AlertDescription>\r\n                </Alert>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    className=\"flex-1 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                    onClick={() => setState(prev => ({ ...prev, step: 'select' }))}\r\n                >\r\n                    Choose Different File\r\n                </Button>\r\n                <Button\r\n                    className=\"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md font-bold transition-all active:scale-[0.98]\"\r\n                    onClick={handleConfirmUpload}\r\n                    disabled={state.validRows.length === 0}\r\n                >\r\n                    Proceed with {state.validRows.length} Records\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderUploading = () => (\r\n        <div className=\"space-y-8 py-4\">\r\n            <div className=\"text-center space-y-2\">\r\n                <div className=\"relative w-20 h-20 mx-auto\">\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-slate-100 dark:border-slate-800\" />\r\n                    <div className=\"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin\" />\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <Upload className=\"h-8 w-8 text-blue-500/50\" />\r\n                    </div>\r\n                </div>\r\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-slate-200\">Processing Data...</h3>\r\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 italic\">This will only take a few moments</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-2 px-4 text-center\">\r\n                <Progress value={state.uploadProgress} className=\"h-2 w-full bg-slate-100 dark:bg-slate-800\" />\r\n                <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">{Math.round(state.uploadProgress)}% Complete</span>\r\n            </div>\r\n\r\n            <Alert className=\"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-800\">\r\n                <Info className=\"h-4 w-4 text-slate-400\" />\r\n                <AlertDescription className=\"text-xs text-slate-500 dark:text-slate-400 font-medium\">\r\n                    We are verifying and persisting each transaction. Please keep your browser window active.\r\n                </AlertDescription>\r\n            </Alert>\r\n        </div>\r\n    );\r\n\r\n    const renderComplete = () => (\r\n        <div className=\"space-y-6 pt-4 text-center\">\r\n            <div className=\"bg-emerald-100 dark:bg-emerald-900/30 w-20 h-20 rounded-full flex items-center justify-center mx-auto shadow-inner\">\r\n                <CheckCircle className=\"h-10 w-10 text-emerald-600 dark:text-emerald-400\" />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n                <h3 className=\"text-xl font-black text-slate-900 dark:text-slate-100\">Synchronized Successfully!</h3>\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium\">\r\n                    A total of <span className=\"text-emerald-600 dark:text-emerald-400 font-bold\">{state.successCount} transactions</span> have been merged into the financial ledger.\r\n                    {state.failureCount > 0 && <span className=\"text-rose-500 font-bold\"> ({state.failureCount} entries reported issues)</span>}\r\n                </p>\r\n            </div>\r\n            <Button\r\n                onClick={handleClose}\r\n                className=\"w-full h-12 rounded-xl text-lg font-bold shadow-lg transition-all hover:translate-y-[-2px] active:translate-y-[0px] bg-slate-900 hover:bg-black dark:bg-white dark:text-black dark:hover:bg-slate-200\"\r\n            >\r\n                Return to Dashboard\r\n            </Button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isUploading && onOpenChange(val)}>\r\n            <DialogContent className=\"sm:max-w-[550px] p-0 overflow-hidden rounded-3xl border-none shadow-2xl\">\r\n                <DialogHeader className=\"p-8 pb-4 bg-gradient-to-b from-slate-50/50 to-white dark:from-slate-900 dark:to-slate-950\">\r\n                    <DialogTitle className=\"flex items-center gap-3 text-2xl font-black tracking-tight text-slate-900 dark:text-slate-50\">\r\n                        <div className=\"bg-blue-600 p-2 rounded-xl text-white\">\r\n                            <Upload className=\"h-6 w-6\" />\r\n                        </div>\r\n                        Financial Importer\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-slate-500 dark:text-slate-400 font-medium mt-1\">\r\n                        Scale your data management by importing bulk CSV logs.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"px-8 pb-8 pt-0\">\r\n                    {state.step === 'select' && renderFileSelection()}\r\n                    {state.step === 'preview' && renderPreview()}\r\n                    {state.step === 'uploading' && renderUploading()}\r\n                    {state.step === 'complete' && renderComplete()}\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CashCSVUploadDialog;\r\n","\r\nimport { CashTransaction } from '@/types/cash';\r\nimport { format } from 'date-fns';\r\n\r\nexport const exportCashTransactionsToCSV = (\r\n  transactions: CashTransaction[],\r\n  getAccountName: (accountId: string | null) => string,\r\n  formatCurrency: (amount: number) => string,\r\n  currency: string = 'USD'\r\n) => {\r\n  if (transactions.length === 0) {\r\n    alert('No transactions to export');\r\n    return;\r\n  }\r\n\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Account',\r\n    'Description',\r\n    'Category',\r\n    'Person in Charge',\r\n    'Amount',\r\n    'Payment Method'\r\n  ];\r\n\r\n  const csvData = transactions.map(transaction => [\r\n    format(transaction.date, 'yyyy-MM-dd'),\r\n    transaction.transactionType.replace('_', ' '),\r\n    getAccountName(transaction.accountId),\r\n    `\"${transaction.description.replace(/\"/g, '\"\"')}\"`,\r\n    transaction.category,\r\n    transaction.personInCharge || '',\r\n    transaction.amount.toString(),\r\n    transaction.paymentMethod || ''\r\n  ]);\r\n\r\n  const csvContent = [headers, ...csvData]\r\n    .map(row => row.join(','))\r\n    .join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  \r\n  if (link.download !== undefined) {\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `cash-transactions-${currency}-${format(new Date(), 'yyyy-MM-dd')}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n};\r\n","\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Search, Download, FileText } from 'lucide-react';\r\n\r\ninterface CashTransactionsFiltersProps {\r\n  searchTerm: string;\r\n  onSearchChange: (value: string) => void;\r\n  transactionTypeFilter: string;\r\n  onTransactionTypeFilterChange: (value: string) => void;\r\n  onExportCSV: () => void;\r\n  onExportPDF: () => void;\r\n  totalTransactions: number;\r\n}\r\n\r\nconst CashTransactionsFilters: React.FC<CashTransactionsFiltersProps> = ({\r\n  searchTerm,\r\n  onSearchChange,\r\n  transactionTypeFilter,\r\n  onTransactionTypeFilterChange,\r\n  onExportCSV,\r\n  onExportPDF,\r\n  totalTransactions\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-4 mb-4\">\r\n      {/* Search and Filter Row */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search transactions...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n        \r\n        <Select value={transactionTypeFilter} onValueChange={onTransactionTypeFilterChange}>\r\n          <SelectTrigger>\r\n            <SelectValue placeholder=\"All transaction types\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">All Types</SelectItem>\r\n            <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n            <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n            <SelectItem value=\"transfer_in\">Transfer In</SelectItem>\r\n            <SelectItem value=\"transfer_out\">Transfer Out</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportCSV}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            CSV\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExportPDF}\r\n            className=\"flex-1 sm:flex-none\"\r\n          >\r\n            <FileText className=\"h-4 w-4 mr-2\" />\r\n            PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Results count */}\r\n      <div className=\"text-sm text-muted-foreground\">\r\n        {totalTransactions} transaction{totalTransactions !== 1 ? 's' : ''} found\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashTransactionsFilters;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { format } from 'date-fns';\r\nimport { Calendar as CalendarIcon, Plus, Trash2, ArrowUp, ArrowDown, Save, X, Info } from 'lucide-react';\r\nimport { CashTransactionFormData } from '@/types/cash';\r\nimport { useCashTransactions } from '@/hooks/useCashTransactions';\r\nimport { useCashAccounts } from '@/hooks/useCashAccounts';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\n\r\ninterface TransactionRow extends CashTransactionFormData {\r\n    id: string;\r\n}\r\n\r\ninterface BulkTransactionAddTabProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    accountId: string;\r\n    onSuccess: () => void;\r\n}\r\n\r\nconst STORAGE_KEY = 'bulk_transactions_draft';\r\n\r\nconst BulkTransactionAddTab: React.FC<BulkTransactionAddTabProps> = ({\r\n    open,\r\n    onOpenChange,\r\n    accountId,\r\n    onSuccess,\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { user } = useAuth();\r\n    const { accounts } = useCashAccounts();\r\n    const { createBulkTransactions } = useCashTransactions(accountId);\r\n    const [rows, setRows] = useState<TransactionRow[]>([]);\r\n    const [globalDate, setGlobalDate] = useState<Date>(new Date());\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Load draft from localStorage\r\n    useEffect(() => {\r\n        if (!open) return;\r\n\r\n        const savedDraft = localStorage.getItem(STORAGE_KEY);\r\n        if (savedDraft) {\r\n            try {\r\n                const parsed = JSON.parse(savedDraft);\r\n                setRows(parsed.map((r: any) => ({ ...r, date: new Date(r.date) })));\r\n            } catch (e) {\r\n                console.error('Failed to parse draft', e);\r\n                addEmptyRow();\r\n            }\r\n        } else {\r\n            setRows([]);\r\n            addEmptyRow();\r\n        }\r\n    }, [open]);\r\n\r\n    // Save draft to localStorage whenever rows change\r\n    useEffect(() => {\r\n        if (rows.length > 0) {\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(rows));\r\n        } else {\r\n            localStorage.removeItem(STORAGE_KEY);\r\n        }\r\n    }, [rows]);\r\n\r\n    const addEmptyRow = () => {\r\n        const newId = Math.random().toString(36).substr(2, 9);\r\n        const newRow: TransactionRow = {\r\n            id: newId,\r\n            accountId: accountId,\r\n            amount: 0,\r\n            transactionType: 'cash_in',\r\n            description: '',\r\n            category: 'Other',\r\n            paymentMethod: 'Cash',\r\n            personInCharge: '',\r\n            tags: [],\r\n            date: globalDate, // Use the default/global date for new rows\r\n            receiptImage: ''\r\n        };\r\n        setRows(prev => [...prev, newRow]);\r\n    };\r\n\r\n    const removeRow = (id: string) => {\r\n        setRows(prev => prev.filter(r => r.id !== id));\r\n        if (rows.length === 1) {\r\n            addEmptyRow();\r\n        }\r\n    };\r\n\r\n    const updateRow = (id: string, updates: Partial<TransactionRow>) => {\r\n        setRows(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\r\n    };\r\n\r\n    const moveRow = (id: string, direction: 'up' | 'down') => {\r\n        const index = rows.findIndex(r => r.id === id);\r\n        if (index < 0) return;\r\n        if (direction === 'up' && index === 0) return;\r\n        if (direction === 'down' && index === rows.length - 1) return;\r\n\r\n        const newRows = [...rows];\r\n        const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n        [newRows[index], newRows[targetIndex]] = [newRows[targetIndex], newRows[index]];\r\n        setRows(newRows);\r\n    };\r\n\r\n    const handleSaveAll = async () => {\r\n        const validRows = rows.filter(r => r.amount > 0 && r.description.trim() !== '');\r\n        if (validRows.length === 0) {\r\n            alert('Please enter at least one valid transaction with amount and description');\r\n            return;\r\n        }\r\n\r\n        // Verify transfers have a destination\r\n        const invalidTransfers = validRows.filter(r => r.transactionType === 'transfer' && !r.toAccountId);\r\n        if (invalidTransfers.length > 0) {\r\n            alert('Please select a destination account for all transfers');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Use the date from each individual row\r\n            await createBulkTransactions(validRows.map(({ id, ...rest }) => ({ ...rest })));\r\n            localStorage.removeItem(STORAGE_KEY);\r\n            onSuccess();\r\n        } catch (e) {\r\n            console.error('Bulk save failed', e);\r\n            alert('Failed to save transactions. Please check your network connection.');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        if (isSaving) return;\r\n        onOpenChange(false);\r\n    };\r\n\r\n    const renderDesktop = () => (\r\n        <div className=\"overflow-x-auto rounded-md border\">\r\n            <Table>\r\n                <TableHeader className=\"bg-muted/50\">\r\n                    <TableRow>\r\n                        <TableHead className=\"w-[140px]\">Date</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Type</TableHead>\r\n                        <TableHead className=\"w-[130px]\">Amount</TableHead>\r\n                        <TableHead>Description</TableHead>\r\n                        <TableHead className=\"w-[140px]\">Category</TableHead>\r\n                        <TableHead className=\"w-[150px]\">Details</TableHead>\r\n                        <TableHead className=\"w-[120px] text-right\">Actions</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {rows.map((row) => (\r\n                        <TableRow key={row.id} className=\"hover:bg-muted/30 transition-colors\">\r\n                            <TableCell>\r\n                                <Popover>\r\n                                    <PopoverTrigger asChild>\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"sm\"\r\n                                            className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                        >\r\n                                            <CalendarIcon className=\"mr-2 h-3 w-3 shrink-0\" />\r\n                                            <span className=\"truncate\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                        </Button>\r\n                                    </PopoverTrigger>\r\n                                    <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                        <Calendar\r\n                                            mode=\"single\"\r\n                                            selected={row.date}\r\n                                            onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                            initialFocus\r\n                                        />\r\n                                    </PopoverContent>\r\n                                </Popover>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.transactionType}\r\n                                    onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                        <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                        <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                {row.transactionType === 'transfer' && (\r\n                                    <div className=\"mt-1.5\">\r\n                                        <Select\r\n                                            value={row.toAccountId}\r\n                                            onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                                        >\r\n                                            <SelectTrigger className=\"text-[10px] h-7 px-2\">\r\n                                                <SelectValue placeholder=\"To Account\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                                    <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                )}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    value={row.amount || ''}\r\n                                    onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                    className=\"h-9 font-medium\"\r\n                                    placeholder=\"0.00\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Input\r\n                                    value={row.description}\r\n                                    onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                                    placeholder=\"Description...\"\r\n                                    className=\"h-9\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Select\r\n                                    value={row.category}\r\n                                    onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                                >\r\n                                    <SelectTrigger className=\"h-9\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                        <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                        <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                        <SelectItem value=\"Other\">Other</SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </TableCell>\r\n                            <TableCell className=\"space-y-1\">\r\n                                <Input\r\n                                    placeholder=\"Payment Method\"\r\n                                    value={row.paymentMethod}\r\n                                    onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                                <Input\r\n                                    placeholder=\"Person In Charge\"\r\n                                    value={row.personInCharge}\r\n                                    onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                    className=\"text-[10px] h-7 px-1.5\"\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                                <div className=\"flex items-center justify-end gap-0.5\">\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                        <ArrowUp className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-muted-foreground\" onClick={() => moveRow(row.id, 'down')}>\r\n                                        <ArrowDown className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7 text-destructive/70 hover:text-destructive hover:bg-destructive/10\" onClick={() => removeRow(row.id)}>\r\n                                        <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n\r\n    const renderMobile = () => (\r\n        <div className=\"space-y-4 px-1\">\r\n            {rows.map((row, index) => (\r\n                <Card key={row.id} className=\"overflow-hidden border-l-4 border-l-primary/30\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between p-3 pb-2 bg-muted/20\">\r\n                        <CardTitle className=\"text-xs font-semibold uppercase tracking-wider text-muted-foreground\">\r\n                            Transaction {index + 1}\r\n                        </CardTitle>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-muted-foreground\" onClick={() => moveRow(row.id, 'up')}>\r\n                                <ArrowUp className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-destructive/70\" onClick={() => removeRow(row.id)}>\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent className=\"p-3 space-y-3\">\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Popover>\r\n                                <PopoverTrigger asChild>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        className={cn(\"w-full justify-start text-left font-normal h-9\", !row.date && \"text-muted-foreground\")}\r\n                                    >\r\n                                        <CalendarIcon className=\"mr-2 h-3 w-3\" />\r\n                                        <span className=\"truncate text-xs\">{row.date ? format(row.date, \"MMM dd, yyyy\") : \"Date\"}</span>\r\n                                    </Button>\r\n                                </PopoverTrigger>\r\n                                <PopoverContent className=\"w-auto p-0 z-[70]\" align=\"start\">\r\n                                    <Calendar\r\n                                        mode=\"single\"\r\n                                        selected={row.date}\r\n                                        onSelect={(date) => date && updateRow(row.id, { date })}\r\n                                        initialFocus\r\n                                    />\r\n                                </PopoverContent>\r\n                            </Popover>\r\n                            <Select\r\n                                value={row.transactionType}\r\n                                onValueChange={(val: any) => updateRow(row.id, { transactionType: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"cash_in\">Cash In</SelectItem>\r\n                                    <SelectItem value=\"cash_out\">Cash Out</SelectItem>\r\n                                    <SelectItem value=\"transfer\">Transfer</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                type=\"number\"\r\n                                placeholder=\"Amount\"\r\n                                value={row.amount || ''}\r\n                                onChange={(e) => updateRow(row.id, { amount: Number(e.target.value) })}\r\n                                className=\"h-9 font-medium\"\r\n                            />\r\n                            <Select\r\n                                value={row.category}\r\n                                onValueChange={(val) => updateRow(row.id, { category: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"Sales\">Sales</SelectItem>\r\n                                    <SelectItem value=\"Expenses\">Expenses</SelectItem>\r\n                                    <SelectItem value=\"Payroll\">Payroll</SelectItem>\r\n                                    <SelectItem value=\"Other\">Other</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {row.transactionType === 'transfer' && (\r\n                            <Select\r\n                                value={row.toAccountId}\r\n                                onValueChange={(val) => updateRow(row.id, { toAccountId: val })}\r\n                            >\r\n                                <SelectTrigger className=\"h-9 text-xs\">\r\n                                    <SelectValue placeholder=\"Target Account\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {accounts.filter(a => a.id !== accountId).map(acc => (\r\n                                        <SelectItem key={acc.id} value={acc.id}>{acc.name}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        )}\r\n\r\n                        <Input\r\n                            placeholder=\"Description\"\r\n                            value={row.description}\r\n                            onChange={(e) => updateRow(row.id, { description: e.target.value })}\r\n                            className=\"h-9\"\r\n                        />\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Input\r\n                                placeholder=\"Payment Method\"\r\n                                value={row.paymentMethod}\r\n                                onChange={(e) => updateRow(row.id, { paymentMethod: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                            <Input\r\n                                placeholder=\"Person In Charge\"\r\n                                value={row.personInCharge}\r\n                                onChange={(e) => updateRow(row.id, { personInCharge: e.target.value })}\r\n                                className=\"h-8 text-[11px]\"\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => !isSaving && onOpenChange(val)}>\r\n            <DialogContent className=\"max-w-6xl w-[95vw] h-[95vh] sm:h-[90vh] flex flex-col p-0 overflow-hidden shadow-2xl border-none\">\r\n                <DialogHeader className=\"p-6 pb-2 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border-b\">\r\n                    <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                            <DialogTitle className=\"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2\">\r\n                                <Wallet className=\"h-5 w-5 text-blue-600\" />\r\n                                Bulk Transaction Entry\r\n                            </DialogTitle>\r\n                            <DialogDescription className=\"text-slate-500 dark:text-slate-400 mt-1\">\r\n                                Add multiple records at once. Each row can have its own date and details.\r\n                            </DialogDescription>\r\n                        </div>\r\n                    </div>\r\n                </DialogHeader>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 bg-slate-50/30 dark:bg-slate-950/30\">\r\n                    <div className=\"bg-white dark:bg-slate-900 rounded-xl p-4 shadow-sm border space-y-4\">\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                            <div className=\"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400\">\r\n                                <Alert className=\"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900 py-2\">\r\n                                    <Info className=\"h-4 w-4 text-blue-500\" />\r\n                                    <AlertDescription className=\"text-[11px] sm:text-xs\">\r\n                                        Use the <strong>Default Date</strong> to quickly set dates for newly added rows.\r\n                                    </AlertDescription>\r\n                                </Alert>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n                                <div className=\"flex-1 md:flex-initial\">\r\n                                    <p className=\"text-[10px] font-semibold text-muted-foreground uppercase mb-1 ml-1\">Default Date</p>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <Button variant=\"outline\" className={cn(\"justify-start text-left font-normal w-full md:w-[200px] h-10 shadow-sm\", !globalDate && \"text-muted-foreground\")}>\r\n                                                <CalendarIcon className=\"mr-2 h-4 w-4 text-blue-500\" />\r\n                                                {globalDate ? format(globalDate, \"PPP\") : <span>Pick a date</span>}\r\n                                            </Button>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0 z-[80]\" align=\"end\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={globalDate}\r\n                                                onSelect={(date) => date && setGlobalDate(date)}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                </div>\r\n                                <div className=\"flex items-end h-full\">\r\n                                    <Button\r\n                                        onClick={addEmptyRow}\r\n                                        variant=\"secondary\"\r\n                                        className=\"gap-2 h-10 font-semibold border border-slate-200 dark:border-slate-800\"\r\n                                    >\r\n                                        <Plus className=\"h-4 w-4\" />\r\n                                        Add Row\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"min-h-[200px]\">\r\n                            {isMobile ? renderMobile() : renderDesktop()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center p-6 border-t bg-white dark:bg-slate-900 shrink-0\">\r\n                    <div className=\"text-sm font-medium text-slate-500\">\r\n                        Total Valid: <span className=\"text-indigo-600 dark:text-indigo-400 font-bold\">{rows.filter(r => r.amount > 0).length}</span>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            onClick={handleCancel}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 hover:bg-slate-100 dark:hover:bg-slate-800\"\r\n                        >\r\n                            <X className=\"h-4 w-4\" />\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleSaveAll}\r\n                            disabled={isSaving}\r\n                            className=\"gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-md transition-all active:scale-[0.98]\"\r\n                        >\r\n                            {isSaving ? <Save className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\r\n                            Save {rows.filter(r => r.amount > 0).length} Transactions\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\n// Internal icon for naming consistency but imports lucide-react Wallet\r\nconst Wallet = ({ className }: { className?: string }) => (\r\n    <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className={className}\r\n    >\r\n        <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\" />\r\n        <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\" />\r\n        <path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\" />\r\n    </svg>\r\n);\r\n\r\nexport default BulkTransactionAddTab;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MoveRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggOEwyMiAxMkwxOCAxNiIgLz4KICA8cGF0aCBkPSJNMiAxMkgyMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/move-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MoveRight = createLucideIcon('MoveRight', [\n  ['path', { d: 'M18 8L22 12L18 16', key: '1r0oui' }],\n  ['path', { d: 'M2 12H22', key: '1m8cig' }],\n]);\n\nexport default MoveRight;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CalendarDays\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAydjQiIC8+CiAgPHBhdGggZD0iTTE2IDJ2NCIgLz4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDEwaDE4IiAvPgogIDxwYXRoIGQ9Ik04IDE0aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMTRoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xNiAxNGguMDEiIC8+CiAgPHBhdGggZD0iTTggMThoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xMiAxOGguMDEiIC8+CiAgPHBhdGggZD0iTTE2IDE4aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/calendar-days\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CalendarDays = createLucideIcon('CalendarDays', [\n  ['path', { d: 'M8 2v4', key: '1cmpym' }],\n  ['path', { d: 'M16 2v4', key: '4m81vk' }],\n  ['rect', { width: '18', height: '18', x: '3', y: '4', rx: '2', key: '1hopcy' }],\n  ['path', { d: 'M3 10h18', key: '8toen8' }],\n  ['path', { d: 'M8 14h.01', key: '6423bh' }],\n  ['path', { d: 'M12 14h.01', key: '1etili' }],\n  ['path', { d: 'M16 14h.01', key: '1gbofw' }],\n  ['path', { d: 'M8 18h.01', key: 'lrp35t' }],\n  ['path', { d: 'M12 18h.01', key: 'mhygvu' }],\n  ['path', { d: 'M16 18h.01', key: 'kzsmim' }],\n]);\n\nexport default CalendarDays;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowRightLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMyA0IDQtNCA0IiAvPgogIDxwYXRoIGQ9Ik0yMCA3SDQiIC8+CiAgPHBhdGggZD0ibTggMjEtNC00IDQtNCIgLz4KICA8cGF0aCBkPSJNNCAxN2gxNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-right-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRightLeft = createLucideIcon('ArrowRightLeft', [\n  ['path', { d: 'm16 3 4 4-4 4', key: '1x1c3m' }],\n  ['path', { d: 'M20 7H4', key: 'zbl0bi' }],\n  ['path', { d: 'm8 21-4-4 4-4', key: 'h9nckh' }],\n  ['path', { d: 'M4 17h16', key: 'g4d7ey' }],\n]);\n\nexport default ArrowRightLeft;\n","import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { CashTransaction, CashTransactionFormData, CashAccount } from '@/types/cash';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Eye, FileText, X } from 'lucide-react';\r\nimport ImageViewer from '@/components/ui/ImageViewer';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface EditCashTransactionDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onSubmit: (id: string, data: Partial<CashTransactionFormData>) => void;\r\n  transaction: CashTransaction | null;\r\n  accounts: CashAccount[];\r\n}\r\n\r\nconst EditCashTransactionDialog: React.FC<EditCashTransactionDialogProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  onSubmit,\r\n  transaction,\r\n  accounts\r\n}) => {\r\n  const { register, handleSubmit, formState: { errors }, reset, watch, setValue } = useForm<CashTransactionFormData>();\r\n  const isMobile = useIsMobile();\r\n  const [imageViewerOpen, setImageViewerOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  React.useEffect(() => {\r\n    if (open && transaction) {\r\n      // Format date as YYYY-MM-DD for the date input\r\n      const formattedDate = transaction.date.toISOString().split('T')[0];\r\n      \r\n      reset({\r\n        accountId: transaction.accountId || '',\r\n        amount: transaction.amount,\r\n        transactionType: transaction.transactionType === 'transfer_in' || transaction.transactionType === 'transfer_out' \r\n          ? 'transfer' \r\n          : transaction.transactionType,\r\n        category: transaction.category,\r\n        description: transaction.description,\r\n        personInCharge: transaction.personInCharge || '',\r\n        tags: [],\r\n        date: transaction.date, // Keep as Date object for the form\r\n        paymentMethod: transaction.paymentMethod || '',\r\n        receiptImage: transaction.receiptImage || ''\r\n      });\r\n      \r\n      // Set the date input value to the formatted string\r\n      setValue('date', formattedDate as any);\r\n    }\r\n  }, [open, transaction, reset, setValue]);\r\n\r\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      // Check file type\r\n      const isImage = file.type.startsWith('image/');\r\n      const isPDF = file.type === 'application/pdf';\r\n      \r\n      if (!isImage && !isPDF) {\r\n        toast({\r\n          title: \"Error\",\r\n          description: \"Please select an image or PDF file\",\r\n          variant: \"destructive\"\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Create a local URL for the uploaded file\r\n      const fileUrl = URL.createObjectURL(file);\r\n      setValue('receiptImage', fileUrl);\r\n    }\r\n  };\r\n\r\n  const isReceiptPDF = (url: string) => {\r\n    // Check if the file is a PDF based on the URL or stored file type\r\n    return url && url.includes('pdf');\r\n  };\r\n\r\n  const removeReceipt = () => {\r\n    setValue('receiptImage', '');\r\n  };\r\n\r\n  const handleFormSubmit = async (data: any) => {\r\n    if (!transaction) return;\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Handle date conversion properly - ensure exact date is preserved\r\n      let formDate: Date;\r\n      \r\n      // If data.date is a string (from the date input), parse it correctly\r\n      if (typeof data.date === 'string') {\r\n        // Parse date string to ensure we get the exact date selected\r\n        const [year, month, day] = data.date.split('-').map(Number);\r\n        formDate = new Date(year, month - 1, day, 12, 0, 0); // Set to noon to avoid timezone issues\r\n      } else if (data.date instanceof Date) {\r\n        formDate = data.date;\r\n      } else {\r\n        formDate = new Date();\r\n      }\r\n\r\n      const formData: Partial<CashTransactionFormData> = {\r\n        amount: Number(data.amount),\r\n        category: data.category,\r\n        description: data.description,\r\n        personInCharge: data.personInCharge,\r\n        tags: [],\r\n        date: formDate,\r\n        paymentMethod: data.paymentMethod,\r\n        receiptImage: data.receiptImage\r\n      };\r\n      \r\n      await onSubmit(transaction.id, formData);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!transaction) return null;\r\n\r\n  // Format date for the input field display\r\n  const inputDateValue = transaction.date.toISOString().split('T')[0];\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onOpenChange}>\r\n        <DialogContent className={`${isMobile ? 'max-h-[85vh] w-[95vw] max-w-none' : 'sm:max-w-[500px]'}`}>\r\n          <DialogHeader className={isMobile ? 'pb-2' : ''}>\r\n            <DialogTitle>Edit Transaction</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          <ScrollArea className={isMobile ? 'h-[calc(85vh-120px)] pr-4' : 'max-h-[70vh]'}>\r\n            <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"transactionType\">Transaction Type</Label>\r\n                <Input\r\n                  value={transaction.transactionType.replace('_', ' ')}\r\n                  disabled\r\n                  className=\"bg-gray-100\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Amount</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"1\"\r\n                  {...register('amount', { \r\n                    required: 'Amount is required',\r\n                    min: { value: 1, message: 'Amount must be at least 1' }\r\n                  })}\r\n                  placeholder=\"0\"\r\n                />\r\n                {errors.amount && (\r\n                  <p className=\"text-sm text-red-600\">{errors.amount.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Category (Optional)</Label>\r\n                <Input\r\n                  id=\"category\"\r\n                  {...register('category')}\r\n                  placeholder=\"e.g., Sales, Expense, Investment\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"description\">Description</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  {...register('description', { required: 'Description is required' })}\r\n                  placeholder=\"Transaction description\"\r\n                  rows={3}\r\n                  className={isMobile ? 'min-h-[80px]' : ''}\r\n                />\r\n                {errors.description && (\r\n                  <p className=\"text-sm text-red-600\">{errors.description.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"personInCharge\">Person in Charge (Optional)</Label>\r\n                <Input\r\n                  id=\"personInCharge\"\r\n                  {...register('personInCharge')}\r\n                  placeholder=\"e.g., John Doe, Manager\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentMethod\">Payment Method (Optional)</Label>\r\n                <Input\r\n                  id=\"paymentMethod\"\r\n                  {...register('paymentMethod')}\r\n                  placeholder=\"e.g., Cash, Credit Card, Bank Transfer\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"receiptImage\">Receipt (Image or PDF) (Optional)</Label>\r\n                <Input\r\n                  id=\"receiptImage\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.pdf\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"cursor-pointer\"\r\n                />\r\n                {watch('receiptImage') && (\r\n                  <div className=\"mt-2 relative\">\r\n                    {isReceiptPDF(watch('receiptImage')) ? (\r\n                      <div className=\"flex items-center gap-2 p-3 border rounded\">\r\n                        <FileText className=\"h-8 w-8 text-red-600\" />\r\n                        <span className=\"text-sm\">PDF Receipt</span>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"destructive\"\r\n                          size=\"sm\"\r\n                          className=\"ml-auto h-6 w-6 rounded-full p-0\"\r\n                          onClick={removeReceipt}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <img \r\n                          src={watch('receiptImage')} \r\n                          alt=\"Receipt preview\" \r\n                          className=\"max-w-full h-32 object-contain border rounded cursor-pointer hover:opacity-80 transition-opacity\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"secondary\"\r\n                          size=\"sm\"\r\n                          className=\"absolute top-2 right-2 opacity-80 hover:opacity-100\"\r\n                          onClick={() => setImageViewerOpen(true)}\r\n                        >\r\n                          <Eye className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"edit-date\">Date</Label>\r\n                <Input\r\n                  id=\"edit-date\"\r\n                  type=\"date\"\r\n                  {...register('date', { required: 'Date is required' })}\r\n                />\r\n                {errors.date && (\r\n                  <p className=\"text-sm text-red-600\">{errors.date.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className={`flex ${isMobile ? 'flex-col gap-2' : 'justify-end space-x-2'} pt-4`}>\r\n                <Button \r\n                  type=\"button\" \r\n                  variant=\"outline\" \r\n                  onClick={() => onOpenChange(false)}\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button \r\n                  type=\"submit\"\r\n                  className={isMobile ? 'w-full' : ''}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <LoadingSpinner size=\"sm\" className=\"!space-y-0\" />\r\n                      <span>Updating Transaction...</span>\r\n                    </div>\r\n                  ) : (\r\n                    'Update Transaction'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </ScrollArea>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {watch('receiptImage') && !isReceiptPDF(watch('receiptImage')) && (\r\n        <ImageViewer\r\n          isOpen={imageViewerOpen}\r\n          onOpenChange={setImageViewerOpen}\r\n          imageUrl={watch('receiptImage')}\r\n          imageAlt=\"Receipt preview\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditCashTransactionDialog;\r\n"],"names":[],"mappings":"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","ignoreList":[10,11,12]}