{"version":3,"sources":["../../../../src/app/actions/customers.ts","../../../../src/app/actions/inventory.ts"],"sourcesContent":["'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function getCustomerStatsAction(userId: string, branchId: string) {\r\n    try {\r\n        const thisMonth = new Date();\r\n        const startOfMonth = new Date(thisMonth.getFullYear(), thisMonth.getMonth(), 1);\r\n\r\n        // 1. Count customers created this month\r\n        const thisMonthCount = await db.customer.count({\r\n            where: {\r\n                // Assuming we use agencyId for userId if they are an owner, or it's connected somehow\r\n                // For now, focusing on branchId as that's normally the tenant isolation in the schema\r\n                branchId: branchId,\r\n                createdAt: {\r\n                    gte: startOfMonth\r\n                }\r\n            }\r\n        });\r\n\r\n        // 2. Count customers with upcoming backgrounds (for now just count those who have a birthday set)\r\n        const withBirthdays = await db.customer.count({\r\n            where: {\r\n                branchId: branchId,\r\n                birthday: {\r\n                    not: null\r\n                }\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                withBirthdays,\r\n                thisMonth: thisMonthCount\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error fetching customer stats:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function mergeCustomersAction(primaryCustomerId: string, duplicateIds: string[]) {\r\n    try {\r\n        if (!primaryCustomerId || duplicateIds.length === 0) {\r\n            return { success: false, error: 'Invalid selection' };\r\n        }\r\n\r\n        // Use a transaction to ensure all operations succeed or fail together\r\n        await db.$transaction(async (tx: any) => {\r\n            // 1. Update sales to point to primary customer\r\n            // In Prisma, assuming relation is through customerId\r\n            await tx.sale.updateMany({\r\n                where: {\r\n                    customerId: {\r\n                        in: duplicateIds\r\n                    }\r\n                },\r\n                data: {\r\n                    customerId: primaryCustomerId\r\n                }\r\n            });\r\n\r\n            // Note: The original code also updated messages. \r\n            // If there's a Message model connected to customers, add it here.\r\n            // await tx.message.updateMany({\r\n            //     where: { customerId: { in: duplicateIds } },\r\n            //     data: { customerId: primaryCustomerId }\r\n            // });\r\n\r\n            // 3. Delete duplicate customers\r\n            await tx.customer.deleteMany({\r\n                where: {\r\n                    id: {\r\n                        in: duplicateIds\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        // Revalidate customers list\r\n        revalidatePath('/customers');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error merging customers:', error);\r\n        return { success: false, error: error.message || 'Failed to merge customers' };\r\n    }\r\n}\r\n\r\nexport async function getCustomersAction(branchId: string) {\r\n    try {\r\n        const customers = await db.customer.findMany({\r\n            where: { branchId },\r\n            orderBy: { name: 'asc' }\r\n        });\r\n\r\n        const count = await db.customer.count({\r\n            where: { branchId }\r\n        });\r\n\r\n        // Map Prisma Customer model to the shape expected by useCustomers hook\r\n        const mappedCustomers = customers.map((c: any) => ({\r\n            id: c.id,\r\n            fullName: c.name,\r\n            phoneNumber: c.phone,\r\n            email: c.email,\r\n            birthday: c.birthday ? c.birthday.toISOString() : null,\r\n            gender: c.gender,\r\n            location: c.address,\r\n            categoryId: c.categoryId,\r\n            notes: c.notes,\r\n            tags: c.tags || [],\r\n            socialMedia: c.socialMedia || null,\r\n            createdAt: c.createdAt.toISOString(),\r\n            updatedAt: c.updatedAt.toISOString()\r\n        }));\r\n\r\n        return { success: true, data: { customers: mappedCustomers, count } };\r\n    } catch (error: any) {\r\n        console.error('Error fetching customers:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createCustomerAction(branchId: string, userId: string, data: any) {\r\n    try {\r\n        const newCustomer = await db.customer.create({\r\n            data: {\r\n                branchId: branchId,\r\n                adminId: userId, // Assuming user who created it is the admin/owner\r\n                name: data.fullName,\r\n                phone: data.phoneNumber || null,\r\n                email: data.email || null,\r\n                birthday: data.birthday ? new Date(data.birthday) : null,\r\n                gender: data.gender || null,\r\n                address: data.location || null,\r\n                categoryId: data.categoryId || null,\r\n                notes: data.notes || null,\r\n                tags: data.tags || [],\r\n                socialMedia: data.socialMedia || null\r\n            }\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true, data: newCustomer };\r\n    } catch (error: any) {\r\n        console.error('Error creating customer:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateCustomerAction(customerId: string, data: any) {\r\n    try {\r\n        const updateData: any = {};\r\n        if (data.fullName !== undefined) updateData.name = data.fullName;\r\n        if (data.phoneNumber !== undefined) updateData.phone = data.phoneNumber;\r\n        if (data.email !== undefined) updateData.email = data.email;\r\n        if (data.birthday !== undefined) updateData.birthday = data.birthday ? new Date(data.birthday) : null;\r\n        if (data.gender !== undefined) updateData.gender = data.gender;\r\n        if (data.location !== undefined) updateData.address = data.location;\r\n        if (data.categoryId !== undefined) updateData.categoryId = data.categoryId;\r\n        if (data.notes !== undefined) updateData.notes = data.notes;\r\n        if (data.tags !== undefined) updateData.tags = data.tags;\r\n        if (data.socialMedia !== undefined) updateData.socialMedia = data.socialMedia;\r\n\r\n        const updatedCustomer = await db.customer.update({\r\n            where: { id: customerId },\r\n            data: updateData\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true, data: updatedCustomer };\r\n    } catch (error: any) {\r\n        console.error('Error updating customer:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteCustomerAction(customerId: string) {\r\n    try {\r\n        await db.customer.delete({\r\n            where: { id: customerId }\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error deleting customer:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getCustomerCategoriesAction(branchId: string) {\r\n    try {\r\n        const categories = await db.customerCategory.findMany({\r\n            where: { branchId },\r\n            orderBy: { name: 'asc' }\r\n        });\r\n\r\n        const formattedCategories = categories.map((c: any) => ({\r\n            id: c.id,\r\n            name: c.name,\r\n            isDefault: c.isDefault,\r\n            createdAt: c.createdAt.toISOString(),\r\n            updatedAt: c.updatedAt.toISOString()\r\n        }));\r\n\r\n        return { success: true, data: formattedCategories };\r\n    } catch (error: any) {\r\n        console.error('Error fetching customer categories:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createCustomerCategoryAction(branchId: string, userId: string, name: string) {\r\n    try {\r\n        const newCategory = await db.customerCategory.create({\r\n            data: {\r\n                branchId: branchId,\r\n                name: name.trim(),\r\n                isDefault: false,\r\n                userId: userId\r\n            }\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true, data: newCategory };\r\n    } catch (error: any) {\r\n        console.error('Error creating customer category:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateCustomerCategoryAction(categoryId: string, name: string) {\r\n    try {\r\n        const updatedCategory = await db.customerCategory.update({\r\n            where: { id: categoryId },\r\n            data: { name: name.trim() }\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true, data: updatedCategory };\r\n    } catch (error: any) {\r\n        console.error('Error updating customer category:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteCustomerCategoryAction(categoryId: string) {\r\n    try {\r\n        await db.customerCategory.delete({\r\n            where: { id: categoryId }\r\n        });\r\n        revalidatePath('/customers');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error deleting customer category:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n","'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\n// --- STOCK HISTORY ---\r\n\r\nexport async function getStockHistoryAction(locationId: string, productId?: string) {\r\n    try {\r\n        const where: any = { locationId };\r\n        if (productId) where.productId = productId;\r\n\r\n        const history = await db.productHistory.findMany({\r\n            where,\r\n            include: {\r\n                product: {\r\n                    select: {\r\n                        name: true,\r\n                        costPrice: true,\r\n                        sellingPrice: true,\r\n                        sku: true\r\n                    }\r\n                }\r\n            },\r\n            orderBy: [{ createdAt: 'desc' }, { id: 'desc' }]\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: history.map((h: any) => ({\r\n                id: h.id,\r\n                productId: h.productId,\r\n                oldQuantity: h.previousQuantity,\r\n                newQuantity: h.newQuantity,\r\n                changeReason: h.changeReason,\r\n                createdAt: h.createdAt.toISOString(),\r\n                referenceId: h.referenceId,\r\n                receiptNumber: h.receiptNumber,\r\n                product: h.product ? {\r\n                    name: h.product.name,\r\n                    costPrice: h.product.costPrice,\r\n                    sellingPrice: h.product.sellingPrice,\r\n                    itemNumber: h.product.sku\r\n                } : undefined\r\n            }))\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error fetching stock history:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createStockHistoryAction(data: any) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const entry = await tx.productHistory.create({\r\n                data: {\r\n                    userId: data.userId,\r\n                    locationId: data.locationId,\r\n                    productId: data.productId,\r\n                    previousQuantity: data.previousQuantity,\r\n                    newQuantity: data.newQuantity,\r\n                    changeReason: data.changeReason,\r\n                    referenceId: data.referenceId || null,\r\n                    receiptNumber: data.receiptNumber || null,\r\n                    createdAt: data.createdAt ? new Date(data.createdAt) : undefined\r\n                }\r\n            });\r\n\r\n            // Update product stock as well\r\n            await tx.product.update({\r\n                where: { id: data.productId },\r\n                data: { stock: data.newQuantity }\r\n            });\r\n\r\n            return entry;\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error creating stock history:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function recalculateStockChainAction(productId: string, locationId: string) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const history = await tx.productHistory.findMany({\r\n                where: { productId, locationId },\r\n                orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n            });\r\n\r\n            if (history.length === 0) return { finalQuantity: 0 };\r\n\r\n            let runningQuantity = 0;\r\n            const updates = [];\r\n\r\n            for (const entry of history) {\r\n                const change = entry.newQuantity - entry.previousQuantity;\r\n                const newPrev = runningQuantity;\r\n                const newNext = newPrev + change;\r\n\r\n                if (entry.previousQuantity !== newPrev || entry.newQuantity !== newNext) {\r\n                    updates.push(tx.productHistory.update({\r\n                        where: { id: entry.id },\r\n                        data: { previousQuantity: newPrev, newQuantity: newNext }\r\n                    }));\r\n                }\r\n                runningQuantity = newNext;\r\n            }\r\n\r\n            if (updates.length > 0) {\r\n                await Promise.all(updates);\r\n            }\r\n\r\n            // Update product\r\n            await tx.product.update({\r\n                where: { id: productId },\r\n                data: { stock: runningQuantity }\r\n            });\r\n\r\n            return { finalQuantity: runningQuantity };\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error recalculating stock chain:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteStockHistoryEntriesByReferenceAction(referenceId: string, locationId: string) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const entries = await tx.productHistory.findMany({\r\n                where: { referenceId, locationId },\r\n                select: { productId: true }\r\n            });\r\n\r\n            const productIds = [...new Set(entries.map((e: any) => e.productId as string))];\r\n\r\n            await tx.productHistory.deleteMany({\r\n                where: { referenceId, locationId }\r\n            });\r\n\r\n            // Recalculate chains for affected products\r\n            for (const productId of productIds) {\r\n                await recalculateStockChainInternal(tx, productId as string, locationId);\r\n            }\r\n\r\n            return { affectedProducts: productIds.length };\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error deleting stock history by reference:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateStockHistoryDatesByReferenceAction(referenceId: string, locationId: string, newDate: string) {\r\n    try {\r\n        const result = await db.productHistory.updateMany({\r\n            where: { referenceId, locationId },\r\n            data: { createdAt: new Date(newDate) }\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error updating stock history dates:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// Internal helper for use within transactions\r\nasync function recalculateStockChainInternal(tx: any, productId: string, locationId: string) {\r\n    const history = await tx.productHistory.findMany({\r\n        where: { productId, locationId },\r\n        orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n    });\r\n\r\n    let runningQuantity = 0;\r\n    for (const entry of history) {\r\n        const change = entry.newQuantity - entry.previousQuantity;\r\n        const newPrev = runningQuantity;\r\n        const newNext = newPrev + change;\r\n\r\n        if (entry.previousQuantity !== newPrev || entry.newQuantity !== newNext) {\r\n            await tx.productHistory.update({\r\n                where: { id: entry.id },\r\n                data: { previousQuantity: newPrev, newQuantity: newNext }\r\n            });\r\n        }\r\n        runningQuantity = newNext;\r\n    }\r\n\r\n    await tx.product.update({\r\n        where: { id: productId },\r\n        data: { stock: runningQuantity }\r\n    });\r\n}\r\n\r\n// --- REQUISITIONS ---\r\n\r\nexport async function getRequisitionsAction(userId: string, locationId: string) {\r\n    try {\r\n        const requisitions = await db.requisition.findMany({\r\n            where: {\r\n                userId,\r\n                locationId\r\n            },\r\n            orderBy: {\r\n                createdAt: 'desc'\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: requisitions.map((req: any) => ({\r\n                id: req.id,\r\n                userId: req.userId,\r\n                locationId: req.branchId,\r\n                requisitionNumber: req.requisitionNumber,\r\n                title: req.title || '',\r\n                items: (req.items as any) || [],\r\n                notes: req.notes,\r\n                status: req.status,\r\n                createdAt: req.createdAt.toISOString(),\r\n                updatedAt: req.updatedAt.toISOString()\r\n            }))\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error fetching requisitions:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createRequisitionAction(data: any) {\r\n    try {\r\n        const requisition = await db.requisition.create({\r\n            data: {\r\n                userId: data.userId,\r\n                branchId: data.locationId,\r\n                requisitionNumber: data.requisitionNumber,\r\n                title: data.title,\r\n                items: data.items,\r\n                notes: data.notes,\r\n                status: data.status || 'draft'\r\n            }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: requisition.id,\r\n                userId: requisition.userId,\r\n                locationId: requisition.branchId,\r\n                requisitionNumber: requisition.requisitionNumber,\r\n                title: requisition.title || '',\r\n                items: (requisition.items as any) || [],\r\n                notes: requisition.notes,\r\n                status: requisition.status,\r\n                createdAt: requisition.createdAt.toISOString(),\r\n                updatedAt: requisition.updatedAt.toISOString()\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error creating requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateRequisitionAction(id: string, userId: string, data: any) {\r\n    try {\r\n        const requisition = await db.requisition.update({\r\n            where: { id, userId },\r\n            data: {\r\n                title: data.title,\r\n                items: data.items,\r\n                notes: data.notes,\r\n                status: data.status,\r\n                updatedAt: new Date()\r\n            }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: requisition.id,\r\n                userId: requisition.userId,\r\n                locationId: requisition.branchId,\r\n                requisitionNumber: requisition.requisitionNumber,\r\n                title: requisition.title || '',\r\n                items: (requisition.items as any) || [],\r\n                notes: requisition.notes,\r\n                status: requisition.status,\r\n                createdAt: requisition.createdAt.toISOString(),\r\n                updatedAt: requisition.updatedAt.toISOString()\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error updating requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteRequisitionAction(id: string, userId: string) {\r\n    try {\r\n        await db.requisition.delete({\r\n            where: { id, userId }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error deleting requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- REPORTS / ANALYTICS ---\r\n\r\nexport async function getStockSummaryReportAction(locationId: string, startDate: string, endDate: string) {\r\n    try {\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n\r\n        // Fetch all products for the location\r\n        const products = await db.product.findMany({\r\n            where: { branchId: locationId },\r\n            include: { category: true }\r\n        });\r\n\r\n        const reportData = await Promise.all(products.map(async (product: any) => {\r\n            // This is a simplified version of the logic that was likely in the RPC\r\n            // In a real production app, we'd use complex SQL or dedicated aggregate tables\r\n\r\n            // Get history for this product in the date range\r\n            const history = await db.productHistory.findMany({\r\n                where: {\r\n                    productId: product.id,\r\n                    locationId,\r\n                    createdAt: {\r\n                        gte: start,\r\n                        lte: end\r\n                    }\r\n                },\r\n                orderBy: { createdAt: 'asc' }\r\n            });\r\n\r\n            // Calculate metrics from history\r\n            let itemsSold = 0;\r\n            let stockIn = 0;\r\n            let adjustmentsIn = 0;\r\n            let adjustmentsOut = 0;\r\n\r\n            history.forEach((h: any) => {\r\n                const change = h.newQuantity - h.previousQuantity;\r\n                if (h.changeReason === 'SALE') {\r\n                    itemsSold += Math.abs(change);\r\n                } else if (h.changeReason === 'STOCK_IN' || h.changeReason === 'RESTOCK') {\r\n                    stockIn += change;\r\n                } else if (change > 0) {\r\n                    adjustmentsIn += change;\r\n                } else {\r\n                    adjustmentsOut += Math.abs(change);\r\n                }\r\n            });\r\n\r\n            // Get closing stock at end date (or current if after end date)\r\n            const closingStockEntry = await db.productHistory.findFirst({\r\n                where: {\r\n                    productId: product.id,\r\n                    locationId,\r\n                    createdAt: { lte: end }\r\n                },\r\n                orderBy: { createdAt: 'desc' }\r\n            });\r\n\r\n            const closingStock = closingStockEntry ? closingStockEntry.newQuantity : 0;\r\n            const openingStock = closingStock - (stockIn + adjustmentsIn - itemsSold - adjustmentsOut);\r\n\r\n            return {\r\n                productId: product.id,\r\n                productName: product.name,\r\n                itemNumber: product.sku || product.id,\r\n                imageUrl: product.imageUrl,\r\n                costPrice: Number(product.costPrice),\r\n                sellingPrice: Number(product.sellingPrice),\r\n                category: product.category?.name,\r\n                openingStock,\r\n                itemsSold,\r\n                stockIn,\r\n                transferOut: 0,\r\n                returnIn: 0,\r\n                returnOut: 0,\r\n                adjustmentsIn,\r\n                adjustmentsOut,\r\n                closingStock,\r\n                revaluation: closingStock * Number(product.costPrice)\r\n            };\r\n        }));\r\n\r\n        return { success: true, data: reportData };\r\n    } catch (error: any) {\r\n        console.error('Error generating stock summary report:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- STOCK RECONCILIATION & REPAIRS ---\r\n\r\nexport async function getProductReconciliationAction(businessId: string, productId: string) {\r\n    try {\r\n        const product = await db.product.findUnique({\r\n            where: { id: productId },\r\n            include: { category: true }\r\n        });\r\n\r\n        if (!product) return { success: false, error: 'Product not found' };\r\n\r\n        // Fetch all history entries\r\n        const history = await db.productHistory.findMany({\r\n            where: { productId, locationId: businessId },\r\n            orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n        });\r\n\r\n        // Fetch all sales containing this product\r\n        const sales = await db.sale.findMany({\r\n            where: { branchId: businessId },\r\n            orderBy: { date: 'asc' }\r\n        });\r\n\r\n        const openingStock = history.length > 0 ? history[0].newStock : 0;\r\n        const openingDate = history.length > 0 ? history[0].createdAt : null;\r\n\r\n        const dailyTransactions = new Map<string, any>();\r\n        let excludedSalesQty = 0;\r\n\r\n        sales.forEach(sale => {\r\n            const items = (sale.items as any[]) || [];\r\n            const soldQty = items\r\n                .filter(item => item.productId === productId)\r\n                .reduce((sum, item) => sum + (Number(item.quantity) || 0), 0);\r\n\r\n            if (soldQty > 0) {\r\n                if (openingDate && sale.date < openingDate) {\r\n                    excludedSalesQty += soldQty;\r\n                } else {\r\n                    const dateStr = sale.date.toISOString().split('T')[0];\r\n                    const day = dailyTransactions.get(dateStr) || { itemsSold: 0, stockAdded: 0, transferOut: 0, returnIn: 0, returnOut: 0, adjustments: 0 };\r\n                    day.itemsSold += soldQty;\r\n                    dailyTransactions.set(dateStr, day);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Movements (excluding initial entry)\r\n        const movements = history.slice(1);\r\n        movements.forEach(h => {\r\n            const dateStr = h.createdAt.toISOString().split('T')[0];\r\n            const delta = h.newStock - h.oldStock;\r\n            const reason = (h.changeReason || '').toLowerCase();\r\n\r\n            const day = dailyTransactions.get(dateStr) || { itemsSold: 0, stockAdded: 0, transferOut: 0, returnIn: 0, returnOut: 0, adjustments: 0 };\r\n\r\n            if (h.type === 'RESTOCK' || reason.includes('purchase') || reason.includes('addition')) {\r\n                day.stockAdded += delta;\r\n            } else if (reason.includes('transfer out')) {\r\n                day.transferOut += Math.abs(delta);\r\n            } else if (reason.includes('customer return')) {\r\n                day.returnIn += delta;\r\n            } else if (reason.includes('return to supplier')) {\r\n                day.returnOut += Math.abs(delta);\r\n            } else if (h.type !== 'SALE') {\r\n                day.adjustments += delta;\r\n            }\r\n            dailyTransactions.set(dateStr, day);\r\n        });\r\n\r\n        const sortedDates = Array.from(dailyTransactions.keys()).sort();\r\n        const dailyBreakdown = [];\r\n        let runningStock = openingStock;\r\n\r\n        for (const date of sortedDates) {\r\n            const day = dailyTransactions.get(date);\r\n            const startingStock = runningStock;\r\n            const endingStock = startingStock - day.itemsSold + day.stockAdded - day.transferOut + day.returnIn - day.returnOut + day.adjustments;\r\n\r\n            dailyBreakdown.push({\r\n                date,\r\n                startingStock,\r\n                ...day,\r\n                endingStock\r\n            });\r\n            runningStock = endingStock;\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                product: {\r\n                    id: product.id,\r\n                    name: product.name,\r\n                    quantity: product.stock,\r\n                    itemNumber: product.sku\r\n                },\r\n                currentStock: product.stock,\r\n                calculatedStock: runningStock,\r\n                discrepancy: product.stock - runningStock,\r\n                openingStock,\r\n                openingDate: openingDate?.toISOString(),\r\n                excludedSalesQty,\r\n                dailyBreakdown\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error in reconciliation action:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getStockRepairsPreviewAction(businessId: string) {\r\n    try {\r\n        const products = await db.product.findMany({\r\n            where: { branchId: businessId },\r\n            select: { id: true, name: true, stock: true }\r\n        });\r\n\r\n        const brokenChains = [];\r\n\r\n        for (const product of products) {\r\n            const history = await db.productHistory.findMany({\r\n                where: { productId: product.id, locationId: businessId },\r\n                orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n            });\r\n\r\n            if (history.length === 0) continue;\r\n\r\n            let runningQuantity = 0;\r\n            const brokenEntries = [];\r\n\r\n            for (const entry of history) {\r\n                const change = entry.newStock - entry.oldStock;\r\n                const expectedPrev = runningQuantity;\r\n                const expectedNext = expectedPrev + change;\r\n\r\n                if (entry.oldStock !== expectedPrev || entry.newStock !== expectedNext) {\r\n                    brokenEntries.push({\r\n                        entryId: entry.id,\r\n                        createdAt: entry.createdAt.toISOString(),\r\n                        changeReason: entry.changeReason,\r\n                        currentPrevQty: entry.oldStock,\r\n                        currentNewQty: entry.newStock,\r\n                        fixedPrevQty: expectedPrev,\r\n                        fixedNewQty: expectedNext\r\n                    });\r\n                }\r\n                runningQuantity = expectedNext;\r\n            }\r\n\r\n            if (brokenEntries.length > 0 || Math.abs(product.stock - runningQuantity) > 0.001) {\r\n                brokenChains.push({\r\n                    productId: product.id,\r\n                    productName: product.name,\r\n                    totalEntries: history.length,\r\n                    brokenEntries,\r\n                    finalFixedQty: runningQuantity,\r\n                    currentProductQty: product.stock\r\n                });\r\n            }\r\n        }\r\n\r\n        return { success: true, data: brokenChains };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function repairStockChainsAction(businessId: string, productIds?: string[]) {\r\n    try {\r\n        const ids = productIds || (await db.product.findMany({\r\n            where: { branchId: businessId },\r\n            select: { id: true }\r\n        })).map(p => p.id);\r\n\r\n        let repaired = 0;\r\n        let failed = 0;\r\n\r\n        for (const id of ids) {\r\n            try {\r\n                await recalculateStockChainAction(id, businessId);\r\n                repaired++;\r\n            } catch (err) {\r\n                failed++;\r\n            }\r\n        }\r\n\r\n        return { success: true, data: { repaired, failed } };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getActivityByEntityIdsAction(entityIds: string[]) {\r\n    try {\r\n        const records = await db.activityHistory.findMany({\r\n            where: { entityId: { in: entityIds } },\r\n            select: { entityId: true, entityName: true }\r\n        });\r\n        return { success: true, data: records };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message, data: [] };\r\n    }\r\n}\r\n\r\nexport async function updateStockHistoryDatesAction(entryIds: string[], newDate: string) {\r\n    try {\r\n        await db.productHistory.updateMany({\r\n            where: { id: { in: entryIds } },\r\n            data: { createdAt: new Date(newDate) }\r\n        });\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}