{"version":3,"sources":["../../../../src/lib/utils.ts","../../../../src/components/ui/button.tsx","../../../../node_modules/next/dist/compiled/%40edge-runtime/cookies/index.js","../../../../node_modules/shared/src/utils.ts","../../../../node_modules/lucide-react/src/defaultAttributes.ts","../../../../node_modules/lucide-react/src/createLucideIcon.ts","../../../../node_modules/lucide-react/src/Icon.ts","../../../../prisma/db.ts","../../../../src/app/actions/auth.ts","../../../../src/components/auth/AuthProvider.tsx"],"sourcesContent":["\r\nimport { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatNumber(value: number): string {\r\n  return value.toLocaleString(undefined, {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 2\r\n  });\r\n}\r\n\r\nexport function formatCashCurrency(amount: number, currency: string = 'USD'): string {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: currency,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(amount);\r\n}\r\n\r\nexport function formatCashAmount(amount: number, currency: string = 'USD'): string {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: currency,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(amount);\r\n}\r\n\r\n// Add function to format large numbers with appropriate units\r\nexport function formatLargeNumber(value: number): string {\r\n  if (value >= 1000000000) {\r\n    return (value / 1000000000).toFixed(1) + 'B';\r\n  } else if (value >= 1000000) {\r\n    return (value / 1000000).toFixed(1) + 'M';\r\n  } else if (value >= 1000) {\r\n    return (value / 1000).toFixed(1) + 'K';\r\n  }\r\n  return formatNumber(value);\r\n}\r\n\r\n/**\r\n * Formats a number input string with thousands separators while preserving decimal points.\r\n * This allows users to type decimals freely while still getting auto-comma formatting.\r\n * \r\n * Examples:\r\n * - \"1234\" → \"1,234\"\r\n * - \"1234.5\" → \"1,234.5\"\r\n * - \"1234.56\" → \"1,234.56\"\r\n * - \"1234.\" → \"1,234.\" (preserves trailing decimal)\r\n * \r\n * @param input - The raw input string from the user\r\n * @returns Formatted string with commas and preserved decimals\r\n */\r\nexport function formatNumberInput(input: string): string {\r\n  // Handle empty or invalid input\r\n  if (!input || input === '') return '';\r\n\r\n  // Remove all existing commas first\r\n  const cleaned = input.replace(/,/g, '');\r\n\r\n  // Check if it's just a decimal point\r\n  if (cleaned === '.') return '0.';\r\n\r\n  // Split into integer and decimal parts\r\n  const parts = cleaned.split('.');\r\n  const integerPart = parts[0] || '0';\r\n  const decimalPart = parts[1];\r\n\r\n  // Format integer part with commas\r\n  const formattedInteger = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\r\n  // Reconstruct with decimal part if it exists\r\n  if (parts.length > 1) {\r\n    // User has typed a decimal point\r\n    return decimalPart !== undefined\r\n      ? `${formattedInteger}.${decimalPart}`\r\n      : `${formattedInteger}.`;\r\n  }\r\n\r\n  return formattedInteger;\r\n}\r\n\r\n/**\r\n * Parses a formatted number input string to a number.\r\n * Strips commas and handles empty strings.\r\n * \r\n * @param input - Formatted input string (may contain commas)\r\n * @returns Parsed number value, or 0 if invalid\r\n */\r\nexport function parseNumberInput(input: string): number {\r\n  if (!input || input === '') return 0;\r\n  const cleaned = input.replace(/,/g, '');\r\n  const parsed = parseFloat(cleaned);\r\n  return isNaN(parsed) ? 0 : parsed;\r\n}\r\n","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  RequestCookies: () => RequestCookies,\n  ResponseCookies: () => ResponseCookies,\n  parseCookie: () => parseCookie,\n  parseSetCookie: () => parseSetCookie,\n  stringifyCookie: () => stringifyCookie\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/serialize.ts\nfunction stringifyCookie(c) {\n  var _a;\n  const attrs = [\n    \"path\" in c && c.path && `Path=${c.path}`,\n    \"expires\" in c && (c.expires || c.expires === 0) && `Expires=${(typeof c.expires === \"number\" ? new Date(c.expires) : c.expires).toUTCString()}`,\n    \"maxAge\" in c && typeof c.maxAge === \"number\" && `Max-Age=${c.maxAge}`,\n    \"domain\" in c && c.domain && `Domain=${c.domain}`,\n    \"secure\" in c && c.secure && \"Secure\",\n    \"httpOnly\" in c && c.httpOnly && \"HttpOnly\",\n    \"sameSite\" in c && c.sameSite && `SameSite=${c.sameSite}`,\n    \"partitioned\" in c && c.partitioned && \"Partitioned\",\n    \"priority\" in c && c.priority && `Priority=${c.priority}`\n  ].filter(Boolean);\n  const stringified = `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : \"\")}`;\n  return attrs.length === 0 ? stringified : `${stringified}; ${attrs.join(\"; \")}`;\n}\nfunction parseCookie(cookie) {\n  const map = /* @__PURE__ */ new Map();\n  for (const pair of cookie.split(/; */)) {\n    if (!pair)\n      continue;\n    const splitAt = pair.indexOf(\"=\");\n    if (splitAt === -1) {\n      map.set(pair, \"true\");\n      continue;\n    }\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];\n    try {\n      map.set(key, decodeURIComponent(value != null ? value : \"true\"));\n    } catch {\n    }\n  }\n  return map;\n}\nfunction parseSetCookie(setCookie) {\n  if (!setCookie) {\n    return void 0;\n  }\n  const [[name, value], ...attributes] = parseCookie(setCookie);\n  const {\n    domain,\n    expires,\n    httponly,\n    maxage,\n    path,\n    samesite,\n    secure,\n    partitioned,\n    priority\n  } = Object.fromEntries(\n    attributes.map(([key, value2]) => [\n      key.toLowerCase().replace(/-/g, \"\"),\n      value2\n    ])\n  );\n  const cookie = {\n    name,\n    value: decodeURIComponent(value),\n    domain,\n    ...expires && { expires: new Date(expires) },\n    ...httponly && { httpOnly: true },\n    ...typeof maxage === \"string\" && { maxAge: Number(maxage) },\n    path,\n    ...samesite && { sameSite: parseSameSite(samesite) },\n    ...secure && { secure: true },\n    ...priority && { priority: parsePriority(priority) },\n    ...partitioned && { partitioned: true }\n  };\n  return compact(cookie);\n}\nfunction compact(t) {\n  const newT = {};\n  for (const key in t) {\n    if (t[key]) {\n      newT[key] = t[key];\n    }\n  }\n  return newT;\n}\nvar SAME_SITE = [\"strict\", \"lax\", \"none\"];\nfunction parseSameSite(string) {\n  string = string.toLowerCase();\n  return SAME_SITE.includes(string) ? string : void 0;\n}\nvar PRIORITY = [\"low\", \"medium\", \"high\"];\nfunction parsePriority(string) {\n  string = string.toLowerCase();\n  return PRIORITY.includes(string) ? string : void 0;\n}\nfunction splitCookiesString(cookiesString) {\n  if (!cookiesString)\n    return [];\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          cookiesSeparatorFound = true;\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\n\n// src/request-cookies.ts\nvar RequestCookies = class {\n  constructor(requestHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    this._headers = requestHeaders;\n    const header = requestHeaders.get(\"cookie\");\n    if (header) {\n      const parsed = parseCookie(header);\n      for (const [name, value] of parsed) {\n        this._parsed.set(name, { name, value });\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this._parsed[Symbol.iterator]();\n  }\n  /**\n   * The amount of cookies received from the client\n   */\n  get size() {\n    return this._parsed.size;\n  }\n  get(...args) {\n    const name = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(name);\n  }\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed);\n    if (!args.length) {\n      return all.map(([_, value]) => value);\n    }\n    const name = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter(([n]) => n === name).map(([_, value]) => value);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  set(...args) {\n    const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;\n    const map = this._parsed;\n    map.set(name, { name, value });\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value2]) => stringifyCookie(value2)).join(\"; \")\n    );\n    return this;\n  }\n  /**\n   * Delete the cookies matching the passed name or names in the request.\n   */\n  delete(names) {\n    const map = this._parsed;\n    const result = !Array.isArray(names) ? map.delete(names) : names.map((name) => map.delete(name));\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value]) => stringifyCookie(value)).join(\"; \")\n    );\n    return result;\n  }\n  /**\n   * Delete all the cookies in the cookies in the request.\n   */\n  clear() {\n    this.delete(Array.from(this._parsed.keys()));\n    return this;\n  }\n  /**\n   * Format the cookies in the request as a string for logging\n   */\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map((v) => `${v.name}=${encodeURIComponent(v.value)}`).join(\"; \");\n  }\n};\n\n// src/response-cookies.ts\nvar ResponseCookies = class {\n  constructor(responseHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    var _a, _b, _c;\n    this._headers = responseHeaders;\n    const setCookie = (_c = (_b = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders)) != null ? _b : responseHeaders.get(\"set-cookie\")) != null ? _c : [];\n    const cookieStrings = Array.isArray(setCookie) ? setCookie : splitCookiesString(setCookie);\n    for (const cookieString of cookieStrings) {\n      const parsed = parseSetCookie(cookieString);\n      if (parsed)\n        this._parsed.set(parsed.name, parsed);\n    }\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.\n   */\n  get(...args) {\n    const key = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(key);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.\n   */\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed.values());\n    if (!args.length) {\n      return all;\n    }\n    const key = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter((c) => c.name === key);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.\n   */\n  set(...args) {\n    const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;\n    const map = this._parsed;\n    map.set(name, normalizeCookie({ name, value, ...cookie }));\n    replace(map, this._headers);\n    return this;\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.\n   */\n  delete(...args) {\n    const [name, options] = typeof args[0] === \"string\" ? [args[0]] : [args[0].name, args[0]];\n    return this.set({ ...options, name, value: \"\", expires: /* @__PURE__ */ new Date(0) });\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map(stringifyCookie).join(\"; \");\n  }\n};\nfunction replace(bag, headers) {\n  headers.delete(\"set-cookie\");\n  for (const [, value] of bag) {\n    const serialized = stringifyCookie(value);\n    headers.append(\"set-cookie\", serialized);\n  }\n}\nfunction normalizeCookie(cookie = { name: \"\", value: \"\" }) {\n  if (typeof cookie.expires === \"number\") {\n    cookie.expires = new Date(cookie.expires);\n  }\n  if (cookie.maxAge) {\n    cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);\n  }\n  if (cookie.path === null || cookie.path === void 0) {\n    cookie.path = \"/\";\n  }\n  return cookie;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  RequestCookies,\n  ResponseCookies,\n  parseCookie,\n  parseSetCookie,\n  stringifyCookie\n});\n","import { CamelToPascal } from './utility-types';\n\n/**\n * Converts string to kebab case\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\n/**\n * Converts string to camel case\n *\n * @param {string} string\n * @returns {string} A camelized string\n */\nexport const toCamelCase = <T extends string>(string: T) =>\n  string.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2) =>\n    p2 ? p2.toUpperCase() : p1.toLowerCase(),\n  );\n\n/**\n * Converts string to pascal case\n *\n * @param {string} string\n * @returns {string} A pascalized string\n */\nexport const toPascalCase = <T extends string>(string: T): CamelToPascal<T> => {\n  const camelCase = toCamelCase(string);\n\n  return (camelCase.charAt(0).toUpperCase() + camelCase.slice(1)) as CamelToPascal<T>;\n};\n\n/**\n * Merges classes into a single string\n *\n * @param {array} classes\n * @returns {string} A string of classes\n */\nexport const mergeClasses = <ClassType = string | undefined | null>(...classes: ClassType[]) =>\n  classes\n    .filter((className, index, array) => {\n      return (\n        Boolean(className) &&\n        (className as string).trim() !== '' &&\n        array.indexOf(className) === index\n      );\n    })\n    .join(' ')\n    .trim();\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { createElement, forwardRef } from 'react';\nimport { mergeClasses, toKebabCase } from '@lucide/shared';\nimport { IconNode, LucideProps } from './types';\nimport Icon from './Icon';\n\n/**\n * Create a Lucide icon component\n * @param {string} iconName\n * @param {array} iconNode\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst createLucideIcon = (iconName: string, iconNode: IconNode) => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(({ className, ...props }, ref) =>\n    createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props,\n    }),\n  );\n\n  Component.displayName = `${iconName}`;\n\n  return Component;\n};\n\nexport default createLucideIcon;\n","import { createElement, forwardRef } from 'react';\nimport defaultAttributes from './defaultAttributes';\nimport { IconNode, LucideProps } from './types';\nimport { mergeClasses } from '@lucide/shared';\n\ninterface IconComponentProps extends LucideProps {\n  iconNode: IconNode;\n}\n\n/**\n * Lucide icon component\n *\n * @component Icon\n * @param {object} props\n * @param {string} props.color - The color of the icon\n * @param {number} props.size - The size of the icon\n * @param {number} props.strokeWidth - The stroke width of the icon\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\n * @param {string} props.className - The class name of the icon\n * @param {IconNode} props.children - The children of the icon\n * @param {IconNode} props.iconNode - The icon node of the icon\n *\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst Icon = forwardRef<SVGSVGElement, IconComponentProps>(\n  (\n    {\n      color = 'currentColor',\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = '',\n      children,\n      iconNode,\n      ...rest\n    },\n    ref,\n  ) => {\n    return createElement(\n      'svg',\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? (Number(strokeWidth) * 24) / Number(size) : strokeWidth,\n        className: mergeClasses('lucide', className),\n        ...rest,\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]),\n      ],\n    );\n  },\n);\n\nexport default Icon;\n","\r\nimport { \r\n  PrismaClient, \r\n  Prisma,\r\n  BranchType, \r\n  SaleSource, \r\n  PaymentStatus, \r\n  DiscountType, \r\n  ProductHistoryType, \r\n  TransferStatus, \r\n  RequisitionStatus, \r\n  TaskPriority, \r\n  TaskStatus, \r\n  RecurrenceType, \r\n  ActivityType, \r\n  ActivityModule,\r\n  // Models\r\n  User, \r\n  Role, \r\n  BranchSettings, \r\n  Task, \r\n  ActivityHistory, \r\n  Sale, \r\n  SaleItem, \r\n  Expense, \r\n  ExpenseCategory, \r\n  CashAccount, \r\n  CashTransaction,\r\n  Branch,\r\n  Product,\r\n  Customer,\r\n  Campaign,\r\n  Message,\r\n  MessageTemplate,\r\n  WhatsAppSession,\r\n  Transaction,\r\n  Category,\r\n  Supplier,\r\n  SaleCategory,\r\n  StockTransfer,\r\n  StockTransferItem,\r\n  Requisition,\r\n  RequisitionItem,\r\n  TaskCategory,\r\n  InstallmentPayment,\r\n  RefreshToken,\r\n  Permission,\r\n  Account,\r\n  ProductHistory,\r\n  PasswordResetToken\r\n} from '@prisma/client';\r\nimport { Pool } from 'pg';\r\nimport { PrismaPg } from '@prisma/adapter-pg';\r\nimport 'dotenv/config';\r\n\r\nconst connectionString = process.env.DATABASE_URL;\r\n\r\nconst pool = new Pool({ connectionString });\r\nconst adapter = new PrismaPg(pool);\r\n\r\nconst globalForPrisma = global as unknown as { prisma?: PrismaClient };\r\n\r\n// Force re-initialization if new models like 'branch' or 'productHistory' are missing from the cached instance\r\nconst isStale = globalForPrisma.prisma && (!('branch' in globalForPrisma.prisma) || !('productHistory' in globalForPrisma.prisma));\r\n\r\nexport const db =\r\n  (globalForPrisma.prisma && !isStale) ?\r\n    globalForPrisma.prisma :\r\n    new PrismaClient({\r\n      adapter,\r\n      log: ['error', 'warn'],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  globalForPrisma.prisma = db;\r\n}\r\n\r\nexport { \r\n  PrismaClient, \r\n  Prisma,\r\n  BranchType, \r\n  SaleSource, \r\n  PaymentStatus, \r\n  DiscountType, \r\n  ProductHistoryType, \r\n  TransferStatus, \r\n  RequisitionStatus, \r\n  TaskPriority, \r\n  TaskStatus, \r\n  RecurrenceType, \r\n  ActivityType, \r\n  ActivityModule \r\n};\r\n\r\nexport type { \r\n  User, \r\n  Role, \r\n  BranchSettings, \r\n  Task, \r\n  ActivityHistory, \r\n  Sale, \r\n  SaleItem, \r\n  Expense, \r\n  ExpenseCategory, \r\n  CashAccount, \r\n  CashTransaction,\r\n  Branch,\r\n  Product,\r\n  Customer,\r\n  Campaign,\r\n  Message,\r\n  MessageTemplate,\r\n  WhatsAppSession,\r\n  Transaction,\r\n  Category,\r\n  Supplier,\r\n  SaleCategory,\r\n  StockTransfer,\r\n  StockTransferItem,\r\n  Requisition,\r\n  RequisitionItem,\r\n  TaskCategory,\r\n  InstallmentPayment,\r\n  RefreshToken,\r\n  Permission,\r\n  Account,\r\n  ProductHistory,\r\n  PasswordResetToken\r\n};","'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { hash, compare } from 'bcryptjs';\r\n\r\nexport async function signUpAction(data: any) {\r\n    try {\r\n        const { email, password, name } = data;\r\n\r\n        // Check if user already exists\r\n        const existingUser = await db.user.findUnique({\r\n            where: { email }\r\n        });\r\n\r\n        if (existingUser) {\r\n            return { success: false, error: \"User already exists\" };\r\n        }\r\n\r\n        const hashedPassword = await hash(password, 10);\r\n\r\n        // Find or create a default role (assuming \"Admin\" for the first user or similar)\r\n        let role = await db.role.findFirst({\r\n            where: { name: \"Admin\" }\r\n        });\r\n\r\n        if (!role) {\r\n            role = await db.role.create({\r\n                data: { name: \"Admin\", description: \"Default Admin Role\" }\r\n            });\r\n        }\r\n\r\n        const user = await db.user.create({\r\n            data: {\r\n                email,\r\n                password: hashedPassword,\r\n                name,\r\n                roleId: role.id\r\n            }\r\n        });\r\n\r\n        return { success: true, user: { id: user.id, email: user.email } };\r\n    } catch (error: any) {\r\n        console.error('Error in signUpAction:', error);\r\n        return { success: false, error: error.message || 'Failed to sign up' };\r\n    }\r\n}\r\n\r\nexport async function signInAction(email: string, password: string) {\r\n    try {\r\n        const user = await db.user.findUnique({\r\n            where: { email },\r\n            include: { role: true }\r\n        });\r\n\r\n        if (!user || !user.password) {\r\n            return { success: false, error: \"Invalid email or password\" };\r\n        }\r\n\r\n        const isPasswordValid = await compare(password, user.password);\r\n\r\n        if (!isPasswordValid) {\r\n            return { success: false, error: \"Invalid email or password\" };\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            user: {\r\n                id: user.id,\r\n                email: user.email,\r\n                name: user.name,\r\n                role: user.role?.name\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error in signInAction:', error);\r\n        return { success: false, error: error.message || 'Failed to sign in' };\r\n    }\r\n}\r\n\r\nexport async function resetPasswordAction(newPassword: string, resetToken?: string) {\r\n    try {\r\n        if (!resetToken) {\r\n            return { success: false, error: \"Reset token is missing or invalid\" };\r\n        }\r\n\r\n        // Ideally here you'd verify the resetToken against a secure token store \r\n        // For the sake of this migration, we are bypassing token verification logic \r\n        // to focus on Prisma replacement for Supabase. This logic MUST be updated.\r\n        const userId = \"extract-from-token\";\r\n\r\n        // Hash the new password before storing it\r\n        const hashedPassword = await hash(newPassword, 10);\r\n\r\n        // Update the password in database\r\n        // await db.user.update({\r\n        //     where: { id: userId },\r\n        //     data: {\r\n        //         password: hashedPassword // Assuming you add a password field to the User model\r\n        //     }\r\n        // });\r\n\r\n        // Note: For actual proper authentication you'd integrate this closely with NextAuth\r\n        // and its reset password flow (which usually involves sending a new verification token \r\n        // and updating credentials).\r\n\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error resetting password:', error);\r\n        return { success: false, error: error.message || 'Failed to reset password' };\r\n    }\r\n}\r\n\r\nexport async function signOutAction() {\r\n    // With NextAuth, signing out is handled by the `signOut` function from `next-auth/react`\r\n    // on the client side. We don't strictly need a server action for this if we use NextAuth. \r\n    // Adding a dummy action here to satisfy the `ResetPassword` component's import.\r\n    console.log(\"signOutAction called. If using NextAuth, call client-side signOut() instead.\");\r\n    return { success: true };\r\n}\r\n","import * as React from 'react';\r\nimport { useState, useContext, createContext, useEffect } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\nimport { signInAction, signUpAction } from '@/app/actions/auth';\r\n\r\n// Simplified type declarations for our mock\r\ninterface User {\r\n  id: string;\r\n  email?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  loading: boolean;\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signInWithGoogle: () => Promise<void>;\r\n  signUp: (email: string, password: string, options?: { data?: Record<string, any> }) => Promise<{ error: Error | null; user?: User | null }>;\r\n  signOut: () => Promise<void>;\r\n  resetPassword: (email: string) => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Auto-login for development while migrating\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const storedUser = localStorage.getItem('gonza_user');\r\n    if (storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    const result = await signInAction(email, password);\r\n    if (result.success && result.user) {\r\n      const userData = { id: result.user.id, email: result.user.email };\r\n      setUser(userData);\r\n      localStorage.setItem('gonza_user', JSON.stringify(userData));\r\n      toast.success('Signed in successfully');\r\n    } else {\r\n      throw new Error(result.error || 'Login failed');\r\n    }\r\n  };\r\n\r\n  const signInWithGoogle = async () => {\r\n    // Mock for now, will integrate with actual OAuth later\r\n    toast.error('Google sign-in not yet implemented with Prisma');\r\n  };\r\n\r\n  const signUp = async (email: string, password: string, options?: { data?: Record<string, any> }) => {\r\n    const result = await signUpAction({ email, password, name: options?.data?.name });\r\n    if (result.success && result.user) {\r\n      toast.success('Account created successfully. Please sign in.');\r\n      return { error: null, user: result.user };\r\n    } else {\r\n      return { error: new Error(result.error || 'Sign up failed'), user: null };\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    setUser(null);\r\n    localStorage.removeItem('gonza_user');\r\n    toast.success('Successfully signed out');\r\n  };\r\n\r\n  const resetPassword = async (email: string) => {\r\n    toast.success('Password reset email sent');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      user,\r\n      loading,\r\n      signIn,\r\n      signInWithGoogle,\r\n      signUp,\r\n      signOut,\r\n      resetPassword\r\n    }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n"],"names":[],"mappings":"yfACA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,mBAEO,SAAS,EAAG,GAAG,CAAoB,EACxC,MAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,GACtB,CAEO,SAAS,EAAa,CAAa,EACxC,OAAO,EAAM,cAAc,MAAC,EAAW,CACrC,sBAAuB,EACvB,sBAAuB,CACzB,EACF,CAEO,SAAS,EAAmB,CAAc,CAAE,EAAmB,KAAK,EACzE,OAAO,IAAI,KAAK,YAAY,CAAC,QAAS,CACpC,MAAO,WACP,SAAU,EACV,sBAAuB,EACvB,sBAAuB,CACzB,GAAG,MAAM,CAAC,EACZ,CAEO,SAAS,EAAiB,CAAc,CAAE,EAAmB,KAAK,EACvE,OAAO,IAAI,KAAK,YAAY,CAAC,QAAS,CACpC,MAAO,WACP,SAAU,EACV,sBAAuB,EACvB,sBAAuB,CACzB,GAAG,MAAM,CAAC,EACZ,CA2BO,SAAS,EAAkB,CAAa,EAE7C,GAAI,CAAC,GAAmB,KAAV,EAAc,MAAO,GAGnC,IAAM,EAAU,EAAM,OAAO,CAAC,KAAM,IAGpC,GAAgB,MAAZ,EAAiB,MAAO,KAG5B,IAAM,EAAQ,EAAQ,KAAK,CAAC,KACtB,EAAc,CAAK,CAAC,EAAE,EAAI,IAC1B,EAAc,CAAK,CAAC,EAAE,CAGtB,EAAmB,EAAY,OAAO,CAAC,wBAAyB,YAGtE,AAAI,EAAM,MAAM,CAAG,GAAG,IAEG,IAAhB,EACH,CAAA,EAAG,EAAiB,CAAC,EAAE,EAAA,CAAa,CACpC,CAAA,EAAG,EAAiB,CAAC,CAAC,CAGrB,CACT,CASO,SAAS,EAAiB,CAAa,EAC5C,GAAI,CAAC,GAAmB,KAAV,EAAc,OAAO,EACnC,IAAM,EAAU,EAAM,OAAO,CAAC,KAAM,IAC9B,EAAS,WAAW,GAC1B,OAAO,MAAM,GAAU,EAAI,CAC7B,mPCnGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,kDAEA,IAAM,EAAiB,CAAA,EAAA,EAAA,GAAA,AAAG,EACxB,2VACA,CACE,SAAU,CACR,QAAS,CACP,QAAS,yDACT,YACE,qEACF,QACE,iFACF,UACE,+DACF,MAAO,+CACP,KAAM,iDACR,EACA,KAAM,CACJ,QAAS,iBACT,GAAI,sBACJ,GAAI,uBACJ,KAAM,WACR,CACF,EACA,gBAAiB,CACf,QAAS,UACT,KAAM,SACR,CACF,GASI,EAAS,EAAA,UAAgB,CAC7B,CAAC,WAAE,CAAS,CAAE,SAAO,MAAE,CAAI,SAAE,GAAU,CAAK,CAAE,GAAG,EAAO,CAAE,KACxD,IAAM,EAAO,EAAU,EAAA,IAAI,CAAG,SAC9B,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAe,SAAE,OAAS,YAAM,CAAU,IACxD,IAAK,EACJ,GAAG,CAAK,EAGf,EAEF,GAAO,WAAW,CAAG,oQCpDrB,IAAI,EAAY,OAAO,cAAc,CACjC,EAAmB,OAAO,wBAAwB,CAClD,EAAoB,OAAO,mBAAmB,CAC9C,EAAe,OAAO,SAAS,CAAC,cAAc,CAgB9C,EAAc,CAAC,EAfK,EAgBF,CACpB,eAAgB,IAAM,EACtB,gBAAiB,IAAM,EACvB,YAAa,IAAM,EACnB,eAAgB,IAAM,EACtB,gBAAiB,IAAM,CACzB,EArBE,IAAK,IAAI,KAAQ,EACf,EAcK,EAda,EAAM,CAAE,GAAhB,CAAqB,CAAG,CAAC,EAAK,CAAE,YAAY,CAAK,GAwB/D,SAAS,EAAgB,CAAC,EACxB,IAAI,EACJ,IAAM,EAAQ,CACZ,SAAU,GAAK,EAAE,IAAI,EAAI,CAAC,KAAK,EAAE,EAAE,IAAI,CAAA,CAAE,CACzC,YAAa,IAAM,CAAD,CAAG,OAAO,EAAkB,CAAC,GAAf,EAAE,OAAO,GAAW,CAAC,QAAQ,EAAE,AAAC,CAAqB,iBAAd,EAAE,OAAO,CAAgB,IAAI,KAAK,EAAE,OAAO,EAAI,EAAE,OAAA,AAAO,EAAE,WAAW,GAAA,CAAI,CAChJ,WAAY,GAAyB,UAApB,OAAO,EAAE,MAAM,EAAiB,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAA,CAAE,CACtE,WAAY,GAAK,EAAE,MAAM,EAAI,CAAC,OAAO,EAAE,EAAE,MAAM,CAAA,CAAE,CACjD,WAAY,GAAK,EAAE,MAAM,EAAI,SAC7B,aAAc,GAAK,EAAE,QAAQ,EAAI,WACjC,aAAc,GAAK,EAAE,QAAQ,EAAI,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAA,CAAE,CACzD,gBAAiB,GAAK,EAAE,WAAW,EAAI,cACvC,aAAc,GAAK,EAAE,QAAQ,EAAI,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAA,CAAE,CAC1D,CAAC,MAAM,CAAC,SACH,EAAc,CAAA,EAAG,EAAE,IAAI,CAAC,CAAC,EAAE,mBAAmB,AAAkB,OAAjB,EAAK,EAAE,KAAA,AAAK,EAAY,EAAK,IAAA,CAAK,CACvF,OAAwB,IAAjB,EAAM,MAAM,CAAS,EAAc,CAAA,EAAG,EAAY,EAAE,EAAE,EAAM,IAAI,CAAC,MAAA,CAAO,AACjF,CACA,SAAS,EAAY,CAAM,EACzB,IAAM,EAAsB,IAAhB,AAAoB,IAChC,IAAK,IAAM,CADc,IACN,EAAO,KAAK,CAAC,OAAQ,CACtC,GAAI,CAAC,EACH,SACF,IAAM,EAAU,EAAK,OAAO,CAAC,KAC7B,GAAI,AAAY,CAAC,MAAG,CAClB,EAAI,GAAG,CAAC,EAAM,QACd,QACF,CACA,GAAM,CAAC,EAAK,EAAM,CAAG,CAAC,EAAK,KAAK,CAAC,EAAG,GAAU,EAAK,KAAK,CAAC,EAAU,GAAG,CACtE,GAAI,CACF,EAAI,GAAG,CAAC,EAAK,mBAA4B,MAAT,EAAgB,EAAQ,QAC1D,CAAE,KAAM,CACR,CACF,CACA,OAAO,CACT,CACA,SAAS,EAAe,CAAS,EAC/B,GAAI,CAAC,EACH,OAAO,AAET,EAHgB,CAGV,CAAC,CAFO,AAEN,EAAM,EAAM,CAAE,GAAG,EAAW,CAAG,EAAY,GAC7C,QACJ,CAAM,SACN,CAAO,UACP,CAAQ,QACR,CAAM,MACN,CAAI,UACJ,CAAQ,QACR,CAAM,aACN,CAAW,UACX,CAAQ,CACT,CAAG,OAAO,WAAW,CACpB,EAAW,GAAG,CAAC,CAAC,CAAC,EAAK,EAAO,GAAK,CAChC,EAAI,WAAW,GAAG,OAAO,CAAC,KAAM,IAChC,EACD,EAeI,MAYc,EAZN,AAiBM,EAfN,CAAC,CAfD,AAyBY,EAKA,IA7BzB,EACA,MAAO,mBAAmB,UAC1B,EACA,GAAG,GAAW,CAAE,QAAS,IAAI,KAAK,EAAS,CAAC,CAC5C,GAAG,GAAY,CAAE,UAAU,CAAK,CAAC,CACjC,GAAqB,UAAlB,OAAO,GAAuB,CAAE,OAAQ,OAAO,EAAQ,CAAC,MAC3D,EACA,GAAG,GAAY,CAAE,QAAA,CAmBZ,CAnBsB,CAmBZ,QAAQ,CADzB,AAC0B,EADjB,GAlBkC,GAkB3B,WAAW,IACS,EAAS,KAAK,CAnBG,CAAC,CACpD,GAAG,GAAU,CAAE,QAAQ,CAAK,CAAC,CAC7B,GAAG,GAAY,CAAE,QAAA,CAsBZ,CAtBsB,CAsBb,QAAQ,CADxB,AACyB,EADhB,GArBkC,GAqB3B,WAAW,IACQ,EAAS,KAAK,CAtBI,CAAC,CACpD,GAAG,GAAe,CAAE,aAAa,CAAK,CAAC,AACzC,EAIA,IAAM,EAAO,CAAC,EACd,IAAK,IAAM,KAAO,EAAG,AACf,CAAC,CAAC,EAAI,EAAE,CACV,CAAI,CAAC,EAAI,CAAG,CAAC,CAAC,EAAA,AAAI,EAGtB,OAAO,CATQ,CACjB,CAxEA,EAAO,OAAO,CAXc,CARV,CAAC,AAmBF,EAnBM,IAAc,KACnC,GAAI,GAAwB,UAAhB,OAAO,GAAqC,YAAhB,AAA4B,OAArB,EAC7C,IAAK,IAAI,KAAO,EAAkB,GAC3B,AAAD,EAAc,CAAlB,GAAsB,CAAC,EAAI,SAHJ,IAGY,GACjC,EAAU,EAAI,CAD2B,CACtB,CAAE,IAAK,IAAM,CAAI,CAAC,EAAI,CAAE,WAAY,CAAC,CAAC,EAAO,EAAiB,EAAM,EAAA,CAAI,EAAK,EAAK,UAAU,AAAC,GAEtH,OAAO,EACT,EACwC,EAAU,CAAC,EAAG,aAAc,CAAE,OAAO,CAAK,GAWpD,CAXwD,EA6FtF,IAAI,EAAY,CAAC,SAAU,MAAO,OAAO,CAKrC,EAAW,CAAC,MAAO,SAAU,OAAO,CA0DpC,EAAiB,MACnB,YAAY,CAAc,CAAE,CAE1B,IAAI,CAAC,OAAO,CAAmB,EAAhB,EAAoB,IACnC,IAAI,CAAC,EADuB,MACf,CAAG,EAChB,MAAM,EAAS,EAAe,GAAG,CAAC,UAClC,GAAI,EAEF,IAAK,EAFK,GAEC,CAAC,EAAM,EAAM,GADT,CACa,CADD,GAEzB,GADkC,CAC9B,CAAC,OAAO,CAAC,GAAG,CAAC,EAAM,CAAE,aAAM,CAAM,EAG3C,CACA,CAAC,OAAO,QAAQ,CAAC,EAAG,CAClB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,QAAQ,CAAC,EACtC,CAIA,IAAI,MAAO,CACT,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,AAC1B,CACA,IAAI,GAAG,CAAI,CAAE,CACX,IAAM,EAA0B,UAAnB,OAAO,CAAI,CAAC,EAAE,CAAgB,CAAI,CAAC,EAAE,CAAG,CAAI,CAAC,EAAE,CAAC,IAAI,CACjE,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC1B,CACA,OAAO,GAAG,CAAI,CAAE,CACd,IAAI,EACJ,IAAM,EAAM,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EACnC,GAAI,CAAC,EAAK,MAAM,CACd,CADgB,MACT,EAAI,GAAG,CAAC,CAAC,CAAC,EAAG,EAAM,GAAK,GAEjC,IAAM,EAA0B,UAAnB,OAAO,CAAI,CAAC,EAAE,CAAgB,CAAI,CAAC,EAAE,CAAG,AAAkB,OAAjB,EAAK,CAAI,CAAC,EAAA,AAAE,EAAY,KAAK,EAAI,EAAG,IAAI,CAC9F,OAAO,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,GAAK,IAAM,GAAM,GAAG,CAAC,CAAC,CAAC,EAAG,EAAM,GAAK,EAC7D,CACA,IAAI,CAAI,CAAE,CACR,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC1B,CACA,IAAI,GAAG,CAAI,CAAE,CACX,GAAM,CAAC,EAAM,EAAM,CAAmB,IAAhB,EAAK,MAAM,CAAS,CAAC,CAAI,CAAC,EAAE,CAAC,IAAI,CAAE,CAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAG,EACpE,EAAM,IAAI,CAAC,OAAO,CAMxB,OALA,EAAI,GAAG,CAAC,EAAM,MAAE,QAAM,CAAM,GAC5B,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,SACA,MAAM,IAAI,CAAC,GAAK,GAAG,CAAC,CAAC,CAAC,EAAG,EAAO,GAAK,EAAgB,IAAS,IAAI,CAAC,OAE9D,IAAI,AACb,CAIA,OAAO,CAAK,CAAE,CACZ,IAAM,EAAM,IAAI,CAAC,OAAO,CAClB,EAAS,AAAC,MAAM,OAAO,CAAC,GAA6B,EAAM,GAAG,CAAC,AAAC,GAAS,EAAI,MAAM,CAAC,IAAnD,EAAI,MAAM,CAAC,GAKlD,OAJA,IAAI,CAAC,QAAQ,CAAC,GAAG,CACf,SACA,MAAM,IAAI,CAAC,GAAK,GAAG,CAAC,CAAC,CAAC,EAAG,EAAM,GAAK,EAAgB,IAAQ,IAAI,CAAC,OAE5D,CACT,CAIA,OAAQ,CAEN,OADA,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,KACjC,IAAI,AACb,CAIA,CAAC,OAAO,GAAG,CAAC,+BAA+B,EAAG,CAC5C,MAAO,CAAC,eAAe,EAAE,KAAK,SAAS,CAAC,OAAO,WAAW,CAAC,IAAI,CAAC,OAAO,GAAA,CACzE,AAD6E,CAE7E,UAAW,CACT,MAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,AAAC,GAAM,CAAA,EAAG,EAAE,IAAI,CAAC,CAAC,EAAE,mBAAmB,EAAE,KAAK,EAAA,CAAG,EAAE,IAAI,CAAC,KAChG,CACF,EAGI,EAAkB,MACpB,YAAY,CAAe,CAAE,KAGvB,EAAI,EAAI,EADZ,IAAI,CAAC,OAAO,CAAmB,EAAhB,EAAoB,IAEnC,IAAI,CAAC,EAFuB,MAEf,CAAG,EAChB,MAAM,EAA8J,AAAlJ,OAAC,EAAK,AAA0F,OAAzF,EAAK,AAAuC,OAAtC,EAAK,EAAgB,YAAA,AAAY,EAAY,KAAK,EAAI,EAAG,IAAI,CAAC,EAAA,CAAgB,CAAY,EAAK,EAAgB,GAAG,CAAC,aAAA,CAAa,CAAY,EAAK,EAAE,CAElL,IAAK,MAAM,KADW,MAAM,KACD,EADQ,CAAC,GAAa,EA3IrD,AA2IiE,SA3IxD,AAAmB,CAAa,EACvC,GAAI,CAAC,EACH,MAAO,EAAE,CACX,IAEI,EACA,EACA,EACA,EACA,EANA,EAAiB,EAAE,CACnB,EAAM,EAMV,SAAS,IACP,KAAO,EAAM,EAAc,MAAM,EAAI,KAAK,IAAI,CAAC,EAAc,MAAM,CAAC,KAClE,CADyE,EAClE,EAET,OAAO,EAAM,EAAc,MAC7B,AADmC,CAMnC,KAAO,EAAM,EAAc,MAAM,EAAE,CAGjC,IAFA,EAAQ,EACR,GAAwB,EACjB,KAEL,GAAI,AAAO,OADX,EAAK,AADkB,EACJ,MAAM,CAAC,EAAA,EACV,CAKd,IAJA,EAAY,EACZ,GAAO,EACP,IACA,EAAY,EACL,EAAM,EAAc,MAAM,EAZ9B,AAAO,EAY2B,KAbzC,EAAK,EAAc,MAAM,CAAC,CAaiC,CAbjC,GACE,MAAP,GAAqB,MAAP,GAa7B,GAAO,EAEL,EAAM,EAAc,MAAM,EAAkC,KAAK,CAAnC,EAAc,MAAM,CAAC,IACrD,GAAwB,EACxB,EAAM,EACN,EAAe,IAAI,CAAC,EAAc,SAAS,CAAC,EAAO,IACnD,EAAQ,GAER,EAAM,EAAY,CAEtB,MACE,CADK,EACE,GAGP,CAAC,GAAyB,GAAO,EAAc,MAAA,AAAM,EAAE,CACzD,EAAe,IAAI,CAAC,EAAc,SAAS,CAAC,EAAO,EAAc,MAAM,EAE3E,CACA,OAAO,CACT,EAyFoF,GACtC,CACxC,MAAM,EAAS,EAAe,GAC1B,GACF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAO,IAAI,CAAE,EAClC,CACF,CAIA,IAAI,GAAG,CAAI,CAAE,CACX,IAAM,EAAyB,UAAnB,OAAO,CAAI,CAAC,EAAE,CAAgB,CAAI,CAAC,EAAE,CAAG,CAAI,CAAC,EAAE,CAAC,IAAI,CAChE,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC1B,CAIA,OAAO,GAAG,CAAI,CAAE,CACd,IAAI,EACJ,IAAM,EAAM,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAC1C,GAAI,CAAC,EAAK,MAAM,CACd,CADgB,MACT,EAET,IAAM,EAAyB,UAAnB,OAAO,CAAI,CAAC,EAAE,CAAgB,CAAI,CAAC,EAAE,CAAG,AAAkB,OAAjB,EAAK,CAAI,CAAC,EAAA,AAAE,EAAY,KAAK,EAAI,EAAG,IAAI,CAC7F,OAAO,EAAI,MAAM,CAAC,AAAC,GAAM,EAAE,IAAI,GAAK,EACtC,CACA,IAAI,CAAI,CAAE,CACR,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC1B,CAIA,IAAI,GAAG,CAAI,CAAE,CACX,GAAM,CAAC,EAAM,EAAO,EAAO,CAAmB,IAAhB,EAAK,MAAM,CAAS,CAAC,CAAI,CAAC,EAAE,CAAC,IAAI,CAAE,CAAI,CAAC,EAAE,CAAC,KAAK,CAAE,CAAI,CAAC,EAAE,CAAC,CAAG,EACrF,EAAM,IAAI,CAAC,OAAO,CAGxB,OAFA,EAAI,GAAG,CAAC,EAAM,AAyBlB,SAAS,AAAgB,EAAS,CAAE,KAAM,GAAI,MAAO,EAAG,CAAC,EAUvD,MAT8B,UAA1B,AAAoC,OAA7B,EAAO,OAAO,EACvB,GAAO,OAAO,CAAG,IAAI,KAAK,EAAO,QAAO,EAEtC,EAAO,MAAM,EAAE,CACjB,EAAO,OAAO,CAAG,IAAI,KAAK,KAAK,GAAG,GAAqB,IAAhB,EAAO,MAAM,CAAG,GAErC,OAAhB,EAAO,IAAI,EAA6B,SAAhB,EAAO,IAAc,AAAV,GAAa,CAClD,EAAO,IAAI,CAAG,GAAA,EAET,CACT,EApCkC,MAAE,QAAM,EAAO,GAAG,CAAM,AAAC,IAkB3D,AAjBI,SAiBK,AAAQ,CAAG,CAAE,CAAO,EAE3B,IAAK,GAAM,EAAG,EAAM,GADpB,EAAQ,MAAM,CAAC,cACS,GAAK,CAC3B,IAAM,EAAa,EAAgB,GACnC,EAAQ,MAAM,CAAC,aAAc,EAC/B,CACF,EAvBY,EAAK,IAAI,CAAC,QAAQ,EACnB,IAAI,AACb,CAIA,OAAO,GAAG,CAAI,CAAE,CACd,GAAM,CAAC,EAAM,EAAQ,CAAG,AAAmB,iBAAZ,CAAI,CAAC,EAAE,CAAgB,CAAC,CAAI,CAAC,EAAE,CAAC,CAAG,CAAC,CAAI,CAAC,EAAE,CAAC,IAAI,CAAE,CAAI,CAAC,EAAE,CAAC,CACzF,OAAO,IAAI,CAAC,GAAG,CAAC,CAAE,GAAG,CAAO,MAAE,EAAM,MAAO,GAAI,QAAyB,CAAhB,GAAoB,KAAK,EAAG,EACtF,CADuE,AAEvE,CAAC,OAAO,GAAG,CAAC,+BAA+B,EAAG,CAC5C,MAAO,CAAC,gBAAgB,EAAE,KAAK,SAAS,CAAC,OAAO,WAAW,CAAC,IAAI,CAAC,OAAO,GAAA,CAC1E,AAD8E,CAE9E,UAAW,CACT,MAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAiB,IAAI,CAAC,KAC9D,CACF,uDC/QuE,CCvC9D,ADuC8D,CAAA,ACvC9D,CDuC8D,ACvC9D,CAAA,ADuC8D,ACvC9D,CAAA,ADuC8D,CCvC9D,ADuC8D,AAElE,CCzCI,ADwCP,CCxCO,CAAA,GDyCJ,CAAO,CAAC,CAAA,CAAA,AAAW,CAAX,CAAA,AAAkB,CAAlB,CAAA,CAAA,CAAA,CAAA,AAA4B,CAA5B,AAEG,AAFyB,CAEzB,AAFyB,CAEzB,AAFyB,CAEzB,AACyB,AAHA,CAEzB,AAFyB,AAIjC,CAFQ,AAER,AAJiC,CAEzB,AAER,CAFQ,AAER,CAAA,AAFQ,AACP,CADgB,AAChB,CAAqB,AADL,AAChB,CAAqB,AAArB,CAAqB,AAArB,CAAA,AAAqB,AAArB,CAAA,AAAqB,CAArB,AAAqB,CAArB,CAAqB,CACtB,EAAM,CAAA,CAAA,CAAA,AAAN,CAAM,CAAA,CAAA,CAAQ,CAAA,CAAS,CAAA,CAAA,CAAA,CAAM,AAAN,CAAM,AAAN,CAAM,AAAN,CAAM,AAAN,CAAA,AAAM,CAAA,CAAA,CAAA,CAAA,AAG3B,CAH2B,AAGxB,IAAA,IACH,CAAA,CAAA,CAAA,MClDK,CAAA,ADQa,ACP1B,CDO0B,ACP1B,ADuCW,CCvCX,ADQA,AA+BW,CCvCX,ADuCW,GCvCJ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CDuCI,ACvCJ,CDuCmB,ACvCnB,CAAA,ADuCmB,kBCtC1B,CD0CM,AC1CN,CD0CM,AC1CN,CAAA,AD0CM,CAAA,AC1CN,CD0CM,AC1CC,CD0CD,UCzCE,CD8CG,AC9CH,CD8CG,AC9CH,SACC,CAAA,yDAGI,CAAA,CAAA,AACb,CEqBI,ADfA,ADNJ,aAAe,yCEgBJ,CAAA,AFpBF,CEoBE,AFpBF,CEoBE,AFpBF,CAAA,AEoBE,CFpBF,AEoBE,CAAA,AFpBF,CAAA,AEoBE,CFpBF,AEoBE,CDbP,ACaO,AFpBF,GAAA,EAAA,CAAA,CAAA,MAAA,EAAA,cEuBG,CAAA,ADfuE,KAAA,EAAA,EAAA,CAAA,YAAA,EAAA,CAAA,CAAA,oBAAA,CAAA,CAAA,UAAA,ECmBnE,CAAA,CAAA,CAAA,SAAA,CACZ,CAAA,SAAA,CACA,CAAA,GAAA,EAAA,CAAA,IAKK,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,CACL,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACA,CAAA,IACE,CAAA,CAAA,AACA,CADA,CAAA,CACG,CAAA,CAAA,AACH,AADG,CACH,AADG,CAAA,AACH,CADG,AACH,CADG,AACH,CADG,AACI,CADJ,AACI,CADJ,AACI,CADJ,AACI,AACP,CADO,AACP,AAFG,CACI,AACP,AAFG,CAAA,AACI,AACP,CAFG,AAEH,CAAA,AAFG,CAEK,AAFL,CAEK,CAAA,CAAA,AACR,CAAA,AADQ,CACR,AADQ,CACR,AADQ,CACR,CAAA,CAAQ,CAAA,CAAA,CAAA,AACR,CADQ,CAAA,CAAA,CAAA,OACR,CAAa,CAAA,CAAA,AAA6C,CAA7C,AAA6C,CAA7C,AAAmD,CAAnD,AAAuB,CAAvB,AAAuB,CAAvB,AAAuB,CAAvB,AAAuB,CAAvB,AAAuB,CAAvB,AAAuB,CAAvB,AAA8B,CAA9B,AAA8B,CAAW,AAAzC,CAAA,AAAyC,CAAA,AAAzC,AAAmD,CAAA,AAAV,AAAzC,CAAyC,AAAU,AAAnD,CAAyC,AAAU,AAAnD,CAAyC,AAAU,CAAA,AAAV,AAAlB,CAAkB,AAAU,AAA5B,CAAkB,AAAiB,CAAjB,AAAqB,CAAA,CAAjB,AAAiB,AAAI,CAArB,AAAiB,AAAI,CAAA,AAC/E,AAD+E,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAC/E,CAD+E,AACpE,CAAA,CAAA,AAAa,CAAb,AAAa,CAAb,AAAa,CAAb,AAAa,CAAb,AAAa,CAAA,AAAb,CAAa,AAAb,CAAA,AAAa,CAAb,AAAa,CAAA,AAAU,AAAvB,CAAa,EACxB,GAAG,CAAA,AACL,CADK,AACL,CAAA,AACA,AAH6C,AACxC,CAEL,AAH6C,CAAA,EAIxC,CAAS,CAAA,CAAA,CAAA,CAAA,CAAA,AAAI,CAAJ,AAAK,CAAC,AAAN,CAAW,CAAA,CAAA,AAAK,CAAL,AAAK,AAAM,CAAN,CAAA,CAAA,AAAM,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,EAAc,EAAK,CAAA,CAAA,CAAA,CAAA,CAAK,CAAC,CACvD,AADuD,CACvD,AADuD,CACvD,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,CAAA,AAAY,CAAZ,AAAY,CAAZ,AAAY,AAAW,CAAvB,AAAY,AAAY,CAAxB,AAAY,AAAY,CAAhB,AAAgB,AAAQ,AAApB,CAAA,AAAY,AAC5C,AADgC,CAAA,AAAY,AAAZ,CAAA,AAAY,CAAZ,AAAY,ADzC5C,CCyCgC,AAAY,AA5B5C,AFpBJ,CEgDwD,AFhDxD,AEoBI,ADbmB,CDPd,AEoBL,ADboB,CCab,ADba,CAAA,AAAkB,CAAlB,CAAA,CAAA,CAAA,CAAA,AACxB,CADwB,CAAA,CAAyC,CAAA,AAC3D,CAD2D,AAC/C,ADPZ,CCM2D,ADN3D,ACOY,CAD+C,ADN3D,ACOY,CAD+C,ADN3D,ACOY,CAAA,AAD+C,ADN3D,ACOY,CAAA,ADPZ,CCOY,ADPZ,CCOY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,CAAuC,CAAC,CDN1D,ACM0D,ACetD,UDfwD,CCexD,AFrBI,ACM+D,CCe3D,AFrBJ,AEqBI,ADf2D,CDN/D,AEqBI,ADf8D,CDNlE,AEqBI,ADf8D,CAAA,CCe9D,AFrBJ,ACMkE,CAAA,ACe9D,AFrBJ,ACM2E,CDN3E,AEqBI,ADf8D,AAAS,CCevE,ADf8D,ADNlE,ACM2E,CAAA,CAAA,CAAA,CAAA,EACjF,EAAA,aAAA,EAAc,EAAM,CAAA,AAClB,CADkB,AAClB,ADPJ,AEqBI,CDfkB,ACeX,AFrBX,ACOI,CDPJ,ACOI,CDPJ,ACOI,WACA,CDPJ,AEqBI,ADdA,CAAA,ADPJ,AEqBI,CAAA,AFrBJ,ACOI,CCcA,AFrBJ,ACOI,CCcA,AFrBJ,ACOI,CDPJ,ACOI,ACcA,CAAA,AFrBJ,ACOI,CCcA,AFrBJ,ACOI,CDPW,ACOX,ACcc,GDbH,EAAa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,AFPtC,AEOkD,CFPlD,CAAA,AAAO,CAAP,CAAA,CAAA,CAAA,EEO0D,CFPnD,AEOoD,CFP5C,oBAAsB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAO,EAAE,WAAY,CAAA,CAAA,CEOC,AFPD,CEOC,CAAI,GAC3D,CCcA,CAAA,CDdG,CCcH,ADdG,CCcH,ADdG,ACeH,ADdD,CCaC,ADdG,ACeH,ADdD,AAFqE,CCexD,ADdT,ACeH,ADhBoE,CCgBpE,ADTG,AAPiE,CCgBpE,CAAA,CAAA,IDXM,CCYN,ADZM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAc,CAAd,AAAc,CAAG,CAAA,CAAA,CAAQ,AAAR,CAAQ,AAAR,CAAQ,AAE5B,AAFoB,CAAA,ACgBtB,ADbP,CAH6B,ACgBtB,AACH,ADdJ,CAH6B,ACgBtB,ADbP,ACcI,CDjBiC,ACgB9B,AACH,CADG,IDdE,CAAA,4REtBT,IAAA,EAAA,EAAA,CAAA,CAAA,QAkDA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,kDAEA,IAAM,EAAmB,QAAQ,GAAG,CAAC,YAAY,CAE3C,EAAO,IAAI,EAAA,IAAI,CAAC,kBAAE,CAAiB,GACnC,EAAU,IAAI,EAAA,QAAQ,CAAC,GAEvB,EAAA,EAAA,CAAA,CAGA,EAAU,EAAgB,MAAM,GAAK,CAAC,AAAF,CAAG,WAAY,EAAgB,MAAA,AAAM,GAAK,CAAC,AAAC,oBAAoB,EAAgB,MAAA,CAAM,CAAC,CAEpH,EACV,EAAgB,MAAM,EAAI,CAAC,EAC1B,EAAgB,MAAM,CACtB,IAAI,EAAA,YAAY,CAAC,SACf,EACA,IAAK,CAAC,QAAS,OAAO,AACxB,8RCrEJ,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,mBAEO,eAAe,EAAa,CAAS,EACxC,GAAI,CACA,GAAM,OAAE,CAAK,UAAE,CAAQ,MAAE,CAAI,CAAE,CAAG,EAOlC,GAJqB,CAIjB,KAJuB,EAAA,EAAE,CAAC,IAAI,AAIhB,CAJiB,UAAU,CAAC,CAC1C,MAAO,OAAE,CAAM,CACnB,GAGI,MAAO,CAAE,SAAS,EAAO,MAAO,qBAAsB,EAG1D,IAAM,EAAiB,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,EAAU,IAGxC,EAAO,MAAM,EAAA,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAC/B,MAAO,CAAE,KAAM,OAAQ,CAC3B,EAEI,CAAC,IACD,EADO,AACA,MAAM,EAAA,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CACxB,KAAM,CAAE,KAAM,QAAS,YAAa,oBAAqB,CAC7D,EAAA,EAGJ,IAAM,EAAO,MAAM,EAAA,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAC9B,KAAM,OACF,EACA,SAAU,OACV,EACA,OAAQ,EAAK,EAAE,AACnB,CACJ,GAEA,MAAO,CAAE,SAAS,EAAM,KAAM,CAAE,GAAI,EAAK,EAAE,CAAE,MAAO,EAAK,KAAK,AAAC,CAAE,CACrE,CAAE,MAAO,EAAY,CAEjB,OADA,QAAQ,KAAK,CAAC,yBAA0B,GACjC,CAAE,SAAS,EAAO,MAAO,EAAM,OAAO,EAAI,mBAAoB,CACzE,CACJ,CAEO,eAAe,EAAa,CAAa,CAAE,CAAgB,EAC9D,GAAI,CACA,IAAM,EAAO,MAAM,EAAA,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAClC,MAAO,OAAE,CAAM,EACf,QAAS,CAAE,MAAM,CAAK,CAC1B,GAEA,GAAI,CAAC,GAAQ,CAAC,EAAK,QAAQ,EAAE,AAMzB,CAFoB,AAEnB,MAFyB,CAAA,EAAA,EAAA,MAER,CAFQ,AAAO,EAAC,EAAU,EAAK,QAAQ,EAHzD,MAAO,CAAE,SAAS,EAAO,MAAO,2BAA4B,EAShE,MAAO,CACH,SAAS,EACT,KAAM,CACF,GAAI,EAAK,EAAE,CACX,MAAO,EAAK,KAAK,CACjB,KAAM,EAAK,IAAI,CACf,KAAM,EAAK,IAAI,EAAE,IACrB,CACJ,CACJ,CAAE,MAAO,EAAY,CAEjB,OADA,QAAQ,KAAK,CAAC,yBAA0B,GACjC,CAAE,SAAS,EAAO,MAAO,EAAM,OAAO,EAAI,mBAAoB,CACzE,CACJ,gJC5EA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,8CAkBA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,OAA8B,oBAoExC,KACrB,IAAM,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAC3B,QAAgB,IAAZ,EACF,KADyB,CACnB,AAAI,MAAM,+CAElB,OAAO,CACT","ignoreList":[2,3,4,5,6]}