{"version":3,"sources":["../../../../src/components/messages/MessageHeader.tsx","../../../../src/components/messages/MessageStatsCards.tsx","../../../../src/components/messages/MessageContent.tsx","../../../../node_modules/lucide-react/src/icons/send.ts","../../../../src/components/messages/NewMessageDialog.tsx","../../../../src/components/messages/MessageTemplateDialog.tsx","../../../../src/components/messages/TopUpCreditsDialog.tsx","../../../../node_modules/date-fns/addYears.js","../../../../node_modules/date-fns/subYears.js","../../../../src/components/messages/BulkMessageDialog.tsx","../../../../src/components/messages/PurchaseHistoryTable.tsx","../../../../src/components/messages/UsageHistoryTable.tsx","../../../../src/pages/Messages.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import React from 'react';\r\nimport { MessageSquare, Plus, FileText, Zap, CreditCard, Users } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface MessageHeaderProps {\r\n  onNewMessage: () => void;\r\n  onNewTemplate: () => void;\r\n  onTopUp: () => void;\r\n  onBulkMessage: () => void;\r\n  smsCredits: number;\r\n  canCreate?: boolean;\r\n}\r\n\r\nconst MessageHeader: React.FC<MessageHeaderProps> = ({\r\n  onNewMessage,\r\n  onNewTemplate,\r\n  onTopUp,\r\n  onBulkMessage,\r\n  smsCredits,\r\n  canCreate = true\r\n}) => {\r\n  return (\r\n    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold text-gray-900 flex items-center gap-2\">\r\n          <MessageSquare className=\"w-8 h-8 text-blue-600\" />\r\n          Messages\r\n        </h1>\r\n        <p className=\"text-gray-500 mt-1\">Send SMS to your customers</p>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center gap-3\">\r\n        {canCreate && (\r\n          <>\r\n            <Button\r\n              onClick={onTopUp}\r\n              variant=\"outline\"\r\n              className=\"flex items-center gap-2 border-green-500 text-green-700 hover:bg-green-50\"\r\n            >\r\n              <CreditCard className=\"w-4 h-4\" />\r\n              Top Up\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={onNewTemplate}\r\n              variant=\"outline\"\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <FileText className=\"w-4 h-4\" />\r\n              New Template\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={onBulkMessage}\r\n              variant=\"outline\"\r\n              className=\"flex items-center gap-2 border-purple-500 text-purple-700 hover:bg-purple-50\"\r\n            >\r\n              <Users className=\"w-4 h-4\" />\r\n              Bulk SMS\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={onNewMessage}\r\n              className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700\"\r\n            >\r\n              <Plus className=\"w-4 h-4\" />\r\n              New Message\r\n            </Button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageHeader;","import React from 'react';\r\nimport { \r\n  MessageSquare, \r\n  CheckCircle, \r\n  XCircle, \r\n  Clock, \r\n  CreditCard,\r\n  Wallet \r\n} from 'lucide-react';\r\n\r\ninterface MessageStatsCardsProps {\r\n  stats: {\r\n    total: number;\r\n    sent: number;\r\n    failed: number;\r\n    pending: number;\r\n    totalCreditsUsed: number;\r\n    creditsRemaining: number;  // New field\r\n  };\r\n}\r\n\r\nconst MessageStatsCards = ({ stats }: MessageStatsCardsProps) => {\r\n  const isLowBalance = stats.creditsRemaining <= 50;\r\n  const isCritical = stats.creditsRemaining <= 20;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n      {/* Credits Remaining - 6th Card */}\r\n      <div className={`p-5 rounded-xl shadow-sm border-2 transition-all hover:shadow-lg ${\r\n        isCritical \r\n          ? 'bg-red-50 border-red-400' \r\n          : isLowBalance \r\n            ? 'bg-amber-50 border-amber-400' \r\n            : 'bg-emerald-50 border-emerald-400'\r\n      }`}>\r\n        <div className={`flex items-center gap-3 mb-2 ${\r\n          isCritical ? 'text-red-700' : isLowBalance ? 'text-amber-700' : 'text-emerald-700'\r\n        }`}>\r\n          <Wallet className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Credit Bal.</span>\r\n        </div>\r\n        <p className={`text-3xl font-bold ${\r\n          isCritical ? 'text-red-700' : isLowBalance ? 'text-amber-700' : 'text-emerald-700'\r\n        }`}>\r\n          {stats.creditsRemaining.toLocaleString()}\r\n        </p>\r\n\r\n      </div>\r\n      {/* Total Messages */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center gap-3 text-gray-600 mb-2\">\r\n          <MessageSquare className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Total</span>\r\n        </div>\r\n        <p className=\"text-3xl font-bold text-gray-900\">{stats.total.toLocaleString()}</p>\r\n      </div>\r\n\r\n      {/* Sent */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center gap-3 text-green-600 mb-2\">\r\n          <CheckCircle className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Sent</span>\r\n        </div>\r\n        <p className=\"text-3xl font-bold text-green-600\">{stats.sent.toLocaleString()}</p>\r\n      </div>\r\n\r\n      {/* Pending */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center gap-3 text-amber-600 mb-2\">\r\n          <Clock className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Pending</span>\r\n        </div>\r\n        <p className=\"text-3xl font-bold text-amber-600\">{stats.pending}</p>\r\n      </div>\r\n\r\n      {/* Failed */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center gap-3 text-red-600 mb-2\">\r\n          <XCircle className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Failed</span>\r\n        </div>\r\n        <p className=\"text-3xl font-bold text-red-600\">{stats.failed}</p>\r\n      </div>\r\n\r\n      {/* Credits Used */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center gap-3 text-blue-600 mb-2\">\r\n          <CreditCard className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Credits Used</span>\r\n        </div>\r\n        <p className=\"text-3xl font-bold text-blue-600\">{stats.totalCreditsUsed.toLocaleString()}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageStatsCards;","import React from 'react';\r\nimport { Search, Filter, MessageSquare } from 'lucide-react';\r\nimport { Message } from '@/hooks/useMessages';\r\nimport { Customer } from '@/hooks/useCustomers';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\n\r\ninterface MessageContentProps {\r\n  messages: Message[];\r\n  customers: Customer[];\r\n  searchTerm: string;\r\n  setSearchTerm: (term: string) => void;\r\n  statusFilter: string;\r\n  setStatusFilter: (status: string) => void;\r\n}\r\n\r\nconst MessageContent = ({\r\n  messages,\r\n  customers,\r\n  searchTerm,\r\n  setSearchTerm,\r\n  statusFilter,\r\n  setStatusFilter\r\n}: MessageContentProps) => {\r\n  \r\n  const getCustomer = (customerId?: string) => {\r\n    if (!customerId) return null;\r\n    return customers.find(c => c.id === customerId);\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const styles = {\r\n      pending: 'bg-amber-100 text-amber-800',\r\n      sent: 'bg-green-100 text-green-800',\r\n      delivered: 'bg-blue-100 text-blue-800',\r\n      failed: 'bg-red-100 text-red-800'\r\n    };\r\n    return styles[status as keyof typeof styles] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  // Filter messages by search and status\r\n  const filteredMessages = messages.filter(msg => {\r\n    const customer = getCustomer(msg.customerId);\r\n    const name = customer ? (customer.full_name || customer.fullName || customer.name) : '';\r\n    const phone = msg.phoneNumber;\r\n    const content = msg.content;\r\n\r\n    const matchesSearch = searchTerm\r\n      ? name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        phone.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        content.toLowerCase().includes(searchTerm.toLowerCase())\r\n      : true;\r\n\r\n    const matchesStatus = statusFilter === 'all' || msg.status === statusFilter;\r\n\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Filters */}\r\n      <div className=\"flex flex-col md:flex-row gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Search messages...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n        \r\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n          <SelectTrigger className=\"w-full md:w-48\">\r\n            <Filter className=\"w-4 h-4 mr-2\" />\r\n            <SelectValue placeholder=\"Filter by status\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">All Messages</SelectItem>\r\n            <SelectItem value=\"pending\">Pending</SelectItem>\r\n            <SelectItem value=\"sent\">Sent</SelectItem>\r\n            <SelectItem value=\"failed\">Failed</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {/* Messages List */}\r\n      <div className=\"space-y-3\">\r\n        {filteredMessages.length === 0 ? (\r\n          <div className=\"text-center py-12 bg-white rounded-lg border\">\r\n            <MessageSquare className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\r\n            <p className=\"text-gray-500\">No messages found</p>\r\n          </div>\r\n        ) : (\r\n          filteredMessages.map(msg => {\r\n            const customer = getCustomer(msg.customerId);\r\n            const name = customer ? (customer.full_name || customer.fullName || customer.name) : '';\r\n\r\n            return (\r\n              <div\r\n                key={msg.id}\r\n                className=\"bg-white p-4 rounded-lg shadow border hover:shadow-md transition-shadow\"\r\n              >\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <p className=\"font-medium text-gray-900\">\r\n                        {name ? `${name} (${msg.phoneNumber})` : msg.phoneNumber}\r\n                      </p>\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${getStatusBadge(msg.status)}`}>\r\n                        {msg.status}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-xs text-gray-400\">{new Date(msg.createdAt).toLocaleDateString()}</p>\r\n                    <p className=\"text-xs text-gray-400\">{new Date(msg.createdAt).toLocaleTimeString()}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"text-sm text-gray-600 mb-2\">{msg.content}</p>\r\n\r\n                <div className=\"flex justify-between items-center text-xs text-gray-400\">\r\n                  <span>{msg.smsCreditsUsed} credit{msg.smsCreditsUsed > 1 ? 's' : ''} used</span>\r\n                  {msg.errorMessage && <span className=\"text-red-600\">{msg.errorMessage}</span>}\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageContent;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNTM2IDIxLjY4NmEuNS41IDAgMCAwIC45MzctLjAyNGw2LjUtMTlhLjQ5Ni40OTYgMCAwIDAtLjYzNS0uNjM1bC0xOSA2LjVhLjUuNSAwIDAgMC0uMDI0LjkzN2w3LjkzIDMuMThhMiAyIDAgMCAxIDEuMTEyIDEuMTF6IiAvPgogIDxwYXRoIGQ9Im0yMS44NTQgMi4xNDctMTAuOTQgMTAuOTM5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  [\n    'path',\n    {\n      d: 'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',\n      key: '1ffxy3',\n    },\n  ],\n  ['path', { d: 'm21.854 2.147-10.94 10.939', key: '12cjpa' }],\n]);\n\nexport default Send;\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Send } from 'lucide-react';\r\nimport { Customer } from '@/hooks/useCustomers';\r\nimport { MessageTemplate } from '@/hooks/useMessages';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\n\r\ninterface NewMessageDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSend: (data: { phoneNumber: string; content: string; customerId?: string; templateId?: string }) => Promise<{ success: number; failed: number; errors?: string[] }>;\r\n  customers: Customer[];\r\n  templates: MessageTemplate[];\r\n}\r\n\r\nconst NewMessageDialog = ({ open, onClose, onSend, customers, templates }: NewMessageDialogProps) => {\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [selectedCustomer, setSelectedCustomer] = useState<string>('none');\r\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('none');\r\n  const [isSending, setIsSending] = useState(false);\r\n  const [sendResult, setSendResult] = useState<{ success: number; failed: number; errors: string[] } | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Reset state when dialog closes\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setPhoneNumber('');\r\n      setContent('');\r\n      setSelectedCustomer('none');\r\n      setSelectedTemplate('none');\r\n      setSendResult(null);\r\n      setSearchTerm('');\r\n    }\r\n  }, [open]);\r\n\r\n  // Populate phone number when customer is selected\r\n  useEffect(() => {\r\n    if (selectedCustomer && selectedCustomer !== 'none') {\r\n      const customer = customers.find(c => c.id === selectedCustomer);\r\n      const phone = getCustomerPhone(customer);\r\n      setPhoneNumber(phone);\r\n    }\r\n  }, [selectedCustomer, customers]);\r\n\r\n  // Populate message content when template is selected\r\n  useEffect(() => {\r\n    if (selectedTemplate && selectedTemplate !== 'none') {\r\n      const template = templates.find(t => t.id === selectedTemplate);\r\n      if (template) setContent(template.content);\r\n    }\r\n  }, [selectedTemplate, templates]);\r\n\r\n  const getCustomerPhone = (customer?: Customer) =>\r\n    (customer?.phone_number || customer?.phoneNumber || customer?.phone || customer?.contact || '').trim();\r\n\r\n  const filteredCustomers = useMemo(() => {\r\n    const term = (searchTerm || '').toLowerCase();\r\n    return customers\r\n      .filter(c => getCustomerPhone(c)) // only customers with phone\r\n      .filter(c => {\r\n        const name = (c.full_name || c.fullName || c.name || '').toLowerCase();\r\n        const phone = getCustomerPhone(c).toLowerCase();\r\n        return !term || name.includes(term) || phone.includes(term);\r\n      });\r\n  }, [customers, searchTerm]);\r\n\r\n\r\n  const handleSend = async () => {\r\n    if (!phoneNumber || !content) return;\r\n\r\n    setIsSending(true);\r\n    const result = await onSend({\r\n      phoneNumber,\r\n      content,\r\n      customerId: selectedCustomer && selectedCustomer !== 'none' ? selectedCustomer : undefined,\r\n      templateId: selectedTemplate && selectedTemplate !== 'none' ? selectedTemplate : undefined,\r\n    });\r\n    setIsSending(false);\r\n\r\n    setSendResult({\r\n      success: result.success,\r\n      failed: result.failed,\r\n      errors: result.errors || [],\r\n    });\r\n\r\n    if ((result.failed || 0) === 0) {\r\n      setTimeout(() => onClose(), 3000); // auto-close if all succeed\r\n    }\r\n  };\r\n\r\n  const messageLength = content.length;\r\n  const smsCredits = Math.ceil(messageLength / 160) || 1;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-lg max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Send className=\"w-5 h-5\" />\r\n            Send New Message\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {sendResult ? (\r\n          <div className=\"space-y-4\">\r\n            <div className={`p-4 rounded-lg border ${sendResult.failed === 0 ? 'bg-green-50 border-green-200' : 'bg-amber-50 border-amber-200'}`}>\r\n              <h3 className=\"font-semibold text-lg mb-2\">\r\n                {sendResult.failed === 0 ? '✅ Message Sent Successfully!' : '⚠️ Sending Completed with Errors'}\r\n              </h3>\r\n              <div className=\"space-y-1 text-sm\">\r\n                <p className=\"text-green-700\">✓ Successfully sent: {sendResult.success}</p>\r\n                {sendResult.failed > 0 && <p className=\"text-red-700\">✗ Failed: {sendResult.failed}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {sendResult.errors.length > 0 && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n                <h4 className=\"font-semibold text-red-900 mb-2\">Errors:</h4>\r\n                <ul className=\"text-sm text-red-800 space-y-1 max-h-[200px] overflow-y-auto\">\r\n                  {sendResult.errors.map((err, idx) => <li key={idx}>• {err}</li>)}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            <Button onClick={onClose} className=\"w-full\">Close</Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Customer Dropdown */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Select Customer (Optional)</label>\r\n              <Select value={selectedCustomer} onValueChange={setSelectedCustomer}>\r\n                <SelectTrigger className=\"w-full\">\r\n                  <SelectValue placeholder=\"Search or select a customer...\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"max-h-[300px] overflow-y-auto\">\r\n                  <div className=\"p-2\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      placeholder=\"Type to search...\"\r\n                      value={searchTerm}\r\n                      onChange={e => setSearchTerm(e.target.value)}\r\n                      className=\"mb-2\"\r\n                    />\r\n                  </div>\r\n                  <SelectItem value=\"none\">None - Enter Customer Name or Phone Number</SelectItem>\r\n                  {filteredCustomers.map(c => (\r\n                    <SelectItem key={c.id} value={c.id}>\r\n                      {c.full_name || c.fullName || c.name || 'Unnamed Customer'} - {getCustomerPhone(c)}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Phone Number */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Phone Number *</label>\r\n              <Input type=\"tel\" placeholder=\"+256700000000\" value={phoneNumber} onChange={e => setPhoneNumber(e.target.value)} className=\"w-full\" />\r\n            </div>\r\n\r\n            {/* Template */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Use Template (Optional)</label>\r\n              <Select value={selectedTemplate} onValueChange={setSelectedTemplate}>\r\n                <SelectTrigger className=\"w-full\">\r\n                  <SelectValue placeholder=\"Choose a template...\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"max-h-[300px] overflow-y-auto\">\r\n                  <SelectItem value=\"none\">None - Type custom message</SelectItem>\r\n                  {templates.map(t => <SelectItem key={t.id} value={t.id}>{t.name}</SelectItem>)}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Message * (Max 160 Characters)</label>\r\n              <Textarea\r\n                placeholder=\"Type your message...\"\r\n                value={content}\r\n                onChange={e => setContent(e.target.value)}\r\n                rows={5}\r\n                required\r\n                className=\"w-full resize-none\"\r\n              />\r\n              <div className=\"flex justify-between mt-1 text-xs text-gray-500\">\r\n                <span>{messageLength} characters</span>\r\n                <span>{smsCredits} SMS credit{smsCredits > 1 ? 's' : ''} will be used</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end gap-2 pt-4 border-t\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={isSending}>Cancel</Button>\r\n              <Button\r\n                onClick={handleSend}\r\n                disabled={!phoneNumber || !content || isSending}\r\n                className=\"bg-blue-600 hover:bg-blue-700\"\r\n              >\r\n                {isSending ? <span className=\"animate-spin mr-2\">⏳</span> : <>\r\n                  <Send className=\"w-4 h-4 mr-2\" />\r\n                  Send Message\r\n                </>}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default NewMessageDialog;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { FileText, Save } from 'lucide-react';\r\nimport { MessageTemplate } from '@/hooks/useMessages';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Select,\r\n  SelectTrigger,\r\n  SelectValue,\r\n  SelectContent,\r\n  SelectItem\r\n} from '@/components/ui/select';\r\n\r\ninterface MessageTemplateDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSave: (data: Omit<MessageTemplate, 'id' | 'userId' | 'locationId' | 'createdAt' | 'updatedAt'>) => Promise<boolean>;\r\n  initialData?: MessageTemplate;\r\n}\r\n\r\n// Predefined SMS Categories with Custom option\r\nconst TEMPLATE_CATEGORIES = [\r\n  { value: \"ThankYou\", label: \"Thank You (After Sale)\" },\r\n  { value: \"Birthday\", label: \"Birthday Wishes\" },\r\n  { value: \"PaymentReminder\", label: \"Payment Reminder\" },\r\n  { value: \"Holiday\", label: \"Public Holiday\" },\r\n  { value: \"Inactive\", label: \"We Miss You / Inactive Customer\" },\r\n  { value: \"Custom\", label: \"Custom\" } // Custom option\r\n];\r\n\r\nconst MessageTemplateDialog = ({ open, onClose, onSave, initialData }: MessageTemplateDialogProps) => {\r\n  const [name, setName] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [customCategory, setCustomCategory] = useState(''); // For typing custom category\r\n  const [variables, setVariables] = useState<string[]>([]);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && initialData) {\r\n      setName(initialData.name);\r\n      setContent(initialData.content);\r\n      setCategory(initialData.category || '');\r\n      setCustomCategory(initialData.category && !TEMPLATE_CATEGORIES.some(c => c.value === initialData.category) ? initialData.category : '');\r\n      setVariables(initialData.variables || []);\r\n    } else if (!open) {\r\n      setName('');\r\n      setContent('');\r\n      setCategory('');\r\n      setCustomCategory('');\r\n      setVariables([]);\r\n    }\r\n  }, [open, initialData]);\r\n\r\n  const handleSave = async () => {\r\n    if (!name || !content) return;\r\n\r\n    const finalCategory = category === \"Custom\" ? customCategory : category;\r\n\r\n    setIsSaving(true);\r\n    const success = await onSave({\r\n      name,\r\n      content,\r\n      category: finalCategory || undefined,\r\n      variables,\r\n      isDefault: false\r\n    });\r\n    setIsSaving(false);\r\n\r\n    if (success) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const extractVariables = (text: string) => {\r\n    const regex = /\\{([^}]+)\\}/g;\r\n    const matches = text.match(regex);\r\n    if (matches) {\r\n      const vars = matches.map(m => m.slice(1, -1));\r\n      setVariables([...new Set(vars)]);\r\n    } else {\r\n      setVariables([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n        open={open}\r\n        onOpenChange={(isOpen) => {\r\n          if (!isOpen) onClose();\r\n        }}\r\n      >\r\n      <DialogContent className=\"sm:max-w-lg max-h-[80vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <FileText className=\"w-5 h-5\" />\r\n            {initialData ? 'Edit Template' : 'Create New Template'}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Template Name */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n              Template Name *\r\n            </label>\r\n            <Textarea\r\n              placeholder=\"e.g., Welcome Message\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              rows={1}\r\n              className=\"resize-none\"\r\n            />\r\n          </div>\r\n\r\n          {/* Category */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n              Category *\r\n            </label>\r\n            <Select value={category} onValueChange={setCategory}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select category...\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {TEMPLATE_CATEGORIES.map(c => (\r\n                  <SelectItem key={c.value} value={c.value}>\r\n                    {c.label}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            {category === \"Custom\" && (\r\n              <Textarea\r\n                placeholder=\"Type custom category...\"\r\n                value={customCategory}\r\n                onChange={(e) => setCustomCategory(e.target.value)}\r\n                rows={1}\r\n                className=\"mt-2 resize-none\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* Template Content */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n              Message Content *\r\n            </label>\r\n            <Textarea\r\n              placeholder=\"Type your template here... Use {variable} for dynamic content\"\r\n              value={content}\r\n              onChange={(e) => {\r\n                setContent(e.target.value);\r\n                extractVariables(e.target.value);\r\n              }}\r\n              rows={6}\r\n              className=\"resize-none\"\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              Use curly braces for variables: {'{customer_name}'}, {'{customer_phone}'}, etc.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Detected Variables */}\r\n          {variables.length > 0 && (\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n                Detected Variables\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {variables.map(v => (\r\n                  <span key={v} className=\"text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded\">\r\n                    {v}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Available Variables */}\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n            <p className=\"text-xs font-medium text-blue-900 mb-2\">\r\n              Available Variables\r\n            </p>\r\n            <div className=\"text-xs text-blue-800 space-y-1\">\r\n              <p>• <code className=\"bg-blue-100 px-1 rounded\">{'{customer_name}'}</code> - Full customer name</p>\r\n              <p>• <code className=\"bg-blue-100 px-1 rounded\">{'{first_name}'}</code> - Customer first name</p>\r\n              <p>• <code className=\"bg-blue-100 px-1 rounded\">{'{last_name}'}</code> - Customer last name</p>\r\n              <p>• <code className=\"bg-blue-100 px-1 rounded\">{'{customer_phone}'}</code> - Customer phone number</p>\r\n              <p>• <code className=\"bg-blue-100 px-1 rounded\">{'{customer_email}'}</code> - Customer email</p>\r\n            </div>\r\n            <p className=\"text-xs text-blue-700 mt-2\">\r\n              These will be automatically replaced when sending to a customer\r\n            </p>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex justify-end gap-2 pt-4\">\r\n            <Button variant=\"outline\" onClick={onClose} disabled={isSaving}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={handleSave}\r\n              disabled={!name || !content || (!category || (category === \"Custom\" && !customCategory)) || isSaving}\r\n              className=\"bg-blue-600 hover:bg-blue-700\"\r\n            >\r\n              <Save className=\"w-4 h-4 mr-2\" />\r\n              {isSaving ? 'Saving...' : 'Save Template'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default MessageTemplateDialog;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CreditCard, DollarSign } from 'lucide-react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\n\r\ninterface TopUpCreditsDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onTopUp: (credits: number, phoneNumber: string) => Promise<boolean>;\r\n}\r\n\r\nconst TopUpCreditsDialog = ({ open, onClose, onTopUp }: TopUpCreditsDialogProps) => {\r\n  const [credits, setCredits] = useState<number>(10);\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  const creditCost = Number(import.meta.env.VITE_SMS_CREDIT_COST || 100);\r\n  const totalCost = credits * creditCost;\r\n\r\n  // Debug: Dialog opened / closed\r\n  useEffect(() => {\r\n    console.log('[TopUpCreditsDialog] Dialog open state:', open);\r\n    if (open) {\r\n      console.log('[TopUpCreditsDialog] Dialog opened — resetting form');\r\n      setCredits(10);\r\n      setPhoneNumber('');\r\n      setIsProcessing(false);\r\n    }\r\n  }, [open]);\r\n\r\n  // Debug: Form state changes\r\n  useEffect(() => {\r\n    console.log('[TopUpCreditsDialog] Current state → Credits:', credits, '| Phone:', phoneNumber, '| Total Cost: UGX', totalCost.toLocaleString());\r\n  }, [credits, phoneNumber, totalCost]);\r\n\r\n  const handleTopUp = async () => {\r\n    console.log('[TopUpCreditsDialog] Top-up requested!');\r\n    console.log('   → Credits:', credits);\r\n    console.log('   → Phone Number:', phoneNumber);\r\n    console.log('   → Total Cost: UGX', totalCost.toLocaleString());\r\n\r\n    if (!phoneNumber || credits < 1) {\r\n      console.warn('[TopUpCreditsDialog] Invalid input — blocking submit');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    console.log('[TopUpCreditsDialog] Calling onTopUp...');\r\n\r\n    try {\r\n      const success = await onTopUp(credits, phoneNumber);\r\n      console.log('[TopUpCreditsDialog] onTopUp result:', success ? 'SUCCESS' : 'FAILED');\r\n\r\n      if (success) {\r\n        console.log('[TopUpCreditsDialog] Payment successful → closing dialog');\r\n        onClose();\r\n      } else {\r\n        console.error('[TopUpCreditsDialog] Payment failed (returned false)');\r\n      }\r\n    } catch (err) {\r\n      console.error('[TopUpCreditsDialog] onTopUp threw an error:', err);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const quickAmounts = [10, 25, 50, 100];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-lg\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <CreditCard className=\"w-5 h-5\" />\r\n            Top Up SMS Credits\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Credit Amount Selection */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 mb-2 block\">\r\n              Number of Credits *\r\n            </label>\r\n            <Input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              value={credits}\r\n              onChange={(e) => {\r\n                const val = Math.max(1, parseInt(e.target.value) || 1);\r\n                console.log('[TopUpCreditsDialog] Credits input changed →', val);\r\n                setCredits(val);\r\n              }}\r\n              className=\"text-lg font-semibold\"\r\n            />\r\n\r\n            {/* Quick Amount Buttons */}\r\n            <div className=\"mt-3 flex flex-wrap gap-2\">\r\n              {quickAmounts.map(amount => (\r\n                <button\r\n                  key={amount}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    console.log('[TopUpCreditsDialog] Quick amount clicked →', amount, 'credits');\r\n                    setCredits(amount);\r\n                  }}\r\n                  className={`px-3 py-1 text-sm rounded-md border transition-colors ${\r\n                    credits === amount\r\n                      ? 'bg-blue-600 text-white border-blue-600'\r\n                      : 'bg-white text-gray-700 border-gray-300 hover:border-blue-400'\r\n                  }`}\r\n                >\r\n                  {amount} credits\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cost Display */}\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-sm text-gray-600\">Credit Cost:</span>\r\n              <span className=\"text-sm font-medium\">UGX {creditCost} per credit</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-sm text-gray-600\">Quantity:</span>\r\n              <span className=\"text-sm font-medium\">{credits} credits</span>\r\n            </div>\r\n            <div className=\"border-t border-blue-300 pt-2 mt-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-base font-semibold text-gray-900\">Total Amount:</span>\r\n                <span className=\"text-xl font-bold text-blue-600\">\r\n                  UGX {totalCost.toLocaleString()}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Phone Number for Payment */}\r\n          <div>\r\n            <label className=\"text-sm font-medium text-gray-700 mb-1 block\">\r\n              Mobile Money Phone Number *\r\n            </label>\r\n            <Input\r\n              type=\"tel\"\r\n              placeholder=\"+256700000000\"\r\n              value={phoneNumber}\r\n              onChange={(e) => {\r\n                console.log('[TopUpCreditsDialog] Phone number changed →', e.target.value);\r\n                setPhoneNumber(e.target.value);\r\n              }}\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              You will receive a payment prompt on this number\r\n            </p>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex justify-end gap-2 pt-4\">\r\n            <Button variant=\"outline\" onClick={onClose} disabled={isProcessing}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={handleTopUp}\r\n              disabled={!phoneNumber || credits < 1 || isProcessing}\r\n              className=\"bg-green-600 hover:bg-green-700\"\r\n            >\r\n              <DollarSign className=\"w-4 h-4 mr-2\" />\r\n              {isProcessing ? 'Processing...' : `Pay UGX ${totalCost.toLocaleString()}`}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TopUpCreditsDialog;","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The {@link addYears} function options.\n */\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be added.\n * @param options - The options\n *\n * @returns The new date with the years added\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\nexport function addYears(date, amount, options) {\n  return addMonths(date, amount * 12, options);\n}\n\n// Fallback for modularized imports:\nexport default addYears;\n","import { addYears } from \"./addYears.js\";\n\n/**\n * The {@link subYears} function options.\n */\n\n/**\n * @name subYears\n * @category Year Helpers\n * @summary Subtract the specified number of years from the given date.\n *\n * @description\n * Subtract the specified number of years from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the years subtracted\n *\n * @example\n * // Subtract 5 years from 1 September 2014:\n * const result = subYears(new Date(2014, 8, 1), 5)\n * //=> Tue Sep 01 2009 00:00:00\n */\nexport function subYears(date, amount, options) {\n  return addYears(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subYears;\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport { Send, Users, AlertCircle } from 'lucide-react';\r\nimport { Customer } from '@/hooks/useCustomers';\r\nimport { MessageTemplate } from '@/hooks/useMessages';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Input } from '@/components/ui/input';\r\nimport { useSalesData } from '@/hooks/useSalesData';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { subDays, subMonths, subYears } from 'date-fns';\r\n\r\ntype StatusOption = 'all' | 'paid' | 'unpaid' | 'quote' | 'installment' | 'inactive';\r\ntype InactivityPeriod = '30days' | '60days' | '90days' | '6months' | '1year';\r\n\r\ninterface BulkMessageDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSend: (data: { customerIds: string[]; content: string; templateId?: string }) => Promise<{ success: number; failed: number; errors: string[] }>;\r\n  customers: Customer[];\r\n  templates?: MessageTemplate[];\r\n  searchTerm: string;\r\n  setSearchTerm: (term: string) => void;\r\n}\r\n\r\nconst BulkMessageDialog: React.FC<BulkMessageDialogProps> = ({\r\n  open,\r\n  onClose,\r\n  onSend,\r\n  customers,\r\n  templates = [],\r\n  searchTerm,\r\n  setSearchTerm,\r\n}) => {\r\n  const [content, setContent] = useState('');\r\n  const [selectedCustomers, setSelectedCustomers] = useState<string[]>([]);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('none');\r\n  const [isSending, setIsSending] = useState(false);\r\n  const [statusSelection, setStatusSelection] = useState<StatusOption>('all');\r\n  const [inactivityPeriod, setInactivityPeriod] = useState<InactivityPeriod>('90days');\r\n  const [sendResult, setSendResult] = useState<{ success: number; failed: number; errors: string[] } | null>(null);\r\n\r\n  const { currentBusiness } = useBusiness();\r\n  const { sales, isLoading } = useSalesData(currentBusiness?.id);\r\n\r\n  // Capitalize utility\r\n  const capitalize = (s: string) => s.charAt(0).toUpperCase() + s.slice(1);\r\n\r\n  // Map customers to statuses including inactive\r\n  const customerStatusesMap = useMemo(() => {\r\n    const map: Record<string, Set<StatusOption>> = {};\r\n    if (!sales || sales.length === 0) return map;\r\n\r\n    const now = new Date();\r\n    let cutoffDate = now;\r\n    switch (inactivityPeriod) {\r\n      case '30days': cutoffDate = subDays(now, 30); break;\r\n      case '60days': cutoffDate = subDays(now, 60); break;\r\n      case '90days': cutoffDate = subDays(now, 90); break;\r\n      case '6months': cutoffDate = subMonths(now, 6); break;\r\n      case '1year': cutoffDate = subYears(now, 1); break;\r\n    }\r\n\r\n    customers.forEach(customer => {\r\n      const customerName = (customer.full_name || customer.fullName || customer.name || '').toLowerCase();\r\n      const customerSales = sales.filter(s =>\r\n        s.customerId === customer.id || s.customerName?.toLowerCase().trim() === customerName\r\n      );\r\n\r\n      const statuses = new Set<StatusOption>();\r\n\r\n      if (customerSales.length === 0) {\r\n        statuses.add('inactive');\r\n      } else {\r\n        const lastPurchaseDate = new Date(Math.max(...customerSales.map(s => new Date(s.date).getTime())));\r\n        if (lastPurchaseDate < cutoffDate) statuses.add('inactive');\r\n\r\n        customerSales.forEach(sale => {\r\n          const status = (sale.paymentStatus || '').toUpperCase().trim();\r\n          if (status === 'PAID') statuses.add('paid');\r\n          else if (status === 'QUOTE') statuses.add('quote');\r\n          else if (status === 'INSTALLMENT SALE') statuses.add('installment');\r\n          else if (['NOT PAID', 'UNPAID', 'OPEN'].includes(status)) statuses.add('unpaid');\r\n        });\r\n      }\r\n\r\n      map[customer.id] = statuses;\r\n    });\r\n\r\n    return map;\r\n  }, [customers, sales, inactivityPeriod]);\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setContent('');\r\n      setSelectedCustomers([]);\r\n      setSelectedTemplate('none');\r\n      setStatusSelection('all');\r\n      setSendResult(null);\r\n    }\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (selectedTemplate && selectedTemplate !== 'none') {\r\n      const template = templates.find(t => t.id === selectedTemplate);\r\n      if (template) setContent(template.content);\r\n    }\r\n  }, [selectedTemplate, templates]);\r\n\r\n  const getCustomerPhone = (customer: Customer) =>\r\n    customer.phone_number || customer.phoneNumber || customer.phone || customer.contact || '';\r\n\r\n  const filteredCustomers = useMemo(() => {\r\n    return customers.filter(customer => {\r\n      const phone = getCustomerPhone(customer) || '';\r\n      if (!phone) return false;\r\n\r\n      const name = (customer.full_name || customer.fullName || customer.name || '').toLowerCase();\r\n      const term = (searchTerm || '').toLowerCase();\r\n      const searchMatch = !term || name.includes(term) || phone.toLowerCase().includes(term);\r\n\r\n      const statuses = customerStatusesMap[customer.id] || new Set<StatusOption>();\r\n      let statusMatch = true;\r\n      if (statusSelection !== 'all') {\r\n        statusMatch = statuses.has(statusSelection);\r\n      }\r\n\r\n      return searchMatch && statusMatch;\r\n    });\r\n  }, [customers, searchTerm, statusSelection, customerStatusesMap]);\r\n\r\n  const handleToggleCustomer = (id: string) => {\r\n    setSelectedCustomers(prev =>\r\n      prev.includes(id) ? prev.filter(c => c !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  // Select all / deselect all\r\n  const handleToggleAll = () => {\r\n    if (selectedCustomers.length === filteredCustomers.length) {\r\n      setSelectedCustomers([]);\r\n    } else {\r\n      setSelectedCustomers(filteredCustomers.map(c => c.id));\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (!content || selectedCustomers.length === 0) return;\r\n    setIsSending(true);\r\n    const result = await onSend({\r\n      customerIds: selectedCustomers,\r\n      content,\r\n      templateId: selectedTemplate !== 'none' ? selectedTemplate : undefined,\r\n    });\r\n    setIsSending(false);\r\n    setSendResult(result);\r\n    if (result.failed === 0) setTimeout(() => onClose(), 3000);\r\n  };\r\n\r\n  const totalSMS = selectedCustomers.length * Math.ceil((content.length || 1) / 160);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Dialog open={open} onOpenChange={onClose}>\r\n        <DialogContent className=\"sm:max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"p-4 text-center text-gray-500\">Loading sales data...</div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Users className=\"w-5 h-5\" />\r\n            Send Bulk SMS\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {sendResult ? (\r\n          <div className=\"space-y-4\">\r\n            <div className={`p-4 rounded-lg border ${sendResult.failed === 0 ? 'bg-green-50 border-green-200' : 'bg-amber-50 border-amber-200'}`}>\r\n              <h3 className=\"font-semibold text-lg mb-2\">\r\n                {sendResult.failed === 0 ? '✅ Messages Sent Successfully!' : '⚠️ Sending Complete with Errors'}\r\n              </h3>\r\n              <div className=\"space-y-1 text-sm\">\r\n                <p className=\"text-green-700\">✓ Successfully sent: {sendResult.success}</p>\r\n                {sendResult.failed > 0 && <p className=\"text-red-700\">✗ Failed: {sendResult.failed}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {sendResult.errors.length > 0 && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n                <h4 className=\"font-semibold text-red-900 mb-2\">Errors:</h4>\r\n                <ul className=\"text-sm text-red-800 space-y-1 max-h-[200px] overflow-y-auto\">\r\n                  {sendResult.errors.map((err, idx) => <li key={idx}>• {err}</li>)}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            <Button onClick={onClose} className=\"w-full\">Close</Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {/* Template */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Use Template (Optional)</label>\r\n              <Select value={selectedTemplate} onValueChange={setSelectedTemplate}>\r\n                <SelectTrigger className=\"w-full\">\r\n                  <SelectValue placeholder=\"Choose a template...\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"max-h-[300px] overflow-y-auto\">\r\n                  <SelectItem value=\"none\">None - Type custom message</SelectItem>\r\n                  {templates.map(t => <SelectItem key={t.id} value={t.id}>{t.name}</SelectItem>)}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Message * (Max 160 Characters)</label>\r\n              <Textarea\r\n                placeholder=\"Type your message here... Use {customer_name} for personalization\"\r\n                value={content}\r\n                onChange={e => setContent(e.target.value)}\r\n                rows={4}\r\n                maxLength={160}\r\n                required\r\n                className=\"resize-none w-full\"\r\n              />\r\n              <div className=\"flex justify-between mt-1 text-xs text-gray-500\">\r\n                <span>{content.length} characters</span>\r\n                <span className=\"font-medium text-blue-600\">{totalSMS} total SMS credits will be used</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Status selection */}\r\n            <div className=\"flex gap-2 mb-2 flex-wrap items-center\">\r\n              {(['all','paid','unpaid','quote','installment','inactive'] as StatusOption[]).map(status => (\r\n                <Button\r\n                  key={status}\r\n                  size=\"sm\"\r\n                  variant={statusSelection === status ? 'default' : 'outline'}\r\n                  onClick={() => setStatusSelection(status)}\r\n                >\r\n                  {capitalize(status)}\r\n                </Button>\r\n              ))}\r\n\r\n              {/* Inactivity period selector */}\r\n              {statusSelection === 'inactive' && (\r\n                <Select value={inactivityPeriod} onValueChange={(v: InactivityPeriod) => setInactivityPeriod(v)}>\r\n                  <SelectTrigger className=\"w-[120px] text-xs\">\r\n                    <SelectValue placeholder=\"Select period\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"30days\">30 days</SelectItem>\r\n                    <SelectItem value=\"60days\">60 days</SelectItem>\r\n                    <SelectItem value=\"90days\">90 days</SelectItem>\r\n                    <SelectItem value=\"6months\">6 months</SelectItem>\r\n                    <SelectItem value=\"1year\">1 year</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              )}\r\n\r\n              <Button size=\"sm\" variant=\"outline\" onClick={handleToggleAll}>\r\n                {selectedCustomers.length === filteredCustomers.length \r\n                  ? `Deselect All ${capitalize(statusSelection)} Customers` \r\n                  : `Select All ${capitalize(statusSelection)} Customers`}\r\n              </Button>\r\n\r\n            </div>\r\n\r\n            {/* Search */}\r\n            <Input type=\"text\" placeholder=\"Search customers...\" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} className=\"mb-2\" />\r\n\r\n            {/* Customer list */}\r\n            <div className=\"border rounded-lg max-h-[300px] overflow-y-auto\">\r\n              {filteredCustomers.length === 0 ? (\r\n                <div className=\"p-4 text-center text-gray-500\">\r\n                  <AlertCircle className=\"w-8 h-8 mx-auto mb-2 text-gray-400\" />\r\n                  <p>No customers match your search</p>\r\n                </div>\r\n              ) : (\r\n                filteredCustomers.map(customer => {\r\n                  const phone = getCustomerPhone(customer);\r\n                  const statuses = Array.from(customerStatusesMap[customer.id] || []);\r\n                  return (\r\n                    <div\r\n                      key={customer.id}\r\n                      className=\"flex items-center gap-3 p-3 hover:bg-gray-50 border-b last:border-b-0 cursor-pointer\"\r\n                      onClick={() => handleToggleCustomer(customer.id)}\r\n                    >\r\n                      <Checkbox checked={selectedCustomers.includes(customer.id)} onCheckedChange={() => handleToggleCustomer(customer.id)} />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-medium text-gray-900\">{customer.full_name || customer.fullName || customer.name || 'Unnamed Customer'}</p>\r\n                        <p className=\"text-xs text-gray-500\">{phone}</p>\r\n                        <span className=\"text-xs text-gray-400\">Status: {statuses.map(s => s.toUpperCase()).join(', ')}</span>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })\r\n              )}\r\n            </div>\r\n\r\n            {/* Action */}\r\n            <div className=\"flex justify-end gap-2 pt-4 border-t\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={isSending}>Cancel</Button>\r\n              <Button\r\n                onClick={handleSend}\r\n                disabled={selectedCustomers.length === 0 || !content || isSending}\r\n                className=\"bg-blue-600 hover:bg-blue-700\"\r\n              >\r\n                {isSending ? (\r\n                  <span className=\"animate-spin mr-2\">⏳</span>\r\n                ) : (\r\n                  <>\r\n                    <Send className=\"w-4 h-4 mr-2\" />\r\n                    Send to {selectedCustomers.length} Customer{selectedCustomers.length !== 1 ? 's' : ''}\r\n                  </>\r\n                )}\r\n              </Button>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BulkMessageDialog;\r\n","import React from 'react';\r\nimport { CreditCard, CheckCircle, XCircle, Clock } from 'lucide-react';\r\n\r\ninterface Purchase {\r\n    id: string;\r\n    credits_amount?: number;\r\n    creditsAmount?: number;\r\n    total_cost?: number;\r\n    totalCost?: number;\r\n    payment_phone_number?: string;\r\n    paymentPhoneNumber?: string;\r\n    payment_status?: string;\r\n    paymentStatus?: string;\r\n    payment_method?: string;\r\n    paymentMethod?: string;\r\n    created_at?: string;\r\n    createdAt?: string;\r\n}\r\n\r\ninterface PurchaseHistoryTableProps {\r\n    purchases: Purchase[];\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n    });\r\n};\r\n\r\nconst PurchaseHistoryTable: React.FC<PurchaseHistoryTableProps> = ({ purchases }) => {\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status.toLowerCase()) {\r\n            case 'completed':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                        <CheckCircle className=\"w-3 h-3\" />\r\n                        Completed\r\n                    </span>\r\n                );\r\n            case 'pending':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                        <Clock className=\"w-3 h-3\" />\r\n                        Pending\r\n                    </span>\r\n                );\r\n            case 'failed':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\r\n                        <XCircle className=\"w-3 h-3\" />\r\n                        Failed\r\n                    </span>\r\n                );\r\n            default:\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\r\n                        {status}\r\n                    </span>\r\n                );\r\n        }\r\n    };\r\n\r\n    if (purchases.length === 0) {\r\n        return (\r\n            <div className=\"bg-white rounded-lg shadow border p-8 text-center\">\r\n                <CreditCard className=\"w-12 h-12 mx-auto text-gray-400 mb-3\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-1\">No Purchase History</h3>\r\n                <p className=\"text-sm text-gray-500\">Your credit purchase history will appear here.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-lg shadow border overflow-hidden\">\r\n            <div className=\"px-6 py-4 border-b bg-gray-50\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                    <CreditCard className=\"w-5 h-5\" />\r\n                    Purchase History\r\n                </h3>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Date\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Credits\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Total Cost\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Payment Phone\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Status\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Payment Method\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {purchases.map((purchase) => (\r\n                            <tr key={purchase.id} className=\"hover:bg-gray-50\">\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                    {formatDate(purchase.created_at || purchase.createdAt || '')}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                    {(purchase.credits_amount || purchase.creditsAmount || 0).toLocaleString()} credits\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                    UGX {(purchase.total_cost || purchase.totalCost || 0).toLocaleString()}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\r\n                                    {purchase.payment_phone_number || purchase.paymentPhoneNumber || '-'}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                    {getStatusBadge(purchase.payment_status || purchase.paymentStatus || 'pending')}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\r\n                                    {purchase.payment_method || purchase.paymentMethod || '-'}\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PurchaseHistoryTable;\r\n","import React, { useState } from 'react';\r\nimport { MessageSquare, CheckCircle, XCircle, Clock, Send } from 'lucide-react';\r\n\r\ninterface Message {\r\n    id: string;\r\n    content: string;\r\n    phone_number?: string;\r\n    phoneNumber?: string;\r\n    sms_credits_used?: number;\r\n    smsCreditsUsed?: number;\r\n    status: string;\r\n    sent_at?: string;\r\n    sentAt?: string;\r\n    created_at?: string;\r\n    createdAt?: string;\r\n}\r\n\r\ninterface UsageHistoryTableProps {\r\n    messages: Message[];\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n    });\r\n};\r\n\r\nconst UsageHistoryTable: React.FC<UsageHistoryTableProps> = ({ messages }) => {\r\n    const [expandedMessageId, setExpandedMessageId] = useState<string | null>(null);\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status.toLowerCase()) {\r\n            case 'sent':\r\n            case 'delivered':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                        <CheckCircle className=\"w-3 h-3\" />\r\n                        {status === 'delivered' ? 'Delivered' : 'Sent'}\r\n                    </span>\r\n                );\r\n            case 'pending':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                        <Clock className=\"w-3 h-3\" />\r\n                        Pending\r\n                    </span>\r\n                );\r\n            case 'failed':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\r\n                        <XCircle className=\"w-3 h-3\" />\r\n                        Failed\r\n                    </span>\r\n                );\r\n            default:\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\r\n                        {status}\r\n                    </span>\r\n                );\r\n        }\r\n    };\r\n\r\n    const truncateMessage = (content: string, maxLength: number = 50) => {\r\n        if (content.length <= maxLength) return content;\r\n        return content.substring(0, maxLength) + '...';\r\n    };\r\n\r\n    if (messages.length === 0) {\r\n        return (\r\n            <div className=\"bg-white rounded-lg shadow border p-8 text-center\">\r\n                <Send className=\"w-12 h-12 mx-auto text-gray-400 mb-3\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-1\">No Usage History</h3>\r\n                <p className=\"text-sm text-gray-500\">Your sent messages will appear here.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-lg shadow border overflow-hidden\">\r\n            <div className=\"px-6 py-4 border-b bg-gray-50\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                    <MessageSquare className=\"w-5 h-5\" />\r\n                    Usage History\r\n                </h3>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Date Sent\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Phone Number\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Message\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Credits Used\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                Status\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {messages.map((message) => {\r\n                            const creditsUsed = message.sms_credits_used || message.smsCreditsUsed || 0;\r\n                            return (\r\n                                <tr key={message.id} className=\"hover:bg-gray-50\">\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                        {formatDate(message.sent_at || message.sentAt || message.created_at || message.createdAt || '')}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\r\n                                        {message.phone_number || message.phoneNumber || '-'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm text-gray-900 max-w-md\">\r\n                                        <div>\r\n                                            {expandedMessageId === message.id ? (\r\n                                                <div className=\"whitespace-pre-wrap\">\r\n                                                    {message.content}\r\n                                                    <button\r\n                                                        onClick={() => setExpandedMessageId(null)}\r\n                                                        className=\"text-blue-600 hover:text-blue-800 ml-2 text-xs\"\r\n                                                    >\r\n                                                        Show less\r\n                                                    </button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div>\r\n                                                    {truncateMessage(message.content)}\r\n                                                    {message.content.length > 50 && (\r\n                                                        <button\r\n                                                            onClick={() => setExpandedMessageId(message.id)}\r\n                                                            className=\"text-blue-600 hover:text-blue-800 ml-2 text-xs\"\r\n                                                        >\r\n                                                            Show more\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                        {creditsUsed} credit{creditsUsed > 1 ? 's' : ''}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        {getStatusBadge(message.status)}\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UsageHistoryTable;\r\n","import React, { useState, useCallback } from 'react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useMessages, Message, MessageTemplate, Purchase } from '@/hooks/useMessages';\r\nimport { useCustomers } from '@/hooks/useCustomers';\r\nimport { useProfiles } from '@/contexts/ProfileContext';\r\nimport MessageHeader from '@/components/messages/MessageHeader';\r\nimport MessageStatsCards from '@/components/messages/MessageStatsCards';\r\nimport MessageContent from '@/components/messages/MessageContent';\r\nimport NewMessageDialog from '@/components/messages/NewMessageDialog';\r\nimport MessageTemplateDialog from '@/components/messages/MessageTemplateDialog';\r\nimport TopUpCreditsDialog from '@/components/messages/TopUpCreditsDialog';\r\nimport BulkMessageDialog from '@/components/messages/BulkMessageDialog';\r\nimport PurchaseHistoryTable from '@/components/messages/PurchaseHistoryTable';\r\nimport UsageHistoryTable from '@/components/messages/UsageHistoryTable';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle, ArrowLeft } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nconst Messages = () => {\r\n  const { user } = useAuth();\r\n  const { currentBusiness, isLoading: businessLoading } = useBusiness();\r\n  const { currentProfile, hasPermission, isLoading: profilesLoading } = useProfiles();\r\n  const navigate = useNavigate();\r\n\r\n  // Permissions\r\n  const canView = hasPermission('messages', 'view');\r\n  const canCreate = hasPermission('messages', 'create');\r\n  const canEdit = hasPermission('messages', 'edit');\r\n  const canDelete = hasPermission('messages', 'delete');\r\n  const { messages, templates, purchases, isLoading, createMessage, createBulkMessages, createTemplate, updateTemplate, deleteTemplate, initiateCreditPurchase, getMessageStats } = useMessages(user?.id);\r\n\r\n  const { customers } = useCustomers();\r\n\r\n  const [newMessageOpen, setNewMessageOpen] = useState(false);\r\n  const [newTemplateOpen, setNewTemplateOpen] = useState(false);\r\n  const [bulkMessageOpen, setBulkMessageOpen] = useState(false);\r\n  const [topUpOpen, setTopUpOpen] = useState(false);\r\n  const [selectedTemplate, setSelectedTemplate] = useState<MessageTemplate | undefined>(undefined);\r\n  const [activeTab, setActiveTab] = useState('messages');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n\r\n  const stats = getMessageStats();\r\n\r\n  const handleSendMessage = async (messageData: {\r\n    phoneNumber: string;\r\n    content: string;\r\n    customerId?: string;\r\n    templateId?: string;\r\n  }) => {\r\n    try {\r\n      await createMessage(messageData);\r\n      return { success: 1, failed: 0, errors: [] };\r\n    } catch (error) {\r\n      console.error('Failed to send message:', error);\r\n      return { success: 0, failed: 1, errors: [error instanceof Error ? error.message : 'Unknown error'] };\r\n    }\r\n  };\r\n\r\n\r\n  const handleBulkSend = useCallback(async (data: {\r\n    customerIds: string[];\r\n    content: string;\r\n    templateId?: string;\r\n  }) => {\r\n    try {\r\n      const result = await createBulkMessages(data);\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Failed to send bulk messages:', error);\r\n      alert(error instanceof Error ? error.message : 'Failed to send messages');\r\n      return { success: 0, failed: 0, errors: [error instanceof Error ? error.message : 'Unknown error'] };\r\n    }\r\n  }, [createBulkMessages]);\r\n\r\n  const handleSaveTemplate = useCallback(async (templateData: Omit<MessageTemplate, 'id' | 'userId' | 'locationId' | 'createdAt' | 'updatedAt'>) => {\r\n    if (selectedTemplate) {\r\n      await updateTemplate(selectedTemplate.id, templateData);\r\n    } else {\r\n      await createTemplate(templateData);\r\n    }\r\n    setNewTemplateOpen(false);\r\n    setSelectedTemplate(undefined);\r\n    return true;\r\n  }, [selectedTemplate, updateTemplate, createTemplate]);\r\n\r\n  const handleEditTemplate = useCallback((template: MessageTemplate) => {\r\n    setSelectedTemplate(template);\r\n    setNewTemplateOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteTemplate = useCallback(async (templateId: string) => {\r\n    if (confirm('Are you sure you want to delete this template?')) {\r\n      await deleteTemplate(templateId);\r\n    }\r\n  }, [deleteTemplate]);\r\n\r\n\r\n  const handleTopUpCredits = useCallback(async (credits: number, phoneNumber: string) => {\r\n    try {\r\n      const result = await initiateCreditPurchase(credits, phoneNumber);\r\n      // Redirect to payment page\r\n      window.open(result.redirectUrl, '_blank');\r\n      setTopUpOpen(false);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to initiate top-up:', error);\r\n      alert(error instanceof Error ? error.message : 'Failed to initiate payment');\r\n      return false;\r\n    }\r\n  }, [initiateCreditPurchase]);\r\n\r\n  if (businessLoading || !currentBusiness || isLoading || profilesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!canView) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertTitle>Access Denied</AlertTitle>\r\n          <AlertDescription>\r\n            You do not have permission to view the messaging module.\r\n            Please contact your administrator if you believe this is an error.\r\n          </AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => navigate('/')} variant=\"outline\" className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Dashboard\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filteredMessages = messages.filter(msg => {\r\n    const phone = msg.phoneNumber || '';\r\n    const text = msg.content || '';\r\n    const matchesSearch = phone.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      text.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || msg.status === statusFilter;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header Section */}\r\n      <MessageHeader\r\n        onNewMessage={() => setNewMessageOpen(true)}\r\n        onNewTemplate={() => {\r\n          setSelectedTemplate(undefined);\r\n          setNewTemplateOpen(true);\r\n        }}\r\n        onTopUp={() => setTopUpOpen(true)}\r\n        onBulkMessage={() => setBulkMessageOpen(true)}\r\n        smsCredits={currentProfile?.sms_credits || 0}\r\n        canCreate={canCreate}\r\n      />\r\n\r\n      {/* Stats Cards */}\r\n      <MessageStatsCards stats={stats} />\r\n\r\n      {/* Main Content */}\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n        <TabsList className=\"grid w-full max-w-2xl grid-cols-3\">\r\n          <TabsTrigger value=\"messages\">Messages</TabsTrigger>\r\n          <TabsTrigger value=\"templates\">Templates</TabsTrigger>\r\n          <TabsTrigger value=\"history\">History</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"messages\" className=\"space-y-4 mt-6\">\r\n          <MessageContent\r\n            messages={filteredMessages}\r\n            customers={customers}\r\n            searchTerm={searchTerm}\r\n            setSearchTerm={setSearchTerm}\r\n            statusFilter={statusFilter}\r\n            setStatusFilter={setStatusFilter}\r\n          />\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"templates\" className=\"space-y-4 mt-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {templates.map(template => (\r\n              <div\r\n                key={template.id}\r\n                className=\"bg-white p-4 rounded-lg shadow border hover:shadow-md transition-shadow\"\r\n              >\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <h3 className=\"font-semibold text-lg\">{template.name}</h3>\r\n                  <div className=\"flex gap-2\">\r\n                    {canEdit && (\r\n                      <button\r\n                        onClick={() => handleEditTemplate(template)}\r\n                        className=\"text-blue-600 hover:text-blue-800 text-sm\"\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                    )}\r\n                    {canDelete && (\r\n                      <button\r\n                        onClick={() => handleDeleteTemplate(template.id)}\r\n                        className=\"text-red-600 hover:text-red-800 text-sm\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {template.category && (\r\n                  <span className=\"text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-600\">\r\n                    {template.category}\r\n                  </span>\r\n                )}\r\n                <p className=\"text-sm text-gray-600 mt-2 line-clamp-3\">\r\n                  {template.content}\r\n                </p>\r\n                {template.variables.length > 0 && (\r\n                  <div className=\"mt-2 flex flex-wrap gap-1\">\r\n                    {template.variables.map(v => (\r\n                      <span key={v} className=\"text-xs px-2 py-0.5 bg-blue-50 text-blue-600 rounded\">\r\n                        {v}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"history\" className=\"space-y-6 mt-6\">\r\n          <PurchaseHistoryTable purchases={purchases} />\r\n          <UsageHistoryTable messages={messages} />\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Dialogs */}\r\n\r\n      <MessageTemplateDialog\r\n        open={newTemplateOpen}\r\n        onClose={() => {\r\n          setNewTemplateOpen(false);\r\n          setSelectedTemplate(undefined);\r\n        }}\r\n        onSave={handleSaveTemplate}\r\n        initialData={selectedTemplate}\r\n      />\r\n\r\n      <TopUpCreditsDialog\r\n        open={topUpOpen}\r\n        onClose={() => setTopUpOpen(false)}\r\n        onTopUp={handleTopUpCredits}\r\n      />\r\n\r\n      <NewMessageDialog\r\n        open={newMessageOpen}\r\n        onClose={() => setNewMessageOpen(false)}\r\n        onSend={handleSendMessage}\r\n        customers={customers}\r\n        templates={templates}\r\n      />\r\n\r\n      <BulkMessageDialog\r\n        open={bulkMessageOpen}\r\n        onClose={() => setBulkMessageOpen(false)}\r\n        onSend={handleBulkSend}\r\n        customers={customers}\r\n        templates={templates}\r\n        searchTerm={searchTerm}       // reuse parent searchTerm\r\n        setSearchTerm={setSearchTerm} // reuse parent setter\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Messages;","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[3,7,8,13]}