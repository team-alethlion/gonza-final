{"version":3,"sources":["../../../../src/pages/History.tsx","../../../../src/hooks/useActivityHistory.ts","../../../../src/components/history/HistoryItem.tsx","../../../../node_modules/date-fns/formatDistanceToNow.js","../../../../node_modules/date-fns/formatDistance.js","../../../../node_modules/date-fns/compareAsc.js","../../../../node_modules/date-fns/differenceInMonths.js","../../../../node_modules/date-fns/isLastDayOfMonth.js","../../../../node_modules/date-fns/_lib/getRoundingMethod.js","../../../../node_modules/date-fns/differenceInMilliseconds.js","../../../../node_modules/date-fns/differenceInSeconds.js","../../../../src/components/history/HistoryList.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useActivityHistory } from '@/hooks/useActivityHistory';\r\nimport { HistoryList } from '@/components/history/HistoryList';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\r\nimport { format } from 'date-fns';\r\nimport { Calendar as CalendarIcon, Filter, Search, X } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\n\r\nexport interface ActivityFilters {\r\n    activityType: 'ALL' | 'CREATE' | 'UPDATE' | 'DELETE';\r\n    module: 'ALL' | 'SALES' | 'INVENTORY' | 'EXPENSES' | 'FINANCE' | 'CUSTOMERS' | 'TASKS';\r\n    search: string;\r\n    dateRange: {\r\n        from: Date | undefined;\r\n        to: Date | undefined;\r\n    };\r\n}\r\n\r\nconst HistoryPage = () => {\r\n    const { currentBusiness } = useBusiness();\r\n    const [filters, setFilters] = useState<ActivityFilters>({\r\n        activityType: 'ALL',\r\n        module: 'ALL',\r\n        search: '',\r\n        dateRange: {\r\n            from: undefined,\r\n            to: undefined,\r\n        },\r\n    });\r\n\r\n    const { activities, isLoading, totalPages, currentPage, setCurrentPage } = useActivityHistory(\r\n        currentBusiness?.id,\r\n        filters\r\n    );\r\n\r\n    const clearFilters = () => {\r\n        setFilters({\r\n            activityType: 'ALL',\r\n            module: 'ALL',\r\n            search: '',\r\n            dateRange: {\r\n                from: undefined,\r\n                to: undefined,\r\n            },\r\n        });\r\n    };\r\n\r\n    const hasActiveFilters = filters.activityType !== 'ALL' ||\r\n        filters.module !== 'ALL' ||\r\n        filters.search !== '' ||\r\n        filters.dateRange.from !== undefined;\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4 md:p-6 space-y-6 max-w-6xl\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Recent Activity</h1>\r\n                    <p className=\"text-muted-foreground mt-1\">\r\n                        Track all actions and changes across your business\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 justify-between\">\r\n                        <CardTitle className=\"text-lg font-medium flex items-center gap-2\">\r\n                            <Filter className=\"h-5 w-5\" />\r\n                            Filters\r\n                        </CardTitle>\r\n                        {hasActiveFilters && (\r\n                            <Button variant=\"ghost\" size=\"sm\" onClick={clearFilters} className=\"h-8 px-2 text-muted-foreground hover:text-foreground\">\r\n                                <X className=\"h-4 w-4 mr-1\" />\r\n                                Clear Filters\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                        {/* Search */}\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"Search activities...\"\r\n                                className=\"pl-9\"\r\n                                value={filters.search}\r\n                                onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Module Filter */}\r\n                        <Select\r\n                            value={filters.module}\r\n                            onValueChange={(value: any) => setFilters(prev => ({ ...prev, module: value }))}\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"All Modules\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"ALL\">All Modules</SelectItem>\r\n                                <SelectItem value=\"SALES\">Sales</SelectItem>\r\n                                <SelectItem value=\"INVENTORY\">Inventory</SelectItem>\r\n                                <SelectItem value=\"EXPENSES\">Expenses</SelectItem>\r\n                                <SelectItem value=\"CUSTOMERS\">Customers</SelectItem>\r\n                                <SelectItem value=\"FINANCE\">Finance</SelectItem>\r\n                                <SelectItem value=\"TASKS\">Tasks</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Activity Type Filter */}\r\n                        <Select\r\n                            value={filters.activityType}\r\n                            onValueChange={(value: any) => setFilters(prev => ({ ...prev, activityType: value }))}\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"All Actions\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"ALL\">All Actions</SelectItem>\r\n                                <SelectItem value=\"CREATE\">Created</SelectItem>\r\n                                <SelectItem value=\"UPDATE\">Updated</SelectItem>\r\n                                <SelectItem value=\"DELETE\">Deleted</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Date Range Picker */}\r\n                        <Popover>\r\n                            <PopoverTrigger asChild>\r\n                                <Button\r\n                                    variant={\"outline\"}\r\n                                    className={cn(\r\n                                        \"justify-start text-left font-normal\",\r\n                                        !filters.dateRange.from && \"text-muted-foreground\"\r\n                                    )}\r\n                                >\r\n                                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                                    {filters.dateRange.from ? (\r\n                                        filters.dateRange.to ? (\r\n                                            <>\r\n                                                {format(filters.dateRange.from, \"LLL dd, y\")} -{\" \"}\r\n                                                {format(filters.dateRange.to, \"LLL dd, y\")}\r\n                                            </>\r\n                                        ) : (\r\n                                            format(filters.dateRange.from, \"LLL dd, y\")\r\n                                        )\r\n                                    ) : (\r\n                                        <span>Pick a date range</span>\r\n                                    )}\r\n                                </Button>\r\n                            </PopoverTrigger>\r\n                            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                <Calendar\r\n                                    initialFocus\r\n                                    mode=\"range\"\r\n                                    defaultMonth={filters.dateRange.from}\r\n                                    selected={filters.dateRange}\r\n                                    onSelect={(range) => setFilters(prev => ({\r\n                                        ...prev,\r\n                                        dateRange: { from: range?.from, to: range?.to }\r\n                                    }))}\r\n                                    numberOfMonths={2}\r\n                                />\r\n                            </PopoverContent>\r\n                        </Popover>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {isLoading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <LoadingSpinner message=\"Loading activity history...\" />\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    <HistoryList activities={activities} />\r\n\r\n                    {/* Pagination */}\r\n                    {totalPages > 1 && (\r\n                        <div className=\"flex justify-center gap-2 mt-6\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                                disabled={currentPage === 1}\r\n                            >\r\n                                Previous\r\n                            </Button>\r\n                            <div className=\"flex items-center px-4 text-sm text-muted-foreground\">\r\n                                Page {currentPage} of {totalPages}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                                disabled={currentPage === totalPages}\r\n                            >\r\n                                Next\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HistoryPage;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { useCurrentUser } from './useCurrentUser';\r\nimport { ActivityFilters as FilterTypes } from '@/pages/History';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { getActivityHistoryAction, ActivityFilters } from '@/app/actions/activity';\r\n\r\nexport interface ActivityHistoryItem {\r\n  id: string;\r\n  user_id: string;\r\n  location_id: string;\r\n  activity_type: 'CREATE' | 'UPDATE' | 'DELETE';\r\n  module: 'SALES' | 'INVENTORY' | 'EXPENSES' | 'FINANCE' | 'CUSTOMERS' | 'TASKS';\r\n  entity_type: string;\r\n  entity_id: string | null;\r\n  entity_name: string;\r\n  description: string;\r\n  metadata: any;\r\n  created_at: string;\r\n  profile_id: string | null;\r\n  profile_name: string | null;\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 20;\r\n\r\nexport const useActivityHistory = (locationId?: string, filters?: FilterTypes) => {\r\n  const { userId } = useCurrentUser();\r\n  const [activities, setActivities] = useState<ActivityHistoryItem[]>([]);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const queryClient = useQueryClient();\r\n\r\n  const fetchActivities = useCallback(async (): Promise<{ activities: ActivityHistoryItem[], count: number }> => {\r\n    if (!userId || !locationId) {\r\n      return { activities: [], count: 0 };\r\n    }\r\n\r\n    try {\r\n      const actionFilters: ActivityFilters = filters ? {\r\n        activityType: filters.activityType,\r\n        module: filters.module,\r\n        search: filters.search,\r\n        dateFrom: filters.dateRange.from?.toISOString(),\r\n        dateTo: filters.dateRange.to?.toISOString()\r\n      } : {};\r\n\r\n      const result = await getActivityHistoryAction(\r\n        locationId,\r\n        userId,\r\n        currentPage,\r\n        ITEMS_PER_PAGE,\r\n        actionFilters\r\n      );\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch activities');\r\n      }\r\n\r\n      return {\r\n        activities: result.data.activities as ActivityHistoryItem[],\r\n        count: result.data.count\r\n      };\r\n    } catch (error) {\r\n      console.error('Error fetching activity history:', error);\r\n      return { activities: [], count: 0 };\r\n    }\r\n  }, [userId, locationId, currentPage, filters]);\r\n\r\n  // React Query caching\r\n  const queryKey = ['activity_history', userId, locationId, currentPage, filters];\r\n  const { data: queriedData, isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: fetchActivities,\r\n    enabled: !!userId && !!locationId,\r\n    staleTime: 5 * 60_000,\r\n    gcTime: 30 * 60_000,\r\n    refetchOnWindowFocus: false,\r\n    refetchOnReconnect: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedData) {\r\n      setActivities(queriedData.activities);\r\n      setTotalCount(queriedData.count);\r\n      setTotalPages(Math.ceil(queriedData.count / ITEMS_PER_PAGE));\r\n    }\r\n  }, [queriedData]);\r\n\r\n  // Derived loading state - only true when no cached page data\r\n  const isLoading = isQueryLoading && !queriedData;\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1); // Reset to first page when filters change\r\n  }, [filters]);\r\n\r\n  const refetchActivities = () => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  };\r\n\r\n  // Realtime: In the Next.js/Prisma model, we typically rely on manual invalidation \r\n  // or polling. Supabase realtime is removed here to align with the Prisma migration.\r\n  useEffect(() => {\r\n    if (!userId || !locationId) return;\r\n\r\n    // Realtime invalidation would now happen via Server Actions or a dedicated WS server.\r\n    // For now, we rely on manual refresh or cache invalidation from mutations.\r\n  }, [userId, locationId, currentPage, filters]);\r\n\r\n  return {\r\n    activities,\r\n    isLoading,\r\n    totalCount,\r\n    currentPage,\r\n    totalPages,\r\n    setCurrentPage,\r\n    refetch: refetchActivities\r\n  };\r\n};","import React from 'react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card } from '@/components/ui/card';\r\nimport { ActivityHistoryItem } from '@/hooks/useActivityHistory';\r\nimport {\r\n  ShoppingCart,\r\n  Package,\r\n  Receipt,\r\n  CreditCard,\r\n  Users,\r\n  CheckSquare,\r\n  Plus,\r\n  Edit,\r\n  Trash2,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { useFinancialVisibility } from '@/hooks/useFinancialVisibility';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { formatNumber } from '@/lib/utils';\r\n\r\ninterface HistoryItemProps {\r\n  activities: ActivityHistoryItem[];\r\n  isGrouped?: boolean;\r\n  activity?: ActivityHistoryItem; // For backward compatibility if needed, though we'll use activities[0]\r\n}\r\n\r\nconst getModuleIcon = (module: string) => {\r\n  switch (module) {\r\n    case 'SALES':\r\n      return <ShoppingCart className=\"h-4 w-4\" />;\r\n    case 'INVENTORY':\r\n      return <Package className=\"h-4 w-4\" />;\r\n    case 'EXPENSES':\r\n      return <Receipt className=\"h-4 w-4\" />;\r\n    case 'FINANCE':\r\n      return <CreditCard className=\"h-4 w-4\" />;\r\n    case 'CUSTOMERS':\r\n      return <Users className=\"h-4 w-4\" />;\r\n    case 'TASKS':\r\n      return <CheckSquare className=\"h-4 w-4\" />;\r\n    default:\r\n      return <Package className=\"h-4 w-4\" />;\r\n  }\r\n};\r\n\r\nconst getActivityIcon = (activityType: string) => {\r\n  switch (activityType) {\r\n    case 'CREATE':\r\n      return <Plus className=\"h-3 w-3\" />;\r\n    case 'UPDATE':\r\n      return <Edit className=\"h-3 w-3\" />;\r\n    case 'DELETE':\r\n      return <Trash2 className=\"h-3 w-3\" />;\r\n    default:\r\n      return <Edit className=\"h-3 w-3\" />;\r\n  }\r\n};\r\n\r\nconst getActivityVariant = (activityType: string) => {\r\n  switch (activityType) {\r\n    case 'CREATE':\r\n      return 'default';\r\n    case 'UPDATE':\r\n      return 'secondary';\r\n    case 'DELETE':\r\n      return 'destructive';\r\n    default:\r\n      return 'secondary';\r\n  }\r\n};\r\n\r\nconst getModuleColor = (module: string) => {\r\n  switch (module) {\r\n    case 'SALES':\r\n      return 'text-green-600 bg-green-50 border-green-200';\r\n    case 'INVENTORY':\r\n      return 'text-blue-600 bg-blue-50 border-blue-200';\r\n    case 'EXPENSES':\r\n      return 'text-red-600 bg-red-50 border-red-200';\r\n    case 'FINANCE':\r\n      return 'text-purple-600 bg-purple-50 border-purple-200';\r\n    case 'CUSTOMERS':\r\n      return 'text-orange-600 bg-orange-50 border-orange-200';\r\n    case 'TASKS':\r\n      return 'text-indigo-600 bg-indigo-50 border-indigo-200';\r\n    default:\r\n      return 'text-gray-600 bg-gray-50 border-gray-200';\r\n  }\r\n};\r\n\r\nexport const HistoryItem: React.FC<HistoryItemProps> = ({ activities, isGrouped, activity: singleActivity }) => {\r\n  // Handle both new array prop and legacy single prop\r\n  const activityList = activities || (singleActivity ? [singleActivity] : []);\r\n  if (activityList.length === 0) return null;\r\n\r\n  const latestActivity = activityList[0];\r\n\r\n  return (\r\n    <Card className=\"p-3 md:p-4 transition-colors hover:bg-muted/50\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4\">\r\n        {/* Mobile: Icon and header on same line */}\r\n        <div className=\"flex items-start gap-3 flex-1\">\r\n          <div className={`p-2 rounded-lg border flex-shrink-0 ${getModuleColor(latestActivity.module)}`}>\r\n            {getModuleIcon(latestActivity.module)}\r\n          </div>\r\n\r\n          <div className=\"flex-1 min-w-0\">\r\n            {/* Entity name - ensure it doesn't overflow */}\r\n            <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n              <span className=\"font-medium text-foreground leading-tight break-words\">\r\n                {latestActivity.entity_name}\r\n              </span>\r\n              <div className=\"text-xs text-muted-foreground whitespace-nowrap flex-shrink-0 sm:hidden\">\r\n                {formatDistanceToNow(new Date(latestActivity.created_at), { addSuffix: true })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Badges - wrap on mobile */}\r\n            <div className=\"flex flex-wrap items-center gap-1 mb-2\">\r\n              <Badge variant={getActivityVariant(latestActivity.activity_type) as any} className=\"gap-1 text-xs\">\r\n                {getActivityIcon(latestActivity.activity_type)}\r\n                <span className=\"hidden xs:inline\">{latestActivity.activity_type}</span>\r\n                <span className=\"xs:hidden\">{latestActivity.activity_type.charAt(0)}</span>\r\n              </Badge>\r\n              <Badge variant=\"outline\" className=\"text-xs\">\r\n                {latestActivity.module}\r\n              </Badge>\r\n              {latestActivity.profile_name && (\r\n                <Badge variant=\"secondary\" className=\"text-xs truncate max-w-24\">\r\n                  {latestActivity.profile_name}\r\n                </Badge>\r\n              )}\r\n              {isGrouped && (\r\n                <Badge variant=\"outline\" className=\"text-xs bg-muted/50\">\r\n                  <Clock className=\"h-3 w-3 mr-1\" />\r\n                  {activityList.length} actions\r\n                </Badge>\r\n              )}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <p className=\"text-sm text-muted-foreground mb-2 leading-relaxed\">\r\n              {latestActivity.description}\r\n            </p>\r\n\r\n            {/* Details */}\r\n            {latestActivity.metadata && Object.keys(latestActivity.metadata).length > 0 && (\r\n              <div className=\"text-xs text-muted-foreground\">\r\n                <details className=\"cursor-pointer group\">\r\n                  <summary className=\"hover:text-foreground py-1 select-none flex items-center gap-1\">\r\n                    <span className=\"group-open:rotate-90 transition-transform inline-block\">‚ñ∏</span> View details\r\n                  </summary>\r\n                  <div className=\"mt-2 pl-2 border-l-2 border-muted\">\r\n                    {latestActivity.module === 'SALES' && latestActivity.metadata.items ? (\r\n                      <SaleDetailsView metadata={latestActivity.metadata} />\r\n                    ) : (\r\n                      <pre className=\"mt-1 p-2 bg-muted rounded text-xs overflow-auto max-h-40\">\r\n                        {JSON.stringify(latestActivity.metadata, null, 2)}\r\n                      </pre>\r\n                    )}\r\n                  </div>\r\n                </details>\r\n              </div>\r\n            )}\r\n\r\n            {/* Timeline for Grouped Activities */}\r\n            {isGrouped && activityList.length > 1 && (\r\n              <div className=\"mt-3 pt-3 border-t\">\r\n                <details className=\"cursor-pointer group\">\r\n                  <summary className=\"text-xs font-medium hover:text-foreground select-none flex items-center gap-1\">\r\n                    <span className=\"group-open:rotate-90 transition-transform inline-block\">‚ñ∏</span> Activity Timeline ({activityList.length} actions)\r\n                  </summary>\r\n                  <div className=\"mt-3 space-y-3 pl-1\">\r\n                    {activityList.map((item, index) => (\r\n                      <div key={item.id} className=\"relative pl-4 border-l border-border last:border-0 pb-1\">\r\n                        {/* Timeline dot */}\r\n                        <div className={`absolute -left-[5px] top-1.5 h-2.5 w-2.5 rounded-full border ${index === 0 ? 'bg-primary border-primary' : 'bg-background border-muted-foreground'\r\n                          }`} />\r\n\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          <div className=\"flex items-center gap-2 flex-wrap\">\r\n                            <Badge variant={getActivityVariant(item.activity_type) as any} className=\"text-[10px] h-5 px-1.5\">\r\n                              {item.activity_type}\r\n                            </Badge>\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {formatDistanceToNow(new Date(item.created_at), { addSuffix: true })}\r\n                            </span>\r\n                            {item.profile_name && (\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                by {item.profile_name}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {item.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </details>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Desktop timestamp */}\r\n        <div className=\"text-xs text-muted-foreground whitespace-nowrap hidden sm:block flex-shrink-0\">\r\n          {formatDistanceToNow(new Date(latestActivity.created_at), { addSuffix: true })}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Component for displaying sale details in a user-friendly format\r\nconst SaleDetailsView: React.FC<{ metadata: any }> = ({ metadata }) => {\r\n  const { canViewSellingPrice, canViewProfit, canViewTotalAmount } = useFinancialVisibility();\r\n  const { settings } = useBusinessSettings();\r\n  const currency = settings?.currency || 'UGX';\r\n\r\n  return (\r\n    <div className=\"space-y-3 p-2 md:p-3 bg-muted rounded\">\r\n      {/* Sale Summary - Stack on mobile */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 pb-2 border-b border-border\">\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Receipt #</span>\r\n          <p className=\"text-sm font-mono break-all\">{metadata.receiptNumber}</p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Total Amount</span>\r\n          <p className=\"text-sm font-semibold\">\r\n            {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(metadata.totalAmount || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Payment Status</span>\r\n          <p className=\"text-sm\">{metadata.paymentStatus}</p>\r\n        </div>\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Profit</span>\r\n          <p className=\"text-sm\">\r\n            {canViewProfit ? `${currency} ${formatNumber(metadata.profit || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Additional Info for Deletions */}\r\n      {metadata.restoredToInventory && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-orange-600\">‚ö†Ô∏è Inventory Restored</span>\r\n          <p className=\"text-xs text-muted-foreground\">Product quantities were restored to inventory</p>\r\n        </div>\r\n      )}\r\n\r\n      {metadata.hadCashTransaction && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-red-600\">üí∞ Cash Transaction Removed</span>\r\n          <p className=\"text-xs text-muted-foreground\">Associated cash transaction was also deleted</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Customer Information */}\r\n      {(metadata.customerAddress || metadata.customerContact) && (\r\n        <div className=\"pb-2 border-b border-border\">\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Customer Details</span>\r\n          {metadata.customerAddress && (\r\n            <p className=\"text-xs\">Address: {metadata.customerAddress}</p>\r\n          )}\r\n          {metadata.customerContact && (\r\n            <p className=\"text-xs\">Contact: {metadata.customerContact}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      {/* Items */}\r\n      {metadata.items && metadata.items.length > 0 && (\r\n        <div>\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Items ({metadata.items.length})</span>\r\n          <div className=\"mt-1 space-y-2 max-h-40 overflow-y-auto\">\r\n            {metadata.items.map((item: any, index: number) => (\r\n              <div key={index} className=\"p-2 bg-background rounded border\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-xs font-medium break-words\">{item.description}</p>\r\n                  <div className=\"flex flex-col xs:flex-row xs:justify-between gap-1\">\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Qty: {item.quantity} √ó {canViewSellingPrice ? `${currency} ${formatNumber(item.price || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n                    </p>\r\n                    <p className=\"text-xs font-medium\">\r\n                      = {canViewSellingPrice ? `${currency} ${formatNumber(item.total || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n                    </p>\r\n                  </div>\r\n                  {item.discountPercentage > 0 && (\r\n                    <p className=\"text-xs text-orange-600\">\r\n                      Discount: {item.discountPercentage}% ({canViewSellingPrice ? `${currency} ${formatNumber(item.discountAmount || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'})\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Payment Details */}\r\n      {metadata.amountPaid !== undefined && (\r\n        <div className=\"pt-2 border-t border-border\">\r\n          <div className=\"grid grid-cols-1 xs:grid-cols-2 gap-2 text-xs\">\r\n            <div>\r\n              <span className=\"text-muted-foreground\">Amount Paid:</span>\r\n              <span className=\"ml-1 font-medium\">\r\n                {canViewTotalAmount || canViewSellingPrice ? `${currency} ${formatNumber(metadata.amountPaid || 0)}` : '‚Ä¢‚Ä¢‚Ä¢'}\r\n              </span>\r\n            </div>\r\n            {metadata.taxRate > 0 && (\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Tax Rate:</span>\r\n                <span className=\"ml-1\">{metadata.taxRate}%</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Notes */}\r\n      {metadata.notes && (\r\n        <div className=\"pt-2 border-t border-border\">\r\n          <span className=\"text-xs font-medium text-muted-foreground\">Notes</span>\r\n          <p className=\"text-xs\">{metadata.notes}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","import { constructNow } from \"./constructNow.js\";\n\nimport { formatDistance } from \"./formatDistance.js\";\n\n/**\n * The {@link formatDistanceToNow} function options.\n */\n\n/**\n * @name formatDistanceToNow\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n * @pure false\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @param date - The given date\n * @param options - The object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * const result = formatDistanceToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * const result = formatDistanceToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * const result = formatDistanceToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * const eoLocale = require('date-fns/locale/eo')\n * const result = formatDistanceToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nexport function formatDistanceToNow(date, options) {\n  return formatDistance(date, constructNow(date), options);\n}\n\n// Fallback for modularized imports:\nexport default formatDistanceToNow;\n","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { compareAsc } from \"./compareAsc.js\";\nimport { minutesInDay, minutesInMonth } from \"./constants.js\";\nimport { differenceInMonths } from \"./differenceInMonths.js\";\nimport { differenceInSeconds } from \"./differenceInSeconds.js\";\n\n/**\n * The {@link formatDistance} function options.\n */\n\n/**\n * @name formatDistance\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @param laterDate - The date\n * @param earlierDate - The date to compare with\n * @param options - An object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `baseDate` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistance(new Date(2014, 6, 2), new Date(2015, 0, 1))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * const result = formatDistance(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   { includeSeconds: true }\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistance(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistance(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> 'pli ol 1 jaro'\n */\nexport function formatDistance(laterDate, earlierDate, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const minutesInAlmostTwoDays = 2520;\n\n  const comparison = compareAsc(laterDate, earlierDate);\n\n  if (isNaN(comparison)) throw new RangeError(\"Invalid time value\");\n\n  const localizeOptions = Object.assign({}, options, {\n    addSuffix: options?.addSuffix,\n    comparison: comparison,\n  });\n\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    ...(comparison > 0 ? [earlierDate, laterDate] : [laterDate, earlierDate]),\n  );\n\n  const seconds = differenceInSeconds(earlierDate_, laterDate_);\n  const offsetInSeconds =\n    (getTimezoneOffsetInMilliseconds(earlierDate_) -\n      getTimezoneOffsetInMilliseconds(laterDate_)) /\n    1000;\n  const minutes = Math.round((seconds - offsetInSeconds) / 60);\n  let months;\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options?.includeSeconds) {\n      if (seconds < 5) {\n        return locale.formatDistance(\"lessThanXSeconds\", 5, localizeOptions);\n      } else if (seconds < 10) {\n        return locale.formatDistance(\"lessThanXSeconds\", 10, localizeOptions);\n      } else if (seconds < 20) {\n        return locale.formatDistance(\"lessThanXSeconds\", 20, localizeOptions);\n      } else if (seconds < 40) {\n        return locale.formatDistance(\"halfAMinute\", 0, localizeOptions);\n      } else if (seconds < 60) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", 1, localizeOptions);\n      }\n    } else {\n      if (minutes === 0) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n      }\n    }\n\n    // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n\n    // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return locale.formatDistance(\"aboutXHours\", 1, localizeOptions);\n\n    // 1.5 hrs up to 24 hrs\n  } else if (minutes < minutesInDay) {\n    const hours = Math.round(minutes / 60);\n    return locale.formatDistance(\"aboutXHours\", hours, localizeOptions);\n\n    // 1 day up to 1.75 days\n  } else if (minutes < minutesInAlmostTwoDays) {\n    return locale.formatDistance(\"xDays\", 1, localizeOptions);\n\n    // 1.75 days up to 30 days\n  } else if (minutes < minutesInMonth) {\n    const days = Math.round(minutes / minutesInDay);\n    return locale.formatDistance(\"xDays\", days, localizeOptions);\n\n    // 1 month up to 2 months\n  } else if (minutes < minutesInMonth * 2) {\n    months = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"aboutXMonths\", months, localizeOptions);\n  }\n\n  months = differenceInMonths(earlierDate_, laterDate_);\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    const nearestMonth = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"xMonths\", nearestMonth, localizeOptions);\n\n    // 1 year up to max Date\n  } else {\n    const monthsSinceStartOfYear = months % 12;\n    const years = Math.trunc(months / 12);\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return locale.formatDistance(\"aboutXYears\", years, localizeOptions);\n\n      // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return locale.formatDistance(\"overXYears\", years, localizeOptions);\n\n      // N years 9 months up to N year 12 months\n    } else {\n      return locale.formatDistance(\"almostXYears\", years + 1, localizeOptions);\n    }\n  }\n}\n\n// Fallback for modularized imports:\nexport default formatDistance;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @param dateLeft - The first date to compare\n * @param dateRight - The second date to compare\n *\n * @returns The result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nexport function compareAsc(dateLeft, dateRight) {\n  const diff = +toDate(dateLeft) - +toDate(dateRight);\n\n  if (diff < 0) return -1;\n  else if (diff > 0) return 1;\n\n  // Return 0 if diff is 0; return NaN if diff is NaN\n  return diff;\n}\n\n// Fallback for modularized imports:\nexport default compareAsc;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { compareAsc } from \"./compareAsc.js\";\nimport { differenceInCalendarMonths } from \"./differenceInCalendarMonths.js\";\nimport { isLastDayOfMonth } from \"./isLastDayOfMonth.js\";\n\n/**\n * The {@link differenceInMonths} function options.\n */\n\n/**\n * @name differenceInMonths\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInMonths(new Date(2014, 8, 1), new Date(2014, 0, 31))\n * //=> 7\n */\nexport function differenceInMonths(laterDate, earlierDate, options) {\n  const [laterDate_, workingLaterDate, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    laterDate,\n    earlierDate,\n  );\n\n  const sign = compareAsc(workingLaterDate, earlierDate_);\n  const difference = Math.abs(\n    differenceInCalendarMonths(workingLaterDate, earlierDate_),\n  );\n\n  if (difference < 1) return 0;\n\n  if (workingLaterDate.getMonth() === 1 && workingLaterDate.getDate() > 27)\n    workingLaterDate.setDate(30);\n\n  workingLaterDate.setMonth(workingLaterDate.getMonth() - sign * difference);\n\n  let isLastMonthNotFull = compareAsc(workingLaterDate, earlierDate_) === -sign;\n\n  if (\n    isLastDayOfMonth(laterDate_) &&\n    difference === 1 &&\n    compareAsc(laterDate_, earlierDate_) === 1\n  ) {\n    isLastMonthNotFull = false;\n  }\n\n  const result = sign * (difference - +isLastMonthNotFull);\n  return result === 0 ? 0 : result;\n}\n\n// Fallback for modularized imports:\nexport default differenceInMonths;\n","import { endOfDay } from \"./endOfDay.js\";\nimport { endOfMonth } from \"./endOfMonth.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isLastDayOfMonth\n * @category Month Helpers\n * @summary Is the given date the last day of a month?\n *\n * @description\n * Is the given date the last day of a month?\n *\n * @param date - The date to check\n * @param options - An object with options\n *\n * @returns The date is the last day of a month\n *\n * @example\n * // Is 28 February 2014 the last day of a month?\n * const result = isLastDayOfMonth(new Date(2014, 1, 28))\n * //=> true\n */\nexport function isLastDayOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  return +endOfDay(_date, options) === +endOfMonth(_date, options);\n}\n\n// Fallback for modularized imports:\nexport default isLastDayOfMonth;\n","export function getRoundingMethod(method) {\n  return (number) => {\n    const round = method ? Math[method] : Math.trunc;\n    const result = round(number);\n    // Prevent negative zero\n    return result === 0 ? 0 : result;\n  };\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name differenceInMilliseconds\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n *\n * @returns The number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * const result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nexport function differenceInMilliseconds(laterDate, earlierDate) {\n  return +toDate(laterDate) - +toDate(earlierDate);\n}\n\n// Fallback for modularized imports:\nexport default differenceInMilliseconds;\n","import { getRoundingMethod } from \"./_lib/getRoundingMethod.js\";\nimport { differenceInMilliseconds } from \"./differenceInMilliseconds.js\";\n\n/**\n * The {@link differenceInSeconds} function options.\n */\n\n/**\n * @name differenceInSeconds\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options.\n *\n * @returns The number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * const result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nexport function differenceInSeconds(laterDate, earlierDate, options) {\n  const diff = differenceInMilliseconds(laterDate, earlierDate) / 1000;\n  return getRoundingMethod(options?.roundingMethod)(diff);\n}\n\n// Fallback for modularized imports:\nexport default differenceInSeconds;\n","import React, { useMemo } from 'react';\r\nimport { HistoryItem } from './HistoryItem';\r\nimport { ActivityHistoryItem } from '@/hooks/useActivityHistory';\r\n\r\ninterface HistoryListProps {\r\n  activities: ActivityHistoryItem[];\r\n}\r\n\r\ninterface GroupedActivity {\r\n  key: string;\r\n  activities: ActivityHistoryItem[];\r\n  latestActivity: ActivityHistoryItem;\r\n  isGrouped: boolean;\r\n}\r\n\r\nexport const HistoryList: React.FC<HistoryListProps> = ({ activities }) => {\r\n  // Group activities by entity_id for SALES module\r\n  const groupedActivities = useMemo(() => {\r\n    const salesGroups = new Map<string, ActivityHistoryItem[]>();\r\n    const nonSalesActivities: ActivityHistoryItem[] = [];\r\n\r\n    // Separate sales from other activities\r\n    activities.forEach(activity => {\r\n      if (activity.module === 'SALES' && activity.entity_id) {\r\n        if (!salesGroups.has(activity.entity_id)) {\r\n          salesGroups.set(activity.entity_id, []);\r\n        }\r\n        salesGroups.get(activity.entity_id)!.push(activity);\r\n      } else {\r\n        nonSalesActivities.push(activity);\r\n      }\r\n    });\r\n\r\n    const grouped: GroupedActivity[] = [];\r\n\r\n    // Convert sales groups to grouped format\r\n    salesGroups.forEach((groupActivities, entityId) => {\r\n      // Sort activities within group by date (newest first)\r\n      const sortedActivities = groupActivities.sort((a, b) =>\r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      );\r\n\r\n      grouped.push({\r\n        key: `sale-${entityId}`,\r\n        activities: sortedActivities,\r\n        latestActivity: sortedActivities[0],\r\n        isGrouped: sortedActivities.length > 1\r\n      });\r\n    });\r\n\r\n    // Add non-sales as individual groups\r\n    nonSalesActivities.forEach(activity => {\r\n      grouped.push({\r\n        key: activity.id,\r\n        activities: [activity],\r\n        latestActivity: activity,\r\n        isGrouped: false\r\n      });\r\n    });\r\n\r\n    // Sort all groups by latest activity date\r\n    return grouped.sort((a, b) =>\r\n      new Date(b.latestActivity.created_at).getTime() -\r\n      new Date(a.latestActivity.created_at).getTime()\r\n    );\r\n  }, [activities]);\r\n\r\n  if (groupedActivities.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-muted-foreground\">No activities found for the selected filters.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3 md:space-y-4\">\r\n      {groupedActivities.map((group) => (\r\n        <HistoryItem\r\n          key={group.key}\r\n          activities={group.activities}\r\n          isGrouped={group.isGrouped}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"0DAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCAA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCHA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCJA,EAAA,EAAA,CAAA,CAAA,QCAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCHA,EAAA,EAAA,CAAA,CAAA,QAkCO,SAAS,EAAW,CAAQ,CAAE,CAAS,EAC5C,IAAM,EAAQ,AAAD,CAAC,EAAA,EAAA,MAAM,AAAN,EAAO,GAAa,CAAA,EAAA,EAAA,IAAD,EAAC,AAAM,EAAC,UAEzC,AAAI,EAAO,EAAU,CAAP,AAAQ,EACb,EAAO,EAAU,CAAP,CAGZ,CACT,CDrCA,IAAA,EAAA,EAAA,CAAA,CAAA,QEHA,EAAA,EAAA,CAAA,CAAA,QCFA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QJwFO,SAAS,EAAoB,CAAI,CAAE,CAAO,EAC/C,OCCK,ADDE,SCCO,AAAe,CAAS,CAAE,CAAW,CAAE,CAAO,QAC5D,IAwBI,EAxBE,EAAiB,CAAA,EAAA,EAAA,iBAAA,AAAiB,IAClC,EAAS,GAAS,QAAU,EAAe,MAAM,EAAI,EAAA,aAAa,CAGlE,EAAa,EAAW,EAAW,GAEzC,GAAI,MAAM,GAAa,MAAM,AAAI,WAAW,sBAE5C,IAAM,EAAkB,OAAO,MAAM,CAAC,CAAC,EAAG,EAAS,CACjD,UAAW,GAAS,UACpB,WAAY,CACd,GAEM,CAAC,EAAY,EAAa,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,EAC/C,GAAS,MACL,EAAa,EAAI,CAAC,EAAa,EAAU,CAAG,CAAC,EAAW,EAAY,EAGpE,EM9EC,CFhCyB,MAAM,CJ8GtB,AM9ES,EF/BlB,AAAC,IAEN,GE6BgC,CF7B1B,EAAS,CADD,EAAS,IAAI,CAAC,EAAO,CAAG,EE8BU,GF9BL,KAAA,AAAK,EAC3B,GAErB,OAAkB,IAAX,EAAe,EAAI,CAC5B,ICmBQ,AAAD,CAAC,EAAA,EAAA,MAAA,AAAM,EAAC,ALqFqB,GKrFP,CAAA,EAAA,EAAA,KAAD,CAAC,AAAM,ELqFe,AKrFd,EAAA,ECM4B,KNoF1D,EAAU,KAAK,KAAK,CAAC,CAAC,EAH1B,CAAC,CAAA,EAAA,EAAA,EAGmC,6BAHnC,AAA+B,EAAC,GAC/B,CAAA,EAAA,EAAA,+BAAA,AAA+B,EAAC,EAAA,CAAW,CAC7C,GACoC,CAAe,CAAI,IAIzD,GAAI,EAAU,EACZ,CADe,EACX,GAAS,eACX,CAD2B,EACvB,EAAU,EACZ,CADe,MACR,EAAO,cAAc,CAAC,mBAAoB,EAAG,QAC/C,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,mBAAoB,GAAI,QAChD,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,mBAAoB,GAAI,QAChD,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,cAAe,EAAG,QAC1C,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,mBAAoB,EAAG,QAEpD,OAAO,EAAO,cAAc,CAAC,WAAY,EAAG,QAG9C,GAAI,AAAY,GAAG,GACjB,OAAO,EAAO,cAAc,CAAC,mBAAoB,EAAG,QAEpD,OAAO,EAAO,cAAc,CAAC,WAAY,EAAS,GAKjD,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,WAAY,EAAS,GAG7C,GAAI,EAAU,GACnB,CADuB,MAChB,EAAO,cAAc,CAAC,cAAe,EAAG,GAG1C,GAAI,EAAU,EAAA,YAAY,CAAE,CACjC,IAAM,EAAQ,KAAK,KAAK,CAAC,EAAU,IACnC,OAAO,EAAO,cAAc,CAAC,cAAe,EAAO,EAGrD,CAAO,GAAI,EA9DoB,KA+D7B,GADmB,IACZ,EAAO,cAAc,CAAC,GADc,KACL,EAAG,QAGpC,GAAI,EAAU,EAAA,cAAc,CAAE,CACnC,IAAM,EAAO,KAAK,KAAK,CAAC,EAAU,EAAA,YAAY,EAC9C,OAAO,EAAO,cAAc,CAAC,QAAS,EAAM,EAG9C,MAAO,GAAI,EAA2B,EAAjB,CAAoB,CAApB,cAAc,CAEjC,OADA,EAAS,KAAK,KAAK,CAAC,EAAU,EAAA,cAAc,EACrC,EAAO,cAAc,CAAC,eAAgB,EAAQ,GAMvD,GAAI,CAHJ,EEjJK,AFiJI,SEjJwB,AAAnB,CAA4B,CAAE,CAAW,CAAE,CAAO,EAChE,MAAM,CAAC,EAAY,EAAkB,EAAa,CAAG,CAAA,EAAA,EAAA,cAAc,AAAd,OACnD,EACA,EACA,EACA,GAGI,AANK,EAME,EAAW,EAAkB,GACpC,EAAa,KAAK,GAAG,CACzB,CAAA,EAAA,EAAA,0BAAA,AAA0B,EAAC,EAAkB,IAG/C,GAAI,EAAa,EAAG,OAAO,EAES,IAAhC,EAAiB,QAAQ,IAAY,EAAiB,OAAO,GAAK,IACpE,EAAiB,OAAO,CAAC,IAE3B,EAAiB,QAAQ,CAAC,EAAiB,QAAQ,GAAK,EAAO,GAE/D,IAAI,EAAqB,EAAW,EAAkB,KAAkB,CAAC,CAGvE,CCzBI,EAAQ,CAAA,EAAA,EAAA,MAAA,AAAM,EDyBD,ACzBE,OAAM,GACpB,CAAC,CAAA,EAAA,EAAA,AAD4B,QAC5B,AAAQ,EAAC,OAAO,IAAa,CAAC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAFZ,KAEmB,EAFZ,ED2B3B,IAAf,GACyC,GACzC,CADA,EAAW,EAAY,KAEvB,GAAqB,CAAA,EAGvB,IAAM,EAAS,GAAQ,EAAc,CAAA,CAAf,AAAiC,CACvD,OAAkB,CADkB,GAC7B,EAAe,EAAI,CAC5B,EFiH8B,EAAc,EAAA,EAG7B,GAAI,CACf,IAAM,EAAe,KAAK,KAAK,CAAC,EAAU,EAAA,cAAc,EACxD,OAAO,EAAO,cAAc,CAAC,UAAW,EAAc,EAGxD,CAAO,CACL,IAAM,EAAyB,EAAS,GAClC,EAAQ,KAAK,KAAK,CAAC,EAAS,WAG9B,AAAJ,EAA6B,EACpB,CADuB,CAChB,cAAc,CAAC,cAAe,EAAO,GAG1C,EAAyB,EAC3B,CAD8B,CACvB,cAAc,CAAC,aAAc,EAAO,GAI3C,EAAO,cAAc,CAAC,eAAgB,EAAQ,EAAG,EAE5D,CACF,EDzGwB,EAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,GAAO,EAClD,CD1EA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAwCA,IAAM,EAAqB,AAAC,IAC1B,OAAQ,GACN,IAAK,SACH,MAAO,SACT,KAAK,SAIL,QAHE,MAAO,WACT,KAAK,SACH,MAAO,aAGX,CACF,EAqBa,EAA0C,CAAC,YAAE,CAAU,WAAE,CAAS,CAAE,SAAU,CAAc,CAAE,IAEzG,IAAM,EAAe,IAAe,EAAiB,CAAC,EAAe,CAAG,EAAA,AAAE,EAAvC,AACnC,GAA4B,IAAxB,EAAa,MAAM,CAAQ,OAAO,KAEtC,IAAM,EAAiB,CAAY,CAAC,EAAE,CAEtC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,0DACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,oCAAoC,EAAE,CA/B1C,AAAC,IACtB,OAAQ,GACN,IAAK,QACH,MAAO,6CACT,KAAK,YACH,MAAO,0CACT,KAAK,WACH,MAAO,uCACT,KAAK,UACH,MAAO,gDACT,KAAK,YACH,MAAO,gDACT,KAAK,QACH,MAAO,gDACT,SACE,MAAO,0CACX,EACF,EAcgF,EAAe,MAAM,EAAA,CAAG,UAC3F,CA7ES,AAAC,IACrB,OAAQ,GACN,IAAK,QACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,WACjC,KAAK,YAUL,QATE,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,WAC5B,KAAK,WACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,WAC5B,KAAK,UACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,WAC/B,KAAK,YACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,WAC1B,KAAK,QACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,WAGlC,EACF,EA4D2B,EAAe,MAAM,IAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iEACb,EAAe,WAAW,GAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFACZ,EAAoB,IAAI,KAAK,EAAe,UAAU,EAAG,CAAE,WAAW,CAAK,QAKhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAmB,EAAe,aAAa,EAAU,UAAU,0BAChF,CA3EQ,AAAD,IACtB,OAAQ,GACN,IAAK,SACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,WACzB,KAAK,SAIL,QAHE,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,WACzB,KAAK,SACH,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,WAG7B,EACF,EAgEiC,EAAe,aAAa,EAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAoB,EAAe,aAAa,GAChE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAa,EAAe,aAAa,CAAC,MAAM,CAAC,QAEnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAChC,EAAe,MAAM,GAEvB,EAAe,YAAY,EAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,qCAClC,EAAe,YAAY,GAG/B,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,gCACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iBAChB,EAAa,MAAM,CAAC,iBAM3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8DACV,EAAe,WAAW,GAI5B,EAAe,QAAQ,EAAI,OAAO,IAAI,CAAC,EAAe,QAAQ,EAAE,MAAM,CAAG,GACxE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,iCACjB,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,2EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kEAAyD,MAAQ,mBAEnF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACc,UAA1B,EAAe,MAAM,EAAgB,EAAe,QAAQ,CAAC,KAAK,CACjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAgB,SAAU,EAAe,QAAQ,GAElD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEACZ,KAAK,SAAS,CAAC,EAAe,QAAQ,CAAE,KAAM,YAS1D,GAAa,EAAa,MAAM,CAAG,GAClC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,iCACjB,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,0FACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kEAAyD,MAAQ,uBAAqB,EAAa,MAAM,CAAC,eAE5H,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACZ,EAAa,GAAG,CAAC,CAAC,EAAM,IACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,oEAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,6DAA6D,EAAY,IAAV,EAAc,4BAA8B,wCAAA,CACxH,GAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAmB,EAAK,aAAa,EAAU,UAAU,kCACtE,EAAK,aAAa,GAErB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCACb,EAAoB,IAAI,KAAK,EAAK,UAAU,EAAG,CAAE,WAAW,CAAK,KAEnE,EAAK,YAAY,EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0CAAgC,MAC1C,EAAK,YAAY,OAI3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,WAAW,QApBb,EAAK,EAAE,gBAiC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFACZ,EAAoB,IAAI,KAAK,EAAe,UAAU,EAAG,CAAE,UAAW,EAAK,SAKtF,EAGM,EAA+C,CAAC,UAAE,CAAQ,CAAE,IAChE,GAAM,qBAAE,CAAmB,eAAE,CAAa,oBAAE,CAAkB,CAAE,CAAG,CAAA,EAAA,EAAA,sBAAA,AAAsB,IACnF,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,mBAAA,AAAmB,IAClC,EAAW,GAAU,UAAY,MAEvC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,cAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA+B,EAAS,aAAa,MAEpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,iBAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACV,GAAsB,EAAsB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAS,WAAW,EAAI,GAAA,CAAI,CAAG,WAG5G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,mBAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAS,aAAa,MAEhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,WAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBACV,EAAgB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAY,AAAZ,EAAa,EAAS,MAAM,EAAI,GAAA,CAAI,CAAG,cAM5E,EAAS,mBAAmB,EAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+CAAsC,0BACtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,qDAIhD,EAAS,kBAAkB,EAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4CAAmC,gCACnD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,oDAKhD,CAAC,EAAS,eAAe,EAAI,EAAS,eAAA,AAAe,GACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,qBAC3D,EAAS,eAAe,EACvB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oBAAU,YAAU,EAAS,eAAe,IAE1D,EAAS,eAAe,EACvB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oBAAU,YAAU,EAAS,eAAe,OAK9D,EAAS,KAAK,EAAI,EAAS,KAAK,CAAC,MAAM,CAAG,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sDAA4C,UAAQ,EAAS,KAAK,CAAC,MAAM,CAAC,OAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDACZ,EAAS,KAAK,CAAC,GAAG,CAAC,CAAC,EAAW,IAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,4CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2CAAmC,EAAK,WAAW,GAChE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CAAgC,QACrC,EAAK,QAAQ,CAAC,MAAI,EAAsB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAY,AAAZ,EAAa,EAAK,KAAK,EAAI,GAAA,CAAI,CAAG,SAEjG,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,gCAAsB,KAC9B,EAAsB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,KAAK,EAAI,GAAA,CAAI,CAAG,YAG7E,EAAK,kBAAkB,CAAG,GACzB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oCAA0B,aAC1B,EAAK,kBAAkB,CAAC,MAAI,EAAsB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAY,AAAZ,EAAa,EAAK,cAAc,EAAI,GAAA,CAAI,CAAG,MAAM,WAb3H,cAwBO,IAAxB,EAAS,UAAU,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,iBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BACb,GAAsB,EAAsB,CAAA,EAAG,EAAS,CAAC,EAAE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAS,UAAU,EAAI,GAAA,CAAI,CAAG,WAG1G,EAAS,OAAO,CAAG,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,cACxC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iBAAQ,EAAS,OAAO,CAAC,eAQlD,EAAS,KAAK,EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,UAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAS,KAAK,QAKhD,ES9Ta,EAA0C,CAAC,YAAE,CAAU,CAAE,IAEpE,IAAM,EAAoB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAChC,IAAM,EAAc,IAAI,IAClB,EAA4C,EAAE,CAGpD,EAAW,OAAO,CAAC,IACb,AAAoB,YAAX,MAAM,EAAgB,EAAS,SAAS,EAAE,AACjD,AAAC,EAAY,GAAG,CAAC,EAAS,SAAS,GAAG,AACxC,EAAY,GAAG,CAAC,EAAS,SAAS,CAAE,EAAE,EAExC,EAAY,GAAG,CAAC,EAAS,SAAS,EAAG,IAAI,CAAC,IAE1C,EAAmB,IAAI,CAAC,EAE5B,GAEA,IAAM,EAA6B,EAAE,CA4BrC,OAzBA,EAAY,OAAO,CAAC,CAAC,EAAiB,KAEpC,IAAM,EAAmB,EAAgB,IAAI,CAAC,CAAC,EAAG,IAChD,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAGnE,EAAQ,IAAI,CAAC,CACX,IAAK,CAAC,KAAK,EAAE,EAAA,CAAU,CACvB,WAAY,EACZ,eAAgB,CAAgB,CAAC,EAAE,CACnC,UAAW,EAAiB,MAAM,CAAG,CACvC,EACF,GAGA,EAAmB,OAAO,CAAC,IACzB,EAAQ,IAAI,CAAC,CACX,IAAK,EAAS,EAAE,CAChB,WAAY,CAAC,EAAS,CACtB,eAAgB,EAChB,WAAW,CACb,EACF,GAGO,EAAQ,IAAI,CAAC,CAAC,EAAG,IACtB,IAAI,KAAK,EAAE,cAAc,CAAC,UAAU,EAAE,OAAO,GAC7C,IAAI,KAAK,EAAE,cAAc,CAAC,UAAU,EAAE,OAAO,GAEjD,EAAG,CAAC,EAAW,SAEf,AAAI,AAA6B,GAAG,GAAd,MAAM,CAExB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,oDAMzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACZ,EAAkB,GAAG,CAAC,AAAC,GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,WAAY,EAAM,UAAU,CAC5B,UAAW,EAAM,SAAS,EAFrB,EAAM,GAAG,IAOxB,EXjFA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,yBAYoB,KAChB,GAAM,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,CACpD,aAAc,MACd,OAAQ,MACR,OAAQ,GACR,UAAW,CACP,UAAM,EACN,QAAI,CACR,CACJ,GAEM,YAAE,CAAU,WAAE,CAAS,YAAE,CAAU,CAAE,aAAW,gBAAE,CAAc,CAAE,CAAG,CCb7C,CAAC,EAAqB,KACtD,GAAM,QAAE,CAAM,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IAC3B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAwB,EAAE,EAChE,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACvC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACvC,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAE5B,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAClC,GAAI,CAAC,GAAU,CAAC,EACd,MAAO,CAAE,GADiB,QACL,EAAE,CAAE,MAAO,CAAE,EAGpC,GAAI,CACF,IAAM,EAAiC,EAAU,CAC/C,aAAc,EAAQ,YAAY,CAClC,OAAQ,EAAQ,MAAM,CACtB,OAAQ,EAAQ,MAAM,CACtB,SAAU,EAAQ,SAAS,CAAC,IAAI,EAAE,cAClC,OAAQ,EAAQ,SAAS,CAAC,EAAE,EAAE,aAChC,EAAI,CAAC,EAEC,EAAS,MAAM,CAAA,EAAA,EAAA,wBAAA,AAAwB,EAC3C,EACA,EACA,KAEA,GAGF,GAAI,CAAC,CAJH,CAIU,OAAO,EAAI,CAAC,EAAO,IAAI,CACjC,CADmC,KAC7B,AAAI,MAAM,EAAO,KAAK,EAAI,8BAGlC,MAAO,CACL,WAAY,EAAO,IAAI,CAAC,UAAU,CAClC,MAAO,EAAO,IAAI,CAAC,KAAK,AAC1B,CACF,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,mCAAoC,GAC3C,CAAE,WAAY,EAAE,CAAE,MAAO,CAAE,CACpC,CACF,EAAG,CAAC,EAAQ,EAAY,EAAa,EAAQ,EAGvC,EAAW,CAAC,mBAAoB,EAAQ,EAAY,EAAa,EAAQ,CACzE,CAAE,KAAM,CAAW,CAAE,UAAW,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UAChE,EACA,QAAS,EACT,QAAS,CAAC,CAAC,GAAU,CAAC,CAAC,EACvB,UAAW,IAAI,AACf,OAAQ,KAAK,AACb,sBAAsB,EACtB,oBAAoB,CACtB,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,IACF,EAAc,EAAY,KADX,KACqB,EACpC,EAAc,EAAY,KAAK,EAC/B,EAAc,KAAK,IAAI,CAAC,EAAY,KAAK,CA9DxB,EA8D2B,GAEhD,EAAG,CAAC,EAAY,EAGhB,IAAM,EAAY,GAAkB,CAAC,QAErC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAe,EACjB,EAAG,AADkB,CACjB,EAAQ,EAQZ,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,GAAU,CAAC,EAAY,MAI9B,AAd+D,EAc5D,CAAC,EAAQ,EAAY,EAAa,EAAQ,EAEtC,YACL,YACA,aACA,cACA,aACA,iBACA,EACA,QApBwB,CAoBf,IAnBT,EAAY,iBAAiB,CAAC,UAAE,CAAS,EAC3C,CAmBA,EACF,ED/EQ,GAAiB,GACjB,GAeE,EAA4C,QAAzB,EAAQ,YAAY,EACtB,QAAnB,EAAQ,MAAM,EACK,KAAnB,EAAQ,MAAM,EACd,KAA2B,MAAnB,SAAS,CAAC,IAAI,CAE1B,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,oBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4DAMlD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,gBAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,wDACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,aAGjC,GACG,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QApCrC,CAoC8C,IAnC/D,EAAW,CACP,aAAc,MACd,OAAQ,MACR,OAAQ,GACR,UAAW,CACP,UAAM,EACN,QAAI,CACR,CACJ,EACJ,EA0BiF,UAAU,iEAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAAiB,wBAM9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,4DAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACF,YAAY,uBACZ,UAAU,OACV,MAAO,EAAQ,MAAM,CACrB,SAAU,AAAC,GAAM,EAAW,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,OAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,OAKhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACH,MAAO,EAAQ,MAAM,CACrB,cAAe,AAAC,GAAe,EAAW,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,OAAQ,EAAM,CAAC,YAE7E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,kBAE7B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,gBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,iBAAQ,UAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,qBAAY,cAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,oBAAW,aAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,qBAAY,cAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,mBAAU,YAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,iBAAQ,gBAKlC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACH,MAAO,EAAQ,YAAY,CAC3B,cAAe,AAAC,GAAe,EAAW,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,aAAc,EAAM,CAAC,YAEnF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,kBAE7B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,gBACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,kBAAS,YAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,kBAAS,YAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,kBAAS,kBAKnC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAO,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,OAAO,CAAA,CAAA,WACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACH,QAAS,UACT,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACT,sCACA,CAAC,EAAQ,SAAS,CAAC,IAAI,EAAI,mCAG/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAY,CAAA,CAAC,UAAU,iBACvB,EAAQ,SAAS,CAAC,IAAI,CACnB,EAAQ,SAAS,CAAC,EAAE,CAChB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACK,CAAA,EAAA,EAAA,MAAM,AAAN,EAAO,EAAQ,SAAS,CAAC,IAAI,CAAE,aAAa,KAAG,IAC/C,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAQ,SAAS,CAAC,EAAE,CAAE,gBAGlC,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAQ,SAAS,CAAC,IAAI,CAAE,aAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,2BAIlB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,UAAU,aAAa,MAAM,iBACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACL,YAAY,CAAA,CAAA,EACZ,KAAK,QACL,aAAc,EAAQ,SAAS,CAAC,IAAI,CACpC,SAAU,EAAQ,SAAS,CAC3B,SAAW,AAAD,GAAW,EAAW,IAAS,CACrC,EADoC,CACjC,CAAI,CACP,UAAW,CAAE,KAAM,GAAO,KAAM,GAAI,GAAO,EAAG,EAClD,CAAC,EACD,eAAgB,iBAQvC,EACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAc,CAAA,CAAC,QAAQ,kCAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,WAAY,IAGxB,EAAa,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACH,QAAQ,UACR,KAAK,KACL,QAAS,IAAM,EAAe,GAAQ,KAAK,GAAG,CAAC,EAAG,EAAO,IACzD,SAAU,AAAgB,eAC7B,aAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEAAuD,QAC5D,EAAY,OAAK,KAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACH,QAAQ,UACR,KAAK,KACL,QAAS,IAAM,EAAe,GAAQ,KAAK,GAAG,CAAC,EAAY,EAAO,IAClE,SAAU,IAAgB,WAC7B,iBAS7B","ignoreList":[3,4,5,6,7,8,9,10]}