module.exports=[170106,a=>{"use strict";var b=a.i(572131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],170106)},470121,a=>{"use strict";var b=a.i(572131);function c(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d(...a){return b=>{let d=!1,e=a.map(a=>{let e=c(a,b);return d||"function"!=typeof e||(d=!0),e});if(d)return()=>{for(let b=0;b<e.length;b++){let d=e[b];"function"==typeof d?d():c(a[b],null)}}}}function e(...a){return b.useCallback(d(...a),a)}a.s(["composeRefs",()=>d,"useComposedRefs",()=>e])},400187,a=>{"use strict";var b=a.i(298621);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}])},187924,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactJsxRuntime},918622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},342602,(a,b,c)=>{"use strict";b.exports=a.r(918622)},572131,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].React},935112,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactDOM},738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},288347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},346058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},467009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},190841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(346058)._(a.r(572131)),g=a.r(467009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},120611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(572131),e=a.r(288347),f=a.r(190841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},405050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(120611),g=a.r(1722),h=a.r(738783)},391956,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(823292),e=a.i(405050);let f=(0,e.createServerReference)("601f435e1ee906932885a36b02b1480071685e0cc2",e.callServer,void 0,e.findSourceMapURL,"signInAction"),g=(0,e.createServerReference)("4085da50dd0bf206cb5893edda258b1fb6087fb94b",e.callServer,void 0,e.findSourceMapURL,"signUpAction"),h=(0,c.createContext)(void 0);a.s(["AuthProvider",0,({children:a})=>{let[e,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0);(0,c.useEffect)(()=>{let a=localStorage.getItem("gonza_user");a&&i(JSON.parse(a)),k(!1)},[]);let l=async(a,b)=>{let c=await f(a,b);if(c.success&&c.user){let a={id:c.user.id,email:c.user.email};i(a),localStorage.setItem("gonza_user",JSON.stringify(a)),d.toast.success("Signed in successfully")}else throw Error(c.error||"Login failed")},m=async()=>{d.toast.error("Google sign-in not yet implemented with Prisma")},n=async(a,b,c)=>{let e=await g({email:a,password:b,name:c?.data?.name});return e.success&&e.user?(d.toast.success("Account created successfully. Please sign in."),{error:null,user:e.user}):{error:Error(e.error||"Sign up failed"),user:null}},o=async()=>{i(null),localStorage.removeItem("gonza_user"),d.toast.success("Successfully signed out")},p=async a=>{d.toast.success("Password reset email sent")};return(0,b.jsx)(h.Provider,{value:{user:e,loading:j,signIn:l,signInWithGoogle:m,signUp:n,signOut:o,resetPassword:p},children:a})},"useAuth",0,()=>{let a=(0,c.useContext)(h);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}],391956)},478793,a=>{"use strict";var b=a.i(572131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),i({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=(a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}},g=[],h={toasts:[]};function i(a){h=f(h,a),g.forEach(a=>{a(h)})}function j({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>i({type:"DISMISS_TOAST",toastId:b});return i({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>i({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function k(){let[a,c]=b.useState(h);return b.useEffect(()=>(g.push(c),()=>{let a=g.indexOf(c);a>-1&&g.splice(a,1)}),[a]),{...a,toast:j,dismiss:a=>i({type:"DISMISS_TOAST",toastId:a})}}a.s(["reducer",0,f,"toast",()=>j,"useToast",()=>k])},169819,474507,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(391956),e=a.i(478793),f=a.i(405050);let g=(0,f.createServerReference)("606359dfb6b88f4f4b756b5c416007efbe2fcb1fcc",f.callServer,void 0,f.findSourceMapURL,"setBusinessPasswordAction"),h=(0,f.createServerReference)("60364422a73402f3b5e59fb0aa7bbc8b9374b14ab5",f.callServer,void 0,f.findSourceMapURL,"verifyBusinessPasswordAction"),i=(0,f.createServerReference)("408ffa5a6991ba3e64aa45862bed880555b1e6c2ac",f.callServer,void 0,f.findSourceMapURL,"removeBusinessPasswordAction"),j=()=>{let[a,b]=(0,c.useState)(!1),{toast:d}=(0,e.useToast)(),f="verified_businesses",j=()=>{try{let a=sessionStorage.getItem(f);return a?new Set(JSON.parse(a)):new Set}catch{return new Set}},k=a=>{try{let b=j();b.add(a),sessionStorage.setItem(f,JSON.stringify(Array.from(b)))}catch(a){console.error("Error storing verified business:",a)}};return{isLoading:a,setBusinessPassword:async(a,c)=>{b(!0);try{let b=await g(a,c);if(b.success)return d({title:"Password Set Successfully",description:"Your business is now password protected."}),!0;return d({title:"Failed to Set Password",description:b.error||"Please try again later.",variant:"destructive"}),!1}catch(a){return console.error("Error setting business password:",a),d({title:"Failed to Set Password",description:"An unexpected error occurred.",variant:"destructive"}),!1}finally{b(!1)}},verifyBusinessPassword:async(a,c)=>{b(!0);try{let b=await h(a,c);if(b.success&&b.verified)return k(a),!0;return d({title:"Incorrect Password",description:"The password you entered is incorrect.",variant:"destructive"}),!1}catch(a){return console.error("Error verifying business password:",a),d({title:"Verification Error",description:"An unexpected error occurred.",variant:"destructive"}),!1}finally{b(!1)}},removeBusinessPassword:async a=>{b(!0);try{let b=await i(a);if(!b.success)return d({title:"Failed to Remove Password",description:b.error||"Please try again later.",variant:"destructive"}),!1;{let b=j();return b.delete(a),sessionStorage.setItem(f,JSON.stringify(Array.from(b))),!0}}catch(a){return console.error("Error removing business password:",a),d({title:"Failed to Remove Password",description:"Please try again later.",variant:"destructive"}),!1}finally{b(!1)}},isBusinessVerified:a=>j().has(a),setBusinessVerified:k,clearVerifiedBusinesses:()=>{try{sessionStorage.removeItem(f)}catch(a){console.error("Error clearing verified businesses:",a)}}}};a.s(["useBusinessPassword",0,j],474507);let k=(0,f.createServerReference)("4097618b1feff5bb1f466d7ef73901ab8f5cb1ab7d",f.callServer,void 0,f.findSourceMapURL,"getBusinessLocationsAction"),l=(0,f.createServerReference)("60d7c3d2a9fae9e08d24867d93fe36b7505e38a2e0",f.callServer,void 0,f.findSourceMapURL,"createBusinessAction"),m=(0,f.createServerReference)("70dd23d5987603253209c3c012d3079124803d1be2",f.callServer,void 0,f.findSourceMapURL,"updateBusinessAction"),n=(0,f.createServerReference)("600c0285b1a230950447aea12ad4361b35b7957acf",f.callServer,void 0,f.findSourceMapURL,"deleteBusinessAction"),o=(0,f.createServerReference)("60b753a09691b4217e6751307f35f59cee17dc35d7",f.callServer,void 0,f.findSourceMapURL,"resetBusinessAction"),p=(0,c.createContext)(void 0);a.s(["BusinessProvider",0,({children:a})=>{let{user:f}=(0,d.useAuth)(),[g,h]=(0,c.useState)(null),[i,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),{isBusinessVerified:v}=j(),w=async()=>{if(!f){s(!1),u(null),h(null),q([]);return}try{s(!0),u(null);let a=await k(f.id);if(!a)throw Error("Failed to load locations");if(q(a||[]),a&&a.length>0){let b=localStorage.getItem("currentBusinessId"),c=a.find(a=>a.id===b);c||(c=a.find(a=>a.is_default)||a[0]),c&&(h(c),localStorage.setItem("currentBusinessId",c.id))}else h(null),localStorage.removeItem("currentBusinessId")}catch(a){console.error("Error loading business locations:",a),u("Failed to load business data"),h(null),q([])}finally{s(!1)}},x=async a=>{if(!f)return console.error("No user found when creating business"),null;try{if(i.length>=3)return(0,e.toast)({title:"Limit Reached",description:"You have reached the maximum allowed limit of 3 locations. Please contact support to increase your limit.",variant:"destructive"}),null;let b=await l(f.id,a.trim());if(!b.success||!b.data)throw console.error("Error creating business:",b.error),Error(b.error||"Unknown error");let c=b.data;if(c){let a={id:c.id,name:c.name,is_default:c.is_default,created_at:c.created_at,updated_at:c.updated_at,switch_password_hash:c.switch_password_hash};return q(b=>[...b,a]),(0===i.length||a.is_default)&&(h(a),localStorage.setItem("currentBusinessId",a.id)),a}return null}catch(a){return console.error("Error creating business:",a),null}},y=async(a,b)=>{if(!f)return!1;try{let c=await m(a,f.id,b);if(!c.success)throw Error(c.error);let d=c.data;if(d){let b={id:d.id,name:d.name,is_default:d.is_default,created_at:d.created_at,updated_at:d.updated_at,switch_password_hash:d.switch_password_hash};return q(c=>c.map(c=>c.id===a?b:c)),g?.id===a&&h(b),!0}return!1}catch(a){return console.error("Error updating business:",a),!1}},z=async a=>{if(!f)return!1;try{let b=await n(a,f.id);if(!b.success)throw Error(b.error);if(q(b=>b.filter(b=>b.id!==a)),g?.id===a){let b=i.filter(b=>b.id!==a),c=b.find(a=>a.is_default)||b[0]||null;h(c),c?localStorage.setItem("currentBusinessId",c.id):localStorage.removeItem("currentBusinessId")}return!0}catch(a){return console.error("Error deleting business:",a),!1}},A=async a=>{if(!f)return console.error("No user found when resetting business"),!1;try{let b=await o(a,f.id);if(!b.success)throw Error(b.error);return await w(),!0}catch(a){return console.error("Error resetting business:",a),!1}};return(0,c.useEffect)(()=>{f?w():(h(null),q([]),s(!1),u(null),localStorage.removeItem("currentBusinessId"))},[f?.id]),(0,b.jsx)(p.Provider,{value:{currentBusiness:g,businessLocations:i,switchBusiness:(a,b)=>{let c=i.find(b=>b.id===a);if(!c)return void console.error("Business not found:",a);if(c.switch_password_hash&&!v(a))if(b)return void b(a,c.name,()=>{h(c),localStorage.setItem("currentBusinessId",c.id)});else return void console.warn("Password required but no prompt handler provided");h(c),localStorage.setItem("currentBusinessId",c.id)},loadBusinessLocations:w,createBusiness:x,updateBusiness:y,deleteBusiness:z,resetBusiness:A,isLoading:r,error:t,locationLimit:3},children:a})},"useBusiness",0,()=>{let a=(0,c.useContext)(p);if(void 0===a)throw Error("useBusiness must be used within a BusinessProvider");return a}],169819)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a34233d5._.js.map