module.exports=[299707,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(500885),f=a.i(964889),g=a.i(531811),h=a.i(709766),i=b([e,f,g,h]);[e,f,g,h]=i.then?(await i)():i;let j="businessOnboarding";a.s(["useOnboarding",0,()=>{let{currentBusiness:a}=(0,f.useBusiness)(),{user:b}=(0,g.useAuth)(),c=(0,e.useQueryClient)(),{data:i,isLoading:k,refetch:l}=(0,e.useQuery)({queryKey:[j,a?.id],queryFn:async()=>a?.id&&b?.id?await (0,h.getOnboardingStatusAction)(a.id):null,enabled:!!a?.id&&!!b?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1}),{data:m,isLoading:n,refetch:o}=(0,e.useQuery)({queryKey:["globalAccountStatus",b?.id],queryFn:async()=>b?.id?await (0,h.getAccountStatusAction)(b.id):null,enabled:!!b?.id,staleTime:1e4,refetchInterval:3e4}),p=i?.completed===!0,q=i?.is_frozen===!0||m?.is_frozen===!0,r=(0,d.useCallback)(()=>{l(),o()},[l,o]),s=(0,d.useCallback)(async d=>{if(!a?.id||!b?.id)return console.error("useOnboarding: No business or user found"),!1;try{let e=await (0,h.upsertBusinessSettingsAction)(a.id,b.id,d);if(!e.success)return console.error("Error saving onboarding data:",e.error),!1;return c.invalidateQueries({queryKey:[j,a.id]}),c.invalidateQueries({queryKey:["user-onboarding-complete",b.id]}),!0}catch(a){return console.error("Unexpected error saving onboarding:",a),!1}},[a?.id,b?.id,c]);return{onboarding:i,isLoading:k||n,isCompleted:p,isFrozen:q,locationLimit:m?.location_limit||1,billingAmount:m?.billing_amount||5e4,billingDuration:m?.billing_duration||"Monthly",daysRemaining:m?.days_remaining||0,nextBillingDate:m?.next_billing_date,saveOnboarding:s,refetch:r}}]),c()}catch(a){c(a)}},!1),597685,a=>{"use strict";let b=(0,a.i(564375).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);a.s(["Building2",()=>b],597685)},943431,a=>{"use strict";let b=(0,a.i(564375).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],943431)},585966,a=>{"use strict";let b=(0,a.i(564375).default)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);a.s(["Briefcase",()=>b],585966)},125487,a=>{"use strict";let b=(0,a.i(564375).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);a.s(["Sparkles",()=>b],125487)},506754,a=>{"use strict";let b=(0,a.i(564375).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],506754)},883849,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(747899),g=a.i(396465),h=a.i(112779),i=a.i(397625),j=a.i(688272),k=a.i(745695),l=a.i(169320),m=a.i(299707),n=a.i(224993),o=a.i(531811),p=a.i(597685),q=a.i(943431),r=a.i(711210),s=a.i(239890),t=a.i(585966),u=a.i(223028),v=a.i(734637),w=a.i(311988),x=a.i(357026),y=a.i(455756),z=a.i(55594),A=a.i(125487),B=a.i(506754),C=b([g,h,i,j,l,m,n,o]);[g,h,i,j,l,m,n,o]=C.then?(await C)():C;let D=[{value:"1-5",label:"1â€“5 employees"},{value:"6-20",label:"6â€“20 employees"},{value:"21-50",label:"21â€“50 employees"},{value:"50+",label:"50+ employees"}];a.s(["default",0,()=>{let a=(0,f.useNavigate)(),{user:b,signOut:c}=(0,o.useAuth)(),{onboarding:C,isLoading:E,isCompleted:F,saveOnboarding:G}=(0,m.useOnboarding)(),{settings:H,isLoading:I,updateSettings:J}=(0,n.useBusinessSettings)(),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(null),[O,P]=(0,e.useState)(null),[Q,R]=(0,e.useState)(!1),S=(0,e.useRef)(null),[T,U]=(0,e.useState)({businessName:"",businessAddress:"",businessPhone:"",businessEmail:b?.email||"",natureOfBusiness:"",businessSize:""}),[V,W]=(0,e.useState)({});(0,e.useEffect)(()=>{!E&&F&&(console.log("Onboarding: Already completed, redirecting to dashboard"),a("/",{replace:!0}))},[E,F,a]),(0,e.useEffect)(()=>{!I&&H&&(U(a=>({...a,businessName:H.businessName||a.businessName,businessAddress:H.businessAddress||a.businessAddress,businessPhone:H.businessPhone||a.businessPhone,businessEmail:H.businessEmail||a.businessEmail})),H.businessLogo&&N(H.businessLogo))},[I,H]);let X=(0,e.useCallback)(a=>{if(!a.type.startsWith("image/"))return void l.toast.error("Please upload an image file");if(a.size>5242880)return void l.toast.error("Image must be smaller than 5MB");P(a);let b=new FileReader;b.onloadend=()=>N(b.result),b.readAsDataURL(a)},[]),Y=(0,e.useCallback)(a=>{a.preventDefault(),R(!1);let b=a.dataTransfer.files?.[0];b&&X(b)},[X]);if(E||I)return(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)(k.default,{message:"Loading your profile..."})});let Z=(a,b)=>{U(c=>({...c,[a]:b})),V[a]&&W(b=>({...b,[a]:""}))},$=async()=>(console.warn("Logo upload placeholder â€“ integration with Prisma server action required"),M),_=async b=>{let c;if(b.preventDefault(),c={},T.businessName.trim()||(c.businessName="Business name is required"),T.businessAddress.trim()||(c.businessAddress="Address is required"),T.businessPhone.trim()||(c.businessPhone="Phone number is required"),T.businessEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.businessEmail)||(c.businessEmail="Please enter a valid email"):c.businessEmail="Email is required",W(c),0===Object.keys(c).length){L(!0);try{let b=O?await $():M;if(!await G({business_logo:b??void 0,business_name:T.businessName.trim(),business_address:T.businessAddress.trim(),business_phone:T.businessPhone.trim(),business_email:T.businessEmail.trim(),nature_of_business:T.natureOfBusiness.trim()||void 0,business_size:T.businessSize||void 0,completed:!0}))return void l.toast.error("Failed to save onboarding data. Please try again.");await J({businessName:T.businessName.trim(),businessAddress:T.businessAddress.trim(),businessPhone:T.businessPhone.trim(),businessEmail:T.businessEmail.trim(),...b?{businessLogo:b}:{}}),l.toast.success("Business profile set up! Welcome aboard ðŸŽ‰"),a("/",{replace:!0})}catch(a){console.error("Onboarding submit error:",a),l.toast.error("Something went wrong. Please try again.")}finally{L(!1)}}};return(0,d.jsxs)("div",{className:"min-h-screen bg-background flex flex-col lg:flex-row",children:[(0,d.jsxs)("div",{className:"w-full lg:w-2/5 xl:w-1/3 flex flex-col px-6 py-8 lg:p-10 relative overflow-hidden lg:min-h-screen",style:{background:"hsl(var(--primary))"},children:[(0,d.jsx)("div",{className:"absolute -top-16 -left-16 w-56 h-56 rounded-full opacity-10 bg-white pointer-events-none"}),(0,d.jsx)("div",{className:"absolute -bottom-10 -right-10 w-48 h-48 rounded-full opacity-10 bg-white pointer-events-none"}),(0,d.jsx)("div",{className:"relative z-10",children:(0,d.jsx)("img",{src:"/lovable-uploads/798d07d7-1db7-498c-92f3-6f6346827d59.png",alt:"Gonzo Systems",className:"h-10 object-contain brightness-0 invert"})}),(0,d.jsxs)("div",{className:"relative z-10 mt-6 lg:mt-auto lg:mb-auto space-y-4",children:[(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/10 text-white/90 text-xs font-medium px-3 py-1.5 rounded-full border border-white/20",children:[(0,d.jsx)(A.Sparkles,{className:"h-3.5 w-3.5"}),"One-time setup"]}),(0,d.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-white leading-snug",children:["Let's get your",(0,d.jsx)("br",{className:"hidden sm:block"})," business ready."]}),(0,d.jsx)("p",{className:"text-white/70 text-sm leading-relaxed max-w-xs",children:"Fill in your business details to personalise your workspace. You can always update these later in Settings."}),(0,d.jsx)("ul",{className:"hidden sm:flex flex-col gap-2.5 text-sm text-white/80 pt-2",children:["Appears on receipts & invoices","Pre-fills your Settings page","Helps your team identify the business"].map(a=>(0,d.jsxs)("li",{className:"flex items-center gap-2",children:[(0,d.jsx)(x.CheckCircle2,{className:"h-4 w-4 text-white/50 shrink-0"}),a]},a))})]}),(0,d.jsxs)("p",{className:"relative z-10 hidden lg:block text-white/30 text-xs mt-auto pt-8",children:["Â© ",new Date().getFullYear()," Gonzo Systems"]})]}),(0,d.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:(0,d.jsx)("div",{className:"flex-1 flex items-start justify-center px-4 sm:px-8 py-8 lg:py-16",children:(0,d.jsxs)("div",{className:"w-full max-w-xl",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-6 font-geist",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Set up your business"}),(0,d.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"This information will appear on your receipts and reports."})]}),(0,d.jsxs)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>c(),className:"text-muted-foreground hover:text-foreground gap-2",children:[(0,d.jsx)(B.LogOut,{className:"h-4 w-4"}),"Logout"]})]}),(0,d.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{className:"text-sm font-medium",children:["Business Logo"," ",(0,d.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),M?(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-muted/30",children:[(0,d.jsx)("img",{src:M,alt:"Logo preview",className:"h-12 w-12 object-contain rounded-md border border-border bg-white shrink-0"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-medium truncate",children:O?.name||"Logo"}),O&&(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(O.size/1024).toFixed(0)," KB"]})]}),(0,d.jsx)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{N(null),P(null),S.current&&(S.current.value="")},className:"text-destructive hover:text-destructive hover:bg-destructive/10 shrink-0 h-8 w-8 p-0",children:(0,d.jsx)(v.X,{className:"h-4 w-4"})})]}):(0,d.jsxs)("div",{onDrop:Y,onDragOver:a=>{a.preventDefault(),R(!0)},onDragLeave:()=>R(!1),onClick:()=>S.current?.click(),className:`flex items-center gap-3 p-4 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${Q?"border-primary bg-primary/5":"border-border hover:border-primary/40 hover:bg-muted/20"}`,children:[(0,d.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted flex items-center justify-center shrink-0",children:(0,d.jsx)(y.Upload,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:Q?"Drop here":"Click or drag to upload"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG â€” max 5MB"})]})]}),(0,d.jsx)("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&X(b)}})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"businessName",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(p.Building2,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Business Name ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(h.Input,{id:"businessName",value:T.businessName,onChange:a=>Z("businessName",a.target.value),placeholder:"",className:V.businessName?"border-destructive":""}),V.businessName&&(0,d.jsx)("p",{className:"text-xs text-destructive",children:V.businessName})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"businessAddress",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(q.MapPin,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Location / Address ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(h.Input,{id:"businessAddress",value:T.businessAddress,onChange:a=>Z("businessAddress",a.target.value),placeholder:"",className:V.businessAddress?"border-destructive":""}),V.businessAddress&&(0,d.jsx)("p",{className:"text-xs text-destructive",children:V.businessAddress})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"businessPhone",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(r.Phone,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Phone ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(h.Input,{id:"businessPhone",type:"tel",value:T.businessPhone,onChange:a=>Z("businessPhone",a.target.value),placeholder:"",className:V.businessPhone?"border-destructive":""}),V.businessPhone&&(0,d.jsx)("p",{className:"text-xs text-destructive",children:V.businessPhone})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"businessEmail",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(s.Mail,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Email ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(h.Input,{id:"businessEmail",type:"email",value:T.businessEmail,onChange:a=>Z("businessEmail",a.target.value),placeholder:"",className:V.businessEmail?"border-destructive":""}),V.businessEmail&&(0,d.jsx)("p",{className:"text-xs text-destructive",children:V.businessEmail})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"natureOfBusiness",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(t.Briefcase,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Nature of Business ",(0,d.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),(0,d.jsx)(h.Input,{id:"natureOfBusiness",value:T.natureOfBusiness,onChange:a=>Z("natureOfBusiness",a.target.value),placeholder:""})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)(i.Label,{htmlFor:"businessSize",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,d.jsx)(u.Users,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Business Size ",(0,d.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),(0,d.jsxs)(j.Select,{value:T.businessSize,onValueChange:a=>Z("businessSize",a),children:[(0,d.jsx)(j.SelectTrigger,{id:"businessSize",children:(0,d.jsx)(j.SelectValue,{placeholder:"No. of employees"})}),(0,d.jsx)(j.SelectContent,{children:D.map(a=>(0,d.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,d.jsxs)("div",{className:"pt-2 pb-4",children:[(0,d.jsx)(g.Button,{type:"submit",disabled:K,className:"w-full h-11 font-semibold gap-2",children:K?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"})," Setting up your business..."]}):(0,d.jsxs)(d.Fragment,{children:["Complete Setup ",(0,d.jsx)(z.ArrowRight,{className:"h-4 w-4"})]})}),(0,d.jsxs)("p",{className:"text-center text-xs text-muted-foreground mt-3",children:["You can update all of this later in ",(0,d.jsx)("span",{className:"font-medium",children:"Settings"}),"."]})]})]})]})})})]})}]),c()}catch(a){c(a)}},!1),276357,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(539141),h=a.i(706555),i=a.i(883849),j=a.i(509193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Onboarding",pathname:"/Onboarding",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Onboarding",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_0a815a77._.js.map