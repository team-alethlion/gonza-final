{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/package.ts","../../../../node_modules/lucide-react/src/icons/triangle-alert.ts","../../../../src/components/ui/skeleton.tsx","../../../../node_modules/lucide-react/src/icons/eye.ts","../../../../src/components/ui/separator.tsx","../../../../src/hooks/useCategories.ts","../../../../node_modules/lucide-react/src/icons/circle-check-big.ts","../../../../node_modules/lucide-react/src/icons/save.ts","../../../../node_modules/lucide-react/src/icons/arrow-up.ts","../../../../node_modules/lucide-react/src/icons/arrow-down.ts","../../../../src/components/LoadingSpinner.tsx","../../../../node_modules/lucide-react/src/icons/trending-up.ts","../../../../src/components/ui/progress.tsx","../../../../src/utils/csvTemplate.ts","../../../../node_modules/lucide-react/src/icons/circle.ts","../../../../src/components/ui/dropdown-menu.tsx","../../../../src/app/actions/inventory.ts","../../../../src/hooks/useStockSummaryData.ts","../../../../node_modules/lucide-react/src/icons/trending-down.ts","../../../../src/components/inventory/InventoryPageSkeleton.tsx","../../../../src/hooks/useStockHistory.ts","../../../../src/components/ui/tooltip.tsx","../../../../node_modules/lucide-react/src/icons/image.ts","../../../../src/components/inventory/ProductImage.tsx","../../../../src/utils/searchUtils.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Package\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgMjEuNzNhMiAyIDAgMCAwIDIgMGw3LTRBMiAyIDAgMCAwIDIxIDE2VjhhMiAyIDAgMCAwLTEtMS43M2wtNy00YTIgMiAwIDAgMC0yIDBsLTcgNEEyIDIgMCAwIDAgMyA4djhhMiAyIDAgMCAwIDEgMS43M3oiIC8+CiAgPHBhdGggZD0iTTEyIDIyVjEyIiAvPgogIDxwYXRoIGQ9Im0zLjMgNyA3LjcwMyA0LjczNGEyIDIgMCAwIDAgMS45OTQgMEwyMC43IDciIC8+CiAgPHBhdGggZD0ibTcuNSA0LjI3IDkgNS4xNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/package\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Package = createLucideIcon('Package', [\n  [\n    'path',\n    {\n      d: 'M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z',\n      key: '1a0edw',\n    },\n  ],\n  ['path', { d: 'M12 22V12', key: 'd0xqtd' }],\n  ['path', { d: 'm3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7', key: 'yx3hmr' }],\n  ['path', { d: 'm7.5 4.27 9 5.15', key: '1c824w' }],\n]);\n\nexport default Package;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TriangleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTMiIC8+CiAgPHBhdGggZD0iTTEyIDl2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTdoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/triangle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TriangleAlert = createLucideIcon('TriangleAlert', [\n  [\n    'path',\n    {\n      d: 'm21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3',\n      key: 'wmoenq',\n    },\n  ],\n  ['path', { d: 'M12 9v4', key: 'juzpu7' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n]);\n\nexport default TriangleAlert;\n","import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi4wNjIgMTIuMzQ4YTEgMSAwIDAgMSAwLS42OTYgMTAuNzUgMTAuNzUgMCAwIDEgMTkuODc2IDAgMSAxIDAgMCAxIDAgLjY5NiAxMC43NSAxMC43NSAwIDAgMS0xOS44NzYgMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  [\n    'path',\n    {\n      d: 'M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0',\n      key: '1nclc0',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n","import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { ProductCategory } from '@/types';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport {\r\n  getProductCategoriesAction,\r\n  createProductCategoryAction,\r\n  updateProductCategoryAction,\r\n  deleteProductCategoryAction\r\n} from '@/app/actions/products';\r\n\r\nexport const useCategories = (userId: string | undefined) => {\r\n  const [categories, setCategories] = useState<ProductCategory[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadCategories = useCallback(async () => {\r\n    try {\r\n      if (!currentBusiness?.id) {\r\n        setCategories([]);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      setIsLoading(true);\r\n      const result = await getProductCategoriesAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch categories');\r\n      }\r\n\r\n      const formattedCategories: ProductCategory[] = result.data.map((item: any) => ({\r\n        id: item.id,\r\n        name: item.name,\r\n        createdAt: item.createdAt ? new Date(item.createdAt) : (item.created_at ? new Date(item.created_at) : undefined)\r\n      }));\r\n\r\n      setCategories(formattedCategories);\r\n    } catch (error) {\r\n      console.error('Error loading categories:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load product categories.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, [loadCategories]);\r\n\r\n  const createCategory = async (name: string) => {\r\n    try {\r\n      if (!userId || !currentBusiness?.id) return null;\r\n\r\n      // Check if category already exists\r\n      const existingCategory = categories.find(\r\n        cat => cat.name.toLowerCase() === name.toLowerCase()\r\n      );\r\n\r\n      if (existingCategory) {\r\n        toast({\r\n          title: \"Category exists\",\r\n          description: \"This category already exists.\",\r\n        });\r\n        return existingCategory;\r\n      }\r\n\r\n      const result = await createProductCategoryAction(currentBusiness.id, userId, name);\r\n\r\n      if (!result.success || !result.data) throw new Error(result.error);\r\n\r\n      const newCategory: ProductCategory = {\r\n        id: result.data.id,\r\n        name: result.data.name,\r\n        createdAt: new Date(result.data.createdAt)\r\n      };\r\n\r\n      setCategories(prev => [...prev, newCategory]);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Category created successfully\"\r\n      });\r\n      return newCategory;\r\n    } catch (error) {\r\n      console.error('Error creating category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create category.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const updateCategory = async (id: string, name: string) => {\r\n    try {\r\n      // Check if another category with this name exists\r\n      const existingCategory = categories.find(\r\n        cat => cat.name.toLowerCase() === name.toLowerCase() && cat.id !== id\r\n      );\r\n\r\n      if (existingCategory) {\r\n        toast({\r\n          title: \"Category exists\",\r\n          description: \"Another category with this name already exists.\",\r\n        });\r\n        return false;\r\n      }\r\n\r\n      const result = await updateProductCategoryAction(id, name);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      setCategories(prev => prev.map(c => c.id === id ? { ...c, name } : c));\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Category updated successfully\"\r\n      });\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update category.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteCategory = async (id: string) => {\r\n    try {\r\n      const result = await deleteProductCategoryAction(id);\r\n\r\n      if (!result.success) {\r\n        toast({\r\n          title: \"Cannot delete category\",\r\n          description: result.error || \"Failed to delete category.\",\r\n          variant: \"destructive\"\r\n        });\r\n        return false;\r\n      }\r\n\r\n      setCategories(prev => prev.filter(c => c.id !== id));\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Category deleted successfully\"\r\n      });\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete category.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return {\r\n    categories,\r\n    isLoading,\r\n    loadCategories,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory\r\n  };\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('CircleCheckBig', [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n]);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Save\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUuMiAzYTIgMiAwIDAgMSAxLjQuNmwzLjggMy44YTIgMiAwIDAgMSAuNiAxLjRWMTlhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yeiIgLz4KICA8cGF0aCBkPSJNMTcgMjF2LTdhMSAxIDAgMCAwLTEtMUg4YTEgMSAwIDAgMC0xIDF2NyIgLz4KICA8cGF0aCBkPSJNNyAzdjRhMSAxIDAgMCAwIDEgMWg3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/save\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Save = createLucideIcon('Save', [\n  [\n    'path',\n    {\n      d: 'M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z',\n      key: '1c8476',\n    },\n  ],\n  ['path', { d: 'M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7', key: '1ydtos' }],\n  ['path', { d: 'M7 3v4a1 1 0 0 0 1 1h7', key: 't51u73' }],\n]);\n\nexport default Save;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSAxMiA3LTcgNyA3IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOVY1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUp = createLucideIcon('ArrowUp', [\n  ['path', { d: 'm5 12 7-7 7 7', key: 'hav0vg' }],\n  ['path', { d: 'M12 19V5', key: 'x0mq9r' }],\n]);\n\nexport default ArrowUp;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KICA8cGF0aCBkPSJtMTkgMTItNyA3LTctNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDown = createLucideIcon('ArrowDown', [\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n  ['path', { d: 'm19 12-7 7-7-7', key: '1idqje' }],\n]);\n\nexport default ArrowDown;\n","\r\nimport React from 'react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  message?: string;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nconst LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\r\n  message = 'Loading...',\r\n  size = 'md',\r\n  className = ''\r\n}) => {\r\n  const sizeClasses = {\r\n    sm: 'w-8 h-8',\r\n    md: 'w-16 h-16',\r\n    lg: 'w-24 h-24'\r\n  };\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center justify-center space-y-4 ${className}`}>\r\n      <img \r\n        src=\"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png\" \r\n        alt=\"Loading\" \r\n        className={`${sizeClasses[size]} animate-spin`}\r\n      />\r\n      <p className=\"text-muted-foreground text-sm\">{message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiA3IDEzLjUgMTUuNSA4LjUgMTAuNSAyIDE3IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjE2IDcgMjIgNyAyMiAxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/trending-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingUp = createLucideIcon('TrendingUp', [\n  ['polyline', { points: '22 7 13.5 15.5 8.5 10.5 2 17', key: '126l90' }],\n  ['polyline', { points: '16 7 22 7 22 13', key: 'kwv8wd' }],\n]);\n\nexport default TrendingUp;\n","\r\nimport * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-gray-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 transition-all\"\r\n      style={{ \r\n        transform: `translateX(-${100 - (value || 0)}%)`,\r\n        backgroundColor: \"#16a34a\"\r\n      }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n","\r\nexport const generateProductCSVTemplate = () => {\r\n  const headers = [\r\n    'Product Name',\r\n    'Category',\r\n    'Description',\r\n    'Supplier',\r\n    'Creation Date',\r\n    'Initial Stock',\r\n    'Minimum Stock Level',\r\n    'Cost Price',\r\n    'Selling Price'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '\"Sample Product with, commas\"',\r\n      'Electronics',\r\n      '\"A detailed product description, with commas and other punctuation!\"',\r\n      '\"Supplier Name, Inc.\"',\r\n      '15/01/2024',\r\n      '10',\r\n      '5',\r\n      '50.00',\r\n      '75.00'\r\n    ],\r\n    [\r\n      'Simple Product Name',\r\n      'Home & Garden',\r\n      'Basic description without commas',\r\n      'Basic Supplier',\r\n      '2024-01-16',\r\n      '-5',\r\n      '0',\r\n      '-25.50',\r\n      '100.75'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'product_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const generateTransactionCSVTemplate = () => {\r\n  const headers = [\r\n    'Date',\r\n    'Type',\r\n    'Amount',\r\n    'Description',\r\n    'Category',\r\n    'Payment Method',\r\n    'Person In Charge',\r\n    'To Account'\r\n  ];\r\n\r\n  const sampleData = [\r\n    [\r\n      '22/12/2025',\r\n      'cash_in',\r\n      '1500.00',\r\n      'Sales income from morning shift',\r\n      'Sales',\r\n      'Cash',\r\n      'John Doe',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'cash_out',\r\n      '200.50',\r\n      'Purchased cleaning supplies',\r\n      'Expenses',\r\n      'Cash',\r\n      'Jane Smith',\r\n      ''\r\n    ],\r\n    [\r\n      '22/12/2025',\r\n      'transfer',\r\n      '5000.00',\r\n      'Moving funds to main safe',\r\n      'Internal',\r\n      '',\r\n      'Admin',\r\n      'Main Safe'\r\n    ]\r\n  ];\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...sampleData.map(row => row.join(','))\r\n  ].join('\\n');\r\n\r\n  const blob = new Blob([csvContent], { type: 'text/csv' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = 'transaction_template.csv';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  window.URL.revokeObjectURL(url);\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Circle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Circle = createLucideIcon('Circle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n]);\n\nexport default Circle;\n","\r\nimport * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => {\r\n  // Custom handler to stop event propagation\r\n  const handleTouchEvent = (e: React.TouchEvent) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  return (\r\n    <DropdownMenuPrimitive.SubTrigger\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\r\n        inset && \"pl-8\",\r\n        className\r\n      )}\r\n      onTouchStart={handleTouchEvent}\r\n      onTouchEnd={handleTouchEvent}\r\n      onTouchMove={handleTouchEvent}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n    </DropdownMenuPrimitive.SubTrigger>\r\n  );\r\n})\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => {\r\n  // Custom handler to stop event propagation\r\n  const handleTouchEvent = (e: React.TouchEvent) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  return (\r\n    <DropdownMenuPrimitive.Portal>\r\n      <DropdownMenuPrimitive.Content\r\n        ref={ref}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n          className\r\n        )}\r\n        onTouchStart={handleTouchEvent}\r\n        onTouchEnd={handleTouchEvent}\r\n        onTouchMove={handleTouchEvent}\r\n        {...props}\r\n      />\r\n    </DropdownMenuPrimitive.Portal>\r\n  );\r\n})\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","'use server';\r\n\r\nimport { db } from '../../../prisma/db';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\n// --- STOCK HISTORY ---\r\n\r\nexport async function getStockHistoryAction(locationId: string, productId?: string) {\r\n    try {\r\n        const where: any = { locationId };\r\n        if (productId) where.productId = productId;\r\n\r\n        const history = await db.productHistory.findMany({\r\n            where,\r\n            include: {\r\n                product: {\r\n                    select: {\r\n                        name: true,\r\n                        costPrice: true,\r\n                        sellingPrice: true,\r\n                        sku: true\r\n                    }\r\n                }\r\n            },\r\n            orderBy: [{ createdAt: 'desc' }, { id: 'desc' }]\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: history.map((h: any) => ({\r\n                id: h.id,\r\n                productId: h.productId,\r\n                oldQuantity: h.previousQuantity,\r\n                newQuantity: h.newQuantity,\r\n                changeReason: h.changeReason,\r\n                createdAt: h.createdAt.toISOString(),\r\n                referenceId: h.referenceId,\r\n                receiptNumber: h.receiptNumber,\r\n                product: h.product ? {\r\n                    name: h.product.name,\r\n                    costPrice: h.product.costPrice,\r\n                    sellingPrice: h.product.sellingPrice,\r\n                    itemNumber: h.product.sku\r\n                } : undefined\r\n            }))\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error fetching stock history:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createStockHistoryAction(data: any) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const entry = await tx.productHistory.create({\r\n                data: {\r\n                    userId: data.userId,\r\n                    locationId: data.locationId,\r\n                    productId: data.productId,\r\n                    previousQuantity: data.previousQuantity,\r\n                    newQuantity: data.newQuantity,\r\n                    changeReason: data.changeReason,\r\n                    referenceId: data.referenceId || null,\r\n                    receiptNumber: data.receiptNumber || null,\r\n                    createdAt: data.createdAt ? new Date(data.createdAt) : undefined\r\n                }\r\n            });\r\n\r\n            // Update product stock as well\r\n            await tx.product.update({\r\n                where: { id: data.productId },\r\n                data: { stock: data.newQuantity }\r\n            });\r\n\r\n            return entry;\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error creating stock history:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function recalculateStockChainAction(productId: string, locationId: string) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const history = await tx.productHistory.findMany({\r\n                where: { productId, locationId },\r\n                orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n            });\r\n\r\n            if (history.length === 0) return { finalQuantity: 0 };\r\n\r\n            let runningQuantity = 0;\r\n            const updates = [];\r\n\r\n            for (const entry of history) {\r\n                const change = entry.newQuantity - entry.previousQuantity;\r\n                const newPrev = runningQuantity;\r\n                const newNext = newPrev + change;\r\n\r\n                if (entry.previousQuantity !== newPrev || entry.newQuantity !== newNext) {\r\n                    updates.push(tx.productHistory.update({\r\n                        where: { id: entry.id },\r\n                        data: { previousQuantity: newPrev, newQuantity: newNext }\r\n                    }));\r\n                }\r\n                runningQuantity = newNext;\r\n            }\r\n\r\n            if (updates.length > 0) {\r\n                await Promise.all(updates);\r\n            }\r\n\r\n            // Update product\r\n            await tx.product.update({\r\n                where: { id: productId },\r\n                data: { stock: runningQuantity }\r\n            });\r\n\r\n            return { finalQuantity: runningQuantity };\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error recalculating stock chain:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteStockHistoryEntriesByReferenceAction(referenceId: string, locationId: string) {\r\n    try {\r\n        const result = await db.$transaction(async (tx: any) => {\r\n            const entries = await tx.productHistory.findMany({\r\n                where: { referenceId, locationId },\r\n                select: { productId: true }\r\n            });\r\n\r\n            const productIds = [...new Set(entries.map((e: any) => e.productId as string))];\r\n\r\n            await tx.productHistory.deleteMany({\r\n                where: { referenceId, locationId }\r\n            });\r\n\r\n            // Recalculate chains for affected products\r\n            for (const productId of productIds) {\r\n                await recalculateStockChainInternal(tx, productId as string, locationId);\r\n            }\r\n\r\n            return { affectedProducts: productIds.length };\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error deleting stock history by reference:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateStockHistoryDatesByReferenceAction(referenceId: string, locationId: string, newDate: string) {\r\n    try {\r\n        const result = await db.productHistory.updateMany({\r\n            where: { referenceId, locationId },\r\n            data: { createdAt: new Date(newDate) }\r\n        });\r\n\r\n        revalidatePath('/inventory');\r\n        return { success: true, data: result };\r\n    } catch (error: any) {\r\n        console.error('Error updating stock history dates:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// Internal helper for use within transactions\r\nasync function recalculateStockChainInternal(tx: any, productId: string, locationId: string) {\r\n    const history = await tx.productHistory.findMany({\r\n        where: { productId, locationId },\r\n        orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n    });\r\n\r\n    let runningQuantity = 0;\r\n    for (const entry of history) {\r\n        const change = entry.newQuantity - entry.previousQuantity;\r\n        const newPrev = runningQuantity;\r\n        const newNext = newPrev + change;\r\n\r\n        if (entry.previousQuantity !== newPrev || entry.newQuantity !== newNext) {\r\n            await tx.productHistory.update({\r\n                where: { id: entry.id },\r\n                data: { previousQuantity: newPrev, newQuantity: newNext }\r\n            });\r\n        }\r\n        runningQuantity = newNext;\r\n    }\r\n\r\n    await tx.product.update({\r\n        where: { id: productId },\r\n        data: { stock: runningQuantity }\r\n    });\r\n}\r\n\r\n// --- REQUISITIONS ---\r\n\r\nexport async function getRequisitionsAction(userId: string, locationId: string) {\r\n    try {\r\n        const requisitions = await db.requisition.findMany({\r\n            where: {\r\n                userId,\r\n                locationId\r\n            },\r\n            orderBy: {\r\n                createdAt: 'desc'\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: requisitions.map((req: any) => ({\r\n                id: req.id,\r\n                userId: req.userId,\r\n                locationId: req.branchId,\r\n                requisitionNumber: req.requisitionNumber,\r\n                title: req.title || '',\r\n                items: (req.items as any) || [],\r\n                notes: req.notes,\r\n                status: req.status,\r\n                createdAt: req.createdAt.toISOString(),\r\n                updatedAt: req.updatedAt.toISOString()\r\n            }))\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error fetching requisitions:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function createRequisitionAction(data: any) {\r\n    try {\r\n        const requisition = await db.requisition.create({\r\n            data: {\r\n                userId: data.userId,\r\n                branchId: data.locationId,\r\n                requisitionNumber: data.requisitionNumber,\r\n                title: data.title,\r\n                items: data.items,\r\n                notes: data.notes,\r\n                status: data.status || 'draft'\r\n            }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: requisition.id,\r\n                userId: requisition.userId,\r\n                locationId: requisition.branchId,\r\n                requisitionNumber: requisition.requisitionNumber,\r\n                title: requisition.title || '',\r\n                items: (requisition.items as any) || [],\r\n                notes: requisition.notes,\r\n                status: requisition.status,\r\n                createdAt: requisition.createdAt.toISOString(),\r\n                updatedAt: requisition.updatedAt.toISOString()\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error creating requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateRequisitionAction(id: string, userId: string, data: any) {\r\n    try {\r\n        const requisition = await db.requisition.update({\r\n            where: { id, userId },\r\n            data: {\r\n                title: data.title,\r\n                items: data.items,\r\n                notes: data.notes,\r\n                status: data.status,\r\n                updatedAt: new Date()\r\n            }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return {\r\n            success: true,\r\n            data: {\r\n                id: requisition.id,\r\n                userId: requisition.userId,\r\n                locationId: requisition.branchId,\r\n                requisitionNumber: requisition.requisitionNumber,\r\n                title: requisition.title || '',\r\n                items: (requisition.items as any) || [],\r\n                notes: requisition.notes,\r\n                status: requisition.status,\r\n                createdAt: requisition.createdAt.toISOString(),\r\n                updatedAt: requisition.updatedAt.toISOString()\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error updating requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function deleteRequisitionAction(id: string, userId: string) {\r\n    try {\r\n        await db.requisition.delete({\r\n            where: { id, userId }\r\n        });\r\n\r\n        revalidatePath('/requisitions');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        console.error('Error deleting requisition:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- REPORTS / ANALYTICS ---\r\n\r\nexport async function getStockSummaryReportAction(locationId: string, startDate: string, endDate: string) {\r\n    try {\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n\r\n        // Fetch all products for the location\r\n        const products = await db.product.findMany({\r\n            where: { branchId: locationId },\r\n            include: { category: true }\r\n        });\r\n\r\n        const reportData = await Promise.all(products.map(async (product: any) => {\r\n            // This is a simplified version of the logic that was likely in the RPC\r\n            // In a real production app, we'd use complex SQL or dedicated aggregate tables\r\n\r\n            // Get history for this product in the date range\r\n            const history = await db.productHistory.findMany({\r\n                where: {\r\n                    productId: product.id,\r\n                    locationId,\r\n                    createdAt: {\r\n                        gte: start,\r\n                        lte: end\r\n                    }\r\n                },\r\n                orderBy: { createdAt: 'asc' }\r\n            });\r\n\r\n            // Calculate metrics from history\r\n            let itemsSold = 0;\r\n            let stockIn = 0;\r\n            let adjustmentsIn = 0;\r\n            let adjustmentsOut = 0;\r\n\r\n            history.forEach((h: any) => {\r\n                const change = h.newQuantity - h.previousQuantity;\r\n                if (h.changeReason === 'SALE') {\r\n                    itemsSold += Math.abs(change);\r\n                } else if (h.changeReason === 'STOCK_IN' || h.changeReason === 'RESTOCK') {\r\n                    stockIn += change;\r\n                } else if (change > 0) {\r\n                    adjustmentsIn += change;\r\n                } else {\r\n                    adjustmentsOut += Math.abs(change);\r\n                }\r\n            });\r\n\r\n            // Get closing stock at end date (or current if after end date)\r\n            const closingStockEntry = await db.productHistory.findFirst({\r\n                where: {\r\n                    productId: product.id,\r\n                    locationId,\r\n                    createdAt: { lte: end }\r\n                },\r\n                orderBy: { createdAt: 'desc' }\r\n            });\r\n\r\n            const closingStock = closingStockEntry ? closingStockEntry.newQuantity : 0;\r\n            const openingStock = closingStock - (stockIn + adjustmentsIn - itemsSold - adjustmentsOut);\r\n\r\n            return {\r\n                productId: product.id,\r\n                productName: product.name,\r\n                itemNumber: product.sku || product.id,\r\n                imageUrl: product.imageUrl,\r\n                costPrice: Number(product.costPrice),\r\n                sellingPrice: Number(product.sellingPrice),\r\n                category: product.category?.name,\r\n                openingStock,\r\n                itemsSold,\r\n                stockIn,\r\n                transferOut: 0,\r\n                returnIn: 0,\r\n                returnOut: 0,\r\n                adjustmentsIn,\r\n                adjustmentsOut,\r\n                closingStock,\r\n                revaluation: closingStock * Number(product.costPrice)\r\n            };\r\n        }));\r\n\r\n        return { success: true, data: reportData };\r\n    } catch (error: any) {\r\n        console.error('Error generating stock summary report:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- STOCK RECONCILIATION & REPAIRS ---\r\n\r\nexport async function getProductReconciliationAction(businessId: string, productId: string) {\r\n    try {\r\n        const product = await db.product.findUnique({\r\n            where: { id: productId },\r\n            include: { category: true }\r\n        });\r\n\r\n        if (!product) return { success: false, error: 'Product not found' };\r\n\r\n        // Fetch all history entries\r\n        const history = await db.productHistory.findMany({\r\n            where: { productId, locationId: businessId },\r\n            orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n        });\r\n\r\n        // Fetch all sales containing this product\r\n        const sales = await db.sale.findMany({\r\n            where: { branchId: businessId },\r\n            orderBy: { date: 'asc' }\r\n        });\r\n\r\n        const openingStock = history.length > 0 ? history[0].newStock : 0;\r\n        const openingDate = history.length > 0 ? history[0].createdAt : null;\r\n\r\n        const dailyTransactions = new Map<string, any>();\r\n        let excludedSalesQty = 0;\r\n\r\n        sales.forEach(sale => {\r\n            const items = (sale.items as any[]) || [];\r\n            const soldQty = items\r\n                .filter(item => item.productId === productId)\r\n                .reduce((sum, item) => sum + (Number(item.quantity) || 0), 0);\r\n\r\n            if (soldQty > 0) {\r\n                if (openingDate && sale.date < openingDate) {\r\n                    excludedSalesQty += soldQty;\r\n                } else {\r\n                    const dateStr = sale.date.toISOString().split('T')[0];\r\n                    const day = dailyTransactions.get(dateStr) || { itemsSold: 0, stockAdded: 0, transferOut: 0, returnIn: 0, returnOut: 0, adjustments: 0 };\r\n                    day.itemsSold += soldQty;\r\n                    dailyTransactions.set(dateStr, day);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Movements (excluding initial entry)\r\n        const movements = history.slice(1);\r\n        movements.forEach(h => {\r\n            const dateStr = h.createdAt.toISOString().split('T')[0];\r\n            const delta = h.newStock - h.oldStock;\r\n            const reason = (h.changeReason || '').toLowerCase();\r\n\r\n            const day = dailyTransactions.get(dateStr) || { itemsSold: 0, stockAdded: 0, transferOut: 0, returnIn: 0, returnOut: 0, adjustments: 0 };\r\n\r\n            if (h.type === 'RESTOCK' || reason.includes('purchase') || reason.includes('addition')) {\r\n                day.stockAdded += delta;\r\n            } else if (reason.includes('transfer out')) {\r\n                day.transferOut += Math.abs(delta);\r\n            } else if (reason.includes('customer return')) {\r\n                day.returnIn += delta;\r\n            } else if (reason.includes('return to supplier')) {\r\n                day.returnOut += Math.abs(delta);\r\n            } else if (h.type !== 'SALE') {\r\n                day.adjustments += delta;\r\n            }\r\n            dailyTransactions.set(dateStr, day);\r\n        });\r\n\r\n        const sortedDates = Array.from(dailyTransactions.keys()).sort();\r\n        const dailyBreakdown = [];\r\n        let runningStock = openingStock;\r\n\r\n        for (const date of sortedDates) {\r\n            const day = dailyTransactions.get(date);\r\n            const startingStock = runningStock;\r\n            const endingStock = startingStock - day.itemsSold + day.stockAdded - day.transferOut + day.returnIn - day.returnOut + day.adjustments;\r\n\r\n            dailyBreakdown.push({\r\n                date,\r\n                startingStock,\r\n                ...day,\r\n                endingStock\r\n            });\r\n            runningStock = endingStock;\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                product: {\r\n                    id: product.id,\r\n                    name: product.name,\r\n                    quantity: product.stock,\r\n                    itemNumber: product.sku\r\n                },\r\n                currentStock: product.stock,\r\n                calculatedStock: runningStock,\r\n                discrepancy: product.stock - runningStock,\r\n                openingStock,\r\n                openingDate: openingDate?.toISOString(),\r\n                excludedSalesQty,\r\n                dailyBreakdown\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error in reconciliation action:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getStockRepairsPreviewAction(businessId: string) {\r\n    try {\r\n        const products = await db.product.findMany({\r\n            where: { branchId: businessId },\r\n            select: { id: true, name: true, stock: true }\r\n        });\r\n\r\n        const brokenChains = [];\r\n\r\n        for (const product of products) {\r\n            const history = await db.productHistory.findMany({\r\n                where: { productId: product.id, locationId: businessId },\r\n                orderBy: [{ createdAt: 'asc' }, { id: 'asc' }]\r\n            });\r\n\r\n            if (history.length === 0) continue;\r\n\r\n            let runningQuantity = 0;\r\n            const brokenEntries = [];\r\n\r\n            for (const entry of history) {\r\n                const change = entry.newStock - entry.oldStock;\r\n                const expectedPrev = runningQuantity;\r\n                const expectedNext = expectedPrev + change;\r\n\r\n                if (entry.oldStock !== expectedPrev || entry.newStock !== expectedNext) {\r\n                    brokenEntries.push({\r\n                        entryId: entry.id,\r\n                        createdAt: entry.createdAt.toISOString(),\r\n                        changeReason: entry.changeReason,\r\n                        currentPrevQty: entry.oldStock,\r\n                        currentNewQty: entry.newStock,\r\n                        fixedPrevQty: expectedPrev,\r\n                        fixedNewQty: expectedNext\r\n                    });\r\n                }\r\n                runningQuantity = expectedNext;\r\n            }\r\n\r\n            if (brokenEntries.length > 0 || Math.abs(product.stock - runningQuantity) > 0.001) {\r\n                brokenChains.push({\r\n                    productId: product.id,\r\n                    productName: product.name,\r\n                    totalEntries: history.length,\r\n                    brokenEntries,\r\n                    finalFixedQty: runningQuantity,\r\n                    currentProductQty: product.stock\r\n                });\r\n            }\r\n        }\r\n\r\n        return { success: true, data: brokenChains };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function repairStockChainsAction(businessId: string, productIds?: string[]) {\r\n    try {\r\n        const ids = productIds || (await db.product.findMany({\r\n            where: { branchId: businessId },\r\n            select: { id: true }\r\n        })).map(p => p.id);\r\n\r\n        let repaired = 0;\r\n        let failed = 0;\r\n\r\n        for (const id of ids) {\r\n            try {\r\n                await recalculateStockChainAction(id, businessId);\r\n                repaired++;\r\n            } catch (err) {\r\n                failed++;\r\n            }\r\n        }\r\n\r\n        return { success: true, data: { repaired, failed } };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getActivityByEntityIdsAction(entityIds: string[]) {\r\n    try {\r\n        const records = await db.activityHistory.findMany({\r\n            where: { entityId: { in: entityIds } },\r\n            select: { entityId: true, entityName: true }\r\n        });\r\n        return { success: true, data: records };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message, data: [] };\r\n    }\r\n}\r\n\r\nexport async function updateStockHistoryDatesAction(entryIds: string[], newDate: string) {\r\n    try {\r\n        await db.productHistory.updateMany({\r\n            where: { id: { in: entryIds } },\r\n            data: { createdAt: new Date(newDate) }\r\n        });\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n","import { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { getStockSummaryReportAction } from '@/app/actions/inventory';\r\n\r\nexport interface StockSummaryData {\r\n  productId: string;\r\n  productName: string;\r\n  itemNumber: string;\r\n  imageUrl?: string | null;\r\n  costPrice: number;\r\n  sellingPrice: number;\r\n  category?: string;\r\n  openingStock: number;\r\n  itemsSold: number;\r\n  stockIn: number;\r\n  transferOut: number;\r\n  returnIn: number;\r\n  returnOut: number;\r\n  adjustmentsIn: number;\r\n  adjustmentsOut: number;\r\n  closingStock: number;\r\n  revaluation: number;\r\n}\r\n\r\nexport const useStockSummaryData = (\r\n  dateRange: { from: Date | undefined; to: Date | undefined }\r\n) => {\r\n  const { user } = useAuth();\r\n  const { currentBusiness } = useBusiness();\r\n  const queryClient = useQueryClient();\r\n\r\n  const fetchStockSummary = async (): Promise<StockSummaryData[]> => {\r\n    if (!user?.id || !currentBusiness?.id || !dateRange?.from || !dateRange?.to) return [];\r\n\r\n    try {\r\n      const result = await getStockSummaryReportAction(\r\n        currentBusiness.id,\r\n        dateRange.from.toISOString(),\r\n        dateRange.to.toISOString()\r\n      );\r\n\r\n      if (result.success && result.data) {\r\n        return result.data as StockSummaryData[];\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('[StockSummary] Error fetching report:', error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const { data: stockSummaryData = [], isLoading, refetch } = useQuery({\r\n    queryKey: ['stockSummary', currentBusiness?.id, dateRange.from?.toISOString(), dateRange.to?.toISOString()],\r\n    queryFn: fetchStockSummary,\r\n    enabled: !!user?.id && !!currentBusiness?.id && !!dateRange?.from && !!dateRange?.to,\r\n    staleTime: 5 * 60 * 1000,\r\n    gcTime: 30 * 60 * 1000,\r\n  });\r\n\r\n  return {\r\n    stockSummaryData,\r\n    isLoading,\r\n    loadStockSummaryData: refetch,\r\n    clearCache: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['stockSummary'] });\r\n    },\r\n    clearAllLocationCaches: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['stockSummary'] });\r\n    }\r\n  };\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiAxNyAxMy41IDguNSA4LjUgMTMuNSAyIDciIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjIgMTcgMjIgMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('TrendingDown', [\n  ['polyline', { points: '22 17 13.5 8.5 8.5 13.5 2 7', key: '1r2t7k' }],\n  ['polyline', { points: '16 17 22 17 22 11', key: '11uiuu' }],\n]);\n\nexport default TrendingDown;\n","import React from 'react';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\nconst InventoryPageSkeleton = () => (\r\n  <div className=\"space-y-6\">\r\n    <div className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n      <div>\r\n        <Skeleton className=\"h-8 w-48 mb-2\" />\r\n        <Skeleton className=\"h-4 w-64\" />\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        <Skeleton className=\"h-9 w-9\" />\r\n        <Skeleton className=\"h-9 w-24\" />\r\n        <Skeleton className=\"h-9 w-32\" />\r\n      </div>\r\n    </div>\r\n\r\n    <div className=\"mb-4\">\r\n      <Skeleton className=\"h-10 w-full max-w-md\" />\r\n    </div>\r\n\r\n    <div className=\"mb-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        {[...Array(4)].map((_, i) => (\r\n          <Skeleton key={i} className=\"h-24\" />\r\n        ))}\r\n      </div>\r\n    </div>\r\n\r\n    <Skeleton className=\"h-64 mb-6\" />\r\n    <Skeleton className=\"h-96\" />\r\n  </div>\r\n);\r\n\r\nexport default InventoryPageSkeleton;","\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { StockHistoryEntry } from '@/types';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport {\r\n  getStockHistoryAction,\r\n  createStockHistoryAction,\r\n  recalculateStockChainAction,\r\n  deleteStockHistoryEntriesByReferenceAction,\r\n  updateStockHistoryDatesByReferenceAction,\r\n  repairStockChainsAction,\r\n  getStockRepairsPreviewAction\r\n} from '@/app/actions/inventory';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\n\r\nexport interface ChainRepairBreakEntry {\r\n  entryId: string;\r\n  createdAt: string;\r\n  changeReason: string;\r\n  currentPrevQty: number;\r\n  currentNewQty: number;\r\n  fixedPrevQty: number;\r\n  fixedNewQty: number;\r\n}\r\n\r\nexport interface ChainRepairPreview {\r\n  productId: string;\r\n  productName: string;\r\n  totalEntries: number;\r\n  brokenEntries: ChainRepairBreakEntry[];\r\n  finalFixedQty: number;\r\n  currentProductQty: number;\r\n}\r\n\r\nexport const useStockHistory = (userId: string | undefined, productId?: string) => {\r\n  const [stockHistory, setStockHistory] = useState<StockHistoryEntry[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { currentBusiness } = useBusiness();\r\n\r\n  const loadStockHistory = useCallback(async () => {\r\n    if (!userId || !currentBusiness) {\r\n      setStockHistory([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const result = await getStockHistoryAction(currentBusiness.id, productId);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch stock history');\r\n      }\r\n\r\n      const formattedHistory: StockHistoryEntry[] = result.data.map((entry: any) => ({\r\n        id: entry.id,\r\n        productId: entry.productId,\r\n        oldQuantity: entry.oldQuantity,\r\n        newQuantity: entry.newQuantity,\r\n        changeReason: entry.changeReason,\r\n        createdAt: new Date(entry.createdAt),\r\n        referenceId: entry.referenceId,\r\n        receiptNumber: entry.receiptNumber,\r\n        product: entry.product\r\n      }));\r\n\r\n      setStockHistory(formattedHistory);\r\n    } catch (error) {\r\n      console.error('Error loading stock history:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [userId, currentBusiness?.id, productId]);\r\n\r\n  useEffect(() => {\r\n    loadStockHistory();\r\n  }, [loadStockHistory]);\r\n\r\n  const createStockHistoryEntry = async (\r\n    targetProductId: string,\r\n    previousQuantity: number,\r\n    newQuantity: number,\r\n    reason: string,\r\n    referenceId?: string,\r\n    entryDate?: Date,\r\n    receiptNumber?: string,\r\n    productName?: string\r\n  ) => {\r\n    try {\r\n      if (!userId || !currentBusiness) return false;\r\n\r\n      const snapshottedReason = productName\r\n        ? `[${productName}] | ${reason}`\r\n        : reason;\r\n\r\n      const result = await createStockHistoryAction({\r\n        userId,\r\n        locationId: currentBusiness.id,\r\n        productId: targetProductId,\r\n        previousQuantity,\r\n        newQuantity,\r\n        changeReason: snapshottedReason,\r\n        referenceId,\r\n        receiptNumber,\r\n        createdAt: entryDate?.toISOString()\r\n      });\r\n\r\n      if (!result.success) {\r\n        console.error('Error creating stock history entry:', result.error);\r\n        return false;\r\n      }\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error creating stock history:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteMultipleStockHistoryEntriesByReference = async (referenceId: string) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await deleteStockHistoryEntriesByReferenceAction(referenceId, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting stock history entries:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const recalculateStockChain = async (targetProductId: string) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await recalculateStockChainAction(targetProductId, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error recalculating stock chain:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateStockHistoryDatesBySaleId = async (saleId: string, newDate: Date) => {\r\n    try {\r\n      if (!currentBusiness) return false;\r\n      const result = await updateStockHistoryDatesByReferenceAction(saleId, currentBusiness.id, newDate.toISOString());\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      await loadStockHistory();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating stock history dates:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const repairAllStockChains = async (progressCallback?: (current: number, total: number) => void) => {\r\n    try {\r\n      if (!currentBusiness) return { repaired: 0, failed: 0 };\r\n      const result = await repairStockChainsAction(currentBusiness.id);\r\n      if (result.success && result.data) return result.data;\r\n      return { repaired: 0, failed: 0 };\r\n    } catch (error) {\r\n      console.error('Error repairing all chains:', error);\r\n      return { repaired: 0, failed: 0 };\r\n    }\r\n  }\r\n\r\n  const previewStockChainRepairs = async (progressCallback?: (current: number, total: number) => void) => {\r\n    try {\r\n      if (!currentBusiness) return [];\r\n      const result = await getStockRepairsPreviewAction(currentBusiness.id);\r\n      if (result.success && result.data) return result.data;\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Error previewing repairs:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  return {\r\n    stockHistory,\r\n    isLoading,\r\n    createStockHistoryEntry,\r\n    deleteMultipleStockHistoryEntriesByReference,\r\n    recalculateStockChain,\r\n    updateStockHistoryDatesBySaleId,\r\n    repairAllStockChains,\r\n    previewStockChainRepairs,\r\n    refreshHistory: loadStockHistory\r\n  };\r\n};\r\n","\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Image\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iOSIgcj0iMiIgLz4KICA8cGF0aCBkPSJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Image = createLucideIcon('Image', [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['circle', { cx: '9', cy: '9', r: '2', key: 'af1f0g' }],\n  ['path', { d: 'm21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21', key: '1xmnt7' }],\n]);\n\nexport default Image;\n","\r\nimport React from 'react';\r\nimport { Image as ImageIcon } from 'lucide-react';\r\n\r\ninterface ProductImageProps {\r\n  imageUrl?: string | null;\r\n  alt: string;\r\n  size?: 'sm' | 'md';\r\n}\r\n\r\nconst ProductImage: React.FC<ProductImageProps> = ({\r\n  imageUrl,\r\n  alt,\r\n  size = 'md'\r\n}) => {\r\n  const dimensions = size === 'sm' ? 'w-10 h-10' : 'w-12 h-12';\r\n  \r\n  if (imageUrl) {\r\n    return (\r\n      <img \r\n        src={imageUrl} \r\n        alt={alt} \r\n        className={`${dimensions} object-cover rounded-md`}\r\n      />\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className={`${dimensions} bg-gray-100 flex items-center justify-center rounded-md`}>\r\n      <ImageIcon size={size === 'sm' ? 16 : 18} className=\"text-gray-400\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductImage;\r\n","import { Product } from '@/types';\r\n\r\n/**\r\n * Checks if a search term (possibly containing multiple words in any order) matches a product.\r\n * Returns true if every word in the search term is found in at least one searchable field of the product.\r\n */\r\nexport const matchProductSearch = (product: Product, searchTerm: string): boolean => {\r\n    if (!searchTerm || !searchTerm.trim()) return true;\r\n\r\n    const words = searchTerm.toLowerCase().trim().split(/\\s+/);\r\n\r\n    const searchableText = [\r\n        String(product.name || ''),\r\n        String(product.description || ''),\r\n        String(product.category || ''),\r\n        String(product.supplier || ''),\r\n        String(product.itemNumber || ''),\r\n        String(product.barcode || ''),\r\n        String(product.manufacturerBarcode || '')\r\n    ].map(s => s.toLowerCase());\r\n\r\n    // Every word in the search must match at least one searchable field\r\n    return words.every(word =>\r\n        searchableText.some(field => field.includes(word))\r\n    );\r\n};\r\n"],"names":[],"mappings":"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","ignoreList":[0,1,3,6,7,8,9,11,14,18,22]}