{"version":3,"sources":["../../../../src/utils/smsUtils.ts","../../../../src/utils/generateNoticePDF.ts","../../../../src/utils/formalizeText.ts","../../../../node_modules/lucide-react/src/icons/wand-sparkles.ts","../../../../src/utils/noticeTemplates.ts","../../../../src/components/customers/BusinessNoticeGenerator.tsx","../../../../src/utils/generatePaymentReminderPDF.ts","../../../../src/components/customers/NoticeTemplateSelector.tsx","../../../../src/components/customers/PaymentReminderPreviewDialog.tsx","../../../../node_modules/lucide-react/src/icons/message-circle.ts"],"sourcesContent":["\r\nimport { Sale, BusinessSettings } from '@/types';\r\nimport { isIOS } from './deviceDetection';\r\n\r\nexport interface SMSOptions {\r\n  phoneNumber: string;\r\n  message: string;\r\n}\r\n\r\nexport const formatPhoneForSMS = (phoneNumber: string): string => {\r\n  // Remove all non-digit characters except + at the beginning\r\n  const cleaned = phoneNumber.replace(/[^\\d+]/g, '');\r\n\r\n  // If it starts with +, keep it, otherwise just return the digits\r\n  if (cleaned.startsWith('+')) {\r\n    return cleaned;\r\n  }\r\n\r\n  return cleaned;\r\n};\r\n\r\nexport const formatMessageForSMS = (content: string, businessName?: string): string => {\r\n  // Replace non-breaking spaces and other special whitespace with standard spaces\r\n  // \\u00A0 is non-breaking space, \\u200B is zero-width space, etc.\r\n  let sanitized = content.replace(/[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g, ' ');\r\n\r\n  // Remove excessive whitespace and format for SMS\r\n  let formatted = sanitized\r\n    .replace(/\\n\\s*\\n/g, '\\n\\n') // Clean up multiple line breaks\r\n    .replace(/^\\s+|\\s+$/g, '') // Trim whitespace\r\n    .substring(0, 800); // Limit to reasonable SMS length\r\n\r\n  // Add business signature if provided\r\n  if (businessName) {\r\n    formatted += `\\n\\n- ${businessName}`;\r\n  }\r\n\r\n  return formatted;\r\n};\r\n\r\nexport const getBirthdayMessage = (customerName: string): string => {\r\n  return `ðŸŽ‰ Happy Birthday ${customerName}! ðŸŽ‰\r\n\r\nWishing you a day filled with joy, love, and great memories. Thank you for being a valued part of our family. We're grateful for your support and wish you nothing but happiness in the year ahead!\r\n\r\nMay this new year of your life bring you wonderful opportunities and amazing experiences.`;\r\n};\r\n\r\nexport const getWeMissYouMessage = (customerName: string): string => {\r\n  return `Dear ${customerName},\r\n\r\nWe Miss You!\r\n\r\nIt's been a while since we last heard from you, and we just wanted to reach out. We truly value you as a customer and would love to see you again.\r\n\r\nIf there's anything we can do to assist you or if you need any help, we're always here for you!\r\n\r\nWe hope to serve you again soon.\r\n\r\nYours faithfully,`;\r\n};\r\n\r\nexport const getThankYouMessage = (sale: Sale, settings: BusinessSettings): string => {\r\n  const saleTotal = sale.items.reduce((total, item) => {\r\n    const itemSubtotal = item.price * item.quantity;\r\n    const discountAmount = item.discountType === 'amount'\r\n      ? (item.discountAmount || 0)\r\n      : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n    return total + (itemSubtotal - discountAmount);\r\n  }, 0);\r\n\r\n  // Add tax if applicable\r\n  const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n  const totalWithTax = saleTotal + taxAmount;\r\n\r\n  // Create items list\r\n  const itemsList = sale.items.map(item =>\r\n    `â€¢ ${item.description} (Qty: ${item.quantity})`\r\n  ).join('\\n');\r\n\r\n  return `Dear ${sale.customerName},\r\n\r\nWe wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.\r\n\r\nReceipt Number: ${sale.receiptNumber}\r\n\r\nItems Purchased:\r\n${itemsList}\r\n\r\nTotal Amount: ${settings.currency} ${totalWithTax.toLocaleString()}\r\n\r\nIn case of any inquiries please call ${settings.businessPhone && settings.businessPhone !== '(123) 456-7890' ? settings.businessPhone : 'our office'}.\r\n\r\nWe appreciate your business and look forward to serving you again.\r\n\r\nYours faithfully,\r\n${settings.businessName || 'Management'}`;\r\n};\r\n\r\nexport const openSMSApp = (options: SMSOptions): void => {\r\n  const { phoneNumber, message } = options;\r\n  const formattedPhone = formatPhoneForSMS(phoneNumber);\r\n  const encodedMessage = encodeURIComponent(message);\r\n\r\n  let smsUrl: string;\r\n\r\n  if (isIOS()) {\r\n    // iOS uses sms: scheme\r\n    smsUrl = `sms:${formattedPhone}&body=${encodedMessage}`;\r\n  } else {\r\n    // Android uses sms: scheme with different parameter format\r\n    smsUrl = `sms:${formattedPhone}?body=${encodedMessage}`;\r\n  }\r\n\r\n  try {\r\n    window.open(smsUrl, '_self');\r\n  } catch (error) {\r\n    console.error('Failed to open SMS app:', error);\r\n    // Fallback: copy message to clipboard\r\n    navigator.clipboard?.writeText(message).then(() => {\r\n      alert('SMS app not available. Message copied to clipboard.');\r\n    }).catch(() => {\r\n      alert('SMS app not available and clipboard access denied.');\r\n    });\r\n  }\r\n};\r\n\r\nexport const openWhatsApp = (options: SMSOptions): void => {\r\n  const { phoneNumber, message } = options;\r\n  const formattedPhone = formatPhoneForSMS(phoneNumber);\r\n  const encodedMessage = encodeURIComponent(message);\r\n\r\n  const whatsappUrl = `https://wa.me/${formattedPhone}?text=${encodedMessage}`;\r\n\r\n  try {\r\n    window.open(whatsappUrl, '_blank');\r\n  } catch (error) {\r\n    console.error('Failed to open WhatsApp:', error);\r\n    // Fallback: copy message to clipboard\r\n    navigator.clipboard?.writeText(message).then(() => {\r\n      alert('WhatsApp not available. Message copied to clipboard.');\r\n    }).catch(() => {\r\n      alert('WhatsApp not available and clipboard access denied.');\r\n    });\r\n  }\r\n};\r\n\r\nexport const canSendSMS = (customer: { phoneNumber?: string | null }): boolean => {\r\n  return !!(customer.phoneNumber && customer.phoneNumber.trim());\r\n};\r\n","\r\nimport jsPDF from 'jspdf';\r\nimport { format } from 'date-fns';\r\nimport { BusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { Customer } from '@/types';\r\n\r\ninterface NoticeData {\r\n  customer: Customer;\r\n  subject: string;\r\n  content: string;\r\n  senderName?: string;\r\n}\r\n\r\nexport const generateNoticePDF = async (\r\n  noticeData: NoticeData,\r\n  businessSettings: BusinessSettings\r\n): Promise<void> => {\r\n  const doc = new jsPDF();\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 20;\r\n  let yPosition = margin;\r\n\r\n  // Function to add watermark to current page\r\n  const addWatermark = () => {\r\n    doc.setFontSize(8);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(150, 150, 150); // Light gray color\r\n    doc.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n    doc.setTextColor(0, 0, 0); // Reset to black\r\n  };\r\n\r\n  try {\r\n    // Set default font\r\n    doc.setFont('helvetica', 'normal');\r\n\r\n    // Helper function to check if we need a new page\r\n    const checkPageBreak = (requiredSpace: number): void => {\r\n      if (yPosition + requiredSpace > pageHeight - margin - 15) { // Reserve space for watermark\r\n        addWatermark(); // Add watermark to current page before creating new one\r\n        doc.addPage();\r\n        yPosition = margin;\r\n      }\r\n    };\r\n\r\n    // Helper function to add text with proper word wrapping and page breaks\r\n    const addWrappedText = (text: string, x: number, y: number, maxWidth: number, fontSize: number = 11): number => {\r\n      doc.setFontSize(fontSize);\r\n      const splitText = doc.splitTextToSize(text, maxWidth);\r\n\r\n      let currentY = y;\r\n\r\n      splitText.forEach((line: string) => {\r\n        // Check if we need a new page before adding the line\r\n        checkPageBreak(6); // 6 units space needed for a line\r\n\r\n        doc.text(line, x, yPosition);\r\n        yPosition += 5; // Line spacing\r\n      });\r\n\r\n      return yPosition;\r\n    };\r\n\r\n    // Business Header with Logo on left and details on right\r\n    const headerHeight = 25;\r\n\r\n    // Business Logo on the left (if available)\r\n    if (businessSettings.businessLogo) {\r\n      try {\r\n        // Create a temporary image to get actual dimensions\r\n        const img = new Image();\r\n        img.src = businessSettings.businessLogo;\r\n\r\n        // Wait for image to load to get dimensions\r\n        await new Promise((resolve, reject) => {\r\n          img.onload = resolve;\r\n          img.onerror = reject;\r\n          // If already loaded (cached), resolve immediately\r\n          if (img.complete) resolve(img);\r\n        });\r\n\r\n        // Calculate proper dimensions maintaining aspect ratio\r\n        const maxLogoWidth = 40;\r\n        const maxLogoHeight = 20;\r\n        const aspectRatio = img.width / img.height;\r\n\r\n        let logoWidth = maxLogoWidth;\r\n        let logoHeight = logoWidth / aspectRatio;\r\n\r\n        // If height exceeds max, scale down based on height\r\n        if (logoHeight > maxLogoHeight) {\r\n          logoHeight = maxLogoHeight;\r\n          logoWidth = logoHeight * aspectRatio;\r\n        }\r\n\r\n        // Add logo on the left\r\n        doc.addImage(businessSettings.businessLogo, 'JPEG', margin, yPosition, logoWidth, logoHeight);\r\n      } catch (error) {\r\n        console.error('Error adding business logo:', error);\r\n      }\r\n    }\r\n\r\n    // Business Details on the right with right alignment\r\n    const rightMargin = pageWidth - margin;\r\n    doc.setFontSize(16);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(businessSettings.businessName || 'Business Name', rightMargin, yPosition + 5, { align: 'right' });\r\n\r\n    // Add spacing between business name and details\r\n    yPosition += 12;\r\n\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n\r\n    if (businessSettings.businessAddress) {\r\n      const addressLines = doc.splitTextToSize(businessSettings.businessAddress, 80);\r\n      addressLines.forEach((line: string, index: number) => {\r\n        doc.text(line, rightMargin, yPosition + (index * 4), { align: 'right' });\r\n      });\r\n      yPosition += (addressLines.length * 4) - 4;\r\n    }\r\n\r\n    if (businessSettings.businessPhone) {\r\n      yPosition += 4;\r\n      doc.text(`Phone: ${businessSettings.businessPhone}`, rightMargin, yPosition, { align: 'right' });\r\n    }\r\n\r\n    if (businessSettings.businessEmail) {\r\n      yPosition += 4;\r\n      doc.text(`Email: ${businessSettings.businessEmail}`, rightMargin, yPosition, { align: 'right' });\r\n    }\r\n\r\n    yPosition += 8;\r\n\r\n    // Horizontal line under the header\r\n    doc.setLineWidth(0.5);\r\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\r\n    yPosition += 15;\r\n\r\n    // Date\r\n    checkPageBreak(15);\r\n    doc.setFontSize(11);\r\n    const currentDate = format(new Date(), 'MMMM d, yyyy');\r\n    doc.text(`Date: ${currentDate}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Customer Address Block\r\n    checkPageBreak(25);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(noticeData.customer.fullName || 'Valued Customer', margin, yPosition);\r\n    yPosition += 5;\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    if (noticeData.customer.location) {\r\n      yPosition = addWrappedText(noticeData.customer.location, margin, yPosition, pageWidth - 2 * margin, 11);\r\n      yPosition += 2;\r\n    }\r\n\r\n    if (noticeData.customer.email) {\r\n      checkPageBreak(8);\r\n      doc.text(noticeData.customer.email, margin, yPosition);\r\n      yPosition += 5;\r\n    }\r\n\r\n    yPosition += 8;\r\n\r\n    // Subject Line\r\n    if (noticeData.subject) {\r\n      checkPageBreak(15);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.setFontSize(12);\r\n      yPosition = addWrappedText(`Re: ${noticeData.subject}`, margin, yPosition, pageWidth - 2 * margin, 12);\r\n      yPosition += 6;\r\n    }\r\n\r\n    // Salutation\r\n    checkPageBreak(15);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(11);\r\n    doc.text(`Dear ${noticeData.customer.fullName || 'Valued Customer'},`, margin, yPosition);\r\n    yPosition += 8;\r\n\r\n    // Main Content - Split by paragraphs and handle page breaks\r\n    if (noticeData.content) {\r\n      const paragraphs = noticeData.content.split('\\n\\n').filter(p => p.trim() !== '');\r\n\r\n      paragraphs.forEach((paragraph, index) => {\r\n        // Estimate space needed for this paragraph\r\n        const estimatedLines = Math.ceil(paragraph.length / 80); // Rough estimate\r\n        const estimatedSpace = estimatedLines * 5 + 10; // Line height + some padding\r\n\r\n        checkPageBreak(estimatedSpace);\r\n\r\n        yPosition = addWrappedText(paragraph.trim(), margin, yPosition, pageWidth - 2 * margin, 11);\r\n\r\n        // Add smaller gap between paragraphs (only if not the last paragraph)\r\n        if (index < paragraphs.length - 1) {\r\n          yPosition += 6;\r\n        }\r\n      });\r\n\r\n      yPosition += 10;\r\n    }\r\n\r\n    // Closing and signature section\r\n    checkPageBreak(60); // Reserve space for closing, signature, and sender info\r\n\r\n    doc.text('Yours faithfully,', margin, yPosition);\r\n    yPosition += 20; // Space for signature\r\n\r\n    // Signature (if available from business settings)\r\n    if (businessSettings.signature) {\r\n      try {\r\n        // Create a temporary image to get actual dimensions for signature\r\n        const sigImg = new Image();\r\n        sigImg.src = businessSettings.signature;\r\n\r\n        // Wait for signature image to load to get dimensions\r\n        await new Promise((resolve, reject) => {\r\n          sigImg.onload = resolve;\r\n          sigImg.onerror = reject;\r\n          // If already loaded (cached), resolve immediately\r\n          if (sigImg.complete) resolve(sigImg);\r\n        });\r\n\r\n        // Calculate proper dimensions maintaining aspect ratio for signature\r\n        const maxSigWidth = 50;\r\n        const maxSigHeight = 25;\r\n        const sigAspectRatio = sigImg.width / sigImg.height;\r\n\r\n        let signatureWidth = maxSigWidth;\r\n        let signatureHeight = signatureWidth / sigAspectRatio;\r\n\r\n        // If height exceeds max, scale down based on height\r\n        if (signatureHeight > maxSigHeight) {\r\n          signatureHeight = maxSigHeight;\r\n          signatureWidth = signatureHeight * sigAspectRatio;\r\n        }\r\n\r\n        // Add signature\r\n        doc.addImage(businessSettings.signature, 'JPEG', margin, yPosition, signatureWidth, signatureHeight);\r\n        yPosition += signatureHeight + 5;\r\n      } catch (error) {\r\n        console.error('Error adding signature:', error);\r\n        yPosition += 15; // Add space even if signature fails\r\n      }\r\n    } else {\r\n      yPosition += 15; // Add space for manual signature\r\n    }\r\n\r\n    // Sender name and business\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.setFontSize(11);\r\n    const senderName = noticeData.senderName || businessSettings.businessName || 'Management';\r\n    doc.text(senderName, margin, yPosition);\r\n    yPosition += 5;\r\n\r\n    if (businessSettings.businessName && noticeData.senderName) {\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(businessSettings.businessName, margin, yPosition);\r\n    }\r\n\r\n    // Add watermark to the final page\r\n    addWatermark();\r\n\r\n    // Generate filename\r\n    const customerName = noticeData.customer.fullName?.replace(/[^a-zA-Z0-9]/g, '_') || 'Customer';\r\n    const dateStr = format(new Date(), 'yyyy-MM-dd');\r\n    const filename = `Notice_${customerName}_${dateStr}.pdf`;\r\n\r\n    // Save the PDF\r\n    doc.save(filename);\r\n\r\n  } catch (error) {\r\n    console.error('Error generating notice PDF:', error);\r\n    throw new Error('Failed to generate notice PDF. Please try again.');\r\n  }\r\n};\r\n","\r\n/**\r\n * Transforms casual text into formal business language\r\n */\r\nexport const formalizeText = (text: string): string => {\r\n  if (!text || text.trim() === '') return text;\r\n\r\n  // Common casual to formal replacements\r\n  const replacements: Record<string, string> = {\r\n    // Contractions\r\n    \"can't\": \"cannot\",\r\n    \"won't\": \"will not\",\r\n    \"don't\": \"do not\",\r\n    \"didn't\": \"did not\",\r\n    \"haven't\": \"have not\",\r\n    \"hasn't\": \"has not\",\r\n    \"isn't\": \"is not\",\r\n    \"aren't\": \"are not\",\r\n    \"wasn't\": \"was not\",\r\n    \"weren't\": \"were not\",\r\n    \"I'm\": \"I am\",\r\n    \"you're\": \"you are\",\r\n    \"we're\": \"we are\",\r\n    \"they're\": \"they are\",\r\n    \"it's\": \"it is\",\r\n    \"that's\": \"that is\",\r\n    \"here's\": \"here is\",\r\n    \"there's\": \"there is\",\r\n    \"we've\": \"we have\",\r\n    \"they've\": \"they have\",\r\n    \"I've\": \"I have\",\r\n    \"you've\": \"you have\",\r\n    \r\n    // Casual words to formal\r\n    \"ok\": \"acceptable\",\r\n    \"okay\": \"acceptable\",\r\n    \"thanks\": \"thank you\",\r\n    \"hi\": \"greetings\",\r\n    \"bye\": \"goodbye\",\r\n    \"asap\": \"as soon as possible\",\r\n    \"fyi\": \"for your information\",\r\n    \"btw\": \"incidentally\",\r\n    \"etc\": \"and so forth\",\r\n    \"gonna\": \"going to\",\r\n    \"wanna\": \"want to\",\r\n    \"gotta\": \"have to\",\r\n    \"kinda\": \"somewhat\",\r\n    \"sorta\": \"somewhat\",\r\n    \r\n    // Business improvements\r\n    \"get\": \"receive\",\r\n    \"got\": \"received\",\r\n    \"give\": \"provide\",\r\n    \"gave\": \"provided\",\r\n    \"ask\": \"request\",\r\n    \"asked\": \"requested\",\r\n    \"tell\": \"inform\",\r\n    \"told\": \"informed\",\r\n    \"show\": \"demonstrate\",\r\n    \"showed\": \"demonstrated\",\r\n    \"help\": \"assist\",\r\n    \"helped\": \"assisted\",\r\n    \"fix\": \"resolve\",\r\n    \"fixed\": \"resolved\",\r\n    \"buy\": \"purchase\",\r\n    \"bought\": \"purchased\",\r\n    \"sell\": \"offer\",\r\n    \"sold\": \"provided\"\r\n  };\r\n\r\n  let formalizedText = text;\r\n\r\n  // Apply replacements (case-insensitive for whole words only)\r\n  Object.entries(replacements).forEach(([casual, formal]) => {\r\n    const regex = new RegExp(`\\\\b${casual}\\\\b`, 'gi');\r\n    formalizedText = formalizedText.replace(regex, formal);\r\n  });\r\n\r\n  // Capitalize first letter of sentences\r\n  formalizedText = formalizedText.replace(/(^|\\. )([a-z])/g, (match, prefix, letter) => {\r\n    return prefix + letter.toUpperCase();\r\n  });\r\n\r\n  // Ensure proper sentence ending\r\n  formalizedText = formalizedText.trim();\r\n  if (!formalizedText.endsWith('.') && !formalizedText.endsWith('!') && !formalizedText.endsWith('?')) {\r\n    formalizedText += '.';\r\n  }\r\n\r\n  return formalizedText;\r\n};\r\n\r\n/**\r\n * Enhances text with more professional language and structure\r\n */\r\nexport const enhanceForBusiness = (text: string): string => {\r\n  if (!text || text.trim() === '') return text;\r\n\r\n  let enhanced = formalizeText(text);\r\n\r\n  // Add professional opening phrases if the text seems too direct\r\n  if (!enhanced.toLowerCase().includes('we are') && !enhanced.toLowerCase().includes('we would like') && !enhanced.toLowerCase().includes('please')) {\r\n    if (enhanced.toLowerCase().startsWith('our') || enhanced.toLowerCase().startsWith('the')) {\r\n      enhanced = `We would like to inform you that ${enhanced.charAt(0).toLowerCase() + enhanced.slice(1)}`;\r\n    }\r\n  }\r\n\r\n  // Ensure polite language\r\n  if (enhanced.toLowerCase().includes('you must') || enhanced.toLowerCase().includes('you have to')) {\r\n    enhanced = enhanced.replace(/you must/gi, 'we kindly request that you');\r\n    enhanced = enhanced.replace(/you have to/gi, 'we would appreciate if you could');\r\n  }\r\n\r\n  return enhanced;\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name WandSparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNjQgMy42NC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzIiIC8+CiAgPHBhdGggZD0ibTE0IDcgMyAzIiAvPgogIDxwYXRoIGQ9Ik01IDZ2NCIgLz4KICA8cGF0aCBkPSJNMTkgMTR2NCIgLz4KICA8cGF0aCBkPSJNMTAgMnYyIiAvPgogIDxwYXRoIGQ9Ik03IDhIMyIgLz4KICA8cGF0aCBkPSJNMjEgMTZoLTQiIC8+CiAgPHBhdGggZD0iTTExIDNIOSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/wand-sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst WandSparkles = createLucideIcon('WandSparkles', [\n  [\n    'path',\n    {\n      d: 'm21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72',\n      key: 'ul74o6',\n    },\n  ],\n  ['path', { d: 'm14 7 3 3', key: '1r5n42' }],\n  ['path', { d: 'M5 6v4', key: 'ilb8ba' }],\n  ['path', { d: 'M19 14v4', key: 'blhpug' }],\n  ['path', { d: 'M10 2v2', key: '7u0qdc' }],\n  ['path', { d: 'M7 8H3', key: 'zfb6yr' }],\n  ['path', { d: 'M21 16h-4', key: '1cnmox' }],\n  ['path', { d: 'M11 3H9', key: '1obp7u' }],\n]);\n\nexport default WandSparkles;\n","\r\nexport interface NoticeTemplate {\r\n  id: string;\r\n  name: string;\r\n  subject: string;\r\n  content: string;\r\n  category: 'payment' | 'policy' | 'general' | 'announcement' | 'gratitude';\r\n}\r\n\r\nexport const noticeTemplates: NoticeTemplate[] = [\r\n  {\r\n    id: 'payment_reminder',\r\n    name: 'Payment Reminder',\r\n    subject: 'Payment Reminder - Account Status',\r\n    content: `We hope this letter finds you well. We are writing to kindly remind you about your outstanding payment.\r\n\r\nWe appreciate your prompt attention to this matter and thank you for your continued business.`,\r\n    category: 'payment'\r\n  },\r\n  {\r\n    id: 'policy_update',\r\n    name: 'Policy Update',\r\n    subject: 'Important Update to Our Business Policies',\r\n    content: `We are writing to inform you of important updates to our business policies that may affect your account.\r\n\r\nThese changes will take effect shortly. We appreciate your understanding and continued partnership.`,\r\n    category: 'policy'\r\n  },\r\n  {\r\n    id: 'thank_you',\r\n    name: 'Thank You Letter',\r\n    subject: 'Thank You for Your Business',\r\n    content: `We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.\r\n\r\nWe look forward to serving you for many years to come.`,\r\n    category: 'gratitude'\r\n  },\r\n  {\r\n    id: 'service_announcement',\r\n    name: 'Service Announcement',\r\n    subject: 'Important Service Update',\r\n    content: `We are excited to share some important updates about our services that will enhance your experience with us.\r\n\r\nWe believe these improvements will provide you with even better service and value.`,\r\n    category: 'announcement'\r\n  },\r\n  {\r\n    id: 'account_update',\r\n    name: 'Account Status Update',\r\n    subject: 'Account Status Update',\r\n    content: `We are writing to provide you with an important update regarding your account with us.\r\n\r\nIf you have any questions or concerns, please don't hesitate to contact us.`,\r\n    category: 'general'\r\n  },\r\n  {\r\n    id: 'general_notice',\r\n    name: 'General Business Communication',\r\n    subject: 'Business Communication',\r\n    content: `We hope this message finds you well. We wanted to reach out to you regarding an important matter.\r\n\r\nThank you for your attention to this matter.`,\r\n    category: 'general'\r\n  }\r\n];\r\n\r\nexport const getTemplateById = (id: string): NoticeTemplate | undefined => {\r\n  return noticeTemplates.find(template => template.id === id);\r\n};\r\n\r\nexport const getTemplatesByCategory = (category: string): NoticeTemplate[] => {\r\n  if (category === 'all') return noticeTemplates;\r\n  return noticeTemplates.filter(template => template.category === category);\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { FileText, Wand2, Download, AlertCircle, MessageSquare } from 'lucide-react';\r\nimport { Customer, Sale } from '@/types';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { generateNoticePDF } from '@/utils/generateNoticePDF';\r\nimport { formalizeText, enhanceForBusiness } from '@/utils/formalizeText';\r\nimport { NoticeTemplate, getTemplateById } from '@/utils/noticeTemplates';\r\nimport { openSMSApp, formatMessageForSMS, canSendSMS, openWhatsApp } from '@/utils/smsUtils';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { MessageCircle } from 'lucide-react';\r\nimport NoticeTemplateSelector from './NoticeTemplateSelector';\r\n\r\ninterface BusinessNoticeGeneratorProps {\r\n  customer: Customer;\r\n  open: boolean;\r\n  onClose: () => void;\r\n  defaultTemplate?: string;\r\n  sale?: Sale;\r\n}\r\n\r\nconst BusinessNoticeGenerator: React.FC<BusinessNoticeGeneratorProps> = ({\r\n  customer,\r\n  open,\r\n  onClose,\r\n  defaultTemplate,\r\n  sale\r\n}) => {\r\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('none');\r\n  const [subject, setSubject] = useState<string>('');\r\n  const [message, setMessage] = useState<string>('');\r\n  const [senderName, setSenderName] = useState<string>('');\r\n  const [isGenerating, setIsGenerating] = useState<boolean>(false);\r\n  const [showPreview, setShowPreview] = useState<boolean>(false);\r\n\r\n  const { settings } = useBusinessSettings();\r\n  const { toast } = useToast();\r\n  const isMobile = useIsMobile();\r\n\r\n  // Load default template when dialog opens\r\n  useEffect(() => {\r\n    if (open && defaultTemplate) {\r\n      const template = getTemplateById(defaultTemplate);\r\n      if (template) {\r\n        setSelectedTemplate(defaultTemplate);\r\n        setSubject(template.subject);\r\n\r\n        // If it's a thank you template and we have sale data, enhance the content\r\n        if (defaultTemplate === 'thank_you' && sale) {\r\n          const saleTotal = sale.items.reduce((total, item) => {\r\n            const itemSubtotal = item.price * item.quantity;\r\n            const discountAmount = item.discountType === 'amount'\r\n              ? (item.discountAmount || 0)\r\n              : (itemSubtotal * (item.discountPercentage || 0)) / 100;\r\n            return total + (itemSubtotal - discountAmount);\r\n          }, 0);\r\n\r\n          // Add tax if applicable\r\n          const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n          const totalWithTax = saleTotal + taxAmount;\r\n\r\n          // Create items list\r\n          const itemsList = sale.items.map(item =>\r\n            `â€¢ ${item.description} (Qty: ${item.quantity})`\r\n          ).join('\\n');\r\n\r\n          const enhancedContent = `${template.content}\r\n\r\nReceipt Number: ${sale.receiptNumber}\r\n\r\nItems Purchased:\r\n${itemsList}\r\n\r\nTotal Amount: ${settings.currency} ${totalWithTax.toFixed(2)}\r\n\r\nIn case of any inquiries please call ${settings.businessPhone && settings.businessPhone !== '(123) 456-7890' ? settings.businessPhone : 'our office'}.\r\n\r\nWe appreciate your business and look forward to serving you again.`;\r\n\r\n          setMessage(enhancedContent);\r\n        } else {\r\n          setMessage(template.content);\r\n        }\r\n      }\r\n    }\r\n  }, [open, defaultTemplate, sale, settings.currency, settings.businessPhone]);\r\n\r\n  const handleTemplateSelect = (template: NoticeTemplate) => {\r\n    setSubject(template.subject);\r\n    setMessage(template.content);\r\n  };\r\n\r\n  const handleMakeFormal = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"No message to enhance\",\r\n        description: \"Please enter your message first.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const enhanced = enhanceForBusiness(message);\r\n      setMessage(enhanced);\r\n\r\n      toast({\r\n        title: \"Message enhanced!\",\r\n        description: \"Your message has been made more formal and professional.\",\r\n      });\r\n    } catch (error) {\r\n      console.error('Error enhancing message:', error);\r\n      toast({\r\n        title: \"Enhancement failed\",\r\n        description: \"Could not enhance the message. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleGeneratePDF = async () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before generating the notice.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n\r\n    try {\r\n      await generateNoticePDF(\r\n        {\r\n          customer,\r\n          subject: subject || 'Business Notice',\r\n          content: message,\r\n          senderName: senderName || undefined\r\n        },\r\n        settings\r\n      );\r\n\r\n      toast({\r\n        title: \"Notice generated successfully!\",\r\n        description: \"Your professional business notice has been downloaded as a PDF.\",\r\n      });\r\n\r\n      // Reset form after successful generation\r\n      setMessage('');\r\n      setSubject('');\r\n      setSelectedTemplate('none');\r\n      setSenderName('');\r\n      onClose();\r\n\r\n    } catch (error) {\r\n      console.error('Error generating notice:', error);\r\n      toast({\r\n        title: \"Generation failed\",\r\n        description: \"Failed to generate the notice. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMessage('');\r\n    setSubject('');\r\n    setSelectedTemplate('none');\r\n    setSenderName('');\r\n    setShowPreview(false);\r\n    onClose();\r\n  };\r\n\r\n  const handleSendSMS = () => {\r\n    if (!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...') {\r\n      toast({\r\n        title: \"Message required\",\r\n        description: \"Please enter a message before sending SMS.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!canSendSMS(customer)) {\r\n      toast({\r\n        title: \"Phone number required\",\r\n        description: \"Customer phone number is not available.\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Format the message for SMS\r\n      const fullMessage = `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`;\r\n\r\n      const formattedMessage = formatMessageForSMS(fullMessage, settings.businessName);\r\n\r\n      openSMSApp({\r\n        phoneNumber: customer.phoneNumber!,\r\n        message: formattedMessage\r\n      });\r\n\r\n      toast({\r\n        title: \"SMS app opened\",\r\n        description: \"Your message has been prepared in the SMS app.\",\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error sending SMS:', error);\r\n      toast({\r\n        title: \"SMS failed\",\r\n        description: \"Failed to open SMS app. Please try again.\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const showSMSOption = isMobile && canSendSMS(customer);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-base sm:text-lg\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            Send Notice to {customer.fullName}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2\">\r\n          {/* Compose Section */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h3 className=\"text-base sm:text-lg font-semibold mb-3\">Compose Your Notice</h3>\r\n\r\n              {/* Template Selector */}\r\n              <NoticeTemplateSelector\r\n                selectedTemplate={selectedTemplate}\r\n                onTemplateChange={setSelectedTemplate}\r\n                onTemplateSelect={handleTemplateSelect}\r\n              />\r\n            </div>\r\n\r\n            {/* Subject */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"subject\" className=\"text-sm\">Subject Line</Label>\r\n              <Input\r\n                id=\"subject\"\r\n                value={subject}\r\n                onChange={(e) => setSubject(e.target.value)}\r\n                placeholder=\"Enter the subject of your notice\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label htmlFor=\"message\" className=\"text-sm\">Your Message</Label>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleMakeFormal}\r\n                  className=\"text-[10px] h-7 px-2\"\r\n                  disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                >\r\n                  <Wand2 className=\"h-3 w-3 mr-1\" />\r\n                  Make Formal\r\n                </Button>\r\n              </div>\r\n              <Textarea\r\n                id=\"message\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"What do you want to inform the customer about?\"\r\n                rows={isMobile ? 6 : 8}\r\n                className=\"resize-none text-sm\"\r\n              />\r\n              <p className=\"text-[10px] text-gray-500 leading-tight\">\r\n                {selectedTemplate !== 'none' ? 'Template content loaded. Edit as needed.' : 'Write in your own words - we\\'ll format it professionally.'}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Sender Name */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"sender\" className=\"text-sm\">Sender Name (Optional)</Label>\r\n              <Input\r\n                id=\"sender\"\r\n                value={senderName}\r\n                onChange={(e) => setSenderName(e.target.value)}\r\n                placeholder=\"Your name (defaults to business name)\"\r\n                className=\"text-sm h-9\"\r\n              />\r\n            </div>\r\n\r\n            {/* Business Settings Alert */}\r\n            {(!settings.businessLogo || !settings.signature) && (\r\n              <Card className=\"border-amber-200 bg-amber-50\">\r\n                <CardContent className=\"p-3\">\r\n                  <div className=\"flex items-start gap-2\">\r\n                    <AlertCircle className=\"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                    <div className=\"text-[11px] sm:text-xs\">\r\n                      <p className=\"text-amber-800 font-medium\">Enhance your notices</p>\r\n                      <p className=\"text-amber-700\">\r\n                        {!settings.businessLogo && 'Add logo '}\r\n                        {(!settings.businessLogo && !settings.signature) && 'and '}\r\n                        {!settings.signature && 'upload signature '}\r\n                        in settings for better notices.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n\r\n          {/* Preview Section */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold\">Preview</h3>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setShowPreview(!showPreview)}\r\n                className=\"h-8 text-xs\"\r\n              >\r\n                {showPreview ? 'Hide' : 'Show'} Preview\r\n              </Button>\r\n            </div>\r\n\r\n            {showPreview && (\r\n              <Card className=\"border-gray-200 shadow-sm\">\r\n                <CardContent className=\"p-4 overflow-x-hidden\">\r\n                  <div className=\"space-y-3 text-[11px] sm:text-sm\">\r\n                    {/* Header */}\r\n                    <div className=\"border-b pb-2\">\r\n                      <div className=\"font-bold text-sm sm:text-base\">{settings.businessName || 'Your Business'}</div>\r\n                      <div className=\"text-gray-600 space-y-0.5\">\r\n                        {settings.businessAddress && <div className=\"truncate\">{settings.businessAddress}</div>}\r\n                        {settings.businessPhone && <div>Phone: {settings.businessPhone}</div>}\r\n                        {settings.businessEmail && <div className=\"truncate\">Email: {settings.businessEmail}</div>}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Date and Customer */}\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                      <div>Date: {new Date().toLocaleDateString()}</div>\r\n                      <div className=\"font-medium truncate\">{customer.fullName}</div>\r\n                    </div>\r\n\r\n                    {/* Subject */}\r\n                    {subject && (\r\n                      <div className=\"bg-gray-50 p-2 rounded\">\r\n                        <strong>Re: {subject}</strong>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Content */}\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"italic\">Dear {customer.fullName},</div>\r\n                      <div className=\"whitespace-pre-wrap leading-relaxed text-gray-800\">\r\n                        {message || 'Your message will appear here...'}\r\n                      </div>\r\n                      <div>Yours faithfully,</div>\r\n                      <div className=\"mt-4 font-bold\">\r\n                        {senderName || settings.businessName || 'Management'}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions - Responsive Footer */}\r\n        <div className=\"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t mt-2\">\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            <Button variant=\"outline\" onClick={handleClose} className=\"flex-1 sm:flex-none h-10 text-sm\">\r\n              Cancel\r\n            </Button>\r\n            {canSendSMS(customer) && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  openWhatsApp({\r\n                    phoneNumber: customer.phoneNumber!,\r\n                    message: `${subject ? subject + '\\n\\n' : ''}Dear ${customer.fullName},\\n\\n${message}\\n\\nYours faithfully,\\n${senderName || settings.businessName || 'Management'}`\r\n                  });\r\n                  toast({\r\n                    title: \"WhatsApp opened\",\r\n                    description: \"Your message has been prepared in WhatsApp.\",\r\n                  });\r\n                }}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-green-600 hover:text-green-700 hover:bg-green-50 h-10 text-sm\"\r\n              >\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n                WhatsApp\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex gap-2 w-full sm:w-auto\">\r\n            {showSMSOption && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleSendSMS}\r\n                disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...'}\r\n                className=\"flex-1 sm:flex-none gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-10 text-sm\"\r\n              >\r\n                <MessageSquare className=\"h-4 w-4\" />\r\n                SMS\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={handleGeneratePDF}\r\n              disabled={!message.trim() || message === 'Write your message here...' || message === 'Write your specific message here...' || isGenerating}\r\n              className=\"flex-1 sm:flex-none gap-2 h-10 text-sm\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n              {isGenerating ? 'PDF...' : 'PDF'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default BusinessNoticeGenerator;\r\n","\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport { Customer } from '@/types';\r\nimport { Sale } from '@/types';\r\nimport { BusinessSettings } from '@/types';\r\nimport { format } from 'date-fns';\r\nimport { formatNumber } from '@/lib/utils';\r\n// Note: installment_payments table logic is being deprecated/removed in this migration step\r\n// or handled via general finance/sale actions if implemented.\r\n\r\nexport const generatePaymentReminderPDF = async (\r\n  customer: Customer,\r\n  unpaidSales: Sale[],\r\n  totalAmountDue: number,\r\n  settings: BusinessSettings,\r\n  customMessage?: string,\r\n  outputType: 'save' | 'blob' | 'dataurl' = 'save'\r\n): Promise<string | Blob | void> => {\r\n  try {\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    const margin = 20;\r\n\r\n    // Function to add watermark to current page\r\n    const addWatermark = () => {\r\n      doc.setFontSize(8);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.setTextColor(150, 150, 150); // Light gray color\r\n      doc.text('Created By Gonza Systems', pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n      doc.setTextColor(0, 0, 0); // Reset to black\r\n    };\r\n\r\n    // Header\r\n    doc.setFontSize(20);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('PAYMENT REMINDER NOTICE', pageWidth / 2, 30, { align: 'center' });\r\n\r\n    // Business details\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'normal');\r\n    let yPos = 50;\r\n\r\n    doc.text(settings.businessName, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(settings.businessAddress, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(`Phone: ${settings.businessPhone}`, margin, yPos);\r\n    yPos += 6;\r\n    doc.text(`Email: ${settings.businessEmail}`, margin, yPos);\r\n    yPos += 15;\r\n\r\n    // Date and customer info\r\n    doc.text(`Date: ${format(new Date(), 'MMMM d, yyyy')}`, pageWidth - margin - 60, 50, { align: 'left' });\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('TO:', margin, yPos);\r\n    yPos += 8;\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(customer.fullName, margin, yPos);\r\n    yPos += 6;\r\n\r\n    if (customer.phoneNumber) {\r\n      doc.text(`Phone: ${customer.phoneNumber}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    if (customer.email) {\r\n      doc.text(`Email: ${customer.email}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    if (customer.location) {\r\n      doc.text(`Address: ${customer.location}`, margin, yPos);\r\n      yPos += 6;\r\n    }\r\n\r\n    yPos += 15;\r\n\r\n    // Reminder message\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Dear ${customer.fullName},`, margin, yPos);\r\n    yPos += 8;\r\n\r\n    // Use custom message if provided, otherwise use default\r\n    const reminderText = customMessage || 'Our records show that you have pending payments for the following items purchased on credit. We kindly request you to complete payment at your earliest convenience.\\n\\nPlease reach out to us if you need any assistance or clarification.';\r\n\r\n    const splitText = doc.splitTextToSize(reminderText, pageWidth - 2 * margin);\r\n    doc.text(splitText, margin, yPos);\r\n    yPos += splitText.length * 6 + 10;\r\n\r\n    const tableHeaders = ['Invoice #', 'Product Name', 'Qty', 'Price', 'Total', 'Sale Date', 'Sale Total'];\r\n\r\n    // Prepare table data\r\n    const allItems = unpaidSales.flatMap(sale => {\r\n      const saleTotal = sale.items.reduce((itemSum, item) => itemSum + (item.price * item.quantity), 0);\r\n      const taxAmount = saleTotal * ((sale.taxRate || 0) / 100);\r\n      const totalWithTax = saleTotal + taxAmount;\r\n\r\n      return sale.items.map(item => [\r\n        sale.receiptNumber,\r\n        item.description,\r\n        item.quantity.toString(),\r\n        `${settings.currency} ${formatNumber(item.price)}`,\r\n        `${settings.currency} ${formatNumber(item.price * item.quantity)}`,\r\n        format(sale.date, 'MMM d, yyyy'),\r\n        `${settings.currency} ${formatNumber(totalWithTax)}`\r\n      ]);\r\n    });\r\n\r\n    // Add total row\r\n    allItems.push([\r\n      '', '', '', '', 'TOTAL OUTSTANDING:', `${settings.currency} ${formatNumber(totalAmountDue)}`, ''\r\n    ]);\r\n\r\n    // Create table using autoTable\r\n    autoTable(doc, {\r\n      startY: yPos,\r\n      head: [tableHeaders],\r\n      body: allItems,\r\n      theme: 'grid',\r\n      headStyles: {\r\n        fillColor: [255, 145, 77], // Orange color\r\n        textColor: 255,\r\n        fontStyle: 'bold'\r\n      },\r\n      bodyStyles: {\r\n        fontSize: 10\r\n      },\r\n      didParseCell: function (data: any) {\r\n        if (data.row.index === allItems.length - 1) {\r\n          data.cell.styles.fillColor = [255, 200, 150];\r\n          data.cell.styles.fontStyle = 'bold';\r\n        }\r\n      },\r\n      margin: { left: margin, right: margin }\r\n    });\r\n\r\n    // Footer message\r\n    const finalY = (doc as any).lastAutoTable.finalY + 20;\r\n\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Thank you for your continued support.', margin, finalY);\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(10);\r\n    doc.text(`${settings.businessName} - Payment Reminder`, margin, finalY + 15);\r\n\r\n    // Add watermark\r\n    addWatermark();\r\n\r\n    const fileName = `Payment_Reminder_${customer.fullName.replace(/\\s+/g, '_')}_${format(new Date(), 'yyyy-MM-dd')}.pdf`;\r\n\r\n    if (outputType === 'blob') {\r\n      return doc.output('blob');\r\n    } else if (outputType === 'dataurl') {\r\n      return doc.output('datauristring');\r\n    } else {\r\n      doc.save(fileName);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error generating payment reminder PDF:', error);\r\n    throw new Error('Failed to generate payment reminder PDF');\r\n  }\r\n};\r\n","\r\nimport React from 'react';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { NoticeTemplate, noticeTemplates } from '@/utils/noticeTemplates';\r\n\r\ninterface NoticeTemplateSelectorProps {\r\n  selectedTemplate: string;\r\n  onTemplateChange: (templateId: string) => void;\r\n  onTemplateSelect: (template: NoticeTemplate) => void;\r\n}\r\n\r\nconst NoticeTemplateSelector: React.FC<NoticeTemplateSelectorProps> = ({\r\n  selectedTemplate,\r\n  onTemplateChange,\r\n  onTemplateSelect\r\n}) => {\r\n  const handleTemplateChange = (templateId: string) => {\r\n    onTemplateChange(templateId);\r\n    if (templateId === 'none') {\r\n      // Clear template selection\r\n      return;\r\n    }\r\n    const template = noticeTemplates.find(t => t.id === templateId);\r\n    if (template) {\r\n      onTemplateSelect(template);\r\n    }\r\n  };\r\n\r\n  const getCategoryColor = (category: string) => {\r\n    const colors = {\r\n      payment: 'bg-red-50 text-red-700 border-red-200',\r\n      policy: 'bg-blue-50 text-blue-700 border-blue-200',\r\n      general: 'bg-gray-50 text-gray-700 border-gray-200',\r\n      announcement: 'bg-green-50 text-green-700 border-green-200',\r\n      gratitude: 'bg-purple-50 text-purple-700 border-purple-200'\r\n    };\r\n    return colors[category as keyof typeof colors] || colors.general;\r\n  };\r\n\r\n  // Type guard to ensure we have a valid array\r\n  const templates = Array.isArray(noticeTemplates) ? noticeTemplates : [];\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"text-sm font-medium text-gray-700\">\r\n        Choose a Template (Optional)\r\n      </label>\r\n      <Select value={selectedTemplate} onValueChange={handleTemplateChange}>\r\n        <SelectTrigger className=\"w-full\">\r\n          <SelectValue placeholder=\"Select a notice template or start from scratch\" />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"max-h-80\">\r\n          <SelectItem value=\"none\">Start from scratch</SelectItem>\r\n          {templates.length > 0 && templates.map((template) => (\r\n            <SelectItem key={template.id} value={template.id}>\r\n              <div className=\"flex items-center justify-between w-full\">\r\n                <span className=\"font-medium\">{template.name}</span>\r\n                <Badge \r\n                  variant=\"outline\" \r\n                  className={`ml-2 text-xs ${getCategoryColor(template.category)}`}\r\n                >\r\n                  {template.category}\r\n                </Badge>\r\n              </div>\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n      \r\n      {selectedTemplate && selectedTemplate !== 'none' && (\r\n        <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            <strong>Template selected:</strong> {templates.find(t => t.id === selectedTemplate)?.name}\r\n          </p>\r\n          <p className=\"text-xs text-blue-600 mt-1\">\r\n            The template content has been added to your message. You can edit it as needed.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoticeTemplateSelector;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { Drawer, DrawerContent, DrawerHeader, DrawerTitle, DrawerFooter, DrawerClose } from '@/components/ui/drawer';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useIsMobile } from '@/hooks/use-mobile';\r\nimport { Download, Printer, Share2, X, Loader2, MessageCircle } from 'lucide-react';\r\nimport { Sale, Customer, BusinessSettings } from '@/types';\r\nimport { generatePaymentReminderPDF } from '@/utils/generatePaymentReminderPDF';\r\nimport { useBusinessSettings } from '@/hooks/useBusinessSettings';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { openWhatsApp } from '@/utils/smsUtils';\r\n\r\ninterface PaymentReminderPreviewDialogProps {\r\n    isOpen: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    sale: Sale | null;\r\n    customer?: Customer | null;\r\n    unpaidSales?: Sale[];\r\n}\r\n\r\nconst PaymentReminderPreviewDialog: React.FC<PaymentReminderPreviewDialogProps> = ({\r\n    isOpen,\r\n    onOpenChange,\r\n    sale,\r\n    customer,\r\n    unpaidSales\r\n}) => {\r\n    const isMobile = useIsMobile();\r\n    const { settings, isLoading: settingsLoading } = useBusinessSettings();\r\n    const { toast } = useToast();\r\n    const [pdfUrl, setPdfUrl] = useState<string | null>(null);\r\n    const [pdfBlob, setPdfBlob] = useState<Blob | null>(null);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    // Prepare customer and sales data\r\n    const targetCustomer: Customer | null = customer || (sale ? {\r\n        id: 'placeholder',\r\n        fullName: sale.customerName,\r\n        phoneNumber: sale.customerContact,\r\n        email: null,\r\n        location: sale.customerAddress,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        loyaltyPoints: 0,\r\n        totalSpent: 0,\r\n        lastVisit: null,\r\n        categoryId: null,\r\n        birthday: null,\r\n        socialMedia: null,\r\n        gender: null,\r\n        tags: null,\r\n        notes: null\r\n    } as Customer : null);\r\n\r\n    const targetSales = unpaidSales || (sale ? [sale] : []);\r\n\r\n    // Calculate total amount due\r\n    const totalAmountDue = targetSales.reduce((sum, s) => {\r\n        const subtotal = s.items.reduce((itemSum, item) => itemSum + (item.price * item.quantity), 0);\r\n        const taxAmount = subtotal * ((s.taxRate || 0) / 100);\r\n        return sum + subtotal + taxAmount;\r\n    }, 0);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && targetCustomer && targetSales.length > 0 && settings) {\r\n            generatePreview();\r\n        } else if (!isOpen) {\r\n            if (pdfUrl) {\r\n                URL.revokeObjectURL(pdfUrl);\r\n                setPdfUrl(null);\r\n            }\r\n        }\r\n    }, [isOpen, settings]);\r\n\r\n    const generatePreview = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n\r\n        setIsGenerating(true);\r\n        try {\r\n            const blob = await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'blob'\r\n            ) as Blob;\r\n\r\n            const url = URL.createObjectURL(blob);\r\n            setPdfUrl(url);\r\n            setPdfBlob(blob);\r\n        } catch (error) {\r\n            console.error('Error generating preview:', error);\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to generate PDF preview.\",\r\n                variant: \"destructive\"\r\n            });\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async () => {\r\n        if (!targetCustomer || targetSales.length === 0 || !settings) return;\r\n        try {\r\n            await generatePaymentReminderPDF(\r\n                targetCustomer,\r\n                targetSales,\r\n                totalAmountDue,\r\n                settings,\r\n                undefined,\r\n                'save'\r\n            );\r\n        } catch (error) {\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to download PDF.\",\r\n                variant: \"destructive\"\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        if (pdfUrl) {\r\n            const printWindow = window.open(pdfUrl);\r\n            if (printWindow) {\r\n                printWindow.addEventListener('load', () => {\r\n                    printWindow.print();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        const fileName = `Payment_Reminder_${targetCustomer?.fullName.replace(/\\s+/g, '_') || 'Customer'}.pdf`;\r\n        const message = `Hello ${targetCustomer?.fullName || 'Customer'}, this is a payment reminder from ${settings?.businessName || 'our business'} regarding your outstanding balance of ${settings?.currency || ''} ${totalAmountDue.toLocaleString()}.`;\r\n\r\n        if (navigator.share && pdfBlob) {\r\n            try {\r\n                const file = new File([pdfBlob], fileName, { type: 'application/pdf' });\r\n\r\n                // Check if sharing files is supported\r\n                if (navigator.canShare && navigator.canShare({ files: [file] })) {\r\n                    await navigator.share({\r\n                        files: [file],\r\n                        title: 'Payment Reminder',\r\n                        text: message,\r\n                    });\r\n                    return; // Success\r\n                }\r\n\r\n                // If can't share files, try sharing just text\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else if (navigator.share) {\r\n            // No blob yet, just share text\r\n            try {\r\n                await navigator.share({\r\n                    title: 'Payment Reminder',\r\n                    text: message,\r\n                });\r\n            } catch (error) {\r\n                if ((error as Error).name !== 'AbortError') {\r\n                    console.error('Error sharing:', error);\r\n                }\r\n            }\r\n        } else {\r\n            // Fallback: copy to clipboard\r\n            try {\r\n                await navigator.clipboard.writeText(message);\r\n                toast({\r\n                    title: \"Copied to clipboard\",\r\n                    description: \"Payment reminder summary copied to clipboard.\",\r\n                });\r\n            } catch (err) {\r\n                toast({\r\n                    title: \"Share failed\",\r\n                    description: \"Could not share or copy the message.\",\r\n                    variant: \"destructive\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const Content = () => (\r\n        <div className=\"flex flex-col h-full space-y-4\">\r\n            <div className=\"flex flex-wrap gap-2 justify-center py-2 order-first\">\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleShare}\r\n                    className=\"flex-1 min-w-[120px] bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100\"\r\n                >\r\n                    <Share2 className=\"h-4 w-4 mr-2 text-blue-600\" />\r\n                    Share\r\n                </Button>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    onClick={handlePrint}\r\n                    className=\"flex-1 min-w-[120px]\"\r\n                    disabled={!pdfUrl}\r\n                >\r\n                    <Printer className=\"h-4 w-4 mr-2\" />\r\n                    Print\r\n                </Button>\r\n                <Button\r\n                    onClick={handleDownload}\r\n                    className=\"flex-1 min-w-[120px] bg-orange-500 hover:bg-orange-600\"\r\n                >\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Download\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 bg-gray-100 rounded-lg overflow-hidden min-h-[600px] relative\">\r\n                {isGenerating ? (\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center space-y-4 bg-white/50 backdrop-blur-sm\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-orange-500\" />\r\n                        <p className=\"text-sm font-medium text-gray-600\">Generating preview...</p>\r\n                    </div>\r\n                ) : pdfUrl ? (\r\n                    <iframe\r\n                        src={pdfUrl}\r\n                        className=\"w-full h-full min-h-[600px] border-none\"\r\n                        title=\"Payment Reminder Preview\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <p className=\"text-sm text-gray-500\">Preview not available.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (isMobile) {\r\n        return (\r\n            <Drawer open={isOpen} onOpenChange={onOpenChange}>\r\n                <DrawerContent className=\"max-h-[95vh]\">\r\n                    <DrawerHeader className=\"border-b pb-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <DrawerTitle>Payment Reminder Preview</DrawerTitle>\r\n                            <DrawerClose asChild>\r\n                                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\r\n                                    <X className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </DrawerClose>\r\n                        </div>\r\n                    </DrawerHeader>\r\n                    <div className=\"px-4 py-4 overflow-y-auto\">\r\n                        <Content />\r\n                    </div>\r\n                    <DrawerFooter className=\"pt-2 border-t\">\r\n                        <Button variant=\"outline\" onClick={() => onOpenChange(false)}>Close</Button>\r\n                    </DrawerFooter>\r\n                </DrawerContent>\r\n            </Drawer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl max-h-[90vh] flex flex-col p-0 overflow-hidden\">\r\n                <DialogHeader className=\"px-6 py-4 border-b\">\r\n                    <DialogTitle>Payment Reminder Preview</DialogTitle>\r\n                </DialogHeader>\r\n                <div className=\"flex-1 overflow-y-auto p-6 bg-gray-50/50\">\r\n                    <Content />\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default PaymentReminderPreviewDialog;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNy45IDIwQTkgOSAwIDEgMCA0IDE2LjFMMiAyMloiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/message-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageCircle = createLucideIcon('MessageCircle', [\n  ['path', { d: 'M7.9 20A9 9 0 1 0 4 16.1L2 22Z', key: 'vv11sd' }],\n]);\n\nexport default MessageCircle;\n"],"names":[],"mappings":"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","ignoreList":[3,9]}