module.exports=[733451,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(665967),e=a.i(699570),f=a.i(866718),g=a.i(870430),h=a.i(580701),i=a.i(371844),j=a.i(823292),k=a.i(284415),l=a.i(866102),m=a.i(391956),n=a.i(267900),o=a.i(124987),p=a.i(963519),q=a.i(992258),r=a.i(941961),s=a.i(660246),t=a.i(633508),u=a.i(596221),v=a.i(167453),w=a.i(773320),x=a.i(732860);let y=(0,a.i(170106).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var z=a.i(220005);let A=[{value:"1-5",label:"1â€“5 employees"},{value:"6-20",label:"6â€“20 employees"},{value:"21-50",label:"21â€“50 employees"},{value:"50+",label:"50+ employees"}];a.s(["default",0,()=>{let a=(0,d.useNavigate)(),{user:B,signOut:C}=(0,m.useAuth)(),{onboarding:D,isLoading:E,isCompleted:F,saveOnboarding:G}=(0,k.useOnboarding)(),{settings:H,isLoading:I,updateSettings:J}=(0,l.useBusinessSettings)(),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!1),S=(0,c.useRef)(null),[T,U]=(0,c.useState)({businessName:"",businessAddress:"",businessPhone:"",businessEmail:B?.email||"",natureOfBusiness:"",businessSize:""}),[V,W]=(0,c.useState)({});(0,c.useEffect)(()=>{!E&&F&&(console.log("Onboarding: Already completed, redirecting to dashboard"),a("/",{replace:!0}))},[E,F,a]),(0,c.useEffect)(()=>{!I&&H&&(U(a=>({...a,businessName:H.businessName||a.businessName,businessAddress:H.businessAddress||a.businessAddress,businessPhone:H.businessPhone||a.businessPhone,businessEmail:H.businessEmail||a.businessEmail})),H.businessLogo&&N(H.businessLogo))},[I,H]);let X=(0,c.useCallback)(a=>{if(!a.type.startsWith("image/"))return void j.toast.error("Please upload an image file");if(a.size>5242880)return void j.toast.error("Image must be smaller than 5MB");P(a);let b=new FileReader;b.onloadend=()=>N(b.result),b.readAsDataURL(a)},[]),Y=(0,c.useCallback)(a=>{a.preventDefault(),R(!1);let b=a.dataTransfer.files?.[0];b&&X(b)},[X]);if(E||I)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)(i.default,{message:"Loading your profile..."})});let Z=(a,b)=>{U(c=>({...c,[a]:b})),V[a]&&W(b=>({...b,[a]:""}))},$=async()=>(console.warn("Logo upload placeholder â€“ integration with Prisma server action required"),M),_=async b=>{let c;if(b.preventDefault(),c={},T.businessName.trim()||(c.businessName="Business name is required"),T.businessAddress.trim()||(c.businessAddress="Address is required"),T.businessPhone.trim()||(c.businessPhone="Phone number is required"),T.businessEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.businessEmail)||(c.businessEmail="Please enter a valid email"):c.businessEmail="Email is required",W(c),0===Object.keys(c).length){L(!0);try{let b=O?await $():M;if(!await G({business_logo:b??void 0,business_name:T.businessName.trim(),business_address:T.businessAddress.trim(),business_phone:T.businessPhone.trim(),business_email:T.businessEmail.trim(),nature_of_business:T.natureOfBusiness.trim()||void 0,business_size:T.businessSize||void 0,completed:!0}))return void j.toast.error("Failed to save onboarding data. Please try again.");await J({businessName:T.businessName.trim(),businessAddress:T.businessAddress.trim(),businessPhone:T.businessPhone.trim(),businessEmail:T.businessEmail.trim(),...b?{businessLogo:b}:{}}),j.toast.success("Business profile set up! Welcome aboard ðŸŽ‰"),a("/",{replace:!0})}catch(a){console.error("Onboarding submit error:",a),j.toast.error("Something went wrong. Please try again.")}finally{L(!1)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background flex flex-col lg:flex-row",children:[(0,b.jsxs)("div",{className:"w-full lg:w-2/5 xl:w-1/3 flex flex-col px-6 py-8 lg:p-10 relative overflow-hidden lg:min-h-screen",style:{background:"hsl(var(--primary))"},children:[(0,b.jsx)("div",{className:"absolute -top-16 -left-16 w-56 h-56 rounded-full opacity-10 bg-white pointer-events-none"}),(0,b.jsx)("div",{className:"absolute -bottom-10 -right-10 w-48 h-48 rounded-full opacity-10 bg-white pointer-events-none"}),(0,b.jsx)("div",{className:"relative z-10",children:(0,b.jsx)("img",{src:"/lovable-uploads/798d07d7-1db7-498c-92f3-6f6346827d59.png",alt:"Gonzo Systems",className:"h-10 object-contain brightness-0 invert"})}),(0,b.jsxs)("div",{className:"relative z-10 mt-6 lg:mt-auto lg:mb-auto space-y-4",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white/10 text-white/90 text-xs font-medium px-3 py-1.5 rounded-full border border-white/20",children:[(0,b.jsx)(y,{className:"h-3.5 w-3.5"}),"One-time setup"]}),(0,b.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-white leading-snug",children:["Let's get your",(0,b.jsx)("br",{className:"hidden sm:block"})," business ready."]}),(0,b.jsx)("p",{className:"text-white/70 text-sm leading-relaxed max-w-xs",children:"Fill in your business details to personalise your workspace. You can always update these later in Settings."}),(0,b.jsx)("ul",{className:"hidden sm:flex flex-col gap-2.5 text-sm text-white/80 pt-2",children:["Appears on receipts & invoices","Pre-fills your Settings page","Helps your team identify the business"].map(a=>(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(v.CheckCircle2,{className:"h-4 w-4 text-white/50 shrink-0"}),a]},a))})]}),(0,b.jsxs)("p",{className:"relative z-10 hidden lg:block text-white/30 text-xs mt-auto pt-8",children:["Â© ",new Date().getFullYear()," Gonzo Systems"]})]}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:(0,b.jsx)("div",{className:"flex-1 flex items-start justify-center px-4 sm:px-8 py-8 lg:py-16",children:(0,b.jsxs)("div",{className:"w-full max-w-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6 font-geist",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Set up your business"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"This information will appear on your receipts and reports."})]}),(0,b.jsxs)(e.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(),className:"text-muted-foreground hover:text-foreground gap-2",children:[(0,b.jsx)(z.LogOut,{className:"h-4 w-4"}),"Logout"]})]}),(0,b.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{className:"text-sm font-medium",children:["Business Logo"," ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),M?(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-muted/30",children:[(0,b.jsx)("img",{src:M,alt:"Logo preview",className:"h-12 w-12 object-contain rounded-md border border-border bg-white shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:O?.name||"Logo"}),O&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(O.size/1024).toFixed(0)," KB"]})]}),(0,b.jsx)(e.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{N(null),P(null),S.current&&(S.current.value="")},className:"text-destructive hover:text-destructive hover:bg-destructive/10 shrink-0 h-8 w-8 p-0",children:(0,b.jsx)(t.X,{className:"h-4 w-4"})})]}):(0,b.jsxs)("div",{onDrop:Y,onDragOver:a=>{a.preventDefault(),R(!0)},onDragLeave:()=>R(!1),onClick:()=>S.current?.click(),className:`flex items-center gap-3 p-4 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${Q?"border-primary bg-primary/5":"border-border hover:border-primary/40 hover:bg-muted/20"}`,children:[(0,b.jsx)("div",{className:"h-9 w-9 rounded-lg bg-muted flex items-center justify-center shrink-0",children:(0,b.jsx)(w.Upload,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:Q?"Drop here":"Click or drag to upload"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG â€” max 5MB"})]})]}),(0,b.jsx)("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&X(b)}})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"businessName",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(n.Building2,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Business Name ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"businessName",value:T.businessName,onChange:a=>Z("businessName",a.target.value),placeholder:"",className:V.businessName?"border-destructive":""}),V.businessName&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:V.businessName})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"businessAddress",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(o.MapPin,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Location / Address ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"businessAddress",value:T.businessAddress,onChange:a=>Z("businessAddress",a.target.value),placeholder:"",className:V.businessAddress?"border-destructive":""}),V.businessAddress&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:V.businessAddress})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"businessPhone",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(p.Phone,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Phone ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"businessPhone",type:"tel",value:T.businessPhone,onChange:a=>Z("businessPhone",a.target.value),placeholder:"",className:V.businessPhone?"border-destructive":""}),V.businessPhone&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:V.businessPhone})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"businessEmail",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(q.Mail,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Email ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"businessEmail",type:"email",value:T.businessEmail,onChange:a=>Z("businessEmail",a.target.value),placeholder:"",className:V.businessEmail?"border-destructive":""}),V.businessEmail&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:V.businessEmail})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"natureOfBusiness",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(r.Briefcase,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Nature of Business ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),(0,b.jsx)(f.Input,{id:"natureOfBusiness",value:T.natureOfBusiness,onChange:a=>Z("natureOfBusiness",a.target.value),placeholder:""})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(g.Label,{htmlFor:"businessSize",className:"text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(s.Users,{className:"h-3.5 w-3.5 text-muted-foreground"}),"Business Size ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-xs",children:"(optional)"})]}),(0,b.jsxs)(h.Select,{value:T.businessSize,onValueChange:a=>Z("businessSize",a),children:[(0,b.jsx)(h.SelectTrigger,{id:"businessSize",children:(0,b.jsx)(h.SelectValue,{placeholder:"No. of employees"})}),(0,b.jsx)(h.SelectContent,{children:A.map(a=>(0,b.jsx)(h.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"pt-2 pb-4",children:[(0,b.jsx)(e.Button,{type:"submit",disabled:K,className:"w-full h-11 font-semibold gap-2",children:K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"})," Setting up your business..."]}):(0,b.jsxs)(b.Fragment,{children:["Complete Setup ",(0,b.jsx)(x.ArrowRight,{className:"h-4 w-4"})]})}),(0,b.jsxs)("p",{className:"text-center text-xs text-muted-foreground mt-3",children:["You can update all of this later in ",(0,b.jsx)("span",{className:"font-medium",children:"Settings"}),"."]})]})]})]})})})]})}],733451)}];

//# sourceMappingURL=src_pages_Onboarding_tsx_c7dd4e52._.js.map