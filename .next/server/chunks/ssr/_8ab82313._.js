module.exports=[655381,a=>{"use strict";a.s(["Content",()=>c,"List",()=>d,"Root",()=>e,"Tabs",()=>f,"TabsContent",()=>g,"TabsList",()=>h,"TabsTrigger",()=>i,"Trigger",()=>j,"createTabsScope",()=>k]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","Content"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call List() from the server but List is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","List"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","Root"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","Tabs"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","TabsContent"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","TabsList"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","TabsTrigger"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","Trigger"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call createTabsScope() from the server but createTabsScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs <module evaluation>","createTabsScope")},821827,a=>{"use strict";a.s(["Content",()=>c,"List",()=>d,"Root",()=>e,"Tabs",()=>f,"TabsContent",()=>g,"TabsList",()=>h,"TabsTrigger",()=>i,"Trigger",()=>j,"createTabsScope",()=>k]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","Content"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call List() from the server but List is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","List"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","Root"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","Tabs"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","TabsContent"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","TabsList"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","TabsTrigger"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","Trigger"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call createTabsScope() from the server but createTabsScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs","createTabsScope")},41317,a=>{"use strict";a.i(655381);var b=a.i(821827);a.n(b)},473083,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(41317),e=a.i(139138);let f=d.Root,g=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.List,{ref:f,className:(0,e.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...c}));g.displayName=d.List.displayName;let h=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Trigger,{ref:f,className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...c}));h.displayName=d.Trigger.displayName;let i=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Content,{ref:f,className:(0,e.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...c}));i.displayName=d.Content.displayName,a.s(["Tabs",()=>f,"TabsContent",()=>i,"TabsList",()=>g,"TabsTrigger",()=>h])},184590,a=>{"use strict";var b=a.i(907997);a.i(570396);var c=a.i(673727),d=a.i(638904),e=a.i(384674);a.s(["default",0,()=>{let a=(0,c.useRouter)();return(0,b.jsx)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md p-8",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-slate-100 rounded-full p-4 w-16 h-16 flex items-center justify-center",children:(0,b.jsx)(e.FileText,{className:"h-8 w-8 text-slate-400"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"No sales records found"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first sale to start tracking your business performance"}),(0,b.jsx)(d.Button,{onClick:()=>a.push("/new-sale"),className:"mt-2",children:"Create Your First Sale"})]})})}])},895186,a=>{"use strict";var b=a.i(907997);a.s(["default",0,()=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-border/50",children:[(0,b.jsx)("div",{className:"p-4 sm:p-6 border-b border-border/50",children:(0,b.jsx)("div",{className:"flex flex-col gap-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mt-2 animate-pulse"})]}),(0,b.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"})]})})}),(0,b.jsx)("div",{className:"p-4 sm:p-6",children:(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},c))})})]})])},941313,a=>{"use strict";var b=a.i(907997);a.i(570396);var c=a.i(673727);a.s(["default",0,()=>{let a=(0,c.useRouter)();return(0,b.jsx)("div",{className:"p-6 text-center",children:(0,b.jsxs)("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-md",children:[(0,b.jsx)("p",{className:"text-amber-800 mb-4",children:"No business location found. Please create a business location to manage sales."}),(0,b.jsx)("button",{onClick:()=>a.push("/business-management"),className:"bg-amber-600 text-white px-4 py-2 rounded hover:bg-amber-700",children:"Manage Business Locations"})]})})}])},679174,a=>{"use strict";let b=(0,a.i(701269).default)("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);a.s(["FileDown",()=>b],679174)},419926,a=>{"use strict";var b=a.i(12208);a.s(["exportToCSV",0,a=>{let c=new Blob([["Receipt #,Date,Customer,Items,Items Count,Total Amount,Amount Paid,Amount Due,Status",...a.map(a=>{let c=a.items.reduce((a,b)=>a+b.price*b.quantity,0),d=a.items.map(a=>a.description).join("; ");return[a.receiptNumber,(0,b.format)(new Date(a.date),"yyyy-MM-dd HH:mm"),a.customerName,d,a.items.length.toString(),c.toFixed(2),(a.amountPaid||0).toFixed(2),(a.amountDue||0).toFixed(2),a.paymentStatus]}).map(a=>a.map(a=>`"${a.toString().replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");if(void 0!==d.download){let a=URL.createObjectURL(c);d.setAttribute("href",a),d.setAttribute("download",`sales_export_${(0,b.format)(new Date,"yyyy-MM-dd_HHmm")}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}])},746978,a=>{"use strict";var b=a.i(498259),c=a.i(12208);a.s(["generateSalesReportVectorPDF",0,(a,d,e="USD",f,g)=>{let h,i=new b.default({orientation:"landscape",unit:"mm",format:"a4",compress:!0}),j=i.internal.pageSize.getWidth(),k=i.internal.pageSize.getHeight(),l=j-15-15,m=15,n=()=>{i.setFontSize(8),i.setFont("helvetica","normal"),i.setTextColor(150,150,150),i.text("Created By Gonza Systems",j/2,k-10,{align:"center"}),i.setTextColor(0,0,0)},o=[18,20,28,45,16,20,22,18,20,18,28],p=["Receipt #","Date","Customer","Items","Qty","Unit Price","Subtotal","Discount","Net","Tax","Total"],q=()=>{i.setFillColor(243,244,246),i.rect(15,m-2,l,12,"F"),i.setLineWidth(.3),i.rect(15,m-2,l,12),i.setFontSize(9),i.setFont("helvetica","bold");let a=15;p.forEach((b,c)=>{let d=o[c],e=i.getTextWidth(b),f=a+(d-e)/2;i.text(b,f,m+7),c<p.length-1&&i.line(a+d,m-2,a+d,m+12-2),a+=d}),m+=12},r=a=>m+a>k-15-15&&(n(),i.addPage(),m=15,q(),i.setFont("helvetica","normal"),i.setFontSize(8),!0),s=m;g&&(i.setFontSize(12),i.setFont("helvetica","bold"),i.text(g.businessName,15,m),m+=6,i.setFontSize(9),i.setFont("helvetica","normal"),i.text(g.businessAddress,15,m),m+=5,i.text(g.businessPhone,15,m),m+=5,i.text(g.businessEmail,15,m)),m=s,i.setFontSize(20),i.setFont("helvetica","bold");let t=`Comprehensive Sales Report (${e})`,u=i.getTextWidth(t);if(i.text(t,j-15-u,m),m+=12,f?.from&&f?.to){i.setFontSize(14),i.setFont("helvetica","normal");let a=(0,c.format)(f.from,"dd/MM/yyyy"),b=(0,c.format)(f.to,"dd/MM/yyyy"),d=a===b?a:`${a} - ${b}`,e=i.getTextWidth(d);i.text(d,j-15-e,m),m+=15}else{i.setFontSize(14),i.setFont("helvetica","normal");let a=(0,c.format)(new Date,"dd/MM/yyyy"),b=i.getTextWidth(a);i.text(a,j-15-b,m),m+=15}if(m=Math.max(m,s+25),0===a.length){i.setFontSize(16),i.setFont("helvetica","normal");let a="No sales data available for the selected period.",b=i.getTextWidth(a);i.text(a,(j-b)/2,m+30)}else{r(22),q(),i.setFont("helvetica","normal"),i.setFontSize(8);let b=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}),d=0;a.forEach(a=>{let e=a.items.reduce((a,b)=>a+b.total,0)-a.items.reduce((a,b)=>a+(b.discount_amount||0),0),f=a.total_amount-e,g=e>0?f/e:0;a.items.forEach((e,f)=>{r(13);let h=e.discount_amount||0,j=e.total-h,k=j*g,n=[0===f?a.receipt_number:"",0===f?(0,c.format)(new Date(a.sale_date),"dd/MM/yyyy"):"",0===f?a.customer_name||"Walk-in":"",e.product_name,e.quantity.toString(),b.format(e.price),b.format(e.total),h>0?b.format(h):"-",b.format(j),b.format(k),b.format(j+k)];d%2==0&&(i.setFillColor(249,250,251),i.rect(15,m-1,l,8,"F")),i.setLineWidth(.1),i.rect(15,m-1,l,8);let p=15;n.forEach((a,b)=>{let c=o[b],d=a;if(2===b)for(;i.getTextWidth(d)>c-4&&d.length>3;)d=d.substring(0,d.length-4)+"...";else if(3===b)for(;i.getTextWidth(d)>c-4&&d.length>5;)d=d.substring(0,d.length-4)+"...";else if(b>=4)for(;i.getTextWidth(d)>c-4&&d.length>3;)d=d.includes(",")?d.replace(/,/g,""):d.substring(0,d.length-1);let e=p+2;if(b>=4){let a=i.getTextWidth(d);e=p+c-a-2}i.text(d,e,m+5),b<n.length-1&&i.line(p+c,m-1,p+c,m+8-1),p+=c}),m+=8}),d++}),m+=15,r(60),i.setFontSize(18),i.setFont("helvetica","bold"),i.text("Comprehensive Sales Summary",15,m),m+=10;let e=a.length,f=a.reduce((a,b)=>a+b.total_amount,0),g=a.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.total,0),0),h=a.reduce((a,b)=>a+b.items.reduce((a,b)=>a+(b.discount_amount||0),0),0),j=g-h,k=a.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.quantity,0),0),n=a.filter(a=>"paid"===a.payment_status.toLowerCase()).length,p=a.filter(a=>"not paid"===a.payment_status.toLowerCase()).length,s=a.filter(a=>"quote"===a.payment_status.toLowerCase()).length,t=a.filter(a=>"installment sale"===a.payment_status.toLowerCase()).length,u=e>0?k/e:0,v=e>0?h/e:0,w=g>0?h/g*100:0;i.setFillColor(248,249,250),i.rect(15,m-3,l,60,"F"),i.setLineWidth(.3),i.setDrawColor(200,200,200),i.rect(15,m-3,l,60),i.setFontSize(10),i.setFont("helvetica","normal");let x=[["Total Sales:",e.toString()],["Total Items Sold:",k.toString()],["Average Items/Sale:",u.toFixed(1)],["Paid Sales:",n.toString()],["Pending Sales:",p.toString()],["Avg Discount/Sale:",b.format(v)]],y=[["Total Amount:",b.format(f)],["Subtotal (before discount):",b.format(g)],["Total Discounts:",b.format(h)],["Net Amount (after discount):",b.format(j)],["Total Tax:",b.format(f-j)],["Discount Rate:",`${w.toFixed(1)}%`]],z=m+6,A=30,B=15+l/2+15;x.forEach(([a,b])=>{i.setFont("helvetica","bold"),i.text(a,A,z),i.setFont("helvetica","normal");let c=i.getTextWidth(a);i.text(b,A+c+5,z),z+=7}),z=m+6,y.forEach(([a,b])=>{i.setFont("helvetica","bold"),i.text(a,B,z),i.setFont("helvetica","normal");let c=i.getTextWidth(a);i.text(b,B+c+5,z),z+=7}),(s>0||t>0)&&(m+=70,r(25),i.setFontSize(14),i.setFont("helvetica","bold"),i.text("Payment Status Breakdown",15,m),m+=8,i.setFontSize(10),i.setFont("helvetica","normal"),[[`Quotes: ${s}`,`Installment Sales: ${t}`]].forEach(([a,b])=>{i.text(a,A,m),i.text(b,B,m),m+=6}))}if(n(),f?.from&&f?.to){let a=(0,c.format)(f.from,"yyyy-MM-dd"),b=(0,c.format)(f.to,"yyyy-MM-dd");h=a===b?`sales_report_${a}.pdf`:`sales_report_${a}_to_${b}.pdf`}else h=`sales_report_${(0,c.format)(new Date,"yyyy-MM-dd")}.pdf`;i.save(h)}])},532123,a=>{"use strict";var b=a.i(399602);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setHours(23,59,59,999),d}a.s(["endOfDay",()=>c])},380040,a=>{"use strict";var b=a.i(889650),c=a.i(399602);function d(a,d){let e=(0,b.getDefaultOptions)(),f=d?.weekStartsOn??d?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,g=(0,c.toDate)(a,d?.in),h=g.getDay();return g.setDate(g.getDate()+((h<f?-7:0)+6-(h-f))),g.setHours(23,59,59,999),g}a.s(["endOfWeek",()=>d])},95805,a=>{"use strict";var b=a.i(399602);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setDate(1),d.setHours(0,0,0,0),d}a.s(["startOfMonth",()=>c])},798794,a=>{"use strict";var b=a.i(399602);function c(a,c){let d=(0,b.toDate)(a,c?.in),e=d.getMonth();return d.setFullYear(d.getFullYear(),e+1,0),d.setHours(23,59,59,999),d}a.s(["endOfMonth",()=>c])},140847,a=>{"use strict";var b=a.i(399602);function c(a,c){let d=(0,b.toDate)(a,c?.in),e=d.getFullYear();return d.setFullYear(e+1,0,0),d.setHours(23,59,59,999),d}a.s(["endOfYear",()=>c])},431290,a=>{"use strict";var b=a.i(310236);function c(a,c,d){return(0,b.addDays)(a,-c,d)}a.s(["subDays",()=>c])},349764,a=>{"use strict";var b=a.i(265233);function c(a,c,d){return(0,b.addWeeks)(a,-c,d)}a.s(["subWeeks",()=>c])},907950,a=>{"use strict";var b=a.i(747820);function c(a,c,d){return(0,b.addMonths)(a,-c,d)}a.s(["subMonths",()=>c])},5315,a=>{"use strict";var b=a.i(48461),c=a.i(532123),d=a.i(380865),e=a.i(380040),f=a.i(95805),g=a.i(798794),h=a.i(961628),i=a.i(140847),j=a.i(431290),k=a.i(349764),l=a.i(907950);a.s(["getDateRangeFromFilter",0,a=>{let m=new Date,n=(0,b.startOfDay)(m);switch(a){case"today":return{from:n,to:(0,c.endOfDay)(m)};case"yesterday":let o=(0,j.subDays)(n,1);return{from:o,to:(0,c.endOfDay)(o)};case"this-week":return{from:(0,d.startOfWeek)(m),to:(0,e.endOfWeek)(m)};case"last-week":let p=(0,d.startOfWeek)((0,k.subWeeks)(m,1));return{from:p,to:(0,e.endOfWeek)(p)};case"this-month":return{from:(0,f.startOfMonth)(m),to:(0,g.endOfMonth)(m)};case"last-month":let q=(0,f.startOfMonth)((0,l.subMonths)(m,1));return{from:q,to:(0,g.endOfMonth)(q)};case"this-year":return{from:(0,h.startOfYear)(m),to:(0,i.endOfYear)(m)};default:return{from:new Date(2e3,0,1),to:(0,c.endOfDay)(m)}}}])},716312,a=>a.a(async(b,c)=>{try{var d=a.i(907997);a.i(570396);var e=a.i(673727),f=a.i(638904),g=a.i(679174),h=a.i(384674),i=a.i(884254),j=a.i(419926),k=a.i(746978),l=a.i(857396),m=a.i(771826),n=a.i(5315),o=a.i(771091),p=b([m,o]);[m,o]=p.then?(await p)():p,a.s(["default",0,({filteredSales:a,allSales:b,currency:c,dateFilter:p="all",dateRange:q,specificDate:r})=>{let s=(0,e.useRouter)(),{toast:t}=(0,l.useToast)(),{settings:u}=(0,m.useBusinessSettings)(),{hasPermission:v}=(0,o.useProfiles)(),w=async()=>{try{let d,e=a.length>0?a:b,f=e.map(a=>{let b=a.items.reduce((a,b)=>a+b.price*b.quantity,0),c=a.items.reduce((a,b)=>a+(b.discountAmount||0),0),d=(b-c)*(1+(a.taxRate||0)/100);return{receipt_number:a.receiptNumber,customer_name:a.customerName,total_amount:d,payment_status:a.paymentStatus.toLowerCase(),created_at:a.date.toISOString(),sale_date:a.date.toISOString().split("T")[0],items:a.items.map(a=>({product_name:a.description,quantity:a.quantity,price:a.price,total:a.price*a.quantity,discount_amount:a.discountAmount||0,discount_percentage:a.discountPercentage||0,discount_type:a.discountType||void 0}))}});if(r)d={from:r,to:r};else if(q?.from&&q?.to)d=q;else if(p&&"all"!==p)d=(0,n.getDateRangeFromFilter)(p);else if(e.length>0){let a=e.map(a=>a.date),b=new Date(Math.min(...a.map(a=>a.getTime()))),c=new Date(Math.max(...a.map(a=>a.getTime())));d={from:b,to:c}}else{let a=new Date;d={from:a,to:a}}(0,k.generateSalesReportVectorPDF)(f,"Current Period",c,d,{businessName:u.businessName,businessAddress:u.businessAddress,businessPhone:u.businessPhone,businessEmail:u.businessEmail}),t({title:"Report Generated",description:"PDF sales report has been created successfully."})}catch(a){console.error("Error generating PDF report:",a),t({title:"Error",description:"Failed to generate PDF report. Please try again.",variant:"destructive"})}};return(0,d.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)(f.Button,{onClick:()=>{(0,j.exportToCSV)(a.length>0?a:b)},variant:"outline",size:"lg",className:"gap-2 h-12 text-sm border-border/50 font-medium",children:[(0,d.jsx)(g.FileDown,{className:"h-4 w-4 shrink-0"}),"CSV"]}),(0,d.jsxs)(f.Button,{onClick:w,variant:"outline",size:"lg",className:"gap-2 h-12 text-sm border-border/50 font-medium",children:[(0,d.jsx)(h.FileText,{className:"h-4 w-4 shrink-0"}),"PDF"]})]}),v("sales","create")&&(0,d.jsxs)(f.Button,{onClick:()=>s.push("/new-sale"),size:"lg",className:"w-full gap-2 h-12 text-sm font-medium",children:[(0,d.jsx)(i.Plus,{className:"h-4 w-4 shrink-0"}),"New Sale"]})]})}]),c()}catch(a){c(a)}},!1),134318,a=>{"use strict";let b=(0,a.i(701269).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["default",()=>b])},760612,a=>{"use strict";var b=a.i(134318);a.s(["Calendar",()=>b.default])},914762,a=>{"use strict";a.s(["Anchor",()=>c,"Arrow",()=>d,"Close",()=>e,"Content",()=>f,"Popover",()=>g,"PopoverAnchor",()=>h,"PopoverArrow",()=>i,"PopoverClose",()=>j,"PopoverContent",()=>k,"PopoverPortal",()=>l,"PopoverTrigger",()=>m,"Portal",()=>n,"Root",()=>o,"Trigger",()=>p,"createPopoverScope",()=>q]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Anchor() from the server but Anchor is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Anchor"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Arrow() from the server but Arrow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Arrow"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Close() from the server but Close is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Close"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Content"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call Popover() from the server but Popover is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Popover"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverAnchor() from the server but PopoverAnchor is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverAnchor"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverArrow() from the server but PopoverArrow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverArrow"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverClose() from the server but PopoverClose is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverClose"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverContent() from the server but PopoverContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverContent"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverPortal() from the server but PopoverPortal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverPortal"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverTrigger() from the server but PopoverTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","PopoverTrigger"),n=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Portal"),o=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Root"),p=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","Trigger"),q=(0,b.registerClientReference)(function(){throw Error("Attempted to call createPopoverScope() from the server but createPopoverScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs <module evaluation>","createPopoverScope")},36174,a=>{"use strict";a.s(["Anchor",()=>c,"Arrow",()=>d,"Close",()=>e,"Content",()=>f,"Popover",()=>g,"PopoverAnchor",()=>h,"PopoverArrow",()=>i,"PopoverClose",()=>j,"PopoverContent",()=>k,"PopoverPortal",()=>l,"PopoverTrigger",()=>m,"Portal",()=>n,"Root",()=>o,"Trigger",()=>p,"createPopoverScope",()=>q]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Anchor() from the server but Anchor is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Anchor"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Arrow() from the server but Arrow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Arrow"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Close() from the server but Close is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Close"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Content"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call Popover() from the server but Popover is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Popover"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverAnchor() from the server but PopoverAnchor is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverAnchor"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverArrow() from the server but PopoverArrow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverArrow"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverClose() from the server but PopoverClose is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverClose"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverContent() from the server but PopoverContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverContent"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverPortal() from the server but PopoverPortal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverPortal"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call PopoverTrigger() from the server but PopoverTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","PopoverTrigger"),n=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Portal"),o=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Root"),p=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","Trigger"),q=(0,b.registerClientReference)(function(){throw Error("Attempted to call createPopoverScope() from the server but createPopoverScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-popover/dist/index.mjs","createPopoverScope")},897212,a=>{"use strict";a.i(914762);var b=a.i(36174);a.n(b)},751066,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(897212),e=a.i(139138);let f=d.Root,g=d.Trigger,h=c.forwardRef(({className:a,align:c="center",sideOffset:f=4,...g},h)=>(0,b.jsx)(d.Portal,{children:(0,b.jsx)(d.Content,{ref:h,align:c,sideOffset:f,className:(0,e.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...g})}));h.displayName=d.Content.displayName,a.s(["Popover",()=>f,"PopoverContent",()=>h,"PopoverTrigger",()=>g])},87705,a=>{"use strict";let b=(0,a.i(701269).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],87705)},809933,a=>{"use strict";var b=a.i(247355),c=a.i(48461);function d(a,d,e){let[f,g]=(0,b.normalizeDates)(e?.in,a,d);return+(0,c.startOfDay)(f)==+(0,c.startOfDay)(g)}a.s(["isSameDay",()=>d])},580178,a=>{"use strict";var b,c,d=a.i(907997),e=a.i(87705),f=a.i(272030),g=a.i(800717),h=a.i(12208),i=a.i(95805),j=a.i(798794),k=a.i(48461),l=a.i(247355),m=a.i(18956),n=a.i(399602);function o(a,b,c){let d,e,f,g,h=(0,n.toDate)(a,c?.in),i=h.getFullYear(),j=h.getDate(),k=(0,m.constructFrom)(c?.in||a,0);k.setFullYear(i,b,15),k.setHours(0,0,0,0);let l=(e=(d=(0,n.toDate)(k,void 0)).getFullYear(),f=d.getMonth(),(g=(0,m.constructFrom)(d,0)).setFullYear(e,f+1,0),g.setHours(0,0,0,0),g.getDate());return h.setMonth(b,Math.min(j,l)),h}function p(a,b,c){let d=(0,n.toDate)(a,c?.in);return isNaN(+d)?(0,m.constructFrom)(c?.in||a,NaN):(d.setFullYear(b),d)}var q=a.i(961628);function r(a,b,c){let[d,e]=(0,l.normalizeDates)(c?.in,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}var s=a.i(747820);function t(a,b,c){let[d,e]=(0,l.normalizeDates)(c?.in,a,b);return d.getFullYear()===e.getFullYear()&&d.getMonth()===e.getMonth()}function u(a,b){return+(0,n.toDate)(a)<+(0,n.toDate)(b)}var v=a.i(897647),w=a.i(380865),x=a.i(310236),y=a.i(809933);function z(a,b){return+(0,n.toDate)(a)>+(0,n.toDate)(b)}var A=a.i(431290),B=a.i(490449),C=a.i(84917),D=a.i(265233);function E(a,b,c){return(0,s.addMonths)(a,12*b,c)}var F=a.i(380040);function G(a,b){return(0,F.endOfWeek)(a,{...b,weekStartsOn:1})}var H=a.i(10440),I=a.i(728122),J=a.i(979309),K=a.i(696818);a.i(868023),a.i(831378),a.i(261666);var L=a.i(889650);class M{subPriority=0;validate(a,b){return!0}}class N extends M{constructor(a,b,c,d,e){super(),this.value=a,this.validateValue=b,this.setValue=c,this.priority=d,e&&(this.subPriority=e)}validate(a,b){return this.validateValue(a,this.value,b)}set(a,b,c){return this.setValue(a,b,this.value,c)}}class O{run(a,b,c,d){let e=this.parse(a,b,c,d);return e?{setter:new N(e.value,this.validate,this.set,this.priority,this.subPriority),rest:e.rest}:null}validate(a,b,c){return!0}}let P=/^(1[0-2]|0?\d)/,Q=/^(3[0-1]|[0-2]?\d)/,R=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,S=/^(5[0-3]|[0-4]?\d)/,T=/^(2[0-3]|[0-1]?\d)/,U=/^(2[0-4]|[0-1]?\d)/,V=/^(1[0-1]|0?\d)/,W=/^(1[0-2]|0?\d)/,X=/^[0-5]?\d/,Y=/^[0-5]?\d/,Z=/^\d/,$=/^\d{1,2}/,_=/^\d{1,3}/,aa=/^\d{1,4}/,ab=/^-?\d+/,ac=/^-?\d/,ad=/^-?\d{1,2}/,ae=/^-?\d{1,3}/,af=/^-?\d{1,4}/,ag=/^([+-])(\d{2})(\d{2})?|Z/,ah=/^([+-])(\d{2})(\d{2})|Z/,ai=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,aj=/^([+-])(\d{2}):(\d{2})|Z/,ak=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function al(a,b){return a?{value:b(a.value),rest:a.rest}:a}function am(a,b){let c=b.match(a);return c?{value:parseInt(c[0],10),rest:b.slice(c[0].length)}:null}function an(a,b){let c=b.match(a);if(!c)return null;if("Z"===c[0])return{value:0,rest:b.slice(1)};let d="+"===c[1]?1:-1,e=c[2]?parseInt(c[2],10):0,f=c[3]?parseInt(c[3],10):0,g=c[5]?parseInt(c[5],10):0;return{value:d*(e*K.millisecondsInHour+f*K.millisecondsInMinute+g*K.millisecondsInSecond),rest:b.slice(c[0].length)}}function ao(a,b){switch(a){case 1:return am(Z,b);case 2:return am($,b);case 3:return am(_,b);case 4:return am(aa,b);default:return am(RegExp("^\\d{1,"+a+"}"),b)}}function ap(a,b){switch(a){case 1:return am(ac,b);case 2:return am(ad,b);case 3:return am(ae,b);case 4:return am(af,b);default:return am(RegExp("^-?\\d{1,"+a+"}"),b)}}function aq(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ar(a,b){let c,d=b>0,e=d?b:1-b;if(e<=50)c=a||100;else{let b=e+50;c=a+100*Math.trunc(b/100)-100*(a>=b%100)}return d?c:1-c}function as(a){return a%400==0||a%4==0&&a%100!=0}var at=a.i(355453);let au=[31,28,31,30,31,30,31,31,30,31,30,31],av=[31,29,31,30,31,30,31,31,30,31,30,31];function aw(a,b,c){let d=(0,L.getDefaultOptions)(),e=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,f=(0,n.toDate)(a,c?.in),g=f.getDay(),h=7-e,i=b<0||b>6?b-(g+h)%7:((b%7+7)%7+h)%7-(g+h)%7;return(0,x.addDays)(f,i,c)}new class extends O{priority=140;parse(a,b,c){switch(b){case"G":case"GG":case"GGG":return c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"});case"GGGGG":return c.era(a,{width:"narrow"});default:return c.era(a,{width:"wide"})||c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"})}}set(a,b,c){return b.era=c,a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["R","u","t","T"]},new class extends O{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"yy"===b});switch(b){case"y":return al(ao(4,a),d);case"yo":return al(c.ordinalNumber(a,{unit:"year"}),d);default:return al(ao(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c){let d=a.getFullYear();if(c.isTwoDigitYear){let b=ar(c.year,d);return a.setFullYear(b,0,1),a.setHours(0,0,0,0),a}let e="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(e,0,1),a.setHours(0,0,0,0),a}},new class extends O{priority=130;parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"YY"===b});switch(b){case"Y":return al(ao(4,a),d);case"Yo":return al(c.ordinalNumber(a,{unit:"year"}),d);default:return al(ao(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c,d){let e=(0,at.getWeekYear)(a,d);if(c.isTwoDigitYear){let b=ar(c.year,e);return a.setFullYear(b,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),(0,w.startOfWeek)(a,d)}let f="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(f,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),(0,w.startOfWeek)(a,d)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},new class extends O{priority=130;parse(a,b){return"R"===b?ap(4,a):ap(b.length,a)}set(a,b,c){let d=(0,m.constructFrom)(a,0);return d.setFullYear(c,0,4),d.setHours(0,0,0,0),(0,v.startOfISOWeek)(d)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},new class extends O{priority=130;parse(a,b){return"u"===b?ap(4,a):ap(b.length,a)}set(a,b,c){return a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},new class extends O{priority=120;parse(a,b,c){switch(b){case"Q":case"QQ":return ao(b.length,a);case"Qo":return c.ordinalNumber(a,{unit:"quarter"});case"QQQ":return c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return c.quarter(a,{width:"narrow",context:"formatting"});default:return c.quarter(a,{width:"wide",context:"formatting"})||c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends O{priority=120;parse(a,b,c){switch(b){case"q":case"qq":return ao(b.length,a);case"qo":return c.ordinalNumber(a,{unit:"quarter"});case"qqq":return c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return c.quarter(a,{width:"narrow",context:"standalone"});default:return c.quarter(a,{width:"wide",context:"standalone"})||c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends O{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"M":return al(am(P,a),d);case"MM":return al(ao(2,a),d);case"Mo":return al(c.ordinalNumber(a,{unit:"month"}),d);case"MMM":return c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(a,{width:"narrow",context:"formatting"});default:return c.month(a,{width:"wide",context:"formatting"})||c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}},new class extends O{priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"L":return al(am(P,a),d);case"LL":return al(ao(2,a),d);case"Lo":return al(c.ordinalNumber(a,{unit:"month"}),d);case"LLL":return c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(a,{width:"narrow",context:"standalone"});default:return c.month(a,{width:"wide",context:"standalone"})||c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},new class extends O{priority=100;parse(a,b,c){switch(b){case"w":return am(S,a);case"wo":return c.ordinalNumber(a,{unit:"week"});default:return ao(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c,d){let e,f;return(0,w.startOfWeek)((e=(0,n.toDate)(a,d?.in),f=(0,I.getWeek)(e,d)-c,e.setDate(e.getDate()-7*f),(0,n.toDate)(e,d?.in)),d)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},new class extends O{priority=100;parse(a,b,c){switch(b){case"I":return am(S,a);case"Io":return c.ordinalNumber(a,{unit:"week"});default:return ao(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c){let d,e;return(0,v.startOfISOWeek)((d=(0,n.toDate)(a,void 0),e=(0,H.getISOWeek)(d,void 0)-c,d.setDate(d.getDate()-7*e),d))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},new class extends O{priority=90;subPriority=1;parse(a,b,c){switch(b){case"d":return am(Q,a);case"do":return c.ordinalNumber(a,{unit:"date"});default:return ao(b.length,a)}}validate(a,b){let c=as(a.getFullYear()),d=a.getMonth();return c?b>=1&&b<=av[d]:b>=1&&b<=au[d]}set(a,b,c){return a.setDate(c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},new class extends O{priority=90;subpriority=1;parse(a,b,c){switch(b){case"D":case"DD":return am(R,a);case"Do":return c.ordinalNumber(a,{unit:"date"});default:return ao(b.length,a)}}validate(a,b){return as(a.getFullYear())?b>=1&&b<=366:b>=1&&b<=365}set(a,b,c){return a.setMonth(0,c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},new class extends O{priority=90;parse(a,b,c){switch(b){case"E":case"EE":case"EEE":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return c.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=aw(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["D","i","e","c","t","T"]},new class extends O{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"e":case"ee":return al(ao(b.length,a),e);case"eo":return al(c.ordinalNumber(a,{unit:"day"}),e);case"eee":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"eeeee":return c.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=aw(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},new class extends O{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"c":case"cc":return al(ao(b.length,a),e);case"co":return al(c.ordinalNumber(a,{unit:"day"}),e);case"ccc":return c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});case"ccccc":return c.day(a,{width:"narrow",context:"standalone"});case"cccccc":return c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});default:return c.day(a,{width:"wide",context:"standalone"})||c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=aw(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},new class extends O{priority=90;parse(a,b,c){let d=a=>0===a?7:a;switch(b){case"i":case"ii":return ao(b.length,a);case"io":return c.ordinalNumber(a,{unit:"day"});case"iii":return al(c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiii":return al(c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiiii":return al(c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);default:return al(c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d)}}validate(a,b){return b>=1&&b<=7}set(a,b,c){var d,e;let f,g,h;return d=a,f=(0,n.toDate)(d,void 0),e=void 0,h=0===(g=(0,n.toDate)(f,e?.in).getDay())?7:g,(a=(0,x.addDays)(f,c-h,void 0)).setHours(0,0,0,0),a}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},new class extends O{priority=80;parse(a,b,c){switch(b){case"a":case"aa":case"aaa":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(aq(c),0,0,0),a}incompatibleTokens=["b","B","H","k","t","T"]},new class extends O{priority=80;parse(a,b,c){switch(b){case"b":case"bb":case"bbb":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(aq(c),0,0,0),a}incompatibleTokens=["a","B","H","k","t","T"]},new class extends O{priority=80;parse(a,b,c){switch(b){case"B":case"BB":case"BBB":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(aq(c),0,0,0),a}incompatibleTokens=["a","b","t","T"]},new class extends O{priority=70;parse(a,b,c){switch(b){case"h":return am(W,a);case"ho":return c.ordinalNumber(a,{unit:"hour"});default:return ao(b.length,a)}}validate(a,b){return b>=1&&b<=12}set(a,b,c){let d=a.getHours()>=12;return d&&c<12?a.setHours(c+12,0,0,0):d||12!==c?a.setHours(c,0,0,0):a.setHours(0,0,0,0),a}incompatibleTokens=["H","K","k","t","T"]},new class extends O{priority=70;parse(a,b,c){switch(b){case"H":return am(T,a);case"Ho":return c.ordinalNumber(a,{unit:"hour"});default:return ao(b.length,a)}}validate(a,b){return b>=0&&b<=23}set(a,b,c){return a.setHours(c,0,0,0),a}incompatibleTokens=["a","b","h","K","k","t","T"]},new class extends O{priority=70;parse(a,b,c){switch(b){case"K":return am(V,a);case"Ko":return c.ordinalNumber(a,{unit:"hour"});default:return ao(b.length,a)}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.getHours()>=12&&c<12?a.setHours(c+12,0,0,0):a.setHours(c,0,0,0),a}incompatibleTokens=["h","H","k","t","T"]},new class extends O{priority=70;parse(a,b,c){switch(b){case"k":return am(U,a);case"ko":return c.ordinalNumber(a,{unit:"hour"});default:return ao(b.length,a)}}validate(a,b){return b>=1&&b<=24}set(a,b,c){return a.setHours(c<=24?c%24:c,0,0,0),a}incompatibleTokens=["a","b","h","H","K","t","T"]},new class extends O{priority=60;parse(a,b,c){switch(b){case"m":return am(X,a);case"mo":return c.ordinalNumber(a,{unit:"minute"});default:return ao(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setMinutes(c,0,0),a}incompatibleTokens=["t","T"]},new class extends O{priority=50;parse(a,b,c){switch(b){case"s":return am(Y,a);case"so":return c.ordinalNumber(a,{unit:"second"});default:return ao(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setSeconds(c,0),a}incompatibleTokens=["t","T"]},new class extends O{priority=30;parse(a,b){return al(ao(b.length,a),a=>Math.trunc(a*Math.pow(10,-b.length+3)))}set(a,b,c){return a.setMilliseconds(c),a}incompatibleTokens=["t","T"]},new class extends O{priority=10;parse(a,b){switch(b){case"X":return an(ag,a);case"XX":return an(ah,a);case"XXXX":return an(ai,a);case"XXXXX":return an(ak,a);default:return an(aj,a)}}set(a,b,c){return b.timestampIsSet?a:(0,m.constructFrom)(a,a.getTime()-(0,J.getTimezoneOffsetInMilliseconds)(a)-c)}incompatibleTokens=["t","T","x"]},new class extends O{priority=10;parse(a,b){switch(b){case"x":return an(ag,a);case"xx":return an(ah,a);case"xxxx":return an(ai,a);case"xxxxx":return an(ak,a);default:return an(aj,a)}}set(a,b,c){return b.timestampIsSet?a:(0,m.constructFrom)(a,a.getTime()-(0,J.getTimezoneOffsetInMilliseconds)(a)-c)}incompatibleTokens=["t","T","X"]},new class extends O{priority=40;parse(a){return am(ab,a)}set(a,b,c){return[(0,m.constructFrom)(a,1e3*c),{timestampIsSet:!0}]}incompatibleTokens="*"},new class extends O{priority=20;parse(a){return am(ab,a)}set(a,b,c){return[(0,m.constructFrom)(a,c),{timestampIsSet:!0}]}incompatibleTokens="*"};var ax=a.i(367869),ay=function(){return(ay=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function az(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function aA(a){return"multiple"===a.mode}function aB(a){return"range"===a.mode}function aC(a){return"single"===a.mode}"function"==typeof SuppressedError&&SuppressedError;var aD={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"},aE=Object.freeze({__proto__:null,formatCaption:function(a,b){return(0,h.format)(a,"LLLL y",b)},formatDay:function(a,b){return(0,h.format)(a,"d",b)},formatMonthCaption:function(a,b){return(0,h.format)(a,"LLLL",b)},formatWeekNumber:function(a){return"".concat(a)},formatWeekdayName:function(a,b){return(0,h.format)(a,"cccccc",b)},formatYearCaption:function(a,b){return(0,h.format)(a,"yyyy",b)}}),aF=Object.freeze({__proto__:null,labelDay:function(a,b,c){return(0,h.format)(a,"do MMMM (EEEE)",c)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(a){return"Week n. ".concat(a)},labelWeekday:function(a,b){return(0,h.format)(a,"cccc",b)},labelYearDropdown:function(){return"Year: "}}),aG=(0,g.createContext)(void 0);function aH(a){var b,c,e,f,g,h,l,m,n=a.initialProps,o={captionLayout:"buttons",classNames:aD,formatters:aE,labels:aF,locale:ax.enUS,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},p=(b=n.fromYear,c=n.toYear,e=n.fromMonth,f=n.toMonth,g=n.fromDate,h=n.toDate,e?g=(0,i.startOfMonth)(e):b&&(g=new Date(b,0,1)),f?h=(0,j.endOfMonth)(f):c&&(h=new Date(c,11,31)),{fromDate:g?(0,k.startOfDay)(g):void 0,toDate:h?(0,k.startOfDay)(h):void 0}),q=p.fromDate,r=p.toDate,s=null!=(l=n.captionLayout)?l:o.captionLayout;"buttons"===s||q&&r||(s="buttons"),(aC(n)||aA(n)||aB(n))&&(m=n.onSelect);var t=ay(ay(ay({},o),n),{captionLayout:s,classNames:ay(ay({},o.classNames),n.classNames),components:ay({},n.components),formatters:ay(ay({},o.formatters),n.formatters),fromDate:q,labels:ay(ay({},o.labels),n.labels),mode:n.mode||o.mode,modifiers:ay(ay({},o.modifiers),n.modifiers),modifiersClassNames:ay(ay({},o.modifiersClassNames),n.modifiersClassNames),onSelect:m,styles:ay(ay({},o.styles),n.styles),toDate:r});return(0,d.jsx)(aG.Provider,{value:t,children:a.children})}function aI(){var a=(0,g.useContext)(aG);if(!a)throw Error("useDayPicker must be used within a DayPickerProvider.");return a}function aJ(a){var b=aI(),c=b.locale,e=b.classNames,f=b.styles,g=b.formatters.formatCaption;return(0,d.jsx)("div",{className:e.caption_label,style:f.caption_label,"aria-live":"polite",role:"presentation",id:a.id,children:g(a.displayMonth,{locale:c})})}function aK(a){return(0,d.jsx)("svg",ay({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},a,{children:(0,d.jsx)("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aL(a){var b,c,e=a.onChange,f=a.value,g=a.children,h=a.caption,i=a.className,j=a.style,k=aI(),l=null!=(c=null==(b=k.components)?void 0:b.IconDropdown)?c:aK;return(0,d.jsxs)("div",{className:i,style:j,children:[(0,d.jsx)("span",{className:k.classNames.vhidden,children:a["aria-label"]}),(0,d.jsx)("select",{name:a.name,"aria-label":a["aria-label"],className:k.classNames.dropdown,style:k.styles.dropdown,value:f,onChange:e,children:g}),(0,d.jsxs)("div",{className:k.classNames.caption_label,style:k.styles.caption_label,"aria-hidden":"true",children:[h,(0,d.jsx)(l,{className:k.classNames.dropdown_icon,style:k.styles.dropdown_icon})]})]})}function aM(a){var b,c=aI(),e=c.fromDate,f=c.toDate,g=c.styles,h=c.locale,j=c.formatters.formatMonthCaption,k=c.classNames,m=c.components,n=c.labels.labelMonthDropdown;if(!e||!f)return(0,d.jsx)(d.Fragment,{});var p=[];if(function(a,b,c){let[d,e]=(0,l.normalizeDates)(void 0,a,b);return d.getFullYear()===e.getFullYear()}(e,f))for(var q=(0,i.startOfMonth)(e),r=e.getMonth();r<=f.getMonth();r++)p.push(o(q,r));else for(var q=(0,i.startOfMonth)(new Date),r=0;r<=11;r++)p.push(o(q,r));var s=null!=(b=null==m?void 0:m.Dropdown)?b:aL;return(0,d.jsx)(s,{name:"months","aria-label":n(),className:k.dropdown_month,style:g.dropdown_month,onChange:function(b){var c=Number(b.target.value),d=o((0,i.startOfMonth)(a.displayMonth),c);a.onChange(d)},value:a.displayMonth.getMonth(),caption:j(a.displayMonth,{locale:h}),children:p.map(function(a){return(0,d.jsx)("option",{value:a.getMonth(),children:j(a,{locale:h})},a.getMonth())})})}function aN(a){var b,c=a.displayMonth,e=aI(),f=e.fromDate,g=e.toDate,h=e.locale,j=e.styles,k=e.classNames,l=e.components,m=e.formatters.formatYearCaption,n=e.labels.labelYearDropdown,o=[];if(!f||!g)return(0,d.jsx)(d.Fragment,{});for(var r=f.getFullYear(),s=g.getFullYear(),t=r;t<=s;t++)o.push(p((0,q.startOfYear)(new Date),t));var u=null!=(b=null==l?void 0:l.Dropdown)?b:aL;return(0,d.jsx)(u,{name:"years","aria-label":n(),className:k.dropdown_year,style:j.dropdown_year,onChange:function(b){var d=p((0,i.startOfMonth)(c),Number(b.target.value));a.onChange(d)},value:c.getFullYear(),caption:m(c,{locale:h}),children:o.map(function(a){return(0,d.jsx)("option",{value:a.getFullYear(),children:m(a,{locale:h})},a.getFullYear())})})}var aO=(0,g.createContext)(void 0);function aP(a){var b,c,e,f,h,j,k,l,m,n,o,p,q,v,w,x,y=aI(),z=(w=(e=(c=b=aI()).month,f=c.defaultMonth,h=c.today,j=e||f||h||new Date,k=c.toDate,l=c.fromDate,m=c.numberOfMonths,k&&0>r(k,j)&&(j=(0,s.addMonths)(k,-1*((void 0===m?1:m)-1))),l&&0>r(j,l)&&(j=l),n=(0,i.startOfMonth)(j),o=b.month,q=(p=(0,g.useState)(n))[0],v=[void 0===o?q:o,p[1]])[0],x=v[1],[w,function(a){if(!b.disableNavigation){var c,d=(0,i.startOfMonth)(a);x(d),null==(c=b.onMonthChange)||c.call(b,d)}}]),A=z[0],B=z[1],C=function(a,b){for(var c=b.reverseMonths,d=b.numberOfMonths,e=(0,i.startOfMonth)(a),f=r((0,i.startOfMonth)((0,s.addMonths)(e,d)),e),g=[],h=0;h<f;h++){var j=(0,s.addMonths)(e,h);g.push(j)}return c&&(g=g.reverse()),g}(A,y),D=function(a,b){if(!b.disableNavigation){var c=b.toDate,d=b.pagedNavigation,e=b.numberOfMonths,f=void 0===e?1:e,g=(0,i.startOfMonth)(a);if(!c||!(r(c,a)<f))return(0,s.addMonths)(g,d?f:1)}}(A,y),E=function(a,b){if(!b.disableNavigation){var c=b.fromDate,d=b.pagedNavigation,e=b.numberOfMonths,f=(0,i.startOfMonth)(a);if(!c||!(0>=r(f,c)))return(0,s.addMonths)(f,-(d?void 0===e?1:e:1))}}(A,y),F=function(a){return C.some(function(b){return t(a,b)})};return(0,d.jsx)(aO.Provider,{value:{currentMonth:A,displayMonths:C,goToMonth:B,goToDate:function(a,b){F(a)||(b&&u(a,b)?B((0,s.addMonths)(a,1+-1*y.numberOfMonths)):B(a))},previousMonth:E,nextMonth:D,isDateDisplayed:F},children:a.children})}function aQ(){var a=(0,g.useContext)(aO);if(!a)throw Error("useNavigation must be used within a NavigationProvider");return a}function aR(a){var b,c=aI(),e=c.classNames,f=c.styles,g=c.components,h=aQ().goToMonth,i=function(b){h((0,s.addMonths)(b,a.displayIndex?-a.displayIndex:0))},j=null!=(b=null==g?void 0:g.CaptionLabel)?b:aJ,k=(0,d.jsx)(j,{id:a.id,displayMonth:a.displayMonth});return(0,d.jsxs)("div",{className:e.caption_dropdowns,style:f.caption_dropdowns,children:[(0,d.jsx)("div",{className:e.vhidden,children:k}),(0,d.jsx)(aM,{onChange:i,displayMonth:a.displayMonth}),(0,d.jsx)(aN,{onChange:i,displayMonth:a.displayMonth})]})}function aS(a){return(0,d.jsx)("svg",ay({width:"16px",height:"16px",viewBox:"0 0 120 120"},a,{children:(0,d.jsx)("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aT(a){return(0,d.jsx)("svg",ay({width:"16px",height:"16px",viewBox:"0 0 120 120"},a,{children:(0,d.jsx)("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var aU=(0,g.forwardRef)(function(a,b){var c=aI(),e=c.classNames,f=c.styles,g=[e.button_reset,e.button];a.className&&g.push(a.className);var h=g.join(" "),i=ay(ay({},f.button_reset),f.button);return a.style&&Object.assign(i,a.style),(0,d.jsx)("button",ay({},a,{ref:b,type:"button",className:h,style:i}))});function aV(a){var b,c,e=aI(),f=e.dir,g=e.locale,h=e.classNames,i=e.styles,j=e.labels,k=j.labelPrevious,l=j.labelNext,m=e.components;if(!a.nextMonth&&!a.previousMonth)return(0,d.jsx)(d.Fragment,{});var n=k(a.previousMonth,{locale:g}),o=[h.nav_button,h.nav_button_previous].join(" "),p=l(a.nextMonth,{locale:g}),q=[h.nav_button,h.nav_button_next].join(" "),r=null!=(b=null==m?void 0:m.IconRight)?b:aT,s=null!=(c=null==m?void 0:m.IconLeft)?c:aS;return(0,d.jsxs)("div",{className:h.nav,style:i.nav,children:[!a.hidePrevious&&(0,d.jsx)(aU,{name:"previous-month","aria-label":n,className:o,style:i.nav_button_previous,disabled:!a.previousMonth,onClick:a.onPreviousClick,children:"rtl"===f?(0,d.jsx)(r,{className:h.nav_icon,style:i.nav_icon}):(0,d.jsx)(s,{className:h.nav_icon,style:i.nav_icon})}),!a.hideNext&&(0,d.jsx)(aU,{name:"next-month","aria-label":p,className:q,style:i.nav_button_next,disabled:!a.nextMonth,onClick:a.onNextClick,children:"rtl"===f?(0,d.jsx)(s,{className:h.nav_icon,style:i.nav_icon}):(0,d.jsx)(r,{className:h.nav_icon,style:i.nav_icon})})]})}function aW(a){var b=aI().numberOfMonths,c=aQ(),e=c.previousMonth,f=c.nextMonth,g=c.goToMonth,h=c.displayMonths,i=h.findIndex(function(b){return t(a.displayMonth,b)}),j=0===i,k=i===h.length-1;return(0,d.jsx)(aV,{displayMonth:a.displayMonth,hideNext:b>1&&(j||!k),hidePrevious:b>1&&(k||!j),nextMonth:f,previousMonth:e,onPreviousClick:function(){e&&g(e)},onNextClick:function(){f&&g(f)}})}function aX(a){var b,c,e=aI(),f=e.classNames,g=e.disableNavigation,h=e.styles,i=e.captionLayout,j=e.components,k=null!=(b=null==j?void 0:j.CaptionLabel)?b:aJ;return c=g?(0,d.jsx)(k,{id:a.id,displayMonth:a.displayMonth}):"dropdown"===i?(0,d.jsx)(aR,{displayMonth:a.displayMonth,id:a.id}):"dropdown-buttons"===i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aR,{displayMonth:a.displayMonth,displayIndex:a.displayIndex,id:a.id}),(0,d.jsx)(aW,{displayMonth:a.displayMonth,displayIndex:a.displayIndex,id:a.id})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k,{id:a.id,displayMonth:a.displayMonth,displayIndex:a.displayIndex}),(0,d.jsx)(aW,{displayMonth:a.displayMonth,id:a.id})]}),(0,d.jsx)("div",{className:f.caption,style:h.caption,children:c})}function aY(a){var b=aI(),c=b.footer,e=b.styles,f=b.classNames.tfoot;return c?(0,d.jsx)("tfoot",{className:f,style:e.tfoot,children:(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:8,children:c})})}):(0,d.jsx)(d.Fragment,{})}function aZ(){var a=aI(),b=a.classNames,c=a.styles,e=a.showWeekNumber,f=a.locale,g=a.weekStartsOn,h=a.ISOWeek,i=a.formatters.formatWeekdayName,j=a.labels.labelWeekday,k=function(a,b,c){for(var d=c?(0,v.startOfISOWeek)(new Date):(0,w.startOfWeek)(new Date,{locale:a,weekStartsOn:b}),e=[],f=0;f<7;f++){var g=(0,x.addDays)(d,f);e.push(g)}return e}(f,g,h);return(0,d.jsxs)("tr",{style:c.head_row,className:b.head_row,children:[e&&(0,d.jsx)("td",{style:c.head_cell,className:b.head_cell}),k.map(function(a,e){return(0,d.jsx)("th",{scope:"col",className:b.head_cell,style:c.head_cell,"aria-label":j(a,{locale:f}),children:i(a,{locale:f})},e)})]})}function a$(){var a,b=aI(),c=b.classNames,e=b.styles,f=b.components,g=null!=(a=null==f?void 0:f.HeadRow)?a:aZ;return(0,d.jsx)("thead",{style:e.head,className:c.head,children:(0,d.jsx)(g,{})})}function a_(a){var b=aI(),c=b.locale,e=b.formatters.formatDay;return(0,d.jsx)(d.Fragment,{children:e(a.date,{locale:c})})}var a0=(0,g.createContext)(void 0);function a1(a){return aA(a.initialProps)?(0,d.jsx)(a2,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(a0.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:a.children})}function a2(a){var b=a.initialProps,c=a.children,e=b.selected,f=b.min,g=b.max,h={disabled:[]};return e&&h.disabled.push(function(a){var b=g&&e.length>g-1,c=e.some(function(b){return(0,y.isSameDay)(b,a)});return!!(b&&!c)}),(0,d.jsx)(a0.Provider,{value:{selected:e,onDayClick:function(a,c,d){var h,i;if((null==(h=b.onDayClick)||h.call(b,a,c,d),!c.selected||!f||(null==e?void 0:e.length)!==f)&&!(!c.selected&&g&&(null==e?void 0:e.length)===g)){var j=e?az([],e,!0):[];if(c.selected){var k=j.findIndex(function(b){return(0,y.isSameDay)(a,b)});j.splice(k,1)}else j.push(a);null==(i=b.onSelect)||i.call(b,j,a,c,d)}},modifiers:h},children:c})}function a3(){var a=(0,g.useContext)(a0);if(!a)throw Error("useSelectMultiple must be used within a SelectMultipleProvider");return a}var a4=(0,g.createContext)(void 0);function a5(a){return aB(a.initialProps)?(0,d.jsx)(a6,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(a4.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:a.children})}function a6(a){var b=a.initialProps,c=a.children,e=b.selected,f=e||{},g=f.from,h=f.to,i=b.min,j=b.max,k={range_start:[],range_end:[],range_middle:[],disabled:[]};if(g?(k.range_start=[g],h?(k.range_end=[h],(0,y.isSameDay)(g,h)||(k.range_middle=[{after:g,before:h}])):k.range_end=[g]):h&&(k.range_start=[h],k.range_end=[h]),i&&(g&&!h&&k.disabled.push({after:(0,A.subDays)(g,i-1),before:(0,x.addDays)(g,i-1)}),g&&h&&k.disabled.push({after:g,before:(0,x.addDays)(g,i-1)}),!g&&h&&k.disabled.push({after:(0,A.subDays)(h,i-1),before:(0,x.addDays)(h,i-1)})),j){if(g&&!h&&(k.disabled.push({before:(0,x.addDays)(g,-j+1)}),k.disabled.push({after:(0,x.addDays)(g,j-1)})),g&&h){var l=j-((0,B.differenceInCalendarDays)(h,g)+1);k.disabled.push({before:(0,A.subDays)(g,l)}),k.disabled.push({after:(0,x.addDays)(h,l)})}!g&&h&&(k.disabled.push({before:(0,x.addDays)(h,-j+1)}),k.disabled.push({after:(0,x.addDays)(h,j-1)}))}return(0,d.jsx)(a4.Provider,{value:{selected:e,onDayClick:function(a,c,d){null==(j=b.onDayClick)||j.call(b,a,c,d);var f,g,h,i,j,k,l=(f=a,h=(g=e||{}).from,i=g.to,h&&i?(0,y.isSameDay)(i,f)&&(0,y.isSameDay)(h,f)?void 0:(0,y.isSameDay)(i,f)?{from:i,to:void 0}:(0,y.isSameDay)(h,f)?void 0:z(h,f)?{from:f,to:i}:{from:h,to:f}:i?z(f,i)?{from:i,to:f}:{from:f,to:i}:h?u(f,h)?{from:f,to:h}:{from:h,to:f}:{from:f,to:void 0});null==(k=b.onSelect)||k.call(b,l,a,c,d)},modifiers:k},children:c})}function a7(){var a=(0,g.useContext)(a4);if(!a)throw Error("useSelectRange must be used within a SelectRangeProvider");return a}function a8(a){return Array.isArray(a)?az([],a,!0):void 0!==a?[a]:[]}(b=c||(c={})).Outside="outside",b.Disabled="disabled",b.Selected="selected",b.Hidden="hidden",b.Today="today",b.RangeStart="range_start",b.RangeEnd="range_end",b.RangeMiddle="range_middle";var a9=c.Selected,ba=c.Disabled,bb=c.Hidden,bc=c.Today,bd=c.RangeEnd,be=c.RangeMiddle,bf=c.RangeStart,bg=c.Outside,bh=(0,g.createContext)(void 0);function bi(a){var b,c,e,f,g=aI(),h=a3(),i=a7(),j=((b={})[a9]=a8(g.selected),b[ba]=a8(g.disabled),b[bb]=a8(g.hidden),b[bc]=[g.today],b[bd]=[],b[be]=[],b[bf]=[],b[bg]=[],c=b,g.fromDate&&c[ba].push({before:g.fromDate}),g.toDate&&c[ba].push({after:g.toDate}),aA(g)?c[ba]=c[ba].concat(h.modifiers[ba]):aB(g)&&(c[ba]=c[ba].concat(i.modifiers[ba]),c[bf]=i.modifiers[bf],c[be]=i.modifiers[be],c[bd]=i.modifiers[bd]),c),k=(e=g.modifiers,f={},Object.entries(e).forEach(function(a){var b=a[0],c=a[1];f[b]=a8(c)}),f),l=ay(ay({},j),k);return(0,d.jsx)(bh.Provider,{value:l,children:a.children})}function bj(){var a=(0,g.useContext)(bh);if(!a)throw Error("useModifiers must be used within a ModifiersProvider");return a}function bk(a,b,c){var d=Object.keys(b).reduce(function(c,d){return b[d].some(function(b){if("boolean"==typeof b)return b;if((0,C.isDate)(b))return(0,y.isSameDay)(a,b);if(Array.isArray(b)&&b.every(C.isDate))return b.includes(a);if(b&&"object"==typeof b&&"from"in b)return d=b.from,e=b.to,d&&e?(0>(0,B.differenceInCalendarDays)(e,d)&&(d=(c=[e,d])[0],e=c[1]),(0,B.differenceInCalendarDays)(a,d)>=0&&(0,B.differenceInCalendarDays)(e,a)>=0):e?(0,y.isSameDay)(e,a):!!d&&(0,y.isSameDay)(d,a);if(b&&"object"==typeof b&&"dayOfWeek"in b)return b.dayOfWeek.includes(a.getDay());if(b&&"object"==typeof b&&"before"in b&&"after"in b){var c,d,e,f=(0,B.differenceInCalendarDays)(b.before,a),g=(0,B.differenceInCalendarDays)(b.after,a),h=f>0,i=g<0;return z(b.before,b.after)?i&&h:h||i}return b&&"object"==typeof b&&"after"in b?(0,B.differenceInCalendarDays)(a,b.after)>0:b&&"object"==typeof b&&"before"in b?(0,B.differenceInCalendarDays)(b.before,a)>0:"function"==typeof b&&b(a)})&&c.push(d),c},[]),e={};return d.forEach(function(a){return e[a]=!0}),c&&!t(a,c)&&(e.outside=!0),e}var bl=(0,g.createContext)(void 0);function bm(a){var b=aQ(),c=bj(),e=(0,g.useState)(),f=e[0],h=e[1],k=(0,g.useState)(),l=k[0],o=k[1],p=function(a,b){for(var c,d,e=(0,i.startOfMonth)(a[0]),f=(0,j.endOfMonth)(a[a.length-1]),g=e;g<=f;){var h=bk(g,b);if(!(!h.disabled&&!h.hidden)){g=(0,x.addDays)(g,1);continue}if(h.selected)return g;h.today&&!d&&(d=g),c||(c=g),g=(0,x.addDays)(g,1)}return d||c}(b.displayMonths,c),q=(null!=f?f:l&&b.isDateDisplayed(l))?l:p,r=function(a){h(a)},t=aI(),u=function(a,d){if(f){var e=function a(b,c){var d=c.moveBy,e=c.direction,f=c.context,g=c.modifiers,h=c.retry,i=void 0===h?{count:0,lastFocused:b}:h,j=f.weekStartsOn,k=f.fromDate,l=f.toDate,o=f.locale,p=({day:x.addDays,week:D.addWeeks,month:s.addMonths,year:E,startOfWeek:function(a){return f.ISOWeek?(0,v.startOfISOWeek)(a):(0,w.startOfWeek)(a,{locale:o,weekStartsOn:j})},endOfWeek:function(a){return f.ISOWeek?G(a):(0,F.endOfWeek)(a,{locale:o,weekStartsOn:j})}})[d](b,"after"===e?1:-1);if("before"===e&&k){let a,b;b=void 0,[k,p].forEach(c=>{b||"object"!=typeof c||(b=m.constructFrom.bind(null,c));let d=(0,n.toDate)(c,b);(!a||a<d||isNaN(+d))&&(a=d)}),p=(0,m.constructFrom)(b,a||NaN)}else{let a,b;"after"===e&&l&&(b=void 0,[l,p].forEach(c=>{b||"object"!=typeof c||(b=m.constructFrom.bind(null,c));let d=(0,n.toDate)(c,b);(!a||a>d||isNaN(+d))&&(a=d)}),p=(0,m.constructFrom)(b,a||NaN))}var q=!0;if(g){var r=bk(p,g);q=!r.disabled&&!r.hidden}return q?p:i.count>365?i.lastFocused:a(p,{moveBy:d,direction:e,context:f,modifiers:g,retry:ay(ay({},i),{count:i.count+1})})}(f,{moveBy:a,direction:d,context:t,modifiers:c});(0,y.isSameDay)(f,e)||(b.goToDate(e,f),r(e))}};return(0,d.jsx)(bl.Provider,{value:{focusedDay:f,focusTarget:q,blur:function(){o(f),h(void 0)},focus:r,focusDayAfter:function(){return u("day","after")},focusDayBefore:function(){return u("day","before")},focusWeekAfter:function(){return u("week","after")},focusWeekBefore:function(){return u("week","before")},focusMonthBefore:function(){return u("month","before")},focusMonthAfter:function(){return u("month","after")},focusYearBefore:function(){return u("year","before")},focusYearAfter:function(){return u("year","after")},focusStartOfWeek:function(){return u("startOfWeek","before")},focusEndOfWeek:function(){return u("endOfWeek","after")}},children:a.children})}function bn(){var a=(0,g.useContext)(bl);if(!a)throw Error("useFocusContext must be used within a FocusProvider");return a}var bo=(0,g.createContext)(void 0);function bp(a){return aC(a.initialProps)?(0,d.jsx)(bq,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(bo.Provider,{value:{selected:void 0},children:a.children})}function bq(a){var b=a.initialProps,c=a.children,e={selected:b.selected,onDayClick:function(a,c,d){var e,f,g;if(null==(e=b.onDayClick)||e.call(b,a,c,d),c.selected&&!b.required){null==(f=b.onSelect)||f.call(b,void 0,a,c,d);return}null==(g=b.onSelect)||g.call(b,a,a,c,d)}};return(0,d.jsx)(bo.Provider,{value:e,children:c})}function br(){var a=(0,g.useContext)(bo);if(!a)throw Error("useSelectSingle must be used within a SelectSingleProvider");return a}function bs(a){var b,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=(0,g.useRef)(null),W=(b=a.date,e=a.displayMonth,j=aI(),k=bn(),l=bk(b,bj(),e),m=aI(),n=br(),o=a3(),p=a7(),r=(q=bn()).focusDayAfter,s=q.focusDayBefore,t=q.focusWeekAfter,u=q.focusWeekBefore,v=q.blur,w=q.focus,x=q.focusMonthBefore,z=q.focusMonthAfter,A=q.focusYearBefore,B=q.focusYearAfter,C=q.focusStartOfWeek,D=q.focusEndOfWeek,E={onClick:function(a){var c,d,e,f;aC(m)?null==(c=n.onDayClick)||c.call(n,b,l,a):aA(m)?null==(d=o.onDayClick)||d.call(o,b,l,a):aB(m)?null==(e=p.onDayClick)||e.call(p,b,l,a):null==(f=m.onDayClick)||f.call(m,b,l,a)},onFocus:function(a){var c;w(b),null==(c=m.onDayFocus)||c.call(m,b,l,a)},onBlur:function(a){var c;v(),null==(c=m.onDayBlur)||c.call(m,b,l,a)},onKeyDown:function(a){var c;switch(a.key){case"ArrowLeft":a.preventDefault(),a.stopPropagation(),"rtl"===m.dir?r():s();break;case"ArrowRight":a.preventDefault(),a.stopPropagation(),"rtl"===m.dir?s():r();break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),t();break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),u();break;case"PageUp":a.preventDefault(),a.stopPropagation(),a.shiftKey?A():x();break;case"PageDown":a.preventDefault(),a.stopPropagation(),a.shiftKey?B():z();break;case"Home":a.preventDefault(),a.stopPropagation(),C();break;case"End":a.preventDefault(),a.stopPropagation(),D()}null==(c=m.onDayKeyDown)||c.call(m,b,l,a)},onKeyUp:function(a){var c;null==(c=m.onDayKeyUp)||c.call(m,b,l,a)},onMouseEnter:function(a){var c;null==(c=m.onDayMouseEnter)||c.call(m,b,l,a)},onMouseLeave:function(a){var c;null==(c=m.onDayMouseLeave)||c.call(m,b,l,a)},onPointerEnter:function(a){var c;null==(c=m.onDayPointerEnter)||c.call(m,b,l,a)},onPointerLeave:function(a){var c;null==(c=m.onDayPointerLeave)||c.call(m,b,l,a)},onTouchCancel:function(a){var c;null==(c=m.onDayTouchCancel)||c.call(m,b,l,a)},onTouchEnd:function(a){var c;null==(c=m.onDayTouchEnd)||c.call(m,b,l,a)},onTouchMove:function(a){var c;null==(c=m.onDayTouchMove)||c.call(m,b,l,a)},onTouchStart:function(a){var c;null==(c=m.onDayTouchStart)||c.call(m,b,l,a)}},F=aI(),G=br(),H=a3(),I=a7(),J=aC(F)?G.selected:aA(F)?H.selected:aB(F)?I.selected:void 0,K=!!(j.onDayClick||"default"!==j.mode),(0,g.useEffect)(function(){var a;l.outside||!k.focusedDay||K&&(0,y.isSameDay)(k.focusedDay,b)&&(null==(a=V.current)||a.focus())},[k.focusedDay,b,V,K,l.outside]),M=(L=[j.classNames.day],Object.keys(l).forEach(function(a){var b=j.modifiersClassNames[a];if(b)L.push(b);else if(Object.values(c).includes(a)){var d=j.classNames["day_".concat(a)];d&&L.push(d)}}),L).join(" "),N=ay({},j.styles.day),Object.keys(l).forEach(function(a){var b;N=ay(ay({},N),null==(b=j.modifiersStyles)?void 0:b[a])}),O=N,P=!!(l.outside&&!j.showOutsideDays||l.hidden),Q=null!=(i=null==(h=j.components)?void 0:h.DayContent)?i:a_,R={style:O,className:M,children:(0,d.jsx)(Q,{date:b,displayMonth:e,activeModifiers:l}),role:"gridcell"},S=k.focusTarget&&(0,y.isSameDay)(k.focusTarget,b)&&!l.outside,T=k.focusedDay&&(0,y.isSameDay)(k.focusedDay,b),U=ay(ay(ay({},R),((f={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,f.tabIndex=T||S?0:-1,f)),E),{isButton:K,isHidden:P,activeModifiers:l,selectedDays:J,buttonProps:U,divProps:R});return W.isHidden?(0,d.jsx)("div",{role:"gridcell"}):W.isButton?(0,d.jsx)(aU,ay({name:"day",ref:V},W.buttonProps)):(0,d.jsx)("div",ay({},W.divProps))}function bt(a){var b=a.number,c=a.dates,e=aI(),f=e.onWeekNumberClick,g=e.styles,h=e.classNames,i=e.locale,j=e.labels.labelWeekNumber,k=(0,e.formatters.formatWeekNumber)(Number(b),{locale:i});if(!f)return(0,d.jsx)("span",{className:h.weeknumber,style:g.weeknumber,children:k});var l=j(Number(b),{locale:i});return(0,d.jsx)(aU,{name:"week-number","aria-label":l,className:h.weeknumber,style:g.weeknumber,onClick:function(a){f(b,c,a)},children:k})}function bu(a){var b,c,e,f=aI(),g=f.styles,h=f.classNames,i=f.showWeekNumber,j=f.components,k=null!=(b=null==j?void 0:j.Day)?b:bs,l=null!=(c=null==j?void 0:j.WeekNumber)?c:bt;return i&&(e=(0,d.jsx)("td",{className:h.cell,style:g.cell,children:(0,d.jsx)(l,{number:a.weekNumber,dates:a.dates})})),(0,d.jsxs)("tr",{className:h.row,style:g.row,children:[e,a.dates.map(function(b){return(0,d.jsx)("td",{className:h.cell,style:g.cell,role:"presentation",children:(0,d.jsx)(k,{displayMonth:a.displayMonth,date:b})},Math.trunc((0,n.toDate)(b)/1e3))})]})}function bv(a,b,c){for(var d=(null==c?void 0:c.ISOWeek)?G(b):(0,F.endOfWeek)(b,c),e=(null==c?void 0:c.ISOWeek)?(0,v.startOfISOWeek)(a):(0,w.startOfWeek)(a,c),f=(0,B.differenceInCalendarDays)(d,e),g=[],h=0;h<=f;h++)g.push((0,x.addDays)(e,h));return g.reduce(function(a,b){var d=(null==c?void 0:c.ISOWeek)?(0,H.getISOWeek)(b):(0,I.getWeek)(b,c),e=a.find(function(a){return a.weekNumber===d});return e?e.dates.push(b):a.push({weekNumber:d,dates:[b]}),a},[])}function bw(a){var b,c,e,f=aI(),g=f.locale,h=f.classNames,k=f.styles,m=f.hideHead,o=f.fixedWeeks,p=f.components,q=f.weekStartsOn,r=f.firstWeekContainsDate,s=f.ISOWeek,t=function(a,b){var c=bv((0,i.startOfMonth)(a),(0,j.endOfMonth)(a),b);if(null==b?void 0:b.useFixedWeeks){let j,k,m;var d=function(a,b,c){let[d,e]=(0,l.normalizeDates)(c?.in,a,b),f=(0,w.startOfWeek)(d,c),g=(0,w.startOfWeek)(e,c);return Math.round((f-(0,J.getTimezoneOffsetInMilliseconds)(f)-(g-(0,J.getTimezoneOffsetInMilliseconds)(g)))/K.millisecondsInWeek)}((j=(0,n.toDate)(a,b?.in),m=(k=(0,n.toDate)(j,b?.in)).getMonth(),k.setFullYear(k.getFullYear(),m+1,0),k.setHours(0,0,0,0),(0,n.toDate)(k,b?.in)),(0,i.startOfMonth)(j,b),b)+1;if(d<6){var e=c[c.length-1],f=e.dates[e.dates.length-1],g=(0,D.addWeeks)(f,6-d),h=bv((0,D.addWeeks)(f,1),g,b);c.push.apply(c,h)}}return c}(a.displayMonth,{useFixedWeeks:!!o,ISOWeek:s,locale:g,weekStartsOn:q,firstWeekContainsDate:r}),u=null!=(b=null==p?void 0:p.Head)?b:a$,v=null!=(c=null==p?void 0:p.Row)?c:bu,x=null!=(e=null==p?void 0:p.Footer)?e:aY;return(0,d.jsxs)("table",{id:a.id,className:h.table,style:k.table,role:"grid","aria-labelledby":a["aria-labelledby"],children:[!m&&(0,d.jsx)(u,{}),(0,d.jsx)("tbody",{className:h.tbody,style:k.tbody,children:t.map(function(b){return(0,d.jsx)(v,{displayMonth:a.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),(0,d.jsx)(x,{displayMonth:a.displayMonth})]})}var bx=g.useEffect,by=!1,bz=0;function bA(){return"react-day-picker-".concat(++bz)}function bB(a){var b,c,e,f,h,i,j,k,l=aI(),m=l.dir,n=l.classNames,o=l.styles,p=l.components,q=aQ().displayMonths,r=(e=null!=(b=l.id?"".concat(l.id,"-").concat(a.displayIndex):void 0)?b:by?bA():null,h=(f=(0,g.useState)(e))[0],i=f[1],bx(function(){null===h&&i(bA())},[]),(0,g.useEffect)(function(){!1===by&&(by=!0)},[]),null!=(c=null!=b?b:h)?c:void 0),s=l.id?"".concat(l.id,"-grid-").concat(a.displayIndex):void 0,t=[n.month],u=o.month,v=0===a.displayIndex,w=a.displayIndex===q.length-1,x=!v&&!w;"rtl"===m&&(w=(j=[v,w])[0],v=j[1]),v&&(t.push(n.caption_start),u=ay(ay({},u),o.caption_start)),w&&(t.push(n.caption_end),u=ay(ay({},u),o.caption_end)),x&&(t.push(n.caption_between),u=ay(ay({},u),o.caption_between));var y=null!=(k=null==p?void 0:p.Caption)?k:aX;return(0,d.jsxs)("div",{className:t.join(" "),style:u,children:[(0,d.jsx)(y,{id:r,displayMonth:a.displayMonth,displayIndex:a.displayIndex}),(0,d.jsx)(bw,{id:s,"aria-labelledby":r,displayMonth:a.displayMonth})]},a.displayIndex)}function bC(a){var b=aI(),c=b.classNames,e=b.styles;return(0,d.jsx)("div",{className:c.months,style:e.months,children:a.children})}function bD(a){var b,c,e=a.initialProps,f=aI(),h=bn(),i=aQ(),j=(0,g.useState)(!1),k=j[0],l=j[1];(0,g.useEffect)(function(){f.initialFocus&&h.focusTarget&&(k||(h.focus(h.focusTarget),l(!0)))},[f.initialFocus,k,h.focus,h.focusTarget,h]);var m=[f.classNames.root,f.className];f.numberOfMonths>1&&m.push(f.classNames.multiple_months),f.showWeekNumber&&m.push(f.classNames.with_weeknumber);var n=ay(ay({},f.styles.root),f.style),o=Object.keys(e).filter(function(a){return a.startsWith("data-")}).reduce(function(a,b){var c;return ay(ay({},a),((c={})[b]=e[b],c))},{}),p=null!=(c=null==(b=e.components)?void 0:b.Months)?c:bC;return(0,d.jsx)("div",ay({className:m.join(" "),style:n,dir:f.dir,id:f.id,nonce:e.nonce,title:e.title,lang:e.lang},o,{children:(0,d.jsx)(p,{children:i.displayMonths.map(function(a,b){return(0,d.jsx)(bB,{displayIndex:b,displayMonth:a},b)})})}))}function bE(a){var b=a.children,c=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}(a,["children"]);return(0,d.jsx)(aH,{initialProps:c,children:(0,d.jsx)(aP,{children:(0,d.jsx)(bp,{initialProps:c,children:(0,d.jsx)(a1,{initialProps:c,children:(0,d.jsx)(a5,{initialProps:c,children:(0,d.jsx)(bi,{children:(0,d.jsx)(bm,{children:b})})})})})})})}function bF(a){return(0,d.jsx)(bE,ay({},a,{children:(0,d.jsx)(bD,{initialProps:a})}))}var bG=a.i(139138),bH=a.i(638904);function bI({className:a,classNames:b,showOutsideDays:c=!0,...g}){return(0,d.jsx)(bF,{showOutsideDays:c,className:(0,bG.cn)("p-3 pointer-events-auto",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",caption_dropdowns:"flex justify-center gap-1",nav:"space-x-1 flex items-center",nav_button:(0,bG.cn)((0,bH.buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,bG.cn)((0,bH.buttonVariants)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",dropdown:"bg-background rounded-md border p-1 shadow-md",dropdown_month:"w-[var(--rdp-caption-dropdown-month-width)]",dropdown_year:"w-[var(--rdp-caption-dropdown-year-width)]",dropdown_icon:"w-4 h-4",button_reset:"appearance-none bg-transparent border-none p-0 m-0",vhidden:"sr-only",...b},components:{IconLeft:({...a})=>(0,d.jsx)(e.ChevronLeft,{className:"h-4 w-4"}),IconRight:({...a})=>(0,d.jsx)(f.ChevronRight,{className:"h-4 w-4"})},...g})}bI.displayName="Calendar",a.s(["Calendar",()=>bI],580178)},479894,a=>{"use strict";let b=(0,a.i(701269).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);a.s(["Tag",()=>b],479894)},180298,a=>{"use strict";var b=a.i(907997),c=a.i(638904),d=a.i(760612),e=a.i(751066),f=a.i(580178),g=a.i(12208);a.s(["default",0,({dateRange:a,onDateRangeChange:h})=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",onClick:a=>{a.stopPropagation()},children:[(0,b.jsxs)(e.Popover,{children:[(0,b.jsx)(e.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{variant:"outline",className:"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal",children:[(0,b.jsx)(d.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.from?(0,g.format)(a.from,"MMM d, yyyy"):"Start Date"})]})}),(0,b.jsx)(e.PopoverContent,{className:"w-auto p-0 z-[100] bg-white shadow-lg",align:"start",children:(0,b.jsx)(f.Calendar,{initialFocus:!0,mode:"single",defaultMonth:a?.from,selected:a?.from,onSelect:b=>h({...a,from:b}),className:"p-3 pointer-events-auto",showOutsideDays:!0})})]}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"to"}),(0,b.jsxs)(e.Popover,{children:[(0,b.jsx)(e.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{variant:"outline",className:"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal",children:[(0,b.jsx)(d.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.to?(0,g.format)(a.to,"MMM d, yyyy"):"End Date"})]})}),(0,b.jsx)(e.PopoverContent,{className:"w-auto p-0 z-[100] bg-white shadow-lg",align:"start",children:(0,b.jsx)(f.Calendar,{initialFocus:!0,mode:"single",defaultMonth:a?.to,selected:a?.to,onSelect:b=>h({...a,to:b}),className:"p-3 pointer-events-auto",showOutsideDays:!0})})]})]})])},318201,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(431886),f=a.i(857396),g=a.i(533039),h=a.i(971358),i=b([e,g,h]);[e,g,h]=i.then?(await i)():i,a.s(["useSalesCategories",0,()=>{let[a,b]=(0,d.useState)([]),[c,i]=(0,d.useState)(!0),{currentBusiness:j}=(0,e.useBusiness)(),{user:k}=(0,g.useAuth)(),l=async()=>{if(!j){b([]),i(!1);return}try{let a=await (0,h.getSalesCategoriesAction)(j.id);if(a.success&&a.data)b(a.data);else throw Error(a.error)}catch(a){console.error("Error fetching sales categories:",a),(0,f.toast)({title:"Error",description:"Failed to fetch sales categories",variant:"destructive"})}finally{i(!1)}};(0,d.useEffect)(()=>{l()},[j]);let m=async a=>{if(!j||!k)return(0,f.toast)({title:"Error",description:"No business selected or user not authenticated",variant:"destructive"}),!1;try{let b=await (0,h.createSalesCategoryAction)(j.id,k.id,a);if(b.success)return(0,f.toast)({title:"Success",description:"Sales category created successfully"}),l(),!0;throw Error(b.error)}catch(a){return console.error("Error creating sales category:",a),(0,f.toast)({title:"Error",description:"Failed to create sales category",variant:"destructive"}),!1}},n=async(a,b)=>{try{let c=await (0,h.updateSalesCategoryAction)(a,b);if(c.success)return(0,f.toast)({title:"Success",description:"Sales category updated successfully"}),l(),!0;throw Error(c.error)}catch(a){return console.error("Error updating sales category:",a),(0,f.toast)({title:"Error",description:"Failed to update sales category",variant:"destructive"}),!1}},o=async a=>{try{let b=await (0,h.deleteSalesCategoryAction)(a);if(b.success)return(0,f.toast)({title:"Success",description:"Sales category deleted successfully"}),l(),!0;throw Error(b.error)}catch(a){return console.error("Error deleting sales category:",a),(0,f.toast)({title:"Error",description:"Failed to delete sales category",variant:"destructive"}),!1}},p=async()=>{if(j&&k)try{for(let a of["Retail","Online","Wholesale"])await (0,h.createSalesCategoryAction)(j.id,k.id,a,!0);l()}catch(a){console.error("Error creating default categories:",a)}};return{categories:a,isLoading:c,createCategory:m,updateCategory:n,deleteCategory:o,createDefaultCategories:p,refetch:l}}]),c()}catch(a){c(a)}},!1),284248,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(850931),f=a.i(170444),g=a.i(638904),h=a.i(760612),i=a.i(751066),j=a.i(580178),k=a.i(12208),l=a.i(440905),m=a.i(433459),n=a.i(479894),o=a.i(180298),p=a.i(318201),q=b([p]);[p]=q.then?(await q)():q,a.s(["default",0,({searchQuery:a,setSearchQuery:b,paymentFilter:c,setPaymentFilter:q,cashTransactionFilter:r,setCashTransactionFilter:s,categoryFilter:t,setCategoryFilter:u,dateFilter:v,setDateFilter:w,dateRange:x,setDateRange:y,specificDate:z,setSpecificDate:A,isCustomRange:B,isSpecificDate:C,sortOrder:D="desc",setSortOrder:E})=>{let{categories:F}=(0,p.useSalesCategories)();return(0,d.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(e.Input,{placeholder:"Search by customer, item, or receipt number...",className:"pl-10 bg-white border-border/50 focus:border-primary h-10",value:a,onChange:a=>{b(a.target.value)}})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none",children:(0,d.jsx)(m.Filter,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)(f.Select,{value:c,onValueChange:q,children:[(0,d.jsx)(f.SelectTrigger,{className:"bg-white border-border/50 pl-10 h-10",children:(0,d.jsx)(f.SelectValue,{placeholder:"Payment Status"})}),(0,d.jsxs)(f.SelectContent,{className:"bg-white shadow-lg border border-border/50",children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Payment Statuses"}),(0,d.jsx)(f.SelectItem,{value:"Paid",children:"Paid"}),(0,d.jsx)(f.SelectItem,{value:"NOT PAID",children:"NOT PAID"}),(0,d.jsx)(f.SelectItem,{value:"Quote",children:"Quote"}),(0,d.jsx)(f.SelectItem,{value:"Installment Sale",children:"Installment Sale"})]})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none",children:(0,d.jsx)(m.Filter,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)(f.Select,{value:r,onValueChange:s,children:[(0,d.jsx)(f.SelectTrigger,{className:"bg-white border-border/50 pl-10 h-10",children:(0,d.jsx)(f.SelectValue,{placeholder:"Cash Transaction"})}),(0,d.jsxs)(f.SelectContent,{className:"bg-white shadow-lg border border-border/50",children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Sales"}),(0,d.jsx)(f.SelectItem,{value:"linked",children:"Linked to Cash"}),(0,d.jsx)(f.SelectItem,{value:"unlinked",children:"Not Linked to Cash"})]})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none",children:(0,d.jsx)(n.Tag,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)(f.Select,{value:t,onValueChange:u,children:[(0,d.jsx)(f.SelectTrigger,{className:"bg-white border-border/50 pl-10 h-10",children:(0,d.jsx)(f.SelectValue,{placeholder:"Category"})}),(0,d.jsxs)(f.SelectContent,{className:"bg-white shadow-lg border border-border/50",children:[(0,d.jsx)(f.SelectItem,{value:"all",children:"All Categories"}),(0,d.jsx)(f.SelectItem,{value:"none",children:"No Source"}),F.map(a=>(0,d.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 pointer-events-none",children:(0,d.jsx)(h.Calendar,{className:"h-4 w-4 text-muted-foreground"})}),(0,d.jsxs)(f.Select,{value:v,onValueChange:a=>{w(a)},children:[(0,d.jsx)(f.SelectTrigger,{className:"bg-white border-border/50 pl-10 h-10",children:(0,d.jsx)(f.SelectValue,{placeholder:"Date Range"})}),(0,d.jsxs)(f.SelectContent,{className:"bg-white shadow-lg border border-border/50",children:[(0,d.jsx)(f.SelectItem,{value:"today",children:"Today"}),(0,d.jsx)(f.SelectItem,{value:"yesterday",children:"Yesterday"}),(0,d.jsx)(f.SelectItem,{value:"this-week",children:"This Week"}),(0,d.jsx)(f.SelectItem,{value:"last-week",children:"Last Week"}),(0,d.jsx)(f.SelectItem,{value:"this-month",children:"This Month"}),(0,d.jsx)(f.SelectItem,{value:"last-month",children:"Last Month"}),(0,d.jsx)(f.SelectItem,{value:"this-year",children:"This Year"}),(0,d.jsx)(f.SelectItem,{value:"specific",children:"Specific Date"}),(0,d.jsx)(f.SelectItem,{value:"custom",children:"Custom Range"}),(0,d.jsx)(f.SelectItem,{value:"all",children:"All Time"})]})]})]})]})]}),C&&(0,d.jsx)("div",{className:"pt-2 pb-1 border-t border-border/20",children:(0,d.jsx)("div",{className:"flex items-center space-x-2",children:(0,d.jsxs)(i.Popover,{children:[(0,d.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:"bg-white flex items-center gap-2 h-10 pl-3 text-left font-normal",children:[(0,d.jsx)(h.Calendar,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:z?(0,k.format)(z,"MMM d, yyyy"):"Select Date"})]})}),(0,d.jsx)(i.PopoverContent,{className:"w-auto p-0 z-[100] bg-white shadow-lg",align:"start",children:(0,d.jsx)(j.Calendar,{initialFocus:!0,mode:"single",defaultMonth:z,selected:z,onSelect:A,className:"p-3 pointer-events-auto",showOutsideDays:!0})})]})})}),B&&(0,d.jsx)("div",{className:"pt-2 pb-1 border-t border-border/20",children:(0,d.jsx)(o.default,{dateRange:x,onDateRangeChange:y})})]})}]),c()}catch(a){c(a)}},!1),857682,a=>{"use strict";let b=(0,a.i(701269).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);a.s(["Heart",()=>b],857682)},671348,a=>{"use strict";let b=(0,a.i(701269).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",()=>b],671348)},804182,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(857396),f=a.i(431886),g=a.i(533039),h=a.i(511633),i=a.i(784278),j=a.i(419447),k=b([f,g,j]);[f,g,j]=k.then?(await k)():k,a.s(["useCashAccounts",0,()=>{let[a,b]=(0,d.useState)([]),{toast:c}=(0,e.useToast)(),{currentBusiness:k}=(0,f.useBusiness)(),{user:l}=(0,g.useAuth)(),m=(0,i.useQueryClient)(),n=(0,d.useCallback)(async()=>{if(!k?.id)return[];try{let a=await (0,j.getCashAccountsAction)(k.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch accounts");return a.data.map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}))}catch(a){return console.error("Error loading cash accounts:",a),c({title:"Error",description:"Failed to load cash accounts",variant:"destructive"}),[]}},[k?.id,c]),o=["cash_accounts",k?.id],{data:p,isLoading:q}=(0,h.useQuery)({queryKey:o,queryFn:n,enabled:!!k?.id,staleTime:3e4});(0,d.useEffect)(()=>{p&&b(p)},[p]);let r=q&&!p,s=(0,d.useCallback)(()=>{m.invalidateQueries({queryKey:o})},[m,o]),t=(0,d.useCallback)(async a=>{if(!k?.id||!l?.id)return null;try{let b=await (0,j.createCashAccountAction)({...a,userId:l.id,locationId:k.id});if(!b.success||!b.data)throw Error(b.error);return m.invalidateQueries({queryKey:o}),c({title:"Success",description:"Cash account created successfully"}),b.data}catch(a){return console.error("Error creating cash account:",a),c({title:"Error",description:"Failed to create cash account",variant:"destructive"}),null}},[k?.id,l?.id,m,o,c]),u=async(a,b)=>{if(!k?.id)return!1;try{let d=await (0,j.updateCashAccountAction)(a,{...b,locationId:k.id});if(!d.success)throw Error(d.error);return m.invalidateQueries({queryKey:o}),c({title:"Success",description:"Cash account updated successfully"}),!0}catch(a){return console.error("Error updating cash account:",a),c({title:"Error",description:"Failed to update cash account",variant:"destructive"}),!1}},v=async(a,b)=>{if(!k?.id)return{success:!1,hasTransactions:!1};try{let d=await (0,j.deleteCashAccountAction)(a,k.id);return d.success&&(m.invalidateQueries({queryKey:o}),c({title:"Success",description:"Cash account deleted successfully"}),b&&b()),d}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),{success:!1,hasTransactions:!1}}},w=async(a,b=!1,d)=>{if(!k?.id)return!1;try{let e=await (0,j.deleteCashAccountWithTransactionsAction)(a,k.id,b);if(!e.success)throw Error(e.error);return m.invalidateQueries({queryKey:o}),c({title:"Success",description:b?"Account and transactions deleted":"Account deleted (records unlinked)"}),d&&d(),!0}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),!1}},x=(0,d.useCallback)(async a=>{if(!k?.id)return 0;try{let b=await (0,j.getCashAccountBalanceAction)(a,k.id);if(b.success)return b.data;return 0}catch(a){return console.error("Error getting balance:",a),0}},[k?.id]);return(0,d.useMemo)(()=>({accounts:a,isLoading:r,createAccount:t,updateAccount:u,deleteAccount:v,deleteAccountWithTransactions:w,getAccountBalance:x,loadAccounts:n,refreshAccounts:s}),[a,r,t,u,v,w,x,n,s])}]),c()}catch(a){c(a)}},!1),411428,a=>{"use strict";a.s(["mapDbCashTransactionToCashTransaction",0,a=>({id:a.id,accountId:a.account_id,amount:Number(a.amount),transactionType:a.transaction_type,category:a.category,description:a.description,personInCharge:a.person_in_charge,tags:a.tags,date:new Date(a.date),paymentMethod:a.payment_method,receiptImage:a.receipt_image,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)})])},157047,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(533039),f=a.i(431886),g=a.i(857396),h=a.i(511633),i=a.i(784278),j=a.i(411428),k=a.i(419447),l=b([e,f,k]);[e,f,k]=l.then?(await l)():l,a.s(["useCashTransactions",0,a=>{let{user:b}=(0,e.useAuth)(),{currentBusiness:c}=(0,f.useBusiness)(),{toast:l}=(0,g.useToast)(),m=(0,i.useQueryClient)(),n=(0,d.useCallback)(async()=>{try{if(!b||!c)return[];let d=await (0,k.getCashTransactionsAction)(c.id,a);if(!d.success||!d.data)throw Error(d.error||"Failed to fetch transactions");let e=d.data.map(a=>{let b={id:a.id,user_id:a.user_id,account_id:a.account_id,amount:Number(a.amount),transaction_type:a.transaction_type,category:a.category,description:a.description,person_in_charge:a.person_in_charge,tags:a.tags,date:a.date,payment_method:a.payment_method,receipt_image:a.receipt_image,created_at:a.created_at,updated_at:a.updated_at};return(0,j.mapDbCashTransactionToCashTransaction)(b)});return e.sort((a,b)=>{let c=new Date(b.date).getTime()-new Date(a.date).getTime();return 0!==c?c:new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()}),e}catch(a){return console.error("Error loading cash transactions:",a),l({title:"Error",description:"Failed to load cash transactions",variant:"destructive"}),[]}},[b,c?.id,a,l]),o=(0,d.useMemo)(()=>["cash_transactions",c?.id,b?.id,a],[c?.id,b?.id,a]),{data:p=[],isLoading:q}=(0,h.useQuery)({queryKey:o,queryFn:n,enabled:!!b&&!!c?.id,staleTime:3e4}),r=q&&0===p.length,s=async a=>{try{if(!b||!c)throw Error("User not authenticated");let d=await (0,k.createCashTransactionAction)({...a,userId:b.id,locationId:c.id});if(!d.success)throw Error(d.error);return l({title:"Success",description:"transfer"===a.transactionType?"Transfer completed successfully":"Cash transaction created successfully"}),m.invalidateQueries({queryKey:o}),Array.isArray(d.data)?(0,j.mapDbCashTransactionToCashTransaction)(d.data[0]):(0,j.mapDbCashTransactionToCashTransaction)(d.data)}catch(a){throw console.error("Error creating cash transaction:",a),l({title:"Error",description:"Failed to create cash transaction",variant:"destructive"}),a}},t=async a=>{try{if(!b||!c)throw Error("User not authenticated");let d=a.map(a=>({...a,userId:b.id,locationId:c.id})),e=await (0,k.createBulkCashTransactionsAction)(d);if(!e.success)throw Error(e.error);return l({title:"Success",description:`Successfully created ${a.length} transactions`}),m.invalidateQueries({queryKey:o}),e.data.map(a=>(0,j.mapDbCashTransactionToCashTransaction)(a))}catch(a){throw console.error("Error creating bulk transactions:",a),l({title:"Error",description:"Failed to create bulk transactions",variant:"destructive"}),a}},u=async(a,b)=>{try{let c=await (0,k.updateCashTransactionAction)(a,b);if(!c.success)throw Error(c.error);return l({title:"Success",description:"Transaction updated successfully"}),m.invalidateQueries({queryKey:o}),(0,j.mapDbCashTransactionToCashTransaction)(c.data)}catch(a){return console.error("Error updating cash transaction:",a),l({title:"Error",description:"Failed to update transaction",variant:"destructive"}),null}},v=async(a,b)=>{try{if(!c)throw Error("No business selected");let d=await (0,k.deleteCashTransactionAction)(a,c.id);if(!d.success)throw Error(d.error);return l({title:"Success",description:"Cash transaction deleted successfully"}),m.invalidateQueries({queryKey:o}),b&&b(),!0}catch(a){return console.error("Error deleting cash transaction:",a),l({title:"Error",description:"Failed to delete cash transaction",variant:"destructive"}),!1}},w=(0,d.useCallback)(async a=>{try{if(!c)return 0;let b=await (0,k.getAccountOpeningBalanceAction)(a,c.id);return b.success?b.data:0}catch(a){return 0}},[c?.id]),x=(0,d.useCallback)(async(a,b)=>{let c=a.toISOString().split("T")[0],d=p.filter(a=>a.date.toISOString().split("T")[0]===c);b&&(d=d.filter(a=>a.accountId===b));let e=d.filter(a=>"cash_in"===a.transactionType||"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),f=d.filter(a=>"cash_out"===a.transactionType||"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),g=d.filter(a=>"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),h=d.filter(a=>"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),i=new Date(a);i.setDate(i.getDate()-1);let j=i.toISOString().split("T")[0],k=p.filter(a=>a.date.toISOString().split("T")[0]<=j);b&&(k=k.filter(a=>a.accountId===b));let l=k.filter(a=>"cash_in"===a.transactionType||"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),m=k.filter(a=>"cash_out"===a.transactionType||"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),n=0;b&&(n=await w(b));let o=n+l-m;return{date:a,openingBalance:o,cashIn:e,cashOut:f,transfersIn:g,transfersOut:h,closingBalance:o+e-f}},[p,w]),y=(0,d.useCallback)(async(a,b,c)=>{let d=a.toISOString().split("T")[0],e=b.toISOString().split("T")[0],f=p.filter(a=>{let b=a.date.toISOString().split("T")[0];return b>=d&&b<=e});c&&(f=f.filter(a=>a.accountId===c));let g=f.filter(a=>"cash_in"===a.transactionType||"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),h=f.filter(a=>"cash_out"===a.transactionType||"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),i=f.filter(a=>"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),j=f.filter(a=>"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),k=new Date(a);k.setDate(k.getDate()-1);let l=k.toISOString().split("T")[0],m=p.filter(a=>a.date.toISOString().split("T")[0]<=l);c&&(m=m.filter(a=>a.accountId===c));let n=m.filter(a=>"cash_in"===a.transactionType||"transfer_in"===a.transactionType).reduce((a,b)=>a+b.amount,0),o=m.filter(a=>"cash_out"===a.transactionType||"transfer_out"===a.transactionType).reduce((a,b)=>a+b.amount,0),q=0;c&&(q=await w(c));let r=q+n-o;return{date:a,openingBalance:r,cashIn:g,cashOut:h,transfersIn:i,transfersOut:j,closingBalance:r+g-h}},[p,w]),z=(0,d.useCallback)(()=>{m.invalidateQueries({queryKey:o})},[m,o]);return(0,d.useMemo)(()=>({transactions:p,isLoading:r,createTransaction:s,createBulkTransactions:t,updateTransaction:u,deleteTransaction:v,getDailySummary:x,getDateRangeSummary:y,refreshTransactions:z}),[p,r,s,t,u,v,x,y,z])}]),c()}catch(a){c(a)}},!1),931497,a=>{"use strict";a.s(["isAndroid",0,()=>{let a=navigator.userAgent||"";return/android/i.test(a)},"isIOS",0,()=>{let a=navigator.userAgent||"";return!/android/i.test(a)&&(/iPad|iPhone|iPod/.test(a)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)}])},256826,a=>{"use strict";var b=a.i(931497);let c=a=>{let b=a.replace(/[^\d+]/g,"");return b.startsWith("+"),b};a.s(["canSendSMS",0,a=>!!(a.phoneNumber&&a.phoneNumber.trim()),"formatMessageForSMS",0,(a,b)=>{let c=a.replace(/[\u00A0\u1680\u180e\u2000-\u2009\u200a\u200b\u202f\u205f\u3000]/g," ").replace(/\n\s*\n/g,"\n\n").replace(/^\s+|\s+$/g,"").substring(0,800);return b&&(c+=`

- ${b}`),c},"getThankYouMessage",0,(a,b)=>{let c=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),d=c*((a.taxRate||0)/100),e=a.items.map(a=>` ${a.description} (Qty: ${a.quantity})`).join("\n");return`Dear ${a.customerName},

We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.

Receipt Number: ${a.receiptNumber}

Items Purchased:
${e}

Total Amount: ${b.currency} ${(c+d).toLocaleString()}

In case of any inquiries please call ${b.businessPhone&&"(123) 456-7890"!==b.businessPhone?b.businessPhone:"our office"}.

We appreciate your business and look forward to serving you again.

Yours faithfully,
${b.businessName||"Management"}`},"openSMSApp",0,a=>{let d,{phoneNumber:e,message:f}=a,g=c(e),h=encodeURIComponent(f);d=(0,b.isIOS)()?`sms:${g}&body=${h}`:`sms:${g}?body=${h}`;try{window.open(d,"_self")}catch(a){console.error("Failed to open SMS app:",a),navigator.clipboard?.writeText(f).then(()=>{alert("SMS app not available. Message copied to clipboard.")}).catch(()=>{alert("SMS app not available and clipboard access denied.")})}},"openWhatsApp",0,a=>{let{phoneNumber:b,message:d}=a,e=c(b),f=encodeURIComponent(d),g=`https://wa.me/${e}?text=${f}`;try{window.open(g,"_blank")}catch(a){console.error("Failed to open WhatsApp:",a),navigator.clipboard?.writeText(d).then(()=>{alert("WhatsApp not available. Message copied to clipboard.")}).catch(()=>{alert("WhatsApp not available and clipboard access denied.")})}}])},778052,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(857396),f=a.i(533039),g=a.i(419447),h=b([f,g]);[f,g]=h.then?(await h)():h,a.s(["useInstallmentPayments",0,a=>{let[b,c]=(0,d.useState)([]),[h,i]=(0,d.useState)(!1),{toast:j}=(0,e.useToast)(),{user:k}=(0,f.useAuth)(),l=(0,d.useCallback)(async a=>{try{i(!0);let b=await (0,g.getInstallmentPaymentsAction)(a);if(!b.success||!b.data)throw Error(b.error);let d=b.data.map(a=>({...a,paymentDate:new Date(a.paymentDate),createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}));c(d)}catch(a){console.error("Error fetching installment payments:",a),j({title:"Error",description:"Failed to load payment history",variant:"destructive"})}finally{i(!1)}},[j]),m=async a=>{if(!k)return null;try{let b=await (0,g.createInstallmentPaymentAction)({...a,userId:k.id,paymentDate:a.paymentDate?.toISOString()});if(!b.success||!b.data)throw Error(b.error);let d={...b.data,paymentDate:new Date(b.data.paymentDate),createdAt:new Date(b.data.createdAt),updatedAt:new Date(b.data.updatedAt)};return c(a=>[d,...a]),d}catch(a){return console.error("Error creating payment:",a),j({title:"Error",description:"Failed to record payment",variant:"destructive"}),null}},n=async(a,b)=>{try{let d=await (0,g.updateInstallmentPaymentAction)(a,{...b,paymentDate:b.paymentDate?.toISOString()});if(!d.success||!d.data)throw Error(d.error);let e={...d.data,paymentDate:new Date(d.data.paymentDate),createdAt:new Date(d.data.createdAt),updatedAt:new Date(d.data.updatedAt)};return c(b=>b.map(b=>b.id===a?e:b)),j({title:"Success",description:"Payment updated successfully"}),e}catch(a){return console.error("Error updating payment:",a),j({title:"Error",description:a.message||"Failed to update payment",variant:"destructive"}),null}},o=async a=>{try{let b=await (0,g.deleteInstallmentPaymentAction)(a);if(!b.success)throw Error(b.error);return c(b=>b.filter(b=>b.id!==a)),j({title:"Success",description:"Payment deleted successfully"}),!0}catch(a){return console.error("Error deleting payment:",a),j({title:"Error",description:"Failed to delete payment",variant:"destructive"}),!1}},p=async(a,b,d)=>{if(k)try{let e=await (0,g.linkInstallmentToCashAction)(a,b,d,k.id);if(!e.success||!e.data)throw Error(e.error);c(b=>b.map(b=>b.id===a?{...b,cashTransactionId:e.data.id}:b)),j({title:"Success",description:"Payment linked to cash account successfully"})}catch(a){console.error("Error linking payment:",a),j({title:"Error",description:a.message||"Failed to link payment",variant:"destructive"})}},q=async a=>{try{let b=await (0,g.unlinkInstallmentFromCashAction)(a);if(!b.success)throw Error(b.error);c(b=>b.map(b=>b.id===a?{...b,cashTransactionId:void 0}:b)),j({title:"Success",description:"Payment unlinked from cash account successfully"})}catch(a){console.error("Error unlinking payment:",a),j({title:"Error",description:a.message||"Failed to unlink payment",variant:"destructive"})}};return(0,d.useEffect)(()=>{a&&l(a)},[a,l]),{payments:b,isLoading:h,fetchPayments:l,createPayment:m,updatePayment:n,deletePayment:o,linkPaymentToCashAccount:p,unlinkPaymentFromCashAccount:q}}]),c()}catch(a){c(a)}},!1),617066,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(12208),f=a.i(745310),g=a.i(638904),h=a.i(819637),i=a.i(433780),j=a.i(970683),k=a.i(737229),l=a.i(384674),m=a.i(857682),n=a.i(671348),o=a.i(771091),p=a.i(570588),q=a.i(139138),r=a.i(804182),s=a.i(157047),t=a.i(18308),u=a.i(256826),v=a.i(778052),w=a.i(588262),x=b([o,r,s,v,w]);[o,r,s,v,w]=x.then?(await x)():x,a.s(["default",0,({sale:a,currency:b,onViewReceipt:c,onEditSale:x,onDeleteSale:y,onSendPaymentReminder:z,onSendThankYouNotice:A,onSendPaymentReminderSMS:B,onSendThankYouSMS:C})=>{let{accounts:D}=(0,r.useCashAccounts)(),{transactions:E}=(0,s.useCashTransactions)(),F=(0,t.useIsMobile)(),{payments:G}=(0,v.useInstallmentPayments)(a.id),{hasPermission:H}=(0,o.useProfiles)(),{formatFinancial:I,canViewCostPrice:J,canViewProfit:K}=(0,w.useFinancialVisibility)(),L=a.items.reduce((a,b)=>a+b.quantity,0),M=a.items.reduce((a,b)=>a+b.price,0),N=L>0?M/a.items.length:0,O=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),P=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+d},0),Q=a.taxRate||0,R=O+Q/100*O,S=a.items.reduce((a,b)=>a+b.cost*b.quantity,0),T="No items";a.items&&Array.isArray(a.items)&&a.items.length>0&&(T=a.items[0].description,a.items.length>1&&(T+=` (+${a.items.length-1} more)`));let U=(()=>{if(!a.cashTransactionId)return console.log("No cash transaction ID for sale:",a.id),null;console.log("Looking for transaction with ID:",a.cashTransactionId),console.log("Available transactions count:",E.length);let b=E.find(b=>b.id===a.cashTransactionId);if(!b)return console.log("No linked transaction found for sale:",a.id,"transaction ID:",a.cashTransactionId),console.log("All transaction IDs:",E.map(a=>a.id)),null;if(console.log("Found linked transaction:",b),!b.accountId)return console.log("Linked transaction has no accountId:",b),null;let c=D.find(a=>a.id===b.accountId);return c?(console.log("Successfully resolved cash account:",c.name),c.name):(console.log("No linked account found for accountId:",b.accountId),console.log("Available accounts:",D.map(a=>({id:a.id,name:a.name}))),null)})(),V="Installment Sale"===a.paymentStatus?G.reduce((a,b)=>a+b.amount,0):a.amountPaid||0,W="Installment Sale"===a.paymentStatus?Math.max(0,R-V):a.amountDue||0,X="NOT PAID"===a.paymentStatus,Y="Installment Sale"===a.paymentStatus&&W>0,Z={phoneNumber:a.customerContact||null},$=(0,u.canSendSMS)(Z),_=F&&$;return(0,d.jsxs)(f.TableRow,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>c(a),children:[(0,d.jsx)(f.TableCell,{className:"font-medium",children:(0,e.format)(new Date(a.date),"dd/MM/yyyy")}),(0,d.jsx)(f.TableCell,{children:a.receiptNumber}),(0,d.jsx)(f.TableCell,{children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{children:a.customerName}),U&&(0,d.jsx)(h.Badge,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:U}),"Installment Sale"===a.paymentStatus&&W>0&&(0,d.jsxs)(h.Badge,{variant:"outline",className:"text-xs bg-red-50 text-red-700 border-red-200",children:["Due: ",b," ",(0,q.formatNumber)(W)]})]})}),(0,d.jsx)(f.TableCell,{children:(0,d.jsxs)(p.Tooltip,{children:[(0,d.jsx)(p.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("span",{className:"line-clamp-1 cursor-help",children:T})}),(0,d.jsx)(p.TooltipContent,{side:"top",className:"max-w-xs",children:(0,d.jsx)("div",{className:"space-y-1",children:(0,d.jsx)("p",{className:"font-bold break-words whitespace-normal",children:T})})})]})}),(0,d.jsx)(f.TableCell,{className:"text-right",children:L}),(0,d.jsxs)(f.TableCell,{className:"text-right",children:[b," ",(0,q.formatNumber)(N)]}),(0,d.jsx)(f.TableCell,{className:"text-right",children:P>0?(0,d.jsxs)("span",{className:"text-orange-600",children:["-",b," ",(0,q.formatNumber)(P)]}):(0,d.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,d.jsx)(f.TableCell,{className:"text-right",children:J?`${b} ${I(S,"cost")}`:""}),(0,d.jsx)(f.TableCell,{className:"text-right",children:(0,d.jsx)("span",{className:"text-green-600 font-medium",children:K?`${b} ${(0,q.formatNumber)(R-S)}`:""})}),(0,d.jsxs)(f.TableCell,{className:"text-right",children:[b," ",(0,q.formatNumber)(R),"Installment Sale"===a.paymentStatus&&V>0&&(0,d.jsxs)("div",{className:"text-xs text-green-600",children:["Paid: ",b," ",(0,q.formatNumber)(V)]})]}),(0,d.jsx)(f.TableCell,{children:(0,d.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(()=>{switch(a.paymentStatus){case"Paid":return"bg-green-100 text-green-800";case"Quote":return"bg-purple-100 text-purple-800";case"Installment Sale":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}})()}`,children:"Installment Sale"===a.paymentStatus?"Installment":a.paymentStatus})}),(0,d.jsx)(f.TableCell,{onClick:a=>a.stopPropagation(),children:(0,d.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),c(a)},children:[(0,d.jsx)(i.Printer,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"View Receipt"})]}),X&&z&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),z(a)},className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Send Payment Reminder",children:[(0,d.jsx)(l.FileText,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Send Payment Reminder"})]}),Y&&z&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),z(a)},className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Send Due Payment Reminder",children:[(0,d.jsx)(l.FileText,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Send Due Payment Reminder"})]}),X&&_&&B&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),B(a)},className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Send Payment Reminder SMS",children:[(0,d.jsx)(n.MessageSquare,{className:"h-3 w-3"}),(0,d.jsx)("span",{className:"sr-only",children:"Send Payment Reminder SMS"})]}),A&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),A(a)},className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",title:"Send Thank You Notice",children:[(0,d.jsx)(m.Heart,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Send Thank You Notice"})]}),_&&C&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),C(a)},className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50",title:"Send Thank You SMS",children:[(0,d.jsx)(n.MessageSquare,{className:"h-3 w-3"}),(0,d.jsx)("span",{className:"sr-only",children:"Send Thank You SMS"})]}),H("sales","edit")&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),x(a)},children:[(0,d.jsx)(j.Edit,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Edit Sale"})]}),H("sales","delete")&&(0,d.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),y(a)},children:[(0,d.jsx)(k.Trash2,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Delete Sale"})]})]})})]})}]),c()}catch(a){c(a)}},!1),485396,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(87705),e=a.i(272030),f=(a.i(525426),a.i(139138)),g=a.i(638904);let h=({className:a,...c})=>(0,b.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,f.cn)("mx-auto flex w-full justify-center",a),...c});h.displayName="Pagination";let i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("ul",{ref:d,className:(0,f.cn)("flex flex-row items-center gap-1",a),...c}));i.displayName="PaginationContent";let j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("li",{ref:d,className:(0,f.cn)("",a),...c}));j.displayName="PaginationItem";let k=({className:a,isActive:c,size:d="icon",...e})=>(0,b.jsx)("a",{"aria-current":c?"page":void 0,className:(0,f.cn)((0,g.buttonVariants)({variant:c?"outline":"ghost",size:d}),a),...e});k.displayName="PaginationLink";let l=({className:a,...c})=>(0,b.jsxs)(k,{"aria-label":"Go to previous page",size:"default",className:(0,f.cn)("gap-1 pl-2.5",a),...c,children:[(0,b.jsx)(d.ChevronLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Previous"})]});l.displayName="PaginationPrevious";let m=({className:a,...c})=>(0,b.jsxs)(k,{"aria-label":"Go to next page",size:"default",className:(0,f.cn)("gap-1 pr-2.5",a),...c,children:[(0,b.jsx)("span",{children:"Next"}),(0,b.jsx)(e.ChevronRight,{className:"h-4 w-4"})]});m.displayName="PaginationNext",a.s(["default",0,({currentPage:a,totalPages:c,onPageChange:d})=>{let e=[];if(c<=3)for(let a=1;a<=c;a++)e.push(a);else{e.push(1);let b=Math.max(2,a-1),d=Math.min(c-1,a+1);d-b+1<1&&(a<c/2?d=Math.min(c-1,b+3-3):b=Math.max(2,d-3+3)),b>2&&e.push("...");for(let a=b;a<=d;a++)e.push(a);d<c-1&&e.push("..."),e.push(c)}return c<=1?null:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1",children:["Page ",a," of ",c]}),(0,b.jsx)(h,{className:"mx-0 order-1 sm:order-2",children:(0,b.jsxs)(i,{className:"gap-1",children:[(0,b.jsx)(j,{children:(0,b.jsx)(l,{onClick:()=>d(Math.max(1,a-1)),className:`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${1===a?"pointer-events-none opacity-50":"cursor-pointer"}`})}),e.map((c,e)=>(0,b.jsx)(j,{className:"hidden sm:block",children:"..."===c?(0,b.jsx)("span",{className:"px-3 py-2 text-sm",children:"..."}):(0,b.jsx)(k,{isActive:a===c,onClick:()=>d(Number(c)),className:"h-8 sm:h-9 w-8 sm:w-9 text-xs sm:text-sm",children:c})},e)),(0,b.jsx)(j,{className:"sm:hidden",children:(0,b.jsx)("span",{className:"h-8 w-8 flex items-center justify-center text-xs font-medium",children:a})}),(0,b.jsx)(j,{children:(0,b.jsx)(m,{onClick:()=>d(Math.min(c,a+1)),className:`h-8 sm:h-9 px-2 sm:px-3 text-xs sm:text-sm ${a===c?"pointer-events-none opacity-50":"cursor-pointer"}`})})]})})]})}],485396)},472298,a=>{"use strict";a.s(["Action",()=>c,"AlertDialog",()=>d,"AlertDialogAction",()=>e,"AlertDialogCancel",()=>f,"AlertDialogContent",()=>g,"AlertDialogDescription",()=>h,"AlertDialogOverlay",()=>i,"AlertDialogPortal",()=>j,"AlertDialogTitle",()=>k,"AlertDialogTrigger",()=>l,"Cancel",()=>m,"Content",()=>n,"Description",()=>o,"Overlay",()=>p,"Portal",()=>q,"Root",()=>r,"Title",()=>s,"Trigger",()=>t,"createAlertDialogScope",()=>u]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Action() from the server but Action is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Action"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialog() from the server but AlertDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialog"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogAction() from the server but AlertDialogAction is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogAction"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogCancel() from the server but AlertDialogCancel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogCancel"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogContent() from the server but AlertDialogContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogContent"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogDescription() from the server but AlertDialogDescription is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogDescription"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogOverlay() from the server but AlertDialogOverlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogOverlay"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogPortal() from the server but AlertDialogPortal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogPortal"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogTitle() from the server but AlertDialogTitle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogTitle"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogTrigger() from the server but AlertDialogTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","AlertDialogTrigger"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call Cancel() from the server but Cancel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Cancel"),n=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Content"),o=(0,b.registerClientReference)(function(){throw Error("Attempted to call Description() from the server but Description is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Description"),p=(0,b.registerClientReference)(function(){throw Error("Attempted to call Overlay() from the server but Overlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Overlay"),q=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Portal"),r=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Root"),s=(0,b.registerClientReference)(function(){throw Error("Attempted to call Title() from the server but Title is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Title"),t=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","Trigger"),u=(0,b.registerClientReference)(function(){throw Error("Attempted to call createAlertDialogScope() from the server but createAlertDialogScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs <module evaluation>","createAlertDialogScope")},418794,a=>{"use strict";a.s(["Action",()=>c,"AlertDialog",()=>d,"AlertDialogAction",()=>e,"AlertDialogCancel",()=>f,"AlertDialogContent",()=>g,"AlertDialogDescription",()=>h,"AlertDialogOverlay",()=>i,"AlertDialogPortal",()=>j,"AlertDialogTitle",()=>k,"AlertDialogTrigger",()=>l,"Cancel",()=>m,"Content",()=>n,"Description",()=>o,"Overlay",()=>p,"Portal",()=>q,"Root",()=>r,"Title",()=>s,"Trigger",()=>t,"createAlertDialogScope",()=>u]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Action() from the server but Action is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Action"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialog() from the server but AlertDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialog"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogAction() from the server but AlertDialogAction is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogAction"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogCancel() from the server but AlertDialogCancel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogCancel"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogContent() from the server but AlertDialogContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogContent"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogDescription() from the server but AlertDialogDescription is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogDescription"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogOverlay() from the server but AlertDialogOverlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogOverlay"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogPortal() from the server but AlertDialogPortal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogPortal"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogTitle() from the server but AlertDialogTitle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogTitle"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call AlertDialogTrigger() from the server but AlertDialogTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","AlertDialogTrigger"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call Cancel() from the server but Cancel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Cancel"),n=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Content"),o=(0,b.registerClientReference)(function(){throw Error("Attempted to call Description() from the server but Description is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Description"),p=(0,b.registerClientReference)(function(){throw Error("Attempted to call Overlay() from the server but Overlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Overlay"),q=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Portal"),r=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Root"),s=(0,b.registerClientReference)(function(){throw Error("Attempted to call Title() from the server but Title is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Title"),t=(0,b.registerClientReference)(function(){throw Error("Attempted to call Trigger() from the server but Trigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","Trigger"),u=(0,b.registerClientReference)(function(){throw Error("Attempted to call createAlertDialogScope() from the server but createAlertDialogScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-alert-dialog/dist/index.mjs","createAlertDialogScope")},816657,a=>{"use strict";a.i(472298);var b=a.i(418794);a.n(b)},379643,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(816657),e=a.i(139138),f=a.i(638904);let g=d.Root;d.Trigger;let h=d.Portal,i=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Overlay,{className:(0,e.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:f}));i.displayName=d.Overlay.displayName;let j=c.forwardRef(({className:a,...c},f)=>(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{}),(0,b.jsx)(d.Content,{ref:f,className:(0,e.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c})]}));j.displayName=d.Content.displayName;let k=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...c});k.displayName="AlertDialogHeader";let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});l.displayName="AlertDialogFooter";let m=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Title,{ref:f,className:(0,e.cn)("text-lg font-semibold",a),...c}));m.displayName=d.Title.displayName;let n=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Description,{ref:f,className:(0,e.cn)("text-sm text-muted-foreground",a),...c}));n.displayName=d.Description.displayName;let o=c.forwardRef(({className:a,...c},g)=>(0,b.jsx)(d.Action,{ref:g,className:(0,e.cn)((0,f.buttonVariants)(),a),...c}));o.displayName=d.Action.displayName;let p=c.forwardRef(({className:a,...c},g)=>(0,b.jsx)(d.Cancel,{ref:g,className:(0,e.cn)((0,f.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...c}));p.displayName=d.Cancel.displayName,a.s(["AlertDialog",()=>g,"AlertDialogAction",()=>o,"AlertDialogCancel",()=>p,"AlertDialogContent",()=>j,"AlertDialogDescription",()=>n,"AlertDialogFooter",()=>l,"AlertDialogHeader",()=>k,"AlertDialogTitle",()=>m])},375290,a=>{"use strict";var b=a.i(907997),c=a.i(379643);a.s(["default",0,({isOpen:a,onOpenChange:d,onConfirm:e,isDeleting:f=!1})=>(0,b.jsx)(c.AlertDialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(c.AlertDialogContent,{children:[(0,b.jsxs)(c.AlertDialogHeader,{children:[(0,b.jsx)(c.AlertDialogTitle,{children:"Are you sure?"}),(0,b.jsx)(c.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete this sale record."})]}),(0,b.jsxs)(c.AlertDialogFooter,{children:[(0,b.jsx)(c.AlertDialogCancel,{disabled:f,children:"Cancel"}),(0,b.jsx)(c.AlertDialogAction,{onClick:e,disabled:f,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 disabled:opacity-50",children:f?"Deleting...":"Delete"})]})]})})])},458774,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(139138);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},659311,a=>{"use strict";let b=(0,a.i(701269).default)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);a.s(["Wand2",()=>b],659311)},743798,a=>{"use strict";var b=a.i(498259),c=a.i(12208);let d=async(a,d)=>{let e=new b.default,f=e.internal.pageSize.getWidth(),g=e.internal.pageSize.getHeight(),h=20,i=()=>{e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(150,150,150),e.text("Created By Gonza Systems",f/2,g-10,{align:"center"}),e.setTextColor(0,0,0)};try{e.setFont("helvetica","normal");let b=a=>{h+a>g-20-15&&(i(),e.addPage(),h=20)},j=(a,c,d,f,g=11)=>(e.setFontSize(g),e.splitTextToSize(a,f).forEach(a=>{b(6),e.text(a,c,h),h+=5}),h);if(d.businessLogo)try{let a=new Image;a.src=d.businessLogo,await new Promise((b,c)=>{a.onload=b,a.onerror=c,a.complete&&b(a)});let b=a.width/a.height,c=40,f=40/b;f>20&&(c=(f=20)*b),e.addImage(d.businessLogo,"JPEG",20,h,c,f)}catch(a){console.error("Error adding business logo:",a)}let k=f-20;if(e.setFontSize(16),e.setFont("helvetica","bold"),e.text(d.businessName||"Business Name",k,h+5,{align:"right"}),h+=12,e.setFontSize(10),e.setFont("helvetica","normal"),d.businessAddress){let a=e.splitTextToSize(d.businessAddress,80);a.forEach((a,b)=>{e.text(a,k,h+4*b,{align:"right"})}),h+=4*a.length-4}d.businessPhone&&(h+=4,e.text(`Phone: ${d.businessPhone}`,k,h,{align:"right"})),d.businessEmail&&(h+=4,e.text(`Email: ${d.businessEmail}`,k,h,{align:"right"})),h+=8,e.setLineWidth(.5),e.line(20,h,f-20,h),h+=15,b(15),e.setFontSize(11);let l=(0,c.format)(new Date,"MMMM d, yyyy");if(e.text(`Date: ${l}`,20,h),h+=12,b(25),e.setFont("helvetica","bold"),e.text(a.customer.fullName||"Valued Customer",20,h),h+=5,e.setFont("helvetica","normal"),a.customer.location&&(h=j(a.customer.location,20,h,f-40,11)+2),a.customer.email&&(b(8),e.text(a.customer.email,20,h),h+=5),h+=8,a.subject&&(b(15),e.setFont("helvetica","bold"),e.setFontSize(12),h=j(`Re: ${a.subject}`,20,h,f-40,12)+6),b(15),e.setFont("helvetica","normal"),e.setFontSize(11),e.text(`Dear ${a.customer.fullName||"Valued Customer"},`,20,h),h+=8,a.content){let c=a.content.split("\n\n").filter(a=>""!==a.trim());c.forEach((a,d)=>{let e=Math.ceil(a.length/80);b(5*e+10),h=j(a.trim(),20,h,f-40,11),d<c.length-1&&(h+=6)}),h+=10}if(b(60),e.text("Yours faithfully,",20,h),h+=20,d.signature)try{let a=new Image;a.src=d.signature,await new Promise((b,c)=>{a.onload=b,a.onerror=c,a.complete&&b(a)});let b=a.width/a.height,c=50,f=50/b;f>25&&(c=(f=25)*b),e.addImage(d.signature,"JPEG",20,h,c,f),h+=f+5}catch(a){console.error("Error adding signature:",a),h+=15}else h+=15;e.setFont("helvetica","bold"),e.setFontSize(11);let m=a.senderName||d.businessName||"Management";e.text(m,20,h),h+=5,d.businessName&&a.senderName&&(e.setFont("helvetica","normal"),e.text(d.businessName,20,h)),i();let n=a.customer.fullName?.replace(/[^a-zA-Z0-9]/g,"_")||"Customer",o=(0,c.format)(new Date,"yyyy-MM-dd"),p=`Notice_${n}_${o}.pdf`;e.save(p)}catch(a){throw console.error("Error generating notice PDF:",a),Error("Failed to generate notice PDF. Please try again.")}};a.s(["generateNoticePDF",0,d])},525607,a=>{"use strict";a.s(["enhanceForBusiness",0,a=>{if(!a||""===a.trim())return a;let b=(a=>{if(!a||""===a.trim())return a;let b=a;return Object.entries({"can't":"cannot","won't":"will not","don't":"do not","didn't":"did not","haven't":"have not","hasn't":"has not","isn't":"is not","aren't":"are not","wasn't":"was not","weren't":"were not","I'm":"I am","you're":"you are","we're":"we are","they're":"they are","it's":"it is","that's":"that is","here's":"here is","there's":"there is","we've":"we have","they've":"they have","I've":"I have","you've":"you have",ok:"acceptable",okay:"acceptable",thanks:"thank you",hi:"greetings",bye:"goodbye",asap:"as soon as possible",fyi:"for your information",btw:"incidentally",etc:"and so forth",gonna:"going to",wanna:"want to",gotta:"have to",kinda:"somewhat",sorta:"somewhat",get:"receive",got:"received",give:"provide",gave:"provided",ask:"request",asked:"requested",tell:"inform",told:"informed",show:"demonstrate",showed:"demonstrated",help:"assist",helped:"assisted",fix:"resolve",fixed:"resolved",buy:"purchase",bought:"purchased",sell:"offer",sold:"provided"}).forEach(([a,c])=>{let d=RegExp(`\\b${a}\\b`,"gi");b=b.replace(d,c)}),(b=(b=b.replace(/(^|\. )([a-z])/g,(a,b,c)=>b+c.toUpperCase())).trim()).endsWith(".")||b.endsWith("!")||b.endsWith("?")||(b+="."),b})(a);return!b.toLowerCase().includes("we are")&&!b.toLowerCase().includes("we would like")&&!b.toLowerCase().includes("please")&&(b.toLowerCase().startsWith("our")||b.toLowerCase().startsWith("the"))&&(b=`We would like to inform you that ${b.charAt(0).toLowerCase()+b.slice(1)}`),(b.toLowerCase().includes("you must")||b.toLowerCase().includes("you have to"))&&(b=(b=b.replace(/you must/gi,"we kindly request that you")).replace(/you have to/gi,"we would appreciate if you could")),b}])},637864,a=>{"use strict";let b=[{id:"payment_reminder",name:"Payment Reminder",subject:"Payment Reminder - Account Status",content:`We hope this letter finds you well. We are writing to kindly remind you about your outstanding payment.

We appreciate your prompt attention to this matter and thank you for your continued business.`,category:"payment"},{id:"policy_update",name:"Policy Update",subject:"Important Update to Our Business Policies",content:`We are writing to inform you of important updates to our business policies that may affect your account.

These changes will take effect shortly. We appreciate your understanding and continued partnership.`,category:"policy"},{id:"thank_you",name:"Thank You Letter",subject:"Thank You for Your Business",content:`We wanted to take a moment to express our sincere gratitude for your continued support and trust in our business.

We look forward to serving you for many years to come.`,category:"gratitude"},{id:"service_announcement",name:"Service Announcement",subject:"Important Service Update",content:`We are excited to share some important updates about our services that will enhance your experience with us.

We believe these improvements will provide you with even better service and value.`,category:"announcement"},{id:"account_update",name:"Account Status Update",subject:"Account Status Update",content:`We are writing to provide you with an important update regarding your account with us.

If you have any questions or concerns, please don't hesitate to contact us.`,category:"general"},{id:"general_notice",name:"General Business Communication",subject:"Business Communication",content:`We hope this message finds you well. We wanted to reach out to you regarding an important matter.

Thank you for your attention to this matter.`,category:"general"}];a.s(["getTemplateById",0,a=>b.find(b=>b.id===a),"noticeTemplates",0,b])},412336,a=>{"use strict";let b=(0,a.i(701269).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);a.s(["MessageCircle",()=>b],412336)},929048,a=>{"use strict";var b=a.i(907997),c=a.i(170444),d=a.i(819637),e=a.i(637864);a.s(["default",0,({selectedTemplate:a,onTemplateChange:f,onTemplateSelect:g})=>{let h=Array.isArray(e.noticeTemplates)?e.noticeTemplates:[];return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Choose a Template (Optional)"}),(0,b.jsxs)(c.Select,{value:a,onValueChange:a=>{if(f(a),"none"===a)return;let b=e.noticeTemplates.find(b=>b.id===a);b&&g(b)},children:[(0,b.jsx)(c.SelectTrigger,{className:"w-full",children:(0,b.jsx)(c.SelectValue,{placeholder:"Select a notice template or start from scratch"})}),(0,b.jsxs)(c.SelectContent,{className:"max-h-80",children:[(0,b.jsx)(c.SelectItem,{value:"none",children:"Start from scratch"}),h.length>0&&h.map(a=>{var e;let f;return(0,b.jsx)(c.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsx)(d.Badge,{variant:"outline",className:`ml-2 text-xs ${(e=a.category,(f={payment:"bg-red-50 text-red-700 border-red-200",policy:"bg-blue-50 text-blue-700 border-blue-200",general:"bg-gray-50 text-gray-700 border-gray-200",announcement:"bg-green-50 text-green-700 border-green-200",gratitude:"bg-purple-50 text-purple-700 border-purple-200"})[e]||f.general)}`,children:a.category})]})},a.id)})]})]}),a&&"none"!==a&&(0,b.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"Template selected:"})," ",h.find(b=>b.id===a)?.name]}),(0,b.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"The template content has been added to your message. You can edit it as needed."})]})]})}])},625252,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(352817),g=a.i(638904),h=a.i(458774),i=a.i(850931),j=a.i(443562),k=a.i(635330),l=a.i(384674),m=a.i(659311),n=a.i(495550),o=a.i(21679),p=a.i(671348),q=a.i(771826),r=a.i(857396),s=a.i(743798),t=a.i(525607),u=a.i(637864),v=a.i(256826),w=a.i(18308),x=a.i(412336),y=a.i(929048),z=b([q]);[q]=z.then?(await z)():z,a.s(["default",0,({customer:a,open:b,onClose:c,defaultTemplate:z,sale:A})=>{let[B,C]=(0,e.useState)("none"),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(""),[H,I]=(0,e.useState)(""),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),{settings:N}=(0,q.useBusinessSettings)(),{toast:O}=(0,r.useToast)(),P=(0,w.useIsMobile)();(0,e.useEffect)(()=>{if(b&&z){let a=(0,u.getTemplateById)(z);if(a)if(C(z),E(a.subject),"thank_you"===z&&A){let b=A.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),c=b*((A.taxRate||0)/100),d=A.items.map(a=>` ${a.description} (Qty: ${a.quantity})`).join("\n"),e=`${a.content}

Receipt Number: ${A.receiptNumber}

Items Purchased:
${d}

Total Amount: ${N.currency} ${(b+c).toFixed(2)}

In case of any inquiries please call ${N.businessPhone&&"(123) 456-7890"!==N.businessPhone?N.businessPhone:"our office"}.

We appreciate your business and look forward to serving you again.`;G(e)}else G(a.content)}},[b,z,A,N.currency,N.businessPhone]);let Q=async()=>{if(!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F)return void O({title:"Message required",description:"Please enter a message before generating the notice.",variant:"destructive"});K(!0);try{await (0,s.generateNoticePDF)({customer:a,subject:D||"Business Notice",content:F,senderName:H||void 0},N),O({title:"Notice generated successfully!",description:"Your professional business notice has been downloaded as a PDF."}),G(""),E(""),C("none"),I(""),c()}catch(a){console.error("Error generating notice:",a),O({title:"Generation failed",description:"Failed to generate the notice. Please try again.",variant:"destructive"})}finally{K(!1)}},R=()=>{G(""),E(""),C("none"),I(""),M(!1),c()},S=P&&(0,v.canSendSMS)(a);return(0,d.jsx)(f.Dialog,{open:b,onOpenChange:R,children:(0,d.jsxs)(f.DialogContent,{className:"w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[(0,d.jsx)(f.DialogHeader,{children:(0,d.jsxs)(f.DialogTitle,{className:"flex items-center gap-2 text-base sm:text-lg",children:[(0,d.jsx)(l.FileText,{className:"h-5 w-5"}),"Send Notice to ",a.fullName]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-3",children:"Compose Your Notice"}),(0,d.jsx)(y.default,{selectedTemplate:B,onTemplateChange:C,onTemplateSelect:a=>{E(a.subject),G(a.content)}})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.Label,{htmlFor:"subject",className:"text-sm",children:"Subject Line"}),(0,d.jsx)(i.Input,{id:"subject",value:D,onChange:a=>E(a.target.value),placeholder:"Enter the subject of your notice",className:"text-sm h-9"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(j.Label,{htmlFor:"message",className:"text-sm",children:"Your Message"}),(0,d.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{if(!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F)return void O({title:"No message to enhance",description:"Please enter your message first.",variant:"destructive"});try{let a=(0,t.enhanceForBusiness)(F);G(a),O({title:"Message enhanced!",description:"Your message has been made more formal and professional."})}catch(a){console.error("Error enhancing message:",a),O({title:"Enhancement failed",description:"Could not enhance the message. Please try again.",variant:"destructive"})}},className:"text-[10px] h-7 px-2",disabled:!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F,children:[(0,d.jsx)(m.Wand2,{className:"h-3 w-3 mr-1"}),"Make Formal"]})]}),(0,d.jsx)(h.Textarea,{id:"message",value:F,onChange:a=>G(a.target.value),placeholder:"What do you want to inform the customer about?",rows:P?6:8,className:"resize-none text-sm"}),(0,d.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"none"!==B?"Template content loaded. Edit as needed.":"Write in your own words - we'll format it professionally."})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.Label,{htmlFor:"sender",className:"text-sm",children:"Sender Name (Optional)"}),(0,d.jsx)(i.Input,{id:"sender",value:H,onChange:a=>I(a.target.value),placeholder:"Your name (defaults to business name)",className:"text-sm h-9"})]}),(!N.businessLogo||!N.signature)&&(0,d.jsx)(k.Card,{className:"border-amber-200 bg-amber-50",children:(0,d.jsx)(k.CardContent,{className:"p-3",children:(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)(o.AlertCircle,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{className:"text-[11px] sm:text-xs",children:[(0,d.jsx)("p",{className:"text-amber-800 font-medium",children:"Enhance your notices"}),(0,d.jsxs)("p",{className:"text-amber-700",children:[!N.businessLogo&&"Add logo ",!N.businessLogo&&!N.signature&&"and ",!N.signature&&"upload signature ","in settings for better notices."]})]})]})})})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:"Preview"}),(0,d.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>M(!L),className:"h-8 text-xs",children:[L?"Hide":"Show"," Preview"]})]}),L&&(0,d.jsx)(k.Card,{className:"border-gray-200 shadow-sm",children:(0,d.jsx)(k.CardContent,{className:"p-4 overflow-x-hidden",children:(0,d.jsxs)("div",{className:"space-y-3 text-[11px] sm:text-sm",children:[(0,d.jsxs)("div",{className:"border-b pb-2",children:[(0,d.jsx)("div",{className:"font-bold text-sm sm:text-base",children:N.businessName||"Your Business"}),(0,d.jsxs)("div",{className:"text-gray-600 space-y-0.5",children:[N.businessAddress&&(0,d.jsx)("div",{className:"truncate",children:N.businessAddress}),N.businessPhone&&(0,d.jsxs)("div",{children:["Phone: ",N.businessPhone]}),N.businessEmail&&(0,d.jsxs)("div",{className:"truncate",children:["Email: ",N.businessEmail]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,d.jsxs)("div",{children:["Date: ",new Date().toLocaleDateString()]}),(0,d.jsx)("div",{className:"font-medium truncate",children:a.fullName})]}),D&&(0,d.jsx)("div",{className:"bg-gray-50 p-2 rounded",children:(0,d.jsxs)("strong",{children:["Re: ",D]})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"italic",children:["Dear ",a.fullName,","]}),(0,d.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed text-gray-800",children:F||"Your message will appear here..."}),(0,d.jsx)("div",{children:"Yours faithfully,"}),(0,d.jsx)("div",{className:"mt-4 font-bold",children:H||N.businessName||"Management"})]})]})})})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t mt-2",children:[(0,d.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,d.jsx)(g.Button,{variant:"outline",onClick:R,className:"flex-1 sm:flex-none h-10 text-sm",children:"Cancel"}),(0,v.canSendSMS)(a)&&(0,d.jsxs)(g.Button,{variant:"outline",onClick:()=>{(0,v.openWhatsApp)({phoneNumber:a.phoneNumber,message:`${D?D+"\n\n":""}Dear ${a.fullName},

${F}

Yours faithfully,
${H||N.businessName||"Management"}`}),O({title:"WhatsApp opened",description:"Your message has been prepared in WhatsApp."})},disabled:!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F,className:"flex-1 sm:flex-none gap-2 text-green-600 hover:text-green-700 hover:bg-green-50 h-10 text-sm",children:[(0,d.jsx)(x.MessageCircle,{className:"h-4 w-4"}),"WhatsApp"]})]}),(0,d.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[S&&(0,d.jsxs)(g.Button,{variant:"outline",onClick:()=>{if(!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F)return void O({title:"Message required",description:"Please enter a message before sending SMS.",variant:"destructive"});if(!(0,v.canSendSMS)(a))return void O({title:"Phone number required",description:"Customer phone number is not available.",variant:"destructive"});try{let b=`${D?D+"\n\n":""}Dear ${a.fullName},

${F}

Yours faithfully,
${H||N.businessName||"Management"}`,c=(0,v.formatMessageForSMS)(b,N.businessName);(0,v.openSMSApp)({phoneNumber:a.phoneNumber,message:c}),O({title:"SMS app opened",description:"Your message has been prepared in the SMS app."})}catch(a){console.error("Error sending SMS:",a),O({title:"SMS failed",description:"Failed to open SMS app. Please try again.",variant:"destructive"})}},disabled:!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F,className:"flex-1 sm:flex-none gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 h-10 text-sm",children:[(0,d.jsx)(p.MessageSquare,{className:"h-4 w-4"}),"SMS"]}),(0,d.jsxs)(g.Button,{onClick:Q,disabled:!F.trim()||"Write your message here..."===F||"Write your specific message here..."===F||J,className:"flex-1 sm:flex-none gap-2 h-10 text-sm",children:[(0,d.jsx)(n.Download,{className:"h-4 w-4"}),J?"PDF...":"PDF"]})]})]})]})})}]),c()}catch(a){c(a)}},!1),499359,a=>{"use strict";a.s(["Content",()=>c,"Drawer",()=>d,"Handle",()=>e,"NestedRoot",()=>f,"Overlay",()=>g,"Portal",()=>h,"Root",()=>i]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Content"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Drawer() from the server but Drawer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Drawer"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Handle() from the server but Handle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Handle"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call NestedRoot() from the server but NestedRoot is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","NestedRoot"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call Overlay() from the server but Overlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Overlay"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Portal"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs <module evaluation>","Root")},217832,a=>{"use strict";a.s(["Content",()=>c,"Drawer",()=>d,"Handle",()=>e,"NestedRoot",()=>f,"Overlay",()=>g,"Portal",()=>h,"Root",()=>i]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Content() from the server but Content is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Content"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Drawer() from the server but Drawer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Drawer"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call Handle() from the server but Handle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Handle"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call NestedRoot() from the server but NestedRoot is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","NestedRoot"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call Overlay() from the server but Overlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Overlay"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Portal"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/vaul/dist/index.mjs","Root")},637263,a=>{"use strict";a.i(499359);var b=a.i(217832);a.n(b)},713003,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(637263),e=a.i(139138);let f=({shouldScaleBackground:a=!0,...c})=>(0,b.jsx)(d.Drawer.Root,{shouldScaleBackground:a,...c});f.displayName="Drawer",d.Drawer.Trigger;let g=d.Drawer.Portal,h=d.Drawer.Close,i=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Drawer.Overlay,{ref:f,className:(0,e.cn)("fixed inset-0 z-50 bg-black/80",a),...c}));i.displayName=d.Drawer.Overlay.displayName;let j=c.forwardRef(({className:a,children:c,...f},h)=>(0,b.jsxs)(g,{children:[(0,b.jsx)(i,{}),(0,b.jsxs)(d.Drawer.Content,{ref:h,className:(0,e.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a),...f,children:[(0,b.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),c]})]}));j.displayName="DrawerContent";let k=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("grid gap-1.5 p-4 text-center sm:text-left",a),...c});k.displayName="DrawerHeader";let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,e.cn)("mt-auto flex flex-col gap-2 p-4",a),...c});l.displayName="DrawerFooter";let m=c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Drawer.Title,{ref:f,className:(0,e.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));m.displayName=d.Drawer.Title.displayName,c.forwardRef(({className:a,...c},f)=>(0,b.jsx)(d.Drawer.Description,{ref:f,className:(0,e.cn)("text-sm text-muted-foreground",a),...c})).displayName=d.Drawer.Description.displayName,a.s(["Drawer",()=>f,"DrawerClose",()=>h,"DrawerContent",()=>j,"DrawerFooter",()=>l,"DrawerHeader",()=>k,"DrawerTitle",()=>m])},654740,a=>{"use strict";let b=(0,a.i(701269).default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>b],654740)},24553,a=>{"use strict";let b=(0,a.i(701269).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],24553)},293959,a=>{"use strict";var b=a.i(498259),c={},d=function(){function a(a){this.jsPDFDocument=a,this.userStyles={textColor:a.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:a.internal.getFontSize(),fontStyle:a.internal.getFont().fontStyle,font:a.internal.getFont().fontName,lineWidth:a.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:a.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return a.setDefaults=function(a,b){void 0===b&&(b=null),b?b.__autoTableDocumentDefaults=a:c=a},a.unifyColor=function(a){return Array.isArray(a)?a:"number"==typeof a?[a,a,a]:"string"==typeof a?[a]:null},a.prototype.applyStyles=function(b,c){void 0===c&&(c=!1),b.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(b.fontStyle);var d,e,f,g=this.jsPDFDocument.internal.getFont(),h=g.fontStyle,i=g.fontName;if(b.font&&(i=b.font),b.fontStyle){h=b.fontStyle;var j=this.getFontList()[i];j&&-1===j.indexOf(h)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(j[0]),h=j[0])}if(this.jsPDFDocument.setFont(i,h),b.fontSize&&this.jsPDFDocument.setFontSize(b.fontSize),!c){var k=a.unifyColor(b.fillColor);k&&(d=this.jsPDFDocument).setFillColor.apply(d,k),(k=a.unifyColor(b.textColor))&&(e=this.jsPDFDocument).setTextColor.apply(e,k),(k=a.unifyColor(b.lineColor))&&(f=this.jsPDFDocument).setDrawColor.apply(f,k),"number"==typeof b.lineWidth&&this.jsPDFDocument.setLineWidth(b.lineWidth)}},a.prototype.splitTextToSize=function(a,b,c){return this.jsPDFDocument.splitTextToSize(a,b,c)},a.prototype.rect=function(a,b,c,d,e){return this.jsPDFDocument.rect(a,b,c,d,e)},a.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},a.prototype.getTextWidth=function(a){return this.jsPDFDocument.getTextWidth(a)},a.prototype.getDocument=function(){return this.jsPDFDocument},a.prototype.setPage=function(a){this.jsPDFDocument.setPage(a)},a.prototype.addPage=function(){return this.jsPDFDocument.addPage()},a.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},a.prototype.getGlobalOptions=function(){return c||{}},a.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},a.prototype.pageSize=function(){var a=this.jsPDFDocument.internal.pageSize;return null==a.width&&(a={width:a.getWidth(),height:a.getHeight()}),a},a.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},a.prototype.getLineHeightFactor=function(){var a=this.jsPDFDocument;return a.getLineHeightFactor?a.getLineHeightFactor():1.15},a.prototype.getLineHeight=function(a){return a/this.scaleFactor()*this.getLineHeightFactor()},a.prototype.pageNumber=function(){var a=this.jsPDFDocument.internal.getCurrentPageInfo();return a?a.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},a}(),e=function(a,b){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function f(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}e(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}"function"==typeof SuppressedError&&SuppressedError;var g=function(a){function b(b){var c=a.call(this)||this;return c._element=b,c}return f(b,a),b}(Array);function h(a,b,c){return c.applyStyles(b,!0),(Array.isArray(a)?a:[a]).map(function(a){return c.getTextWidth(a)}).reduce(function(a,b){return Math.max(a,b)},0)}function i(a,b,c,d){var e=b.settings.tableLineWidth,f=b.settings.tableLineColor;a.applyStyles({lineWidth:e,lineColor:f});var g=j(e,!1);g&&a.rect(c.x,c.y,b.getWidth(a.pageSize().width),d.y-c.y,g)}function j(a,b){var c=a>0,d=b||0===b;return c&&d?"DF":c?"S":d?"F":null}function k(a,b){var c,d,e,f;if(Array.isArray(a=a||b))if(a.length>=4)return{top:a[0],right:a[1],bottom:a[2],left:a[3]};else{if(3===a.length)return{top:a[0],right:a[1],bottom:a[2],left:a[1]};if(2===a.length)return{top:a[0],right:a[1],bottom:a[0],left:a[1]};a=1===a.length?a[0]:b}return"object"==typeof a?("number"==typeof a.vertical&&(a.top=a.vertical,a.bottom=a.vertical),"number"==typeof a.horizontal&&(a.right=a.horizontal,a.left=a.horizontal),{left:null!=(c=a.left)?c:b,top:null!=(d=a.top)?d:b,right:null!=(e=a.right)?e:b,bottom:null!=(f=a.bottom)?f:b}):("number"!=typeof a&&(a=b),{top:a,right:a,bottom:a,left:a})}function l(a,b){var c=k(b.settings.margin,0);return a.pageSize().width-(c.left+c.right)}function m(a,b){var c=function a(b,c){var d=c(b);return"rgba(0, 0, 0, 0)"!==d&&"transparent"!==d&&"initial"!==d&&"inherit"!==d?d:null==b.parentElement?null:a(b.parentElement,c)}(a,b);if(!c)return null;var d=c.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!d||!Array.isArray(d))return null;var e=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])];return 0===parseInt(d[4])||isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:e}function n(a,b,c,d,e){if(null==a)throw TypeError("Cannot convert undefined or null to object");for(var f=Object(a),g=1;g<arguments.length;g++){var h=arguments[g];if(null!=h)for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(f[i]=h[i])}return f}var o=function(a,b,c){this.table=b,this.pageNumber=b.pageNumber,this.settings=b.settings,this.cursor=c,this.doc=a.getDocument()},p=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,c,g)||this;return h.cell=d,h.row=e,h.column=f,h.section=e.section,h}return f(b,a),b}(o),q=function(){function a(a,b){this.pageNumber=1,this.id=a.id,this.settings=a.settings,this.styles=a.styles,this.hooks=a.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return a.prototype.getHeadHeight=function(a){return this.head.reduce(function(b,c){return b+c.getMaxCellHeight(a)},0)},a.prototype.getFootHeight=function(a){return this.foot.reduce(function(b,c){return b+c.getMaxCellHeight(a)},0)},a.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},a.prototype.callCellHooks=function(a,b,c,d,e,f){for(var g=0;g<b.length;g++){var h=!1===(0,b[g])(new p(a,this,c,d,e,f));if(c.text=Array.isArray(c.text)?c.text:[c.text],h)return!1}return!0},a.prototype.callEndPageHooks=function(a,b){a.applyStyles(a.userStyles);for(var c=0,d=this.hooks.didDrawPage;c<d.length;c++)(0,d[c])(new o(a,this,b))},a.prototype.callWillDrawPageHooks=function(a,b){for(var c=0,d=this.hooks.willDrawPage;c<d.length;c++)(0,d[c])(new o(a,this,b))},a.prototype.getWidth=function(a){if("number"==typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(a,b){return a+b.wrappedWidth},0);var b=this.settings.margin;return a-b.left-b.right},a}(),r=function(){function a(a,b,c,d,e){void 0===e&&(e=!1),this.height=0,this.raw=a,a instanceof g&&(this.raw=a._element,this.element=a._element),this.index=b,this.section=c,this.cells=d,this.spansMultiplePages=e}return a.prototype.getMaxCellHeight=function(a){var b=this;return a.reduce(function(a,c){var d;return Math.max(a,(null==(d=b.cells[c.index])?void 0:d.height)||0)},0)},a.prototype.hasRowSpan=function(a){var b=this;return a.filter(function(a){var c=b.cells[a.index];return!!c&&c.rowSpan>1}).length>0},a.prototype.canEntireRowFit=function(a,b){return this.getMaxCellHeight(b)<=a},a.prototype.getMinimumRowHeight=function(a,b){var c=this;return a.reduce(function(a,d){var e=c.cells[d.index];if(!e)return 0;var f=b.getLineHeight(e.styles.fontSize),g=e.padding("vertical")+f;return g>a?g:a},0)},a}(),s=function(){function a(a,b,c){this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=c,this.raw=a;var d,e=a;null==a||"object"!=typeof a||Array.isArray(a)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=a.rowSpan||1,this.colSpan=a.colSpan||1,e=null!=(d=a.content)?d:a,a._element&&(this.raw=a._element));var f=null!=e?""+e:"";this.text=f.split(/\r\n|\r|\n/g)}return a.prototype.getTextPos=function(){if("top"===this.styles.valign)a=this.y+this.padding("top");else if("bottom"===this.styles.valign)a=this.y+this.height-this.padding("bottom");else{var a,b,c=this.height-this.padding("vertical");a=this.y+c/2+this.padding("top")}if("right"===this.styles.halign)b=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var d=this.width-this.padding("horizontal");b=this.x+d/2+this.padding("left")}else b=this.x+this.padding("left");return{x:b,y:a}},a.prototype.getContentHeight=function(a,b){return void 0===b&&(b=1.15),Math.max((Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/a*b)+this.padding("vertical"),this.styles.minCellHeight)},a.prototype.padding=function(a){var b=k(this.styles.cellPadding,0);return"vertical"===a?b.top+b.bottom:"horizontal"===a?b.left+b.right:b[a]},a}(),t=function(){function a(a,b,c){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=a,this.raw=b,this.index=c}return a.prototype.getMaxCustomCellWidth=function(a){for(var b=0,c=0,d=a.allRows();c<d.length;c++){var e=d[c].cells[this.index];e&&"number"==typeof e.styles.cellWidth&&(b=Math.max(b,e.styles.cellWidth))}return b},a}();function u(a,b,c){for(var d=b,e=a.reduce(function(a,b){return a+b.wrappedWidth},0),f=0;f<a.length;f++){var g=a[f],h=d*(g.wrappedWidth/e),i=g.width+h,j=c(g),k=i<j?j:i;b-=k-g.width,g.width=k}if(b=Math.round(1e10*b)/1e10){var l=a.filter(function(a){return!(b<0)||a.width>c(a)});l.length&&(b=u(l,b,c))}return b}function v(a,b,c,d,e){return a.map(function(a){var f=a,g=b,i=c,j=d,k=e,l=1e4*j.scaleFactor();if((g=Math.ceil(g*l)/l)>=h(f,i,j))return f;for(;g<h(f+k,i,j)&&!(f.length<=1);)f=f.substring(0,f.length-1);return f.trim()+k})}function w(a,b,c,d,e,f){var g={};return b.map(function(b,h){for(var i=0,j={},k=0,l=0,m=0;m<c.length;m++){var o=c[m];if(null==g[o.index]||0===g[o.index].left)if(0===l){var p=void 0;p=Array.isArray(b)?b[o.index-k-i]:b[o.dataKey];var q={};"object"!=typeof p||Array.isArray(p)||(q=(null==p?void 0:p.styles)||{});var t=new s(p,function(a,b,c,d,e,f,g){var h,i={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[d];"head"===a?h=e.headStyles:"body"===a?h=e.bodyStyles:"foot"===a&&(h=e.footStyles);var j=n({},i.table,i[a],e.styles,h),k=e.columnStyles[b.dataKey]||e.columnStyles[b.index]||{},l="body"===a&&c%2==0?n({},i.alternateRow,e.alternateRowStyles):{},m=n({},{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0},j,l,"body"===a?k:{});return n(m,g)}(a,o,h,e,d,f,q),a);j[o.dataKey]=t,j[o.index]=t,l=t.colSpan-1,g[o.index]={left:t.rowSpan-1,times:l}}else l--,k++;else g[o.index].left--,l=g[o.index].times,i++}return new r(b,h,a,j)})}function x(a,b){var c={};return a.forEach(function(a){if(null!=a.raw){var d=function(a,b){if("head"===a){if("object"==typeof b)return b.header||null;else if("string"==typeof b||"number"==typeof b)return b}else if("foot"===a&&"object"==typeof b)return b.footer;return null}(b,a.raw);null!=d&&(c[a.dataKey]=d)}}),Object.keys(c).length>0?c:null}function y(a,b,c,d){var e=b.settings;a.applyStyles(a.userStyles),("firstPage"===e.showHead||"everyPage"===e.showHead)&&b.head.forEach(function(e){return C(a,b,e,c,d)})}function z(a,b,c,d,e,f){a.applyStyles(a.userStyles);var g=Math.min(c+(f=null!=f?f:b.body.length),b.body.length),h=-1;return b.body.slice(c,g).forEach(function(f,g){var i=c+g===b.body.length-1,j=D(a,b,i,d);f.canEntireRowFit(j,e)&&(C(a,b,f,d,e),h=c+g)}),h}function A(a,b,c,d){var e=b.settings;a.applyStyles(a.userStyles),("lastPage"===e.showFoot||"everyPage"===e.showFoot)&&b.foot.forEach(function(e){return C(a,b,e,c,d)})}function B(a,b,c,d,e,f,g){var h=D(a,b,d,f);if(c.canEntireRowFit(h,g))C(a,b,c,f,g);else if(function(a,b,c,d){var e=a.pageSize().height,f=d.settings.margin,g=e-(f.top+f.bottom);"body"===b.section&&(g-=d.getHeadHeight(d.columns)+d.getFootHeight(d.columns));var h=b.getMinimumRowHeight(d.columns,a);if(h>g)return console.log("Will not be able to print row ".concat(b.index," correctly since it's minimum height is larger than page height")),!0;if(!(h<c))return!1;var i=b.hasRowSpan(d.columns);return b.getMaxCellHeight(d.columns)>g?(i&&console.log("The content of row ".concat(b.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!i&&"avoid"!==d.settings.rowPageBreak}(a,c,h,b)){var i=function(a,b,c,d){var e={};a.spansMultiplePages=!0,a.height=0;for(var f=0,g=0,h=c.columns;g<h.length;g++){var i=h[g],j=a.cells[i.index];if(j){Array.isArray(j.text)||(j.text=[j.text]);var k=new s(j.raw,j.styles,j.section);(k=n(k,j)).text=[];var l=function(a,b,c){var d=c.getLineHeight(a.styles.fontSize);return Math.max(0,Math.floor((b-a.padding("vertical"))/d))}(j,b,d);j.text.length>l&&(k.text=j.text.splice(l,j.text.length));var m=d.scaleFactor(),o=d.getLineHeightFactor();j.contentHeight=j.getContentHeight(m,o),j.contentHeight>=b&&(j.contentHeight=b,k.styles.minCellHeight-=b),j.contentHeight>a.height&&(a.height=j.contentHeight),k.contentHeight=k.getContentHeight(m,o),k.contentHeight>f&&(f=k.contentHeight),e[i.index]=k}}var p=new r(a.raw,-1,a.section,e,!0);p.height=f;for(var q=0,t=c.columns;q<t.length;q++){var i=t[q],k=p.cells[i.index];k&&(k.height=p.height);var j=a.cells[i.index];j&&(j.height=a.height)}return p}(c,h,b,a);C(a,b,c,f,g),E(a,b,e,f,g),B(a,b,i,d,e,f,g)}else E(a,b,e,f,g),B(a,b,c,d,e,f,g)}function C(a,b,c,d,e){d.x=b.settings.margin.left;for(var f=0;f<e.length;f++){var g=e[f],h=c.cells[g.index];if(!h||(a.applyStyles(h.styles),h.x=d.x,h.y=d.y,!1===b.callCellHooks(a,b.hooks.willDrawCell,h,c,g,d))){d.x+=g.width;continue}!function(a,b,c){var d=b.styles;if(a.getDocument().setFillColor(a.getDocument().getFillColor()),"number"==typeof d.lineWidth){var e=j(d.lineWidth,d.fillColor);e&&a.rect(b.x,c.y,b.width,b.height,e)}else"object"==typeof d.lineWidth&&(d.fillColor&&a.rect(b.x,c.y,b.width,b.height,"F"),function(a,b,c,d){var e,f,g,h;function i(b,c,d,e,f){a.getDocument().setLineWidth(b),a.getDocument().line(c,d,e,f,"S")}d.top&&(e=c.x,f=c.y,g=c.x+b.width,h=c.y,d.right&&(g+=.5*d.right),d.left&&(e-=.5*d.left),i(d.top,e,f,g,h)),d.bottom&&(e=c.x,f=c.y+b.height,g=c.x+b.width,h=c.y+b.height,d.right&&(g+=.5*d.right),d.left&&(e-=.5*d.left),i(d.bottom,e,f,g,h)),d.left&&(e=c.x,f=c.y,g=c.x,h=c.y+b.height,d.top&&(f-=.5*d.top),d.bottom&&(h+=.5*d.bottom),i(d.left,e,f,g,h)),d.right&&(e=c.x+b.width,f=c.y,g=c.x+b.width,h=c.y+b.height,d.top&&(f-=.5*d.top),d.bottom&&(h+=.5*d.bottom),i(d.right,e,f,g,h))}(a,b,c,d.lineWidth))}(a,h,d);var i=h.getTextPos();!function(a,b,c,d,e){d=d||{};var f=e.internal.scaleFactor,g=e.internal.getFontSize()/f,h=g*(e.getLineHeightFactor?e.getLineHeightFactor():1.15),i="",j=1;if(("middle"===d.valign||"bottom"===d.valign||"center"===d.halign||"right"===d.halign)&&(j=(i="string"==typeof a?a.split(/\r\n|\r|\n/g):a).length||1),c+=.8500000000000001*g,"middle"===d.valign?c-=j/2*h:"bottom"===d.valign&&(c-=j*h),"center"===d.halign||"right"===d.halign){var k=g;if("center"===d.halign&&(k*=.5),i&&j>=1){for(var l=0;l<i.length;l++)e.text(i[l],b-e.getStringUnitWidth(i[l])*k,c),c+=h;return}b-=e.getStringUnitWidth(a)*k}"justify"===d.halign?e.text(a,b,c,{maxWidth:d.maxWidth||100,align:"justify"}):e.text(a,b,c)}(h.text,i.x,i.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},a.getDocument()),b.callCellHooks(a,b.hooks.didDrawCell,h,c,g,d),d.x+=g.width}d.y+=c.height}function D(a,b,c,d){var e=b.settings.margin.bottom,f=b.settings.showFoot;return("everyPage"===f||"lastPage"===f&&c)&&(e+=b.getFootHeight(b.columns)),a.pageSize().height-d.y-e}function E(a,b,c,d,e,f){void 0===e&&(e=[]),void 0===f&&(f=!1),a.applyStyles(a.userStyles),"everyPage"!==b.settings.showFoot||f||b.foot.forEach(function(c){return C(a,b,c,d,e)}),b.callEndPageHooks(a,d);var g=b.settings.margin;i(a,b,c,d),F(a),b.pageNumber++,d.x=g.left,d.y=g.top,c.y=g.top,b.callWillDrawPageHooks(a,d),"everyPage"===b.settings.showHead&&(b.head.forEach(function(c){return C(a,b,c,d,e)}),a.applyStyles(a.userStyles))}function F(a){var b=a.pageNumber();return a.setPage(b+1),a.pageNumber()===b&&(a.addPage(),!0)}var G=a.i(12208),H=a.i(139138);let I=async(a,c,e,f,j,o="save")=>{try{var p,r,s,D,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;let Z=new b.default,$=Z.internal.pageSize.width,_=Z.internal.pageSize.height;Z.setFontSize(20),Z.setFont("helvetica","bold"),Z.text("PAYMENT REMINDER NOTICE",$/2,30,{align:"center"}),Z.setFontSize(12),Z.setFont("helvetica","normal");let aa=50;Z.text(f.businessName,20,aa),aa+=6,Z.text(f.businessAddress,20,aa),aa+=6,Z.text(`Phone: ${f.businessPhone}`,20,aa),aa+=6,Z.text(`Email: ${f.businessEmail}`,20,aa),aa+=15,Z.text(`Date: ${(0,G.format)(new Date,"MMMM d, yyyy")}`,$-20-60,50,{align:"left"}),Z.setFont("helvetica","bold"),Z.text("TO:",20,aa),aa+=8,Z.setFont("helvetica","normal"),Z.text(a.fullName,20,aa),aa+=6,a.phoneNumber&&(Z.text(`Phone: ${a.phoneNumber}`,20,aa),aa+=6),a.email&&(Z.text(`Email: ${a.email}`,20,aa),aa+=6),a.location&&(Z.text(`Address: ${a.location}`,20,aa),aa+=6),aa+=15,Z.setFont("helvetica","normal"),Z.text(`Dear ${a.fullName},`,20,aa),aa+=8;let ab=Z.splitTextToSize(j||"Our records show that you have pending payments for the following items purchased on credit. We kindly request you to complete payment at your earliest convenience.\n\nPlease reach out to us if you need any assistance or clarification.",$-40);Z.text(ab,20,aa),aa+=6*ab.length+10;let ac=c.flatMap(a=>{let b=a.items.reduce((a,b)=>a+b.price*b.quantity,0),c=b*((a.taxRate||0)/100),d=b+c;return a.items.map(b=>[a.receiptNumber,b.description,b.quantity.toString(),`${f.currency} ${(0,H.formatNumber)(b.price)}`,`${f.currency} ${(0,H.formatNumber)(b.price*b.quantity)}`,(0,G.format)(a.date,"MMM d, yyyy"),`${f.currency} ${(0,H.formatNumber)(d)}`])});ac.push(["","","","","TOTAL OUTSTANDING:",`${f.currency} ${(0,H.formatNumber)(e)}`,""]),p={startY:aa,head:[["Invoice #","Product Name","Qty","Price","Total","Sale Date","Sale Total"]],body:ac,theme:"grid",headStyles:{fillColor:[255,145,77],textColor:255,fontStyle:"bold"},bodyStyles:{fontSize:10},didParseCell:function(a){a.row.index===ac.length-1&&(a.cell.styles.fillColor=[255,200,150],a.cell.styles.fontStyle="bold")},margin:{left:20,right:20}},r=function(a,b){for(var c,e,f,h,i,j,l,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=new d(a),L=K.getDocumentOptions(),M=K.getGlobalOptions(),N=0,O=[M,L,b];N<O.length;N++){var P=O[N];P&&"object"!=typeof P&&console.error("The options parameter should be of type object, is: "+typeof P),P.startY&&"number"!=typeof P.startY&&(console.error("Invalid value for startY option",P.startY),delete P.startY)}var Q=n({},M,L,b),R=function(a,b,c){for(var d={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},e=function(e){if("columnStyles"===e)d.columnStyles=n({},a[e],b[e],c[e]);else{var f=[a,b,c].map(function(a){return a[e]||{}});d[e]=n({},f[0],f[1],f[2])}},f=0,g=Object.keys(d);f<g.length;f++)e(g[f]);return d}(M,L,b),S=function(a,b,c){for(var d={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},e=0,f=[a,b,c];e<f.length;e++){var g=f[e];g.didParseCell&&d.didParseCell.push(g.didParseCell),g.willDrawCell&&d.willDrawCell.push(g.willDrawCell),g.didDrawCell&&d.didDrawCell.push(g.didDrawCell),g.willDrawPage&&d.willDrawPage.push(g.willDrawPage),g.didDrawPage&&d.didDrawPage.push(g.didDrawPage)}return d}(M,L,b),T=(c=K,e=Q,D=k(e.margin,40/c.scaleFactor()),E=null!=(f=c,h=e.startY,i=f.getLastAutoTable(),j=f.scaleFactor(),l=f.pageNumber(),o=!1,i&&i.startPageNumber&&(o=i.startPageNumber+i.pageNumber-1===l),p="number"==typeof h?h:(null==h||!1===h)&&o&&(null==i?void 0:i.finalY)!=null?i.finalY+20/j:null)?p:D.top,B=!0===e.showFoot?"everyPage":!1===e.showFoot?"never":null!=(q=e.showFoot)?q:"everyPage",C=!0===e.showHead?"everyPage":!1===e.showHead?"never":null!=(r=e.showHead)?r:"everyPage",F=null!=(s=e.useCss)&&s,G=e.theme||(F?"plain":"striped"),H=!!e.horizontalPageBreak,I=null!=(t=e.horizontalPageBreakRepeat)?t:null,{includeHiddenHtml:null!=(u=e.includeHiddenHtml)&&u,useCss:F,theme:G,startY:E,margin:D,pageBreak:null!=(v=e.pageBreak)?v:"auto",rowPageBreak:null!=(w=e.rowPageBreak)?w:"auto",tableWidth:null!=(x=e.tableWidth)?x:"auto",showHead:C,showFoot:B,tableLineWidth:null!=(y=e.tableLineWidth)?y:0,tableLineColor:null!=(z=e.tableLineColor)?z:200,horizontalPageBreak:H,horizontalPageBreakRepeat:I,horizontalPageBreakBehaviour:null!=(A=e.horizontalPageBreakBehaviour)?A:"afterAllRows"}),U=function(a,b,c){var d,e,f,h,i,j=b.head||[],l=b.body||[],n=b.foot||[];if(b.html){var o=b.includeHiddenHtml;if(c){var p=function(a,b,c,d,e){void 0===d&&(d=!1),void 0===e&&(e=!1);var f,h,i="string"==typeof b?c.document.querySelector(b):b,j=Object.keys(a.getFontList()),l=a.scaleFactor(),n=[],o=[],p=[];if(!i)return console.error("Html table could not be found with input: ",b),{head:n,body:o,foot:p};for(var q=0;q<i.rows.length;q++){var r=i.rows[q],s=null==(h=null==(f=null==r?void 0:r.parentElement)?void 0:f.tagName)?void 0:h.toLowerCase(),t=function(a,b,c,d,e,f){for(var h=new g(d),i=0;i<d.cells.length;i++){var j=d.cells[i],l=c.getComputedStyle(j);if(e||"none"!==l.display){var n=void 0;f&&(n=function(a,b,c,d,e){var f={},g=96/72,h=m(b,function(a){return e.getComputedStyle(a).backgroundColor});null!=h&&(f.fillColor=h);var i=m(b,function(a){return e.getComputedStyle(a).color});null!=i&&(f.textColor=i);var j=function(a,b){var c=[a.paddingTop,a.paddingRight,a.paddingBottom,a.paddingLeft],d=96/(72/b),e=(parseInt(a.lineHeight)-parseInt(a.fontSize))/b/2,f=k(c.map(function(a){return parseInt(a||"0")/d}),0);return e>f.top&&(f.top=e),e>f.bottom&&(f.bottom=e),f}(d,c);j&&(f.cellPadding=j);var l="borderTopColor",n=g*c,o=d.borderTopWidth;if(d.borderBottomWidth===o&&d.borderRightWidth===o&&d.borderLeftWidth===o){var p=(parseFloat(o)||0)/n;p&&(f.lineWidth=p)}else f.lineWidth={top:(parseFloat(d.borderTopWidth)||0)/n,right:(parseFloat(d.borderRightWidth)||0)/n,bottom:(parseFloat(d.borderBottomWidth)||0)/n,left:(parseFloat(d.borderLeftWidth)||0)/n},!f.lineWidth.top&&(f.lineWidth.right?l="borderRightColor":f.lineWidth.bottom?l="borderBottomColor":f.lineWidth.left&&(l="borderLeftColor"));var q=m(b,function(a){return e.getComputedStyle(a)[l]});null!=q&&(f.lineColor=q);var r=["left","right","center","justify"];-1!==r.indexOf(d.textAlign)&&(f.halign=d.textAlign),-1!==(r=["middle","bottom","top"]).indexOf(d.verticalAlign)&&(f.valign=d.verticalAlign);var s=parseInt(d.fontSize||"");isNaN(s)||(f.fontSize=s/g);var t=function(a){var b="";return("bold"===a.fontWeight||"bolder"===a.fontWeight||parseInt(a.fontWeight)>=700)&&(b="bold"),("italic"===a.fontStyle||"oblique"===a.fontStyle)&&(b+="italic"),b}(d);t&&(f.fontStyle=t);var u=(d.fontFamily||"").toLowerCase();return -1!==a.indexOf(u)&&(f.font=u),f}(a,j,b,l,c)),h.push({rowSpan:j.rowSpan,colSpan:j.colSpan,styles:n,_element:j,content:function(a){var b=a.cloneNode(!0);return b.innerHTML=b.innerHTML.replace(/\n/g,"").replace(/ +/g," "),b.innerHTML=b.innerHTML.split(/<br.*?>/).map(function(a){return a.trim()}).join("\n"),b.innerText||b.textContent||""}(j)})}}var o=c.getComputedStyle(d);if(h.length>0&&(e||"none"!==o.display))return h}(j,l,c,r,d,e);t&&("thead"===s?n.push(t):"tfoot"===s?p.push(t):o.push(t))}return{head:n,body:o,foot:p}}(a,b.html,c,o,b.useCss)||{};j=p.head||j,l=p.body||j,n=p.foot||j}else console.error("Cannot parse html in non browser environment")}return{columns:b.columns||(d=j,e=l,f=n,h=d[0]||e[0]||f[0]||[],i=[],Object.keys(h).filter(function(a){return"_element"!==a}).forEach(function(a){var b,c=1;"object"!=typeof(b=Array.isArray(h)?h[parseInt(a)]:h[a])||Array.isArray(b)||(c=(null==b?void 0:b.colSpan)||1);for(var d=0;d<c;d++){var e={dataKey:Array.isArray(h)?i.length:a+(d>0?"_".concat(d):"")};i.push(e)}}),i),head:j,body:l,foot:n}}(K,Q,J);return{id:b.tableId,content:U,hooks:S,styles:R,settings:T}}(Z,p),D=function(a,b){var c=a.content,d=c.columns.map(function(a,b){var c;return new t("object"==typeof a&&null!=(c=a.dataKey)?c:b,a,b)});if(0===c.head.length){var e=x(d,"head");e&&c.head.push(e)}if(0===c.foot.length){var e=x(d,"foot");e&&c.foot.push(e)}var f=a.settings.theme,g=a.styles;return{columns:d,head:w("head",c.head,d,g,f,b),body:w("body",c.body,d,g,f,b),foot:w("foot",c.foot,d,g,f,b)}}(r,(s=new d(Z)).scaleFactor()),I=new q(r,D),U=s,V=I,W=U.scaleFactor(),X=V.settings.horizontalPageBreak,Y=l(U,V),V.allRows().forEach(function(a){for(var b=0,c=V.columns;b<c.length;b++){var d=c[b],e=a.cells[d.index];if(e){var f=V.hooks.didParseCell;V.callCellHooks(U,f,e,a,d,null);var g=e.padding("horizontal");e.contentWidth=h(e.text,e.styles,U)+g;var i=h(e.text.join(" ").split(/[^\S\u00A0]+/),e.styles,U);if(e.minReadableWidth=i+e.padding("horizontal"),"number"==typeof e.styles.cellWidth)e.minWidth=e.styles.cellWidth,e.wrappedWidth=e.styles.cellWidth;else if("wrap"===e.styles.cellWidth||!0===X)e.contentWidth>Y?(e.minWidth=Y,e.wrappedWidth=Y):(e.minWidth=e.contentWidth,e.wrappedWidth=e.contentWidth);else{var j=10/W;e.minWidth=e.styles.minCellWidth||j,e.wrappedWidth=e.contentWidth,e.minWidth>e.wrappedWidth&&(e.wrappedWidth=e.minWidth)}}}}),V.allRows().forEach(function(a){for(var b=0,c=V.columns;b<c.length;b++){var d=c[b],e=a.cells[d.index];if(e&&1===e.colSpan)d.wrappedWidth=Math.max(d.wrappedWidth,e.wrappedWidth),d.minWidth=Math.max(d.minWidth,e.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,e.minReadableWidth);else{var f=V.styles.columnStyles[d.dataKey]||V.styles.columnStyles[d.index]||{},g=f.cellWidth||f.minCellWidth;g&&"number"==typeof g&&(d.minWidth=g,d.wrappedWidth=g)}e&&(e.colSpan>1&&!d.minWidth&&(d.minWidth=e.minWidth),e.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=e.minWidth))}}),J=[],K=0,I.columns.forEach(function(a){var b=a.getMaxCustomCellWidth(I);b?a.width=b:(a.width=a.wrappedWidth,J.push(a)),K+=a.width}),(L=I.getWidth(s.pageSize().width)-K)&&(L=u(J,L,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),L&&(L=u(J,L,function(a){return a.minWidth})),L=Math.abs(L),!I.settings.horizontalPageBreak&&L>.1/s.scaleFactor()&&(L=L<1?L:Math.round(L),console.log("Of the table content, ".concat(L," units width could not fit page"))),function(a){for(var b=a.allRows(),c=0;c<b.length;c++)for(var d=b[c],e=null,f=0,g=0,h=0;h<a.columns.length;h++){var i=a.columns[h];if((g-=1)>1&&a.columns[h+1])f+=i.width,delete d.cells[i.index];else if(e){var j=e;delete d.cells[i.index],e=null,j.width=i.width+f}else{var j=d.cells[i.index];if(!j)continue;if(g=j.colSpan,f=0,j.colSpan>1){e=j,f+=i.width;continue}j.width=i.width+f}}}(I),function(a,b){for(var c={count:0,height:0},d=0,e=a.allRows();d<e.length;d++){for(var f=e[d],g=0,h=a.columns;g<h.length;g++){var i=h[g],j=f.cells[i.index];if(j){b.applyStyles(j.styles,!0);var k=j.width-j.padding("horizontal");if("linebreak"===j.styles.overflow)j.text=b.splitTextToSize(j.text,k+1/b.scaleFactor(),{fontSize:j.styles.fontSize});else if("ellipsize"===j.styles.overflow)j.text=v(j.text,k,j.styles,b,"...");else if("hidden"===j.styles.overflow)j.text=v(j.text,k,j.styles,b,"");else if("function"==typeof j.styles.overflow){var l=j.styles.overflow(j.text,k);"string"==typeof l?j.text=[l]:j.text=l}j.contentHeight=j.getContentHeight(b.scaleFactor(),b.getLineHeightFactor());var m=j.contentHeight/j.rowSpan;j.rowSpan>1&&c.count*c.height<m*j.rowSpan?c={height:m,count:j.rowSpan}:c&&c.count>0&&c.height>m&&(m=c.height),m>f.height&&(f.height=m)}}c.count--}}(I,s),function(a){for(var b={},c=1,d=a.allRows(),e=0;e<d.length;e++)for(var f=d[e],g=0,h=a.columns;g<h.length;g++){var i=h[g],j=b[i.index];if(c>1)c--,delete f.cells[i.index];else if(j)j.cell.height+=f.height,c=j.cell.colSpan,delete f.cells[i.index],j.left--,j.left<=1&&delete b[i.index];else{var k=f.cells[i.index];if(!k)continue;if(k.height=f.height,k.rowSpan>1){var l=d.length-e,m=k.rowSpan>l?l:k.rowSpan;b[i.index]={cell:k,left:m,row:f}}}}}(I),s.applyStyles(s.userStyles),N=(M=I.settings).startY,P={x:(O=M.margin).left,y:N},Q=I.getHeadHeight(I.columns)+I.getFootHeight(I.columns),R=N+O.bottom+Q,"avoid"===M.pageBreak&&(R+=I.body.reduce(function(a,b){return a+b.height},0)),S=new d(Z),("always"===M.pageBreak||null!=M.startY&&R>S.pageSize().height)&&(F(S),P.y=O.top),I.callWillDrawPageHooks(S,P),T=n({},P),I.startPageNumber=S.pageNumber(),M.horizontalPageBreak?function(a,b,c,d){var e=function(a,b){for(var c=[],d=0;d<b.columns.length;d++){var e=function(a,b,c){void 0===c&&(c={});var d,e=l(a,b),f=new Map,g=[],h=[],i=[];Array.isArray(b.settings.horizontalPageBreakRepeat)?i=b.settings.horizontalPageBreakRepeat:("string"==typeof b.settings.horizontalPageBreakRepeat||"number"==typeof b.settings.horizontalPageBreakRepeat)&&(i=[b.settings.horizontalPageBreakRepeat]),i.forEach(function(a){var c=b.columns.find(function(b){return b.dataKey===a||b.index===a});c&&!f.has(c.index)&&(f.set(c.index,!0),g.push(c.index),h.push(b.columns[c.index]),e-=c.wrappedWidth)});for(var j=!0,k=null!=(d=null==c?void 0:c.start)?d:0;k<b.columns.length;){if(f.has(k)){k++;continue}var m=b.columns[k].wrappedWidth;if(j||e>=m)j=!1,g.push(k),h.push(b.columns[k]),e-=m;else break;k++}return{colIndexes:g,columns:h,lastIndex:k-1}}(a,b,{start:d});e.columns.length&&(c.push(e),d=e.lastIndex)}return c}(a,b);if("afterAllRows"===b.settings.horizontalPageBreakBehaviour)e.forEach(function(e,f){var g,h,i,j,k;a.applyStyles(a.userStyles),f>0?E(a,b,c,d,e.columns,!0):y(a,b,d,e.columns),g=a,h=b,i=c,j=d,k=e.columns,g.applyStyles(g.userStyles),h.body.forEach(function(a,b){var c=b===h.body.length-1;B(g,h,a,c,i,j,k)}),A(a,b,d,e.columns)});else for(var f=-1,g=e[0];f<b.body.length-1;)!function(){var h=f;if(g){a.applyStyles(a.userStyles);var i=g.columns;f>=0?E(a,b,c,d,i,!0):y(a,b,d,i),h=z(a,b,f+1,d,i),A(a,b,d,i)}var j=h-f;e.slice(1).forEach(function(e){a.applyStyles(a.userStyles),E(a,b,c,d,e.columns,!0),z(a,b,f+1,d,e.columns,j),A(a,b,d,e.columns)}),f=h}()}(S,I,T,P):(S.applyStyles(S.userStyles),("firstPage"===M.showHead||"everyPage"===M.showHead)&&I.head.forEach(function(a){return C(S,I,a,P,I.columns)}),S.applyStyles(S.userStyles),I.body.forEach(function(a,b){var c=b===I.body.length-1;B(S,I,a,c,T,P,I.columns)}),S.applyStyles(S.userStyles),("lastPage"===M.showFoot||"everyPage"===M.showFoot)&&I.foot.forEach(function(a){return C(S,I,a,P,I.columns)})),i(S,I,T,P),I.callEndPageHooks(S,P),I.finalY=P.y,Z.lastAutoTable=I,S.applyStyles(S.userStyles);let ad=Z.lastAutoTable.finalY+20;Z.setFont("helvetica","bold"),Z.text("Thank you for your continued support.",20,ad),Z.setFont("helvetica","normal"),Z.setFontSize(10),Z.text(`${f.businessName} - Payment Reminder`,20,ad+15),Z.setFontSize(8),Z.setFont("helvetica","normal"),Z.setTextColor(150,150,150),Z.text("Created By Gonza Systems",$/2,_-10,{align:"center"}),Z.setTextColor(0,0,0);let ae=`Payment_Reminder_${a.fullName.replace(/\s+/g,"_")}_${(0,G.format)(new Date,"yyyy-MM-dd")}.pdf`;if("blob"===o)return Z.output("blob");if("dataurl"===o)return Z.output("datauristring");Z.save(ae)}catch(a){throw console.error("Error generating payment reminder PDF:",a),Error("Failed to generate payment reminder PDF")}};a.s(["generatePaymentReminderPDF",0,I],293959)},947303,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(352817),g=a.i(713003),h=a.i(638904),i=a.i(18308),j=a.i(495550),k=a.i(433780),l=a.i(654740),m=a.i(9497),n=a.i(24553),o=a.i(293959),p=a.i(771826),q=a.i(857396),r=b([p]);[p]=r.then?(await r)():r,a.s(["default",0,({isOpen:a,onOpenChange:b,sale:c,customer:r,unpaidSales:s})=>{let t=(0,i.useIsMobile)(),{settings:u,isLoading:v}=(0,p.useBusinessSettings)(),{toast:w}=(0,q.useToast)(),[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(!1),D=r||(c?{id:"placeholder",fullName:c.customerName,phoneNumber:c.customerContact,email:null,location:c.customerAddress,createdAt:new Date,updatedAt:new Date,loyaltyPoints:0,totalSpent:0,lastVisit:null,categoryId:null,birthday:null,socialMedia:null,gender:null,tags:null,notes:null}:null),E=s||(c?[c]:[]),F=E.reduce((a,b)=>{let c=b.items.reduce((a,b)=>a+b.price*b.quantity,0),d=c*((b.taxRate||0)/100);return a+c+d},0);(0,e.useEffect)(()=>{a&&D&&E.length>0&&u?G():!a&&x&&(URL.revokeObjectURL(x),y(null))},[a,u]);let G=async()=>{if(D&&0!==E.length&&u){C(!0);try{let a=await (0,o.generatePaymentReminderPDF)(D,E,F,u,void 0,"blob"),b=URL.createObjectURL(a);y(b),A(a)}catch(a){console.error("Error generating preview:",a),w({title:"Error",description:"Failed to generate PDF preview.",variant:"destructive"})}finally{C(!1)}}},H=async()=>{if(D&&0!==E.length&&u)try{await (0,o.generatePaymentReminderPDF)(D,E,F,u,void 0,"save")}catch(a){w({title:"Error",description:"Failed to download PDF.",variant:"destructive"})}},I=()=>{if(x){let a=window.open(x);a&&a.addEventListener("load",()=>{a.print()})}},J=async()=>{let a=`Payment_Reminder_${D?.fullName.replace(/\s+/g,"_")||"Customer"}.pdf`,b=`Hello ${D?.fullName||"Customer"}, this is a payment reminder from ${u?.businessName||"our business"} regarding your outstanding balance of ${u?.currency||""} ${F.toLocaleString()}.`;if(navigator.share&&z)try{let c=new File([z],a,{type:"application/pdf"});if(navigator.canShare&&navigator.canShare({files:[c]}))return void await navigator.share({files:[c],title:"Payment Reminder",text:b});await navigator.share({title:"Payment Reminder",text:b})}catch(a){"AbortError"!==a.name&&console.error("Error sharing:",a)}else if(navigator.share)try{await navigator.share({title:"Payment Reminder",text:b})}catch(a){"AbortError"!==a.name&&console.error("Error sharing:",a)}else try{await navigator.clipboard.writeText(b),w({title:"Copied to clipboard",description:"Payment reminder summary copied to clipboard."})}catch(a){w({title:"Share failed",description:"Could not share or copy the message.",variant:"destructive"})}},K=()=>(0,d.jsxs)("div",{className:"flex flex-col h-full space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center py-2 order-first",children:[(0,d.jsxs)(h.Button,{variant:"outline",onClick:J,className:"flex-1 min-w-[120px] bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",children:[(0,d.jsx)(l.Share2,{className:"h-4 w-4 mr-2 text-blue-600"}),"Share"]}),(0,d.jsxs)(h.Button,{variant:"outline",onClick:I,className:"flex-1 min-w-[120px]",disabled:!x,children:[(0,d.jsx)(k.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,d.jsxs)(h.Button,{onClick:H,className:"flex-1 min-w-[120px] bg-orange-500 hover:bg-orange-600",children:[(0,d.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]}),(0,d.jsx)("div",{className:"flex-1 bg-gray-100 rounded-lg overflow-hidden min-h-[600px] relative",children:B?(0,d.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-4 bg-white/50 backdrop-blur-sm",children:[(0,d.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin text-orange-500"}),(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Generating preview..."})]}):x?(0,d.jsx)("iframe",{src:x,className:"w-full h-full min-h-[600px] border-none",title:"Payment Reminder Preview"}):(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Preview not available."})})})]});return t?(0,d.jsx)(g.Drawer,{open:a,onOpenChange:b,children:(0,d.jsxs)(g.DrawerContent,{className:"max-h-[95vh]",children:[(0,d.jsx)(g.DrawerHeader,{className:"border-b pb-2",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(g.DrawerTitle,{children:"Payment Reminder Preview"}),(0,d.jsx)(g.DrawerClose,{asChild:!0,children:(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,d.jsx)(m.X,{className:"h-4 w-4"})})})]})}),(0,d.jsx)("div",{className:"px-4 py-4 overflow-y-auto",children:(0,d.jsx)(K,{})}),(0,d.jsx)(g.DrawerFooter,{className:"pt-2 border-t",children:(0,d.jsx)(h.Button,{variant:"outline",onClick:()=>b(!1),children:"Close"})})]})}):(0,d.jsx)(f.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(f.DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col p-0 overflow-hidden",children:[(0,d.jsx)(f.DialogHeader,{className:"px-6 py-4 border-b",children:(0,d.jsx)(f.DialogTitle,{children:"Payment Reminder Preview"})}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50",children:(0,d.jsx)(K,{})})]})})}]),c()}catch(a){c(a)}},!1),752930,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(638904),g=a.i(850931),h=a.i(443562),i=a.i(352817),j=a.i(379643),k=a.i(884254),l=a.i(970683),m=a.i(737229),n=a.i(318201),o=b([n]);[n]=o.then?(await o)():o,a.s(["default",0,()=>{let{categories:a,createCategory:b,updateCategory:c,deleteCategory:o,createDefaultCategories:p}=(0,n.useSalesCategories)(),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)(""),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)(null),C=async()=>{!s.trim()||await b(s.trim())&&t("")},D=async()=>{u&&w.trim()&&await c(u.id,w.trim())&&(v(null),x(""))},E=async()=>{!A||await o(A.id)&&(z(!1),B(null))},F=async()=>{await p()};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.Dialog,{open:q,onOpenChange:r,children:[(0,d.jsx)(i.DialogTrigger,{asChild:!0}),(0,d.jsxs)(i.DialogContent,{className:"max-w-2xl",children:[(0,d.jsx)(i.DialogHeader,{children:(0,d.jsx)(i.DialogTitle,{children:"Manage Sales Categories"})}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{htmlFor:"new-category",children:"Add New Category"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(g.Input,{id:"new-category",placeholder:"Category name",value:s,onChange:a=>t(a.target.value),onKeyPress:a=>"Enter"===a.key&&C()}),(0,d.jsxs)(f.Button,{onClick:C,disabled:!s.trim(),children:[(0,d.jsx)(k.Plus,{className:"h-4 w-4 mr-2"}),"Add"]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)(h.Label,{children:"Existing Categories"}),0===a.length&&(0,d.jsx)(f.Button,{variant:"outline",size:"sm",onClick:F,children:"Create Default Categories"})]}),a.length>0?(0,d.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map(a=>(0,d.jsx)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:u?.id===a.id?(0,d.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,d.jsx)(g.Input,{value:w,onChange:a=>x(a.target.value),onKeyPress:a=>"Enter"===a.key&&D(),className:"flex-1"}),(0,d.jsx)(f.Button,{size:"sm",onClick:D,children:"Save"}),(0,d.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>v(null),children:"Cancel"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"font-medium",children:a.name}),a.is_default&&(0,d.jsx)("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:"Default"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>{v(a),x(a.name)},children:(0,d.jsx)(l.Edit,{className:"h-4 w-4"})}),(0,d.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>{B(a),z(!0)},children:(0,d.jsx)(m.Trash2,{className:"h-4 w-4"})})]})]})},a.id))}):(0,d.jsx)("p",{className:"text-muted-foreground text-sm",children:"No categories found. Create your first category above."})]})]})]})]}),(0,d.jsx)(j.AlertDialog,{open:y,onOpenChange:z,children:(0,d.jsxs)(j.AlertDialogContent,{children:[(0,d.jsxs)(j.AlertDialogHeader,{children:[(0,d.jsx)(j.AlertDialogTitle,{children:"Delete Category"}),(0,d.jsxs)(j.AlertDialogDescription,{children:['Are you sure you want to delete "',A?.name,'"? This action cannot be undone.']})]}),(0,d.jsxs)(j.AlertDialogFooter,{children:[(0,d.jsx)(j.AlertDialogCancel,{children:"Cancel"}),(0,d.jsx)(j.AlertDialogAction,{onClick:E,children:"Delete"})]})]})})]})}]),c()}catch(a){c(a)}},!1),491158,a=>{"use strict";let b=(0,a.i(701269).default)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>b],491158)},659348,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(635330),g=a.i(139138),h=a.i(336361),i=a.i(911070),j=a.i(491158),k=a.i(588262),l=b([k]);[k]=l.then?(await l)():l,a.s(["SalesSummaryCards",0,({sales:a,currency:b})=>{let{formatFinancial:c,canViewCostPrice:l,canViewProfit:m,canViewTotalAmount:n,canViewSellingPrice:o}=(0,k.useFinancialVisibility)(),p=(0,e.useMemo)(()=>a.reduce((a,b)=>{let c=b.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),d=b.taxRate||0,e=c+d/100*c,f=b.items.reduce((a,b)=>a+b.cost*b.quantity,0);return{totalSales:a.totalSales+e,totalCost:a.totalCost+f,totalProfit:a.totalProfit+(e-f)}},{totalSales:0,totalCost:0,totalProfit:0}),[a]);return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,d.jsx)(f.Card,{className:"bg-blue-50 border-blue-100",children:(0,d.jsxs)(f.CardContent,{className:"p-6 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Total Sales"}),(0,d.jsx)("h3",{className:"text-2xl font-bold text-blue-900",children:n||o?`${b} ${(0,g.formatNumber)(p.totalSales)}`:""}),(0,d.jsxs)("p",{className:"text-xs text-blue-500 mt-1",children:["Based on ",a.length," records"]})]}),(0,d.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(h.TrendingUp,{className:"h-6 w-6 text-blue-600"})})]})}),(0,d.jsx)(f.Card,{className:"bg-orange-50 border-orange-100",children:(0,d.jsxs)(f.CardContent,{className:"p-6 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-orange-600 mb-1",children:"Total Cost"}),(0,d.jsx)("h3",{className:"text-2xl font-bold text-orange-900",children:l?`${b} ${(0,g.formatNumber)(p.totalCost)}`:""}),(0,d.jsx)("p",{className:"text-xs text-orange-500 mt-1",children:"Cost of goods sold"})]}),(0,d.jsx)("div",{className:"h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(j.Wallet,{className:"h-6 w-6 text-orange-600"})})]})}),(0,d.jsx)(f.Card,{className:"bg-green-50 border-green-100",children:(0,d.jsxs)(f.CardContent,{className:"p-6 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Total Profit"}),(0,d.jsx)("h3",{className:"text-2xl font-bold text-green-900",children:m?`${b} ${(0,g.formatNumber)(p.totalProfit)}`:""}),(0,d.jsx)("p",{className:"text-xs text-green-500 mt-1",children:"Net earnings"})]}),(0,d.jsx)("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(i.DollarSign,{className:"h-6 w-6 text-green-600"})})]})})]})}]),c()}catch(a){c(a)}},!1),972385,a=>{"use strict";var b=a.i(800717),c=a.i(5315),d=a.i(809933);a.s(["useSalesFilters",0,a=>{let e=(()=>{try{let a=localStorage.getItem("salesFilters");if(a){let b=JSON.parse(a);return{searchQuery:b.searchQuery||"",dateFilter:b.dateFilter||"this-month",paymentFilter:b.paymentFilter||"all",cashTransactionFilter:b.cashTransactionFilter||"all",categoryFilter:b.categoryFilter||"all",dateRange:b.dateRange?{from:b.dateRange.from?new Date(b.dateRange.from):void 0,to:b.dateRange.to?new Date(b.dateRange.to):void 0}:{from:void 0,to:void 0},specificDate:b.specificDate?new Date(b.specificDate):void 0}}}catch(a){console.error("Error loading persisted sales filters:",a)}return{searchQuery:"",dateFilter:"this-month",paymentFilter:"all",cashTransactionFilter:"all",categoryFilter:"all",dateRange:{from:void 0,to:void 0},specificDate:void 0}})(),[f,g]=(0,b.useState)(e.searchQuery),[h,i]=(0,b.useState)(e.paymentFilter),[j,k]=(0,b.useState)(e.cashTransactionFilter),[l,m]=(0,b.useState)(e.categoryFilter),[n,o]=(0,b.useState)(e.dateFilter),[p,q]=(0,b.useState)(e.dateRange),[r,s]=(0,b.useState)(e.specificDate);(0,b.useEffect)(()=>{let a={searchQuery:f,dateFilter:n,paymentFilter:h,cashTransactionFilter:j,categoryFilter:l,dateRange:{from:p.from?.toISOString(),to:p.to?.toISOString()},specificDate:r?.toISOString()};localStorage.setItem("salesFilters",JSON.stringify(a))},[f,n,h,j,l,p,r]);let t="custom"===n,u="specific"===n,v=(0,b.useMemo)(()=>{let b=[...a];if(f.trim()){let a=f.toLowerCase();b=b.filter(b=>b.customerName.toLowerCase().includes(a)||b.receiptNumber.toLowerCase().includes(a)||b.items.some(b=>b.description.toLowerCase().includes(a)))}if("all"!==h&&(b=b.filter(a=>a.paymentStatus===h)),"all"!==j&&("linked"===j?b=b.filter(a=>a.cashTransactionId):"unlinked"===j&&(b=b.filter(a=>!a.cashTransactionId))),"all"!==l&&(b="none"===l?b.filter(a=>!a.categoryId):b.filter(a=>a.categoryId===l)),"all"!==n)if(u&&r)b=b.filter(a=>{let b=new Date(a.date);return(0,d.isSameDay)(b,r)});else if(t&&p.from&&p.to){let a=p.from,c=p.to;b=b.filter(b=>{let d=new Date(b.date);return d>=a&&d<=c})}else{let a=(0,c.getDateRangeFromFilter)(n),d=a.from,e=a.to;b=b.filter(a=>{let b=new Date(a.date);return b>=d&&b<=e})}return b},[a,f,h,j,l,n,p,r,t,u]);return{searchQuery:f,setSearchQuery:g,paymentFilter:h,setPaymentFilter:i,cashTransactionFilter:j,setCashTransactionFilter:k,categoryFilter:l,setCategoryFilter:m,dateFilter:n,setDateFilter:o,dateRange:p,setDateRange:q,specificDate:r,setSpecificDate:s,isCustomRange:t,isSpecificDate:u,filteredSales:v}}])},210820,a=>{"use strict";var b=a.i(800717);function c({items:a,itemsPerPage:c=20}){let[d,e]=(0,b.useState)(1),f=(0,b.useMemo)(()=>Math.max(1,Math.ceil(a.length/c)),[a,c]);(0,b.useMemo)(()=>{d>f&&e(f)},[f,d]);let g=(0,b.useMemo)(()=>{let b=(d-1)*c;return a.slice(b,b+c)},[a,d,c]);return{currentPage:d,setCurrentPage:e,paginatedItems:g,totalPages:f}}a.s(["usePagination",()=>c])},210696,a=>{"use strict";let b=(0,a.i(701269).default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);a.s(["Receipt",()=>b],210696)},964853,a=>{"use strict";let b=(0,a.i(701269).default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);a.s(["Quote",()=>b],964853)},989414,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(745310),g=a.i(716312),h=a.i(284248),i=a.i(617066),j=a.i(485396),k=a.i(184590),l=a.i(375290),m=a.i(625252),n=a.i(947303),o=a.i(752930),p=a.i(659348),q=a.i(972385),r=a.i(210820),s=a.i(18308),t=a.i(771091),u=a.i(804182),v=a.i(157047),w=a.i(771826),x=a.i(857396),y=a.i(778052),z=a.i(588262),A=a.i(635330),B=a.i(638904),C=a.i(819637),D=a.i(970683),E=a.i(737229),F=a.i(210696),G=a.i(384674),H=a.i(964853),I=a.i(857682),J=a.i(139138),K=a.i(256826),L=a.i(570588),M=b([g,h,i,m,n,o,p,t,u,v,w,y,z]);[g,h,i,m,n,o,p,t,u,v,w,y,z]=M.then?(await M)():M;let N={businessName:"Your Business Name",businessAddress:"Your Business Address",businessPhone:"(123) 456-7890",businessEmail:"support@yourbusiness.com",businessLogo:"",currency:"UGX"},O=e.default.memo(({sale:a,settings:b,onViewReceipt:c,onEditSale:e,onDeleteSale:f,onSendPaymentReminder:g,onSendThankYouNotice:h,cashAccountName:i})=>{let{payments:j}=(0,y.useInstallmentPayments)(a.id),{hasPermission:k}=(0,t.useProfiles)(),{canViewCostPrice:l,canViewProfit:m,canViewSellingPrice:n,canViewTotalAmount:o}=(0,z.useFinancialVisibility)(),p=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),q=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+d},0),r=a.taxRate||0,s=p+r/100*p,u=a.items.reduce((a,b)=>a+b.cost*b.quantity,0),v="Installment Sale"===a.paymentStatus?j.reduce((a,b)=>a+b.amount,0):a.amountPaid||0,w="Installment Sale"===a.paymentStatus?Math.max(0,s-v):a.amountDue||0,x="No items";a.items&&Array.isArray(a.items)&&a.items.length>0&&(x=a.items[0].description,a.items.length>1&&(x+=` (+${a.items.length-1} more)`));let K="NOT PAID"===a.paymentStatus,M="Installment Sale"===a.paymentStatus&&w>0,N=(()=>{switch(a.paymentStatus){case"Paid":default:return F.Receipt;case"NOT PAID":return G.FileText;case"Quote":return H.Quote}})(),O=(()=>{switch(a.paymentStatus){case"Paid":default:return"Receipt";case"NOT PAID":return"Invoice";case"Quote":return"Quotation"}})();return(0,d.jsx)(A.Card,{className:`mb-3 bg-white border shadow-sm ${i?"border-l-4 border-l-green-500 border-green-200":"border-gray-200"}`,children:(0,d.jsxs)(A.CardContent,{className:"p-4",children:[i&&(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2 p-2 bg-green-50 rounded-md border border-green-200",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),(0,d.jsxs)("span",{className:"text-xs font-medium text-green-700 truncate",children:["Linked to: ",i]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,d.jsx)("p",{className:"font-semibold text-gray-900 text-sm truncate",children:a.customerName}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:new Date(a.date).toLocaleDateString("en-GB")}),"Installment Sale"===a.paymentStatus&&w>0&&(0,d.jsxs)(C.Badge,{variant:"outline",className:"text-xs bg-red-50 text-red-700 border-red-200 mt-1",children:["Due: ",n||o?`${b.currency} ${(0,J.formatNumber)(w)}`:""]})]}),(0,d.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${(()=>{switch(a.paymentStatus){case"Paid":return"bg-green-100 text-green-700";case"Quote":return"bg-purple-100 text-purple-700";case"Installment Sale":return"bg-blue-100 text-blue-700";default:return"bg-yellow-100 text-yellow-700"}})()}`,children:"Installment Sale"===a.paymentStatus?"Installment":"NOT PAID"===a.paymentStatus?"Credit":a.paymentStatus})]}),(0,d.jsxs)(L.Tooltip,{children:[(0,d.jsx)(L.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("p",{className:"text-xs text-gray-600 mb-3 line-clamp-1 cursor-help",children:x})}),(0,d.jsx)(L.TooltipContent,{side:"top",className:"max-w-xs",children:(0,d.jsx)("div",{className:"space-y-1",children:(0,d.jsx)("p",{className:"font-bold break-words whitespace-normal",children:x})})})]}),(0,d.jsxs)("div",{className:"space-y-3 mb-3",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Cost"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:l?`${b.currency} ${(0,J.formatNumber)(u)}`:""})]}),q>0?(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Discount"}),(0,d.jsx)("p",{className:"font-semibold text-orange-600",children:n?`-${b.currency} ${(0,J.formatNumber)(q)}`:""})]}):(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Discount"}),(0,d.jsx)("p",{className:"font-semibold text-gray-400",children:"-"})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Total Amount"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:o||n?`${b.currency} ${(0,J.formatNumber)(s)}`:""}),r>0&&(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Tax incl."}),"Installment Sale"===a.paymentStatus&&v>0&&(0,d.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["Paid: ",o||n?`${b.currency} ${(0,J.formatNumber)(v)}`:""]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Profit"}),(0,d.jsx)("p",{className:"font-semibold text-green-600",children:m?`${b.currency} ${(0,J.formatNumber)(s-u)}`:""})]})]})]}),(0,d.jsxs)("div",{className:"pt-3 border-t border-gray-100 space-y-2",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,d.jsxs)(B.Button,{variant:"outline",size:"sm",onClick:()=>c(a),className:"flex items-center gap-1.5 text-xs h-8 border-gray-200 flex-1 min-w-0",children:[(0,d.jsx)(N,{className:"h-3 w-3 flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:O})]}),K&&(0,d.jsxs)(B.Button,{variant:"outline",size:"sm",onClick:()=>g(a),className:"flex items-center gap-1.5 text-xs h-8 border-orange-200 text-orange-600 hover:bg-orange-50 flex-1 min-w-0",children:[(0,d.jsx)(G.FileText,{className:"h-3 w-3 flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:"Reminder"})]}),M&&(0,d.jsxs)(B.Button,{variant:"outline",size:"sm",onClick:()=>g(a),className:"flex items-center gap-1.5 text-xs h-8 border-blue-200 text-blue-600 hover:bg-blue-50 flex-1 min-w-0",children:[(0,d.jsx)(G.FileText,{className:"h-3 w-3 flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:"Due Reminder"})]}),(0,d.jsxs)(B.Button,{variant:"outline",size:"sm",onClick:()=>h(a),className:"flex items-center gap-1.5 text-xs h-8 border-purple-200 text-purple-600 hover:bg-purple-50 flex-1 min-w-0",children:[(0,d.jsx)(I.Heart,{className:"h-3 w-3 flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:"Thanks"})]})]}),(0,d.jsxs)("div",{className:"flex justify-center gap-2",children:[k("sales","edit")&&(0,d.jsxs)(B.Button,{variant:"ghost",size:"sm",onClick:()=>e(a),className:"h-8 px-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-1",children:[(0,d.jsx)(D.Edit,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"text-xs",children:"Edit"})]}),k("sales","delete")&&(0,d.jsxs)(B.Button,{variant:"ghost",size:"sm",onClick:()=>f(a),className:"h-8 px-3 hover:bg-red-50 hover:text-red-600 flex items-center gap-1",children:[(0,d.jsx)(E.Trash2,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"text-xs",children:"Delete"})]})]})]})]})})});O.displayName="MobileCard",a.s(["default",0,({sales:a,onViewReceipt:b,onEditSale:c,onDeleteSale:t,currency:y="USD",onDateFilterChange:z,onDateRangeChange:A,isLoading:B=!1,mobileOptimized:C=!1})=>{let[D,E]=(0,e.useState)({...N,currency:y}),[I,J]=(0,e.useState)(null),[M,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(!1),[S,T]=(0,e.useState)(null),[U,V]=(0,e.useState)(!1),[W,X]=(0,e.useState)(null),[Y,Z]=(0,e.useState)(!1),{accounts:$}=(0,u.useCashAccounts)(),{transactions:_}=(0,v.useCashTransactions)(),{settings:aa}=(0,w.useBusinessSettings)(),{toast:ab}=(0,x.useToast)(),ac=(0,s.useIsMobile)(),{searchQuery:ad,setSearchQuery:ae,paymentFilter:af,setPaymentFilter:ag,cashTransactionFilter:ah,setCashTransactionFilter:ai,categoryFilter:aj,setCategoryFilter:ak,dateFilter:al,setDateFilter:am,dateRange:an,setDateRange:ao,specificDate:ap,setSpecificDate:aq,isCustomRange:ar,isSpecificDate:as,filteredSales:at}=(0,q.useSalesFilters)(a),au=(0,e.useMemo)(()=>at,[at]),{currentPage:av,setCurrentPage:aw,paginatedItems:ax,totalPages:ay}=(0,r.usePagination)({items:au,itemsPerPage:C?5:10});(0,e.useEffect)(()=>{z&&z(al)},[al,z]),(0,e.useEffect)(()=>{A&&ar&&A(an)},[an,ar,A]),(0,e.useEffect)(()=>{E(a=>({...a,currency:y}));let a=localStorage.getItem("businessSettings");if(a){let b=JSON.parse(a);E({...b,currency:y||b.currency})}},[y]);let az=(0,e.useCallback)(a=>{if(!a.cashTransactionId)return null;let b=_.find(b=>b.id===a.cashTransactionId);if(!b||!b.accountId)return null;let c=$.find(a=>a.id===b.accountId);return c?c.name:null},[_,$]);(0,e.useCallback)(a=>{switch(a){case"Paid":default:return"Receipt";case"NOT PAID":return"Invoice";case"Quote":return"Quotation"}},[]),(0,e.useCallback)(a=>{switch(a){case"Paid":default:return F.Receipt;case"NOT PAID":return G.FileText;case"Quote":return H.Quote}},[]);let aA=(0,e.useCallback)(a=>{J(a),P(!0)},[]),aB=(0,e.useCallback)(async()=>{if(I&&!Q){R(!0);try{await t(I),P(!1),J(null)}finally{R(!1)}}},[I,t,Q]),aC=(0,e.useCallback)(a=>{Q||a||(P(!1),J(null))},[Q]),aD=(0,e.useCallback)(a=>{T(a),V(!0)},[]),aE=(0,e.useCallback)(()=>{V(!1),T(null)},[]),aF=(0,e.useCallback)(async a=>{try{a.customerId,a.customerName,a.customerContact,a.customerAddress,a.items.reduce((a,b)=>a+b.price*b.quantity,0),a.taxRate,X(a),Z(!0)}catch(a){console.error("Error generating payment reminder:",a),ab({title:"Error",description:"Failed to generate payment reminder. Please try again.",variant:"destructive"})}},[aa,D,ab]);return((0,e.useCallback)(a=>{if(!(0,K.canSendSMS)({phoneNumber:a.customerContact}))return void ab({title:"Phone number required",description:"Customer phone number is not available for WhatsApp.",variant:"destructive"});let b=(0,K.getThankYouMessage)(a,aa||D);(0,K.openWhatsApp)({phoneNumber:a.customerContact,message:b}),ab({title:"WhatsApp Opened",description:`Opening WhatsApp chat for ${a.customerName}`})},[aa,D,ab]),B)?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[40vh] space-y-4",children:[(0,d.jsx)("img",{src:"/lovable-uploads/7f7549a3-e9df-4762-b8b9-8e041e34f55d.png",alt:"Loading",className:"w-12 h-12 animate-spin"}),(0,d.jsx)("p",{className:"text-muted-foreground text-sm",children:"Loading sales..."})]}):(0,d.jsx)(L.TooltipProvider,{children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-border/50",children:[(0,d.jsx)("div",{className:"p-4 sm:p-6 border-b border-border/50",children:(0,d.jsx)("div",{className:"flex flex-col gap-4",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Sales Records"}),(0,d.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[au.length," ",1===au.length?"record":"records"," found"]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(o.default,{}),(0,d.jsx)("div",{className:"w-full sm:w-auto",children:(0,d.jsx)(g.default,{filteredSales:au,allSales:a,currency:D.currency})})]})]})})}),(0,d.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,d.jsx)(p.SalesSummaryCards,{sales:au,currency:D.currency}),(0,d.jsx)(h.default,{searchQuery:ad,setSearchQuery:ae,paymentFilter:af,setPaymentFilter:ag,cashTransactionFilter:ah,setCashTransactionFilter:ai,categoryFilter:aj,setCategoryFilter:ak,dateFilter:al,setDateFilter:am,dateRange:an,setDateRange:ao,specificDate:ap,setSpecificDate:aq,isCustomRange:ar,isSpecificDate:as}),au.length>0?(0,d.jsxs)(d.Fragment,{children:[ac?(0,d.jsx)("div",{className:"space-y-3",children:ax.map(a=>(0,d.jsx)(O,{sale:a,settings:D,onViewReceipt:b,onEditSale:c,onDeleteSale:aA,onSendPaymentReminder:aF,onSendThankYouNotice:aD,cashAccountName:az(a)},a.id))}):(0,d.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,d.jsxs)(f.Table,{children:[(0,d.jsx)(f.TableHeader,{children:(0,d.jsxs)(f.TableRow,{children:[(0,d.jsx)(f.TableHead,{children:"Date"}),(0,d.jsx)(f.TableHead,{children:"Receipt #"}),(0,d.jsx)(f.TableHead,{children:"Customer"}),(0,d.jsx)(f.TableHead,{children:"Item"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Total Qty"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Avg Price"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Discount"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Cost"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Profit"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Total (incl. Tax)"}),(0,d.jsx)(f.TableHead,{children:"Status"}),(0,d.jsx)(f.TableHead,{className:"text-right",children:"Actions"})]})}),(0,d.jsx)(f.TableBody,{children:ax.map(a=>(0,d.jsx)(i.default,{sale:a,currency:D.currency,onViewReceipt:b,onEditSale:c,onDeleteSale:aA,onSendPaymentReminder:aF,onSendThankYouNotice:aD},a.id))})]})}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)(j.default,{currentPage:av,totalPages:ay,onPageChange:aw})})]}):(0,d.jsx)(k.default,{})]})]}),(0,d.jsx)(l.default,{isOpen:M,onOpenChange:aC,onConfirm:aB,isDeleting:Q}),S&&(0,d.jsx)(m.default,{customer:{id:S.customerId||"",fullName:S.customerName,phoneNumber:S.customerContact||"",email:"",location:S.customerAddress||"",categoryId:null,createdAt:new Date,updatedAt:new Date,birthday:null,socialMedia:null,gender:null,tags:null,notes:null},open:U,onClose:aE,defaultTemplate:"thank_you",sale:S}),(0,d.jsx)(n.default,{isOpen:Y,onOpenChange:Z,sale:W})]})})}]),c()}catch(a){c(a)}},!1),817508,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(989414),g=a.i(895186),h=b([f]);[f]=h.then?(await h)():h,a.s(["default",0,({sales:a,onViewReceipt:b,onEditSale:c,onDeleteSale:h,currency:i,isLoading:j})=>(0,d.jsx)("div",{className:"space-y-6",children:(0,d.jsx)(e.Suspense,{fallback:(0,d.jsx)(g.default,{}),children:(0,d.jsx)(f.default,{sales:a,onViewReceipt:b,onEditSale:c,onDeleteSale:h,currency:i,isLoading:j,mobileOptimized:!1})})})]),c()}catch(a){c(a)}},!1),765504,a=>{"use strict";a.i(551756);var b=a.i(931497);let c=async(b,c,d={})=>{let{generateVectorPDF:e}=await a.A(380711);await e(b,{filename:c,orientation:"landscape",format:"a4",margins:{top:10,right:10,bottom:10,left:10}})},d=async(a,d,e={})=>{let{autoPrint:f=!1,isReceipt:g=!1}=e;try{(0,b.isIOS)()?await c(a,d,e):(await c(a,d,e),f&&setTimeout(()=>{window.print()},500))}catch(a){throw console.error("Error generating PDF:",a),a}};a.s(["generatePDF",0,d])},56686,a=>{"use strict";a.s(["directPrint",0,(a,b,c)=>{let d=window.open("","_blank");if(!d)return void window.print();let e=Array.from(document.styleSheets),f="";e.forEach(a=>{try{a.href?f+=`<link rel="stylesheet" href="${a.href}">`:a.cssRules&&(f+="<style>",Array.from(a.cssRules).forEach(a=>{f+=a.cssText}),f+="</style>")}catch(a){console.warn("Could not access stylesheet:",a)}});let g=c?`
    @page { 
      size: 80mm auto; 
      margin: 0; 
    }
    .thermal-receipt { 
      font-size: 14px !important; 
      font-weight: 800 !important;
      padding: 8px !important;
      page-break-after: avoid !important;
    }
    .thermal-receipt .font-extrabold { 
      font-weight: 900 !important; 
    }
    .thermal-receipt .font-bold { 
      font-weight: 800 !important; 
    }
  `:"";d.document.write(`
    <!DOCTYPE html>
    <html>
      <head>
        <title>${b||"Print"}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        ${f}
        <style>
          @media print {
            body { margin: 0; }
            .print\\:hidden { display: none !important; }
            ${g}
          }
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: ${c?"0":"20px"};
          }
        </style>
      </head>
      <body>
        ${a.outerHTML}
      </body>
    </html>
  `),d.document.close();let h=!1,i=()=>{if(!h){h=!0;try{d.closed||d.close()}catch(a){console.warn("Could not close print window:",a)}}};d.onload=()=>{d.focus(),d.print(),d.onafterprint=()=>{i()},d.onbeforeunload=()=>{h||setTimeout(i,100)},setTimeout(()=>{i()},1500)},d.onerror=()=>{console.warn("Print window failed to load"),i()}}])},766343,a=>{"use strict";var b=a.i(907997),c=a.i(800717);a.i(575465);var d=a.i(289246),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f="horizontal",g=["horizontal","vertical"],h=c.forwardRef((a,c)=>{var d;let{decorative:h,orientation:i=f,...j}=a,k=(d=i,g.includes(d))?i:f;return(0,b.jsx)(e.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});h.displayName="Separator";var i=a.i(139138);let j=c.forwardRef(({className:a,orientation:c="horizontal",decorative:d=!0,...e},f)=>(0,b.jsx)(h,{ref:f,decorative:d,orientation:c,className:(0,i.cn)("shrink-0 bg-border","horizontal"===c?"h-[1px] w-full":"h-full w-[1px]",a),...e}));j.displayName=h.displayName,a.s(["Separator",()=>j],766343)},80965,a=>{"use strict";function b(a){let b=["","thousand","million","billion","trillion","quadrillion"],c=["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],d=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],e=a=>{let b=a.toFixed(2).split("."),c=f(parseInt(b[0]));return b.length>1&&parseInt(b[1])>0?`${c} and ${b[1]}/100`:c},f=a=>{if(0===a)return"zero";if(a<0)return`negative ${f(Math.abs(a))}`;let c="",d=0;for(;a>0;)a%1e3!=0&&(c=`${g(a%1e3)} ${b[d]} ${c}`),a=Math.floor(a/1e3),d++;return c.trim()},g=a=>{if(0===a)return"";let b="";return a>=100&&(b=`${d[Math.floor(a/100)]} hundred `,0==(a%=100))?b.trim():(a<20?b+=d[a]:(b+=`${c[Math.floor(a/10)]}`,a%10>0&&(b+=`-${d[a%10]}`)),b.trim())};return e(a).trim().charAt(0).toUpperCase()+e(a).trim().slice(1)}a.s(["numberToWords",()=>b])},466453,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(12208),f=a.i(139138),g=a.i(771826),h=a.i(80965),i=a.i(778052),j=b([g,i]);[g,i]=j.then?(await j)():j,a.s(["default",0,({sale:a,currency:b,includePaymentInfo:c=!0})=>{let{settings:j,isLoading:k}=(0,g.useBusinessSettings)(),{payments:l}=(0,i.useInstallmentPayments)(a.id);if(k)return(0,d.jsx)("div",{className:"flex items-center justify-center p-12 bg-gray-50 rounded-lg",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 font-mono",children:"Preparing receipt..."})]})});let m=a.items.reduce((a,b)=>a+b.price*b.quantity,0),n=a.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+d},0),o=m-n,p=a.taxRate||0,q=p/100*o,r=o+q,s=(l||[]).reduce((a,b)=>a+(b.amount||0),0),t="Installment Sale"===a.paymentStatus||"Paid"===a.paymentStatus&&s>0?s:a.amountPaid||r,u="Installment Sale"===a.paymentStatus?Math.max(0,r-s):a.amountDue||0,v=j.paymentInfo?(0,g.parsePaymentInfo)(j.paymentInfo):[],w=c&&v.length>0&&v.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()),x=b||j.currency,y=new Date(a.date),z=new Date;return(0,d.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 sm:p-8 overflow-hidden",children:(0,d.jsxs)("div",{className:"relative bg-white shadow-2xl font-mono text-[11px] leading-tight text-black flex flex-col mx-auto",style:{width:"58mm",minHeight:"140mm",padding:"6mm 4mm",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",borderTop:"1px dashed #e5e7eb",borderBottom:"1px dashed #e5e7eb"},children:[(0,d.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 overflow-hidden flex",style:{opacity:.2},children:Array.from({length:20}).map((a,b)=>(0,d.jsx)("div",{className:"w-4 h-4 bg-gray-300 transform rotate-45 -translate-y-2 translate-x-1"},b))}),(0,d.jsxs)("div",{className:"flex flex-col items-center mb-4 text-center",children:[j.businessLogo&&(0,d.jsx)("div",{className:"mb-2 w-full flex justify-center",children:(0,d.jsx)("img",{src:j.businessLogo,alt:"Logo",className:"h-12 w-auto object-contain max-w-[40mm]"})}),(0,d.jsx)("div",{className:"text-[14px] font-black uppercase tracking-tight mb-0.5",children:j.businessName}),(0,d.jsx)("div",{className:"text-[9px] font-bold opacity-80",children:j.businessAddress}),(0,d.jsxs)("div",{className:"text-[9px] font-bold opacity-80",children:["TEL: ",j.businessPhone]}),j.businessEmail&&(0,d.jsx)("div",{className:"text-[9px] font-bold opacity-80 lowercase",children:j.businessEmail})]}),(0,d.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,d.jsxs)("div",{className:"text-center mb-3",children:[(0,d.jsx)("div",{className:"text-[12px] font-black underline mb-1",children:(()=>{switch(a.paymentStatus){case"Quote":return"QUOTATION";case"Paid":return"SALES RECEIPT";case"Installment Sale":return"INSTALLMENT SALE";default:return"INVOICE"}})()}),(0,d.jsxs)("div",{className:"flex justify-between text-[9px] font-bold",children:[(0,d.jsx)("span",{children:(()=>{switch(a.paymentStatus){case"Quote":return"Quote #:";case"Paid":return"Receipt #:";case"Installment Sale":return"Installment #:";default:return"Invoice #:"}})()}),(0,d.jsx)("span",{children:a.receiptNumber})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[9px]",children:[(0,d.jsx)("span",{children:"DATE:"}),(0,d.jsx)("span",{children:(0,e.format)(y,"dd/MM/yyyy")})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[9px]",children:[(0,d.jsx)("span",{children:"TIME:"}),(0,d.jsx)("span",{children:(0,e.format)(z,"HH:mm")})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[9px] font-black",children:[(0,d.jsx)("span",{children:"STATUS:"}),(0,d.jsx)("span",{children:a.paymentStatus.toUpperCase()})]})]}),a.customerName&&(0,d.jsxs)("div",{className:"mb-3 bg-gray-50 p-1.5 border border-gray-100 italic",children:[(0,d.jsx)("div",{className:"font-black text-[9px] not-italic uppercase mb-0.5",children:"Customer:"}),(0,d.jsx)("div",{className:"font-bold",children:a.customerName}),a.customerAddress&&(0,d.jsx)("div",{className:"text-[9px] opacity-70",children:a.customerAddress}),a.customerContact&&(0,d.jsx)("div",{className:"text-[9px] opacity-70",children:a.customerContact})]}),(0,d.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("div",{className:"flex justify-between font-black text-[9px] pb-1 border-b border-black mb-1.5 uppercase",children:[(0,d.jsx)("span",{className:"w-[60%]",children:"Description"}),(0,d.jsx)("span",{className:"w-[15%] text-right",children:"Qty"}),(0,d.jsx)("span",{className:"w-[25%] text-right",children:"Amt"})]}),a.items.map((a,b)=>{let c=a.quantity*a.price,e="amount"===a.discountType?a.discountAmount||0:c*(a.discountPercentage||0)/100;return(0,d.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,d.jsx)("div",{className:"font-bold text-[10px] break-words uppercase",children:a.description}),(0,d.jsxs)("div",{className:"flex justify-between text-[9px] items-center",children:[(0,d.jsx)("span",{className:"text-gray-600 font-bold truncate",children:(0,f.formatNumber)(a.price)}),(0,d.jsx)("div",{className:"flex-1 border-b border-dotted border-gray-300 mx-2"}),(0,d.jsxs)("span",{className:"font-bold",children:[(0,f.formatNumber)(a.quantity).padStart(2,"0"),"x ",(0,f.formatNumber)(c-e)]})]}),e>0&&(0,d.jsxs)("div",{className:"flex justify-between text-[8px] italic text-gray-500 font-bold",children:[(0,d.jsxs)("span",{children:["- DISCOUNT ","percentage"===a.discountType?`(${a.discountPercentage}%)`:""]}),(0,d.jsxs)("span",{children:["-",(0,f.formatNumber)(e)]})]})]},b)})]}),(0,d.jsx)("div",{className:"border-b border-black border-dashed w-full my-2"}),(0,d.jsxs)("div",{className:"mb-4 space-y-0.5",children:[(0,d.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,d.jsx)("span",{children:"SUBTOTAL:"}),(0,d.jsxs)("span",{children:[x," ",(0,f.formatNumber)(m)]})]}),n>0&&(0,d.jsxs)("div",{className:"flex justify-between font-bold italic opacity-70",children:[(0,d.jsx)("span",{children:"DISCOUNT:"}),(0,d.jsxs)("span",{children:["-",x," ",(0,f.formatNumber)(n)]})]}),p>0&&(0,d.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,d.jsxs)("span",{children:["TAX (",p,"%):"]}),(0,d.jsxs)("span",{children:[x," ",(0,f.formatNumber)(q)]})]}),(0,d.jsxs)("div",{className:"flex justify-between font-black text-[13px] border-t border-black pt-1.5 mt-1",children:[(0,d.jsx)("span",{children:"TOTAL:"}),(0,d.jsxs)("span",{children:[x," ",(0,f.formatNumber)(r)]})]}),"Installment Sale"===a.paymentStatus&&(0,d.jsxs)("div",{className:"mt-2 pt-1 border-t border-gray-200 border-dotted",children:[(0,d.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,d.jsx)("span",{children:"PAID:"}),(0,d.jsxs)("span",{children:[x," ",(0,f.formatNumber)(t)]})]}),(0,d.jsxs)("div",{className:"flex justify-between font-black text-red-600",children:[(0,d.jsx)("span",{children:"DUE:"}),(0,d.jsxs)("span",{children:[x," ",(0,f.formatNumber)(u)]})]})]})]}),(0,d.jsxs)("div",{className:"mb-4 text-[9px] italic opacity-80 border-t border-b border-gray-100 py-1",children:[(0,d.jsx)("span",{className:"font-black not-italic uppercase",children:"Words:"})," ",x," ",(0,h.numberToWords)(r)," only."]}),w&&(0,d.jsxs)("div",{className:"mb-4 text-[9px]",children:[(0,d.jsx)("div",{className:"font-black underline mb-1 uppercase",children:"Payment Channels:"}),v.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()).map((a,b)=>(0,d.jsxs)("div",{className:"mb-1 last:mb-0 font-bold",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("span",{className:"uppercase",children:[a.method,":"]}),(0,d.jsx)("span",{children:a.accountNumber})]}),(0,d.jsx)("div",{className:"text-[8px] opacity-70 italic text-right",children:a.accountName})]},b))]}),a.notes&&(0,d.jsxs)("div",{className:"mb-4 text-[9px] border border-gray-100 p-1 bg-gray-50",children:[(0,d.jsx)("div",{className:"font-black uppercase mb-0.5",children:"Notes:"}),(0,d.jsx)("div",{className:"font-bold opacity-70 whitespace-pre-wrap italic",children:a.notes})]}),(0,d.jsx)("div",{className:"mt-auto pt-6 flex flex-col items-center",children:j.signature?(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("img",{src:j.signature,alt:"Signature",className:"h-10 w-auto object-contain mb-1 mix-blend-multiply opacity-90"}),(0,d.jsx)("div",{className:"w-[80%] border-t border-black border-dashed"}),(0,d.jsx)("div",{className:"text-[8px] font-black uppercase mt-1",children:"Authorized Signature"})]}):(0,d.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-[80%] border-t border-black border-dashed pt-1"}),(0,d.jsx)("div",{className:"text-[8px] font-black uppercase mt-1",children:"Authorized Signature"})]})}),(0,d.jsxs)("div",{className:"text-center mt-6",children:[(0,d.jsx)("div",{className:"text-[10px] font-black mb-1 italic",children:"THANK YOU!"}),(0,d.jsxs)("div",{className:"text-[8px] font-bold opacity-60",children:["GONZA SYSTEMS SUPPORT",(0,d.jsx)("br",{}),"PRINTED AT ",(0,e.format)(new Date,"HH:mm dd/MM/yy")]})]}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-1 overflow-hidden flex",style:{opacity:.2},children:Array.from({length:20}).map((a,b)=>(0,d.jsx)("div",{className:"w-4 h-4 bg-gray-300 transform rotate-45 translate-y-2 translate-x-1"},b))})]})})}]),c()}catch(a){c(a)}},!1),455156,a=>{"use strict";var b=a.i(825852);async function c(){for(let a of["http://localhost:5000","http://127.0.0.1:5000"])try{if((await fetch(`${a}/printers`,{signal:AbortSignal.timeout(2e3),mode:"cors"})).ok)return!0}catch(a){}return!1}async function d(c,d){if("web"===b.Capacitor.getPlatform()){try{let a=c instanceof Uint8Array,b=d;if(!b)try{b=JSON.parse(localStorage.getItem("business-settings")||"{}").defaultPrinterName}catch(a){}b||(b="Receipt Printer");let e={PrinterName:b,Content:a?String.fromCharCode(...c):c};if((await fetch("http://localhost:5000/print/receipt",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)})).ok)return{success:!0,message:"Print command sent to bridge."}}catch(a){console.warn("Printer Bridge not available, falling back to Web Serial",a)}if("string"!=typeof c)return{success:!1,message:"Printer Bridge required for binary ESC/POS printing."};{let{printWeb:b}=await a.A(19980);return await b(c)}}{let{printBluetooth:b}=await a.A(383098),d="string"==typeof c?c:new TextDecoder().decode(c);return await b(d)}}a.s(["checkBridgeStatus",()=>c,"print",()=>d])},227319,(a,b,c)=>{b.exports=new class{grayscale(a){for(let b=0;b<a.data.length;b+=4){let c=.299*a.data[b]+.587*a.data[b+1]+.114*a.data[b+2];a.data.fill(c,b,b+3)}return a}threshold(a,b){for(let c=0;c<a.data.length;c+=4){let d=.299*a.data[c]+.587*a.data[c+1]+.114*a.data[c+2]<b?0:255;a.data.fill(d,c,c+3)}return a}bayer(a,b){let c=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let d=0;d<a.data.length;d+=4){let e=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2],f=d/4%a.width,g=Math.floor(d/4/a.width),h=Math.floor((e+c[f%4][g%4])/2)<b?0:255;a.data.fill(h,d,d+3)}return a}floydsteinberg(a){let b=a.width,c=new Uint8ClampedArray(a.width*a.height);for(let b=0,d=0;d<a.data.length;b++,d+=4)c[b]=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2];for(let d=0,e=0;e<a.data.length;d++,e+=4){let f=c[d]<129?0:255,g=Math.floor((c[d]-f)/16);a.data.fill(f,e,e+3),c[d+1]+=7*g,c[d+b-1]+=3*g,c[d+b]+=5*g,c[d+b+1]+=+g}return a}atkinson(a){let b=a.width,c=new Uint8ClampedArray(a.width*a.height);for(let b=0,d=0;d<a.data.length;b++,d+=4)c[b]=.299*a.data[d]+.587*a.data[d+1]+.114*a.data[d+2];for(let d=0,e=0;e<a.data.length;d++,e+=4){let f=c[d]<129?0:255,g=Math.floor((c[d]-f)/8);a.data.fill(f,e,e+3),c[d+1]+=g,c[d+2]+=g,c[d+b-1]+=g,c[d+b]+=g,c[d+b+1]+=g,c[d+2*b]+=g}return a}}},929936,(a,b,c)=>{b.exports=new class{flatten(a,b){for(let c=0;c<a.data.length;c+=4){let d=a.data[c+3],e=255-d;a.data[c]=(d*a.data[c]+e*b[0])/255,a.data[c+1]=(d*a.data[c+1]+e*b[1])/255,a.data[c+2]=(d*a.data[c+2]+e*b[2])/255,a.data[c+3]=255}return a}}},821207,(a,b,c)=>{let d=new WeakMap,e=new WeakMap;class f{constructor(a,b,...c){if(arguments.length<2)throw TypeError(`Failed to construct 'ImageData': 2 arguments required, but only ${arguments.length} present.`);if("object"==typeof a){if(!(a instanceof Uint8ClampedArray))throw TypeError("Failed to construct 'ImageData': parameter 1 is not of type 'Uint8ClampedArray'.");if("number"!=typeof b||0===b)throw Error("Failed to construct 'ImageData': The source width is zero or not a number.");if(4*(b>>>=0)>a.length)throw Error("Failed to construct 'ImageData': The requested image size exceeds the supported range.");if(a.length%4!=0)throw Error("Failed to construct 'ImageData': The input data length is not a multiple of 4.");if(a.length%(4*b)!=0)throw Error("Failed to construct 'ImageData': The input data length is not a multiple of (4 * width).");if(void 0!==c[0]){if("number"!=typeof c[0]||0===c[0])throw Error("Failed to construct 'ImageData': The source height is zero or not a number.");if(c[0]=c[0]>>>0,a.length%(4*b*c[0])!=0)throw Error("Failed to construct 'ImageData': The input data length is not equal to (4 * width * height).")}d.set(this,b),e.set(this,void 0!==c[0]?c[0]:a.byteLength/b/4),Object.defineProperty(this,"data",{configurable:!0,enumerable:!0,value:a,writable:!1})}else{if("number"!=typeof a||0===a)throw Error("Failed to construct 'ImageData': The source width is zero or not a number.");if(a>>>=0,"number"!=typeof b||0===b)throw Error("Failed to construct 'ImageData': The source height is zero or not a number.");if(a*(b>>>=0)>=0x40000000)throw Error("Failed to construct 'ImageData': The requested image size exceeds the supported range.");d.set(this,a),e.set(this,b),Object.defineProperty(this,"data",{configurable:!0,enumerable:!0,value:new Uint8ClampedArray(a*b*4),writable:!1})}}}Object.defineProperty(f.prototype,"width",{enumerable:!0,configurable:!0,get(){return d.get(this)}}),Object.defineProperty(f.prototype,"height",{enumerable:!0,configurable:!0,get(){return e.get(this)}}),b.exports=f},79241,(a,b,c)=>{"use strict";let d=a.r(821207);function e(a,b){let c=0;for(let d=0;d<b.height;d++)for(let e=0;e<b.width;e++){let f=Math.floor(e*a.width/b.width),g=(Math.floor(d*a.height/b.height)*a.width+f)*4;b.data[c++]=a.data[g++],b.data[c++]=a.data[g++],b.data[c++]=a.data[g++],b.data[c++]=a.data[g++]}}function f(a,b){function c(a,b,c,d,e){return Math.round((a-b)*e+(c-a)*d)}function d(b,d,e,f,g){let h=a.data[(e*a.width+f)*4+b];if(f===g)return h;let i=a.data[(e*a.width+g)*4+b];return c(d,f,g,h,i)}function e(a,b,e,f,g,h,i){let j=d(a,b,h,e,f);if(h===i)return j;let k=d(a,b,i,e,f);return c(g,h,i,j,k)}let f=0;for(let c=0;c<b.height;c++)for(let d=0;d<b.width;d++){let g=d*a.width/b.width,h=c*a.height/b.height,i=Math.floor(g),j=Math.floor(h),k=Math.min(Math.ceil(g),a.width-1),l=Math.min(Math.ceil(h),a.height-1);b.data[f++]=e(0,g,i,k,h,j,l),b.data[f++]=e(1,g,i,k,h,j,l),b.data[f++]=e(2,g,i,k,h,j,l),b.data[f++]=e(3,g,i,k,h,j,l)}}b.exports=function(a,b,c,g){let h;switch(g=g||"bilinear-interpolation"){case"nearest-neighbor":h=e;break;case"bilinear-interpolation":case"biliniear-interpolation":h=f;break;default:throw Error(`Unknown algorithm: ${g}`)}let i=new d(b,c);return h(a,i),i}},881776,a=>{"use strict";var b=a.i(227319),c=a.i(929936);let d={ascii:{name:"ASCII",languages:["en"],value:Array(256).fill(1,0,128).map((a,b)=>b)},cp437:{name:"USA, Standard Europe",languages:["en"],extends:"ascii",value:[[,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788],[9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660],,,,,,[,,,,,,,,,,,,,,,8962],[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197],[201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402],[225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],[9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488],[9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575],[9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]]},cp720:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[65533,65533,,,65533,,65533,,,,,,,65533,65533,65533],[65533,1617,1618,,164,1600,,,1569,1570,1571,1572,,1573,1574,1575],[1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,,,],,,,[1590,1591,1592,1593,1594,1601,,1602,1603,1604,1605,1606,1607,1608,1609,1610],[,1611,1612,1613,1614,1615,1616,,,,,,,,,,]]},cp737:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928],[929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952],[953,954,955,956,957,958,959,960,961,963,962,964,965,966,967,968],,,,[969,940,941,942,970,943,972,973,971,974,902,904,905,906,908,910],[911,,,,938,939,,,,,,,,,,,]]},cp771:{name:"Lithuanian KBL",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,,,[,,,,,,,,,,,,260,261,268,269],,[280,281,278,279,302,303,352,353,370,371,362,363,381,382,,,]]},cp772:{name:"Lithuanian LST 1284",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],,[,,8805,8804,8222,8220,247,8776,,,,,8319,178,,,]]},cp774:{name:"Lithuanian LST 1283",languages:["lt"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[,946,,,,,,,,,,,,,,8898],[,,,,8222,8220,,,,,729,,,,,,]]},cp775:{name:"Baltic Rim",languages:["et","lt"],extends:"cp437",value:[,,,,,,,,[262,,,257,,291,,263,322,275,342,343,299,377,,,],[,,,333,,290,162,346,347,,,248,,216,215,164],[256,298,,379,380,378,8221,166,169,174,,,,321,,,],[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[211,,332,323,245,213,,324,310,311,315,316,326,274,325,8217],[173,,8220,190,182,167,,8222,,,,185,179,,,,]]},cp850:{name:"Multilingual",languages:["en"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,215,,],[,,,,,,,,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[240,208,202,203,200,305,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,254,222,218,219,217,253,221,175,180],[173,,8215,190,182,167,,184,,168,,185,179,,,,]]},cp851:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[,,,,,,902,,,,,,,904,,905],[906,65533,908,,,910,,,911,,,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,180],[173,,965,966,967,167,968,184,,168,969,971,944,974,,,]]},cp852:{name:"Latin 2",languages:["hu","pl","cz"],extends:"cp850",value:[,,,,,,,,[,,,,,367,263,,322,,336,337,,377,,262],[,313,314,,,317,318,346,347,,,356,357,321,,269],[,,,,260,261,381,382,280,281,,378,268,351,,,],[,,,,,,,282,350,,,,,379,380,,],[,,,,,,258,259,,,,,,,,,],[273,272,270,,271,327,,,283,,,,,354,366,,],[,,,323,324,328,352,353,340,,341,368,,,355,,],[,733,731,711,728,,,,,,729,369,344,345,,,]]},cp853:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,265,,,,,,,,,264],[,267,266,,,,,,304,,,285,,284,215,309],[,,,,,,286,287,292,293,65533,,308,351,,,],[,,,,,193,194,192,350,,,,,379,380,,],[,,,,,,348,349,,,,,,,,164],[65533,65533,202,203,200,305,205,206,207,,,,,65533,204,,],[211,,212,210,288,289,,294,295,218,219,217,364,365,65533,180],[173,65533,8467,329,728,167,,184,,168,729,65533,179,,,,]]},cp855:{name:"Cyrillic",languages:["bg"],extends:"cp437",value:[,,,,,,,,[1106,1026,1107,1027,1105,1025,1108,1028,1109,1029,1110,1030,1111,1031,1112,1032],[1113,1033,1114,1034,1115,1035,1116,1036,1118,1038,1119,1039,1102,1070,1098,1066],[1072,1040,1073,1041,1094,1062,1076,1044,1077,1045,1092,1060,1075,1043,,,],[,,,,,1093,1061,1080,1048,,,,,1081,1049,,],[,,,,,,1082,1050,,,,,,,,164],[1083,1051,1084,1052,1085,1053,1086,1054,1087,,,,,1055,1103,,],[1071,1088,1056,1089,1057,1090,1058,1091,1059,1078,1046,1074,1042,1100,1068,8470],[173,1099,1067,1079,1047,1096,1064,1101,1069,1097,1065,1095,1063,167,,,]]},cp857:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,248,,216,350,351],[,,,,,,286,287,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[186,170,202,203,200,8364,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,65533,215,218,219,217,236,255,175,180],[173,,65533,190,182,167,,184,,168,,185,179,,,,]]},cp858:{name:"Euro",languages:["en"],extends:"cp850",value:[,,,,,,,,,,,,,[,,,,,8364,,,,,,,,,,,],,,]},cp860:{name:"Portuguese",languages:["pt"],extends:"cp437",value:[,,,,,,,,[,,,,227,,193,,,202,,205,212,,195,194],[,192,200,,245,,218,,204,213,,,,217,,211],[,,,,,,,,,210,,,,,,,],,,,,,]},cp861:{name:"Icelandic",languages:["is"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,208,240,222,,,],[,,,,,254,,221,253,,,248,,216,,,],[,,,,193,205,211,218,,,,,,,,,],,,,,,]},cp862:{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},cp863:{name:"Canadian French",languages:["fr"],extends:"cp437",value:[,,,,,,,,[,,,,194,,182,,,,,,,8215,192,167],[,200,202,,203,207,,,164,212,,,,217,219,,],[166,180,,,168,184,179,175,206,,,,,190,,,],,,,,,]},cp864:{name:"Arabic",languages:["ar"],extends:"cp437",offset:128,value:[176,183,8729,8730,9618,9472,9474,9532,9508,9516,9500,9524,9488,9484,9492,9496,946,8734,966,177,189,188,8776,171,187,65271,65272,65533,65533,65275,65276,65533,160,173,65154,163,164,65156,65533,65533,65166,65167,65173,65177,1548,65181,65185,65189,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65233,1563,65201,65205,65209,1567,162,65152,65153,65155,65157,65226,65163,65165,65169,65171,65175,65179,65183,65187,65191,65193,65195,65197,65199,65203,65207,65211,65215,65217,65221,65227,65231,166,172,247,215,65225,1600,65235,65239,65243,65247,65251,65255,65259,65261,65263,65267,65213,65228,65230,65229,65249,65149,1617,65253,65257,65260,65264,65266,65232,65237,65269,65270,65245,65241,65265,9632,65533]},cp865:{name:"Nordic",languages:["sv","dk"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,,,],[,,,,,,,,,,,,,,,164],,,,,,]},cp866:{name:"Cyrillic 2",languages:["ru"],extends:"cp437",value:[,,,,,,,,[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[1025,1105,1028,1108,1031,1111,1038,1118,,,,,8470,164,,,]]},cp869:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,902,65533,183,172,166,8216,8217,904,8213,905],[906,938,908,65533,65533,910,939,169,911,178,179,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,900],[173,,965,966,967,167,968,901,,168,969,971,944,974,,,]]},cp874:{name:"Thai",languages:["th"],extends:"ascii",offset:128,value:[8364,65533,65533,65533,65533,8230,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,8216,8217,8220,8221,8226,8211,8212,65533,65533,65533,65533,65533,65533,65533,65533,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,65533,65533,65533,65533,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,65533,65533,65533,65533]},cp1001:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[1569,1570,1571,1572,1573,65163,1575,1576,65169,1577,1578,65175,1579,65179,1583,1584],[1585,1586,1587,65203,65204,1588,65207,65208,1589,65211,65212,1590,65215,65216,1591,1592],[1593,65227,1594,65231,1601,65235,1602,65239,1603,1705,1604,65271,65273,65275,9496,1605],[65251,1606,65255,1607,65259,1608,1609,1657,65267,9474,1548,1563,1567,65154,65156,65162],[,1580,65183,1581,65187,1582,65191,65226,65228,65230,65231,65272,65274,65276,65259,65260],[1632,65264,9472,65533,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65533,65533],[65533,65533,65275,65533,65533,65533,65533,9524,,,,,,,,,],,]},cp1098:{name:"Farsi",languages:["fa"],extends:"cp437",value:[,,[,,,,,65533,,,,,65533,,,,,,],,,,,,[65533,65533,1548,1563,1567,1611,1570,65154,63738,1575,65166,63739,1569,1571,65156,63737],[1572,65163,1576,65169,64342,64344,1578,65175,1579,65179,1580,65183,64378,64380,215,1581],[65187,1582,65191,1583,1584,1585,1586,64394,1587,65203,1588,65207,1589,65211,,,],[,,,,,1590,65215,65217,65219,,,,,164,65221,,],[,,,,,,65223,1593,,,,,,,,65533],[65226,65227,65228,1594,65230,65231,65232,1601,65235,,,,,1602,65239,,],[64398,65243,64402,64404,1604,65247,1605,65251,1606,65255,1608,1607,65259,65260,64420,64508],[173,64509,64510,1600,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,,,]]},cp1125:{name:"Ukrainian",languages:["uk"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,1168,1169,1028,1108,1030,1110,1031,1111,247,177,,,,,]]},cp3001:{name:"Estonian 1 or 1116",languages:["et"],extends:"cp850",value:[,,,,,,,,,,,,,[353,352,,,,,,,,,,,,,,,],[,,,,,,,382,381,,,,,,,,],,]},cp3002:{name:"Estonian 2",languages:["et"],extends:"iso8859-1",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[32,,,,,,,,,,,,,,,8254],,,[352,,,,,,,,,,,,,,381,,],,[353,,,,,,,,,,,,,,382,,]]},cp3011:{name:"Latvian 1",languages:["lv"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,,,,325,353,,,]]},cp3012:{name:"Latvian 2 (modified 866)",languages:["lv"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,332,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,333,,,325,353,,,]]},cp3021:{name:"Bulgarian (MIK)",languages:["bg"],extends:"cp866",value:[,,,,,,,,,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[,,,,,,9571,9553,,,,,,,,9488],[9617,9618,9619,9474,9508,8470,167,9559,9565,,,,,,,,],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3041:{name:"Maltese ISO 646",languages:["mt"],extends:"ascii",value:[,,,,,[,,,,,,,,,,,289,380,295,,,],[267,,,,,,,,,,,,,,,,],[,,,,,,,,,,,288,379,294,266,,],,,,,,,,,]},cp3840:{name:"Russian (modified 866)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3841:{name:"Ghost",languages:["ru"],extends:"cp437",offset:128,value:[1171,1241,1105,1110,1111,1112,1181,1257,1118,1199,1277,1224,1209,1207,1108,163,1170,1240,1025,1030,1031,1032,1180,1256,1038,1198,1276,1223,1208,1206,1028,1066,32,33,34,35,164,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,8709]},cp3843:{name:"Polish (Mazovia)",languages:["pl"],extends:"cp437",value:[,,,,,,,,[,,,,,,261,,,,,,,263,,260],[280,281,322,,,262,,,346,,,,321,,347,,],[377,379,,211,324,323,378,380,,,,,,,,,],,,,,,]},cp3844:{name:"Czech (Kamenick)",languages:["cz"],extends:"cp437",value:[,,,,,,,,[268,,,271,,270,356,269,283,282,313,205,318,314,,193],[,382,381,,,211,367,218,253,,,352,317,221,344,357],[,,,,328,327,366,212,353,345,341,340,,167,,,],,,,,,]},cp3845:{name:"Hungarian (CWI-2)",languages:["hu"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,205,,193],[,,,337,,211,369,218,368,,,,,,,,],[,,,,,,,336,,,,,,,,,],,,,,,]},cp3846:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,,,,350,351],[,,,,,,286,287,,,,,,,,,],,,,,,]},cp3847:{name:"Brazil ABNT",languages:["pt"],extends:"iso8859-1",value:[,,,,,,,,,,,,,[,,,,,,,65533,,,,,,,,,],,[,,,,,,,65533,,,,,,,,,]]},cp3848:{name:"Brazil ABICOMP",languages:["pt"],extends:"ascii",value:[,,,,,,,,,,[160,192,193,194,195,196,199,200,201,202,203,204,205,206,205,209],[210,211,212,213,214,198,217,218,219,220,376,168,163,166,167,176],[161,224,225,226,227,228,231,232,233,234,235,236,237,238,239,241],[242,243,244,245,246,230,249,250,251,252,255,223,170,186,191,177],,,]},"iso8859-1":{name:"Latin 1",languages:["en"],extends:"ascii",offset:128,value:[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},"iso8859-2":{name:"Latin 2",languages:["hu","pl","cz"],extends:"iso8859-1",value:[,,,,,,,,,,[,260,728,321,,317,346,,,352,350,356,377,,381,379],[,261,731,322,,318,347,711,,353,351,357,378,733,382,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},"iso8859-7":{name:"Greek",languages:["el"],extends:"iso8859-1",value:[,,,,,,,,,,[,8216,8217,,8364,8367,,,,,890,,,,,8213],[,,,,900,901,902,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,,]]},"iso8859-15":{name:"Latin 9",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,,,[,,,,8364,,352,,353,,,,,,,,],[,,,,381,,,,382,,,,338,339,376,,],,,,,]},windows1250:{name:"Latin 2",languages:["hu","pl","cz"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,,,346,356,,377],[,,,,,,,,65533,,,,347,357,,378],[,711,728,321,,260,,,,,350,,,,,379],[,,731,322,,,,,,261,351,,317,733,318,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},windows1251:{name:"Cyrillic",languages:["ru"],extends:"windows1252",value:[,,,,,,,,[1026,1027,,1107,,,,,8364,,1033,,1034,1036,1035,1039],[1106,,,,,,,,65533,,1113,,1114,1116,1115,1119],[,1038,1118,1032,,1168,,,1025,,1028,,,,,1031],[,,1030,1110,1169,,,,1105,8470,1108,,1112,1029,1109,1111],[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103]]},windows1252:{name:"Latin",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,[8364,65533,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,65533,381,65533],[65533,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,65533,382,376],,,,,,,]},windows1253:{name:"Greek",languages:["el"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,65533,,65533,,65533,,65533,,],[,,,,,,,,65533,,65533,,65533,,65533,65533],[,901,902,,,,,,,,65533,,,,,8213],[,,,,900,,,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},windows1254:{name:"Turkish",languages:["tr"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,,,,,65533,,],[,,,,,,,,,,,,,,65533,,],,,,[286,,,,,,,,,,,,,304,350,,],,[287,,,,,,,,,,,,,305,351,,]]},windows1255:{name:"Hebrew",languages:["he"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,65533,,65533,,],[,,,,,,,,,,65533,,65533,,65533,65533],[,,,,8362,,,,,,215,,,,,,],[,,,,,,,,,,247,,,,,,],[1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,65533,1467,1468,1469,1470,1471],[1472,1473,1474,1475,1520,1521,1522,1523,1524,65533,65533,65533,65533,65533,65533,65533],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,65533,65533,8206,8207,65533]]},windows1256:{name:"Arabic",languages:["ar"],extends:"windows1252",value:[,,,,,,,,[,1662,,,,,,,,,1657,,,1670,1688,1672],[1711,,,,,,,,1705,,1681,,,8204,8205,1722],[,1548,,,,,,,,,1726,,,,,,],[,,,,,,,,,,1563,,,,,1567],[1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583],[1584,1585,1586,1587,1588,1589,1590,,1591,1592,1593,1594,1600,1601,1602,1603],[,1604,,1605,1606,1607,1608,,,,,,1609,1610,,,],[1611,1612,1613,1614,,1615,1616,,1617,,1618,,,8206,8207,1746]]},windows1257:{name:"Baltic Rim",languages:["et","lt"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,65533,,65533,168,711,184],[,,,,,,,,65533,,65533,,65533,175,731,65533],[,65533,,,,65533,,,216,,342,,,,,198],[,,,,,,,,248,,343,,,,,230],[260,302,256,262,,,280,274,268,,377,278,290,310,298,315],[352,323,325,,332,,,,370,321,346,362,,379,381,,],[261,303,257,263,,,281,275,269,,378,279,291,311,299,316],[353,324,326,,333,,,,371,322,347,363,,380,382,729]]},windows1258:{name:"Vietnamese",languages:["vi"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,,,65533,,],[,,,,,,,,,,65533,,,,65533,,],,,[,,,258,,,,,,,,,768,,,,],[272,,777,,,416,,,,,,,,431,771,,],[,,,259,,,,,,,,,769,,,,],[273,,803,,,417,,,,,,,,432,8363,,]]},rk1048:{name:"Kazakh",languages:["kk"],extends:"windows1251",value:[,,,,,,,,[,,,,,,,,,,,,,1178,1210,,],[,,,,,,,,,,,,,1179,1211,,],[,1200,1201,1240,,1256,,,,,1170,,,,,1198],[,,,,1257,,,,,,1171,,1241,1186,1187,1199],,,,,]},thai11:{name:"Thai (Charcter Code 11)",languages:["th"],extends:"thai13",value:[,,,,,,,,,[,,,,,,,,,9484,9488,9492,9496,9474,9500,9508],,,,[,,,,,,,,,,,9472,9524,9516,9532,,],,[,,,,,,,,,,,3658,3650,3651,3652,65533]]},thai13:{name:"Thai (Charcter Code 13)",languages:["th"],extends:"cp874",value:[,,,,,,,,[65533,,,,,65533,,,,,,,,,,,],[,65533,65533,65533,65533,65533,65533,65533,,,,,,,,,],,,,[,,,,,,,,,,,3619,,,3648,,],,[,,,,,,,,,,,,8592,8593,8594,8595]]},thai14:{name:"Thai (Charcter Code 14)",languages:["th"],extends:"cp874",value:[,,,,,,,,[9484,9488,9492,9496,9474,9472,9500,9508,9524,9516,9532,9608,,,,,],[3619,3634,65533,3632,65533,65533,65533,65533,,,,,,,,3648],,,,,,[,,,,,,,,,,3675,65533,,,,3652]]},thai16:{name:"Thai (Charcter Code 16)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3650,3651,,,,,,,,,,,,,,,],,,,,,,]},thai18:{name:"Thai (Charcter Code 18)",languages:["th"],extends:"thai14",value:[,,,,,,,,[,,,,,,,,,,,,8592,8593,8594,8595],,,,,,[,,,,,,,,,,,,,,3652,,],[,,,,,,,,,,,,,,,65533]]},thai42:{name:"Thai (Charcter Code 42)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3587,3589,3619,3634,3652,,],[,,,3588,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601],[3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617],[3618,3619,3620,3621,3623,3624,3625,3626,3627,3628,3629,3630,3632,3622,3634,3635],[3648,3649,3650,3651,3652,3654,3631,3640,3641,3636,3637,3638,3639,3658,3661,3655],[3656,3657,3658,3659,3660,65533,65533,65533,65533,65533,65533,3632,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,,,,,160]]},tcvn3:{name:"Vietnamese (VSCII3 / TCVN3)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,,,,,,,,259,226,234,244,417,432,273,,],[,,,,,224,7843,227,225,7841,,7857,7859,7861,7855,,],[,,,,,,7863,7847,7849,7851,7845,7853,232,,7867,7869],[233,7865,7873,7875,7877,7871,7879,236,7881,,,,297,237,7883,242],[,7887,245,243,7885,7891,7893,7895,7889,7897,7901,7903,7905,7899,7907,249],[,7911,361,250,7909,7915,7917,7919,7913,7921,7923,7927,7929,253,7925,,]]},tcvn3capitals:{name:"Vietnamese (VSCII3 / TCVN3 Capitals)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,258,194,,,,,208,,,202,212,416,431,,,],[,,,,,192,7842,195,193,7840,,7856,7858,7860,7854,,],[,,,,,,7862,7846,7848,7850,7844,7852,200,,7866,7868],[201,7864,7872,7874,7876,7870,7878,204,7880,,,,296,205,7882,210],[,7886,213,211,7884,7890,7892,7894,7888,7896,7900,7902,7904,7898,7906,217],[,7910,360,218,7908,7914,7916,7918,7912,7920,7922,7926,7928,221,7924,,]]},viscii:{name:"Vietnamese (VISCII)",languages:["vi"],extends:"ascii",value:[[,,7858,,,7860,7850,,,,,,,,,,],[,,,,7926,,,,,7928,,,,,7924,,],,,,,,,[7840,7854,7856,7862,7844,7846,7848,7852,7868,7864,7870,7872,7874,7876,7878,7888],[7890,7892,7894,7896,7906,7898,7900,7902,7882,7886,7884,7880,7910,360,7908,7922],[213,7855,7857,7863,7845,7847,7849,7853,7869,7865,7871,7873,7875,7877,7879,7889],[7891,7893,7895,7904,416,7897,7901,7903,7883,7920,7912,7914,7916,417,7899,431],[192,193,194,195,7842,258,7859,7861,200,201,202,7866,204,205,296,7923],[272,7913,210,211,212,7841,7927,7915,7917,217,218,7929,7925,221,7905,432],[224,225,226,227,7843,259,7919,7851,232,233,234,7867,236,237,297,7881],[273,7921,242,243,244,245,7887,7885,7909,249,250,361,7911,253,7907,7918]]},khmer:{name:"Khmer",languages:["km"],extends:"ascii",value:[,,,,,,,,[6016,6017,6016,6019,6020,6021,6022,6023,6024,6025,6026,6027,6028,6029,6030,6031],[6032,6033,6032,6035,6036,6037,6038,6039,6040,6041,6042,6043,6044,6045,6046,6047],[6048,6049,6048,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063],[6064,6065,6064,6067,6068,6069,6070,6071,6072,6073,6074,6075,6076,6077,6078,6079],[6080,6081,6080,6083,6084,6085,6086,6087,6088,6089,6090,6091,6092,6093,6094,6095],[6096,6097,6096,6099,6100,6101,6102,6103,6104,6105,6106,6107,6108,6109,,,],[6112,6113,6112,6115,6116,6117,6118,6119,6120,6121,,,,,,,],[6128,6129,6128,6131,6132,6133,6134,,,,,,,,,,]]},latvian:{name:"Latvian (based on cp3012)",languages:["lv"],extends:"cp3012",value:[,,,,,,,,,,,,,[,,,,298,299,,,,,,,,,,,],,,]},"epson/katakana":{name:"Katakana",languages:["ja"],extends:"cp437",offset:128,value:[9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391,65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407,65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423,65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439,9552,9566,9578,9569,9698,9699,9701,9700,9824,9829,9830,9827,9679,9675,9585,9586,9587,20870,24180,26376,26085,26178,20998,31186,12306,24066,21306,30010,26449,20154,9618,160]},"epson/iso8859-2":{name:"Latin 2 modified with box drawing characters",languages:["hu","pl","cz"],extends:"iso8859-2",value:[,,,,,,,,[9617,9618,9619,9474,9508,9496,9484,9608,169,9571,9553,9559,9565,162,165,9488],[9492,9524,9516,9500,9472,9532,9604,9600,9562,9556,9577,9574,9568,9552,9580,174],,,,,,,]},"star/standard":{name:"Standard",languages:["en"],extends:"cp437",offset:128,value:[160,129904,129910,129905,129911,129906,129912,129907,129913,129908,129914,129909,9500,129915,129916,129918,129919,129917,9624,9623,9622,9629,9585,9586,9701,9700,9484,9524,9516,9508,9830,9587,196,214,220,223,167,170,186,65533,162,189,65533,65533,165,188,256,235,233,232,275,234,239,237,236,299,238,246,243,242,333,244,252,250,249,363,251,231,191,65533,65533,274,8580,161,197,248,216,228,225,224,257,226,176,8451,8457,937,181,931,963,65533,65533,967,8734,177,247,960,9612,9604,9600,9616,9532,9496,9492,9488,9608,9618,9162,8592,8593,8594,8595,9581,9161,129923,65533,9601,9613,65533,129928,9626,9630,9698,9699,129840,9208,9584,9583,9582]},"star/katakana":{name:"Katakana",languages:["ja"],extends:"star/standard",value:[,,,,,,,,,,[32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391],[65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407],[65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423],[65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439],,,]},"star/cp874":{name:"Thai",languages:["th"],extends:"cp874",value:[,,,,,,,,,[,,,,,9474,9472,9532,9484,9488,9492,9496,9500,9516,9508,9524],,,,[,,,,,,,,,,,3657,3658,3659,3660,,],,[,,,,,,,,,,,,162,172,166,,]]},"star/cp928":{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,,,[160,8216,8217,163,65533,65533,166,167,168,169,65533,171,172,173,65533,8213],[176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},"bixolon/cp866":{name:"Cyrillic 2 (modified with euro sign)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,,,9093,1055,8801,9824,8364,,,,,,,,]]},"bixolon/hebrew":{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,,,[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],[64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79],[80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,123,124,125,126,,]]},"xprinter/hebrew":{name:"Hebrew (based on CP862 minus CP437)",languages:["he"],extends:"ascii",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},"pos8360/hebrew":{name:"Hebrew (based on cp862 with repeated characters)",languages:["he"],extends:"cp862",value:[,,,,,,,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,]]}},e={cp2001:"cp771",cp1119:"cp772",cp1118:"cp774",cp1162:"cp874",iso88591:"iso8859-1",iso88592:"iso8859-2",iso88597:"iso8859-7",iso885915:"iso8859-15",shiftjis:"epson/katakana",katakana:"epson/katakana",cp928:"star/cp928"},f={en:"The quick brown fox jumps over the lazy dog.",jp:"   ",pt:"O prximo vo  noite sobre o Atlntico, pe freqentemente o nico mdico.",fr:"Les nafs githales htifs pondant  Nol o il gle sont srs d'tre dus en voyant leurs drles d'ufs abms.",sv:"Flygande bckasiner ska strax hwila p mjuka tuvor.",dk:"Quizdeltagerne spiste jordbr med flde",el:"   ",tr:"Pijamal hasta, yaz ofre abucak gvendi.",ru:"         ",hu:"rvztr tkrfrgp",pl:"Pchn w t d jea lub om skrzy fig",cz:"Mohu jst sklo, neubl mi.",ar:"        .",et:"Ma vin klaasi sa, see ei tee mulle midagi.",lt:"A galiu valgyti stikl ir jis mans neeidia.",bg:"   ,    .",is:"g get eti gler n ess a meia mig.",he:"       .",fa:".       ",uk:"   ,     .",vi:"Ti c th n thy tinh m khng hi g.",kk:"",lv:"Es varu st stiklu, tas man nekait.",mt:"Nista' niekol il-ie u ma jagmilli xejn.",th:" "};class g{static getEncodings(){return Object.keys(d)}static getEncoding(a){return void 0!==e[a]&&(a=e[a]),void 0===d[a]&&(a="ascii"),void 0===d[a].codepoints&&(d[a].codepoints=this.getCodepoints(a,!0)),structuredClone(d[a])}static getTestStrings(a){return(void 0!==e[a]&&(a=e[a]),void 0!==d[a]&&void 0!==d[a].languages)?d[a].languages.map(a=>({language:a,string:f[a]})):[]}static supports(a){return void 0!==e[a]&&(a=e[a]),void 0!==d[a]}static encode(a,b){let c=new Uint8Array(a.length),d=this.getEncoding(b);for(let b=0;b<a.length;b++){let e=a.codePointAt(b),f=d.codepoints.findIndex(a=>a===e);-1!==f?c[b]=f:c[b]=63}return c}static autoEncode(a,b){let c,d=[],e=-1;for(let f=0;f<a.length;f++){let g,h=a.codePointAt(f),i=0;if(!g&&c){let a=this.getEncoding(c).codepoints.findIndex(a=>a===h);-1!==a&&(g=c,i=a)}if(!g)for(let a=0;a<b.length;a++){let c=this.getEncoding(b[a]).codepoints.findIndex(a=>a===h);if(-1!==c){g=b[a],i=c;break}}g||(g=c||b[0],i=63),c!=g&&(c&&(d[e].bytes=new Uint8Array(d[e].bytes)),d[++e]={codepage:g,bytes:[]},c=g),d[e].bytes.push(i)}return c&&(d[e].bytes=new Uint8Array(d[e].bytes)),d}static getCodepoints(a,b){let c=Array(256);if(b&&(c=void 0===d[a].extends?c.fill(65533):this.getEncoding(d[a].extends).codepoints),16===d[a].value.length){for(let b=0;b<16;b++)if("object"==typeof d[a].value[b])for(let e=0;e<16;e++)"number"==typeof d[a].value[b][e]&&(c[16*b+e]=d[a].value[b][e])}else{let b=d[a].offset||0;for(let e=0;e<d[a].value.length;e++)"number"==typeof d[a].value[e]&&(c[b+e]=d[a].value[e])}return c}}var h=a.i(821207),i=a.i(79241);class j{initialize(){return[{type:"initialize",payload:[27,64]},{type:"character-mode",value:"single byte",payload:[28,46]},{type:"font",value:"A",payload:[27,77,0]}]}font(a){let b=a.charCodeAt(0)-65;return[{type:"font",value:a,payload:[27,77,b]}]}align(a){let b=0;return"center"===a?b=1:"right"===a&&(b=2),[{type:"align",value:a,payload:[27,97,b]}]}barcode(a,b,c){let d=[],e={upca:0,upce:1,ean13:2,ean8:3,code39:4,coda39:4,itf:5,"interleaved-2-of-5":5,"nw-7":6,codabar:6,code93:72,code128:73,"gs1-128":72,"gs1-databar-omni":75,"gs1-databar-truncated":76,"gs1-databar-limited":77,"gs1-databar-expanded":78,"code128-auto":79};if("string"==typeof b&&void 0===e[b])throw Error(`Symbology '${b}' not supported by language`);if(c.width<1||c.width>3)throw Error("Width must be between 1 and 3");let f=c.width+1;"itf"===b&&(f=2*c.width),("gs1-128"===b||"gs1-databar-omni"===b||"gs1-databar-truncated"===b||"gs1-databar-limited"===b||"gs1-databar-expanded"===b)&&(f=c.width),d.push({type:"barcode",property:"height",value:c.height,payload:[29,104,c.height]},{type:"barcode",property:"width",value:c.width,payload:[29,119,f]},{type:"barcode",property:"text",value:c.text,payload:[29,72,2*!!c.text]}),"code128"!=b||a.startsWith("{")||(a="{B"+a),"gs1-128"==b&&(a=a.replace(/[()*]/g,""));let h=g.encode(a,"ascii"),i="string"==typeof b?e[b]:b;return i>64?d.push({type:"barcode",value:{symbology:b,data:a},payload:[29,107,i,h.length,...h]}):d.push({type:"barcode",value:{symbology:b,data:a},payload:[29,107,i,...h,0]}),d}qrcode(a,b){let c=[];if("number"==typeof b.model){let a={1:49,2:50};if(b.model in a)c.push({type:"qrcode",property:"model",value:b.model,payload:[29,40,107,4,0,49,65,a[b.model],0]});else throw Error("Model must be 1 or 2")}if("number"!=typeof b.size)throw Error("Size must be a number");if(b.size<1||b.size>8)throw Error("Size must be between 1 and 8");c.push({type:"qrcode",property:"size",value:b.size,payload:[29,40,107,3,0,49,67,b.size]});let d={l:48,m:49,q:50,h:51};if(b.errorlevel in d)c.push({type:"qrcode",property:"errorlevel",value:b.errorlevel,payload:[29,40,107,3,0,49,69,d[b.errorlevel]]});else throw Error("Error level must be l, m, q or h");let e=g.encode(a,"iso8859-1"),f=e.length+3;return c.push({type:"qrcode",property:"data",value:a,payload:[29,40,107,255&f,f>>8&255,49,80,48,...e]}),c.push({type:"qrcode",command:"print",payload:[29,40,107,3,0,49,81,48]}),c}pdf417(a,b){let c=[];if("number"!=typeof b.columns)throw Error("Columns must be a number");if(0!==b.columns&&(b.columns<1||b.columns>30))throw Error("Columns must be 0, or between 1 and 30");if(c.push({type:"pdf417",property:"columns",value:b.columns,payload:[29,40,107,3,0,48,65,b.columns]}),"number"!=typeof b.rows)throw Error("Rows must be a number");if(0!==b.rows&&(b.rows<3||b.rows>90))throw Error("Rows must be 0, or between 3 and 90");if(c.push({type:"pdf417",property:"rows",value:b.rows,payload:[29,40,107,3,0,48,66,b.rows]}),"number"!=typeof b.width)throw Error("Width must be a number");if(b.width<2||b.width>8)throw Error("Width must be between 2 and 8");if(c.push({type:"pdf417",property:"width",value:b.width,payload:[29,40,107,3,0,48,67,b.width]}),"number"!=typeof b.height)throw Error("Height must be a number");if(b.height<2||b.height>8)throw Error("Height must be between 2 and 8");if(c.push({type:"pdf417",property:"height",value:b.height,payload:[29,40,107,3,0,48,68,b.height]}),"number"!=typeof b.errorlevel)throw Error("Errorlevel must be a number");if(b.errorlevel<0||b.errorlevel>8)throw Error("Errorlevel must be between 0 and 8");c.push({type:"pdf417",property:"errorlevel",value:b.errorlevel,payload:[29,40,107,4,0,48,69,48,b.errorlevel+48]}),c.push({type:"pdf417",property:"truncated",value:!!b.truncated,payload:[29,40,107,3,0,48,70,+!!b.truncated]});let d=g.encode(a,"ascii"),e=d.length+3;return c.push({type:"pdf417",property:"data",value:a,payload:[29,40,107,255&e,e>>8&255,48,80,48,...d]}),c.push({type:"pdf417",command:"print",payload:[29,40,107,3,0,48,81,48]}),c}image(a,b,c,d){let e=[],f=(d,e)=>d<b&&e<c?a.data[(b*e+d)*4]>0?0:1:0;return"column"==d&&(e.push({type:"line-spacing",value:"24 dots",payload:[27,51,36]}),((a,b)=>{let c=[];for(let d=0;d<Math.ceil(b/24);d++){let b=new Uint8Array(3*a);for(let c=0;c<a;c++)for(let a=0;a<3;a++)for(let e=0;e<8;e++)b[3*c+a]|=f(c,24*d+e+8*a)<<7-e;c.push(b)}return c})(b,c).forEach(a=>{e.push({type:"image",property:"data",value:"column",width:b,height:24,payload:[27,42,33,255&b,b>>8&255,...a,10]})}),e.push({type:"line-spacing",value:"default",payload:[27,50]})),"raster"==d&&e.push({type:"image",command:"data",value:"raster",width:b,height:c,payload:[29,118,48,0,b>>3&255,b>>3>>8&255,255&c,c>>8&255,...((a,b)=>{let c=new Uint8Array(a*b>>3);for(let d=0;d<b;d++)for(let b=0;b<a;b+=8)for(let e=0;e<8;e++)c[d*(a>>3)+(b>>3)]|=f(b+e,d)<<7-e;return c})(b,c)]}),e}cut(a){let b=0;return"partial"==a&&(b=1),[{type:"cut",payload:[29,86,b]}]}pulse(a,b,c){return void 0===a&&(a=0),void 0===b&&(b=100),void 0===c&&(c=500),[{type:"pulse",payload:[27,112,+!!a,255&(b=Math.min(500,Math.round(b/2))),255&(c=Math.min(500,Math.round(c/2)))]}]}bold(a){let b=0;return a&&(b=1),[27,69,b]}underline(a){let b=0;return a&&(b=1),[27,45,b]}italic(a){let b=0;return a&&(b=1),[27,52,b]}invert(a){let b=0;return a&&(b=1),[29,66,b]}size(a,b){return[29,33,b-1|a-1<<4]}codepage(a){return[27,116,a]}flush(){return[]}}class k{initialize(){return[{type:"initialize",payload:[27,64,24]}]}font(a){let b=0;return"B"===a&&(b=1),"C"===a&&(b=2),[{type:"font",value:a,payload:[27,30,70,b]}]}align(a){let b=0;return"center"===a?b=1:"right"===a&&(b=2),[{type:"align",value:a,payload:[27,29,97,b]}]}barcode(a,b,c){let d=[],e={upce:0,upca:1,ean8:2,ean13:3,code39:4,itf:5,"interleaved-2-of-5":5,code128:6,code93:7,"nw-7":8,codabar:8,"gs1-128":9,"gs1-databar-omni":10,"gs1-databar-truncated":11,"gs1-databar-limited":12,"gs1-databar-expanded":13};if("string"==typeof b&&void 0===e[b])throw Error(`Symbology '${b}' not supported by language`);if(c.width<1||c.width>3)throw Error("Width must be between 1 and 3");"code128"===b&&a.startsWith("{")&&(a=a.slice(2));let f=g.encode(a,"ascii"),h="string"==typeof b?e[b]:b;return d.push({type:"barcode",value:{symbology:b,data:a,width:c.width,height:c.height,text:c.text},payload:[27,98,h,c.text?2:1,c.width,c.height,...f,30]}),d}qrcode(a,b){let c=[],d={1:1,2:2};if(b.model in d)c.push({type:"qrcode",property:"model",value:b.model,payload:[27,29,121,83,48,d[b.model]]});else throw Error("Model must be 1 or 2");if("number"!=typeof b.size)throw Error("Size must be a number");if(b.size<1||b.size>8)throw Error("Size must be between 1 and 8");c.push({type:"qrcode",property:"size",value:b.size,payload:[27,29,121,83,50,b.size]});let e={l:0,m:1,q:2,h:3};if(b.errorlevel in e)c.push({type:"qrcode",property:"errorlevel",value:b.errorlevel,payload:[27,29,121,83,49,e[b.errorlevel]]});else throw Error("Error level must be l, m, q or h");let f=g.encode(a,"iso8859-1"),h=f.length;return c.push({type:"qrcode",property:"data",value:a,payload:[27,29,121,68,49,0,255&h,h>>8&255,...f]}),c.push({type:"qrcode",command:"print",payload:[27,29,121,80]}),c}pdf417(a,b){let c=[];if("number"!=typeof b.columns)throw Error("Columns must be a number");if(0!==b.columns&&(b.columns<1||b.columns>30))throw Error("Columns must be 0, or between 1 and 30");if("number"!=typeof b.rows)throw Error("Rows must be a number");if(0!==b.rows&&(b.rows<3||b.rows>90))throw Error("Rows must be 0, or between 3 and 90");if(c.push({type:"pdf417",value:`rows: ${b.rows}, columns: ${b.columns}`,payload:[27,29,120,83,48,1,b.rows,b.columns]}),"number"!=typeof b.width)throw Error("Width must be a number");if(b.width<2||b.width>8)throw Error("Width must be between 2 and 8");if(c.push({type:"pdf417",property:"width",value:b.width,payload:[27,29,120,83,50,b.width]}),"number"!=typeof b.height)throw Error("Height must be a number");if(b.height<2||b.height>8)throw Error("Height must be between 2 and 8");if(c.push({type:"pdf417",property:"height",value:b.height,payload:[27,29,120,83,51,b.height]}),"number"!=typeof b.errorlevel)throw Error("Errorlevel must be a number");if(b.errorlevel<0||b.errorlevel>8)throw Error("Errorlevel must be between 0 and 8");c.push({type:"pdf417",property:"errorlevel",value:b.errorlevel,payload:[27,29,120,83,49,b.errorlevel]});let d=g.encode(a,"ascii"),e=d.length;return c.push({type:"pdf417",property:"data",value:a,payload:[27,29,120,68,255&e,e>>8&255,...d]}),c.push({type:"pdf417",command:"print",payload:[27,29,120,80]}),c}image(a,b,c,d){let e=[],f=(c,d)=>void 0===a.data[(b*d+c)*4]||a.data[(b*d+c)*4]>0?0:1;e.push({type:"line-spacing",value:"24 dots",payload:[27,48]});for(let a=0;a<c/24;a++){let c=24*a,d=new Uint8Array(3*b);for(let a=0;a<b;a++){let b=3*a;d[b]=f(a,c+0)<<7|f(a,c+1)<<6|f(a,c+2)<<5|f(a,c+3)<<4|f(a,c+4)<<3|f(a,c+5)<<2|f(a,c+6)<<1|f(a,c+7),d[b+1]=f(a,c+8)<<7|f(a,c+9)<<6|f(a,c+10)<<5|f(a,c+11)<<4|f(a,c+12)<<3|f(a,c+13)<<2|f(a,c+14)<<1|f(a,c+15),d[b+2]=f(a,c+16)<<7|f(a,c+17)<<6|f(a,c+18)<<5|f(a,c+19)<<4|f(a,c+20)<<3|f(a,c+21)<<2|f(a,c+22)<<1|f(a,c+23)}e.push({type:"image",property:"data",value:"column",width:b,height:24,payload:[27,88,255&b,b>>8&255,...d,10,13]})}return e.push({type:"line-spacing",value:"default",payload:[27,122,1]}),e}cut(a){let b=0;return"partial"==a&&(b=1),[{type:"cut",payload:[27,100,b]}]}pulse(a,b,c){return void 0===a&&(a=0),void 0===b&&(b=200),void 0===c&&(c=200),[{type:"pulse",payload:[27,7,255&(b=Math.min(127,Math.round(b/10))),255&(c=Math.min(127,Math.round(c/10))),a?26:7]}]}bold(a){let b=70;return a&&(b=69),[27,b]}underline(a){let b=0;return a&&(b=1),[27,45,b]}italic(a){return[]}invert(a){let b=53;return a&&(b=52),[27,b]}size(a,b){return[27,105,b-1,a-1]}codepage(a){return[27,29,116,a]}flush(){return[{type:"print-mode",value:"page",payload:[27,29,80,48]},{type:"print-mode",value:"line",payload:[27,29,80,49]}]}}class l{#a={bold:!1,italic:!1,underline:!1,invert:!1,width:1,height:1};#b;#c;constructor(a){this.#b=structuredClone(this.#a),this.#c=a.callback||(()=>{})}store(){let a=[],b=new Map;for(let a in this.#b)this.#b[a]!==this.#a[a]&&("width"===a||"height"===a?b.set("size",{width:this.#a.width,height:this.#a.height}):b.set(a,this.#a[a]));for(let c of b)a.push({type:"style",property:c[0],value:c[1]});return a}restore(){let a=[],b=new Map;for(let a in this.#b)this.#b[a]!==this.#a[a]&&("width"===a||"height"===a?b.set("size",{width:this.#b.width,height:this.#b.height}):b.set(a,this.#b[a]));for(let c of b)a.push({type:"style",property:c[0],value:c[1]});return a}set bold(a){a!==this.#b.bold&&(this.#b.bold=a,this.#c({type:"style",property:"bold",value:a}))}get bold(){return this.#b.bold}set italic(a){a!==this.#b.italic&&(this.#b.italic=a,this.#c({type:"style",property:"italic",value:a}))}get italic(){return this.#b.italic}set underline(a){a!==this.#b.underline&&(this.#b.underline=a,this.#c({type:"style",property:"underline",value:a}))}get underline(){return this.#b.underline}set invert(a){a!==this.#b.invert&&(this.#b.invert=a,this.#c({type:"style",property:"invert",value:a}))}get invert(){return this.#b.invert}set width(a){a!==this.#b.width&&(this.#b.width=a,this.#c({type:"style",property:"size",value:{width:this.#b.width,height:this.#b.height}}))}get width(){return this.#b.width}set height(a){a!==this.#b.height&&(this.#b.height=a,this.#c({type:"style",property:"size",value:{width:this.#b.width,height:this.#b.height}}))}get height(){return this.#b.height}}class m{static wrap(a,b){let c=[],d=[],e=b.indent||0,f=b.width||1,g=b.columns||42;for(let b of String(a).split(/\r\n|\n/g)){for(let a of b.match(/[^\s-]+?-\b|\S+|\s+|\r\n?|\n/g)||["~~empty~~"]){if("~~empty~~"===a){c.push(d),d=[],e=0;continue}if(e+a.length*f>g){if(a.length*f>g){let b,h=g-e,i=a.split(""),j=[];for(h>8*f&&(b=i.splice(0,Math.floor(h/f)).join(""),d.push(b),c.push(d),d=[],e=0);(b=i.splice(0,Math.floor(g/f))).length;)j.push(b.join(""));for(let a of j)e+a.length*f>g&&(c.push(d),d=[],e=0),d.push(a),e+=a.length*f;continue}c.push(d),d=[],e=0}a.match(/\s+/)&&0==e||(d.push(a),e+=a.length*f)}d.length>0&&(c.push(d),d=[],e=0)}for(let a=0;a<c.length;a++)c[a]=c[a].join(""),a<c.length-1&&(c[a]=c[a].trimEnd());return c}}class n{#d;#e;#f;#c;#g=0;#h;#i=[];constructor(a){this.#d=a.embedded||!1,this.#e=a.columns||42,this.#f=a.align||"left",this.#c=a.callback||(()=>{}),this.style=new l({callback:a=>{this.add(a,0)}}),this.#h=this.style.store()}text(a,b){let c=m.wrap(a,{columns:this.#e,width:this.style.width,indent:this.#g});for(let a=0;a<c.length;a++)c[a].length?(this.add({type:"text",value:c[a],codepage:b},c[a].length*this.style.width),a<c.length-1&&this.flush()):this.flush({forceNewline:!0})}space(a){this.add({type:"space",size:a},a)}raw(a,b){this.add({type:"raw",payload:a},b||0)}add(a,b){if(a instanceof Array){for(let b of a)this.add(b);this.#g+=b||0;return}(b=b||0)+this.#g>this.#e&&this.flush(),this.#g+=b,this.#i=this.#i.concat(a)}end(){this.#g=this.#e}fetch(a){if(0===this.#g&&!a.forceNewline&&!a.forceFlush)return[];let b={current:this.#f,next:null};for(let a=0;a<this.#i.length-1;a++)"align"!==this.#i[a].type||this.#i[a].payload||(b.current=this.#i[a].value);if(this.#i.length){let a=this.#i[this.#i.length-1];"align"!==a.type||a.payload||(b.next=a.value)}this.#f=b.current;let c=this.#i.filter(a=>"align"!==a.type||a.payload),d=[],e=this.style.restore(),f=this.style.store();if(0===this.#g&&(a.ignoreAlignment||!this.#d))d=this.#j([...this.#h,...c,...f]);else{if("right"===this.#f){let a;for(let b=c.length-1;b>=0;b--)if("text"===c[b].type||"space"===c[b].type){a=b;break}"number"==typeof a&&("space"===c[a].type&&c[a].size>this.style.width&&(c[a].size-=this.style.width,this.#g-=this.style.width),"text"===c[a].type&&c[a].value.endsWith(" ")&&(c[a].value=c[a].value.slice(0,-1),this.#g-=this.style.width)),d=this.#j([{type:"space",size:this.#e-this.#g},...this.#h,...c,...f])}if("center"===this.#f){let a=this.#e-this.#g>>1;d=this.#j([{type:"space",size:a},...this.#h,...c,...f,{type:"space",size:this.#d?this.#e-this.#g-a:0}])}"left"===this.#f&&(d=this.#j([...this.#h,...c,...f,{type:"space",size:this.#d?this.#e-this.#g:0}]))}return this.#h=e,this.#i=[],this.#g=0,0===d.length&&a.forceNewline&&d.push({type:"empty"}),b.next&&(this.#f=b.next),d}flush(a){a=Object.assign({forceNewline:!1,forceFlush:!1,ignoreAlignment:!1},a||{});let b=this.fetch(a);b.length&&this.#c(b)}#j(a){let b=[],c=-1;for(let d of a){if("space"===d.type){if(0===d.size)continue;d={type:"text",value:" ".repeat(d.size),codepage:null}}if("text"===d.type){if(c>=0&&"text"===b[c].type&&(b[c].codepage===d.codepage||null===b[c].codepage||null===d.codepage)){b[c].value+=d.value,b[c].codepage=b[c].codepage||d.codepage;continue}b.push(d),c++}else if("style"===d.type&&"size"===d.property){if(c>=0&&"style"===b[c].type&&"size"===b[c].property){b[c].value=d.value;continue}b.push(d),c++}else b.push(d),c++}return b}get cursor(){return this.#g}set align(a){this.add({type:"align",value:a},0)}get align(){let a=this.#f;for(let b=0;b<this.#i.length;b++)"align"===this.#i[b].type&&(a=this.#i[b].value);return a}set columns(a){this.#e=a}get columns(){return this.#e}}let o={"esc-pos":{"bixolon/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],bixolon:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858",,"cp862","cp864","thai42","windows1253","windows1254","windows1257",,"windows1251","cp737","cp775","thai14","bixolon/hebrew","windows1255","thai11","thai18","cp885","cp857","iso8859-7","thai16","windows1256","windows1258","khmer",,,,"bixolon/cp866","windows1250",,"tcvn3","tcvn3capitals","viscii"],citizen:["cp437","epson/katakana","cp858","cp860","cp863","cp865","cp852","cp866","cp857",,,,,,,,"windows1252",,,,,"thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","windows1258",,,,,,,,"cp864"],"epson/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858"],epson:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,"cp851","cp853","cp857","cp737","iso8859-7","windows1252","cp866","cp852","cp858","thai42","thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","cp720","cp775","cp855","cp861","cp862","cp864","cp869","epson/iso8859-2","iso8859-15","cp1098","cp774","cp772","cp1125","windows1250","windows1251","windows1253","windows1254","windows1255","windows1256","windows1257","windows1258","rk1048"],fujitsu:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,"cp857",,,,,,,,"windows1252","cp866","cp852","cp858",,,,,,,"thai13",,,,,,,,,,,,,,"cp864"],hp:["cp437","cp850","cp852","cp860","cp863","cp865","cp858","cp866","windows1252","cp862","cp737","cp874","cp857","windows1251","windows1255","rk1048"],metapace:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],mpt:["cp437",,"cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012"],"pos-5890":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1",,"cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,,,"windows1251","cp737","windows1257",,"windows1258","cp864",,,,"windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,"cp3041","windows1253","windows1254","windows1256","cp720",,"cp775"],"pos-8360":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,"latvian",,"windows1251","cp737","windows1257",,"windows1258","cp864",,,"pos8360/hebrew","windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,,,"windows1254","windows1256","cp720",,"cp775"],star:["cp437","star/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858","thai42","thai11","thai13","thai14","thai16",,"thai18"],xprinter:["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","xprinter/hebrew","cp3012",,"windows1255",,,,,"windows1252","cp866","cp852","cp858",,"latvian","cp864","windows1251","cp737","windows1257",,,,,,,,"windows1256"],youku:["cp437","epson/katakana","cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012",,,,,,"cp862","windows1252",,"cp852","cp858",,,"cp864","iso8859-1","cp737","windows1257",,,"cp855","cp857","windows1250","cp775","windows1254","windows1255","windows1256","windows1258",,,"iso8859-1",,,,,,"iso8859-15",,,"cp874"]},"star-prnt":{star:["star/standard","cp437","star/katakana",,"cp858","cp852","cp860","cp861","cp863","cp865","cp866","cp855","cp857","cp862","cp864","cp737","cp851","cp869","star/cp928","cp772","cp774","star/cp874",,,,,,,,,,,"windows1252","windows1250","windows1251",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"cp3840","cp3841","cp3843","cp3844","cp3845","cp3846","cp3847","cp3848","cp1001","cp771","cp3001","cp3002","cp3011","cp3012","cp3021","cp3041"]}};o["star-line"]=o["star-prnt"],o["esc-pos"].zijang=o["esc-pos"]["pos-5890"];let p={"bixolon-srp350":{vendor:"Bixolon",model:"SRP-350",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"bixolon-srp350iii":{vendor:"Bixolon",model:"SRP-350III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56},C:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"citizen-ct-s310ii":{vendor:"Citizen",model:"CT-S310II",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"citizen",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64},C:{size:"8x16",columns:72}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"epson-tm-m30ii":{vendor:"Epson",model:"TM-m30II",interfaces:{usb:{productName:"TM-m30II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-m30iii":{vendor:"Epson",model:"TM-m30III",interfaces:{usb:{productName:"TM-m30III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-p20ii":{vendor:"Epson",model:"TM-P20II",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42},D:{size:"10x24",columns:38},E:{size:"8x16",columns:48}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:3}}},"epson-tm-t20ii":{vendor:"Epson",model:"TM-T20II",interfaces:{usb:{productName:"TM-T20II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iii":{vendor:"Epson",model:"TM-T20III",interfaces:{usb:{productName:"TM-T20III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iv":{vendor:"Epson",model:"TM-T20IV",interfaces:{usb:{productName:"TM-T20IV"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t70":{vendor:"Epson",model:"TM-T70",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t70ii":{vendor:"Epson",model:"TM-T70II",interface:{usb:{productName:"TM-T70II"}},media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t88ii":{vendor:"Epson",model:"TM-T88II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iii":{vendor:"Epson",model:"TM-T88III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iv":{vendor:"Epson",model:"TM-T88IV",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88v":{vendor:"Epson",model:"TM-T88V",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vi":{vendor:"Epson",model:"TM-T88VI",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vii":{vendor:"Epson",model:"TM-T88VII",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"fujitsu-fp1000":{vendor:"Fujitsu",model:"FP-1000",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"fujitsu",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:56},C:{size:"8x16",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1},cutter:{feed:4}}},"hp-a779":{vendor:"HP",model:"A779",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"hp",newline:"\n",fonts:{A:{size:"12x24",columns:44}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1,fallback:{type:"barcode",symbology:75}},cutter:{feed:4}}},"metapace-t1":{vendor:"Metapace",model:"T-1",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"metapace",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"mpt-ii":{vendor:"",model:"MPT-II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"mpt",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64},C:{size:"0x0",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:[]},pdf417:{supported:!1}}},"pos-5890":{vendor:"",model:"POS-5890",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"pos-5890",fonts:{A:{size:"12x24",columns:32},B:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:1}}},"pos-8360":{vendor:"",model:"POS-8360",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"pos-8360",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"star-mc-print2":{vendor:"Star",model:"mC-Print2",interfaces:{usb:{productName:"mC-Print2"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-mpop":{vendor:"Star",model:"mPOP",interfaces:{usb:{productName:"mPOP"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-sm-l200":{vendor:"Star",model:"SM-L200",media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0}}},"star-tsp100iii":{vendor:"Star",model:"TSP100III",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp100iv":{vendor:"Star",model:"TSP100IV",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp650":{vendor:"Star",model:"TSP650",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:3}}},"star-tsp650ii":{vendor:"Star",model:"TSP650II",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"xprinter-xp-n160ii":{vendor:"Xprinter",model:"XP-N160II",interfaces:{usb:{productName:"Printer-80\0"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"xprinter-xp-t80q":{vendor:"Xprinter",model:"XP-T80Q",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"youku-58t":{vendor:"Youku",model:"58T",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"youku",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!1}}}};class q{#k={};#l=[];#m;#n;#o={fonts:{A:{size:"12x24",columns:42},B:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0}};#p={};#q=[];#r="cp437";#s={codepage:0,font:"A"};constructor(a){const b={columns:42,language:"esc-pos",imageMode:"column",feedBeforeCut:0,newline:"\n\r",codepageMapping:"epson",codepageCandidates:null,errors:"relaxed"};if("string"==typeof(a=a||{}).language&&(b.columns="esc-pos"===a.language?42:48,b.codepageMapping="esc-pos"===a.language?"epson":"star"),"string"==typeof a.printerModel){if(void 0===p[a.printerModel])throw Error("Unknown printer model");this.#o=p[a.printerModel].capabilities,b.columns=this.#o.fonts.A.columns,b.language=this.#o.language,b.codepageMapping=this.#o.codepages,b.newline=this.#o?.newline||b.newline,b.feedBeforeCut=this.#o?.cutter?.feed||b.feedBeforeCut,b.imageMode=this.#o?.images?.mode||b.imageMode}if(a&&(this.#k=Object.assign(b,{debug:!1,embedded:!1,createCanvas:null},a)),this.#k.width&&(this.#k.columns=this.#k.width),"esc-pos"===this.#k.language)this.#m=new j;else if("star-prnt"===this.#k.language||"star-line"===this.#k.language)this.#m=new k;else throw Error("The specified language is not supported");if(void 0===this.#k.autoFlush&&(this.#k.autoFlush=!this.#k.embedded&&"star-prnt"==this.#k.language),![32,35,42,44,48].includes(this.#k.columns)&&!this.#k.embedded)throw Error("The width of the paper must me either 32, 35, 42, 44 or 48 columns");if("string"==typeof this.#k.codepageMapping){if(void 0===o[this.#k.language][this.#k.codepageMapping])throw Error("Unknown codepage mapping");this.#p=Object.fromEntries(o[this.#k.language][this.#k.codepageMapping].map((a,b)=>[a,b]).filter(a=>a))}else this.#p=this.#k.codepageMapping;this.#k.codepageCandidates?this.#q=this.#k.codepageCandidates:this.#q=Object.keys(this.#p),this.#n=new n({embedded:this.#k.embedded,columns:this.#k.columns,align:"left",size:1,callback:a=>this.#l.push(a)}),this.#t()}#t(){this.#l=[],this.#r="esc-pos"==this.#k.language?"cp437":"star/standard",this.#s.codepage=-1,this.#s.font="A"}initialize(){if(this.#k.embedded)throw Error("Initialize is not supported in table cells or boxes");return this.#n.add(this.#m.initialize()),this}codepage(a){if("auto"===a)return this.#r=a,this;if(!g.supports(a))throw Error("Unknown codepage");if(void 0!==this.#p[a])this.#r=a;else throw Error("Codepage not supported by printer");return this}text(a){return this.#n.text(a,this.#r),this}newline(a){a=parseInt(a,10)||1;for(let b=0;b<a;b++)this.#n.flush({forceNewline:!0});return this}line(a){return this.text(a),this.newline(),this}underline(a){return void 0===a?this.#n.style.underline=!this.#n.style.underline:this.#n.style.underline=a,this}italic(a){return void 0===a?this.#n.style.italic=!this.#n.style.italic:this.#n.style.italic=a,this}bold(a){return void 0===a?this.#n.style.bold=!this.#n.style.bold:this.#n.style.bold=a,this}invert(a){return void 0===a?this.#n.style.invert=!this.#n.style.invert:this.#n.style.invert=a,this}width(a){if(void 0===a&&(a=1),"number"!=typeof a)throw Error("Width must be a number");if(a<1||a>8)throw Error("Width must be between 1 and 8");return this.#n.style.width=a,this}height(a){if(void 0===a&&(a=1),"number"!=typeof a)throw Error("Height must be a number");if(a<1||a>8)throw Error("Height must be between 1 and 8");return this.#n.style.height=a,this}size(a,b){return"string"==typeof a?this.font("small"===a?"B":"A"):(void 0===b&&(b=a),this.width(a),this.height(b),this)}font(a){if(this.#k.embedded)throw Error("Changing fonts is not supported in table cells or boxes");if(this.#n.cursor>0)throw Error("Changing fonts is not supported in the middle of a line");let b=a.match(/^[0-9]+x[0-9]+$/);return(b&&(a=Object.entries(this.#o.fonts).find(a=>a[1].size==b[0])[0]),a=a.toUpperCase(),void 0===this.#o.fonts[a])?this.#u("This font is not supported by this printer","relaxed"):(this.#n.add(this.#m.font(a)),this.#s.font=a,"A"===a?this.#n.columns=this.#k.columns:this.#n.columns=this.#k.columns/this.#o.fonts.A.columns*this.#o.fonts[a].columns,this)}align(a){if(!["left","center","right"].includes(a))throw Error("Unknown alignment");return this.#n.align=a,this}table(a,b){this.#n.flush();for(let c=0;c<b.length;c++){let d=[],e=0;for(let f=0;f<a.length;f++){let g=new q(Object.assign({},this.#k,{width:a[f].width,embedded:!0}));g.codepage(this.#r),g.align(a[f].align),"string"==typeof b[c][f]&&g.text(b[c][f]),"function"==typeof b[c][f]&&b[c][f](g);let h=g.commands();e=Math.max(e,h.length),d[f]=h}for(let b=0;b<a.length;b++)if(!(d[b].length>=e))for(let c=d[b].length;c<e;c++){let c="top";void 0!==a[b].verticalAlign&&(c=a[b].verticalAlign);let e={commands:[{type:"space",size:a[b].width}],height:1};"bottom"==c?d[b].unshift(e):d[b].push(e)}for(let b=0;b<e;b++){for(let c=0;c<a.length;c++)void 0!==a[c].marginLeft&&this.#n.space(a[c].marginLeft),this.#n.add(d[c][b].commands,a[c].width),void 0!==a[c].marginRight&&this.#n.space(a[c].marginRight);this.#n.flush()}}return this}rule(a){return a=Object.assign({style:"single",width:this.#k.columns||10},a||{}),this.#n.flush(),this.#n.text(("double"===a.style?"":"").repeat(a.width),"cp437"),this.#n.flush({forceNewline:!0}),this}box(a,b){let c;if((a=Object.assign({style:"single",width:this.#k.columns,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},a||{})).width+a.marginLeft+a.marginRight>this.#k.columns)throw Error("Box is too wide");"single"==a.style?c=["","","","","",""]:"double"==a.style&&(c=["","","","","",""]);let d=new q(Object.assign({},this.#k,{width:a.width-2*("none"!=a.style)-a.paddingLeft-a.paddingRight,embedded:!0}));d.codepage(this.#r),d.align(a.align),"function"==typeof b&&b(d),"string"==typeof b&&d.text(b);let e=d.commands();this.#n.flush(),"none"!=a.style&&(this.#n.space(a.marginLeft),this.#n.text(c[0],"cp437"),this.#n.text(c[4].repeat(a.width-2),"cp437"),this.#n.text(c[1],"cp437"),this.#n.space(a.marginRight),this.#n.flush());for(let b=0;b<e.length;b++)this.#n.space(a.marginLeft),"none"!=a.style&&(this.#n.style.height=e[b].height,this.#n.text(c[5],"cp437"),this.#n.style.height=1),this.#n.space(a.paddingLeft),this.#n.add(e[b].commands,a.width-2*("none"!=a.style)-a.paddingLeft-a.paddingRight),this.#n.space(a.paddingRight),"none"!=a.style&&(this.#n.style.height=e[b].height,this.#n.text(c[5],"cp437"),this.#n.style.height=1),this.#n.space(a.marginRight),this.#n.flush();return"none"!=a.style&&(this.#n.space(a.marginLeft),this.#n.text(c[2],"cp437"),this.#n.text(c[4].repeat(a.width-2),"cp437"),this.#n.text(c[3],"cp437"),this.#n.space(a.marginRight),this.#n.flush()),this}barcode(a,b,c){let d={height:60,width:2,text:!1};if("object"==typeof c&&(d=Object.assign(d,c)),"number"==typeof c&&(d.height=c),this.#k.embedded)throw Error("Barcodes are not supported in table cells or boxes");return!1===this.#o.barcodes.supported?this.#u("Barcodes are not supported by this printer","relaxed"):"string"!=typeof b||this.#o.barcodes.symbologies.includes(b)?(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.barcode(a,b,d)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this):this.#u(`Symbology '${b}' not supported by this printer`,"relaxed")}qrcode(a,b,c,d){let e={model:2,size:6,errorlevel:"m"};if("object"==typeof b&&(e=Object.assign(e,b)),"number"==typeof b&&(e.model=b),"number"==typeof c&&(e.size=c),"string"==typeof d&&(e.errorlevel=d),this.#k.embedded)throw Error("QR codes are not supported in table cells or boxes");return!1===this.#o.qrcode.supported?this.#u("QR codes are not supported by this printer","relaxed"):e.model&&!this.#o.qrcode.models.includes(String(e.model))?this.#u("QR code model is not supported by this printer","relaxed"):(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.qrcode(a,e)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this)}pdf417(a,b){if(b=Object.assign({width:3,height:3,columns:0,rows:0,errorlevel:1,truncated:!1},b||{}),this.#k.embedded)throw Error("PDF417 codes are not supported in table cells or boxes");return!1===this.#o.pdf417.supported?"object"==typeof this.#o.pdf417.fallback?this.barcode(a,this.#o.pdf417.fallback.symbology):this.#u("PDF417 codes are not supported by this printer","relaxed"):(this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.pdf417(a,b)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this)}image(a,d,e,f,g){let j,k;if(this.#k.embedded)throw Error("Images are not supported in table cells or boxes");if(d%8!=0)throw Error("Width must be a multiple of 8");if(e%8!=0)throw Error("Height must be a multiple of 8");void 0===f&&(f="threshold"),void 0===g&&(g=128);let l=a.constructor.name;if(l.endsWith("Element")&&(j="element"),"ImageData"==l&&(j="imagedata"),"Canvas"==l&&void 0!==a.getContext&&(j="node-canvas"),"Image"==l&&(j="node-canvas-image"),"Image"==l&&void 0!==a.frames&&(j="node-read-image"),"Object"==l&&a.data&&a.info&&(j="node-sharp"),"View3duint8"==l&&a.data&&a.shape&&(j="ndarray"),"Object"==l&&a.data&&a.width&&a.height&&(j="object"),!j)throw Error("Could not determine the type of image input");if("element"==j){let b=document.createElement("canvas");b.width=d,b.height=e;let c=b.getContext("2d");c.drawImage(a,0,0,d,e),k=c.getImageData(0,0,d,e)}if("node-canvas"==j&&(k=a.getContext("2d").getImageData(0,0,a.width,a.height)),"node-canvas-image"==j){if("function"!=typeof this.#k.createCanvas)throw Error("Canvas is not supported in this environment, specify a createCanvas function in the options");let b=this.#k.createCanvas(d,e).getContext("2d");b.drawImage(a,0,0,d,e),k=b.getImageData(0,0,d,e)}if("node-read-image"==j&&(k=new h.default(a.width,a.height)).data.set(a.frames[0].data),"node-sharp"==j&&(k=new h.default(a.info.width,a.info.height)).data.set(a.data),"ndarray"==j&&(k=new h.default(a.shape[0],a.shape[1])).data.set(a.data),"object"==j&&(k=new h.default(a.width,a.height)).data.set(a.data),"imagedata"==j&&(k=a),!k)throw Error("Image could not be loaded");if((d!==k.width||e!==k.height)&&(k=(0,i.default)(k,d,e,"bilinear-interpolation")),d!==k.width||e!==k.height)throw Error("Image could not be resized");switch(k=c.default.flatten(k,[255,255,255]),f){case"threshold":k=b.default.threshold(k,g);break;case"bayer":k=b.default.bayer(k,g);break;case"floydsteinberg":k=b.default.floydsteinberg(k);break;case"atkinson":k=b.default.atkinson(k)}return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#n.align&&this.#n.add(this.#m.align(this.#n.align)),this.#n.add(this.#m.image(k,d,e,this.#k.imageMode)),"left"!==this.#n.align&&this.#n.add(this.#m.align("left")),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}cut(a){if(this.#k.embedded)throw Error("Cut is not supported in table cells or boxes");for(let a=0;a<this.#k.feedBeforeCut;a++)this.#n.flush({forceNewline:!0});return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this.#n.add(this.#m.cut(a)),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}pulse(a,b,c){if(this.#k.embedded)throw Error("Pulse is not supported in table cells or boxes");return this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this.#n.add(this.#m.pulse(a,b,c)),this.#n.flush({forceFlush:!0,ignoreAlignment:!0}),this}raw(a){return this.#n.raw(a),this}#v(a,b){return"bold"===a?this.#m.bold(b):"underline"===a?this.#m.underline(b):"italic"===a?this.#m.italic(b):"invert"===a?this.#m.invert(b):"size"===a?this.#m.size(b.width,b.height):void 0}#w(a,b){if(null===b)return[{type:"text",payload:[...g.encode(a,"ascii")]}];if("auto"!==b){let c=g.encode(a,b);return this.#s.codepage!=this.#p[b]?(this.#s.codepage=this.#p[b],[{type:"codepage",payload:this.#m.codepage(this.#p[b])},{type:"text",payload:[...c]}]):[{type:"text",payload:[...c]}]}let c=g.autoEncode(a,this.#q),d=[];for(let a of c)this.#s.codepage=this.#p[a.codepage],d.push({type:"codepage",payload:this.#m.codepage(this.#p[a.codepage])},{type:"text",payload:[...a.bytes]});return d}commands(){let a=!0,b=this.#l[this.#l.length-1];if(b){let c=b[b.length-1];c&&["pulse","cut"].includes(c.type)&&(a=!1)}a&&this.#k.autoFlush&&!this.#k.embedded&&this.#n.add(this.#m.flush());let c=[],d=this.#n.fetch({forceFlush:!0,ignoreAlignment:!0});for(d.length&&this.#l.push(d);this.#l.length;){let a=this.#l.shift(),b=a.filter(a=>"style"===a.type&&"size"===a.property).map(a=>a.value.height).reduce((a,b)=>Math.max(a,b),1);this.#k.debug&&console.log("|"+a.filter(a=>"text"===a.type).map(a=>a.value).join("")+"|",b),c.push({commands:a,height:b})}return this.#k.debug&&console.log("commands",c),this.#t(),c}encode(a){let b=this.commands();if("commands"===a)return b;let c=[];for(let a of b){let b=[];for(let c of a.commands)"text"===c.type?b.push(...this.#w(c.value,c.codepage)):"style"===c.type?b.push(Object.assign(c,{payload:this.#v(c.property,c.value)})):(c.value||c.payload)&&b.push(c);c.push(b)}if("lines"===a)return c;let d=[],e=null;for(let a of c){for(let b of a)d.push(...b.payload),e=b;"\n\r"===this.#k.newline&&d.push(10,13),"\n"===this.#k.newline&&d.push(10)}return e&&"pulse"===e.type&&(d=d.slice(0,0-this.#k.newline.length)),Uint8Array.from(d)}#u(a,b){if("strict"===b||"strict"===this.#k.errors)throw Error(a);return console.warn(a),this}static get printerModels(){return Object.entries(p).map(a=>({id:a[0],name:a[1].vendor+" "+a[1].model}))}get columns(){return this.#n.columns}get language(){return this.#k.language}get printerCapabilities(){return this.#o}}class r extends q{constructor(a){(a=a||{}).language="esc-pos",super(a)}}a.s(["default",()=>r],881776)},186386,a=>a.a(async(b,c)=>{try{var d=a.i(881776),e=a.i(12208),f=a.i(139138),g=a.i(80965),h=a.i(771826),i=b([h]);async function j(a,b,c){let i=c||b.currency||"",j=new d.default;j.initialize();let k="80mm"===b.printerPaperSize;k?j.raw([29,87,64,2]):(j.raw([29,76,0,0]),j.raw([29,87,128,1])),j.align("left"),j.align("left"),j.line(k?"=".repeat(42):"=".repeat(32)),b.businessName&&j.size("double").bold(!0).line(b.businessName.toUpperCase()).bold(!1).size("normal"),j.line(k?"=".repeat(42):"=".repeat(32)),b.businessAddress&&j.line(b.businessAddress),b.businessPhone&&j.line(`Tel: ${b.businessPhone}`),b.businessEmail&&j.line(b.businessEmail),j.line(k?"-".repeat(42):"-".repeat(32));let l={Quote:"QUOTATION",Paid:"SALES RECEIPT","Installment Sale":"INSTALLMENT SALE","NOT PAID":"INVOICE"}[a.paymentStatus]||"INVOICE";j.bold(!0).line(l).bold(!1),j.line(k?"-".repeat(42):"-".repeat(32)),j.raw([29,76,0,0]),j.align("left"),j.table([{width:12,align:"left"},{width:16,align:"right"}],[["Receipt #:",a.receiptNumber||""],["Date:",(0,e.format)(new Date(a.date||Date.now()),"MMM dd, yyyy")],["Status:",a.paymentStatus||""]]),j.line(k?"-".repeat(42):"-".repeat(32)),a.customerName&&(j.line(`Customer: ${a.customerName}`),a.customerAddress&&j.line(`Address: ${a.customerAddress}`),a.customerContact&&j.line(`Contact: ${a.customerContact}`),j.line(k?"-".repeat(42):"-".repeat(32)));let m=k?[{width:21,align:"left"},{width:1,align:"center"},{width:6,align:"right"},{width:14,align:"right"}]:[{width:12,align:"left"},{width:1,align:"center"},{width:5,align:"right"},{width:14,align:"right"}];j.table(m,[["Item","","Qty","Total"]]),j.line(k?"-".repeat(42):"-".repeat(32));let n=0,o=0;Array.isArray(a.items)&&a.items.forEach(a=>{let b=a.quantity||0,c=a.price||0,d=b*c,e=a.discountAmount??d*(a.discountPercentage||0)/100;if(n+=d,o+=e,j.table(m,[[a.description||"","",String(b),(0,f.formatNumber)(d-e)]]),e>0){let b="amount"===a.discountType?"":`(${a.discountPercentage||0}%)`;j.italic(!0).table([{width:22,align:"left"},{width:10,align:"right"}],[[`  Discount ${b}`,`-${(0,f.formatNumber)(e)}`]]).italic(!1)}j.line(k?"-".repeat(42):"-".repeat(32))});let p=n-o,q=a.taxRate||0,r=q/100*p,s=p+r,t=Array.isArray(a.payments)?a.payments.reduce((a,b)=>a+(Number(b.amount)||0),0):0,u="Installment Sale"===a.paymentStatus&&t>0?t:Number(a.amountPaid)||0,v="Installment Sale"===a.paymentStatus?Math.max(0,s-t):Math.max(0,s-u);j.newline();let w=[{width:14,align:"left"},{width:k?28:18,align:"right"}];j.table(w,[["Subtotal:",`${i} ${(0,f.formatNumber)(n)}`]]),o>0&&j.table(w,[["Total Discount:",`-${i} ${(0,f.formatNumber)(o)}`]]),q>0&&j.table(w,[[`Tax (${q}%):`,`${i} ${(0,f.formatNumber)(r)}`]]),j.bold(!0).table(w,[["TOTAL:",`${i} ${(0,f.formatNumber)(s)}`]]).bold(!1),"Installment Sale"===a.paymentStatus&&j.table(w,[["Amount Paid:",`${i} ${(0,f.formatNumber)(u)}`],["Amount Due:",`${i} ${(0,f.formatNumber)(v)}`]]),j.line(k?"-".repeat(42):"-".repeat(32)),j.text(`Amount in words:
${(0,g.numberToWords)(s)} only
`),j.line(k?"-".repeat(42):"-".repeat(32)),j.raw([29,76,0,0]),j.align("left");let x=b.paymentInfo?(0,h.parsePaymentInfo)(b.paymentInfo):[];return Array.isArray(x)&&x.length>0&&x.forEach(a=>{(a.method||a.accountNumber||a.accountName)&&(j.bold(!0).line(a.method||"").bold(!1),a.accountNumber&&j.line(`Acc: ${a.accountNumber}`),a.accountName&&j.line(`Name: ${a.accountName}`),j.line(k?"-".repeat(42):"-".repeat(32)))}),j.line("Thank you for your business!"),j.size("small").line("Created by Gonza Systems").size("normal"),j.line(k?"=".repeat(42):"=".repeat(32)),j.newline().newline().newline().cut(),j.encode()}[h]=i.then?(await i)():i,a.s(["generateThermalReceipt",()=>j]),c()}catch(a){c(a)}},!1),332696,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(638904),g=a.i(654740),h=a.i(170444),i=a.i(765504),j=a.i(56686),k=a.i(12208),l=a.i(433780),m=a.i(495550),n=a.i(24553),o=a.i(139138),p=a.i(766343),q=a.i(771826),r=a.i(80965),s=a.i(18308),t=a.i(931497),u=a.i(466453),v=a.i(161097),w=a.i(778052),x=a.i(455156),y=a.i(186386),z=b([q,u,w,y]);[q,u,w,y]=z.then?(await z)():z,a.s(["default",0,({sale:b,currency:c,isMobile:z,includePaymentInfo:A=!0})=>{let B,C,D=(0,e.useRef)(null),E=(0,e.useRef)(null),{settings:F,isLoading:G}=(0,q.useBusinessSettings)(),{payments:H}=(0,w.useInstallmentPayments)(b.id),[I,J]=(0,e.useState)("standard"),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(!1),S=(0,s.useIsMobile)();(0,e.useEffect)(()=>{F.defaultPrintFormat&&J(F.defaultPrintFormat),(async()=>{let a=await (0,x.checkBridgeStatus)();R(a)})()},[F.defaultPrintFormat]);let T=()=>{switch(b.paymentStatus){case"Quote":return"QUOTATION";case"Paid":return"SALES RECEIPT";default:return"INVOICE"}},U=()=>{switch(b.paymentStatus){case"Quote":return"Quote #:";case"Paid":return"Receipt #:";case"Installment Sale":return"Installment #:";default:return"Invoice #:"}},V=T(),W=U(),X=b.items.reduce((a,b)=>{let c=b.price*b.quantity,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+(c-d)},0),Y=b.taxRate||0,Z=Y/100*X,$=X+Z,_=H.reduce((a,b)=>a+b.amount,0),aa="Installment Sale"===b.paymentStatus||"Paid"===b.paymentStatus&&_>0?_:b.amountPaid||$,ab="Installment Sale"===b.paymentStatus?Math.max(0,$-_):b.amountDue||0,ac=(0,r.numberToWords)($),ad=Y>0,ae="Installment Sale"===b.paymentStatus,af=F.paymentInfo?(0,q.parsePaymentInfo)(F.paymentInfo):[],ag=A&&af.length>0&&af.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()),ah=c||F.currency;(0,t.isIOS)(),(0,t.isAndroid)();let ai=new Date(b.date),aj=()=>{let a=new Date(b.date),c=new Date,d=F.paymentInfo?(0,q.parsePaymentInfo)(F.paymentInfo):[],e=A&&d.length>0&&d.some(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim());return{documentTitle:T(),documentNumberLabel:U(),receiptNumber:b.receiptNumber,date:(0,k.format)(a,"MMM dd, yyyy"),time:(0,k.format)(c,"hh:mm a"),status:b.paymentStatus,businessName:F.businessName,businessAddress:F.businessAddress,businessPhone:F.businessPhone,businessEmail:F.businessEmail,businessLogo:F.businessLogo,signature:F.signature,customerName:b.customerName,customerAddress:b.customerAddress,customerContact:b.customerContact,items:b.items.map(a=>{let b=a.quantity*a.price,c="amount"===a.discountType?a.discountAmount||0:b*(a.discountPercentage||0)/100;return{description:a.description,quantity:a.quantity,unitPrice:a.price,discountPercentage:a.discountPercentage||0,discountAmount:c,discountType:a.discountType||"percentage",amount:b-c}}),subtotal:X,taxRate:Y,taxAmount:Z,totalAmount:$,amountPaid:aa,amountDue:ab,isInstallmentSale:ae,totalAmountInWords:ac,paymentMethods:e?d.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()):void 0,currency:ah,showTaxRow:ad,hasPaymentInfo:e,notes:b.notes}},ak=async()=>{if(D.current){N(!0);try{v.toast.success("Preparing download...");let c="Quote"===b.paymentStatus?"Quote":"Paid"===b.paymentStatus?"Receipt":"Invoice",d="thermal"===I?`${c}_Thermal-${b.receiptNumber}.pdf`:`${c}-${b.receiptNumber}.pdf`;if("standard"===I){let{generateReceiptVectorPDF:b}=await a.A(916930),c=aj();await b(c,{filename:d,orientation:"portrait",format:"a4",margins:{top:20,right:20,bottom:20,left:20}})}else await (0,i.generatePDF)(D.current,d,{isReceipt:!0});v.toast.success("Receipt downloaded successfully!")}catch(a){console.error("Error downloading receipt:",a),v.toast.error("Failed to download receipt. Please try again.")}finally{N(!1)}}},al=async()=>{P(!0);try{let{generateReceiptVectorPDF:c}=await a.A(916930),d=aj(),e=await c(d,{returnBlob:!0});if(!e)return;let f="Quote"===b.paymentStatus?"Quotation":"Paid"===b.paymentStatus?"Receipt":"Invoice",g=`${f}-${b.receiptNumber}.pdf`,h=new File([e],g,{type:"application/pdf"});navigator.canShare&&navigator.canShare({files:[h]})?(await navigator.share({files:[h],title:`${f} - ${b.receiptNumber}`,text:`${f} #${b.receiptNumber}`}),v.toast.success(`${f} shared successfully!`)):v.toast.error("Sharing not supported on this device.")}catch(a){console.error("Error sharing document:",a),v.toast.error("Failed to share document.")}finally{P(!1)}},am=async()=>{let c="thermal"===I?E.current:D.current;if(c){L(!0);try{if("thermal"===I){let a={...b,payments:H||[]},c=await (0,y.generateThermalReceipt)(a,F,ah),{success:d,message:e}=await (0,x.print)(c,F.defaultPrinterName)||{success:!1,message:"Unknown print error"};d?v.toast.success(e):v.toast.error(e);return}if(v.toast.success("Preparing receipt for printing..."),S){let a="Quote"===b.paymentStatus?"Quotation":"Paid"===b.paymentStatus?"Receipt":"Invoice";(0,j.directPrint)(c,a),v.toast.success("Print dialog opened!")}else{let{generateReceiptVectorPDF:b}=await a.A(916930),c=aj(),d=await b(c,{returnBlob:!0});if(d){let a=URL.createObjectURL(d),b=window.open(a,"_blank");b&&b.addEventListener("load",()=>{setTimeout(()=>{b.focus(),b.print(),b.addEventListener("afterprint",()=>b.close())},500)}),setTimeout(()=>URL.revokeObjectURL(a),3e4)}v.toast.success("Print dialog opened!")}}catch(a){console.error("Error printing receipt:",a),v.toast.error(a?.message||"Failed to print receipt. Please try again.")}finally{L(!1)}}};return G?(0,d.jsxs)("div",{className:`bg-white ${z?"p-2":"p-6"} rounded-lg shadow-md`,children:[(0,d.jsx)("div",{className:"mb-4 flex justify-between items-center flex-wrap",children:(0,d.jsx)("h2",{className:`${z?"text-xl":"text-2xl"} font-bold text-sales-primary`,children:V})}),(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Loading business settings..."})]})})]}):(0,d.jsxs)("div",{className:`bg-white ${z?"p-2":"p-6"} rounded-lg shadow-md`,children:[(0,d.jsxs)("div",{className:"mb-4 flex justify-between items-center flex-wrap",children:[(0,d.jsx)("h2",{className:`${z?"text-xl":"text-2xl"} font-bold text-sales-primary`,children:V}),(0,d.jsxs)("div",{className:"print:hidden flex space-x-2 mt-2 sm:mt-0",children:[!z&&(0,d.jsx)(f.Button,{variant:"default",size:"default",onClick:am,disabled:K||M||O,className:"flex items-center",title:"Print",children:K?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(l.Printer,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:ak,disabled:K||M||O,className:"flex items-center",title:"Download PDF",children:M?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(m.Download,{className:"h-4 w-4"})}),(0,d.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:al,disabled:K||M||O,className:"flex items-center",title:"Share",children:O?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(g.Share2,{className:"h-4 w-4"})}),z&&(0,d.jsx)(f.Button,{variant:"outline",size:z?"sm":"default",onClick:async()=>{let a=navigator.userAgent||"",c=/android/i.test(a),d=!c&&(/iPad|iPhone|iPod/.test(a)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);console.warn("--- MOBILE PRINT START ---"),console.warn("User Agent:",a),console.warn("isAndroid (Direct Check):",c),console.warn("isIOS (Direct Check):",d);let e=`https://ujgxxcgemmfmfsbngnqo.supabase.co/functions/v1/print-receipt?id=${b.id}&${c?"platform=android":d?"platform=ios":"default"}&apikey=`;L(!0);try{console.log("Fetching from:",e);let a=await fetch(e);if(!a.ok){let b=await a.text();throw console.error("Print Function Error:",a.status,b),Error(`Server ${a.status}: ${b||"Bad Request"}`)}let b=await a.json();if(console.log("Data fetched successfully"),c)console.log("Redirecting to Android App using RAW URL..."),window.location.href=`my.bluetoothprint.scheme://${e}`;else if(d){console.log("Redirecting to iOS App (Direct Push)...");let a=encodeURIComponent(JSON.stringify(b));window.location.href=`thermer://print?data=${a}`}else v.toast.error("Mobile printing is optimized for iOS and Android")}catch(a){console.error("Unified Print Error:",a),v.toast.error(a.message||"Failed to prepare receipt")}finally{L(!1),console.warn("--- MOBILE PRINT END ---")}},className:"flex items-center text-blue-600 border-blue-200 hover:bg-blue-50",title:"Print",children:K?(0,d.jsx)(n.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(l.Printer,{className:"h-4 w-4"})})]})]})]}),(0,d.jsx)("div",{className:"mb-4 print:hidden",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("label",{htmlFor:"receipt-type",className:"text-sm font-medium",children:"Receipt Format:"}),(0,d.jsxs)(h.Select,{value:I,onValueChange:a=>J(a),children:[(0,d.jsx)(h.SelectTrigger,{className:"w-48",children:(0,d.jsx)(h.SelectValue,{placeholder:"Select receipt type"})}),(0,d.jsxs)(h.SelectContent,{children:[(0,d.jsx)(h.SelectItem,{value:"standard",children:"Standard Receipt"}),(0,d.jsx)(h.SelectItem,{value:"thermal",children:"Thermal Receipt"})]})]})]})}),(0,d.jsx)("div",{ref:D,children:"thermal"===I?(0,d.jsx)("div",{ref:E,children:(0,d.jsx)(u.default,{sale:b,currency:ah,includePaymentInfo:A})}):(0,d.jsxs)("div",{className:`border-[1.5px] border-black ${z?"p-3":"p-6"} rounded-md`,children:[(0,d.jsx)("div",{className:"flex flex-col items-center mb-4 gap-2 text-center w-full",children:(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("div",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-1",children:F.businessName?.toUpperCase()}),(0,d.jsx)("div",{className:`${z?"text-xs":"text-sm"} text-gray-600 font-medium`,children:F.businessAddress}),(0,d.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600",children:["Phone: ",F.businessPhone," | Email: ",F.businessEmail]})]})}),(0,d.jsx)(p.Separator,{className:"my-3 sm:my-4 border-black border-t-[1.5px]"}),(0,d.jsx)("div",{className:"text-center mb-4",children:(0,d.jsx)("h1",{className:`font-bold ${z?"text-xl":"text-2xl"} uppercase tracking-wider text-gray-900`,children:"Quote"===b.paymentStatus?"QUOTATION":"Paid"===b.paymentStatus?"SALES RECEIPT":"INVOICE"})}),(0,d.jsxs)("div",{className:"flex justify-between mb-4 sm:mb-6 text-sm flex-wrap gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"font-semibold",children:[W," ",b.receiptNumber]}),(0,d.jsxs)("div",{children:["Date: ",(0,k.format)(ai,"MMM dd, yyyy")]})]}),(0,d.jsx)("div",{className:"text-right",children:(0,d.jsx)("div",{className:"font-semibold",children:b.paymentStatus})})]}),(0,d.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2 text-sm",children:"Customer Information:"}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("div",{children:b.customerName}),(0,d.jsx)("div",{children:b.customerAddress}),(0,d.jsx)("div",{children:b.customerContact})]})]}),(0,d.jsxs)("div",{className:"overflow-x-auto",children:[(0,d.jsx)("div",{className:"hidden sm:block",children:(0,d.jsxs)("table",{className:"w-full mb-4 sm:mb-6 text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-black border-b-[1.5px]",children:[(0,d.jsx)("th",{className:"py-2 text-left bg-gray-200 px-2",children:"Description"}),(0,d.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Qty"}),(0,d.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Unit Price"}),(0,d.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Discount"}),(0,d.jsx)("th",{className:"py-2 text-right bg-gray-200 px-2",children:"Amount"})]})}),(0,d.jsx)("tbody",{children:b.items.map((a,b)=>{let c=a.quantity*a.price,e="amount"===a.discountType?a.discountAmount||0:c*(a.discountPercentage||0)/100;return(0,d.jsxs)("tr",{className:"border-b border-black",children:[(0,d.jsx)("td",{className:"py-2 sm:py-3 break-all whitespace-normal",children:a.description}),(0,d.jsx)("td",{className:"py-2 sm:py-3 text-right",children:(0,o.formatNumber)(a.quantity)}),(0,d.jsxs)("td",{className:"py-2 sm:py-3 text-right",children:[ah," ",(0,o.formatNumber)(a.price)]}),(0,d.jsx)("td",{className:"py-2 sm:py-3 text-right",children:"amount"===a.discountType?a.discountAmount&&a.discountAmount>0?`${ah} ${(0,o.formatNumber)(a.discountAmount)}`:"-":(a.discountPercentage||0)>0?`${a.discountPercentage}%`:"-"}),(0,d.jsxs)("td",{className:"py-2 sm:py-3 text-right",children:[ah," ",(0,o.formatNumber)(c-e)]})]},b)})}),(0,d.jsxs)("tfoot",{children:[(B=b.items.reduce((a,b)=>{let c=b.quantity*b.price,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+d},0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("tr",{className:"border-t border-black border-t-[1.5px]",children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:"Subtotal (before discount):"}),(0,d.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(X+B)]})]}),B>0&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-orange-100 px-2",children:"Total Discount:"}),(0,d.jsxs)("td",{className:"py-2 text-right bg-orange-100 px-2",children:["-",ah," ",(0,o.formatNumber)(B)]})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:"Subtotal:"}),(0,d.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(X)]})]})]})),ad&&(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{colSpan:4,className:"py-2 text-right font-medium bg-gray-200 px-2",children:["Tax (",Y,"%):"]}),(0,d.jsxs)("td",{className:"py-2 text-right bg-gray-200 px-2",children:[ah," ",(0,o.formatNumber)(Z)]})]}),(0,d.jsxs)("tr",{className:"border-t border-black border-t-[1.5px] font-bold",children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 sm:py-3 text-right bg-gray-300 px-2",children:"Total:"}),(0,d.jsxs)("td",{className:"py-2 sm:py-3 text-right bg-gray-300 px-2",children:[ah," ",(0,o.formatNumber)($)]})]}),ae&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-blue-100 px-2",children:"Amount Paid:"}),(0,d.jsxs)("td",{className:"py-2 text-right bg-blue-100 px-2",children:[ah," ",(0,o.formatNumber)(aa)]})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:4,className:"py-2 text-right font-medium bg-red-100 px-2",children:"Amount Due:"}),(0,d.jsxs)("td",{className:"py-2 text-right bg-red-100 px-2",children:[ah," ",(0,o.formatNumber)(ab)]})]})]}),(0,d.jsx)("tr",{children:(0,d.jsxs)("td",{colSpan:5,className:"py-2 sm:py-3 text-left border-t border-black px-2 italic",children:[(0,d.jsx)("span",{className:"font-medium",children:"Amount in words:"})," ",ah," ",ac," only"]})})]})]})}),(0,d.jsxs)("div",{className:"block sm:hidden",children:[(0,d.jsx)("div",{className:"border-b-2 border-black mb-2 pb-1 font-bold",children:"Items"}),b.items.map((a,b)=>{let c=a.quantity*a.price,e="amount"===a.discountType?a.discountAmount||0:c*(a.discountPercentage||0)/100;return(0,d.jsxs)("div",{className:"mb-3 border-b border-gray-200 pb-2 last:border-0",children:[(0,d.jsx)("div",{className:"font-bold text-sm mb-1 break-all whitespace-normal",children:a.description}),(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsxs)("div",{className:"text-gray-600",children:[(0,o.formatNumber)(a.quantity)," x ",ah," ",(0,o.formatNumber)(a.price)]}),(0,d.jsxs)("div",{className:"font-bold",children:[ah," ",(0,o.formatNumber)(c-e)]})]}),e>0&&(0,d.jsxs)("div",{className:"flex justify-between text-xs text-orange-600 italic mt-0.5",children:[(0,d.jsxs)("span",{children:["Discount ","percentage"===a.discountType?`(${a.discountPercentage}%)`:""]}),(0,d.jsxs)("span",{children:["-",ah," ",(0,o.formatNumber)(e)]})]})]},b)}),(0,d.jsxs)("div",{className:"mt-4 border-t-2 border-black pt-2 space-y-1",children:[(C=b.items.reduce((a,b)=>{let c=b.quantity*b.price,d="amount"===b.discountType?b.discountAmount||0:c*(b.discountPercentage||0)/100;return a+d},0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"font-medium",children:"Subtotal (before disc):"}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(X+C)]})]}),C>0&&(0,d.jsxs)("div",{className:"flex justify-between text-sm text-orange-600",children:[(0,d.jsx)("span",{className:"font-medium",children:"Total Discount:"}),(0,d.jsxs)("span",{children:["-",ah," ",(0,o.formatNumber)(C)]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"font-medium",children:"Subtotal:"}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(X)]})]})]})),ad&&(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsxs)("span",{className:"font-medium",children:["Tax (",Y,"%):"]}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(Z)]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-base font-bold border-t border-black pt-1 mt-1",children:[(0,d.jsx)("span",{children:"Total:"}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)($)]})]}),ae&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm text-blue-600 pt-1",children:[(0,d.jsx)("span",{className:"font-medium",children:"Amount Paid:"}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(aa)]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,d.jsx)("span",{className:"font-medium",children:"Amount Due:"}),(0,d.jsxs)("span",{children:[ah," ",(0,o.formatNumber)(ab)]})]})]}),(0,d.jsxs)("div",{className:"pt-2 text-xs italic border-t border-gray-200 mt-2",children:[(0,d.jsx)("span",{className:"font-medium",children:"Words:"})," ",ah," ",ac," only"]})]})]})]}),ag&&(0,d.jsxs)("div",{className:"mt-4 pt-3 border-t border-black",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm mb-2",children:"Payment Information:"}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-gray-200",children:[(0,d.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Payment Method"}),(0,d.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Account Number"}),(0,d.jsx)("th",{className:"font-medium py-1 px-2 text-left",children:"Account Name"})]})}),(0,d.jsx)("tbody",{children:af.filter(a=>""!==a.method.trim()||""!==a.accountNumber.trim()||""!==a.accountName.trim()).map((a,b)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"py-1 px-2 font-medium",children:a.method}),(0,d.jsx)("td",{className:"py-1 px-2",children:a.accountNumber}),(0,d.jsx)("td",{className:"py-1 px-2",children:a.accountName})]},b))})]})})]}),b.notes&&(0,d.jsxs)("div",{className:"mt-4 pt-3 border-t border-black",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm mb-2",children:"Notes:"}),(0,d.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:b.notes})]}),(0,d.jsxs)("div",{className:"text-center text-xs sm:text-sm mt-4 sm:mt-8",children:[(0,d.jsx)("p",{className:"font-medium",children:"Thank you for your business!"}),(0,d.jsx)("p",{className:"text-gray-600 text-xs mt-3",children:"Created by Gonza Systems"})]})]})})]})}]),c()}catch(a){c(a)}},!1),824400,a=>{"use strict";a.s(["Corner",()=>c,"Root",()=>d,"ScrollArea",()=>e,"ScrollAreaCorner",()=>f,"ScrollAreaScrollbar",()=>g,"ScrollAreaThumb",()=>h,"ScrollAreaViewport",()=>i,"Scrollbar",()=>j,"Thumb",()=>k,"Viewport",()=>l,"createScrollAreaScope",()=>m]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Corner() from the server but Corner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","Corner"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","Root"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollArea() from the server but ScrollArea is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","ScrollArea"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaCorner() from the server but ScrollAreaCorner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","ScrollAreaCorner"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaScrollbar() from the server but ScrollAreaScrollbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","ScrollAreaScrollbar"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaThumb() from the server but ScrollAreaThumb is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","ScrollAreaThumb"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaViewport() from the server but ScrollAreaViewport is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","ScrollAreaViewport"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call Scrollbar() from the server but Scrollbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","Scrollbar"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call Thumb() from the server but Thumb is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","Thumb"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call Viewport() from the server but Viewport is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","Viewport"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call createScrollAreaScope() from the server but createScrollAreaScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs <module evaluation>","createScrollAreaScope")},283662,a=>{"use strict";a.s(["Corner",()=>c,"Root",()=>d,"ScrollArea",()=>e,"ScrollAreaCorner",()=>f,"ScrollAreaScrollbar",()=>g,"ScrollAreaThumb",()=>h,"ScrollAreaViewport",()=>i,"Scrollbar",()=>j,"Thumb",()=>k,"Viewport",()=>l,"createScrollAreaScope",()=>m]);var b=a.i(211857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Corner() from the server but Corner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","Corner"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","Root"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollArea() from the server but ScrollArea is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","ScrollArea"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaCorner() from the server but ScrollAreaCorner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","ScrollAreaCorner"),g=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaScrollbar() from the server but ScrollAreaScrollbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","ScrollAreaScrollbar"),h=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaThumb() from the server but ScrollAreaThumb is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","ScrollAreaThumb"),i=(0,b.registerClientReference)(function(){throw Error("Attempted to call ScrollAreaViewport() from the server but ScrollAreaViewport is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","ScrollAreaViewport"),j=(0,b.registerClientReference)(function(){throw Error("Attempted to call Scrollbar() from the server but Scrollbar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","Scrollbar"),k=(0,b.registerClientReference)(function(){throw Error("Attempted to call Thumb() from the server but Thumb is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","Thumb"),l=(0,b.registerClientReference)(function(){throw Error("Attempted to call Viewport() from the server but Viewport is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","Viewport"),m=(0,b.registerClientReference)(function(){throw Error("Attempted to call createScrollAreaScope() from the server but createScrollAreaScope is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@radix-ui/react-scroll-area/dist/index.mjs","createScrollAreaScope")},177664,a=>{"use strict";a.i(824400);var b=a.i(283662);a.n(b)},376671,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(177664),e=a.i(139138);let f=c.forwardRef(({className:a,children:c,...f},h)=>(0,b.jsxs)(d.Root,{ref:h,className:(0,e.cn)("relative overflow-hidden",a),...f,children:[(0,b.jsx)(d.Viewport,{className:"h-full w-full rounded-[inherit]",children:c}),(0,b.jsx)(g,{}),(0,b.jsx)(d.Corner,{})]}));f.displayName=d.Root.displayName;let g=c.forwardRef(({className:a,orientation:c="vertical",...f},g)=>(0,b.jsx)(d.ScrollAreaScrollbar,{ref:g,orientation:c,className:(0,e.cn)("flex touch-none select-none transition-colors","vertical"===c&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===c&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...f,children:(0,b.jsx)(d.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));g.displayName=d.ScrollAreaScrollbar.displayName,a.s(["ScrollArea",()=>f])},69423,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(352817),f=a.i(713003),g=a.i(332696),h=a.i(18308),i=a.i(9497),j=a.i(376671),k=b([g]);[g]=k.then?(await k)():k,a.s(["default",0,({isOpen:a,sale:b,currency:c,onOpenChange:k,includePaymentInfo:l=!0})=>(0,h.useIsMobile)()?(0,d.jsx)(f.Drawer,{open:a,onOpenChange:k,children:(0,d.jsx)(f.DrawerContent,{className:"max-h-[85vh]",children:(0,d.jsxs)("div",{className:"relative px-4 py-6 pb-8",children:[(0,d.jsxs)(f.DrawerClose,{className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,d.jsx)(i.X,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,d.jsx)(j.ScrollArea,{className:"h-[75vh] pr-4 pb-4",children:b&&(0,d.jsx)(g.default,{sale:b,currency:c,isMobile:!0,includePaymentInfo:l})})]})})}):(0,d.jsx)(e.Dialog,{open:a,onOpenChange:k,children:(0,d.jsx)(e.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:(0,d.jsx)(j.ScrollArea,{className:"h-[80vh] pr-4",children:b&&(0,d.jsx)(g.default,{sale:b,currency:c,includePaymentInfo:l})})})})]),c()}catch(a){c(a)}},!1),244745,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(69423),f=b([e]);[e]=f.then?(await f)():f,a.s(["default",0,({selectedSale:a,isOpen:b,onOpenChange:c,currency:f})=>a?(0,d.jsx)(e.default,{sale:a,isOpen:b,onOpenChange:c,currency:f}):null]),c()}catch(a){c(a)}},!1),752132,a=>{"use strict";let b=(0,a.i(701269).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],752132)},639529,a=>{"use strict";let b=(0,a.i(701269).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);a.s(["Trophy",()=>b],639529)},549442,a=>{"use strict";let b=(0,a.i(701269).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);a.s(["Target",()=>b],549442)},920341,a=>{"use strict";let b=(0,a.i(701269).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>b],920341)},536865,a=>{"use strict";let b=(0,a.i(701269).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],536865)},793060,a=>{"use strict";var b=a.i(134318);a.s(["CalendarIcon",()=>b.default])},205780,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(635330),g=a.i(638904),h=a.i(850931),i=a.i(745310),j=a.i(379643),k=a.i(170444),l=a.i(580178),m=a.i(751066),n=a.i(318201),o=a.i(18308),p=a.i(336361),q=a.i(911070),r=a.i(752132),s=a.i(639529);a.i(549442);var t=a.i(920341),u=a.i(737229),v=a.i(884254),w=a.i(330215),x=a.i(9497),y=a.i(536865),z=a.i(793060),A=a.i(161097),B=a.i(12208),C=a.i(48461),D=a.i(532123),E=a.i(380865),F=a.i(380040),G=a.i(95805),H=a.i(798794),I=a.i(961628),J=a.i(140847),K=a.i(431290),L=a.i(349764),M=a.i(907950),N=a.i(139138),O=a.i(588262),P=b([n,O]);[n,O]=P.then?(await P)():P,a.s(["default",0,({sales:a,formatCurrency:b})=>{let{canViewProfit:c}=(0,O.useFinancialVisibility)(),{categories:P,createCategory:Q,updateCategory:R,deleteCategory:S}=(0,n.useSalesCategories)(),T=(0,o.useIsMobile)(),[U,V]=(0,e.useState)(null),[W,X]=(0,e.useState)(""),[Y,Z]=(0,e.useState)(""),[$,_]=(0,e.useState)(!1),[aa,ab]=(0,e.useState)(null),[ac,ad]=(0,e.useState)(!1),[ae,af]=(0,e.useState)(!1),[ag,ah]=(0,e.useState)("all-time"),[ai,aj]=(0,e.useState)(),[ak,al]=(0,e.useState)(),[am,an]=(0,e.useState)(),ao=(0,e.useMemo)(()=>{let b=a,c=(a=>{let b=new Date;switch(a){case"today":return{start:(0,C.startOfDay)(b),end:(0,D.endOfDay)(b)};case"yesterday":let c=(0,K.subDays)(b,1);return{start:(0,C.startOfDay)(c),end:(0,D.endOfDay)(c)};case"this-week":return{start:(0,E.startOfWeek)(b),end:(0,F.endOfWeek)(b)};case"last-week":let d=(0,E.startOfWeek)((0,L.subWeeks)(b,1)),e=(0,F.endOfWeek)((0,L.subWeeks)(b,1));return{start:d,end:e};case"this-month":return{start:(0,G.startOfMonth)(b),end:(0,H.endOfMonth)(b)};case"last-month":let f=(0,G.startOfMonth)((0,M.subMonths)(b,1)),g=(0,H.endOfMonth)((0,M.subMonths)(b,1));return{start:f,end:g};case"this-year":return{start:(0,I.startOfYear)(b),end:(0,J.endOfYear)(b)};case"specific-date":if(am)return{start:(0,C.startOfDay)(am),end:(0,D.endOfDay)(am)};return null;case"custom-range":if(ai&&ak)return{start:(0,C.startOfDay)(ai),end:(0,D.endOfDay)(ak)};if(ai)return{start:(0,C.startOfDay)(ai),end:(0,D.endOfDay)(b)};if(ak)return{start:(0,C.startOfDay)(new Date(0)),end:(0,D.endOfDay)(ak)};return null;default:return null}})(ag);c&&(b=a.filter(a=>{let b=new Date(a.date);return b>=c.start&&b<=c.end}));let d=P.map(a=>{let c=b.filter(b=>b.categoryId===a.id),d=c.reduce((a,b)=>{let c=b.items.reduce((a,b)=>a+b.quantity*b.price,0);return a+c},0),e=c.reduce((a,b)=>a+(b.profit||0),0),f=c.length;return{name:a.name,revenue:d,profit:e,transactions:f,averageValue:f>0?d/f:0}}),e=b.filter(a=>!a.categoryId);if(e.length>0){let a=e.reduce((a,b)=>{let c=b.items.reduce((a,b)=>a+b.quantity*b.price,0);return a+c},0),b=e.reduce((a,b)=>a+(b.profit||0),0),c=e.length;d.push({name:"Uncategorized",revenue:a,profit:b,transactions:c,averageValue:c>0?a/c:0})}return d.sort((a,b)=>b.revenue-a.revenue)},[a,P,ag,ai,ak,am]);(0,e.useMemo)(()=>ao.filter(a=>a.revenue>0).map((a,b)=>({...a,fill:`hsl(var(--chart-${b%5+1}))`})),[ao]);let ap=async()=>{if(U&&W.trim())try{await R(U,W.trim()),V(null),X(""),A.toast.success("Category updated successfully")}catch(a){A.toast.error("Failed to update category")}},aq=()=>{V(null),X("")},ar=async()=>{if(aa){af(!0);try{await S(aa.id),A.toast.success("Category deleted successfully"),_(!1),ab(null)}catch(a){A.toast.error("Failed to delete category")}finally{af(!1)}}},as=async()=>{if(Y.trim()){ad(!0);try{await Q(Y.trim()),Z(""),A.toast.success("Category created successfully")}catch(a){A.toast.error("Failed to create category")}finally{ad(!1)}}};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(f.Card,{className:"shadow-sm",children:[(0,d.jsxs)(f.CardHeader,{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(y.Settings,{className:"w-5 h-5 text-primary"}),"Manage Sales Sources"]}),(0,d.jsx)(f.CardDescription,{children:"Create, edit, or delete sales sources"})]}),(0,d.jsx)(f.CardContent,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex gap-2 p-3 bg-muted/30 rounded-lg",children:[(0,d.jsx)(h.Input,{placeholder:"Enter New Sales Source",value:Y,onChange:a=>Z(a.target.value),onKeyDown:a=>"Enter"===a.key&&as(),className:"flex-1"}),(0,d.jsx)(g.Button,{onClick:as,disabled:!Y.trim()||ac,size:"sm",className:"shrink-0",children:ac?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 mr-1 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Adding..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.Plus,{className:"w-4 h-4 mr-1"}),"Add"]})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[P.map(a=>(0,d.jsx)("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-background hover:bg-muted/20 transition-colors",children:U===a.id?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.Input,{value:W,onChange:a=>X(a.target.value),onKeyDown:a=>{"Enter"===a.key&&ap(),"Escape"===a.key&&aq()},className:"flex-1",autoFocus:!0}),(0,d.jsx)(g.Button,{size:"sm",variant:"outline",onClick:ap,children:(0,d.jsx)(w.Check,{className:"w-4 h-4"})}),(0,d.jsx)(g.Button,{size:"sm",variant:"outline",onClick:aq,children:(0,d.jsx)(x.X,{className:"w-4 h-4"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"flex-1 font-medium",children:a.name}),(0,d.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>{V(a.id),X(a.name)},children:(0,d.jsx)(t.Edit2,{className:"w-4 h-4"})}),(0,d.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>{ab(a),_(!0)},className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:(0,d.jsx)(u.Trash2,{className:"w-4 h-4"})})]})},a.id)),0===P.length&&(0,d.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No sources found. Create your first source above."})]})]})})]}),(0,d.jsxs)(f.Card,{className:"shadow-sm",children:[(0,d.jsxs)(f.CardHeader,{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(z.CalendarIcon,{className:"w-5 h-5 text-primary"}),"Date Filter"]}),(0,d.jsx)(f.CardDescription,{children:"Filter source performance by time period"})]}),(0,d.jsxs)(f.CardContent,{children:[(0,d.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Time Period"}),(0,d.jsxs)(k.Select,{value:ag,onValueChange:ah,children:[(0,d.jsx)(k.SelectTrigger,{className:"w-full",children:(0,d.jsx)(k.SelectValue,{placeholder:"Select time period"})}),(0,d.jsxs)(k.SelectContent,{className:"bg-background border shadow-lg z-50",children:[(0,d.jsx)(k.SelectItem,{value:"today",children:"Today"}),(0,d.jsx)(k.SelectItem,{value:"yesterday",children:"Yesterday"}),(0,d.jsx)(k.SelectItem,{value:"this-week",children:"This Week"}),(0,d.jsx)(k.SelectItem,{value:"last-week",children:"Last Week"}),(0,d.jsx)(k.SelectItem,{value:"this-month",children:"This Month"}),(0,d.jsx)(k.SelectItem,{value:"last-month",children:"Last Month"}),(0,d.jsx)(k.SelectItem,{value:"this-year",children:"This Year"}),(0,d.jsx)(k.SelectItem,{value:"all-time",children:"All Time"}),(0,d.jsx)(k.SelectItem,{value:"specific-date",children:"Specific Date"}),(0,d.jsx)(k.SelectItem,{value:"custom-range",children:"Custom Range"})]})]})]})}),"custom-range"===ag&&(0,d.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"From Date"}),(0,d.jsxs)(m.Popover,{children:[(0,d.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:(0,N.cn)("w-full justify-start text-left font-normal",!ai&&"text-muted-foreground"),children:[(0,d.jsx)(z.CalendarIcon,{className:"mr-2 h-4 w-4"}),ai?(0,B.format)(ai,"PPP"):(0,d.jsx)("span",{children:"Pick start date"})]})}),(0,d.jsx)(m.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,d.jsx)(l.Calendar,{mode:"single",selected:ai,onSelect:aj,initialFocus:!0,className:(0,N.cn)("p-3 pointer-events-auto")})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"To Date"}),(0,d.jsxs)(m.Popover,{children:[(0,d.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:(0,N.cn)("w-full justify-start text-left font-normal",!ak&&"text-muted-foreground"),children:[(0,d.jsx)(z.CalendarIcon,{className:"mr-2 h-4 w-4"}),ak?(0,B.format)(ak,"PPP"):(0,d.jsx)("span",{children:"Pick end date"})]})}),(0,d.jsx)(m.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,d.jsx)(l.Calendar,{mode:"single",selected:ak,onSelect:al,initialFocus:!0,className:(0,N.cn)("p-3 pointer-events-auto")})})]})]})]}),"specific-date"===ag&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Select Date"}),(0,d.jsxs)(m.Popover,{children:[(0,d.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:(0,N.cn)("w-full sm:w-64 justify-start text-left font-normal",!am&&"text-muted-foreground"),children:[(0,d.jsx)(z.CalendarIcon,{className:"mr-2 h-4 w-4"}),am?(0,B.format)(am,"PPP"):(0,d.jsx)("span",{children:"Pick a date"})]})}),(0,d.jsx)(m.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,d.jsx)(l.Calendar,{mode:"single",selected:am,onSelect:an,initialFocus:!0,className:(0,N.cn)("p-3 pointer-events-auto")})})]})]}),"all-time"!==ag&&(0,d.jsx)("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing results for: ",(0,d.jsx)("span",{className:"font-medium",children:"today"===ag?"Today":"yesterday"===ag?"Yesterday":"this-week"===ag?"This Week":"last-week"===ag?"Last Week":"this-month"===ag?"This Month":"last-month"===ag?"Last Month":"this-year"===ag?"This Year":"specific-date"===ag&&am?(0,B.format)(am,"PPP"):"custom-range"===ag&&ai&&ak?`${(0,B.format)(ai,"PPP")} to ${(0,B.format)(ak,"PPP")}`:"custom-range"===ag&&ai?`From ${(0,B.format)(ai,"PPP")}`:"custom-range"===ag&&ak?`Until ${(0,B.format)(ak,"PPP")}`:"Custom Period"})]})})]})]}),(0,d.jsxs)(f.Card,{className:"shadow-sm",children:[(0,d.jsxs)(f.CardHeader,{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(s.Trophy,{className:"w-5 h-5 text-primary"}),"Source Rankings"]}),(0,d.jsx)(f.CardDescription,{children:"Best performing sources ranked by revenue"})]}),(0,d.jsx)(f.CardContent,{children:ao.length>0?T?(0,d.jsx)("div",{className:"space-y-3",children:ao.map((a,e)=>(0,d.jsx)(f.Card,{className:"border border-border bg-card",children:(0,d.jsxs)(f.CardContent,{className:"p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:e+1}),(0,d.jsx)("h3",{className:"font-semibold text-lg",children:a.name})]}),(0,d.jsx)(s.Trophy,{className:"w-5 h-5 text-primary"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted/30 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(q.DollarSign,{className:"w-4 h-4 text-green-600"}),(0,d.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"})]}),(0,d.jsx)("span",{className:"font-semibold",children:b(a.revenue)})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted/30 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(p.TrendingUp,{className:"w-4 h-4 text-blue-600"}),(0,d.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Profit"})]}),(0,d.jsx)("span",{className:"font-semibold",children:c?b(a.profit):""})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted/30 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.ShoppingCart,{className:"w-4 h-4 text-purple-600"}),(0,d.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Number of Sales"})]}),(0,d.jsx)("span",{className:"font-semibold",children:a.transactions})]})]})]})},a.name))}):(0,d.jsxs)(i.Table,{children:[(0,d.jsx)(i.TableHeader,{children:(0,d.jsxs)(i.TableRow,{children:[(0,d.jsx)(i.TableHead,{className:"w-12",children:"#"}),(0,d.jsx)(i.TableHead,{children:"Source Name"}),(0,d.jsx)(i.TableHead,{className:"text-right",children:"Total Revenue"}),(0,d.jsx)(i.TableHead,{className:"text-right",children:"Total Profit"}),(0,d.jsx)(i.TableHead,{className:"text-right",children:"Number of Sales"})]})}),(0,d.jsx)(i.TableBody,{children:ao.map((a,e)=>(0,d.jsxs)(i.TableRow,{children:[(0,d.jsx)(i.TableCell,{className:"font-medium",children:(0,d.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:e+1})}),(0,d.jsx)(i.TableCell,{className:"font-medium",children:a.name}),(0,d.jsx)(i.TableCell,{className:"text-right font-mono",children:b(a.revenue)}),(0,d.jsx)(i.TableCell,{className:"text-right font-mono",children:c?b(a.profit):""}),(0,d.jsx)(i.TableCell,{className:"text-right",children:a.transactions})]},a.name))})]}):(0,d.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No performance data available"})})]}),(0,d.jsx)(j.AlertDialog,{open:$,onOpenChange:_,children:(0,d.jsxs)(j.AlertDialogContent,{children:[(0,d.jsxs)(j.AlertDialogHeader,{children:[(0,d.jsx)(j.AlertDialogTitle,{children:"Delete Source"}),(0,d.jsxs)(j.AlertDialogDescription,{children:['Are you sure you want to delete the source "',aa?.name,'"? This action cannot be undone. All sales in this source will be moved to "Uncategorized".']})]}),(0,d.jsxs)(j.AlertDialogFooter,{children:[(0,d.jsx)(j.AlertDialogCancel,{onClick:()=>ab(null),children:"Cancel"}),(0,d.jsx)(j.AlertDialogAction,{onClick:ar,disabled:ae,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:ae?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete Source"})]})]})})]})}]),c()}catch(a){c(a)}},!1),532636,a=>{"use strict";var b=a.i(907997),c=a.i(745310),d=a.i(819637),e=a.i(12208),f=a.i(737229),g=a.i(701269);let h=(0,g.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),i=(0,g.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["DeletedSalesTable",0,({sales:a,isLoading:g,currency:j="UGX"})=>g?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Loading deleted sales history..."})]}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 border rounded-lg bg-muted/20",children:[(0,b.jsx)(f.Trash2,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-20 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Deleted Sales history is empty"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Deleted sales logs will appear here."})]}):(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden bg-white",children:(0,b.jsxs)(c.Table,{children:[(0,b.jsx)(c.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(c.TableRow,{children:[(0,b.jsx)(c.TableHead,{children:"Receipt #"}),(0,b.jsx)(c.TableHead,{children:"Customer"}),(0,b.jsx)(c.TableHead,{children:"Items"}),(0,b.jsx)(c.TableHead,{className:"text-right",children:"Total Qty"}),(0,b.jsx)(c.TableHead,{className:"text-right",children:"Total Amount"}),(0,b.jsx)(c.TableHead,{children:"Deleted At"}),(0,b.jsx)(c.TableHead,{children:"Deleted By"})]})}),(0,b.jsx)(c.TableBody,{children:a.map(a=>(0,b.jsxs)(c.TableRow,{className:"hover:bg-muted/30",children:[(0,b.jsx)(c.TableCell,{className:"font-mono font-medium",children:a.receiptNumber}),(0,b.jsx)(c.TableCell,{children:a.customerName}),(0,b.jsx)(c.TableCell,{children:(0,b.jsx)("div",{className:"max-w-[250px]",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.items.map((a,c)=>{let e=a.quantity??a.qty??0;return(0,b.jsxs)(d.Badge,{variant:"outline",className:"text-[10px] py-0 h-4 bg-muted/30",children:[e,"x ",a.description]},c)})})})}),(0,b.jsx)(c.TableCell,{className:"text-right font-medium",children:a.totalQuantity}),(0,b.jsxs)(c.TableCell,{className:"text-right font-semibold",children:[j," ",a.amount.toLocaleString()]}),(0,b.jsx)(c.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(i,{className:"h-3 w-3"}),(0,e.format)(new Date(a.deletedAt),"MMM d, h:mm a")]})}),(0,b.jsx)(c.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs",children:[(0,b.jsx)(h,{className:"h-3 w-3 text-muted-foreground"}),a.deletedBy]})})]},a.id))})]})})],532636)},206480,a=>a.a(async(b,c)=>{try{var d=a.i(533039),e=b([d]);[d]=e.then?(await e)():e,a.s(["useCurrentUser",0,()=>{let{user:a}=(0,d.useAuth)();return{userId:a?.id}}]),c()}catch(a){c(a)}},!1),864769,a=>a.a(async(b,c)=>{try{var d=a.i(878274),e=a.i(206480),f=a.i(431886),g=a.i(771091),h=b([d,e,f,g]);[d,e,f,g]=h.then?(await h)():h,a.s(["useActivityLogger",0,()=>{let{userId:a}=(0,e.useCurrentUser)(),{currentBusiness:b}=(0,f.useBusiness)(),c=null;try{let{currentProfile:a}=(0,g.useProfiles)();c=a}catch{c=null}return{logActivity:async e=>{if(!a||!b?.id)return void console.warn("Cannot log activity: missing user or business context");try{let f=await (0,d.logActivityAction)({userId:a,locationId:b.id,activityType:e.activityType,module:e.module,entityType:e.entityType,entityId:e.entityId||void 0,entityName:e.entityName,description:e.description,metadata:e.metadata||void 0,profileId:c?.id||void 0,profileName:c?.profile_name||void 0});f.success||console.error("Error logging activity:",f.error)}catch(a){console.error("Failed to log activity:",a)}}}}]),c()}catch(a){c(a)}},!1),155071,a=>a.a(async(b,c)=>{try{var d=a.i(283866),e=a.i(161097),f=a.i(500638),g=b([d]);[d]=g.then?(await g)():g,a.s(["useInventoryActions",0,a=>{let{updateProductsBulk:b}=(0,d.useProducts)(a),c=async(a,b)=>{if(!a.length)return[];try{return await (0,f.getProductsByIdsAction)(a,b)}catch(a){throw console.error("Error fetching fresh products:",a),a}},g=async(d,f,g,h,i)=>{if(!a)return!1;try{let j=d.filter(a=>a.productId);if(0===j.length)return!0;let k=[...new Set(j.map(a=>a.productId))],l=await c(k,i);if(0===l.length)return!1;let m=new Map;for(let a of j){let b=m.get(a.productId)||0;m.set(a.productId,b+a.quantity)}let n=[];for(let[a,b]of m.entries()){let c=l.find(b=>b.id===a);if(!c)continue;let d=c.quantity-b;n.push({id:a,updated:{...c,quantity:d}}),d<0&&e.toast.warning(`${c.name} inventory is now negative (${d}). Please restock soon.`)}return n.length>0&&await b(n,a,"Sale",f,g,h),!0}catch(a){return console.error("Error deducting stock for sale:",a),!1}},h=async(d,e,f,g)=>{if(!a)return!1;try{let h=d.filter(a=>a.productId);if(0===h.length)return!0;let i=[...new Set(h.map(a=>a.productId))],j=await c(i,g),k=new Map;for(let a of h){let b=k.get(a.productId)||0;k.set(a.productId,b+a.quantity)}let l=[];for(let[a,b]of k.entries()){let c=j.find(b=>b.id===a);if(!c)continue;let d=c.quantity+b;l.push({id:a,updated:{...c,quantity:d}})}return l.length>0&&await b(l,a,"Deleted Sale",e,void 0,f),!0}catch(a){return console.error("Error restoring stock for sale:",a),!1}},i=async(d,f,g,h,i,j)=>{if(!a)return!1;try{let k=[...d.filter(a=>a.productId).map(a=>a.productId),...f.filter(a=>a.productId).map(a=>a.productId)],l=[...new Set(k)];if(0===l.length)return!0;let m=await c(l,j),n=new Map;for(let a of d.filter(a=>a.productId)){let b=n.get(a.productId)||0;n.set(a.productId,b+a.quantity)}for(let a of f.filter(a=>a.productId)){let b=n.get(a.productId)||0;n.set(a.productId,b-a.quantity)}let o=[];for(let[a,b]of n.entries()){if(0===b)continue;let c=m.find(b=>b.id===a);if(!c)continue;let d=c.quantity+b;o.push({id:a,updated:{...c,quantity:d}}),d<0&&e.toast.warning(`${c.name} inventory is now negative (${d}). Please restock soon.`)}return o.length>0&&await b(o,a,"Sale Status/Qty Edit",g,h,i),!0}catch(a){return console.error("Error adjusting stock for edited sale:",a),!1}};return{deductStockForSale:g,restoreStockForSale:h,adjustStockForEditedSale:i}}]),c()}catch(a){c(a)}},!1),434456,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(257288),f=a.i(857396),g=a.i(511633),h=a.i(784278),i=a.i(864769),j=a.i(431886),k=a.i(155071),l=a.i(449197),m=a.i(971358),n=b([i,j,k,m]);[i,j,k,m]=n.then?(await n)():n,a.s(["useSalesData",0,(a,b="desc",c)=>{let n=(0,h.useQueryClient)(),{toast:o}=(0,f.useToast)(),{logActivity:p}=(0,i.useActivityLogger)(),{currentBusiness:q}=(0,j.useBusiness)(),{restoreStockForSale:r}=(0,k.useInventoryActions)(a),s=(0,d.useCallback)(async()=>{try{if(!a||!q)return[];let d=await (0,m.getSalesAction)(q.id,b,c);return d?d.map(a=>{let b={id:a.id,user_id:a.user_id,location_id:a.location_id,receipt_number:a.receipt_number,customer_name:a.customer_name,customer_address:a.customer_address,customer_contact:a.customer_contact,customer_id:a.customer_id,items:a.items,payment_status:a.payment_status,profit:a.profit?Number(a.profit):0,date:a.date,tax_rate:a.tax_rate||0,created_at:a.created_at,updated_at:a.updated_at,cash_transaction_id:a.cash_transaction_id,amount_paid:a.amount_paid?Number(a.amount_paid):void 0,amount_due:a.amount_due?Number(a.amount_due):void 0,category_id:a.category_id,notes:a.notes};return(0,e.mapDbSaleToSale)(b)}):[]}catch(a){return console.error("Error loading sales:",a),o({title:"Error",description:"Failed to load sales data. Please try again.",variant:"destructive"}),[]}},[a,q?.id,b,c,o]),t=(0,d.useMemo)(()=>["sales",q?.id,a],[q?.id,a]),u=(0,d.useMemo)(()=>[...t,b,c],[t,b,c]),{data:v=[],isLoading:w,isFetching:x,refetch:y}=(0,g.useQuery)({queryKey:u,queryFn:s,enabled:!!a&&!!q?.id,staleTime:3e4,gcTime:18e5,refetchOnWindowFocus:!0,refetchOnReconnect:!0}),z=w||x&&0===v.length,A=(0,d.useMemo)(()=>{let a=v.filter(a=>"Quote"!==a.paymentStatus),b=new Map;return a.forEach(a=>{let c=a.customerName,d=a.items.reduce((a,b)=>a+b.price*b.quantity,0);if(b.has(c)){let e=b.get(c);b.set(c,{total:e.total+d,count:e.count+1,customerId:e.customerId||a.customerId})}else b.set(c,{total:d,count:1,customerId:a.customerId})}),Array.from(b.entries()).map(([a,b])=>({id:b.customerId,name:a,totalPurchases:b.total,orderCount:b.count})).sort((a,b)=>b.totalPurchases-a.totalPurchases)},[v]),B=(0,d.useMemo)(()=>a=>{let b=v.filter(b=>b.customerName.toLowerCase()===a.toLowerCase()&&"Quote"!==b.paymentStatus);return{total:b.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.price*b.quantity,0),0),count:b.length}},[v]),C=async a=>{try{let b=v.find(b=>b.id===a);if(!b)throw Error("Sale not found");if("Quote"!==b.paymentStatus&&b.items.length>0&&(console.log("Restoring product quantities via useInventoryActions..."),await r(b.items,a,b.receiptNumber,q?.id)||o({title:"Inventory Update Warning",description:"Sale deleted, but inventory restoration might have failed. Please check your stock levels.",variant:"destructive"})),!q?.id)throw Error("Business context missing for deletion");let c=await (0,m.deleteSaleAction)(a,q.id);if(!c.success)throw Error(c.error);return n.setQueryData(u,b=>b?b.filter(b=>b.id!==a):[]),n.invalidateQueries({queryKey:t}),D(),await p({activityType:"DELETE",module:"SALES",entityType:"sale",entityId:a,entityName:`Sale #${b.receiptNumber}`,description:`Deleted sale for ${b.customerName} - Total: UGX ${((b.amountPaid||0)+(b.amountDue||0)).toLocaleString()} (Stock restored)`,metadata:{receiptNumber:b.receiptNumber,customerName:b.customerName,customerAddress:b.customerAddress,customerContact:b.customerContact,totalAmount:(b.amountPaid||0)+(b.amountDue||0),amountPaid:b.amountPaid,profit:b.profit,paymentStatus:b.paymentStatus,taxRate:b.taxRate,itemCount:b.items.length,items:b.items.map(a=>({description:a.description,quantity:a.quantity,price:a.price,cost:a.cost,total:a.quantity*a.price,discountPercentage:a.discountPercentage,discountAmount:a.discountAmount})),notes:b.notes,cashTransactionDeleted:!!b.cashTransactionId}}),o({title:"Sale Deleted",description:"The sale record and associated data have been successfully deleted."}),(0,l.clearInventoryCaches)(),!0}catch(a){return console.error("Error deleting sale:",a),o({title:"Error",description:"Failed to delete sale. Please try again.",variant:"destructive"}),!1}},D=(0,d.useCallback)(()=>{if(!q?.id)return;let a=`soldItemsFilters_${q.id}`;localStorage.removeItem(a),localStorage.removeItem("soldItemsFilters")},[q?.id]),E=(0,d.useCallback)(a=>{n.setQueryData(u,b=>b?[a,...b]:[a]),n.invalidateQueries({queryKey:t}),D(),(0,l.clearInventoryCaches)()},[n,u,t,D,l.clearInventoryCaches]),F=(0,d.useCallback)(a=>{n.setQueryData(u,b=>b?b.map(b=>b.id===a.id?a:b):[a]),n.invalidateQueries({queryKey:t}),D(),(0,l.clearInventoryCaches)()},[n,u,t,D,l.clearInventoryCaches]);return{sales:v,isLoading:z,deleteSale:C,addSale:E,updateSale:F,getTopCustomers:A,getCustomerLifetimePurchases:B,clearSoldItemsCache:D,refetch:y,isFetching:x}}]),c()}catch(a){c(a)}},!1),918121,a=>a.a(async(b,c)=>{try{var d=a.i(800717),e=a.i(431886),f=a.i(206480),g=a.i(878274),h=b([e,f,g]);[e,f,g]=h.then?(await h)():h,a.s(["useDeletedSales",0,()=>{let[a,b]=(0,d.useState)([]),[c,h]=(0,d.useState)(!1),{currentBusiness:i}=(0,e.useBusiness)(),{userId:j}=(0,f.useCurrentUser)(),k=(0,d.useCallback)(async()=>{if(i?.id&&j){h(!0);try{let a=await (0,g.getActivityHistoryAction)(i.id,"SALES","DELETE");if(!a.success)throw Error(a.error);let c=(a.data||[]).map(a=>{let b=a.metadata||{},c=Array.isArray(b.items)?b.items:[],d=Number(b.totalAmount||0);0===d&&c.length>0&&(d=c.reduce((a,b)=>{let c=Number(b.total)||Number(b.price||0)*Number(b.quantity||0);return a+c},0));let e=c.reduce((a,b)=>a+Number(b.quantity??b.qty??0),0);return{id:a.id,receiptNumber:b.receiptNumber||"N/A",customerName:b.customerName||"Unknown",amount:d,totalQuantity:e,deletedAt:a.createdAt,deletedBy:a.profileName||"Admin",items:c,fullMetadata:b}});b(c)}catch(a){console.error("Error fetching deleted sales:",a)}finally{h(!1)}}},[i?.id,j]);return(0,d.useEffect)(()=>{k()},[k]),{deletedSales:a,isLoading:c,refetch:k}}]),c()}catch(a){c(a)}},!1),225691,a=>{"use strict";var b=a.i(800717);a.i(570396);var c=a.i(673727);a.s(["useSalesActions",0,()=>{let a=(0,c.useRouter)(),[d,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!1),[h,i]=(0,b.useState)(!1),j=(0,b.useCallback)(b=>{a.push(`/new-sale?editId=${b.id}`)},[a]),k=(0,b.useCallback)(a=>{e(a),g(!0)},[]);return{selectedSale:d,isReceiptDialogOpen:f,isDeletingSale:h,handleEditSale:j,handleViewReceipt:k,handleDeleteSale:(0,b.useCallback)(a=>async b=>{i(!0);try{await a(b.id)}finally{i(!1)}},[]),handleCloseReceiptDialog:(0,b.useCallback)(a=>{g(a),a||e(null)},[])}}])},693794,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(800717),f=a.i(473083),g=a.i(184590),h=a.i(895186),i=a.i(941313),j=a.i(817508),k=a.i(244745),l=a.i(205780),m=a.i(532636),n=a.i(434456),o=a.i(918121),p=a.i(771826),q=a.i(431886),r=a.i(206480),s=a.i(225691),t=a.i(545417),u=a.i(737229),v=a.i(638904),w=b([j,k,l,n,o,p,q,r]);[j,k,l,n,o,p,q,r]=w.then?(await w)():w,a.s(["SalesContent",0,()=>{let[a,b]=(0,e.useState)("overview"),{currentBusiness:c,isLoading:w}=(0,q.useBusiness)(),{settings:x}=(0,p.useBusinessSettings)(),{userId:y}=(0,r.useCurrentUser)(),{sales:z,isLoading:A,deleteSale:B,refetch:C,isFetching:D}=(0,n.useSalesData)(y,"desc"),{deletedSales:E,isLoading:F,refetch:G}=(0,o.useDeletedSales)(),{selectedSale:H,isReceiptDialogOpen:I,handleEditSale:J,handleViewReceipt:K,handleDeleteSale:L,handleCloseReceiptDialog:M}=(0,s.useSalesActions)();if(w||!y)return(0,d.jsx)("div",{className:"p-6 space-y-6",children:(0,d.jsx)(h.default,{})});if(!c)return(0,d.jsx)(i.default,{});let N=async()=>{"deleted-sales"===a?await G():await C()};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Sales Management"}),(0,d.jsxs)(v.Button,{variant:"outline",size:"sm",onClick:N,className:"flex items-center gap-2",disabled:D||F,children:[(0,d.jsx)(t.RefreshCw,{className:`h-4 w-4 ${D||F?"animate-spin":""}`}),D||F?"Refreshing...":"Refresh"]})]}),(0,d.jsxs)(f.Tabs,{value:a,onValueChange:b,children:[(0,d.jsxs)(f.TabsList,{className:"grid w-full grid-cols-3",children:[(0,d.jsx)(f.TabsTrigger,{value:"overview",children:"Sales Overview"}),(0,d.jsx)(f.TabsTrigger,{value:"analysis",children:"Sales Source"}),(0,d.jsxs)(f.TabsTrigger,{value:"deleted-sales",className:"flex items-center gap-2 text-destructive data-[state=active]:text-destructive",children:[(0,d.jsx)(u.Trash2,{className:"h-4 w-4"}),"Deleted Sales"]})]}),(0,d.jsx)(f.TabsContent,{value:"overview",className:"mt-0",children:A&&!z.length?(0,d.jsx)(h.default,{}):0===z.length?(0,d.jsx)(g.default,{}):(0,d.jsx)(j.default,{sales:z,onViewReceipt:K,onEditSale:J,onDeleteSale:L(B),currency:x.currency,isLoading:A})}),(0,d.jsx)(f.TabsContent,{value:"analysis",className:"mt-6",children:(0,d.jsx)(l.default,{sales:z,formatCurrency:a=>new Intl.NumberFormat("en-US",{style:"currency",currency:x.currency||"UGX",minimumFractionDigits:0,maximumFractionDigits:2}).format(a)})}),(0,d.jsx)(f.TabsContent,{value:"deleted-sales",className:"mt-6",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,d.jsx)(u.Trash2,{className:"h-5 w-5 text-muted-foreground"}),"Deleted Sales History"]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"View and manage recently deleted sales records."})]}),(0,d.jsx)(m.DeletedSalesTable,{sales:E,isLoading:F,currency:x.currency})]})})]})]}),(0,d.jsx)(k.default,{selectedSale:H,isOpen:I,onOpenChange:M,currency:x.currency})]})}]),c()}catch(a){c(a)}},!1),240039,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(693794),f=b([e]);[e]=f.then?(await f)():f,a.s(["default",0,()=>(0,d.jsx)(e.SalesContent,{})]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_8ab82313._.js.map