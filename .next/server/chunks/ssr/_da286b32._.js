module.exports=[591771,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(899054),f=b([e]);[e]=f.then?(await f)():f,a.s(["default",0,({product:a})=>0===a.quantity?(0,d.jsx)(e.Badge,{variant:"destructive",children:"Out of stock"}):a.quantity<=a.minimumStock?(0,d.jsx)(e.Badge,{variant:"warning",children:"Low stock"}):(0,d.jsx)(e.Badge,{variant:"success",children:"In stock"})]),c()}catch(a){c(a)}},!1),482431,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(396465),f=a.i(718192),g=a.i(445916),h=a.i(114748),i=a.i(805297),j=a.i(589984),k=b([e,i,j]);[e,i,j]=k.then?(await k)():k,a.s(["default",0,({product:a,onView:b,onEdit:c})=>{let{hasPermission:k}=(0,i.useProfiles)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(j.DropdownMenu,{children:[(0,d.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,d.jsxs)(e.Button,{variant:"ghost",size:"icon",children:[(0,d.jsx)(f.MoreHorizontal,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,d.jsxs)(j.DropdownMenuContent,{align:"end",children:[(0,d.jsx)(j.DropdownMenuLabel,{children:"Actions"}),(0,d.jsxs)(j.DropdownMenuItem,{onClick:()=>b(a.id),children:[(0,d.jsx)(h.Info,{className:"mr-2 h-4 w-4"})," View details"]}),k("inventory","edit")&&(0,d.jsxs)(j.DropdownMenuItem,{onClick:()=>c(a.id),children:[(0,d.jsx)(g.Edit,{className:"mr-2 h-4 w-4"})," Edit"]})]})]})})}]),c()}catch(a){c(a)}},!1),755567,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(799856),f=a.i(224993),g=a.i(584210),h=a.i(591771),i=a.i(482431),j=a.i(459502),k=a.i(767810),l=a.i(625250),m=b([e,f,h,i,j,k,l]);[e,f,h,i,j,k,l]=m.then?(await m)():m,a.s(["default",0,({product:a,onView:b,onEdit:c,showAllFields:m=!0,enableBulkActions:n=!1,isSelected:o=!1,onToggleSelection:p})=>{let{settings:q}=(0,f.useBusinessSettings)(),{formatFinancial:r,canViewCostPrice:s,canViewSellingPrice:t,canViewProfit:u}=(0,l.useFinancialVisibility)(),v=a.quantity*a.costPrice;return(0,d.jsx)(k.TooltipProvider,{children:(0,d.jsxs)("div",{className:"py-4 px-4 hover:bg-gray-50 border-b last:border-b-0 rounded-md",onClick:()=>b(a.id),children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[n&&(0,d.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,d.jsx)(j.Checkbox,{checked:o,onCheckedChange:()=>p?.(a.id),"aria-label":`Select ${a.name}`})}),(0,d.jsx)(g.default,{imageUrl:a.imageUrl,alt:a.name}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(k.Tooltip,{children:[(0,d.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("h3",{className:"font-medium text-sales-dark cursor-help max-w-[150px] truncate",children:a.name})}),(0,d.jsx)(k.TooltipContent,{side:"top",className:"max-w-xs",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]}),(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["#",a.itemNumber]})]})]}),(0,d.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,d.jsx)(i.default,{product:a,onView:b,onEdit:c})})]}),(0,d.jsxs)("div",{className:`grid grid-cols-2 gap-y-2.5 text-sm ${n?"ml-20":"ml-14"}`,children:[a.category&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Category:"}),(0,d.jsx)("div",{className:"font-normal",children:a.category})]}),(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Quantity:"}),(0,d.jsx)("div",{className:"font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Status:"}),(0,d.jsx)("div",{children:(0,d.jsx)(h.default,{product:a})}),void 0!==a.costPrice&&null!==a.costPrice&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Cost Price:"}),(0,d.jsx)("div",{className:"font-medium tabular-nums",children:s?`${q.currency} ${r(a.costPrice,"cost")}`:"•••"}),(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Total Cost:"}),(0,d.jsx)("div",{className:"font-medium tabular-nums",children:s?`${q.currency} ${(0,e.formatNumber)(v)}`:"•••"})]}),m&&void 0!==a.sellingPrice&&null!==a.sellingPrice&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"text-muted-foreground font-medium",children:"Selling Price:"}),(0,d.jsx)("div",{className:"font-medium tabular-nums",children:t?`${q.currency} ${r(a.sellingPrice,"selling")}`:"•••"})]})]})]})})}]),c()}catch(a){c(a)}},!1),789517,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(540629),f=a.i(493572),g=a.i(93538),h=b([e]);[e]=h.then?(await h)():h,a.s(["default",0,({field:a,currentSortField:b,sortOrder:c,onSort:h,children:i,className:j})=>(0,d.jsx)(e.TableHead,{className:`cursor-pointer hover:bg-muted/80 ${j||""}`,onClick:()=>h(a),children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[i,b===a&&(0,d.jsx)("div",{className:"ml-1",children:"asc"===c?(0,d.jsx)(f.ChevronUp,{className:"h-4 w-4"}):(0,d.jsx)(g.ChevronDown,{className:"h-4 w-4"})})]})})]),c()}catch(a){c(a)}},!1),293802,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(112779),g=a.i(688272),h=a.i(396465),i=a.i(597435),j=a.i(734637),k=a.i(445916),l=a.i(799856),m=b([f,g,h,l]);[f,g,h,l]=m.then?(await m)():m,a.s(["default",0,({value:a,type:b,options:c=[],currency:m,onSave:n,className:o="",displayFormatter:p})=>{let[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(a.toString()),[u,v]=(0,e.useState)(!1),w=b=>{b.stopPropagation(),r(!1),t(a.toString())},x=async a=>{a.stopPropagation(),v(!0);try{let a="number"===b?parseFloat(s)||0:s;await n(a)&&r(!1)}catch(a){console.error("Error saving:",a)}finally{v(!1)}};return q?(0,d.jsxs)("div",{className:"flex items-center gap-1",onClick:a=>a.stopPropagation(),children:["select"===b?(0,d.jsxs)(g.Select,{value:s,onValueChange:t,children:[(0,d.jsx)(g.SelectTrigger,{className:"h-8 text-xs",children:(0,d.jsx)(g.SelectValue,{})}),(0,d.jsx)(g.SelectContent,{children:c.map(a=>(0,d.jsx)(g.SelectItem,{value:a,children:a},a))})]}):(0,d.jsx)(f.Input,{type:b,value:s,onChange:a=>t(a.target.value),onKeyDown:a=>{a.stopPropagation(),"Enter"===a.key?x(a):"Escape"===a.key&&w(a)},className:"h-8 text-xs",autoFocus:!0,step:"number"===b?"0.01":void 0}),(0,d.jsx)(h.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:x,disabled:u,children:(0,d.jsx)(i.Check,{className:"h-3 w-3"})}),(0,d.jsx)(h.Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:w,disabled:u,children:(0,d.jsx)(j.X,{className:"h-3 w-3"})})]}):(0,d.jsxs)("div",{className:`group cursor-pointer flex items-center gap-2 ${o}`,onClick:b=>{b.stopPropagation(),r(!0),t(a.toString())},children:[(0,d.jsx)("span",{className:"flex-1",children:p?p(a):"number"===b&&m?`${m} ${(0,l.formatNumber)(a)}`:a.toString()}),(0,d.jsx)(k.Edit,{className:"h-3 w-3 opacity-0 group-hover:opacity-50 transition-opacity"})]})}]),c()}catch(a){c(a)}},!1),337748,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(540629),f=a.i(224993),g=a.i(789517),h=a.i(591771),i=a.i(482431),j=a.i(805297),k=a.i(584210),l=a.i(792071),m=a.i(459502),n=a.i(293802),o=a.i(767810),p=a.i(625250),q=b([e,f,g,h,i,j,m,n,o,p]);[e,f,g,h,i,j,m,n,o,p]=q.then?(await q)():q,a.s(["default",0,({products:a,sortField:b,sortOrder:c,handleSort:q,onView:r,onEdit:s,showAllFields:t=!0,enableBulkActions:u=!1,selectedProductIds:v=new Set,onToggleProductSelection:w,onToggleAllProducts:x,onUpdateProduct:y,categories:z=[]})=>{let{settings:A}=(0,f.useBusinessSettings)(),{hasPermission:B}=(0,j.useProfiles)(),{canViewCostPrice:C,canViewSellingPrice:D,formatFinancial:E}=(0,p.useFinancialVisibility)(),F=B("inventory","edit"),G=a.map(a=>a.id),H=G.length>0&&G.every(a=>v.has(a));return t?(0,d.jsx)("div",{className:"overflow-hidden rounded-md border",children:(0,d.jsx)(o.TooltipProvider,{children:(0,d.jsxs)(e.Table,{children:[(0,d.jsx)(e.TableHeader,{children:(0,d.jsxs)(e.TableRow,{className:"bg-muted/50",children:[u&&(0,d.jsx)(e.TableHead,{className:"w-[50px]",children:(0,d.jsx)(m.Checkbox,{checked:H,onCheckedChange:()=>x?.(G),"aria-label":"Select all products"})}),(0,d.jsx)(e.TableHead,{className:"w-[80px]",children:"Image"}),(0,d.jsx)(g.default,{field:"itemNumber",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px]",children:"Item #"}),(0,d.jsx)(g.default,{field:"name",currentSortField:b,sortOrder:c,onSort:q,className:"w-[180px]",children:"Product Name"}),(0,d.jsx)(g.default,{field:"category",currentSortField:b,sortOrder:c,onSort:q,className:"w-[120px]",children:"Category"}),(0,d.jsx)(g.default,{field:"quantity",currentSortField:b,sortOrder:c,onSort:q,className:"w-[80px] text-right",children:"Quantity"}),(0,d.jsx)(e.TableHead,{className:"w-[80px]",children:"Status"}),C&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.default,{field:"costPrice",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px] text-right",children:"Cost Price"}),(0,d.jsx)(e.TableHead,{className:"w-[100px] text-right",children:"Total Cost"})]}),D&&(0,d.jsx)(g.default,{field:"sellingPrice",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px] text-right",children:"Selling Price"}),(0,d.jsx)(e.TableHead,{className:"w-[100px] text-center",children:"Created Date"}),(0,d.jsx)(e.TableHead,{className:"w-[80px] text-right",children:"Actions"})]})}),(0,d.jsx)(e.TableBody,{children:a.map(a=>(0,d.jsxs)(e.TableRow,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(a.id),children:[u&&(0,d.jsx)(e.TableCell,{onClick:a=>a.stopPropagation(),children:(0,d.jsx)(m.Checkbox,{checked:v.has(a.id),onCheckedChange:()=>w?.(a.id),"aria-label":`Select ${a.name}`})}),(0,d.jsx)(e.TableCell,{children:(0,d.jsx)(k.default,{imageUrl:a.imageUrl,alt:a.name,size:"sm"})}),(0,d.jsx)(e.TableCell,{className:"font-mono text-sm max-w-[100px] truncate",children:(0,d.jsxs)(o.Tooltip,{children:[(0,d.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("span",{className:"cursor-help",children:a.itemNumber})}),(0,d.jsx)(o.TooltipContent,{children:(0,d.jsx)("p",{className:"font-mono",children:a.itemNumber})})]})}),(0,d.jsx)(e.TableCell,{className:"font-medium max-w-[180px] truncate",children:(0,d.jsxs)(o.Tooltip,{children:[(0,d.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("span",{className:"cursor-help",children:a.name})}),(0,d.jsx)(o.TooltipContent,{className:"max-w-xs",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]})}),(0,d.jsx)(e.TableCell,{className:"max-w-[120px]",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.category,type:"select",options:z,onSave:b=>y(a.id,{category:b})}):(0,d.jsx)("span",{className:"truncate",children:a.category})}),(0,d.jsx)(e.TableCell,{className:"text-right font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,d.jsx)(e.TableCell,{children:(0,d.jsx)(h.default,{product:a})}),C&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.costPrice,type:"number",currency:A.currency,onSave:b=>y(a.id,{costPrice:b}),className:"text-right"}):(0,d.jsxs)("span",{children:[A.currency," ",E(a.costPrice,"cost")]})}),(0,d.jsxs)(e.TableCell,{className:"text-right font-medium tabular-nums",children:[A.currency," ",E(a.quantity*a.costPrice,"cost")]})]}),D&&(0,d.jsx)(e.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.sellingPrice,type:"number",currency:A.currency,onSave:b=>y(a.id,{sellingPrice:b}),className:"text-right"}):(0,d.jsxs)("span",{children:[A.currency," ",E(a.sellingPrice,"price")]})}),(0,d.jsx)(e.TableCell,{className:"text-center text-sm text-muted-foreground",children:(0,l.format)(a.createdAt,"MMM dd, yyyy")}),(0,d.jsx)(e.TableCell,{className:"text-right",onClick:a=>a.stopPropagation(),children:(0,d.jsx)(i.default,{product:a,onView:r,onEdit:s})})]},a.id))})]})})}):(0,d.jsx)("div",{className:"overflow-hidden rounded-md border",children:(0,d.jsx)(o.TooltipProvider,{children:(0,d.jsxs)(e.Table,{children:[(0,d.jsx)(e.TableHeader,{children:(0,d.jsxs)(e.TableRow,{className:"bg-muted/50",children:[u&&(0,d.jsx)(e.TableHead,{className:"w-[50px]",children:(0,d.jsx)(m.Checkbox,{checked:H,onCheckedChange:()=>x?.(G),"aria-label":"Select all products"})}),(0,d.jsx)(e.TableHead,{className:"w-[80px]",children:"Image"}),(0,d.jsx)(g.default,{field:"itemNumber",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px]",children:"Item #"}),(0,d.jsx)(g.default,{field:"name",currentSortField:b,sortOrder:c,onSort:q,className:"w-[160px]",children:"Product Name"}),(0,d.jsx)(g.default,{field:"category",currentSortField:b,sortOrder:c,onSort:q,className:"w-[120px]",children:"Category"}),(0,d.jsx)(g.default,{field:"quantity",currentSortField:b,sortOrder:c,onSort:q,className:"w-[80px] text-right",children:"Quantity"}),(0,d.jsx)(e.TableHead,{className:"w-[80px]",children:"Status"}),C&&(0,d.jsx)(g.default,{field:"costPrice",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px] text-right",children:"Cost Price"}),D&&(0,d.jsx)(g.default,{field:"sellingPrice",currentSortField:b,sortOrder:c,onSort:q,className:"w-[100px] text-right",children:"Selling Price"}),(0,d.jsx)(e.TableHead,{className:"w-[100px] text-center",children:"Created Date"}),(0,d.jsx)(e.TableHead,{className:"w-[80px] text-right",children:"Actions"})]})}),(0,d.jsx)(e.TableBody,{children:a.map(a=>(0,d.jsxs)(e.TableRow,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(a.id),children:[u&&(0,d.jsx)(e.TableCell,{onClick:a=>a.stopPropagation(),children:(0,d.jsx)(m.Checkbox,{checked:v.has(a.id),onCheckedChange:()=>w?.(a.id),"aria-label":`Select ${a.name}`})}),(0,d.jsx)(e.TableCell,{children:(0,d.jsx)(k.default,{imageUrl:a.imageUrl,alt:a.name,size:"sm"})}),(0,d.jsx)(e.TableCell,{className:"font-mono text-sm max-w-[100px] truncate",children:(0,d.jsxs)(o.Tooltip,{children:[(0,d.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("span",{className:"cursor-help",children:a.itemNumber})}),(0,d.jsx)(o.TooltipContent,{children:(0,d.jsx)("p",{className:"font-mono",children:a.itemNumber})})]})}),(0,d.jsx)(e.TableCell,{className:"font-medium max-w-[160px] truncate",children:(0,d.jsxs)(o.Tooltip,{children:[(0,d.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,d.jsx)("span",{className:"cursor-help",children:a.name})}),(0,d.jsx)(o.TooltipContent,{className:"max-w-xs",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{className:"font-bold break-words whitespace-normal",children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]})})]})}),(0,d.jsx)(e.TableCell,{className:"max-w-[120px]",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.category,type:"select",options:z,onSave:b=>y(a.id,{category:b})}):(0,d.jsx)("span",{className:"truncate",children:a.category})}),(0,d.jsx)(e.TableCell,{className:"text-right font-medium",children:a.quantity%1==0?a.quantity:a.quantity.toFixed(2)}),(0,d.jsx)(e.TableCell,{children:(0,d.jsx)(h.default,{product:a})}),(0,d.jsx)(e.TableCell,{children:(0,d.jsx)(h.default,{product:a})}),C&&(0,d.jsx)(e.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.costPrice,type:"number",currency:A.currency,onSave:b=>y(a.id,{costPrice:b}),className:"text-right"}):(0,d.jsxs)("span",{children:[A.currency," ",E(a.costPrice,"cost")]})}),D&&(0,d.jsx)(e.TableCell,{className:"text-right font-medium tabular-nums",onClick:a=>a.stopPropagation(),children:y&&F?(0,d.jsx)(n.default,{value:a.sellingPrice,type:"number",currency:A.currency,onSave:b=>y(a.id,{sellingPrice:b}),className:"text-right"}):(0,d.jsxs)("span",{children:[A.currency," ",E(a.sellingPrice,"selling")]})}),(0,d.jsx)(e.TableCell,{className:"text-center text-sm text-muted-foreground",children:(0,l.format)(a.createdAt,"MMM dd, yyyy")}),(0,d.jsx)(e.TableCell,{className:"text-right",onClick:a=>a.stopPropagation(),children:(0,d.jsx)(i.default,{product:a,onView:r,onEdit:s})})]},a.id))})]})})})}]),c()}catch(a){c(a)}},!1),440975,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(747899),f=a.i(396465),g=a.i(499239),h=a.i(493901),i=b([f]);[f]=i.then?(await i)():i,a.s(["default",0,()=>{let a=(0,e.useNavigate)();return(0,d.jsxs)("div",{className:"text-center py-12 px-4 border-dashed border-2 rounded-lg bg-white",children:[(0,d.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-4",children:(0,d.jsx)(g.Package,{className:"h-6 w-6 text-muted-foreground"})}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No products found"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Start managing your inventory by adding your first product."}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsxs)(f.Button,{onClick:()=>a("/inventory/new"),className:"gap-2",children:[(0,d.jsx)(h.Plus,{size:16})," Add New Product"]})})]})}]),c()}catch(a){c(a)}},!1),631701,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(747899),g=a.i(558277),h=a.i(755567),i=a.i(337748),j=a.i(440975),k=b([h,i,j]);[h,i,j]=k.then?(await k)():k,a.s(["default",0,({products:a,isLoading:b,showAllFields:c=!0,enableBulkActions:k=!1,selectedProductIds:l=new Set,onToggleProductSelection:m,onToggleAllProducts:n,sortField:o,sortOrder:p,onSort:q,onUpdateProduct:r,categories:s=[]})=>{let t=(0,f.useNavigate)(),u=(0,g.useIsMobile)(),[v,w]=e.default.useState("name"),[x,y]=e.default.useState("asc"),z=o||v,A=p||x,B=a=>{t(`/inventory/edit/${a}`)},C=a=>{t(`/inventory/${a}`)},D=e.default.useMemo(()=>[...a].sort((a,b)=>{let c=0;switch(z){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===A?c:-c}),[a,z,A]);if(b)return(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("div",{className:"animate-pulse",children:"Loading inventory data..."})});if(0===a.length)return(0,d.jsx)(j.default,{});if(u){let a=D.map(a=>a.id),b=a.length>0&&a.every(a=>l.has(a));return(0,d.jsxs)("div",{className:"space-y-4",children:[k&&D.length>0&&(0,d.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/30 rounded-md",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"checkbox",checked:b,onChange:()=>n?.(a),className:"rounded border-gray-300",id:"mobile-select-all"}),(0,d.jsxs)("label",{htmlFor:"mobile-select-all",className:"text-sm font-medium",children:["Select All (",a.length,")"]})]}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:[l.size," selected"]})]}),(0,d.jsx)("div",{className:"divide-y",children:D.map(a=>(0,d.jsx)(h.default,{product:a,onView:C,onEdit:B,showAllFields:c,enableBulkActions:k,isSelected:l.has(a.id),onToggleSelection:m},a.id))})]})}return(0,d.jsx)(i.default,{products:D,sortField:z,sortOrder:A,handleSort:a=>{q?q(a):z===a?y("asc"===A?"desc":"asc"):(w(a),y("asc"))},onView:C,onEdit:B,showAllFields:c,enableBulkActions:k,selectedProductIds:l,onToggleProductSelection:m,onToggleAllProducts:n,onUpdateProduct:r,categories:s})}]),c()}catch(a){c(a)}},!1),282907,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(957143),g=a.i(120327),h=a.i(112779),i=a.i(688272),j=a.i(811705),k=a.i(799856),l=a.i(899054),m=a.i(558277),n=b([h,i,j,k,l]);[h,i,j,k,l]=n.then?(await n)():n,a.s(["default",0,({filters:a,setFilters:b,categories:c,productsCount:n})=>{let o=(0,m.useIsMobile)(),[p,q]=e.default.useState(a.search);e.default.useEffect(()=>{a.search!==p&&q(a.search)},[a.search]);let r=(c,d)=>{b({...a,[c]:d})};return(0,d.jsx)(j.Card,{className:"mb-6 shadow-sm",children:(0,d.jsx)(j.CardContent,{className:(0,k.cn)("p-4",o&&"p-3"),children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center relative flex-grow",children:[(0,d.jsx)(f.Search,{className:"h-4 w-4 absolute left-3 text-gray-400"}),(0,d.jsx)(h.Input,{placeholder:"Search products...",className:"pl-9",value:p,onChange:a=>{q(a.target.value)},onKeyDown:a=>{"Enter"===a.key&&r("search",p)},onBlur:()=>{p!==a.search&&r("search",p)}})]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,d.jsx)("div",{className:"min-w-[180px]",children:(0,d.jsxs)(i.Select,{value:a.category||"all",onValueChange:a=>r("category","all"===a?"":a),children:[(0,d.jsx)(i.SelectTrigger,{className:(0,k.cn)("w-full",""!==a.category&&"border-primary"),children:(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)(g.Filter,{className:"h-4 w-4"}),(0,d.jsx)(i.SelectValue,{placeholder:"All Categories"})]})}),(0,d.jsxs)(i.SelectContent,{children:[(0,d.jsx)(i.SelectItem,{value:"all",children:"All Categories"}),c.map(a=>(0,d.jsx)(i.SelectItem,{value:a.name,children:a.name},a.id))]})]})}),(0,d.jsx)("div",{className:"min-w-[150px]",children:(0,d.jsxs)(i.Select,{value:a.stockStatus,onValueChange:a=>r("stockStatus",a),children:[(0,d.jsx)(i.SelectTrigger,{className:(0,k.cn)("all"!==a.stockStatus&&"border-primary"),children:(0,d.jsx)(i.SelectValue,{placeholder:"Stock Status"})}),(0,d.jsxs)(i.SelectContent,{children:[(0,d.jsx)(i.SelectItem,{value:"all",children:"All Stock"}),(0,d.jsx)(i.SelectItem,{value:"inStock",children:"In Stock"}),(0,d.jsx)(i.SelectItem,{value:"lowStock",children:"Low Stock"}),(0,d.jsx)(i.SelectItem,{value:"outOfStock",children:"Out of Stock"})]})]})}),(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsxs)(l.Badge,{variant:"secondary",className:"text-xs",children:[n," ",1===n?"product":"products"," found"]})})]})]})})})}]),c()}catch(a){c(a)}},!1),81311,a=>{"use strict";a.s(["exportProductsForUpdate",0,a=>{let b=["Item Number,Name,Category,Quantity,Cost Price,Selling Price,Supplier,Description",...a.map(a=>[a.itemNumber,a.name,a.category,a.quantity.toString(),a.costPrice.toString(),a.sellingPrice.toString(),a.supplier||"",a.description||""]).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n"),c=`data:text/csv;charset=utf-8,${encodeURIComponent(b)}`,d=`products_for_update_${new Date().toISOString().slice(0,10)}.csv`,e=document.createElement("a");e.href=c,e.download=d,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}])},763713,a=>{"use strict";a.s(["exportProductsToCSV",0,a=>{let b=localStorage.getItem("businessSettings"),c=b?JSON.parse(b):{currency:"USD"},d=["Item Number","Name","Category","Quantity","Minimum Stock",`Cost Price (${c.currency})`,`Selling Price (${c.currency})`,"Supplier","Description","Created Date","Last Updated"],e=a.map(a=>[a.itemNumber,a.name,a.category,a.quantity.toString(),a.minimumStock.toString(),a.costPrice.toFixed(2),a.sellingPrice.toFixed(2),a.supplier||"N/A",a.description?a.description.replace(/,/g,";").replace(/\n/g," "):"N/A",new Date(a.createdAt).toLocaleDateString(),new Date(a.updatedAt).toLocaleDateString()]),f=[d.join(","),...e.map(a=>a.join(","))].join("\n"),g=`data:text/csv;charset=utf-8,${encodeURIComponent(f)}`,h=`products_${new Date().toISOString().slice(0,10)}.csv`,i=document.createElement("a");i.href=g,i.download=h,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}])},677526,a=>a.a(async(b,c)=>{try{var d=a.i(959866),e=a.i(799856),f=b([e]);[e]=f.then?(await f)():f,a.s(["exportProductsToPDF",0,(a,b)=>{let c=b||{businessName:"Your Business",businessAddress:"Business Address",businessPhone:"(123) 456-7890",businessEmail:"support@yourbusiness.com",currency:"USD"},f=new d.default({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),g=f.internal.pageSize.getWidth(),h=f.internal.pageSize.getHeight(),i=g-10-10,j=10,k=()=>{f.setFontSize(8),f.setFont("helvetica","normal"),f.setTextColor(150,150,150),f.text("Created By Gonza Systems",g/2,h-10,{align:"center"}),f.setTextColor(0,0,0)},l=[20,55,30,25,25,25],m=["Item #","Product Name","Category","Qty",`Cost (${c.currency})`,`Price (${c.currency})`],n=()=>{f.setFillColor(243,244,246),f.rect(10,j-1,i,8,"F"),f.setLineWidth(.2),f.rect(10,j-1,i,8),f.setFontSize(8),f.setFont("helvetica","bold");let a=10;m.forEach((b,c)=>{let d=l[c],e=f.getTextWidth(b),g=a+(d-e)/2;f.text(b,g,j+5),c<m.length-1&&f.line(a+d,j-1,a+d,j+8-1),a+=d}),j+=8},o=a=>j+a>h-10-15&&(k(),f.addPage(),j=10,n(),f.setFont("helvetica","normal"),f.setFontSize(7),!0);f.setFontSize(14),f.setFont("helvetica","bold");let p=c.businessName||"Your Business",q=f.getTextWidth(p);if(f.text(p,(g-q)/2,j),j+=4,c.businessAddress){f.setFontSize(9),f.setFont("helvetica","normal");let a=f.getTextWidth(c.businessAddress);f.text(c.businessAddress,(g-a)/2,j),j+=3}if(c.businessPhone||c.businessEmail){f.setFontSize(8);let a=[c.businessPhone,c.businessEmail].filter(Boolean).join(" | "),b=f.getTextWidth(a);f.text(a,(g-b)/2,j),j+=3}j+=3,f.setFontSize(12),f.setFont("helvetica","bold");let r="Products Inventory Report",s=f.getTextWidth(r);f.text(r,(g-s)/2,j),j+=4,f.setFontSize(8),f.setFont("helvetica","normal");let t=new Date().toLocaleDateString(),u=`Generated on ${t}`,v=f.getTextWidth(u);f.text(u,(g-v)/2,j),j+=6;let w=a.length,x=a.filter(a=>a.quantity>0&&a.quantity<=a.minimumStock).length,y=a.filter(a=>0===a.quantity).length,z=a.reduce((a,b)=>a+b.costPrice*b.quantity,0);f.setFillColor(248,249,250),f.rect(10,j-2,i,15,"F"),f.setLineWidth(.2),f.setDrawColor(200,200,200),f.rect(10,j-2,i,15),f.setFontSize(9),f.setFont("helvetica","bold"),f.text("Inventory Summary",15,j+2),f.setFontSize(7),f.setFont("helvetica","normal");let A=[`Total: ${w}`,`Low Stock: ${x}`,`Out of Stock: ${y}`,`Total Value: ${c.currency} ${(0,e.formatNumber)(z)}`],B=j+6;A.forEach((a,b)=>{let c=15+b%2*(i/2);2===b&&(B+=3),f.text(a,c,B+3*Math.floor(b/2))}),j+=19,o(13),n(),f.setFont("helvetica","normal"),f.setFontSize(7),a.forEach((a,b)=>{o(8);let c=[a.itemNumber||"",a.name||"",a.category||"",a.quantity.toString(),(0,e.formatNumber)(a.costPrice),(0,e.formatNumber)(a.sellingPrice)];b%2==0&&(f.setFillColor(249,250,251),f.rect(10,j-1,i,6,"F")),0===a.quantity?(f.setFillColor(254,226,226),f.rect(10,j-1,i,6,"F")):a.quantity<=a.minimumStock&&(f.setFillColor(254,243,199),f.rect(10,j-1,i,6,"F")),f.setLineWidth(.1),f.rect(10,j-1,i,6);let d=10;c.forEach((a,b)=>{let e=l[b],g=a;if(1===b)for(;f.getTextWidth(g)>e-3&&g.length>3;)g=g.substring(0,g.length-4)+"...";else if(2===b)for(;f.getTextWidth(g)>e-3&&g.length>3;)g=g.substring(0,g.length-4)+"...";let h=d+1.5;if(b>=3){let a=f.getTextWidth(g);h=d+e-a-1.5}f.setTextColor(0,0,0),f.text(g,h,j+3.5),b<c.length-1&&f.line(d+e,j-1,d+e,j+6-1),d+=e}),j+=6}),j+=5,o(10),f.setFontSize(7),f.setFont("helvetica","italic"),f.setTextColor(100,100,100);let C=`This report contains ${a.length} products. Generated by ${c.businessName||"Inventory System"}`,D=f.getTextWidth(C);f.text(C,(g-D)/2,j),k();let E=`products-inventory-${new Date().toISOString().slice(0,10)}.pdf`;f.save(E)}]),c()}catch(a){c(a)}},!1),221323,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(109254),f=a.i(396465),g=a.i(468996),h=b([e,f,g]);[e,f,g]=h.then?(await h)():h,a.s(["default",0,({open:a,onOpenChange:b,selectedProducts:c,onConfirm:h,isDeleting:i,deletionProgress:j})=>{let k=j?Math.round(j.current/j.total*100):0,l=a=>{i||b(a)};return(0,d.jsx)(e.Dialog,{open:a,onOpenChange:l,children:(0,d.jsxs)(e.DialogContent,{className:"pointer-events-auto",children:[(0,d.jsxs)(e.DialogHeader,{children:[(0,d.jsx)(e.DialogTitle,{children:"Delete Selected Products"}),(0,d.jsxs)(e.DialogDescription,{children:["Are you sure you want to delete ",c.length," product",c.length>1?"s":"","? This action cannot be undone."]})]}),(0,d.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,d.jsx)("div",{className:"space-y-1",children:c.map(a=>(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:["• ",a.name]},a.id))})}),i&&j&&(0,d.jsx)(g.BulkOperationProgress,{title:"Deleting Products...",currentCount:j.current,totalCount:j.total,status:"processing"}),(0,d.jsxs)(e.DialogFooter,{children:[(0,d.jsx)(f.Button,{variant:"outline",onClick:()=>l(!1),disabled:i,children:"Cancel"}),(0,d.jsx)(f.Button,{variant:"destructive",onClick:h,disabled:i,children:i?`Deleting... (${k}%)`:`Delete ${c.length} Product${c.length>1?"s":""}`})]})]})})}]),c()}catch(a){c(a)}},!1),223022,a=>{"use strict";let b=a=>{let b=[],c="",d=!1,e=0;for(;e<a.length;){let f=a[e],g=a[e+1];if('"'===f)if(d&&'"'===g){c+='"',e+=2;continue}else d=!d;else","!==f||d?c+=f:(b.push(c.trim()),c="");e++}return b.push(c.trim()),b},c=(a,b)=>{let c=[];return a["Item Number"]?.trim()||c.push({row:b,field:"Item Number",message:"Item Number is required for updates"}),a.Quantity&&""!==a.Quantity.trim()&&isNaN(Number(a.Quantity))&&c.push({row:b,field:"Quantity",message:"Quantity must be a number"}),a["Cost Price"]&&""!==a["Cost Price"].trim()&&isNaN(Number(a["Cost Price"]))&&c.push({row:b,field:"Cost Price",message:"Cost Price must be a number"}),a["Selling Price"]&&""!==a["Selling Price"].trim()&&isNaN(Number(a["Selling Price"]))&&c.push({row:b,field:"Selling Price",message:"Selling Price must be a number"}),c};a.s(["generateUpdateErrorLogCSV",0,a=>{let b=new Blob([["Row,Field,Error Message",...a.map(a=>[a.row,a.field,`"${a.message}"`].join(","))].join("\n")],{type:"text/csv"}),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="product_update_errors.csv",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c)},"parseCSVUpdate",0,a=>{let d=a.trim().split("\n"),e=b(d[0]).map(a=>a.trim()),f=[],g=[];for(let a=1;a<d.length;a++){let h=b(d[a]).map(a=>a.trim()),i={};e.forEach((a,b)=>{i[a]=h[b]||""});let j=c(i,a+1);0===j.length?f.push(i):g.push(...j)}return{validRows:f,errors:g,totalRows:d.length-1}}])},393157,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(108191),f=a.i(482331),g=a.i(985522),h=b([f,g]);[f,g]=h.then?(await h)():h,a.s(["useProductCSVUpdate",0,a=>{let[b,c]=(0,d.useState)(!1),[h,i]=(0,d.useState)(null),{toast:j}=(0,e.useToast)(),{products:k,updateProduct:l}=(0,f.useProducts)(a,1e4),{categories:m,createCategory:n}=(0,g.useCategories)(a),o=a=>{let b=[],c=[];return a.forEach((a,d)=>{let e,f=a["Item Number"]?.trim(),g=f?.padStart(4,"0"),h=k.find(a=>a.itemNumber===f||a.itemNumber===g);if(!h)return void c.push(`Row ${d+1}: Product with Item Number "${f}" not found`);let i={};if(a.Name?.trim()&&a.Name.trim()!==h.name&&(i.name=a.Name.trim()),a.Category?.trim()&&a.Category.trim()!==h.category&&(i.category=a.Category.trim()),a.Quantity?.trim()!==""&&!isNaN(Number(a.Quantity))){let b=Number(a.Quantity);b!==h.quantity&&(i.quantity=b,e={oldQuantity:h.quantity,newQuantity:b})}if(a["Cost Price"]?.trim()!==""&&!isNaN(Number(a["Cost Price"]))){let b=Number(a["Cost Price"]);Math.abs(b-h.costPrice)>.001&&(i.costPrice=b)}if(a["Selling Price"]?.trim()!==""&&!isNaN(Number(a["Selling Price"]))){let b=Number(a["Selling Price"]);Math.abs(b-h.sellingPrice)>.001&&(i.sellingPrice=b)}a.Supplier?.trim()&&a.Supplier.trim()!==(h.supplier||"")&&(i.supplier=a.Supplier.trim()),a.Description?.trim()&&a.Description.trim()!==(h.description||"")&&(i.description=a.Description.trim()),a["Manufacturer Barcode"]?.trim()!==void 0&&a["Manufacturer Barcode"].trim()!==(h.manufacturerBarcode||"")&&(i.manufacturerBarcode=a["Manufacturer Barcode"].trim()),a.Barcode?.trim()!==void 0&&a.Barcode.trim()!==(h.barcode||"")&&(i.barcode=a.Barcode.trim()),Object.keys(i).length>0&&b.push({productId:h.id,itemNumber:h.itemNumber,updates:i,quantityChange:e})}),{validUpdates:b,errors:c}},p=a=>{let b=m.map(a=>a.name),c=a.map(a=>a.Category?.trim()).filter(a=>a&&""!==a);return[...new Set(c)].filter(a=>!b.includes(a))},q=async(a,b)=>{c(!0),i({current:0,total:a.length});try{let{validUpdates:c,errors:d}=o(a);if(d.length>0)throw Error(`Validation errors: ${d.join(", ")}`);for(let b of p(a))await n(b);let e=0,f=0;for(let a=0;a<c.length;a++){let d=c[a];try{console.log(`DEBUG: Calling updateProduct for ${d.itemNumber} with updates:`,d.updates);let a=await l(d.productId,d.updates,void 0,!1,"CSV Edit");console.log(`DEBUG: UpdateProduct result for ${d.itemNumber}: ${a}`),a?e++:f++}catch(a){console.error(`Error updating product ${d.itemNumber}:`,a),f++}let g=a+1;i({current:g,total:c.length}),b?.(g,c.length)}return e>0&&j({title:"Products updated successfully",description:`${e} product${e>1?"s":""} updated successfully`}),f>0&&j({title:"Some updates failed",description:`${f} product${f>1?"s":""} could not be updated`,variant:"destructive"}),{successCount:e,failureCount:f}}catch(a){throw console.error("Bulk update failed:",a),j({title:"Update failed",description:a instanceof Error?a.message:"An error occurred during the update",variant:"destructive"}),a}finally{c(!1),i(null)}};return{isUpdating:b,updateProgress:h,validateUpdates:o,detectNewCategories:p,bulkUpdateProducts:q}}]),c()}catch(a){c(a)}},!1),26155,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(109254),g=a.i(396465),h=a.i(811705),i=a.i(289118),j=a.i(455756),k=a.i(199987),l=a.i(436028),m=a.i(532572),n=a.i(445916),o=a.i(114748),p=a.i(223022),q=a.i(799856),r=a.i(899054),s=a.i(393157),t=a.i(468996),u=b([f,g,h,i,q,r,s,t]);[f,g,h,i,q,r,s,t]=u.then?(await u)():u,a.s(["default",0,({open:a,onOpenChange:b,userId:c})=>{let{bulkUpdateProducts:u,detectNewCategories:v,isUpdating:w}=(0,s.useProductCSVUpdate)(c),[x,y]=(0,e.useState)({step:"select",file:null,validRows:[],errors:[],totalRows:0,updateProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),z=(0,e.useRef)(null),[A,B]=(0,e.useState)(!1),C=async a=>{if(!a.name.endsWith(".csv"))return void alert("Please select a CSV file");let b=await a.text(),c=(0,p.parseCSVUpdate)(b),d=v(c.validRows);y({...x,step:"preview",file:a,validRows:c.validRows,errors:c.errors,totalRows:c.totalRows,newCategories:d})},D=async()=>{y(a=>({...a,step:"updating",updateProgress:0,currentProductIndex:0}));try{let a=await u(x.validRows,(a,b)=>{let c=Math.round(a/b*100);y(b=>({...b,updateProgress:c,currentProductIndex:a}))});y(b=>({...b,step:"complete",updateProgress:100,successCount:a.successCount,failureCount:a.failureCount,currentProductIndex:x.validRows.length}))}catch(a){console.error("Update failed:",a),y(a=>({...a,step:"complete",updateProgress:100,successCount:0,failureCount:x.validRows.length,currentProductIndex:x.validRows.length}))}};return(0,d.jsx)(f.Dialog,{open:a,onOpenChange:a=>{w||b(a)},children:(0,d.jsxs)(f.DialogContent,{className:"sm:max-w-[500px] pointer-events-auto",children:[(0,d.jsxs)(f.DialogHeader,{children:[(0,d.jsxs)(f.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(k.FileText,{className:"h-5 w-5"}),"Update Products via CSV"]}),(0,d.jsx)(f.DialogDescription,{children:"Update existing products using a CSV file with Item Numbers for identification"})]}),"select"===x.step&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:(0,q.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors",A?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDrop:a=>{a.preventDefault(),B(!1);let b=a.dataTransfer.files[0];b&&C(b)},onDragOver:a=>{a.preventDefault(),B(!0)},onDragLeave:()=>{B(!1)},onClick:()=>z.current?.click(),children:[(0,d.jsx)(j.Upload,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,d.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload CSV File for Product Updates"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Drag and drop your CSV file here, or click to browse"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Make sure the CSV includes Item Number column for product identification"})]}),(0,d.jsx)("input",{ref:z,type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];b&&C(b)},className:"hidden"})]}),"preview"===x.step&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,d.jsx)(h.Card,{children:(0,d.jsxs)(h.CardContent,{className:"pt-6",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x.validRows.length}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Products to update"})]})}),(0,d.jsx)(h.Card,{children:(0,d.jsxs)(h.CardContent,{className:"pt-6",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600",children:x.errors.length}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Errors found"})]})}),(0,d.jsx)(h.Card,{children:(0,d.jsxs)(h.CardContent,{className:"pt-6",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:x.totalRows}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total rows"})]})})]}),x.newCategories.length>0&&(0,d.jsxs)(i.Alert,{children:[(0,d.jsx)(n.Edit,{className:"h-4 w-4"}),(0,d.jsx)(i.AlertDescription,{children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("p",{children:["The following ",x.newCategories.length," new categories will be created:"]}),(0,d.jsx)("div",{className:"flex flex-wrap gap-1",children:x.newCategories.map((a,b)=>(0,d.jsx)(r.Badge,{variant:"outline",className:"text-xs",children:a},b))})]})})]}),x.errors.length>0&&(0,d.jsxs)(i.Alert,{variant:"destructive",children:[(0,d.jsx)(l.AlertCircle,{className:"h-4 w-4"}),(0,d.jsxs)(i.AlertDescription,{children:[x.errors.length," rows have errors and will be skipped.",(0,d.jsxs)(g.Button,{variant:"link",className:"p-0 h-auto ml-2",onClick:()=>(0,p.generateUpdateErrorLogCSV)(x.errors),children:[(0,d.jsx)(m.Download,{className:"h-3 w-3 mr-1"}),"Download error log"]})]})]}),(0,d.jsxs)(i.Alert,{children:[(0,d.jsx)(o.Info,{className:"h-4 w-4"}),(0,d.jsx)(i.AlertDescription,{children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Update Rules:"})}),(0,d.jsxs)("ul",{className:"text-sm space-y-1 ml-2",children:[(0,d.jsx)("li",{children:"• Only fields with changes will be updated"}),(0,d.jsx)("li",{children:"• Empty fields will be ignored (no changes)"}),(0,d.jsx)("li",{children:"• Quantity changes will be tracked in stock history"}),(0,d.jsx)("li",{children:"• Products are identified by Item Number"})]})]})})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,d.jsx)(g.Button,{variant:"outline",onClick:()=>y(a=>({...a,step:"select"})),children:"Back"}),(0,d.jsxs)(g.Button,{onClick:D,disabled:0===x.validRows.length,children:["Update ",x.validRows.length," Products",x.newCategories.length>0&&` & Create ${x.newCategories.length} Categories`]})]})]}),"updating"===x.step&&(0,d.jsx)(t.BulkOperationProgress,{title:"Updating Products...",currentCount:x.currentProductIndex,totalCount:x.validRows.length,status:"processing"}),"complete"===x.step&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(t.BulkOperationProgress,{title:"Update Complete!",currentCount:x.currentProductIndex,totalCount:x.validRows.length,status:x.failureCount>0?"failed":"completed",successCount:x.successCount,failureCount:x.failureCount}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)(g.Button,{onClick:()=>{if(w)return;let a="complete"===x.step&&x.successCount>0;y({step:"select",file:null,validRows:[],errors:[],totalRows:0,updateProgress:0,successCount:0,failureCount:0,newCategories:[],currentProductIndex:0}),b(!1),a&&setTimeout(()=>{window.location.reload()},100)},children:"Close"})})]})]})})}]),c()}catch(a){c(a)}},!1),111614,a=>{"use strict";let b=(0,a.i(564375).default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);a.s(["Settings2",()=>b],111614)},260148,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(109254),g=a.i(396465),h=a.i(468996),i=a.i(126741),j=a.i(111614),k=a.i(366736),l=a.i(397625),m=b([f,g,h,k,l]);[f,g,h,k,l]=m.then?(await m)():m,a.s(["default",0,({open:a,onOpenChange:b,selectedProducts:c,onConfirm:m,isPrinting:n,printProgress:o})=>{let[p,q]=(0,e.useState)(!0),r=a=>{n||b(a)},s=c.length;return(0,d.jsx)(f.Dialog,{open:a,onOpenChange:r,children:(0,d.jsxs)(f.DialogContent,{className:"sm:max-w-[425px]",children:[(0,d.jsxs)(f.DialogHeader,{children:[(0,d.jsxs)(f.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(i.Printer,{className:"h-5 w-5"}),"Print Barcode Labels"]}),(0,d.jsxs)(f.DialogDescription,{children:["You are about to print barcodes for ",s," product",s>1?"s":"","."]})]}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.Settings2,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsxs)("div",{className:"space-y-0.5",children:[(0,d.jsx)(l.Label,{htmlFor:"bulk-print-price",className:"text-sm font-medium cursor-pointer",children:"Show Price on Label"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include selling price on each label"})]})]}),(0,d.jsx)(k.Switch,{id:"bulk-print-price",checked:p,onCheckedChange:q,disabled:n})]}),(0,d.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 bg-muted/10",children:(0,d.jsx)("div",{className:"space-y-1",children:c.map(a=>(0,d.jsxs)("div",{className:"text-xs text-muted-foreground truncate px-2 py-1",children:["• ",a.name," (",a.itemNumber,")"]},a.id))})})]}),n&&o&&(0,d.jsx)(h.BulkOperationProgress,{title:"Printing Labels...",currentCount:o.current,totalCount:o.total,status:"processing"}),(0,d.jsxs)(f.DialogFooter,{children:[(0,d.jsx)(g.Button,{variant:"outline",onClick:()=>r(!1),disabled:n,children:"Cancel"}),(0,d.jsx)(g.Button,{onClick:()=>m(p),disabled:n||0===s,className:"gap-2",children:n?`Printing... ${Math.round((o?.current||0)/(o?.total||1)*100)}%`:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Printer,{className:"h-4 w-4"}),"Print ",s," Label",s>1?"s":""]})})]})]})})}]),c()}catch(a){c(a)}},!1),157374,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(109254),g=a.i(396465),h=a.i(397625),i=a.i(366736),j=a.i(532572),k=b([f,g,h,i]);[f,g,h,i]=k.then?(await k)():k,a.s(["default",0,({open:a,onOpenChange:b,productCount:c,onConfirm:k,isExporting:l})=>{let[m,n]=(0,e.useState)(!0),o=()=>{let a=Math.floor(4.085106382978723),b=Math.floor(8.71875);return{cols:a,rows:b,itemsPerPage:a*b}},{cols:p,rows:q,itemsPerPage:r}=o();return(0,d.jsx)(f.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(f.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsxs)(f.DialogHeader,{children:[(0,d.jsx)(f.DialogTitle,{children:"Export Barcodes to PDF"}),(0,d.jsx)(f.DialogDescription,{children:"Barcodes are automatically arranged on A4 paper (45mm × 30mm labels)."})]}),(0,d.jsxs)("div",{className:"space-y-6 py-4",children:[(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,d.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,d.jsx)("strong",{children:c})," product",1!==c?"s":""," with barcodes will be exported"]})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(h.Label,{className:"text-base font-semibold",children:"Automatic Layout"}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,d.jsxs)("p",{children:["• ",p," columns × ",q," rows"]}),(0,d.jsxs)("p",{children:["• ",r," barcodes per page"]}),(0,d.jsx)("p",{children:"• Fixed size: 45mm × 30mm"})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-2 border-t",children:[(0,d.jsxs)("div",{className:"space-y-0.5",children:[(0,d.jsx)(h.Label,{className:"text-sm font-medium",children:"Include Price"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show product price on each barcode"})]}),(0,d.jsx)(i.Switch,{checked:m,onCheckedChange:n})]}),(0,d.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:(0,d.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,d.jsx)("strong",{children:"Estimated pages:"})," ",(()=>{let{itemsPerPage:a}=o();return Math.ceil(c/a)})()]})})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)(g.Button,{onClick:()=>{k({showPrice:m})},disabled:l,className:"w-full gap-2",children:[(0,d.jsx)(j.Download,{className:"h-4 w-4"}),l?"Exporting...":"Export PDF"]}),(0,d.jsx)(g.Button,{variant:"outline",onClick:()=>b(!1),disabled:l,className:"w-full",children:"Cancel"})]})]})})}]),c()}catch(a){c(a)}},!1),159047,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(747899),g=a.i(396465),h=a.i(493901),i=a.i(506766),j=a.i(532572),k=a.i(455756),l=a.i(946032),m=a.i(2026),n=a.i(126741),o=a.i(531811),p=a.i(964889),q=a.i(631701),r=a.i(282907),s=a.i(437322),t=a.i(482331),u=a.i(108191),v=a.i(558277),w=a.i(799856),x=a.i(81311),y=a.i(763713),z=a.i(677526),A=a.i(745695),B=a.i(221323),C=a.i(965549),D=a.i(26155),E=a.i(260148),F=a.i(157374),G=a.i(217093),H=a.i(532987),I=a.i(985522),J=a.i(224993),K=a.i(811705),L=a.i(852741),M=a.i(966643),N=a.i(589984),O=a.i(93538),P=a.i(805297),Q=b([g,o,p,q,r,s,t,w,z,B,C,D,E,F,G,I,J,K,N,P]);[g,o,p,q,r,s,t,w,z,B,C,D,E,F,G,I,J,K,N,P]=Q.then?(await Q)():Q,a.s(["default",0,()=>{let a=(0,f.useNavigate)(),{user:b}=(0,o.useAuth)(),{currentBusiness:c,isLoading:Q}=(0,p.useBusiness)(),{hasPermission:R}=(0,P.useProfiles)(),{toast:S}=(0,u.useToast)(),T=(0,v.useIsMobile)(),U=R("inventory","create"),V=R("inventory","edit"),W=R("inventory","delete"),X=R("inventory","view"),{products:Y,filteredProducts:Z,isLoading:$,loadProducts:_,filters:aa,setFilters:ab,deleteProduct:ac,updateProduct:ad,page:ae,setPage:af,pageSize:ag,setPageSize:ah,totalCount:ai,refetch:aj,isFetching:ak}=(0,t.useProducts)(b?.id,50),{categories:al}=(0,I.useCategories)(b?.id),{bulkCreateProducts:am}=(0,G.useBulkProducts)(),{settings:an}=(0,J.useBusinessSettings)(),[ao,ap]=(0,e.useState)(new Set),[aq,ar]=(0,e.useState)(!1),[as,at]=(0,e.useState)(!1),[au,av]=(0,e.useState)([]),[aw,ax]=(0,e.useState)(!1),[ay,az]=(0,e.useState)(!1),[aA,aB]=(0,e.useState)(!1),[aC,aD]=(0,e.useState)(!1),[aE,aF]=(0,e.useState)(!1),[aG,aH]=(0,e.useState)(!1),[aI,aJ]=(0,e.useState)([]),[aK,aL]=(0,e.useState)(void 0),[aM,aN]=(0,e.useState)(void 0),[aO,aP]=(0,e.useState)("name"),[aQ,aR]=(0,e.useState)("asc"),[aS,aT]=(0,e.useState)(void 0),[aU,aV]=(0,e.useState)(void 0),[aW,aX]=(0,e.useState)(void 0),[aY,aZ]=(0,e.useState)(void 0);(0,e.useEffect)(()=>{let a=!1;return(async()=>{if(!b?.id||!c?.id)return;let d=`allProductsStats_${c.id}`,e=localStorage.getItem(d);try{if(e){let a=JSON.parse(e);if(Date.now()-a.ts<3e5){aT(a.costValue),aV(a.lowStock),aX(a.outOfStock),aZ(a.stockValue);return}}}catch{}let f=await (0,L.getProductStatsAction)(c.id);if(!a){aT(f.costValue),aV(f.lowStock),aX(f.outOfStock),aZ(f.stockValue);try{localStorage.setItem(d,JSON.stringify({...f,ts:Date.now()}))}catch{}}})(),()=>{a=!0}},[b?.id,c?.id]);let a$=(0,e.useMemo)(()=>[...Z].sort((a,b)=>{let c=0;switch(aO){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===aQ?c:-c}),[Z,aO,aQ]),a_=async()=>{await aj(),ap(new Set),S({title:"Products refreshed",description:"Your product list has been updated."})},a0=async()=>{if(!b?.id||!c?.id)return[];try{let a=await (0,L.getAllProductsAction)(b.id,c.id);if(aa.search){let b=aa.search.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.description.toLowerCase().includes(b)||a.category.toLowerCase().includes(b)||a.supplier&&a.supplier.toLowerCase().includes(b)||a.itemNumber.toLowerCase().includes(b))}return aa.category&&(a=a.filter(a=>a.category===aa.category)),"outOfStock"===aa.stockStatus?a=a.filter(a=>0===a.quantity):"inStock"===aa.stockStatus?a=a.filter(a=>a.quantity>0):"lowStock"===aa.stockStatus&&(a=a.filter(a=>a.quantity>0&&a.quantity<=a.minimumStock)),a.sort((a,b)=>{let c=0;switch(aO){case"name":c=a.name.localeCompare(b.name);break;case"category":c=a.category.localeCompare(b.category);break;case"quantity":c=a.quantity-b.quantity;break;case"sellingPrice":c=a.sellingPrice-b.sellingPrice;break;case"costPrice":c=a.costPrice-b.costPrice;break;case"itemNumber":c=a.itemNumber.localeCompare(b.itemNumber)}return"asc"===aQ?c:-c})}catch(a){return console.error("Error fetching all products for export:",a),S({title:"Export failed",description:"Failed to fetch products for export. Please try again.",variant:"destructive"}),[]}},a1=async()=>{S({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a0();a.length>0?((0,y.exportProductsToCSV)(a),S({title:"Export successful",description:`${a.length} products exported to CSV file.`})):S({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a2=async()=>{S({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a0();a.length>0?((0,x.exportProductsForUpdate)(a),S({title:"Export successful",description:`${a.length} products exported for editing. Use this file with 'Update via CSV'.`})):S({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a3=async()=>{S({title:"Preparing export...",description:"Fetching all products. Please wait."});let a=await a0();a.length>0?((0,z.exportProductsToPDF)(a,an),S({title:"Export successful",description:`${a.length} products exported to PDF file.`})):S({title:"No products to export",description:"There are no products matching your current filters.",variant:"destructive"})},a4=()=>{(0,H.generateProductCSVTemplate)(),S({title:"Template downloaded",description:"CSV template has been downloaded to your device."})},a5=async a=>{try{await am(a),ax(!1),await _()}catch(a){console.error("CSV upload failed:",a),S({title:"Upload failed",description:"There was an error uploading your products. Please try again.",variant:"destructive"})}},a6=async()=>{if(0===ao.size)return;aB(!0),aL({current:0,total:ao.size});let a=0,b=0,c=0;try{for(let d of ao){try{await ac(d)?a++:b++}catch(a){b++,console.error(`Error deleting product ${d}:`,a)}c++,aL({current:c,total:ao.size})}ap(new Set),a>0&&S({title:"Products deleted",description:`Successfully deleted ${a} product${a>1?"s":""}`}),b>0&&S({title:"Some deletions failed",description:`${b} product${b>1?"s":""} could not be deleted`,variant:"destructive"}),ar(!1),await _()}finally{aB(!1),aL(void 0)}},a7=async(a=!1)=>{if(a){S({title:"Preparing for bulk print...",description:"Fetching all products matching current filters."});let a=await a0();if(0===a.length)return void S({title:"No products found",description:"There are no products matching your current filters to print.",variant:"destructive"});av(a)}else{if(0===ao.size)return void S({title:"No products selected",description:"Please select products to print or use 'Print All'.",variant:"destructive"});av(bc)}at(!0)},a8=async a=>{if(0===au.length)return;aD(!0),aN({current:0,total:au.length});let b=0,c=0;try{for(let d of au){if(!d.barcode){c++,aN(a=>a?{...a,current:a.current+1}:void 0);continue}try{let e=a?`TEXT 15,180,"3",0,1,1,"${an.currency} ${(0,w.formatNumber)(d.sellingPrice)}"
`:"";(await fetch("http://localhost:5000/print/label",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({PrinterName:an.defaultPrinterName||"Label Printer",Content:`SIZE 50 mm, 30 mm
GAP 3 mm, 0 mm
CLS
TEXT 15,20,"3",0,1,1,"${d.name}"
BARCODE 15,70,"128",60,1,0,2,2,"${d.barcode}"
${e}PRINT 1
`})})).ok?b++:c++}catch(a){console.error(`Failed to print label for ${d.name}:`,a),c++}aN(a=>a?{...a,current:a.current+1}:void 0),await new Promise(a=>setTimeout(a,100))}b>0&&S({title:"Printing successful",description:`Sent ${b} labels to the printer.`}),c>0&&S({title:"Some labels failed",description:`${c} labels could not be printed. Check your connection.`,variant:"destructive"}),at(!1)}finally{aD(!1),aN(void 0)}},a9=async(a=!1)=>{try{let b=[];if(a)S({title:"Preparing barcode export...",description:"Fetching all products matching current filters."}),b=await a0();else{if(0===ao.size)return void S({title:"No products selected",description:"Please select products to export barcodes.",variant:"destructive"});b=bc}let c=b.filter(a=>a.barcode);if(0===c.length)return void S({title:"No barcodes to export",description:"None of the selected products have barcodes.",variant:"destructive"});aJ(c),aH(!0)}catch(a){console.error("Failed to prepare barcode export:",a),S({title:"Export preparation failed",description:"Failed to prepare products for export.",variant:"destructive"})}},ba=async a=>{aF(!0);try{S({title:"Generating PDF...",description:`Exporting ${aI.length} barcode${aI.length>1?"s":""}...`}),await (0,M.exportBulkBarcodesToPDF)(aI,{showPrice:a.showPrice,currency:an.currency}),S({title:"Export successful",description:`${aI.length} barcode${aI.length>1?"s":""} exported to PDF.`}),aH(!1)}catch(a){console.error("Barcode export failed:",a),S({title:"Export failed",description:"Failed to export barcodes. Please try again.",variant:"destructive"})}finally{aF(!1)}},bb=async(a,b)=>{try{if(await ad(a,b))return S({title:"Product updated",description:"Product details have been updated successfully."}),!0;return S({title:"Update failed",description:"Failed to update product. Please try again.",variant:"destructive"}),!1}catch(a){return console.error("Error updating product:",a),S({title:"Update failed",description:"An error occurred while updating the product.",variant:"destructive"}),!1}},bc=(0,e.useMemo)(()=>a$.filter(a=>ao.has(a.id)),[a$,ao]);return Q||!c||$&&0===Y.length?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,d.jsx)(A.default,{}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Loading products..."})]}):(0,d.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[(0,d.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,d.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>a("/inventory"),className:"shrink-0 h-8 w-8",title:"Back to inventory",children:(0,d.jsx)(m.ArrowLeft,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("h1",{className:"text-lg md:text-2xl lg:text-3xl font-bold text-sales-dark",children:"Products"}),(0,d.jsx)("p",{className:"text-xs md:text-base text-muted-foreground",children:"Manage your product inventory and pricing"})]})]}),T?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[U&&(0,d.jsxs)(g.Button,{onClick:()=>a("/inventory/new"),className:"flex-1 gap-2 h-9",children:[(0,d.jsx)(h.Plus,{size:16})," Add Product"]}),(0,d.jsx)(g.Button,{onClick:a_,variant:"outline",size:"icon",disabled:$||ak,className:"shrink-0 h-9 w-9",children:(0,d.jsx)(i.RefreshCw,{className:`h-4 w-4 ${$||ak?"animate-spin":""}`})})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:U&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a4,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(j.Download,{size:14})," Template"]}),(0,d.jsxs)(g.Button,{onClick:()=>ax(!0),variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(k.Upload,{size:14})," Add CSV"]})]})}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:V&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a2,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(j.Download,{size:14})," Export for Editing"]}),(0,d.jsxs)(g.Button,{onClick:()=>az(!0),variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(k.Upload,{size:14})," Update CSV"]})]})}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:X&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a1,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(j.Download,{size:14})," Full Export"]}),(0,d.jsxs)(g.Button,{onClick:a3,variant:"outline",className:"gap-1 text-xs h-8",children:[(0,d.jsx)(j.Download,{size:14})," PDF"]})]})}),W&&ao.size>0&&(0,d.jsxs)(g.Button,{onClick:()=>ar(!0),variant:"destructive",className:"w-full gap-2 text-xs h-8",disabled:aA,children:[(0,d.jsx)(l.Trash2,{size:14})," Delete Selected (",ao.size,")"]}),V&&(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)(g.Button,{onClick:()=>a7(!1),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ao.size||aC,children:[(0,d.jsx)(n.Printer,{size:14})," Print Selected"]}),(0,d.jsxs)(g.Button,{onClick:()=>a7(!0),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ai||aC,children:[(0,d.jsx)(n.Printer,{size:14})," Print All (",ai,")"]})]}),X&&(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)(g.Button,{onClick:()=>a9(!1),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ao.size||aE,children:[(0,d.jsx)(j.Download,{size:14})," Export Barcodes"]}),(0,d.jsxs)(g.Button,{onClick:()=>a9(!0),variant:"outline",className:"gap-2 text-xs h-8",disabled:0===ai||aE,children:[(0,d.jsx)(j.Download,{size:14})," All Barcodes"]})]})]}):(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,d.jsx)(g.Button,{onClick:a_,variant:"outline",size:"icon",disabled:$||ak,title:"Refresh products",children:(0,d.jsx)(i.RefreshCw,{className:`h-4 w-4 ${$||ak?"animate-spin":""}`})}),U&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a4,variant:"outline",className:"gap-2",children:[(0,d.jsx)(j.Download,{size:16})," CSV Template"]}),(0,d.jsxs)(g.Button,{onClick:()=>ax(!0),variant:"outline",className:"gap-2",children:[(0,d.jsx)(k.Upload,{size:16})," Add via CSV"]})]}),V&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a2,variant:"outline",className:"gap-2",children:[(0,d.jsx)(j.Download,{size:16})," Export for Editing"]}),(0,d.jsxs)(g.Button,{onClick:()=>az(!0),variant:"outline",className:"gap-2",children:[(0,d.jsx)(k.Upload,{size:16})," Update via CSV"]})]}),X&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:a1,variant:"outline",className:"gap-2",children:[(0,d.jsx)(j.Download,{size:16})," Full Export"]}),(0,d.jsxs)(g.Button,{onClick:a3,variant:"outline",className:"gap-2",children:[(0,d.jsx)(j.Download,{size:16})," Export PDF"]})]}),W&&ao.size>0&&(0,d.jsxs)(g.Button,{onClick:()=>ar(!0),variant:"destructive",className:"gap-2",disabled:aA,children:[(0,d.jsx)(l.Trash2,{size:16})," Delete Selected (",ao.size,")"]}),V&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Button,{onClick:()=>a7(!1),variant:"outline",className:"gap-2",disabled:0===ao.size||aC,children:[(0,d.jsx)(n.Printer,{size:16})," Print Selected"]}),(0,d.jsxs)(g.Button,{onClick:()=>a7(!0),variant:"outline",className:"gap-2",disabled:0===ai||aC,children:[(0,d.jsx)(n.Printer,{size:16})," Print All (",ai,")"]})]}),X&&(0,d.jsxs)(N.DropdownMenu,{children:[(0,d.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{variant:"outline",className:"gap-2",disabled:aE,children:[(0,d.jsx)(j.Download,{size:16})," Export Barcodes ",(0,d.jsx)(O.ChevronDown,{size:16})]})}),(0,d.jsxs)(N.DropdownMenuContent,{align:"end",children:[(0,d.jsxs)(N.DropdownMenuItem,{onClick:()=>a9(!1),disabled:0===ao.size,children:[(0,d.jsx)(j.Download,{className:"mr-2 h-4 w-4"}),"Selected Products (",ao.size,")"]}),(0,d.jsx)(N.DropdownMenuSeparator,{}),(0,d.jsxs)(N.DropdownMenuItem,{onClick:()=>a9(!0),disabled:0===ai,children:[(0,d.jsx)(j.Download,{className:"mr-2 h-4 w-4"}),"All Products (",ai,")"]})]})]}),U&&(0,d.jsxs)(g.Button,{onClick:()=>a("/inventory/new"),className:"gap-2",children:[(0,d.jsx)(h.Plus,{size:16})," Add Product"]})]})]})}),(0,d.jsx)(s.default,{products:Y,hideStockValue:!0,totalCountOverride:ai,totalCostValueOverride:aS,lowStockOverride:aU,outOfStockOverride:aW,totalStockValueOverride:aY}),(0,d.jsxs)(K.Card,{className:"shadow-sm",children:[(0,d.jsx)(K.CardHeader,{className:"pb-2 md:pb-6",children:(0,d.jsx)(K.CardTitle,{className:"text-sm md:text-lg",children:"Filter Products"})}),(0,d.jsx)(K.CardContent,{className:"pt-0",children:(0,d.jsx)(r.default,{filters:aa,setFilters:ab,categories:al,productsCount:a$.length})})]}),(0,d.jsxs)(K.Card,{className:"shadow-sm",children:[(0,d.jsxs)(K.CardHeader,{className:"pb-2 md:pb-6",children:[(0,d.jsx)(K.CardTitle,{className:"text-sm md:text-lg flex items-center justify-between",children:(0,d.jsxs)("span",{children:["Products (",ai,")",ao.size>0&&(0,d.jsxs)("span",{className:"text-xs font-normal text-muted-foreground ml-2",children:[ao.size," selected"]})]})}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground mt-2 p-2 bg-blue-50 rounded border-l-4 border-blue-400",children:["💡 ",(0,d.jsx)("strong",{children:"Tip:"})," Click on Category, Cost Price, or Selling Price to edit them directly in the table"]})]}),(0,d.jsxs)(K.CardContent,{className:"p-0",children:[(0,d.jsx)(q.default,{products:a$,isLoading:$,showAllFields:!0,enableBulkActions:!0,selectedProductIds:ao,onToggleProductSelection:a=>{let b=new Set(ao);b.has(a)?b.delete(a):b.add(a),ap(b)},onToggleAllProducts:a=>{ao.size===a.length?ap(new Set):ap(new Set(a))},sortField:aO,sortOrder:aQ,onSort:a=>{aO===a?aR("asc"===aQ?"desc":"asc"):(aP(a),aR("asc"))},onUpdateProduct:bb,categories:al.map(a=>a.name)}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 md:p-4 border-t",children:[(0,d.jsxs)("div",{className:"text-xs md:text-sm text-muted-foreground",children:["Showing ",(ae-1)*ag+1,"–",Math.min(ae*ag,ai)," of ",ai]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("select",{className:"border rounded px-2 py-1 text-xs md:text-sm",value:ag,onChange:a=>ah(Number(a.target.value)),children:[20,50,100].map(a=>(0,d.jsxs)("option",{value:a,children:[a," / page"]},a))}),(0,d.jsx)(g.Button,{variant:"outline",size:"sm",disabled:1===ae||$,onClick:()=>af(Math.max(1,ae-1)),children:"Prev"}),(0,d.jsx)(g.Button,{variant:"outline",size:"sm",disabled:ae*ag>=ai||$,onClick:()=>af(ae+1),children:"Next"})]})]})]})]}),(0,d.jsx)(C.default,{open:aw,onOpenChange:ax,onUpload:a5,categories:al.map(a=>a.name)}),(0,d.jsx)(D.default,{open:ay,onOpenChange:az,userId:b?.id}),(0,d.jsx)(B.default,{open:aq,onOpenChange:ar,selectedProducts:bc,onConfirm:a6,isDeleting:aA,deletionProgress:aK}),(0,d.jsx)(E.default,{open:as,onOpenChange:at,selectedProducts:au,onConfirm:a8,isPrinting:aC,printProgress:aM}),(0,d.jsx)(F.default,{open:aG,onOpenChange:aH,productCount:aI.filter(a=>a.barcode).length,onConfirm:ba,isExporting:aE})]})}]),c()}catch(a){c(a)}},!1),342753,a=>a.a(async(b,c)=>{try{var d=a.i(579168),e=a.i(627068),f=a.i(332759),g=a.i(539141),h=a.i(706555),i=a.i(159047),j=a.i(509193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Products",pathname:"/Products",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Products",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_da286b32._.js.map