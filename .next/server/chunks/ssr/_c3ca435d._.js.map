{"version":3,"sources":["../../../../src/hooks/useCashTransactions.ts","../../../../src/types/cash.ts","../../../../src/app/actions/data%3A893926%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A4f95ca%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ade34e9%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ac1d5cb%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Add5463%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A327990%20%3Ctext/javascript%3E","../../../../src/hooks/useCashAccounts.ts","../../../../src/app/actions/data%3A65045a%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A857236%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Ab2829c%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A6b1f28%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A3c7250%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A9a22ee%20%3Ctext/javascript%3E","../../../../src/hooks/useSalesCategories.ts","../../../../src/app/actions/data%3Adfe215%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A188138%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A9c10dc%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A263db4%20%3Ctext/javascript%3E"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  CashTransaction,\r\n  DbCashTransaction,\r\n  CashTransactionFormData,\r\n  DailyCashSummary,\r\n  mapDbCashTransactionToCashTransaction\r\n} from '@/types/cash';\r\nimport {\r\n  getCashTransactionsAction,\r\n  createCashTransactionAction,\r\n  updateCashTransactionAction,\r\n  deleteCashTransactionAction,\r\n  getAccountOpeningBalanceAction,\r\n  createBulkCashTransactionsAction\r\n} from '@/app/actions/finance';\r\n\r\nexport const useCashTransactions = (accountId?: string) => {\r\n  const { user } = useAuth();\r\n  const { currentBusiness } = useBusiness();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadTransactions = useCallback(async (): Promise<CashTransaction[]> => {\r\n    try {\r\n      if (!user || !currentBusiness) {\r\n        return [];\r\n      }\r\n\r\n      const result = await getCashTransactionsAction(currentBusiness.id, accountId);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch transactions');\r\n      }\r\n\r\n      // Format all transactions\r\n      const formattedTransactions = result.data.map((item: any) => {\r\n        const dbTransaction: DbCashTransaction = {\r\n          id: item.id,\r\n          user_id: item.user_id,\r\n          account_id: item.account_id,\r\n          amount: Number(item.amount),\r\n          transaction_type: item.transaction_type,\r\n          category: item.category,\r\n          description: item.description,\r\n          person_in_charge: item.person_in_charge,\r\n          tags: item.tags,\r\n          date: item.date,\r\n          payment_method: item.payment_method,\r\n          receipt_image: item.receipt_image,\r\n          created_at: item.created_at,\r\n          updated_at: item.updated_at\r\n        };\r\n        return mapDbCashTransactionToCashTransaction(dbTransaction);\r\n      });\r\n\r\n      // Sort\r\n      formattedTransactions.sort((a, b) => {\r\n        const dateCompare = new Date(b.date).getTime() - new Date(a.date).getTime();\r\n        if (dateCompare !== 0) return dateCompare;\r\n        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n      });\r\n\r\n      return formattedTransactions;\r\n    } catch (error) {\r\n      console.error('Error loading cash transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash transactions\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [user, currentBusiness?.id, accountId, toast]);\r\n\r\n  const queryKey = useMemo(() => ['cash_transactions', currentBusiness?.id, user?.id, accountId], [currentBusiness?.id, user?.id, accountId]);\r\n\r\n  const { data: transactions = [], isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadTransactions,\r\n    enabled: !!user && !!currentBusiness?.id,\r\n    staleTime: 30_000,\r\n  });\r\n\r\n  const isLoading = isQueryLoading && transactions.length === 0;\r\n\r\n  const createTransaction = async (transactionData: CashTransactionFormData) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated');\r\n\r\n      const result = await createCashTransactionAction({\r\n        ...transactionData,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: transactionData.transactionType === 'transfer'\r\n          ? \"Transfer completed successfully\"\r\n          : \"Cash transaction created successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n\r\n      return Array.isArray(result.data)\r\n        ? mapDbCashTransactionToCashTransaction(result.data[0])\r\n        : mapDbCashTransactionToCashTransaction(result.data as any);\r\n    } catch (error) {\r\n      console.error('Error creating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const createBulkTransactions = async (transactionsData: CashTransactionFormData[]) => {\r\n    try {\r\n      if (!user || !currentBusiness) throw new Error('User not authenticated');\r\n\r\n      const payloads = transactionsData.map(t => ({\r\n        ...t,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      }));\r\n\r\n      const result = await createBulkCashTransactionsAction(payloads);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: `Successfully created ${transactionsData.length} transactions`\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return (result.data as any[]).map((item: any) => mapDbCashTransactionToCashTransaction(item));\r\n    } catch (error) {\r\n      console.error('Error creating bulk transactions:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create bulk transactions\",\r\n        variant: \"destructive\"\r\n      });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const updateTransaction = async (id: string, updates: Partial<CashTransactionFormData>) => {\r\n    try {\r\n      const result = await updateCashTransactionAction(id, updates);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Transaction updated successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      return mapDbCashTransactionToCashTransaction(result.data as any);\r\n    } catch (error) {\r\n      console.error('Error updating cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const deleteTransaction = async (id: string, onDeleted?: () => void) => {\r\n    try {\r\n      if (!currentBusiness) throw new Error('No business selected');\r\n      const result = await deleteCashTransactionAction(id, currentBusiness.id);\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash transaction deleted successfully\"\r\n      });\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash transaction:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash transaction\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountOpeningBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    try {\r\n      if (!currentBusiness) return 0;\r\n      const result = await getAccountOpeningBalanceAction(accountId, currentBusiness.id);\r\n      return result.success ? result.data : 0;\r\n    } catch (error) {\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  const getDailySummary = useCallback(async (date: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const dateStr = date.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] === dateStr\r\n    );\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterday = new Date(date);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n    const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n\r\n    let yesterdayTransactions = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= yesterdayStr\r\n    );\r\n\r\n    if (accountId) {\r\n      yesterdayTransactions = yesterdayTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const yesterdayCashIn = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const yesterdayCashOut = yesterdayTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + yesterdayCashIn - yesterdayCashOut;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const getDateRangeSummary = useCallback(async (startDate: Date, endDate: Date, accountId?: string): Promise<DailyCashSummary> => {\r\n    const startDateStr = startDate.toISOString().split('T')[0];\r\n    const endDateStr = endDate.toISOString().split('T')[0];\r\n\r\n    let filteredTransactions = transactions.filter(t => {\r\n      const transactionDateStr = t.date.toISOString().split('T')[0];\r\n      return transactionDateStr >= startDateStr && transactionDateStr <= endDateStr;\r\n    });\r\n\r\n    if (accountId) {\r\n      filteredTransactions = filteredTransactions.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersIn = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const transfersOut = filteredTransactions\r\n      .filter(t => t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const dayBeforeStart = new Date(startDate);\r\n    dayBeforeStart.setDate(dayBeforeStart.getDate() - 1);\r\n    const dayBeforeStartStr = dayBeforeStart.toISOString().split('T')[0];\r\n\r\n    let transactionsBeforeRange = transactions.filter(t =>\r\n      t.date.toISOString().split('T')[0] <= dayBeforeStartStr\r\n    );\r\n\r\n    if (accountId) {\r\n      transactionsBeforeRange = transactionsBeforeRange.filter(t => t.accountId === accountId);\r\n    }\r\n\r\n    const cashInBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_in' || t.transactionType === 'transfer_in')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    const cashOutBeforeRange = transactionsBeforeRange\r\n      .filter(t => t.transactionType === 'cash_out' || t.transactionType === 'transfer_out')\r\n      .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    let accountOpeningBalance = 0;\r\n    if (accountId) {\r\n      accountOpeningBalance = await getAccountOpeningBalance(accountId);\r\n    }\r\n\r\n    const openingBalance = accountOpeningBalance + cashInBeforeRange - cashOutBeforeRange;\r\n    const closingBalance = openingBalance + cashIn - cashOut;\r\n\r\n    return {\r\n      date: startDate,\r\n      openingBalance,\r\n      cashIn,\r\n      cashOut,\r\n      transfersIn,\r\n      transfersOut,\r\n      closingBalance\r\n    };\r\n  }, [transactions, getAccountOpeningBalance]);\r\n\r\n  const refreshTransactions = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  return useMemo(() => ({\r\n    transactions,\r\n    isLoading,\r\n    createTransaction,\r\n    createBulkTransactions,\r\n    updateTransaction,\r\n    deleteTransaction,\r\n    getDailySummary,\r\n    getDateRangeSummary,\r\n    refreshTransactions\r\n  }), [transactions, isLoading, createTransaction, createBulkTransactions, updateTransaction, deleteTransaction, getDailySummary, getDateRangeSummary, refreshTransactions]);\r\n};\r\n","\r\n// Cash management types\r\nexport interface CashAccount {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashAccount {\r\n  id: string;\r\n  user_id: string;\r\n  name: string;\r\n  description: string | null;\r\n  opening_balance: number;\r\n  is_default: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashTransaction {\r\n  id: string;\r\n  accountId: string | null;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out';\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string | null;\r\n  tags: string[] | null;\r\n  date: Date;\r\n  paymentMethod: string | null;\r\n  receiptImage: string | null;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface DbCashTransaction {\r\n  id: string;\r\n  user_id: string;\r\n  account_id: string | null;\r\n  amount: number;\r\n  transaction_type: string;\r\n  category: string;\r\n  description: string;\r\n  person_in_charge: string | null;\r\n  tags: string[] | null;\r\n  date: string;\r\n  payment_method: string | null;\r\n  receipt_image: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface CashAccountFormData {\r\n  name: string;\r\n  description: string;\r\n  openingBalance: number;\r\n  isDefault: boolean;\r\n}\r\n\r\nexport interface CashTransactionFormData {\r\n  accountId: string;\r\n  amount: number;\r\n  transactionType: 'cash_in' | 'cash_out' | 'transfer';\r\n  toAccountId?: string;\r\n  category: string;\r\n  description: string;\r\n  personInCharge: string;\r\n  tags: string[];\r\n  date: Date;\r\n  paymentMethod: string;\r\n  receiptImage: string;\r\n}\r\n\r\nexport interface DailyCashSummary {\r\n  date: Date;\r\n  openingBalance: number;\r\n  cashIn: number;\r\n  cashOut: number;\r\n  transfersIn: number;\r\n  transfersOut: number;\r\n  closingBalance: number;\r\n}\r\n\r\n// Conversion functions\r\nexport const mapDbCashAccountToCashAccount = (dbAccount: DbCashAccount): CashAccount => {\r\n  return {\r\n    id: dbAccount.id,\r\n    name: dbAccount.name,\r\n    description: dbAccount.description,\r\n    openingBalance: Number(dbAccount.opening_balance),\r\n    isDefault: dbAccount.is_default,\r\n    createdAt: new Date(dbAccount.created_at),\r\n    updatedAt: new Date(dbAccount.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbInsert = (formData: CashAccountFormData, userId: string): Omit<DbCashAccount, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    name: formData.name,\r\n    description: formData.description || null,\r\n    opening_balance: formData.openingBalance,\r\n    is_default: formData.isDefault\r\n  };\r\n};\r\n\r\nexport const mapCashAccountFormToDbUpdate = (formData: Partial<CashAccountFormData>): Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> => {\r\n  const result: Partial<Omit<DbCashAccount, 'id' | 'user_id' | 'created_at' | 'updated_at'>> = {};\r\n\r\n  if (formData.name !== undefined) result.name = formData.name;\r\n  if (formData.description !== undefined) result.description = formData.description || null;\r\n  if (formData.openingBalance !== undefined) result.opening_balance = formData.openingBalance;\r\n  if (formData.isDefault !== undefined) result.is_default = formData.isDefault;\r\n\r\n  return result;\r\n};\r\n\r\nexport const mapDbCashTransactionToCashTransaction = (dbTransaction: DbCashTransaction): CashTransaction => {\r\n  return {\r\n    id: dbTransaction.id,\r\n    accountId: dbTransaction.account_id,\r\n    amount: Number(dbTransaction.amount),\r\n    transactionType: dbTransaction.transaction_type as 'cash_in' | 'cash_out' | 'transfer_in' | 'transfer_out',\r\n    category: dbTransaction.category,\r\n    description: dbTransaction.description,\r\n    personInCharge: dbTransaction.person_in_charge,\r\n    tags: dbTransaction.tags,\r\n    date: new Date(dbTransaction.date),\r\n    paymentMethod: dbTransaction.payment_method,\r\n    receiptImage: dbTransaction.receipt_image,\r\n    createdAt: new Date(dbTransaction.created_at),\r\n    updatedAt: new Date(dbTransaction.updated_at)\r\n  };\r\n};\r\n\r\nexport const mapCashTransactionFormToDbInsert = (formData: CashTransactionFormData, userId: string): Omit<DbCashTransaction, 'id' | 'created_at' | 'updated_at'> => {\r\n  return {\r\n    user_id: userId,\r\n    account_id: formData.accountId,\r\n    amount: formData.amount,\r\n    transaction_type: formData.transactionType,\r\n    category: formData.category,\r\n    description: formData.description,\r\n    person_in_charge: formData.personInCharge || null,\r\n    tags: formData.tags.length > 0 ? formData.tags : null,\r\n    date: formData.date.toISOString().split('T')[0],\r\n    payment_method: formData.paymentMethod || null,\r\n    receipt_image: formData.receiptImage || null\r\n  };\r\n};\r\n","/* __next_internal_action_entry_do_not_use__ [{\"6050d5e4425dec9de12384682af8632685a43503f6\":\"getCashTransactionsAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_20=/*#__PURE__*/createServerReference(\"6050d5e4425dec9de12384682af8632685a43503f6\",callServer,void 0,findSourceMapURL,\"getCashTransactionsAction\");export{$$RSC_SERVER_ACTION_20 as getCashTransactionsAction};","/* __next_internal_action_entry_do_not_use__ [{\"4064724fc471e698ee76d294a980e2a65c0a9c856a\":\"createCashTransactionAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_21=/*#__PURE__*/createServerReference(\"4064724fc471e698ee76d294a980e2a65c0a9c856a\",callServer,void 0,findSourceMapURL,\"createCashTransactionAction\");export{$$RSC_SERVER_ACTION_21 as createCashTransactionAction};","/* __next_internal_action_entry_do_not_use__ [{\"60e4c60d7aa378a229209542057eb77c66409f1850\":\"updateCashTransactionAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_22=/*#__PURE__*/createServerReference(\"60e4c60d7aa378a229209542057eb77c66409f1850\",callServer,void 0,findSourceMapURL,\"updateCashTransactionAction\");export{$$RSC_SERVER_ACTION_22 as updateCashTransactionAction};","/* __next_internal_action_entry_do_not_use__ [{\"605e333b82184dfc91eaa2d1fe6090163e41e2aa78\":\"deleteCashTransactionAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_24=/*#__PURE__*/createServerReference(\"605e333b82184dfc91eaa2d1fe6090163e41e2aa78\",callServer,void 0,findSourceMapURL,\"deleteCashTransactionAction\");export{$$RSC_SERVER_ACTION_24 as deleteCashTransactionAction};","/* __next_internal_action_entry_do_not_use__ [{\"60233cf66a8bd607780138afb600e5b4300ab3ce36\":\"getAccountOpeningBalanceAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_25=/*#__PURE__*/createServerReference(\"60233cf66a8bd607780138afb600e5b4300ab3ce36\",callServer,void 0,findSourceMapURL,\"getAccountOpeningBalanceAction\");export{$$RSC_SERVER_ACTION_25 as getAccountOpeningBalanceAction};","/* __next_internal_action_entry_do_not_use__ [{\"402f81bafe02611b5b5687b2b85c12e36ea9604ccf\":\"createBulkCashTransactionsAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_26=/*#__PURE__*/createServerReference(\"402f81bafe02611b5b5687b2b85c12e36ea9604ccf\",callServer,void 0,findSourceMapURL,\"createBulkCashTransactionsAction\");export{$$RSC_SERVER_ACTION_26 as createBulkCashTransactionsAction};","import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { CashAccount } from '@/types/cash';\r\nimport {\r\n  getCashAccountsAction,\r\n  createCashAccountAction,\r\n  updateCashAccountAction,\r\n  deleteCashAccountAction,\r\n  deleteCashAccountWithTransactionsAction,\r\n  getCashAccountBalanceAction\r\n} from '@/app/actions/finance';\r\n\r\nexport const useCashAccounts = () => {\r\n  const [accounts, setAccounts] = useState<CashAccount[]>([]);\r\n  const { toast } = useToast();\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const loadAccounts = useCallback(async (): Promise<CashAccount[]> => {\r\n    if (!currentBusiness?.id) return [];\r\n\r\n    try {\r\n      const result = await getCashAccountsAction(currentBusiness.id);\r\n\r\n      if (!result.success || !result.data) {\r\n        throw new Error(result.error || 'Failed to fetch accounts');\r\n      }\r\n\r\n      return result.data.map((account: any) => ({\r\n        ...account,\r\n        createdAt: new Date(account.createdAt),\r\n        updatedAt: new Date(account.updatedAt)\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error loading cash accounts:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load cash accounts\",\r\n        variant: \"destructive\"\r\n      });\r\n      return [];\r\n    }\r\n  }, [currentBusiness?.id, toast]);\r\n\r\n  const queryKey = ['cash_accounts', currentBusiness?.id];\r\n  const { data: queriedAccounts, isLoading: isQueryLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: loadAccounts,\r\n    enabled: !!currentBusiness?.id,\r\n    staleTime: 30_000,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (queriedAccounts) {\r\n      setAccounts(queriedAccounts);\r\n    }\r\n  }, [queriedAccounts]);\r\n\r\n  const isLoading = isQueryLoading && !queriedAccounts;\r\n\r\n  const refreshAccounts = useCallback(() => {\r\n    queryClient.invalidateQueries({ queryKey });\r\n  }, [queryClient, queryKey]);\r\n\r\n  const createAccount = useCallback(async (accountData: {\r\n    name: string;\r\n    description?: string;\r\n    openingBalance: number;\r\n    isDefault?: boolean;\r\n  }) => {\r\n    if (!currentBusiness?.id || !user?.id) return null;\r\n\r\n    try {\r\n      const result = await createCashAccountAction({\r\n        ...accountData,\r\n        userId: user.id,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success || !result.data) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account created successfully\"\r\n      });\r\n\r\n      return result.data;\r\n    } catch (error) {\r\n      console.error('Error creating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return null;\r\n    }\r\n  }, [currentBusiness?.id, user?.id, queryClient, queryKey, toast]);\r\n\r\n  const updateAccount = async (id: string, updates: Partial<CashAccount>) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await updateCashAccountAction(id, {\r\n        ...updates,\r\n        locationId: currentBusiness.id\r\n      });\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Cash account updated successfully\"\r\n      });\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error updating cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteAccount = async (id: string, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return { success: false, hasTransactions: false };\r\n\r\n    try {\r\n      const result = await deleteCashAccountAction(id, currentBusiness.id);\r\n\r\n      if (result.success) {\r\n        queryClient.invalidateQueries({ queryKey });\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Cash account deleted successfully\"\r\n        });\r\n        if (onDeleted) onDeleted();\r\n      }\r\n\r\n      return result as any;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return { success: false, hasTransactions: false };\r\n    }\r\n  };\r\n\r\n  const deleteAccountWithTransactions = async (id: string, deleteTransactions: boolean = false, onDeleted?: () => void) => {\r\n    if (!currentBusiness?.id) return false;\r\n\r\n    try {\r\n      const result = await deleteCashAccountWithTransactionsAction(id, currentBusiness.id, deleteTransactions);\r\n\r\n      if (!result.success) throw new Error(result.error);\r\n\r\n      queryClient.invalidateQueries({ queryKey });\r\n      toast({\r\n        title: \"Success\",\r\n        description: deleteTransactions\r\n          ? \"Account and transactions deleted\"\r\n          : \"Account deleted (records unlinked)\"\r\n      });\r\n      if (onDeleted) onDeleted();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error deleting cash account:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete cash account\",\r\n        variant: \"destructive\"\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const getAccountBalance = useCallback(async (accountId: string): Promise<number> => {\r\n    if (!currentBusiness?.id) return 0;\r\n    try {\r\n      const result = await getCashAccountBalanceAction(accountId, currentBusiness.id);\r\n      if (result.success) return result.data as number;\r\n      return 0;\r\n    } catch (error) {\r\n      console.error('Error getting balance:', error);\r\n      return 0;\r\n    }\r\n  }, [currentBusiness?.id]);\r\n\r\n  return useMemo(() => ({\r\n    accounts,\r\n    isLoading,\r\n    createAccount,\r\n    updateAccount,\r\n    deleteAccount,\r\n    deleteAccountWithTransactions,\r\n    getAccountBalance,\r\n    loadAccounts,\r\n    refreshAccounts\r\n  }), [accounts, isLoading, createAccount, updateAccount, deleteAccount, deleteAccountWithTransactions, getAccountBalance, loadAccounts, refreshAccounts]);\r\n};\r\n","/* __next_internal_action_entry_do_not_use__ [{\"408055c65091de6e86656304d04a002881aed3acc6\":\"getCashAccountsAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_14=/*#__PURE__*/createServerReference(\"408055c65091de6e86656304d04a002881aed3acc6\",callServer,void 0,findSourceMapURL,\"getCashAccountsAction\");export{$$RSC_SERVER_ACTION_14 as getCashAccountsAction};","/* __next_internal_action_entry_do_not_use__ [{\"40fec0c16d5b967e0b7b13b4f39e9f33caa55d98fd\":\"createCashAccountAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_15=/*#__PURE__*/createServerReference(\"40fec0c16d5b967e0b7b13b4f39e9f33caa55d98fd\",callServer,void 0,findSourceMapURL,\"createCashAccountAction\");export{$$RSC_SERVER_ACTION_15 as createCashAccountAction};","/* __next_internal_action_entry_do_not_use__ [{\"60cff6e1bde4cdde91ed3aaa29411ed65f1ac6b8ba\":\"updateCashAccountAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_16=/*#__PURE__*/createServerReference(\"60cff6e1bde4cdde91ed3aaa29411ed65f1ac6b8ba\",callServer,void 0,findSourceMapURL,\"updateCashAccountAction\");export{$$RSC_SERVER_ACTION_16 as updateCashAccountAction};","/* __next_internal_action_entry_do_not_use__ [{\"609fff12b333f8481f6eaa00c9f6ed0ca7485d5f62\":\"deleteCashAccountAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_17=/*#__PURE__*/createServerReference(\"609fff12b333f8481f6eaa00c9f6ed0ca7485d5f62\",callServer,void 0,findSourceMapURL,\"deleteCashAccountAction\");export{$$RSC_SERVER_ACTION_17 as deleteCashAccountAction};","/* __next_internal_action_entry_do_not_use__ [{\"701a700c12f80accdeeab232d537f79439d8fe9e50\":\"deleteCashAccountWithTransactionsAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_18=/*#__PURE__*/createServerReference(\"701a700c12f80accdeeab232d537f79439d8fe9e50\",callServer,void 0,findSourceMapURL,\"deleteCashAccountWithTransactionsAction\");export{$$RSC_SERVER_ACTION_18 as deleteCashAccountWithTransactionsAction};","/* __next_internal_action_entry_do_not_use__ [{\"60a22285198ef838d83b1b4a602809518cbd22267e\":\"getCashAccountBalanceAction\"},\"src/app/actions/finance.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_19=/*#__PURE__*/createServerReference(\"60a22285198ef838d83b1b4a602809518cbd22267e\",callServer,void 0,findSourceMapURL,\"getCashAccountBalanceAction\");export{$$RSC_SERVER_ACTION_19 as getCashAccountBalanceAction};","import { useState, useEffect } from 'react';\r\nimport { SalesCategory } from '@/types';\r\nimport { useBusiness } from '@/contexts/BusinessContext';\r\nimport { toast } from '@/hooks/use-toast';\r\nimport { useAuth } from '@/components/auth/AuthProvider';\r\nimport {\r\n  getSalesCategoriesAction,\r\n  createSalesCategoryAction,\r\n  updateSalesCategoryAction,\r\n  deleteSalesCategoryAction\r\n} from '@/app/actions/sales';\r\n\r\nexport const useSalesCategories = () => {\r\n  const [categories, setCategories] = useState<SalesCategory[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { currentBusiness } = useBusiness();\r\n  const { user } = useAuth();\r\n\r\n  const fetchCategories = async () => {\r\n    if (!currentBusiness) {\r\n      setCategories([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await getSalesCategoriesAction(currentBusiness.id);\r\n      if (result.success && result.data) {\r\n        setCategories(result.data as any);\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching sales categories:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch sales categories\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, [currentBusiness]);\r\n\r\n  const createCategory = async (name: string) => {\r\n    if (!currentBusiness || !user) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No business selected or user not authenticated\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const result = await createSalesCategoryAction(currentBusiness.id, user.id, name);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category created successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateCategory = async (id: string, name: string) => {\r\n    try {\r\n      const result = await updateSalesCategoryAction(id, name);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category updated successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to update sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteCategory = async (id: string) => {\r\n    try {\r\n      const result = await deleteSalesCategoryAction(id);\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Sales category deleted successfully\",\r\n        });\r\n        fetchCategories();\r\n        return true;\r\n      } else {\r\n        throw new Error(result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting sales category:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete sales category\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const createDefaultCategories = async () => {\r\n    if (!currentBusiness || !user) return;\r\n\r\n    const defaultCategories = ['Retail', 'Online', 'Wholesale'];\r\n\r\n    try {\r\n      for (const name of defaultCategories) {\r\n        await createSalesCategoryAction(currentBusiness.id, user.id, name, true);\r\n      }\r\n      fetchCategories();\r\n    } catch (error) {\r\n      console.error('Error creating default categories:', error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    categories,\r\n    isLoading,\r\n    createCategory,\r\n    updateCategory,\r\n    deleteCategory,\r\n    createDefaultCategories,\r\n    refetch: fetchCategories,\r\n  };\r\n};","/* __next_internal_action_entry_do_not_use__ [{\"40d192c7133b72d6eb22105e9bdccca4dd09d6c312\":\"getSalesCategoriesAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_4=/*#__PURE__*/createServerReference(\"40d192c7133b72d6eb22105e9bdccca4dd09d6c312\",callServer,void 0,findSourceMapURL,\"getSalesCategoriesAction\");export{$$RSC_SERVER_ACTION_4 as getSalesCategoriesAction};","/* __next_internal_action_entry_do_not_use__ [{\"78f34606537592502556e5eff8bf435c75821848df\":\"createSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"78f34606537592502556e5eff8bf435c75821848df\",callServer,void 0,findSourceMapURL,\"createSalesCategoryAction\");export{$$RSC_SERVER_ACTION_5 as createSalesCategoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"601c76a41759792ff7ede8d55df9ffa468b0da22c2\":\"updateSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_6=/*#__PURE__*/createServerReference(\"601c76a41759792ff7ede8d55df9ffa468b0da22c2\",callServer,void 0,findSourceMapURL,\"updateSalesCategoryAction\");export{$$RSC_SERVER_ACTION_6 as updateSalesCategoryAction};","/* __next_internal_action_entry_do_not_use__ [{\"4048df543ea89e6b499e78c5496b2ff9ac8b3367ff\":\"deleteSalesCategoryAction\"},\"src/app/actions/sales.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_7=/*#__PURE__*/createServerReference(\"4048df543ea89e6b499e78c5496b2ff9ac8b3367ff\",callServer,void 0,findSourceMapURL,\"deleteSalesCategoryAction\");export{$$RSC_SERVER_ACTION_7 as deleteSalesCategoryAction};"],"names":[],"mappings":"wCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCqHO,IAAM,EAAwC,AAAC,IAC7C,CACL,GAAI,EAAc,EAAE,CACpB,UAAW,EAAc,UAAU,CACnC,OAAQ,OAAO,EAAc,MAAM,EACnC,gBAAiB,EAAc,gBAAgB,CAC/C,SAAU,EAAc,QAAQ,CAChC,YAAa,EAAc,WAAW,CACtC,eAAgB,EAAc,gBAAgB,CAC9C,KAAM,EAAc,IAAI,CACxB,KAAM,IAAI,KAAK,EAAc,IAAI,EACjC,cAAe,EAAc,cAAc,CAC3C,aAAc,EAAc,aAAa,CACzC,UAAW,IAAI,KAAK,EAAc,UAAU,EAC5C,UAAW,IAAI,KAAK,EAAc,UAAU,EAC9C,ECxI0L,IAAA,EAAA,EAAA,CAAA,CAAA,QAAsG,IAAM,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,6BCAxI,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,+BCA1I,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,+BCA1I,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,+BCAvI,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,kCCAxI,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,iEPqBtZ,AAAC,IAClC,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACjC,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAc,CAAA,EAAA,EAAA,cAAA,AAAc,IAE5B,EAAmB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UACnC,GAAI,CACF,GAAI,CAAC,GAAQ,CAAC,EACZ,MAAO,EAAE,CAGX,IAAM,EAJyB,AAIhB,MAAM,EAA0B,EAAgB,EAAE,CAAE,GAEnE,GAAI,CAAC,EAAO,OAAO,EAAI,CAAC,EAAO,IAAI,CACjC,CADmC,KAC7B,AAAI,MAAM,EAAO,KAAK,EAAI,gCAIlC,IAAM,EAAwB,EAAO,IAAI,CAAC,GAAG,CAAC,AAAC,IAC7C,IAAM,EAAmC,CACvC,GAAI,EAAK,EAAE,CACX,QAAS,EAAK,OAAO,CACrB,WAAY,EAAK,UAAU,CAC3B,OAAQ,OAAO,EAAK,MAAM,EAC1B,iBAAkB,EAAK,gBAAgB,CACvC,SAAU,EAAK,QAAQ,CACvB,YAAa,EAAK,WAAW,CAC7B,iBAAkB,EAAK,gBAAgB,CACvC,KAAM,EAAK,IAAI,CACf,KAAM,EAAK,IAAI,CACf,eAAgB,EAAK,cAAc,CACnC,cAAe,EAAK,aAAa,CACjC,WAAY,EAAK,UAAU,CAC3B,WAAY,EAAK,UAAU,AAC7B,EACA,OAAO,EAAsC,EAC/C,GASA,OANA,EAAsB,IAAI,CAAC,CAAC,EAAG,KAC7B,IAAM,EAAc,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,UACzE,AAAoB,GAAG,CAAnB,EAA0B,EACvB,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,EACxE,GAEO,CACT,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,mCAAoC,GAClD,EAAM,CACJ,MAAO,QACP,YAAa,mCACb,QAAS,aACX,GACO,EAAE,AACX,CACF,EAAG,CAAC,EAAM,GAAiB,GAAI,EAAW,EAAM,EAE1C,EAAW,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,CAAC,oBAAqB,GAAiB,GAAI,GAAM,GAAI,EAAU,CAAE,CAAC,GAAiB,GAAI,GAAM,GAAI,EAAU,EAEpI,CAAE,KAAM,EAAe,EAAE,CAAE,UAAW,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UACtE,EACA,QAAS,EACT,QAAS,CAAC,CAAC,GAAQ,CAAC,CAAC,GAAiB,GACtC,UAAW,GACb,GAEM,EAAY,GAAkB,AAAwB,MAAX,MAAM,CAEjD,EAAoB,MAAO,IAC/B,GAAI,CACF,GAAI,CAAC,GAAQ,CAAC,EAAiB,MAAM,AAAI,MAAM,0BAE/C,IAAM,EAAS,MAAM,EAA4B,CAC/C,GAAG,CAAe,CAClB,OAAQ,EAAK,EAAE,CACf,WAAY,EAAgB,EAAE,AAChC,GAEA,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAWjD,OATA,EAAM,CACJ,MAAO,UACP,YAAiD,aAApC,EAAgB,eAAe,CACxC,kCACA,uCACN,GAEA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GAElC,MAAM,OAAO,CAAC,EAAO,IAAI,EAC5B,EAAsC,EAAO,IAAI,CAAC,EAAE,EACpD,EAAsC,EAAO,IAAI,CACvD,CAAE,MAAO,EAAO,CAOd,MANA,QAAQ,KAAK,CAAC,mCAAoC,GAClD,EAAM,CACJ,MAAO,QACP,YAAa,oCACb,QAAS,aACX,GACM,CACR,CACF,EAEM,EAAyB,MAAO,IACpC,GAAI,CACF,GAAI,CAAC,GAAQ,CAAC,EAAiB,MAAM,AAAI,MAAM,0BAE/C,IAAM,EAAW,EAAiB,GAAG,CAAC,IAAK,AAAC,CAC1C,GAAG,CAAC,CACJ,OAAQ,EAAK,EAAE,CACf,WAAY,EAAgB,EAAE,CAChC,CAAC,EAEK,EAAS,MAAM,EAAiC,GAEtD,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAQjD,OANA,EAAM,CACJ,MAAO,UACP,YAAa,CAAC,qBAAqB,EAAE,EAAiB,MAAM,CAAC,aAAa,CAAC,AAC7E,GAEA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACjC,EAAO,IAAI,CAAW,GAAG,CAAE,AAAD,GAAe,EAAsC,GACzF,CAAE,MAAO,EAAO,CAOd,MANA,QAAQ,KAAK,CAAC,oCAAqC,GACnD,EAAM,CACJ,MAAO,QACP,YAAa,qCACb,QAAS,aACX,GACM,CACR,CACF,EAEM,EAAoB,MAAO,EAAY,KAC3C,GAAI,CACF,IAAM,EAAS,MAAM,EAA4B,EAAI,GACrD,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAQjD,OANA,EAAM,CACJ,MAAO,UACP,YAAa,kCACf,GAEA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GAClC,EAAsC,EAAO,IAAI,CAC1D,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,mCAAoC,GAClD,EAAM,CACJ,MAAO,QACP,YAAa,+BACb,QAAS,aACX,GACO,IACT,CACF,EAEM,EAAoB,MAAO,EAAY,KAC3C,GAAI,CACF,GAAI,CAAC,EAAiB,MAAU,AAAJ,MAAU,wBACtC,IAAM,EAAS,MAAM,EAA4B,EAAI,EAAgB,EAAE,EACvE,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EASjD,OAPA,EAAM,CACJ,MAAO,UACP,YAAa,uCACf,GAEA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACrC,GAAW,KACR,CACT,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,mCAAoC,GAClD,EAAM,CACJ,MAAO,QACP,YAAa,oCACb,QAAS,aACX,IACO,CACT,CACF,EAEM,EAA2B,CAAA,EAAA,EAAA,WAAW,AAAX,EAAY,MAAO,IAClD,GAAI,CACF,GAAI,CAAC,EAAiB,OAAO,EAC7B,IAAM,EAAS,MAAM,EAA+B,EAAW,EAAgB,EAAE,EACjF,OAAO,EAAO,OAAO,CAAG,EAAO,IAAI,CAAG,CACxC,CAAE,MAAO,EAAO,CACd,OAAO,CACT,CACF,EAAG,CAAC,GAAiB,GAAG,EAElB,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,MAAO,EAAY,KACrD,IAAM,EAAU,EAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE5C,EAAuB,EAAa,MAAM,CAAC,GAC7C,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAK,GAGrC,IACF,EAAuB,EAAqB,GAD/B,GACqC,CAAC,GAAK,EAAE,SAAS,GAAK,EAAA,EAG1E,IAAM,EAAS,EACZ,MAAM,CAAC,GAA2B,YAAtB,EAAE,eAAe,EAAwC,gBAAtB,EAAE,eAAe,EAChE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAU,EACb,MAAM,CAAC,GAA2B,aAAtB,EAAE,eAAe,EAAmB,AAAsB,mBAApB,eAAe,EACjE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAc,EACjB,MAAM,CAAC,GAA2B,gBAAtB,EAAE,eAAe,EAC7B,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAe,EAClB,MAAM,CAAC,GAA2B,iBAAtB,EAAE,eAAe,EAC7B,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAY,IAAI,KAAK,GAC3B,EAAU,OAAO,CAAC,EAAU,OAAO,GAAK,GACxC,IAAM,EAAe,EAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAEtD,EAAwB,EAAa,MAAM,CAAC,GAC9C,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAI,GAGpC,IACF,EAAwB,EAAsB,GADjC,GACuC,CAAC,GAAK,EAAE,SAAS,GAAK,EAAA,EAG5E,IAAM,EAAkB,EACrB,MAAM,CAAC,GAA2B,YAAtB,EAAE,eAAe,EAAwC,gBAAtB,EAAE,eAAe,EAChE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAmB,EACtB,MAAM,CAAC,GAA2B,aAAtB,EAAE,eAAe,EAAyC,iBAAtB,EAAE,eAAe,EACjE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAElC,EAAwB,EACxB,IACF,EAAwB,KADX,CACiB,EAAyB,EAAA,EAGzD,IAAM,EAAiB,EAAwB,EAAkB,EAGjE,MAAO,MACL,iBACA,SACA,UACA,cACA,eACA,EACA,eATqB,EAAiB,EAAS,CAUjD,CACF,EAAG,CAAC,EAAc,EAAyB,EAErC,EAAsB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,MAAO,EAAiB,EAAe,KAC7E,IAAM,EAAe,EAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CACpD,EAAa,EAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAElD,EAAuB,EAAa,MAAM,CAAC,IAC7C,IAAM,EAAqB,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAC7D,OAAO,GAAsB,GAAgB,GAAsB,CACrE,GAEI,IACF,EAAuB,EAAqB,GAD/B,GACqC,CAAC,GAAK,EAAE,SAAS,GAAK,EAAA,EAG1E,IAAM,EAAS,EACZ,MAAM,CAAC,GAA2B,YAAtB,EAAE,eAAe,EAAwC,gBAAtB,EAAE,eAAe,EAChE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAU,EACb,MAAM,CAAC,GAA2B,aAAtB,EAAE,eAAe,EAAyC,iBAAtB,EAAE,eAAe,EACjE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAc,EACjB,MAAM,CAAC,GAA2B,gBAAtB,EAAE,eAAe,EAC7B,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAe,EAClB,MAAM,CAAC,GAA2B,iBAAtB,EAAE,eAAe,EAC7B,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAiB,IAAI,KAAK,GAChC,EAAe,OAAO,CAAC,EAAe,OAAO,GAAK,GAClD,IAAM,EAAoB,EAAe,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAEhE,EAA0B,EAAa,MAAM,CAAC,GAChD,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAI,EAGpC,KACF,EAA0B,EAAwB,EADrC,IAC2C,CAAC,GAAK,EAAE,SAAS,GAAK,EAAA,EAGhF,IAAM,EAAoB,EACvB,MAAM,CAAC,GAAK,AAAsB,cAApB,eAAe,EAAwC,gBAAtB,EAAE,eAAe,EAChE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAEhC,EAAqB,EACxB,MAAM,CAAC,GAA2B,aAAtB,EAAE,eAAe,EAAyC,iBAAtB,EAAE,eAAe,EACjE,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,MAAM,CAAE,GAElC,EAAwB,EACxB,IACF,EAAwB,KADX,CACiB,EAAyB,EAAA,EAGzD,IAAM,EAAiB,EAAwB,EAAoB,EAGnE,MAAO,CACL,KAAM,iBACN,SACA,UACA,cACA,eACA,EACA,eATqB,EAAiB,EAAS,CAUjD,CACF,EAAG,CAAC,EAAc,EAAyB,EAErC,EAAsB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KACtC,EAAY,iBAAiB,CAAC,UAAE,CAAS,EAC3C,EAAG,CAAC,EAAa,EAAS,EAE1B,MAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,CAAC,cACpB,YACA,oBACA,yBACA,EACA,sCACA,kBACA,sBACA,sBACA,EACF,CAAC,CAAG,CAAC,EAAc,EAAW,EAAmB,EAAwB,EAAmB,EAAmB,EAAiB,EAAqB,EAAoB,CAC3K,mHQ5WA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCJwL,EAAA,EAAA,CAAA,CAAA,QAAsG,IAAM,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,yBCAxI,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,2BCA1I,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAkC,AAArB,EAAsB,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,2BCA1I,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,2BCA1H,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,2CCAtJ,EAAoC,CAAA,EAAA,EAAA,kBAAb,GAAa,AAAqB,EAAC,MAAxB,uCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,wDNerZ,KAC7B,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,EAAE,EACpD,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACjC,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAc,CAAA,EAAA,EAAA,cAAc,AAAd,IAEd,EAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC/B,GAAI,CAAC,GAAiB,GAAI,MAAO,EAAE,CAEnC,GAAI,CACF,IAAM,EAAS,MAAM,EAAsB,EAAgB,EAAE,EAE7D,GAAI,CAAC,EAAO,OAAO,EAAI,CAAC,EAAO,IAAI,CACjC,CADmC,KAC7B,AAAI,MAAM,EAAO,KAAK,EAAI,4BAGlC,OAAO,EAAO,IAAI,CAAC,GAAG,CAAE,AAAD,IAAmB,CACxC,GAAG,CAAO,CACV,AAFuC,UAE5B,IAAI,KAAK,EAAQ,SAAS,EACrC,UAAW,IAAI,KAAK,EAAQ,SAAS,EACvC,CAAC,CACH,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAM,CACJ,MAAO,QACP,YAAa,+BACb,QAAS,aACX,GACO,EAAE,AACX,CACF,EAAG,CAAC,GAAiB,GAAI,EAAM,EAEzB,EAAW,CAAC,gBAAiB,GAAiB,GAAG,CACjD,CAAE,KAAM,CAAe,CAAE,UAAW,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UACpE,EACA,QAAS,EACT,QAAS,CAAC,CAAC,GAAiB,GAC5B,UAAW,GACb,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,EAAY,EAEhB,EAAG,CAAC,EAAgB,EAEpB,GALuB,CAKjB,EAAY,GAAkB,CAAC,EAE/B,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAClC,EAAY,iBAAiB,CAAC,UAAE,CAAS,EAC3C,EAAG,CAAC,EAAa,EAAS,EAEpB,EAAgB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,MAAO,IAMvC,GAAI,CAAC,GAAiB,IAAM,CAAC,GAAM,GAAI,OAAO,KAE9C,GAAI,CACF,IAAM,EAAS,MAAM,EAAwB,CAC3C,GAAG,CAAW,CACd,OAAQ,EAAK,EAAE,CACf,WAAY,EAAgB,EAAE,AAChC,GAEA,GAAI,CAAC,EAAO,OAAO,EAAI,CAAC,EAAO,IAAI,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAQjE,OANA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACzC,EAAM,CACJ,MAAO,UACP,YAAa,mCACf,GAEO,EAAO,IAAI,AACpB,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAM,CACJ,MAAO,QACP,YAAa,gCACb,QAAS,aACX,GACO,IACT,CACF,EAAG,CAAC,GAAiB,GAAI,GAAM,GAAI,EAAa,EAAU,EAAM,EAE1D,EAAgB,MAAO,EAAY,KACvC,GAAI,CAAC,GAAiB,GAAI,OAAO,EAEjC,GAAI,CACF,IAAM,EAAS,MAAM,EAAwB,EAAI,CAC/C,GAAG,CAAO,CACV,WAAY,EAAgB,EAC9B,AADgC,GAGhC,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAQjD,OANA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACzC,EAAM,CACJ,MAAO,UACP,YAAa,mCACf,IAEO,CACT,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAM,CACJ,MAAO,QACP,YAAa,gCACb,QAAS,aACX,IACO,CACT,CACF,EAEM,EAAgB,MAAO,EAAY,KACvC,GAAI,CAAC,GAAiB,GAAI,MAAO,CAAE,SAAS,EAAO,iBAAiB,CAAM,EAE1E,GAAI,CACF,IAAM,EAAS,MAAM,EAAwB,EAAI,EAAgB,EAAE,EAWnE,OATI,EAAO,OAAO,EAAE,CAClB,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACzC,EAAM,CACJ,MAAO,UACP,YAAa,mCACf,GACI,GAAW,KAGV,CACT,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAM,CACJ,MAAO,QACP,YAAa,gCACb,QAAS,aACX,GACO,CAAE,QAAS,GAAO,iBAAiB,CAAM,CAClD,CACF,EAEM,EAAgC,MAAO,EAAY,GAA8B,CAAK,CAAE,KAC5F,GAAI,CAAC,GAAiB,GAAI,OAAO,EAEjC,GAAI,CACF,IAAM,EAAS,MAAM,EAAwC,EAAI,EAAgB,EAAE,CAAE,GAErF,GAAI,CAAC,EAAO,OAAO,CAAE,MAAM,AAAI,MAAM,EAAO,KAAK,EAUjD,OARA,EAAY,iBAAiB,CAAC,UAAE,CAAS,GACzC,EAAM,CACJ,MAAO,UACP,YAAa,EACT,mCACA,oCACN,GACI,GAAW,KACR,CACT,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAM,CACJ,MAAO,QACP,YAAa,gCACb,QAAS,aACX,IACO,CACT,CACF,EAEM,EAAoB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,MAAO,IAC3C,GAAI,CAAC,GAAiB,GAAI,OAAO,EACjC,GAAI,CACF,IAAM,EAAS,MAAM,EAA4B,EAAW,EAAgB,EAAE,EAC9E,GAAI,EAAO,OAAO,CAAE,OAAO,EAAO,IAAI,CACtC,OAAO,CACT,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,yBAA0B,GACjC,CACT,CACF,EAAG,CAAC,GAAiB,GAAG,EAExB,MAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,CAAC,UACpB,YACA,gBACA,gBACA,gBACA,gCACA,oBACA,eACA,kBACA,EACF,CAAC,CAAG,CAAC,EAAU,EAAW,EAAe,EAAe,EAAe,EAA+B,EAAmB,EAAc,EAAgB,CACzJ,oCOlNA,IAAA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCJyL,EAAA,EAAA,CAAA,CAAA,QAAsG,IAAM,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAkC,AAArB,EAAsB,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,4BCAxI,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAa,AAAqB,EAAC,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,6BCAzI,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAa,AAAqB,EAAC,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,6BCAzI,EAAmC,CAAA,EAAA,EAAA,iBAAb,IAAa,AAAqB,EAAC,KAAxB,wCAAqE,EAAA,UAAU,CAAC,KAAK,EAAE,EAAA,gBAAgB,CAAC,yDJY7Y,KAChC,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAC1D,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,iBAAE,CAAe,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACjC,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAElB,EAAkB,UACtB,GAAI,CAAC,EAAiB,CACpB,EAAc,EAAE,EAChB,GAAa,GACb,MACF,CAEA,GAAI,CACF,IAAM,EAAS,MAAM,EAAyB,EAAgB,EAAE,EAChE,GAAI,EAAO,OAAO,EAAI,EAAO,IAAI,CAC/B,CADiC,CACnB,EAAO,IAAI,OAEzB,MAAM,AAAI,MAAM,EAAO,KAAK,CAEhC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,mCAAoC,GAClD,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,QACP,YAAa,mCACb,QAAS,aACX,EACF,QAAU,CACR,GAAa,EACf,CACF,EAsGA,MApGA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GACF,EAAG,CAAC,EAAgB,EAkGb,CACL,uBACA,EACA,eAnGqB,MAAO,IAC5B,GAAI,CAAC,GAAmB,CAAC,EAMvB,IAN6B,EAC7B,CAAA,EAAA,EAAA,KAAK,AAAL,EAAM,CACJ,MAAO,QACP,YAAa,iDACb,QAAS,aACX,IACO,EAGT,GAAI,CACF,IAAM,EAAS,MAAM,EAA0B,EAAgB,EAAE,CAAE,EAAK,EAAE,CAAE,GAC5E,GAAI,EAAO,OAAO,CAMhB,CANkB,KAClB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,UACP,YAAa,qCACf,GACA,KACO,CAEP,OAAM,AAAI,MAAM,EAAO,KAAK,CAEhC,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,iCAAkC,GAChD,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,QACP,YAAa,kCACb,QAAS,aACX,IACO,CACT,CACF,EAqEE,eAnEqB,MAAO,EAAY,KACxC,GAAI,CACF,IAAM,EAAS,MAAM,EAA0B,EAAI,GACnD,GAAI,EAAO,OAAO,CAMhB,CANkB,KAClB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,UACP,YAAa,qCACf,GACA,KACO,CAEP,OAAM,AAAI,MAAM,EAAO,KAAK,CAEhC,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,iCAAkC,GAChD,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,QACP,YAAa,kCACb,QAAS,aACX,IACO,CACT,CACF,EA8CE,eA5CqB,MAAO,IAC5B,GAAI,CACF,IAAM,EAAS,MAAM,EAA0B,GAC/C,GAAI,EAAO,OAAO,CAMhB,CANkB,KAClB,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,UACP,YAAa,qCACf,GACA,KACO,CAEP,OAAM,AAAI,MAAM,EAAO,KAAK,CAEhC,CAAE,MAAO,EAAO,CAOd,OANA,QAAQ,KAAK,CAAC,iCAAkC,GAChD,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CACJ,MAAO,QACP,YAAa,kCACb,QAAS,aACX,IACO,CACT,CACF,EAuBE,wBArB8B,UAC9B,GAAI,AAAC,GAAoB,EAIzB,GAAI,CAJ2B,AAK7B,IAAK,IAAM,EALW,EAEE,CAAC,GAGN,MAHgB,SAAU,GAGP,SAHmB,CAIvD,MAAM,EAA0B,EAAgB,EAAE,CAAE,EAAK,EAAE,CAAE,GAAM,GAErE,GACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,qCAAsC,EACtD,CACF,EASE,QAAS,CACX,CACF"}