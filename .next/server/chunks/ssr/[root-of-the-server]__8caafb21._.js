module.exports=[132660,a=>{"use strict";let b=(0,a.i(564375).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],132660)},111628,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-switch-0610ba11c925567c");a.n(b),c()}catch(a){c(a)}},!0),366736,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(111628),g=a.i(799856),h=b([f,g]);[f,g]=h.then?(await h)():h;let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Root,{className:(0,g.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,d.jsx)(f.Thumb,{className:(0,g.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=f.Root.displayName,a.s(["Switch",()=>i]),c()}catch(a){c(a)}},!1),466890,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(108191),f=a.i(964889),g=a.i(531811),h=a.i(500885),i=a.i(120343),j=b([f,g,h,i]);[f,g,h,i]=j.then?(await j)():j,a.s(["useCashAccounts",0,()=>{let[a,b]=(0,d.useState)([]),{toast:c}=(0,e.useToast)(),{currentBusiness:j}=(0,f.useBusiness)(),{user:k}=(0,g.useAuth)(),l=(0,h.useQueryClient)(),m=(0,d.useCallback)(async()=>{if(!j?.id)return[];try{let a=await (0,i.getCashAccountsAction)(j.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch accounts");return a.data.map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}))}catch(a){return console.error("Error loading cash accounts:",a),c({title:"Error",description:"Failed to load cash accounts",variant:"destructive"}),[]}},[j?.id,c]),n=["cash_accounts",j?.id],{data:o,isLoading:p}=(0,h.useQuery)({queryKey:n,queryFn:m,enabled:!!j?.id,staleTime:3e4});(0,d.useEffect)(()=>{o&&b(o)},[o]);let q=p&&!o,r=(0,d.useCallback)(()=>{l.invalidateQueries({queryKey:n})},[l,n]),s=(0,d.useCallback)(async a=>{if(!j?.id||!k?.id)return null;try{let b=await (0,i.createCashAccountAction)({...a,userId:k.id,locationId:j.id});if(!b.success||!b.data)throw Error(b.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account created successfully"}),b.data}catch(a){return console.error("Error creating cash account:",a),c({title:"Error",description:"Failed to create cash account",variant:"destructive"}),null}},[j?.id,k?.id,l,n,c]),t=async(a,b)=>{if(!j?.id)return!1;try{let d=await (0,i.updateCashAccountAction)(a,{...b,locationId:j.id});if(!d.success)throw Error(d.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account updated successfully"}),!0}catch(a){return console.error("Error updating cash account:",a),c({title:"Error",description:"Failed to update cash account",variant:"destructive"}),!1}},u=async(a,b)=>{if(!j?.id)return{success:!1,hasTransactions:!1};try{let d=await (0,i.deleteCashAccountAction)(a,j.id);return d.success&&(l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Cash account deleted successfully"}),b&&b()),d}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),{success:!1,hasTransactions:!1}}},v=async(a,b=!1,d)=>{if(!j?.id)return!1;try{let e=await (0,i.deleteCashAccountWithTransactionsAction)(a,j.id,b);if(!e.success)throw Error(e.error);return l.invalidateQueries({queryKey:n}),c({title:"Success",description:b?"Account and transactions deleted":"Account deleted (records unlinked)"}),d&&d(),!0}catch(a){return console.error("Error deleting cash account:",a),c({title:"Error",description:"Failed to delete cash account",variant:"destructive"}),!1}},w=(0,d.useCallback)(async a=>{if(!j?.id)return 0;try{let b=await (0,i.getCashAccountBalanceAction)(a,j.id);if(b.success)return b.data;return 0}catch(a){return console.error("Error getting balance:",a),0}},[j?.id]);return(0,d.useMemo)(()=>({accounts:a,isLoading:q,createAccount:s,updateAccount:t,deleteAccount:u,deleteAccountWithTransactions:v,getAccountBalance:w,loadAccounts:m,refreshAccounts:r}),[a,q,s,t,u,v,w,m,r])}]),c()}catch(a){c(a)}},!1),131724,a=>{"use strict";let b=(0,a.i(564375).default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);a.s(["Receipt",()=>b],131724)},257257,a=>{"use strict";var b=a.i(665376),c=a.i(128069),d=a.i(122460),e=a.i(126554),f=a.i(759447),g=a.i(178465),h=a.i(385674),i=a.i(304050),j=a.i(284177),k=a.i(671693),l=a.i(460716);a.s(["getDateRangeFromFilter",0,a=>{let m=new Date,n=(0,b.startOfDay)(m);switch(a){case"today":return{from:n,to:(0,c.endOfDay)(m)};case"yesterday":let o=(0,j.subDays)(n,1);return{from:o,to:(0,c.endOfDay)(o)};case"this-week":return{from:(0,d.startOfWeek)(m),to:(0,e.endOfWeek)(m)};case"last-week":let p=(0,d.startOfWeek)((0,k.subWeeks)(m,1));return{from:p,to:(0,e.endOfWeek)(p)};case"this-month":return{from:(0,f.startOfMonth)(m),to:(0,g.endOfMonth)(m)};case"last-month":let q=(0,f.startOfMonth)((0,l.subMonths)(m,1));return{from:q,to:(0,g.endOfMonth)(q)};case"this-year":return{from:(0,h.startOfYear)(m),to:(0,i.endOfYear)(m)};default:return{from:new Date(2e3,0,1),to:(0,c.endOfDay)(m)}}},"isDateInRange",0,(a,b,c)=>!b&&!c||(b?c?a>=b&&a<=c:a>=b:a<=c)])},42720,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-alert-dialog-c4990a6b721eb22e");a.n(b),c()}catch(a){c(a)}},!0),893759,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(42720),g=a.i(799856),h=a.i(396465),i=b([f,g,h]);[f,g,h]=i.then?(await i)():i;let j=f.Root,k=f.Trigger,l=f.Portal,m=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Overlay,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));m.displayName=f.Overlay.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(l,{children:[(0,d.jsx)(m,{}),(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));n.displayName=f.Content.displayName;let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});o.displayName="AlertDialogHeader";let p=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});p.displayName="AlertDialogFooter";let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Title,{ref:c,className:(0,g.cn)("text-lg font-semibold",a),...b}));q.displayName=f.Title.displayName;let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Description,{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));r.displayName=f.Description.displayName;let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Action,{ref:c,className:(0,g.cn)((0,h.buttonVariants)(),a),...b}));s.displayName=f.Action.displayName;let t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Cancel,{ref:c,className:(0,g.cn)((0,h.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));t.displayName=f.Cancel.displayName,a.s(["AlertDialog",()=>j,"AlertDialogAction",()=>s,"AlertDialogCancel",()=>t,"AlertDialogContent",()=>n,"AlertDialogDescription",()=>r,"AlertDialogFooter",()=>p,"AlertDialogHeader",()=>o,"AlertDialogTitle",()=>q,"AlertDialogTrigger",()=>k]),c()}catch(a){c(a)}},!1),304050,a=>{"use strict";var b=a.i(873492);function c(a,c){let d=(0,b.toDate)(a,c?.in),e=d.getFullYear();return d.setFullYear(e+1,0,0),d.setHours(23,59,59,999),d}a.s(["endOfYear",()=>c])},671693,a=>{"use strict";var b=a.i(340151);function c(a,c,d){return(0,b.addWeeks)(a,-c,d)}a.s(["subWeeks",()=>c])},340151,a=>{"use strict";var b=a.i(809694);function c(a,c,d){return(0,b.addDays)(a,7*c,d)}a.s(["addWeeks",()=>c])},178465,a=>{"use strict";var b=a.i(873492);function c(a,c){let d=(0,b.toDate)(a,c?.in),e=d.getMonth();return d.setFullYear(d.getFullYear(),e+1,0),d.setHours(23,59,59,999),d}a.s(["endOfMonth",()=>c])},128069,a=>{"use strict";var b=a.i(873492);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setHours(23,59,59,999),d}a.s(["endOfDay",()=>c])},126554,a=>{"use strict";var b=a.i(226707),c=a.i(873492);function d(a,d){let e=(0,b.getDefaultOptions)(),f=d?.weekStartsOn??d?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,g=(0,c.toDate)(a,d?.in),h=g.getDay();return g.setDate(g.getDate()+((h<f?-7:0)+6-(h-f))),g.setHours(23,59,59,999),g}a.s(["endOfWeek",()=>d])},759447,a=>{"use strict";var b=a.i(873492);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setDate(1),d.setHours(0,0,0,0),d}a.s(["startOfMonth",()=>c])},809694,a=>{"use strict";var b=a.i(490988),c=a.i(873492);function d(a,d,e){let f=(0,c.toDate)(a,e?.in);return isNaN(d)?(0,b.constructFrom)(e?.in||a,NaN):(d&&f.setDate(f.getDate()+d),f)}a.s(["addDays",()=>d])},445475,a=>{"use strict";var b=a.i(490988),c=a.i(873492);function d(a,d,e){let f=(0,c.toDate)(a,e?.in);if(isNaN(d))return(0,b.constructFrom)(e?.in||a,NaN);if(!d)return f;let g=f.getDate(),h=(0,b.constructFrom)(e?.in||a,f.getTime());return(h.setMonth(f.getMonth()+d+1,0),g>=h.getDate())?h:(f.setFullYear(h.getFullYear(),h.getMonth(),g),f)}a.s(["addMonths",()=>d])},460716,a=>{"use strict";var b=a.i(445475);function c(a,c,d){return(0,b.addMonths)(a,-c,d)}a.s(["subMonths",()=>c])},671117,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-tabs-b68482203efb9b9e");a.n(b),c()}catch(a){c(a)}},!0),148608,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(671117),g=a.i(799856),h=b([f,g]);[f,g]=h.then?(await h)():h;let i=f.Root,j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.List,{ref:c,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));j.displayName=f.List.displayName;let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Trigger,{ref:c,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));k.displayName=f.Trigger.displayName;let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));l.displayName=f.Content.displayName,a.s(["Tabs",()=>i,"TabsContent",()=>l,"TabsList",()=>j,"TabsTrigger",()=>k]),c()}catch(a){c(a)}},!1),284177,a=>{"use strict";var b=a.i(809694);function c(a,c,d){return(0,b.addDays)(a,-c,d)}a.s(["subDays",()=>c])},492705,a=>{"use strict";let b=(0,a.i(564375).default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);a.s(["List",()=>b],492705)},279780,a=>{"use strict";let b=(0,a.i(564375).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);a.s(["Tag",()=>b],279780)},73679,a=>{"use strict";let b=(0,a.i(564375).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],73679)},86246,a=>{"use strict";let b=(0,a.i(564375).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],86246)},933286,a=>{"use strict";let b=(0,a.i(564375).default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);a.s(["ArrowUp",()=>b],933286)},787769,a=>{"use strict";let b=(0,a.i(564375).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);a.s(["ArrowDown",()=>b],787769)},737098,a=>{"use strict";let b=(0,a.i(564375).default)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);a.s(["RefreshCcw",()=>b],737098)},104706,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(109254),f=a.i(569834),g=a.i(558277),h=a.i(734637),i=b([e,f]);[e,f]=i.then?(await i)():i,a.s(["default",0,({isOpen:a,onOpenChange:b,imageUrl:c,imageAlt:i="Receipt image"})=>(0,g.useIsMobile)()?(0,d.jsx)(f.Drawer,{open:a,onOpenChange:b,children:(0,d.jsx)(f.DrawerContent,{className:"max-h-[90vh]",children:(0,d.jsxs)("div",{className:"relative p-4",children:[(0,d.jsxs)(f.DrawerClose,{className:"absolute right-4 top-4 z-10 rounded-sm opacity-70 hover:opacity-100 bg-black/50 text-white p-2",children:[(0,d.jsx)(h.X,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,d.jsx)("img",{src:c,alt:i,className:"max-w-full max-h-[80vh] object-contain rounded-lg"})})]})})}):(0,d.jsx)(e.Dialog,{open:a,onOpenChange:b,children:(0,d.jsx)(e.DialogContent,{className:"max-w-4xl max-h-[90vh] p-4",children:(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,d.jsx)("img",{src:c,alt:i,className:"max-w-full max-h-[80vh] object-contain rounded-lg"})})})})]),c()}catch(a){c(a)}},!1),809921,(a,b,c)=>{b.exports=a.x("xlsx-c3c0a7a876112034",()=>require("xlsx-c3c0a7a876112034"))},742801,a=>{"use strict";let b=(0,a.i(564375).default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);a.s(["LayoutGrid",()=>b],742801)},529845,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(108191),f=a.i(964889),g=a.i(500885),h=a.i(120343),i=a.i(531811),j=b([f,g,h,i]);[f,g,h,i]=j.then?(await j)():j,a.s(["useExpenses",0,()=>{let[a,b]=(0,d.useState)([]),{toast:c}=(0,e.useToast)(),{currentBusiness:j}=(0,f.useBusiness)(),{user:k}=(0,i.useAuth)(),l=(0,g.useQueryClient)(),m=(0,d.useCallback)(async()=>{if(!j)return[];try{let a=await (0,h.getExpensesAction)(j.id);if(!a.success||!a.data)throw Error(a.error||"Failed to fetch expenses");return a.data.map(a=>({id:a.id,amount:Number(a.amount),description:a.description,category:a.category,date:new Date(a.date),paymentMethod:a.paymentMethod,personInCharge:a.personInCharge,receiptImage:a.receiptImage,cashAccountId:a.cashAccountId,cashTransactionId:a.cashTransactionId,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}))}catch(a){return console.error("Error loading expenses:",a),c({title:"Error",description:"Failed to load expenses. Please try again.",variant:"destructive"}),[]}},[j?.id,c]),n=["expenses",j?.id],{data:o,isLoading:p,isFetching:q}=(0,g.useQuery)({queryKey:n,queryFn:m,enabled:!!j?.id,staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1});(0,d.useEffect)(()=>{o&&b(o)},[o]);let r=p&&!o,s=async a=>{if(!j||!k)return void c({title:"Error",description:j?"User not authenticated":"No business selected",variant:"destructive"});try{let d={amount:a.amount,description:a.description,category:a.category,date:a.date,paymentMethod:a.paymentMethod,personInCharge:a.personInCharge,receiptImage:a.receiptImage,cashAccountId:a.cashAccountId,userId:k.id,locationId:j.id},e=await (0,h.createExpenseAction)(d,!!a.linkToCash);if(!e.success||!e.data)throw Error(e.error);let f=e.data,g={id:f.id,amount:Number(f.amount),description:f.description,category:f.category,date:new Date(f.date),paymentMethod:f.paymentMethod,personInCharge:f.personInCharge,receiptImage:f.receiptImage,cashAccountId:f.cashAccountId,cashTransactionId:f.cashTransactionId,createdAt:new Date(f.createdAt),updatedAt:new Date(f.updatedAt)};return b(a=>[g,...a]),l.setQueryData(n,a=>a?[g,...a]:[g]),l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Expense created successfully"}),g}catch(a){console.error("Error creating expense:",a),c({title:"Error",description:"Failed to create expense. Please try again.",variant:"destructive"})}},t=async(b,d)=>{try{let e=a.find(a=>a.id===b);if(!e)throw Error("Expense not found");let f={amount:void 0!==d.amount?d.amount:e.amount,description:void 0!==d.description?d.description:e.description,category:void 0!==d.category?d.category:e.category,date:void 0!==d.date?d.date:e.date,paymentMethod:void 0!==d.paymentMethod?d.paymentMethod:e.paymentMethod,personInCharge:void 0!==d.personInCharge?d.personInCharge:e.personInCharge,receiptImage:void 0!==d.receiptImage?d.receiptImage:e.receiptImage,cashAccountId:d.linkToCash?d.cashAccountId:!1===d.linkToCash?null:e.cashAccountId},g=await (0,h.updateExpenseAction)(b,f,e);if(!g.success)throw Error(g.error);l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Expense updated successfully"})}catch(a){console.error("Error updating expense:",a),c({title:"Error",description:"Failed to update expense. Please try again.",variant:"destructive"})}},u=async a=>{try{let d=await (0,h.deleteExpenseAction)(a);if(!d.success)throw Error(d.error);return b(b=>b.filter(b=>b.id!==a)),l.setQueryData(n,b=>b?b.filter(b=>b.id!==a):b),l.invalidateQueries({queryKey:n}),c({title:"Success",description:"Expense deleted successfully"}),!0}catch(a){return console.error("Error deleting expense:",a),c({title:"Error",description:"Failed to delete expense. Please try again.",variant:"destructive"}),!1}},v=async()=>{l.invalidateQueries({queryKey:n})},w=async a=>{if(!j||!k)return void c({title:"Error",description:j?"User not authenticated":"No business selected",variant:"destructive"});try{let b=[];for(let c of a){let a={amount:c.amount,description:c.description,category:c.category,date:c.date,paymentMethod:c.paymentMethod,personInCharge:c.personInCharge,receiptImage:c.receiptImage,cashAccountId:c.cashAccountId,userId:k.id,locationId:j.id},d=await (0,h.createExpenseAction)(a,!!c.linkToCash);if(d.success&&d.data){let a=d.data;b.push({id:a.id,amount:Number(a.amount),description:a.description,category:a.category,date:new Date(a.date),paymentMethod:a.paymentMethod,personInCharge:a.personInCharge,receiptImage:a.receiptImage,cashAccountId:a.cashAccountId,cashTransactionId:a.cashTransactionId,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)})}}return l.invalidateQueries({queryKey:n}),c({title:"Success",description:`Successfully created ${b.length} expenses`}),b}catch(a){throw console.error("Error creating bulk expenses:",a),c({title:"Error",description:"Failed to create bulk expenses. Please try again.",variant:"destructive"}),a}};return{expenses:a,isLoading:r,createExpense:s,createBulkExpenses:w,updateExpense:t,deleteExpense:u,refreshExpenses:v}}]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__8caafb21._.js.map